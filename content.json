{"meta":{"title":"life kicks in right now","subtitle":"life kicks in right now","description":"","author":"ziiyan","url":"http://ziiyan.github.io","root":"/"},"pages":[{"title":"About","date":"2020-02-29T17:00:22.000Z","updated":"2020-02-29T17:07:08.458Z","comments":true,"path":"about/index.html","permalink":"http://ziiyan.github.io/about/index.html","excerpt":"","text":"å› ä¸ŠåŠªåŠ›ï¼Œæœä¸Šéšç¼˜"},{"title":"Tags","date":"2020-02-29T17:11:52.306Z","updated":"2020-02-29T17:01:01.709Z","comments":true,"path":"tags/index.html","permalink":"http://ziiyan.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"çº¢å®ä¹¦4ï¼šå˜é‡ã€ä½œç”¨åŸŸå’Œå†…å­˜","slug":"çº¢å®ä¹¦4ï¼šå˜é‡ã€ä½œç”¨åŸŸå’Œå†…å­˜","date":"2020-08-31T14:16:00.000Z","updated":"2020-08-31T07:58:25.372Z","comments":true,"path":"2020/08/31/çº¢å®ä¹¦4ï¼šå˜é‡ã€ä½œç”¨åŸŸå’Œå†…å­˜/","link":"","permalink":"http://ziiyan.github.io/2020/08/31/%E7%BA%A2%E5%AE%9D%E4%B9%A64%EF%BC%9A%E5%8F%98%E9%87%8F%E3%80%81%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%92%8C%E5%86%85%E5%AD%98/","excerpt":"","text":"åŸå§‹å€¼ä¸å¼•ç”¨å€¼ åŸå§‹å€¼ï¼šæœ€ç®€å•çš„æ•°æ® Undefinedã€Nullã€Booleanã€numberã€Stringã€Symbol æŒ‰å€¼è®¿é—®ï¼Œæ“ä½œå°±æ˜¯å­˜å‚¨åœ¨å˜é‡ä¸­çš„å®é™…å€¼ å¼•ç”¨å€¼ï¼šç”±å¤šä¸ªå€¼æ„æˆçš„å¯¹è±¡ æŒ‰å¼•ç”¨è®¿é—®ï¼Œæ“ä½œçš„æ˜¯è¯¥å¯¹è±¡çš„å¼•ç”¨ åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆ5ï¼‰æŒ‰å€¼è®¿é—®ï¼Œå¯ä»¥æ“ä½œä¿å­˜åœ¨å˜é‡ä¸­çš„å®é™…çš„å€¼ã€‚å æ®å›ºå®šå¤§å°çš„ç©ºé—´ï¼Œè¢«ä¿å­˜åœ¨æ ˆå†…å­˜ä¸­ã€‚ å¼•ç”¨ç±»å‹ï¼ˆ1ï¼‰çš„å€¼æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­çš„å¯¹è±¡ï¼Œä¿å­˜åœ¨å †å†…å­˜ä¸­ã€‚JS ä¸èƒ½ç›´æ¥æ“ä½œå¯¹è±¡çš„å†…å­˜ç©ºé—´ï¼šå¤åˆ¶ä¿å­˜å¯¹è±¡çš„æŸä¸ªå˜é‡æ—¶ï¼Œæ“ä½œå¯¹è±¡çš„å¼•ç”¨ï¼›ä¸ºå¯¹è±¡æ·»åŠ å±æ€§æ—¶ï¼Œæ“ä½œçš„æ˜¯å®é™…çš„å¯¹è±¡ã€‚ å¤åˆ¶å˜é‡å€¼ åŸºæœ¬ç±»å‹ï¼šåˆ›å»ºæ–°å€¼ å¼•ç”¨ç±»å‹ï¼šåˆ›å»ºæ–°å€¼ï¼Œå€¼æ˜¯æŒ‡é’ˆï¼Œå®é™…ä¸æ—§å€¼å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ ä¼ é€’å‚æ•° ECMAScript ä¸­æ‰€æœ‰å‡½æ•°çš„å‚æ•°éƒ½æ˜¯æŒ‰å€¼ä¼ é€’çš„ã€‚ åŸºæœ¬ç±»å‹ï¼šè¢«ä¼ é€’çš„å€¼ä¼šè¢«å¤åˆ¶ç»™ä¸€ä¸ªå±€éƒ¨å˜é‡ã€‚ å¼•ç”¨ç±»å‹ï¼šè¢«ä¼ é€’çš„å€¼çš„åœ°å€å¤åˆ¶ç»™ä¸€ä¸ªå±€éƒ¨å˜é‡ã€‚å› æ­¤è¿™ä¸ªå±€éƒ¨å˜é‡çš„å˜åŒ–ä¼šååº”åœ¨å‡½æ•°çš„å¤–éƒ¨ã€‚ è‹¥åœ¨å‡½æ•°ä½“å†…å¯¹è¿™ä¸ªå±€éƒ¨å˜é‡è¿›è¡Œé‡æ–°èµ‹å€¼ï¼Œé‚£ä¹ˆä¿å­˜çš„åœ°å€å°±æ”¹å˜äº†ï¼ŒæŒ‡å‘çš„å†…å­˜ä¹Ÿä¸å†æ˜¯è¢«ä¼ å…¥çš„å¯¹è±¡ã€‚ 1234567function setName(obj) &#123; obj.name = \"Nicholas\";&#125;var person = new Object();setName(person);alert(person.name); //â€œNicholasâ€ 123456789function setName(obj) &#123; obj.name = \"Nicholas\"; obj = new Object(); obj.name = \"Greg\";&#125;var person = new Object();setName(person);alert(person.name); //â€œNicholasâ€ åœ¨å†…éƒ¨é‡å†™ obj æ—¶ï¼Œå˜é‡å¼•ç”¨çš„å°±æ˜¯ä¸€ä¸ªå±€éƒ¨å¯¹è±¡äº†ã€‚å±€éƒ¨å¯¹è±¡åœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åç«‹å³è¢«é”€æ¯ã€‚ æ£€æµ‹ç±»å‹ åŸºæœ¬ç±»å‹ï¼štypeof å¼•ç”¨ç±»å‹ï¼šinstanceof æ ¹æ®åŸå‹é“¾æ¥è¯†åˆ«12345// result = variable instanceof constructor// æ ¹æ®åŸå‹é“¾æ¥è¯†åˆ«alert(person instanceof Object);alert(person instanceof Array);alert(person instanceof RegExp); æ‰€æœ‰å¼•ç”¨ç±»å‹çš„å€¼éƒ½æ˜¯ Object çš„å®ä¾‹ã€‚Obj instanceof Object å§‹ç»ˆè¿”å› trueï¼Œæ£€æµ‹åŸºæœ¬ç±»å‹å§‹ç»ˆ falseï¼Œå› ä¸ºåŸºæœ¬ç±»å‹ä¸æ˜¯å¯¹è±¡ã€‚ æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆæ‰§è¡Œç¯å¢ƒï¼‰åŠä½œç”¨åŸŸ æ‰§è¡Œä¸Šä¸‹æ–‡å®šä¹‰äº†å˜é‡æˆ–å‡½æ•°å¯ä»¥è®¿é—®çš„æ•°æ®å’Œè¡Œä¸ºã€‚ æ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„å˜é‡å¯¹è±¡ï¼Œä¸Šä¸‹æ–‡ä¸­å®šä¹‰çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°éƒ½ä¿å­˜åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ã€‚ å…¨å±€ä¸Šä¸‹æ–‡ï¼šæ ¹æ®å®¿ä¸»ç¯å¢ƒã€‚WEB æµè§ˆå™¨ä¸­æ˜¯ window å¯¹è±¡ã€‚ å‡½æ•°ä¸Šä¸‹æ–‡ï¼Œå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒï¼Œä¿å­˜åœ¨æ ˆä¸­ã€‚ ä¸Šä¸‹æ–‡ä¸­çš„ä»£ç åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šåˆ›å»ºå˜é‡å¯¹è±¡çš„ä¸€ä¸ªä½œç”¨åŸŸé“¾ ä½œç”¨åŸŸé“¾å†³å®šäº†å„çº§ä¸Šä¸‹æ–‡ä¸­çš„ä»£ç åœ¨è®¿é—®å˜é‡å’Œå‡½æ•°æ—¶çš„é¡ºåº ä½œç”¨åŸŸé“¾çš„å‰ç«¯ï¼Œå§‹ç»ˆæ˜¯å½“å‰æ‰§è¡Œçš„ä»£ç æ‰€åœ¨ç¯å¢ƒçš„å˜é‡å¯¹è±¡ã€‚å¦‚æœè¿™ä¸ªç¯å¢ƒæ˜¯å‡½æ•°ï¼Œåˆ™å°†å…¶æ´»åŠ¨å¯¹è±¡ä½œä¸ºå˜é‡å¯¹è±¡ã€‚æ´»åŠ¨å¯¹è±¡åœ¨æœ€å¼€å§‹æ—¶åªåŒ…å«ä¸€ä¸ªå˜é‡ï¼ˆå³argumentså¯¹è±¡ï¼Œå…¨å±€ç¯å¢ƒä¸­ä¸å­˜åœ¨ï¼‰ã€‚ä¸‹ä¸€ä¸ªå˜é‡å¯¹è±¡æ¥è‡ªåŒ…å«ï¼ˆå¤–éƒ¨ï¼‰ç¯å¢ƒâ€¦â€¦ä¸€ç›´åˆ°å…¨å±€æ‰§è¡Œç¯å¢ƒã€‚æ ‡è¯†ç¬¦è§£ææ˜¯æ²¿ç€ä½œç”¨åŸŸé“¾ä¸€çº§ä¸€çº§åœ°æœç´¢æ ‡è¯†ç¬¦çš„è¿‡ç¨‹ã€‚å†…éƒ¨ç¯å¢ƒå¯ä»¥é€šè¿‡ä½œç”¨åŸŸé“¾è®¿é—®æ‰€æœ‰çš„å¤–éƒ¨ç¯å¢ƒï¼Œä½†å¤–éƒ¨ç¯å¢ƒä¸èƒ½è®¿é—®å†…éƒ¨ç¯å¢ƒé‡çš„å˜é‡å’Œå‡½æ•°ã€‚ å—çº§ä½œç”¨åŸŸvar çš„å‡½æ•°ä½œç”¨åŸŸå£°æ˜ å˜é‡æå‡ï¼šå£°æ˜ä¼šè¢«æ”¾åˆ°å‡½æ•°æˆ–å…¨å±€ä½œç”¨åŸŸçš„é¡¶éƒ¨ å˜é‡æ·»åŠ åˆ°æœ€æ¥è¿‘çš„ä¸Šä¸‹æ–‡ let çš„å—çº§ä½œç”¨åŸŸå£°æ˜ å—çº§ä½œç”¨åŸŸç”±æœ€è¿‘çš„ä¸€å¯¹æ‹¬å· {} ç•Œå®š åŒä¸€ä½œç”¨åŸŸå†…ä¸èƒ½å£°æ˜ä¸¤æ¬¡ ä¸¥æ ¼æ¥è®²ä¹Ÿä¼šå˜é‡æå‡ï¼Œç”±äºæš‚æ—¶æ€§æ­»åŒºï¼Œä¸èƒ½åœ¨å£°æ˜ä¹‹å‰ä½¿ç”¨ const å¸¸é‡ å¿…é¡»åŒæ—¶åˆå§‹åŒ–ä¸ºæŸä¸ªå€¼ï¼Œä¸€æ—¦å£°æ˜ä¸èƒ½å†é‡æ–°èµ‹å€¼ å°½é‡ç”¨ const V8 å¼•æ“ä¼šä¼˜åŒ–ï¼šæ—¶ç¼–è¯‘å™¨å¯ä»¥å°†æ‰€æœ‰å®ä¾‹éƒ½æ›¿æ¢ä¸ºå®é™…çš„å€¼ï¼Œè€Œä¸ä¼šé€šè¿‡æŸ¥è¯¢è¡¨è¿›è¡Œå˜é‡æŸ¥æ‰¾ åƒåœ¾å›æ”¶æ ‡è®°æ¸…ç†ï¼ˆæœ€å¸¸ç”¨ï¼‰ å½“å˜é‡è¿›å…¥ç¯å¢ƒï¼Œæ ‡è®°ä¸ºâ€œè¿›å…¥ç¯å¢ƒâ€ã€‚ é€»è¾‘ä¸Šè®²ï¼Œæ°¸è¿œä¸èƒ½é‡Šæ”¾è¿›å…¥ç¯å¢ƒçš„å˜é‡æ‰€å ç”¨çš„å†…å­˜ã€‚ å½“å˜é‡ç¦»å¼€ç¯å¢ƒæ—¶ï¼Œåˆ™æ ‡è®°â€œç¦»å¼€ç¯å¢ƒâ€ã€‚ å¯ä»¥ä½¿ç”¨ä»»ä½•æ–¹å¼æ¥æ ‡è®°å˜é‡ã€‚å¦‚ï¼š ç¿»è½¬æŸä¸ªç‰¹æ®Šçš„ä½ â€œè¿›å…¥ç¯å¢ƒâ€å˜é‡åˆ—è¡¨åŠâ€œç¦»å¼€ç¯å¢ƒâ€å˜é‡åˆ—è¡¨ åƒåœ¾å›æ”¶ç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œä¼šæ ‡è®°å†…å­˜ä¸­å­˜å‚¨çš„æ‰€æœ‰å˜é‡ï¼ˆè®°ä½ï¼Œæ ‡è®°æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼‰ã€‚ç„¶åï¼Œå®ƒä¼šå°†æ‰€æœ‰åœ¨ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡ï¼Œä»¥åŠè¢«åœ¨ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡å¼•ç”¨çš„å˜é‡çš„æ ‡è®°å»æ‰ã€‚åœ¨æ­¤ä¹‹åå†è¢«åŠ ä¸Šæ ‡è®°çš„å˜é‡å°±æ˜¯å¾…åˆ é™¤çš„äº†ï¼ŒåŸå› æ˜¯ä»»ä½•åœ¨ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡éƒ½è®¿é—®ä¸åˆ°å®ƒä»¬äº†ã€‚éšååƒåœ¾å›æ”¶ç¨‹åºåšä¸€æ¬¡å†…å­˜æ¸…ç†ï¼Œé”€æ¯å¸¦æ ‡è®°çš„æ‰€æœ‰å€¼å¹¶æ”¶å›å®ƒä»¬çš„å†…å­˜ã€‚ å¼•ç”¨è®¡æ•°è·Ÿè¸ªè®°å½•æ¯ä¸ªå€¼è¢«å¼•ç”¨çš„æ¬¡æ•°ï¼Œèµ‹å€¼ç»™å˜é‡åˆ™è¯¥å€¼+1ï¼Œè‹¥å˜é‡å–å¾—å¦ä¸€ä¸ªå€¼ï¼Œåˆ™è¯¥å€¼-1ã€‚ åƒåœ¾æ”¶é›†å™¨ä¸‹æ¬¡è¿è¡Œæ—¶ï¼Œé‡Šæ”¾è®¡æ•° 0 çš„å€¼å ç”¨çš„å†…å­˜ã€‚ å¾ªç¯å¼•ç”¨ å¾ªç¯å¼•ç”¨ä¼šå¯¼è‡´å¼•ç”¨æ¬¡æ•°æ°¸è¿œä¸ä¸º 0BOM å’Œ DOM ä¸­çš„å¯¹è±¡æ˜¯ä½¿ç”¨ C++ ä»¥ COMï¼ˆComponent Object Modelï¼Œç»„ä»¶å¯¹è±¡æ¨¡å‹ï¼‰å¯¹è±¡çš„å½¢å¼å®ç°çš„ï¼ŒCOM å¯¹è±¡çš„åƒåœ¾æ”¶é›†æœºåˆ¶å°±æ˜¯å¼•ç”¨è®¡æ•°ç­–ç•¥ã€‚è§£å†³ï¼šæ‰‹åŠ¨æ–­å¼€å¾ªç¯å¼•ç”¨ï¼ˆèµ‹å€¼ä¸ºnullï¼‰ æ€§èƒ½é—®é¢˜åƒåœ¾æ”¶é›†å™¨æ˜¯å‘¨æœŸè¿è¡Œçš„ï¼Œå¦‚æœä¸ºå˜é‡åˆ†é…çš„å†…å­˜æ•°é‡å¾ˆå¤§ï¼Œé‚£ä¹ˆå›æ”¶å·¥ä½œé‡ä¹Ÿç›¸å½“å¤§ï¼Œç¡®å®šæ—¶é—´é—´éš”å¾ˆé‡è¦ã€‚ ç®¡ç†å†…å­˜ ä½¿ç”¨å…·å¤‡åƒåœ¾æ”¶é›†æœºåˆ¶çš„è¯­è¨€ç¼–å†™ç¨‹åºï¼Œä¸€èˆ¬ä¸å¿…æ“å¿ƒå†…å­˜ç®¡ç†ã€‚ä½† js æ¯”è¾ƒç‰¹æ®Šï¼Œå› ä¸ºåˆ†é…ç»™ Web æµè§ˆå™¨çš„å¯ç”¨å†…å­˜é€šå¸¸æ¯”è¾ƒå°‘ã€‚ å°½é‡å°‘ç”¨å†…å­˜é¡µé¢ä¼šæœ‰æ›´å¥½çš„æ€§èƒ½ã€‚ä¸€æ—¦æ•°æ®ä¸å†æœ‰ç”¨ï¼Œèµ‹å€¼ null æ¥è§£é™¤å¼•ç”¨ã€‚é€‚ç”¨äºå¤§å¤šæ•°å…¨å±€å˜é‡å’Œå…¨å±€å¯¹è±¡çš„å±æ€§ï¼Œå±€éƒ¨å˜é‡ä¼šåœ¨ç¦»å¼€æ‰§è¡Œç¯å¢ƒæ—¶è‡ªåŠ¨è§£é™¤ã€‚ è§£é™¤å¼•ç”¨ä¸æ˜¯è‡ªåŠ¨å›æ”¶å†…å­˜ï¼Œæ˜¯è®©å€¼è„±ç¦»ç¯å¢ƒï¼Œåƒåœ¾æ”¶é›†å™¨ä¸‹æ¬¡è¿è¡Œçš„æ—¶å€™å°†å…¶å›æ”¶ã€‚ let å’Œ const çš„å—çº§ä½œç”¨åŸŸä¹Ÿæœ‰åˆ©äºåƒåœ¾å›æ”¶ç¨‹åºå°½æ—©ä»‹å…¥","categories":[],"tags":[{"name":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","slug":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","permalink":"http://ziiyan.github.io/tags/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}]},{"title":"çº¢å®ä¹¦7ï¼šè¿­ä»£å™¨ä¸ç”Ÿæˆå™¨","slug":"çº¢å®ä¹¦7ï¼šè¿­ä»£å™¨ä¸ç”Ÿæˆå™¨","date":"2020-08-31T11:05:54.000Z","updated":"2020-08-31T13:31:08.608Z","comments":true,"path":"2020/08/31/çº¢å®ä¹¦7ï¼šè¿­ä»£å™¨ä¸ç”Ÿæˆå™¨/","link":"","permalink":"http://ziiyan.github.io/2020/08/31/%E7%BA%A2%E5%AE%9D%E4%B9%A67%EF%BC%9A%E8%BF%AD%E4%BB%A3%E5%99%A8%E4%B8%8E%E7%94%9F%E6%88%90%E5%99%A8/","excerpt":"","text":"ç†è§£è¿­ä»£ å¾ªç¯æ˜¯è¿­ä»£æœºåˆ¶çš„åŸºç¡€ï¼Œè¿™æ˜¯å› ä¸ºå®ƒå¯ä»¥æŒ‡å®šè¿­ä»£çš„æ¬¡æ•°ï¼Œä»¥åŠæ¯æ¬¡è¿­ä»£è¦æ‰§è¡Œä»€ä¹ˆæ“ä½œ Array.prototype.forEach() è¿­ä»£å™¨æ¨¡å¼ è¿­ä»£å™¨æ¨¡å¼æè¿°äº†ä¸€ä¸ªæ–¹æ¡ˆï¼Œå³å¯ä»¥æŠŠæœ‰äº›ç»“æ„ç§°ä¸ºâ€œå¯è¿­ä»£å¯¹è±¡â€ï¼Œå› ä¸ºå®ƒä»¬å®ç°äº†æ­£å¼çš„ Iterable æ¥å£ï¼Œè€Œä¸”å¯ä»¥é€šè¿‡è¿­ä»£å™¨ Iterator æ¶ˆè´¹ å¯ä»¥æŠŠå¯è¿­ä»£å¯¹è±¡ç†è§£æˆæ•°ç»„æˆ–é›†åˆè¿™æ ·çš„é›†åˆç±»å‹çš„å¯¹è±¡ ä»»ä½•å®ç°Iterableæ¥å£çš„æ•°æ®ç»“æ„éƒ½å¯ä»¥è¢«å®ç°Iteratoræ¥å£çš„ç»“æ„â€œæ¶ˆè´¹â€ï¼ˆconsumeï¼‰ è¿­ä»£å™¨ï¼ˆiteratorï¼‰æ˜¯æŒ‰éœ€åˆ›å»ºçš„ä¸€æ¬¡æ€§å¯¹è±¡ æ¯ä¸ªè¿­ä»£å™¨éƒ½ä¼šå…³è”ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œè€Œè¿­ä»£å™¨ä¼šæš´éœ²è¿­ä»£å…¶å…³è”å¯è¿­ä»£å¯¹è±¡çš„API è¿­ä»£å™¨æ— é¡»äº†è§£ä¸å…¶å…³è”çš„å¯è¿­ä»£å¯¹è±¡çš„ç»“æ„ï¼Œåªéœ€è¦çŸ¥é“å¦‚ä½•å–å¾—è¿ç»­çš„å€¼ åˆ†ç¦»äº† Iterable å’Œ Iterator å¯è¿­ä»£åè®® å®ç°Iterableæ¥å£è¦æ±‚åŒæ—¶å…·å¤‡ æ”¯æŒè¿­ä»£çš„è‡ªæˆ‘è¯†åˆ«èƒ½åŠ› åˆ›å»ºå®ç° Iterator æ¥å£å¯¹è±¡çš„èƒ½åŠ›","categories":[],"tags":[{"name":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","slug":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","permalink":"http://ziiyan.github.io/tags/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}]},{"title":"çº¢å®ä¹¦5ï¼šåŸºæœ¬å¼•ç”¨ç±»å‹","slug":"çº¢å®ä¹¦5ï¼šåŸºæœ¬å¼•ç”¨ç±»å‹","date":"2020-08-31T08:05:54.000Z","updated":"2020-08-31T08:12:56.349Z","comments":true,"path":"2020/08/31/çº¢å®ä¹¦5ï¼šåŸºæœ¬å¼•ç”¨ç±»å‹/","link":"","permalink":"http://ziiyan.github.io/2020/08/31/%E7%BA%A2%E5%AE%9D%E4%B9%A65%EF%BC%9A%E5%9F%BA%E6%9C%AC%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/","excerpt":"","text":"å¼•ç”¨ç±»å‹æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨äºå°†æ•°æ®å’ŒåŠŸèƒ½ç»„ç»‡åœ¨ä¸€èµ·ã€‚ å¼•ç”¨ç±»å‹çš„å€¼ï¼ˆå¯¹è±¡ï¼‰æ˜¯å¼•ç”¨ç±»å‹çš„ä¸€ä¸ªå®ä¾‹ã€‚ å¼•ç”¨ç±»å‹ä¸ç±»çœ‹èµ·æ¥ç›¸ä¼¼ï¼Œä½†å¹¶ä¸ç›¸åŒã€‚ ECMAScript ä»æŠ€æœ¯ä¸Šè®²æ˜¯ä¸€é—¨é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œä½†ä¸å…·å¤‡ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€æ‰€æ”¯æŒçš„ç±»å’Œæ¥å£ç­‰åŸºæœ¬ç»“æ„ã€‚ å¼•ç”¨ç±»å‹ä¹Ÿè¢«ç§°ä¸ºå¯¹è±¡å®šä¹‰ï¼Œæè¿°ä¸€ç±»å¯¹è±¡æ‰€å…·æœ‰çš„å±æ€§å’Œæ–¹æ³•ã€‚ ECMAScript æä¾›ç±»å¾ˆå¤šåŸç”Ÿå¼•ç”¨ç±»å‹ï¼Œæ–¹ä¾¿å¼€å‘è€…å®ç°å¸¸è§ä»»åŠ¡ Date ç±»å‹ Date.parse() params: è¡¨ç¤ºæ—¥æœŸå­—ç¬¦ä¸²ï¼Œæ ¼å¼å› åœ°åŒºè€Œå¼‚ return: æ¯«ç§’ Date.UTC() params: å¹´ä»½ã€æœˆä»½ï¼ˆ0å¼€å§‹ï¼‰ã€å¤©æ•°ã€å°æ—¶ã€åˆ†é’Ÿã€ç§’ã€æ¯«ç§’ return: æ¯«ç§’ Date.now()ç»§æ‰¿çš„æ–¹æ³• Date.toLocaleString() æ ¹æ®å½“åœ°æ—¶åŒº Date.toString() å¸¦æœ‰æ—¶åŒºä¿¡æ¯ Date.valueOf() æ¯«ç§’æ—¥æœŸæ ¼å¼åŒ–æ–¹æ³• Date.toDateString() Date.toTimeString() Date.toLocaleDateString() Date.toLocaleTimeString() Date.toUTCString() Date.toLocaleString() å› æµè§ˆå™¨è€Œå¼‚ RegExp ç±»å‹1var expression = / pattern / flags ; pattern ( [ { \\ ^ $ | ) ? * + . ] } éœ€è¦è½¬ä¹‰ flags g å…¨å±€ï¼Œé»˜è®¤åŒ¹é…ç¬¬ä¸€ä¸ªåœæ­¢ i ä¸åŒºåˆ†å¤§å°å†™ m å¤šè¡Œæ¨¡å¼RegExp å®ä¾‹å±æ€§ global ignoreCase lastIndex multiline source RegExp å®ä¾‹æ–¹æ³• exec test toString toLocaleString valueOf æ„é€ å‡½æ•°å±æ€§å…¶ä»–è¯­è¨€ä¸­è¢«çœ‹æˆæ˜¯é™æ€å±æ€§ é•¿å±æ€§å çŸ­å±æ€§å è¯´æ˜ input $_ æœ€è¿‘ä¸€æ¬¡è¦åŒ¹é…çš„å­—ç¬¦ä¸² lastMatch $&amp; æœ€è¿‘ä¸€æ¬¡çš„åŒ¹é…é¡¹ lastParen $+ æœ€è¿‘ä¸€æ¬¡åŒ¹é…çš„æ•è·ç»„ leftContext $` input å­—ç¬¦ä¸²ä¸­ lastMatch ä¹‹å‰çš„æ–‡æœ¬ multiline $* å¸ƒå°”å€¼ï¼Œæ˜¯å¦æ‰€æœ‰è¡¨è¾¾å¼éƒ½ä½¿ç”¨å¤šè¡Œæ¨¡å¼ rightContext $â€™ input å­—ç¬¦ä¸²ä¸­ lastMatch ä¹‹åçš„æ–‡æœ¬ åŸºæœ¬åŒ…è£…ç±»å‹ä¸ºäº†ä¾¿äºæ“ä½œåŸºæœ¬ç±»å‹å€¼ï¼ŒECMAScript æä¾› 3 ä¸ªç‰¹æ®Šçš„å¼•ç”¨ç±»å‹ï¼šBooleanã€Numberã€String 12var s1 = \"smoe.txt\";var s2 = s1.substring(2); åŸºæœ¬ç±»å‹ä¸æ˜¯å¯¹è±¡ï¼Œç†è®ºä¸Šä¸åº”è¯¥æœ‰æ–¹æ³•ã€‚å½“ç¬¬äºŒè¡Œä»£ç è®¿é—® s1 æ—¶ï¼Œè®¿é—®è¿‡ç¨‹å¤„äºä¸€ç§è¯»å–æ¨¡å¼ï¼Œä»å†…å­˜ä¸­è¯»å–è¿™ä¸ªå­—ç¬¦ä¸²çš„å€¼ã€‚è€Œåœ¨è¯»å–æ¨¡å¼ä¸­è®¿é—®å­—ç¬¦ä¸²æ—¶ï¼Œåå°è‡ªåŠ¨å®Œæˆï¼š(1) åˆ›å»º String ç±»å‹çš„ä¸€ä¸ªå®ä¾‹(2) åœ¨å®ä¾‹ä¸Šè°ƒç”¨æŒ‡å®šçš„æ–¹æ³•(3) é”€æ¯è¿™ä¸ªå®ä¾‹ å¼•ç”¨ç±»å‹ä¸åŸºæœ¬åŒ…è£…ç±»å‹çš„ä¸»è¦åŒºåˆ«æ˜¯å¯¹è±¡çš„ç”Ÿå­˜æœŸ å¼•ç”¨ç±»å‹çš„å®ä¾‹åœ¨æ‰§è¡Œæµç¦»å¼€å½“å‰ä½œç”¨åŸŸä¹‹å‰ä¸€ç›´ä¿å­˜åœ¨å†…å­˜ä¸­ åŸºæœ¬åŒ…è£…ç±»å‹åªå­˜åœ¨äºä¸€è¡Œä»£ç çš„æ‰§è¡Œç¬é—´ å¯ä»¥æ˜¾ç¤ºçš„åˆ›å»ºåŸºæœ¬åŒ…è£…ç±»å‹çš„å¯¹è±¡ï¼Œä½†ä¼šåˆ†ä¸æ¸…è‡ªå·±åœ¨å¤„ç†åŸºæœ¬ç±»å‹è¿˜æ˜¯å¼•ç”¨ç±»å‹çš„å€¼ new è°ƒç”¨åŸºæœ¬åŒ…è£…ç±»å‹çš„æ„é€ å‡½æ•°ï¼Œå’Œè½¬å‹å‡½æ•°æ˜¯ä¸ä¸€æ ·çš„1234567var value = \"25\";var number = Number(value); // è½¬å‹å‡½æ•°console.log(typeof number); // \"number\"var obj = new Number(value); // æ„é€ å‡½æ•°console.log(typeof obj); // â€œobject\" Boolean ç±»å‹å¸ƒå°”è¡¨è¾¾å¼ä¸­ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½ä¼šè½¬ä¸º true 123var falseObject = new Boolean(false);var result = falseObject &amp;&amp; true;alert(result); // true äº§ç”Ÿè¯¯è§£ï¼Œå»ºè®®ä¸è¦ä½¿ç”¨ Number ç±»å‹ toString(n) n è¿›åˆ¶ toFixed(n) å››èˆäº”å…¥ n ä½å°æ•° toExponential(n) n ä½æ•°è¡¨ç¤ºä¸€ä¸ªæ•°å­— å­—ç¬¦æ–¹æ³• charAt charCodeAt æ–¹æ‹¬å·è¡¨ç¤ºæ³•[]ä¸‹æ ‡è¯»å–å­—ç¬¦ å­—ç¬¦ä¸²æ“ä½œæ–¹æ³• concat æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œå¸¸ç”¨+ slice substr substring å­—ç¬¦ä¸²ä½ç½®æ–¹æ³• indexOf lastIndexOf trim() æ–¹æ³•åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²çš„å‰¯æœ¬ï¼Œåˆ é™¤å‰ç½®ä»¥åŠåç¼€çš„æ‰€æœ‰ç©ºæ ¼ï¼Œç„¶åè¿”å›ç»“æœ å­—ç¬¦ä¸²å¤§å°å†™è½¬æ¢ toLowerCase toLocaleLowerCase toUpperCase toLocaleUpperCase å­—ç¬¦ä¸²çš„æ¨¡å¼åŒ¹é…æ–¹æ³• match params:æ­£åˆ™è¡¨è¾¾å¼æˆ– RegExp å¯¹è±¡ æœ¬è´¨è°ƒç”¨ RegExp çš„ exec search params:æ­£åˆ™è¡¨è¾¾å¼æˆ– RegExp å¯¹è±¡ return: ä¸‹æ ‡ï¼Œæ‰¾ä¸åˆ° -1 replace ä¸¤ä¸ªå‚æ•°ï¼Œç”¨ç¬¬äºŒä¸ªå‚æ•°æ›¿æ¢ç¬¬ä¸€ä¸ª ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯æ­£åˆ™ ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥æ˜¯å‡½æ•° split åŸºäºä¸€ä¸ªåˆ¶å®šçš„åˆ†éš”ç¬¦ï¼Œå°†ä¸€ä¸ªå­—ç¬¦ä¸²åˆ†å‰²æˆå¤šä¸ªå­å­—ç¬¦ä¸² localeCompare() æ–¹æ³•æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œå„åœ°åŒºå®ç°ä¸åŒ fromCharCode() æ–¹æ³•æ¥æ”¶ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ç¼–ç ï¼Œç„¶åè½¬æ¢æˆä¸€ä¸ªå­—ç¬¦ä¸² å•ä¾‹å†…ç½®å¯¹è±¡ECMA-262å¯¹å†…ç½®å¯¹è±¡çš„å®šä¹‰ï¼šä»»ä½•ç”±ECMAScriptå®ç°æä¾›ã€ä¸å®¿ä¸»ç¯å¢ƒæ— å…³ï¼Œå¹¶åœ¨ECMAScriptç¨‹åºå¼€å§‹æ‰§è¡Œæ—¶å°±å­˜åœ¨çš„å¯¹è±¡ã€‚ å¦‚ Objectã€Arrayã€String Global å¯¹è±¡ ä¸å±äºä»»ä½•å…¶ä»–å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼Œæœ€ç»ˆéƒ½æ˜¯ Global å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³• äº‹å®ä¸Šï¼Œæ²¡æœ‰å…¨å±€å˜é‡æˆ–å…¨å±€å‡½æ•°ã€‚æ‰€æœ‰åœ¨å…¨å±€ä½œç”¨åŸŸä¸­å®šä¹‰çš„å±æ€§å’Œå‡½æ•°ï¼Œéƒ½æ˜¯ Global å¯¹è±¡çš„å±æ€§ã€‚å¦‚ isNan()ã€isFinite()ã€parseint() encodeURI() ç”¨äºæ•´ä¸ª URIencodeURIEomponent() ç”¨äº URI ä¸­çš„ä¸€æ®µdecodeURI()decodeURIEomponent() eval() åƒä¸€ä¸ªå®Œæ•´çš„ ECMAScript è§£æå™¨ params: è¦æ‰§è¡Œçš„ ECMAScript å­—ç¬¦ä¸² Global å¯¹è±¡å±æ€§ undefinedã€NaNã€Infinity ç­‰ Objectã€Function ç­‰ window å¯¹è±¡ Web æµè§ˆå™¨ä¸­ï¼ŒGlobal å¯¹è±¡æ˜¯ window å¯¹è±¡çš„ä¸€éƒ¨åˆ† Math å¯¹è±¡ Math å¯¹è±¡çš„å±æ€§ Math.E Math.LN10 Math.LN2 Math.LOG2E Math.LOG10 Math.PI Math.SQRT1_2 Math.SQRT2 min()ã€max() èˆå…¥æ–¹æ³• Math.ceil() å‘ä¸Šèˆå…¥ Math.floor() å‘ä¸‹èˆå…¥ Math.round() å››èˆäº”å…¥ random() [0, 1) éšæœºæ•° å…¶ä»–æ–¹æ³• Math.abs(num) Math.exp(num) Math.log(num) Math.pow(num, power) Math.sqrt(num) Math.acos(x) â€¦â€¦","categories":[],"tags":[{"name":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","slug":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","permalink":"http://ziiyan.github.io/tags/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}]},{"title":"çº¢å®ä¹¦6ï¼šé›†åˆå¼•ç”¨ç±»å‹","slug":"çº¢å®ä¹¦6ï¼šé›†åˆå¼•ç”¨ç±»å‹","date":"2020-08-31T08:05:54.000Z","updated":"2020-08-31T09:29:42.756Z","comments":true,"path":"2020/08/31/çº¢å®ä¹¦6ï¼šé›†åˆå¼•ç”¨ç±»å‹/","link":"","permalink":"http://ziiyan.github.io/2020/08/31/%E7%BA%A2%E5%AE%9D%E4%B9%A66%EF%BC%9A%E9%9B%86%E5%90%88%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/","excerpt":"","text":"Object ç±»å‹å¤§å¤šæ•°å¯¹è±¡éƒ½æ˜¯ Object ç±»å‹çš„å®ä¾‹ new æ“ä½œç¬¦123var person = new Object();person.name = \"Nicholas\";person.age = 29; å¯¹è±¡å­—é¢é‡ å¯¹è±¡å®šä¹‰çš„ä¸€ç§ç®€å†™å½¢å¼ï¼Œç›®çš„åœ¨äºç®€åŒ–åˆ›å»ºåŒ…å«å¤§é‡å±æ€§çš„å¯¹è±¡çš„è¿‡ç¨‹ã€‚1234var person = &#123; name: \"Nicholas\", age: 29&#125;; 1234// å®šä¹‰åªåŒ…å«é»˜è®¤å±æ€§å’Œæ–¹æ³•çš„å¯¹è±¡var person = &#123;&#125;;// æˆ–var person = new Object(); é€šè¿‡å¯¹è±¡å­—é¢é‡å®šä¹‰å¯¹è±¡æ—¶ï¼Œå®é™…ä¸Šä¸ä¼šè°ƒç”¨ Object æ„é€ å‡½æ•° è¡¨è¾¾å¼ä¸Šä¸‹æ–‡æŒ‡çš„æ˜¯æœŸå¾…è¿”å›å€¼çš„ä¸Šä¸‹æ–‡{}ã€‚ è¯­å¥ä¸Šä¸‹æ–‡è¡¨ç¤ºä¸€ä¸ªè¯­å¥å—çš„å¼€å§‹ã€‚ ä¾‹å¦‚let obj = {}ï¼Œèµ‹å€¼å·åé¢æœŸå¾…è¿”å›å€¼ï¼Œåˆ™ä¸ºè¡¨è¾¾å¼ä¸Šä¸‹æ–‡ if () {}ï¼Œæ¡ä»¶è¯­å¥åé¢ï¼Œåˆ™æ˜¯è¯­å¥ä¸Šä¸‹æ–‡ Array ç±»å‹å’Œå…¶ä»–è¯­è¨€çš„åŒºåˆ«ï¼šæ¯ä¸€é¡¹å¯ä»¥ä¿å­˜ä»»ä½•ç±»å‹çš„æ•°æ®ï¼Œäº’ç›¸ä¹‹é—´ä¸å½±å“ åˆ›å»ºæ•°ç»„ new123var colors = new Array();var colors = new Array(20); // length = 20var colors = new Array(\"Grey\"); // length = 1 çœç•¥ new1var colors = Array(3); // length = 3 æ•°ç»„å­—é¢é‡12var names = [];var colors = [\"red\", \"blue\", \"green\"]; æ•°ç»„å­—é¢é‡è¡¨ç¤ºæ³•æ—¶ä¸ä¼šè°ƒç”¨ Array æ„é€ å‡½æ•° Array.from ç±»æ•°ç»„ç»“æ„ -&gt; æ•°ç»„å®ä¾‹ Array.of() å‚æ•° -&gt; æ•°ç»„å®ä¾‹ æ•°ç»„ç´¢å¼• length å¯ä¿®æ”¹ï¼Œä¼šç§»é™¤è¶…å‡ºçš„é¡¹ å½“æŠŠä¸€ä¸ªå€¼æ”¾åœ¨è¶…å‡ºå½“å‰æ•°ç»„å¤§å°çš„ä½ç½®ä¸Šæ—¶ï¼Œä¼šé‡æ–°è®¡ç®—é•¿åº¦ï¼Œé•¿åº¦å€¼ä¸ºæœ€åä¸€é¡¹çš„ç´¢å¼• + 112345678var colors = [\"red\", \"blue\", \"green\"];// [\"red\", \"blue\", \"green\"]colors.length = 2;// [\"red\", \"blue\"]colors.length = 3;// [\"red\", \"blue\", empty]console.log(colors[3]);// [\"red\", \"blue\", empty, \"green\"] length = 4 æ£€æµ‹æ•°ç»„ value instanceof Array å‡å®šåªæœ‰ä¸€ä¸ªå…¨å±€æ‰§è¡Œç¯å¢ƒï¼Œå¦‚æœä»ä¸€ä¸ªæ¡†æ¶å‘å¦ä¸€ä¸ªæ¡†æ¶ä¼ å…¥æ•°ç»„ï¼Œå°±å…·æœ‰ä¸åŒçš„æ„é€ å‡½æ•°Array.isArray() è¿­ä»£å™¨æ–¹æ³• keys values entries å¤åˆ¶å’Œå¡«å……æ–¹æ³• fill() å¡«å…… copyWithin() æµ…å¤åˆ¶ æ”¹å˜åŸæ•°ç»„ä¼šåŒæ­¥æ”¹å˜ let a = [1, 2, 3] b = a.copyWithin() a[2] = [1] // a = [1, 2, 1] // b = [1, 2, 1] è½¬æ¢æ–¹æ³• Array.toString() Array.toLocaleString() Array.valueOf()æ ˆ/é˜Ÿåˆ—æ–¹æ³• Array.push æœ«å°¾æ·»åŠ  Array.pop å–æœ€åä¸€é¡¹å¹¶ç§»é™¤ Array.shift å–ç¬¬ä¸€é¡¹å¹¶ç§»é™¤ Array.unshift å¤´éƒ¨æ·»åŠ æ’åºæ–¹æ³• Array.reverse() åè½¬é¡ºåº Array.sort() å…ˆè½¬ toString()ï¼Œå­—ç¬¦ä¸²å‡åº sort æ¥æ”¶æ¯”è¾ƒå‡½æ•° params1 -&gt; params2 ===&gt; -1 params2 -&gt; params1 ===&gt; 1æ“ä½œæ–¹æ³• Array.concat Array.slice(a, b) [a, b) è´Ÿæ•°åˆ™ä»æœ«å°¾å¼€å§‹æ•° Array.splice(a, b, ...c) a ä½ç½® b è¦åˆ é™¤çš„é¡¹æ•° c æ’å…¥çš„å†…å®¹ï¼ˆè‹¥å¹²ï¼‰ return è¢«åˆ é™¤çš„å†…å®¹ ä½ç½®æ–¹æ³• ä¸¥æ ¼ç›¸ç­‰ Array.indexOf() è¿”å›ä¸‹æ ‡ Array.lastIndexOf() Array.includes() è¿”å›å¸ƒå°” æ–­è¨€å‡½æ•° (element, index, array) =&gt; {} find((element, index, array) =&gt; {}) findIndex((element, index, array) =&gt; {}) è¿­ä»£æ–¹æ³• ä¸¤ä¸ªå‚æ•° è¦åœ¨æ¯ä¸€é¡¹ä¸Šè¿è¡Œçš„å‡½æ•° ä¸‰ä¸ªå‚æ•° æ•°ç»„é¡¹çš„å€¼ è¯¥é¡¹å†æ•°ç»„ä¸­çš„ä½ç½® æ•°ç»„å¯¹è±¡æœ¬èº« ï¼ˆå¯é€‰çš„ï¼‰è¿è¡Œè¯¥å‡½æ•°çš„ä½œç”¨åŸŸå¯¹è±¡ å½±å“thisçš„å€¼ Array.every() æ¯ä¸€é¡¹éƒ½è¿”å› trueï¼Œåˆ™è¿”å› true Array.some() ä»»ä¸€é¡¹è¿”å› trueï¼Œåˆ™è¿”å› true Array.filter() è¿”å›è¯¥å‡½æ•°è¿”å› true çš„é¡¹ç»„æˆçš„æ•°ç»„ Array.map() è¿”å›æ¯æ¬¡å‡½æ•°è°ƒç”¨çš„ç»“æœç»„æˆçš„æ•°ç»„ Array.forEach() æ²¡æœ‰è¿”å›å€¼ ä»¥ä¸Šæ–¹æ³•éƒ½ä¸ä¼šä¿®æ”¹æ•°ç»„ä¸­åŒ…å«çš„å€¼ å½’å¹¶æ–¹æ³• Array.reduce() Array.reduceRight() ä¸¤ä¸ªå‚æ•° æ¯ä¸€é¡¹ä¸Šè°ƒç”¨çš„å‡½æ•° å››ä¸ªå‚æ•° å‰ä¸€ä¸ªå€¼ å½“å‰å€¼ é¡¹çš„ç´¢å¼• æ•°ç»„å¯¹è±¡ ï¼ˆå¯é€‰çš„ï¼‰ä½œä¸ºå½’å¹¶åŸºç¡€çš„åˆå§‹å€¼ è¿”å›å€¼ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ ç»™ä¸‹ä¸€é¡¹ ç¬¬ä¸€æ¬¡è¿­ä»£å‘ç”Ÿåœ¨ç¬¬äºŒé¡¹ä¸Šï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•°ç»„çš„ç¬¬ä¸€é¡¹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ•°ç»„çš„ç¬¬äºŒé¡¹ MapåŸºæœ¬ API consg m = new Map() m.set() m.get() m.has() m.size() m.delete() m.clear() é¡ºåºä¸è¿­ä»£ Object æ— åºï¼ŒMap æœ‰åº keys() values() entries() SetåŸºæœ¬ API const s = new Set() s.add() s.has() s.size() s.delete() s.clear é¡ºåºä¸è¿­ä»£ Set ç»´æŠ¤æ’å…¥æ—¶é¡ºåº keys() values() entries() è¿­ä»£ä¸æ‰©å±•æ“ä½œ æœ‰4ç§åŸç”Ÿé›†åˆç±»å‹å®šä¹‰äº†é»˜è®¤è¿­ä»£å™¨ï¼š Array æ‰€æœ‰å®šå‹æ•°ç»„ Map Set ç‰¹æ€§ éƒ½å¯ä»¥ä¼ å…¥for-ofå¾ªç¯ éƒ½å…¼å®¹æ‰©å±•æ“ä½œç¬¦","categories":[],"tags":[{"name":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","slug":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","permalink":"http://ziiyan.github.io/tags/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}]},{"title":"é¢ç»ï¼šè…¾è®¯-è…¾è®¯æ–‡æ¡£-ä¸€é¢","slug":"é¢ç»ï¼šè…¾è®¯-è…¾è®¯æ–‡æ¡£-ä¸€é¢","date":"2020-08-30T12:32:57.000Z","updated":"2020-08-31T14:58:21.437Z","comments":true,"path":"2020/08/30/é¢ç»ï¼šè…¾è®¯-è…¾è®¯æ–‡æ¡£-ä¸€é¢/","link":"","permalink":"http://ziiyan.github.io/2020/08/30/%E9%9D%A2%E7%BB%8F%EF%BC%9A%E8%85%BE%E8%AE%AF-%E8%85%BE%E8%AE%AF%E6%96%87%E6%A1%A3-%E4%B8%80%E9%9D%A2/","excerpt":"","text":"CSS position å–å€¼ static æ˜¯ position çš„é»˜è®¤å–å€¼ï¼Œå– static çš„æ—¶å€™ topã€rightã€bottomã€leftã€z-index æ— æ•ˆ relative æ˜¯ç›¸å¯¹å®šä½ï¼Œä¸æ”¹å˜é¡µé¢å¸ƒå±€ï¼Œç›¸å¯¹äºåŸæ¥çš„ä½ç½®åç§» absolute ä¼šå°†å…ƒç´ ç§»å‡ºæ­£å¸¸æ–‡æ¡£æµï¼Œç›¸å¯¹äºå…ƒç´ æœ€è¿‘çš„é static å®šä½çš„ç¥–å…ˆå…ƒç´ åç§» fixed ä¹Ÿä¼šå°†å…ƒç´ ç§»å‡ºæ­£å¸¸æ–‡æ¡£æµï¼Œå®ƒæ˜¯ç›¸å¯¹äºè§†å£åç§»çš„ï¼Œå±å¹•æ»šåŠ¨æ—¶ä¸æ”¹å˜ sticky æ ¹æ®æ­£å¸¸æ–‡æ¡£æµå®šä½ï¼Œç›¸å¯¹äºæœ€è¿‘å—çº§ç¥–å…ˆå®šä½ï¼Œtopã€rightã€bottomã€left è®¾å®šé˜ˆå€¼ æ°´å¹³å±…ä¸­ã€å‚ç›´å±…ä¸­ï¼ˆä¹‹å‰æ•´ç†è¿‡åˆå¿˜äº† ğŸ˜«ï¼‰ ç®€å†å†™åšè¿‡ css3 åŠ¨ç”»å’Œ js åŠ¨ç”»ï¼Œè®²è®²åŒºåˆ« æ˜¯ç”¨ css3 å†™åŠ¨ç”»ï¼Œç„¶åç”¨ js æ¥æ§åˆ¶æµç¨‹ animation å–å€¼ JS çº¯ ES5ï¼Œä¸ç”¨ ES6 å¦‚ä½•å®ç°ç»§æ‰¿ ï¼ˆä¸Šä¸€é¢˜æ²¡ç­”å‡ºæ¥ï¼‰æ¢ç§æ–¹å¼é—®ï¼Œè®²è®²åŸå‹å’ŒåŸå‹é“¾ ES6 ç”¨è¿‡å“ªäº›ç‰¹æ€§ letã€const let å’Œ var æœ‰ä»€ä¹ˆåŒºåˆ« mapã€setã€classï¼ˆæ²¡è¿½é—®ï¼‰ è®²è®²ç®­å¤´å‡½æ•° è®²è®² promise ä½ è®¤ä¸º promise æœ‰ä»€ä¹ˆä¼˜ç‚¹å’Œç¼ºç‚¹ ç½‘ç»œ HTTP çŠ¶æ€ç  302ã€304ã€403 HTTPS ä¸ºä»€ä¹ˆå®‰å…¨ è®²è®²è·¨åŸŸ é¡¹ç›® å‰ç«¯æ€§èƒ½ä¼˜åŒ– å¦‚æœæˆ‘æ˜¯ä½ çš„ leaderï¼Œå¦‚ä½•å±•ç¤ºä¼˜åŒ–æˆæœ å‰ç«¯æ€§èƒ½æ£€æµ‹ï¼Œå¬è¯´è¿‡ï¼Œæ²¡æ¥è§¦ æ‰‹æ’• åˆ¤æ–­å›æ–‡ä¸² 24 ç‚¹","categories":[],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://ziiyan.github.io/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"çº¢å®ä¹¦3ï¼šè¯­è¨€åŸºç¡€","slug":"çº¢å®ä¹¦3ï¼šåŸºæœ¬æ¦‚å¿µ","date":"2020-08-28T01:22:54.000Z","updated":"2020-08-31T01:15:43.853Z","comments":true,"path":"2020/08/28/çº¢å®ä¹¦3ï¼šåŸºæœ¬æ¦‚å¿µ/","link":"","permalink":"http://ziiyan.github.io/2020/08/28/%E7%BA%A2%E5%AE%9D%E4%B9%A63%EF%BC%9A%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/","excerpt":"","text":"è¯­æ³•ECMAScript æ ‡ç¤ºç¬¦é‡‡ç”¨é©¼å³°å¤§å°å†™æ ¼å¼ ä¸¥æ ¼æ¨¡å¼ strict modeåœ¨é¡¶éƒ¨æ·»åŠ ä»£ç  &quot;use strict&quot;;ç¼–è¯‘æŒ‡ç¤º(pragma)ï¼Œç”¨äºå‘Šè¯‰æ”¯æŒçš„ JavaScript å¼•æ“åˆ‡æ¢åˆ°ä¸¥æ ¼æ¨¡å¼ã€‚å‡½æ•°ä½“ä¸­åŒ…å«æŒ‡å®šå‡½æ•°åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹æ‰§è¡Œã€‚ å˜é‡æ¾æ•£ç±»å‹ï¼šå¯ä»¥ç”¨æ¥ä¿å­˜ä»»ä½•ç±»å‹çš„æ•°æ®ã€‚æ¯ä¸ªå˜é‡ä»…ä»…ç”¨äºä¿å­˜å€¼çš„å ä½ç¬¦ã€‚ var &amp; let var let ä½œç”¨åŸŸ å‡½æ•° å—çº§ å£°æ˜æå‡ æå‡è‡³å‡½æ•°ä½œç”¨åŸŸé¡¶éƒ¨ ä¸ä¼šæå‡ï¼Œå‡ºç°æš‚æ—¶æ€§æ­»åŒº é‡å¤å£°æ˜ ä¸ä¼šæŠ¥é”™ æŠ¥é”™ å…¨å±€å£°æ˜ æˆä¸º window å¯¹è±¡çš„å±æ€§ ä¸ä¼šæˆä¸º window å¯¹è±¡çš„å±æ€§ cosnt å£°æ˜æ—¶åˆå§‹åŒ–ï¼Œä¿®æ”¹ä¼šæŠ¥è¿è¡Œæ—¶é”™è¯¯ å‚¨å­˜çš„æ˜¯å˜é‡çš„å¼•ç”¨ï¼Œå¦‚æœå˜é‡æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥ä¿®æ”¹å±æ€§ const ä¼˜å…ˆï¼Œlet æ¬¡ä¹‹ï¼Œä¸ç”¨ var æ•°æ®ç±»å‹6 ç®€å•æ•°æ®ç±»å‹ - Undefinedã€Nullã€Booleanã€Numberã€Stringã€Symbol1 å¤æ‚æ•°æ®ç±»å‹ - ObjectOobject æœ¬è´¨ä¸Šæ˜¯ç”±ä¸€ç»„æ— åºçš„åå€¼å¯¹ç»„æˆçš„ECMAScript ä¸æ”¯æŒä»»ä½•åˆ›å»ºè‡ªå®šä¹‰ç±»å‹çš„æœºåˆ¶ typeofè¿”å›å€¼ä¸ºå­—ç¬¦ä¸² æœªå®šä¹‰ï¼š&quot;undefined&quot; å¸ƒå°”å€¼ï¼š&quot;boolean&quot; æ•°å€¼ï¼š&quot;number&quot; å­—ç¬¦ä¸²ï¼š&quot;string&quot; ç¬¦å·ï¼š&quot;Symbol&quot; å¯¹è±¡æˆ–nullï¼š&quot;object&quot; å‡½æ•°ï¼š&quot;function&quot; ç‰¹æ®Šå€¼ null è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªç©ºçš„å¯¹è±¡å¼•ç”¨ï¼Œå› æ­¤è¿”å› &quot;object&quot;ã€‚ ä»æŠ€æœ¯è§’åº¦è®²ï¼Œå‡½æ•°åœ¨ ECMAScript ä¸­æ˜¯å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸€ç§æ•°æ®ç±»å‹ã€‚ ç„¶è€Œï¼Œå‡½æ•°ä¹Ÿç¡®å®æœ‰ä¸€äº›ç‰¹æ®Šçš„å±æ€§ï¼Œå› æ­¤é€šè¿‡ typeof æ“ä½œç¬¦åŒºåˆ†å‡½æ•°å’Œå…¶ä»–å¯¹è±¡æ˜¯æœ‰å¿…è¦çš„ã€‚ Undefined ç±»å‹Undefined ç±»å‹åªæœ‰ä¸€ä¸ªå€¼ï¼Œå³ undefined å˜é‡å·²å£°æ˜ä½†æœªåˆå§‹åŒ–ï¼ˆmessageï¼‰ï¼šè¯¥å˜é‡çš„å€¼ä¸º undefined,typeof è¿”å›&quot;undefined&quot;è‹¥å˜é‡æœªå£°æ˜ï¼ˆageï¼‰ï¼šåªå¯ä»¥æ‰§è¡Œtypeof æ“ä½œç¬¦ï¼Œè¿”å›&quot;undefined&quot;ï¼Œå…¶ä»–æ“ä½œäº§ç”Ÿé”™è¯¯ã€‚ Null ç±»å‹Null ç±»å‹åªæœ‰ä¸€ä¸ªå€¼ï¼Œå³ nullï¼Œè¡¨ç¤ºä¸€ä¸ªç©ºå¯¹è±¡æŒ‡é’ˆï¼Œå› æ­¤ typeof null è¿”å› &quot;object&quot;ã€‚å¦‚æœå®šä¹‰çš„å˜é‡å‡†å¤‡ç”¨äºä¿å­˜å¯¹è±¡ï¼Œé‚£ä¹ˆæœ€å¥½åˆå§‹åŒ–ä¸º nullï¼Œå¯ä»¥ç›´æ¥åˆ¤æ–­æ˜¯å¦å·²ç»ä¿å­˜äº†ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚ 123if (car != null) &#123; â€¦â€¦&#125; å®é™…ä¸Šï¼Œundefined æ´¾ç”Ÿè‡ª nullï¼Œå› æ­¤ï¼š 12alert(null == undefined); // true Boolean ç±»å‹ECMAScript ä¸­æ‰€æœ‰ç±»å‹çš„å€¼éƒ½æœ‰ä¸è¿™ä¸¤ä¸ª Boolean å€¼ç­‰ä»·çš„å€¼ã€‚è°ƒç”¨ è½¬å‹å‡½æ•° Boolean() è·å¾—å¯¹åº” Boolean å€¼ã€‚ æ•°æ®ç±»å‹ true false Boolean true false String ä»»ä½•éç©ºå­—ç¬¦ä¸² â€œâ€ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰ Number ä»»ä½•éé›¶æ•°å­—å€¼ï¼ˆåŒ…æ‹¬æ— ç©·å¤§ï¼‰ 0 å’Œ NaN Object ä»»ä½•å¯¹è±¡ null Undefined N/A undefined N/Aï¼šnot applicable çš„ç¼©å†™ï¼Œä¸é€‚ç”¨ Number ç±»å‹ä½¿ç”¨ IEEE754 æ ¼å¼æ¥è¡¨ç¤ºæ•´æ•°å’Œæµ®ç‚¹æ•°å€¼ï¼ˆåŒç²¾åº¦æ•°å€¼ï¼‰ã€‚ä¸ºäº†æ”¯æŒå„ç§æ•°å€¼ç±»å‹ï¼ŒECMA-262å®šä¹‰äº†ä¸åŒçš„æ•°å€¼å­—é¢é‡æ ¼å¼ã€‚ åè¿›åˆ¶ å…«è¿›åˆ¶ï¼ˆ0ï¼‰ åå…­è¿›åˆ¶ï¼ˆ0xï¼‰ åœ¨è¿›è¡Œç®—æ•°è®¡ç®—æ—¶ï¼Œéƒ½ä¼šè½¬ä¸ºåè¿›åˆ¶æ•°å€¼ã€‚ æµ®ç‚¹æ•°å€¼æµ®ç‚¹æ•°å€¼éœ€è¦çš„å†…å­˜ç©ºé—´æ˜¯æ•´æ•°å€¼çš„ä¸¤å€ã€‚6 ä¸ª 0 ä»¥ä¸Šï¼Œeè¡¨ç¤ºæ³•ï¼š3.125e7ã€3e-17æµ®ç‚¹æ•°å€¼æœ€é«˜ç²¾åº¦ 17 ä½å°æ•°ï¼Œä½†åœ¨ç®—æ•°è®¡ç®—æ—¶ç²¾åº¦è¿œä¸å¦‚æ•´æ•°ã€‚ï¼ˆIEEE745 æ•°å€¼çš„æµ®ç‚¹è®¡ç®—é€šç—…ï¼Œä¸æ˜¯ ECMAScript ç‹¬æœ‰ï¼‰ æ•°å€¼èŒƒå›´Number.MIN_VALUENumber.MAX_VALUENumber.POSITIVE_INFINITY æˆ– Infinity æ­£æ— ç©·Number.NEGATIVE_INFINITY æˆ– -Infinity è´Ÿæ— ç©·isFinite()æœ‰ç©·è¿”å› true NaN ä»»ä½•æ¶‰åŠ NaN çš„æ“ä½œéƒ½ä¼šè¿”å› NaN NaN ä¸ä»»ä½•å€¼éƒ½ä¸ç›¸ç­‰ï¼ŒåŒ…æ‹¬è‡ªå·±æœ¬èº« isNaN() å‡½æ•°åˆ¤æ–­å˜é‡æ˜¯å¦å¯ä»¥è½¬ä¸ºæ•°å€¼ isNaN(object):é¦–å…ˆè°ƒç”¨å¯¹è±¡çš„ valueOf() æ–¹æ³•ï¼Œæ£€æŸ¥è¯¥æ–¹æ³•çš„è¿”å›å€¼æ˜¯å¦å¯ä»¥è½¬æ¢ä¸ºæ•°å€¼å¦‚æœä¸èƒ½ï¼ŒåŸºäºè¿™ä¸ªè¿”å›å€¼å†è°ƒç”¨ toString() æ–¹æ³•ï¼Œå†æµ‹è¯•è¿”å›å€¼ã€‚ æ•°å€¼è½¬æ¢Number() ä»»ä½•ç±»å‹ä¼˜å…ˆparseInt() å­—ç¬¦ä¸²parseFloat() å­—ç¬¦ä¸² parseInt å’Œ parseFloat ä»ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å­—ç¬¦å¼€å§‹è½¬æ¢ï¼Œå¼€å§‹åè‹¥ç¢°åˆ°ä¸ç¬¦åˆçš„å­—ç¬¦ï¼ŒæŠ›å¼ƒä¹‹åçš„å­—ç¬¦ã€‚ String ç±»å‹ Unicode å­—ç¬¦ç»„æˆçš„å­—ç¬¦åºåˆ— å•å¼•å·ã€åŒå¼•å·ã€åå¼•å· å­—ç¬¦å­—é¢é‡å­—ç¬¦å­—é¢é‡ï¼Œå³è½¬ä¹‰å­—ç¬¦ï¼Œè¢«ä½œä¸ºä¸€ä¸ªå­—ç¬¦æ¥è§£æã€‚ ç‰¹ç‚¹ ä¸å¯æ”¹å˜123var lang = \"Java\";lang = lang + \"Script\";// é¦–å…ˆåˆ›å»ºä¸€ä¸ªèƒ½å®¹çº³ 10 ä¸ªå­—ç¬¦çš„æ–°å­—ç¬¦ä¸²ï¼Œç„¶åå¡«å…… â€œJavaâ€ å’Œ â€œScriptâ€ï¼Œæœ€åé”€æ¯åŸæ¥çš„å­—ç¬¦ä¸²ã€‚ï¼ˆä¸åœ¨åŸå­—ç¬¦ä¸²ä¸Šä¿®æ”¹ï¼‰ è½¬ä¸ºå­—ç¬¦ä¸² toString() æ•°å€¼ã€å¸ƒå°”å€¼ã€å¯¹è±¡ã€å­—ç¬¦ä¸²ï¼Œnull undefined æ²¡æœ‰ è°ƒç”¨æ•°å€¼çš„ toString() æ–¹æ³•æ—¶å¯ä»¥ä¼ é€’è¿›åˆ¶åŸºæ•°ä½œä¸ºå‚æ•°ã€‚ ä¸çŸ¥é“æ˜¯ä¸æ˜¯ null æˆ– undefined çš„æ—¶å€™å¯ä»¥ä½¿ç”¨è½¬å‹å‡½æ•° String() å¦‚æœå€¼æœ‰ toString() æ–¹æ³•ï¼Œè°ƒç”¨ å¦‚æœå€¼æ˜¯ nullï¼Œè¿”å› &quot;null&quot; å¦‚æœå€¼æ˜¯ undefinedï¼Œè¿”å› &quot;undefined&quot; obj + &quot;&quot; å’Œå­—ç¬¦ä¸²åŠ åœ¨ä¸€èµ· æ¨¡ç‰ˆå­—é¢é‡ ä¿ç•™æ¢è¡Œå­—ç¬¦ï¼Œå¯ä»¥è·¨è¡Œå®šä¹‰å­—ç¬¦ä¸² å®šä¹‰æ¨¡ç‰ˆçš„æ—¶å€™ç‰¹åˆ«æœ‰ç”¨ å­—ç¬¦ä¸²æ’å€¼ ${}ï¼Œä¼šè½¬ä¸ºå­—ç¬¦ä¸² æ ‡ç­¾å‡½æ•° Symbol ç±»å‹ ç¡®ä¿å¯¹è±¡å±æ€§ä½¿ç”¨å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä¸ä¼šå‘ç”Ÿå±æ€§å†²çªçš„å±é™© åŸºæœ¬ç”¨æ³•1234567let sym = Symbol();console.log(typeof sym); // symbollet genericSymbol = Symbol();console.log(genericSymbol); // Symbol()let fooSymbol = Symbol('foo');console.log(fooSymbol); // Symbol('foo') ä¼ å…¥çš„å‚æ•°ç§°ä¸ºæè¿°ï¼Œç›¸åŒæè¿°çš„ Symbol ä¸ç›¸ç­‰ï¼ŒSymbol æ˜¯å”¯ä¸€çš„ ä¸èƒ½ç”¨åšæ„é€ å‡½æ•° let mySymbol = new Symbol(); âœ–ï¸ å…¨å±€ç¬¦å·æ³¨å†Œè¡¨ Symbol.for() ç¬¦å·ä½œä¸ºå±æ€§å¸¸ç”¨å†…ç½®ç¬¦å· Symbol.asyncIterator Symbol.hasInstance Symbol.isConcatSpreadable Symbol.iterator Symbol.match Symbol.replace Symbol.search Symbol.species Symbol.split Symbol.toPrimitive Symbol.unscopables Object ç±»å‹ å¯¹è±¡æ˜¯ä¸€ç»„æ•°æ®å’ŒåŠŸèƒ½çš„é›†åˆã€‚ åœ¨ ECMAScript ä¸­ï¼ŒObject ç±»å‹æ‰€å…·æœ‰çš„ä»»ä½•å±æ€§å’Œæ–¹æ³•ä¹ŸåŒæ ·å­˜åœ¨äºæ›´å…·ä½“çš„å¯¹è±¡ä¸­ã€‚Object çš„æ¯ä¸ªå®ä¾‹éƒ½å…·æœ‰ä¸‹åˆ—å±æ€§å’Œæ–¹æ³•ã€‚ constructor æ„é€ å‡½æ•° hasOwnProperty(propertyName) æ£€æŸ¥ç»™å®šçš„å±æ€§åœ¨å½“å‰å¯¹è±¡å®ä¾‹ä¸­ï¼ˆè€Œä¸æ˜¯åœ¨å®ä¾‹çš„åŸå‹ä¸­ï¼‰æ˜¯å¦å­˜åœ¨ã€‚å‚æ•°ï¼ˆpropertyNameï¼‰ä¸ºå­—ç¬¦ä¸² isProtorypeOf(object) æ£€æŸ¥ä¼ å…¥çš„å¯¹è±¡æ˜¯å¦æ˜¯å¦ä¸€ä¸ªå¯¹è±¡çš„åŸå‹ propertyIsEnumerable(propertyName) æ£€æŸ¥ç»™å®šçš„å±æ€§æ˜¯å¦èƒ½å¤Ÿä½¿ç”¨ for-in è¯­å¥ã€‚å‚æ•°ï¼ˆpropertyNameï¼‰ä¸ºå­—ç¬¦ä¸² toLocaleString() æ ¹æ®æœ¬åœ°è§„èŒƒè¿›è¡Œæ ¼å¼åŒ– toString() å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤º valueOf() è¿”å›å¯¹è±¡å¯¹åº”çš„å­—ç¬¦ä¸²ã€æ•°å€¼æˆ–å¸ƒå°”å€¼è¡¨ç¤ºã€‚é€šå¸¸ä¸ toString() çš„è¿”å›å€¼ç›¸åŒ ä»æŠ€æœ¯è§’åº¦è®²ï¼ŒECMA-262 ä¸­å¯¹è±¡çš„è¡Œä¸ºä¸ä¸€å®šé€‚ç”¨äº JS ä¸­çš„å…¶ä»–å¯¹è±¡ã€‚å¦‚ BOM å’Œ DOM ä¸­çš„å¯¹è±¡å±äºå®¿ä¸»å¯¹è±¡ï¼Œå®¿ä¸»å¯¹è±¡å¯èƒ½ä¼šä¹Ÿå¯èƒ½ä¸ä¼šç»§æ‰¿ Objectã€‚ æ“ä½œç¬¦æ“ä½œç¬¦åº”ç”¨äºå¯¹è±¡æ—¶ï¼Œé€šå¸¸ä¼šè°ƒç”¨å¯¹è±¡çš„ valueOf() å’Œï¼ˆæˆ–ï¼‰toString() æ–¹æ³•ã€‚ ä½æ“ä½œç¬¦ ï½ &amp; | ^ &lt;&lt; &gt;&gt; &gt;&gt;&gt; å¸ƒå°”æ“ä½œç¬¦ ! &amp;&amp; || ä¹˜æ€§æ“ä½œç¬¦ * / % æŒ‡æ•°æ“ä½œç¬¦ ** åŠ æ€§æ“ä½œç¬¦ + - å…³ç³»æ“ä½œç¬¦ &gt; &lt; &gt;= &lt;= ç›¸ç­‰æ“ä½œç¬¦ == != è¿™ä¸¤ä¸ªæ“ä½œç¬¦éƒ½ä¼šå…ˆè¿›è¡Œç±»å‹è½¬æ¢ï¼ˆé€šå¸¸ç§°ä¸ºå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼‰å†ç¡®å®šæ“ä½œæ•°æ˜¯å¦ç›¸ç­‰ å¦‚æœä»»ä¸€æ“ä½œæ•°æ˜¯å¸ƒå°”å€¼ï¼Œåˆ™å°†å…¶è½¬æ¢ä¸ºæ•°å€¼å†æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰ã€‚falseè½¬æ¢ä¸º0ï¼Œtrueè½¬æ¢ä¸º1ã€‚ å¦‚æœä¸€ä¸ªæ“ä½œæ•°æ˜¯å­—ç¬¦ä¸²ï¼Œå¦ä¸€ä¸ªæ“ä½œæ•°æ˜¯æ•°å€¼ï¼Œåˆ™å°è¯•å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å€¼ï¼Œå†æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰ã€‚ å¦‚æœä¸€ä¸ªæ“ä½œæ•°æ˜¯å¯¹è±¡ï¼Œå¦ä¸€ä¸ªæ“ä½œæ•°ä¸æ˜¯ï¼Œåˆ™è°ƒç”¨å¯¹è±¡çš„valueOf()æ–¹æ³•å–å¾—å…¶åŸå§‹å€¼ï¼Œå†æ ¹æ®å‰é¢çš„è§„åˆ™è¿›è¡Œæ¯”è¾ƒã€‚ === !== ä¸¤ä¸ªæ“ä½œæ•°åœ¨ä¸è½¬æ¢çš„å‰æä¸‹ç›¸ç­‰æ‰è¿”å›true æ¡ä»¶æ“ä½œç¬¦ bool ? true_val : false_val èµ‹å€¼æ“ä½œç¬¦ = é€—å·æ“ä½œç¬¦ let num = (5, 1, 4, 8, 0) // num å€¼ä¸º 0 è¯­å¥for-in æšä¸¾å¯¹è±¡ä¸­çš„éç¬¦å·é”®å±æ€§ å¯¹è±¡çš„å±æ€§æ˜¯æ— åºçš„ï¼Œæ‰€ä»¥å…ˆåé¡ºåºå› æµè§ˆå™¨è€Œå¼‚ã€‚ for-of éå†å¯è¿­ä»£å¯¹è±¡çš„å…ƒç´  for-ofå¾ªç¯ä¼šæŒ‰ç…§å¯è¿­ä»£å¯¹è±¡çš„next()æ–¹æ³•äº§ç”Ÿå€¼çš„é¡ºåºè¿­ä»£å…ƒç´  switch æ¯”è¾ƒå€¼æ—¶ä½¿ç”¨å…¨ç­‰ ===ï¼Œä¸ä¼šå¼ºåˆ¶è½¬æ¢æ•°æ®ç±»å‹ å‡½æ•° return è¿”å› undefined","categories":[],"tags":[{"name":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","slug":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","permalink":"http://ziiyan.github.io/tags/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}]},{"title":"å­¦ä¹ ç¬”è®°ï¼šå‰ç«¯é«˜æ‰‹è¿›é˜¶","slug":"å­¦ä¹ ç¬”è®°ï¼šå‰ç«¯é«˜æ‰‹è¿›é˜¶","date":"2020-08-27T01:44:34.000Z","updated":"2020-08-27T03:02:15.350Z","comments":true,"path":"2020/08/27/å­¦ä¹ ç¬”è®°ï¼šå‰ç«¯é«˜æ‰‹è¿›é˜¶/","link":"","permalink":"http://ziiyan.github.io/2020/08/27/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%9A%E5%89%8D%E7%AB%AF%E9%AB%98%E6%89%8B%E8%BF%9B%E9%98%B6/","excerpt":"","text":"HTML æ ‡ç­¾ meta &lt;meta http-equiv=&quot;Refresh&quot; content=&quot;5;URL=page2.html&quot;&gt; 5 ç§’åè·³è½¬ page2.html &lt;meta http-equiv=&quot;Refresh&quot; content=&quot;60&quot;&gt; æ¯éš” 60s åˆ·æ–° ä¸å¯å–æ¶ˆï¼Œå»ºè®® JavaScript å®šæ—¶å™¨å®ç° æ¶ˆæ¯æé†’ JavaScript æ¨¡æ‹Ÿä¿®æ”¹ title æ ‡ç­¾ H5 Websocket Web Notifications API æ€§èƒ½ä¼˜åŒ– æ¸²æŸ“é€Ÿåº¦æ…¢ è¯·æ±‚æ—¶é—´é•¿","categories":[],"tags":[{"name":"å…¶å®ƒ","slug":"å…¶å®ƒ","permalink":"http://ziiyan.github.io/tags/%E5%85%B6%E5%AE%83/"}]},{"title":"å­¦ä¹ ç¬”è®°ï¼šVuex åŸç†","slug":"é¢è¯•å‡†å¤‡ï¼šVuex-åŸç†","date":"2020-08-21T00:50:31.000Z","updated":"2020-08-25T08:02:16.780Z","comments":true,"path":"2020/08/21/é¢è¯•å‡†å¤‡ï¼šVuex-åŸç†/","link":"","permalink":"http://ziiyan.github.io/2020/08/21/%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%EF%BC%9AVuex-%E5%8E%9F%E7%90%86/","excerpt":"","text":"ç®€ä»‹ Vuex æ˜¯ä¸€ä¸ªä¸“ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚ å®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚ æŠŠç»„ä»¶çš„å…±äº«çŠ¶æ€æŠ½å–å‡ºæ¥ï¼Œä»¥ä¸€ä¸ªå…¨å±€å•ä¾‹æ¨¡å¼ç®¡ç†ã€‚ è§£å†³å¤šä¸ªç»„ä»¶å…±äº«çŠ¶æ€æ—¶ï¼Œå•å‘æ•°æ®æµè¢«ç ´åçš„é—®é¢˜ã€‚ ç‰¹ç‚¹ Vuex çš„çŠ¶æ€å­˜å‚¨æ˜¯å“åº”å¼çš„ æ”¹å˜ store ä¸­çš„çŠ¶æ€çš„å”¯ä¸€é€”å¾„å°±æ˜¯æ˜¾å¼åœ°æäº¤ (commit) mutation åŸç† æ”¹å˜çŠ¶æ€çš„å”¯ä¸€é€”å¾„å°±æ˜¯æäº¤mutations å¦‚æœæ˜¯å¼‚æ­¥çš„ï¼Œå°±æ´¾å‘(dispatch)actionsï¼Œå…¶æœ¬è´¨è¿˜æ˜¯æäº¤mutations æ€æ ·å»è§¦å‘actionså‘¢ï¼Ÿå¯ä»¥ç”¨ç»„ä»¶Vue Componentsä½¿ç”¨dispatchæˆ–è€…åç«¯æ¥å£å»è§¦å‘ æäº¤mutationsåï¼Œå¯ä»¥åŠ¨æ€çš„æ¸²æŸ“ç»„ä»¶Vue Components references Vuex æ˜¯ä»€ä¹ˆï¼Ÿ ç†è§£ vuex å®ç°åŸç†","categories":[],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://ziiyan.github.io/tags/Vue/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://ziiyan.github.io/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"å­¦ä¹ ç¬”è®°ï¼šPromise","slug":"å­¦ä¹ ç¬”è®°ï¼šPromise","date":"2020-08-20T04:33:36.000Z","updated":"2020-08-20T01:07:20.842Z","comments":true,"path":"2020/08/20/å­¦ä¹ ç¬”è®°ï¼šPromise/","link":"","permalink":"http://ziiyan.github.io/2020/08/20/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%9APromise/","excerpt":"","text":"æç®€é›å½¢12345678910111213141516function Promise(fn) &#123; var value = null, callbacks = []; this.then = function(onFulfilled) &#123; callbacks.push(onFulfilled); &#125;; function resolve(value) &#123; callbacks.forEach(function (callback) &#123; callback(value); &#125;); &#125; fn(resolve);&#125; ä»£ç é€»è¾‘ è°ƒç”¨ then æ–¹æ³•ï¼Œå°†æƒ³è¦åœ¨ Promise å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶æ‰§è¡Œçš„å›è°ƒæ”¾å…¥ callbacks é˜Ÿåˆ— å°±æ˜¯æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œè§‚å¯Ÿè€…æ¨¡å¼ åˆ›å»º Promise å®ä¾‹æ—¶ä¼ å…¥çš„å‡½æ•° fn ä¼šè¢«èµ‹äºˆä¸€ä¸ªå‡½æ•°ç±»å‹çš„å‚æ•°ï¼Œå³ resolve resolve æ¥æ”¶ä¸€ä¸ªå‚æ•° valueï¼Œä»£è¡¨å¼‚æ­¥æ“ä½œçš„è¿”å›ç»“æœ å½“å¼‚æ­¥æ“ä½œæ‰§è¡ŒæˆåŠŸåï¼Œç”¨æˆ·ä¼šè°ƒç”¨ resolve æ–¹æ³•ã€‚çœŸå®æ“ä½œæ˜¯å°† callbacks é˜Ÿåˆ—ä¸­çš„å›è°ƒä¸€ä¸€æ‰§è¡Œ ä»£ç åˆ†æ new Promise æ—¶ï¼Œä¼ ç»™ promise çš„å‡½æ•°å‘é€å¼‚æ­¥è¯·æ±‚ æ¥ç€è°ƒç”¨ promise å¯¹è±¡çš„ then å±æ€§ï¼Œæ³¨å†Œè¯·æ±‚æˆåŠŸçš„å›è°ƒå‡½æ•° å½“å¼‚æ­¥è¯·æ±‚å‘é€æˆåŠŸæ—¶ï¼Œè°ƒç”¨ resolve(results.id) æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ‰§è¡Œ then æ–¹æ³•æ³¨å†Œçš„å›è°ƒæ•°ç»„ æ”¯æŒé“¾å¼è°ƒç”¨1234567891011121314151617function Promise(fn) &#123; var value = null, callbacks = []; this.then = function(onFulfilled) &#123; callbacks.push(onFulfilled);==&gt; return this; &#125;; function resolve(value) &#123; callbacks.forEach(function (callback) &#123; callback(value); &#125;); &#125; fn(resolve);&#125; åŠ å…¥å»¶æ—¶æ—¶æœº ä¿è¯ resolve æ‰§è¡Œä¹‹å‰ï¼Œthen æ–¹æ³•å·²ç»æ³¨å†Œå®Œæ‰€æœ‰çš„å›è°ƒ 12345678910111213141516171819function Promise(fn) &#123; var value = null, callbacks = []; this.then = function(onFulfilled) &#123; callbacks.push(onFulfilled); return this; &#125;; function resolve(value) &#123;==&gt; setTimeout(function() &#123; callbacks.forEach(function (callback) &#123; callback(value); &#125;);==&gt; &#125;, 0) &#125; fn(resolve);&#125; ä»£ç é€»è¾‘ åˆ©ç”¨ setTimeout æœºåˆ¶ï¼Œå°† resolve ä¸­æ‰§è¡Œå›è°ƒçš„é€»è¾‘æ”¾ç½®åˆ°ä»»åŠ¡é˜Ÿåˆ—æœ«å°¾ï¼Œä¿è¯æ‰§è¡Œ resolve ä¸­çš„ä»£ç æ—¶ï¼Œthen æ–¹æ³•çš„å›è°ƒå‡½æ•°å·²ç»æ³¨å†Œå®Œæˆ é—®é¢˜ åœ¨ Promise å¼‚æ­¥æ“ä½œæˆåŠŸä¹‹åæ‰è°ƒç”¨ then æ³¨å†Œçš„å›è°ƒä¸ä¼šæ‰§è¡Œ åŠ å…¥çŠ¶æ€ å³åŠ å…¥ pending -&gt; fulfilled æˆ– pending -&gt; rejected 1234567891011121314151617181920212223242526function Promise(fn) &#123; var value = null, callbacks = [],==&gt; state = 'pending'; this.then = function(onFulfilled) &#123;==&gt; if (state === 'pending') &#123; callbacks.push(onFulfilled); return this;==&gt; &#125;==&gt; onFulfilled(value);==&gt; return this; &#125;; function resolve(newValue) &#123;==&gt; value = newValue;==&gt; state = 'fulfilled'; setTimeout(function() &#123; callbacks.forEach(function (callback) &#123; callback(value); &#125;); &#125;, 0) &#125; fn(resolve);&#125; ä»£ç é€»è¾‘ resolve æ‰§è¡Œæ—¶ï¼Œå°†çŠ¶æ€è®¾ç½®ä¸º fultilledï¼Œä¹‹åè°ƒç”¨then æ·»åŠ çš„æ–°å›è°ƒéƒ½ä¼šç«‹å³æ‰§è¡Œï¼Œä¸éœ€è¦åŠ å…¥ callbacks é˜Ÿåˆ— é“¾å¼ Promise å¦‚æœ then å‡½æ•°é‡Œé¢æ³¨å†Œçš„ä»æ˜¯ Promiseï¼Œåªè¦åœ¨thenæ–¹æ³•é‡Œé¢returnä¸€ä¸ªpromise 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647function Promise(fn) &#123; var state = 'pending', value = null, callbacks = []; this.then = function(onFulfilled) &#123;&gt; return new Promise(function (resolve) &#123;&gt; handle(&#123;&gt; onFulfilled: onFulfilled || null,&gt; resolve: resolve&gt; &#125;);&gt; &#125;); &#125;; &gt; function handle(callback) &#123; if (state === 'pending') &#123; callbacks.push(callback); return; &#125;&gt; // å¦‚æœ then ä¸­æ²¡æœ‰ä¼ é€’ä»»ä½•ä¸œè¥¿&gt; if (!callback.onFultilled) &#123;&gt; callback.resolve(value);&gt; return;&gt; &#125;&gt; var ret = callback.onFulfilled(value);&gt; callback.resolve(ret); &#125; function resolve(newValue) &#123;&gt; if (newValue &amp;&amp; (typeof newValue === 'object' || typeof newValue === 'function')) &#123;&gt; var then = newValue.then;&gt; if (typeof then === 'function') &#123;&gt; then.call(newValue, resolve);&gt; return;&gt; &#125;&gt; &#125; value = newValue; state = 'fulfilled'; setTimeout(function() &#123; callbacks.forEach(function (callback) &#123; handle(callback); &#125;); &#125;, 0) &#125; fn(resolve);&#125; ä»£ç é€»è¾‘ then æ–¹æ³•ä¸­ï¼Œåˆ›å»ºå¹¶è¿”å›äº†æ–°çš„ Promise å®ä¾‹ ä¸²è¡Œ Promise çš„åŸºç¡€ï¼Œå¹¶ä¸”æ”¯æŒé“¾å¼è°ƒç”¨ handle æ–¹æ³•æ˜¯ Promise å†…éƒ¨çš„æ–¹æ³•ï¼Œthen æ–¹æ³•ä¼ å…¥çš„è¡Œå‚ onFulfilled ä»¥åŠåˆ›å»ºæ–° Promise å®ä¾‹æ—¶ä¼ å…¥çš„ resolve å‡è¢« push åˆ°å½“å‰ promise çš„ callbacks é˜Ÿåˆ—ä¸­ è¿™æ˜¯è¡”æ¥å½“å‰ Promise å®ä¾‹å’Œåé‚» promise çš„å…³é”® å¤±è´¥å¤„ç†1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465function Promise(fn) &#123; var state = 'pending', value = null, callbacks = []; this.then = function(onFulfilled) &#123; return new Promise(function (resolve) &#123; handle(&#123; onFulfilled: onFulfilled || null,&gt; onRejected: onRejected || null, resolve: resolve,&gt; reject: reject &#125;); &#125;); &#125;; function handle(callback) &#123; if (state === 'pending') &#123; callbacks.push(callback); return; &#125; // å¦‚æœ then ä¸­æ²¡æœ‰ä¼ é€’ä»»ä½•ä¸œè¥¿ if (!callback.onFultilled) &#123; callback.resolve(value); return; &#125;&gt; var cb = state === 'fullfilled' ? callback.onFulfilled : callback.onRejected;&gt; if (cb === null) &#123;&gt; cb = state === 'fulfilled' ? callback.resolve : callback.reject;&gt; cb(value);&gt; return;&gt; &#125; var ret = cb(value); callback.resolve(ret); &#125; function resolve(newValue) &#123; if (newValue &amp;&amp; (typeof newValue === 'object' || typeof newValue === 'function')) &#123; var then = newValue.then; if (typeof then === 'function') &#123; then.call(newValue, resolve); return; &#125; &#125; state = 'fulfilled'; value = newValue;&gt; execute(); &#125; &gt; function reject(reason) &#123;&gt; state = 'rejected';&gt; value = reason;&gt; execute();&gt; &#125; function execute() &#123; setTimeout(function() &#123; callbacks.forEach(function (callback) &#123; handle(callback); &#125;); &#125;, 0) &#125; fn(resolve);&#125; æŠ½ç¦» resolve å’Œ reject å…¬å…±éƒ¨åˆ†ä½œä¸º execute å¼‚å¸¸å¤„ç†123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869function Promise(fn) &#123; var state = 'pending', value = null, callbacks = []; this.then = function(onFulfilled) &#123; return new Promise(function (resolve) &#123; handle(&#123; onFulfilled: onFulfilled || null, onRejected: onRejected || null, resolve: resolve, reject: reject &#125;); &#125;); &#125;; function handle(callback) &#123; if (state === 'pending') &#123; callbacks.push(callback); return; &#125; // å¦‚æœ then ä¸­æ²¡æœ‰ä¼ é€’ä»»ä½•ä¸œè¥¿ if (!callback.onFultilled) &#123; callback.resolve(value); return; &#125; var cb = state === 'fullfilled' ? callback.onFulfilled : callback.onRejected; if (cb === null) &#123; cb = state === 'fulfilled' ? callback.resolve : callback.reject; cb(value); return; &#125;&gt; try &#123; var ret = cb(value); callback.resolve(ret);&gt; &#125; catch (e) &#123;&gt; callback.reject(e);&gt; &#125; &#125; function resolve(newValue) &#123; if (newValue &amp;&amp; (typeof newValue === 'object' || typeof newValue === 'function')) &#123; var then = newValue.then; if (typeof then === 'function') &#123; then.call(newValue, resolve); return; &#125; &#125; state = 'fulfilled'; value = newValue; execute(); &#125; function reject(reason) &#123; state = 'rejected'; value = reason; execute(); &#125; function execute() &#123; setTimeout(function() &#123; callbacks.forEach(function (callback) &#123; handle(callback); &#125;); &#125;, 0) &#125; fn(resolve);&#125; æ€»ç»“ promiseé‡Œé¢çš„thenå‡½æ•°ä»…ä»…æ˜¯æ³¨å†Œäº†åç»­éœ€è¦æ‰§è¡Œçš„ä»£ç  çœŸæ­£çš„æ‰§è¡Œæ˜¯åœ¨resolveæ–¹æ³•é‡Œé¢æ‰§è¡Œçš„ Promise ä¸»è¦ä½¿ç”¨äº†è®¾è®¡æ¨¡å¼ä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼š é€šè¿‡ Promise.prototype.then å’Œ Promise.prototype.catch æ–¹æ³•å°†è§‚å¯Ÿè€…æ–¹æ³•æ³¨å†Œåˆ°è¢«è§‚å¯Ÿè€… Promise å¯¹è±¡ä¸­ï¼ŒåŒæ—¶è¿”å›ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡ï¼Œä»¥ä¾¿å¯ä»¥é“¾å¼è°ƒç”¨ã€‚ è¢«è§‚å¯Ÿè€…ç®¡ç†å†…éƒ¨ pendingã€fulfilled å’Œ rejected çš„çŠ¶æ€è½¬å˜ï¼ŒåŒæ—¶é€šè¿‡æ„é€ å‡½æ•°ä¸­ä¼ é€’çš„ resolve å’Œ reject æ–¹æ³•ä»¥ä¸»åŠ¨è§¦å‘çŠ¶æ€è½¬å˜å’Œé€šçŸ¥è§‚å¯Ÿè€…ã€‚ references https://mengera88.github.io/2017/05/18/Promise%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://ziiyan.github.io/tags/JavaScript/"}]},{"title":"å­¦ä¹ ç¬”è®°ï¼šJavaScriptè¿è¡ŒåŸç†","slug":"å­¦ä¹ ç¬”è®°ï¼šJavaScriptè¿è¡ŒåŸç†","date":"2020-08-18T01:25:08.000Z","updated":"2020-08-18T02:12:54.357Z","comments":true,"path":"2020/08/18/å­¦ä¹ ç¬”è®°ï¼šJavaScriptè¿è¡ŒåŸç†/","link":"","permalink":"http://ziiyan.github.io/2020/08/18/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%9AJavaScript%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86/","excerpt":"","text":"æ€»ä½“æµç¨‹ JS æºç  parser è§£æå™¨ AST æŠ½è±¡è¯­æ³•æ ‘ interpreter è§£é‡Šå™¨ bytecode å­—èŠ‚ç ï¼ˆå¹³å°æ— å…³ï¼‰ compiler ç¼–è¯‘å™¨ï¼ˆæ ¹æ®å¹³å°ç¼–è¯‘ç›¸åº”ä»£ç ï¼‰ machine code æœºå™¨ä»£ç ï¼ˆæ±‡ç¼–ä»£ç ï¼‰ V8 æ¥æ”¶ JavaScript ä»£ç ï¼Œç¼–è¯‘ä»£ç ç„¶åæ‰§è¡Œçš„ C++ ç¨‹åºï¼Œç¼–è¯‘åçš„ä»£ç å¯åœ¨å¤šç§æ“ä½œç³»ç»Ÿã€å¤šç§å¤„ç†å™¨ä¸Šè¿è¡Œ è´Ÿè´£å·¥ä½œ ç¼–è¯‘å’Œæ‰§è¡Œ JS ä»£ç  å¤„ç†è°ƒç”¨æ ˆ å†…å­˜åˆ†é… åƒåœ¾å›æ”¶ ç¼–è¯‘å’Œæ‰§è¡Œ JS ä»£ç  JS æºç é€šè¿‡ parser è§£æå™¨ç”Ÿæˆ AST æŠ½è±¡è¯­æ³•æ ‘ AST æŠ½è±¡è¯­æ³•æ ‘é€šè¿‡åŸºå‡†è§£é‡Šå™¨ Ignition ç”Ÿæˆ bytecode å­—èŠ‚ç  æ­¤æ—¶ AST è¢«æ¸…é™¤ï¼Œé‡Šæ”¾å†…å­˜ç©ºé—´ bytecode ç›´æ¥è¢«è§£é‡Šæ‰§è¡Œ åŒæ—¶ bytecode å°†ä½œä¸ºåŸºå‡†æ‰§è¡Œæ¨¡å‹ bytecode å¤§å°ç›¸å½“äºç­‰æ•ˆæœºå™¨ä»£ç å¤§å°çš„25%-50% åŸºå‡†è§£é‡Šå™¨ Ignition æ”¶é›†ä¼˜åŒ–ä»£ç ä¿¡æ¯ï¼Œå‘é€ç»™ç¼–è¯‘å™¨ TurboFan å¦‚å˜é‡ç±»å‹ã€å‡½æ•°æ‰§è¡Œé¢‘ç‡ ç¼–è¯‘å™¨ TurboFan æ ¹æ®ä¼˜åŒ–ä¿¡æ¯ &amp; bytecode å­—èŠ‚ç ç¼–è¯‘å‡ºç»è¿‡ä¼˜åŒ–çš„æœºå™¨ä»£ç  deoptimizationï¼šä¼˜åŒ–åçš„æœºå™¨ä»£ç å¯èƒ½è¢«é€†å‘è¿˜åŸæˆ bytecode å­—èŠ‚ç  åŸºå‡†è§£é‡Šå™¨ Ignition æ”¶é›†åˆ°çš„ä¿¡æ¯æ˜¯é”™è¯¯çš„ æ¯”å¦‚è°ƒç”¨å‡½æ•°æ—¶ï¼Œå˜é‡ç±»å‹å¼€å§‹å‡ æ¬¡ä¼ å…¥éƒ½æ˜¯ intï¼Œæœºå™¨ä»£ç ä¼šå‡å®šå˜é‡ç±»å‹ä¸º intï¼Œåæ¥æ”¹ä¸º string æœºå™¨ä»£ç å°±æ— æ³•æ‰§è¡Œï¼Œéœ€è¦ deoptimization æœ€å¥½ä¿æŒå˜é‡ç±»å‹ä¸å˜","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://ziiyan.github.io/tags/JavaScript/"},{"name":"æµè§ˆå™¨","slug":"æµè§ˆå™¨","permalink":"http://ziiyan.github.io/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"}]},{"title":"é¢è¯•å‡†å¤‡ï¼šVue-Router åŸç†","slug":"é¢è¯•å‡†å¤‡ï¼šVue-RouteråŸç†","date":"2020-08-17T01:00:07.000Z","updated":"2020-08-19T01:42:44.817Z","comments":true,"path":"2020/08/17/é¢è¯•å‡†å¤‡ï¼šVue-RouteråŸç†/","link":"","permalink":"http://ziiyan.github.io/2020/08/17/%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%EF%BC%9AVue-Router%E5%8E%9F%E7%90%86/","excerpt":"","text":"è·¯ç”±åˆ†ç±» åŒ¹é…ä¸åŒçš„ url è·¯å¾„ï¼Œè¿›è¡Œè§£æï¼Œç„¶ååŠ¨æ€çš„æ¸²æŸ“å‡ºåŒºåŸŸ html å†…å®¹ ä½† url æ”¹å˜ä¼šé€ æˆé¡µé¢åˆ·æ–°ï¼Œè§£å†³æ€è·¯æ˜¯æ”¹å˜ url ä½†ä¸åˆ·æ–°é¡µé¢ hash æ¨¡å¼ # å·åé¢ hash å€¼å˜åŒ–ï¼Œä¸ä¼šå¯¼è‡´æµè§ˆå™¨å‘å‡ºè¯·æ±‚ï¼Œä¹Ÿå°±ä¸ä¼šåˆ·æ–°é¡µé¢ hash å€¼å˜åŒ–ä¼šè§¦å‘ hashchange äº‹ä»¶ï¼Œé€šè¿‡ç›‘å¬ hashchange å®ç°æ›´æ–°é¡µé¢éƒ¨åˆ†å†…å®¹ æ”¯æŒæ‰€æœ‰æµè§ˆå™¨ history æ¨¡å¼ H5 API pushState replaceState è§¦å‘ popstate äº‹ä»¶ æ²¡æœ‰ # å·ï¼Œåˆ·æ–°ä¼šå‘é€è¯·æ±‚ï¼Œéœ€è¦æœåŠ¡å™¨æ”¯æŒï¼ŒæŠŠæ‰€æœ‰è·¯ç”±éƒ½é‡å®šå‘åˆ°æ ¹é¡µé¢ ä¾èµ– HTML5 History API å’ŒæœåŠ¡å™¨é…ç½® abstract æ¨¡å¼ æ”¯æŒæ‰€æœ‰ JavaScript è¿è¡Œç¯å¢ƒï¼Œå¦‚ Node.js æœåŠ¡å™¨ç«¯ å¦‚æœå‘ç°æ²¡æœ‰æµè§ˆå™¨çš„ APIï¼Œè·¯ç”±ä¼šè‡ªåŠ¨å¼ºåˆ¶è¿›å…¥è¿™ä¸ªæ¨¡å¼ æºç åˆ†ææ¨¡å¼å‚æ•°1234const router = new VueRouter(&#123; mode: 'history', routes: [...]&#125;) 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102export default class VueRouter &#123; // ... mode: string // ä¼ å…¥çš„å­—ç¬¦ä¸²å‚æ•°ï¼ŒæŒ‡ç¤ºhistoryç±»åˆ« history: HashHistory | HTML5History | AbstractHistory // å®é™…èµ·ä½œç”¨çš„å¯¹è±¡å±æ€§ï¼Œå¿…é¡»æ˜¯ä»¥ä¸Šä¸‰ä¸ªç±»çš„æšä¸¾ // ... fallback: boolean // å¦‚æµè§ˆå™¨ä¸æ”¯æŒï¼Œ'history'æ¨¡å¼éœ€å›æ»šä¸º'hash'æ¨¡å¼ // ... constructor (options: RouterOptions = &#123;&#125;) &#123; // ... let mode = options.mode || 'hash' // é»˜è®¤ä¸º'hash'æ¨¡å¼ this.fallback = mode === 'history' &amp;&amp; !supportsPushState &amp;&amp; options.fallback !== false // é€šè¿‡supportsPushStateåˆ¤æ–­æµè§ˆå™¨æ˜¯å¦æ”¯æŒ'history'æ¨¡å¼ if (this.fallback) &#123; mode = 'hash' &#125; if (!inBrowser) &#123; // ä¸åœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹è¿è¡Œéœ€å¼ºåˆ¶ä¸º'abstract'æ¨¡å¼ mode = 'abstract' &#125; this.mode = mode // æ ¹æ®modeç¡®å®šhistoryå®é™…çš„ç±»å¹¶å®ä¾‹åŒ– switch (mode) &#123; case 'history': this.history = new HTML5History(this, options.base) break case 'hash': this.history = new HashHistory(this, options.base, this.fallback) break case 'abstract': this.history = new AbstractHistory(this, options.base) break default: if (process.env.NODE_ENV !== 'production') &#123; assert(false, `invalid mode: $&#123;mode&#125;`) &#125; &#125; &#125; // ... init (app: any /* Vue component instance */) &#123; // ... const history = this.history // æ ¹æ®historyçš„ç±»åˆ«æ‰§è¡Œç›¸åº”çš„åˆå§‹åŒ–æ“ä½œå’Œç›‘å¬ if (history instanceof HTML5History || history instanceof HashHistory) &#123; const handleInitialScroll = routeOrError =&gt; &#123; const from = history.current const expectScroll = this.options.scrollBehavior const supportsScroll = supportsPushState &amp;&amp; expectScroll if (supportsScroll &amp;&amp; 'fullPath' in routeOrError) &#123; handleScroll(this, routeOrError, from, false) &#125; &#125; const setupListeners = routeOrError =&gt; &#123; history.setupListeners() handleInitialScroll(routeOrError) &#125; history.transitionTo( history.getCurrentLocation(), setupListeners, setupListeners ) &#125; history.listen(route =&gt; &#123; this.apps.forEach(app =&gt; &#123; app._route = route &#125;) &#125;) &#125; // ... // VueRouterç±»æš´éœ²çš„ä»¥ä¸‹æ–¹æ³•å®é™…æ˜¯è°ƒç”¨å…·ä½“historyå¯¹è±¡çš„æ–¹æ³• push (location: RawLocation, onComplete?: Function, onAbort?: Function) &#123; // ... this.history.push(location, onComplete, onAbort) &#125; replace (location: RawLocation, onComplete?: Function, onAbort?: Function) &#123; // ... this.history.replace(location, onComplete, onAbort) &#125; go (n: number) &#123; this.history.go(n) &#125; back () &#123; this.go(-1) &#125; forward () &#123; this.go(1) &#125; // ... ä½œä¸ºå‚æ•°ä¼ å…¥çš„å­—ç¬¦ä¸²å±æ€§modeåªæ˜¯ä¸€ä¸ªæ ‡è®°ï¼Œç”¨æ¥æŒ‡ç¤ºå®é™…èµ·ä½œç”¨çš„å¯¹è±¡å±æ€§historyçš„å®ç°ç±» history - HTML5History hash - HashHistory abstract - AbstractHistory åˆå§‹åŒ–å¯¹åº”çš„ history ä¹‹å‰ï¼Œä¼šå¯¹ mode åšä¸€äº›æ ¡éªŒ è‹¥æµè§ˆå™¨ä¸æ”¯æŒ HTML5Historyï¼Œåˆ™modeå¼ºåˆ¶è®¾ä¸ºhash è‹¥ä¸æ˜¯åœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹è¿è¡Œï¼Œåˆ™modeå¼ºåˆ¶è®¾ä¸ºabstract VueRouter ç±»ä¸­çš„onReady()ã€push()ç­‰æ–¹æ³•åªæ˜¯ä¸€ä¸ªä»£ç† å®é™…æ˜¯è°ƒç”¨çš„å…·ä½“historyå¯¹è±¡çš„å¯¹åº”æ–¹æ³• åœ¨init()æ–¹æ³•ä¸­åˆå§‹åŒ–æ—¶ï¼Œä¹Ÿæ˜¯æ ¹æ®historyå¯¹è±¡å…·ä½“çš„ç±»åˆ«æ‰§è¡Œä¸åŒæ“ä½œ HashHistory hashï¼ˆâ€œ#â€ï¼‰ç¬¦å·çš„æœ¬æ¥ä½œç”¨æ˜¯åŠ åœ¨URLä¸­æŒ‡ç¤ºç½‘é¡µä¸­çš„ä½ç½®ï¼Œå¯é€šè¿‡ window.location.hash å±æ€§è¯»å– è™½ç„¶å‡ºç°åœ¨URLä¸­ï¼Œä½†æ˜¯ç”¨æ¥æŒ‡å¯¼æµè§ˆå™¨åŠ¨ä½œçš„ï¼Œä¸ä¼šè¢«åŒ…æ‹¬åœ¨HTTPè¯·æ±‚ä¸­ï¼Œå¯¹æœåŠ¡å™¨ç«¯å®Œå…¨æ— ç”¨ï¼Œå› æ­¤ï¼Œæ”¹å˜hashä¸ä¼šé‡æ–°åŠ è½½é¡µé¢ å¯ä»¥ä¸ºhashçš„æ”¹å˜æ·»åŠ ç›‘å¬äº‹ä»¶ hashchange æ¯ä¸€æ¬¡æ”¹å˜hashï¼ˆwindow.location.hashï¼‰ï¼Œéƒ½ä¼šåœ¨æµè§ˆå™¨çš„è®¿é—®å†å²ä¸­å¢åŠ ä¸€ä¸ªè®°å½• pushç›´æ¥èµ‹å€¼ï¼Œhashçš„æ”¹å˜ä¼šè‡ªåŠ¨æ·»åŠ åˆ°æµè§ˆå™¨çš„è®¿é—®å†å²è®°å½•ä¸­ 1window.location.hash = route.fullPath replace å¹¶ä¸æ˜¯å°†æ–°è·¯ç”±æ·»åŠ åˆ°æµè§ˆå™¨è®¿é—®å†å²çš„æ ˆé¡¶ï¼Œè€Œæ˜¯æ›¿æ¢æ‰å½“å‰çš„è·¯ç”± 123window.location.replace( window.location.href.slice(0, i &gt;= 0 ? i : 0) + '#' + path) ç›‘å¬åœ°å€æ  ç›‘å¬ hashchangeï¼Œè°ƒç”¨çš„å‡½æ•°ä¸º replaceHash å³åœ¨æµè§ˆå™¨åœ°å€æ ä¸­ç›´æ¥è¾“å…¥è·¯ç”±ç›¸å½“äºä»£ç è°ƒç”¨äº† replace() æ–¹æ³• HTML5History History interface æ˜¯æµè§ˆå™¨å†å²è®°å½•æ ˆæä¾›çš„æ¥å£ï¼Œé€šè¿‡ back(), forward(), go() ç­‰æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥è¯»å–æµè§ˆå™¨å†å²è®°å½•æ ˆçš„ä¿¡æ¯ï¼Œè¿›è¡Œå„ç§è·³è½¬æ“ä½œ ä»HTML5å¼€å§‹ï¼ŒHistory interfaceæä¾›äº†ä¸¤ä¸ªæ–°çš„æ–¹æ³•ï¼špushState(), replaceState() ä½¿å¾—æˆ‘ä»¬å¯ä»¥å¯¹æµè§ˆå™¨å†å²è®°å½•æ ˆè¿›è¡Œä¿®æ”¹ è¿™ä¸¤ä¸ªæ–¹æ³•æœ‰ä¸ªå…±åŒçš„ç‰¹ç‚¹ï¼šå½“è°ƒç”¨ä»–ä»¬ä¿®æ”¹æµè§ˆå™¨å†å²è®°å½•æ ˆåï¼Œè™½ç„¶å½“å‰URLæ”¹å˜äº†ï¼Œä½†æµè§ˆå™¨ä¸ä¼šç«‹å³å‘é€è¯·æ±‚è¯¥URLï¼Œè¿™å°±ä¸ºå•é¡µåº”ç”¨å‰ç«¯è·¯ç”±â€œæ›´æ–°è§†å›¾ä½†ä¸é‡æ–°è¯·æ±‚é¡µé¢â€æä¾›äº†åŸºç¡€ push å¯¹ window.location.hash ç›´æ¥è¿›è¡Œèµ‹å€¼æ”¹ä¸ºäº†è°ƒç”¨ history.pushState() æ–¹æ³• replace window.location.replace æ”¹ä¸ºäº† history.replaceState() æ–¹æ³• è¯·æ±‚é—®é¢˜ ç”¨æˆ·ç›´æ¥åœ¨åœ°å€æ ä¸­è¾“å…¥å¹¶å›è½¦æ—¶ï¼Œæµè§ˆå™¨ä¼šé‡å¯é‡æ–°åŠ è½½åº”ç”¨ å¦‚æœ URL åŒ¹é…ä¸åˆ°ä»»ä½•é™æ€èµ„æºï¼Œåˆ™åº”è¯¥è¿”å›åŒä¸€ä¸ª index.html é¡µé¢ï¼Œè¿™ä¸ªé¡µé¢å°±æ˜¯ä½  app ä¾èµ–çš„é¡µé¢ åŒºåˆ« history éœ€è¦ H5 æ¥å£çš„æ”¯æŒï¼Œä¼šæœ‰å…¼å®¹æ€§é—®é¢˜ éœ€è¦åç«¯é…åˆè®¾ç½®é™æ€èµ„æºé‡å®šå‘ï¼Œå¦åˆ™ä¼š 404 pushStateè®¾ç½®çš„æ–°URLå¯ä»¥æ˜¯ä¸å½“å‰URLåŒæºçš„ä»»æ„URLï¼›è€Œhashåªå¯ä¿®æ”¹#åé¢çš„éƒ¨åˆ†ï¼Œæ•…åªå¯è®¾ç½®ä¸å½“å‰åŒæ–‡æ¡£çš„URL pushStateè®¾ç½®çš„æ–°URLå¯ä»¥ä¸å½“å‰URLä¸€æ¨¡ä¸€æ ·ï¼Œè¿™æ ·ä¹Ÿä¼šæŠŠè®°å½•æ·»åŠ åˆ°æ ˆä¸­ï¼›è€Œhashè®¾ç½®çš„æ–°å€¼å¿…é¡»ä¸åŸæ¥ä¸ä¸€æ ·æ‰ä¼šè§¦å‘è®°å½•æ·»åŠ åˆ°æ ˆä¸­ pushStateé€šè¿‡stateObjectå¯ä»¥æ·»åŠ ä»»æ„ç±»å‹çš„æ•°æ®åˆ°è®°å½•ä¸­ï¼›è€Œhashåªå¯æ·»åŠ çŸ­å­—ç¬¦ä¸² pushStateå¯é¢å¤–è®¾ç½®titleå±æ€§ä¾›åç»­ä½¿ç”¨ references å‰ç«¯è·¯ç”±ç®€ä»‹ä»¥åŠvue-routerå®ç°åŸç† ã€æºç æ‹¾é—ã€‘ä»vue-routerçœ‹å‰ç«¯è·¯ç”±çš„ä¸¤ç§å®ç°","categories":[],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://ziiyan.github.io/tags/Vue/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://ziiyan.github.io/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"å­¦ä¹ ç¬”è®°ï¼šæµè§ˆå™¨å·¥ä½œåŸç†","slug":"å­¦ä¹ ç¬”è®°ï¼šæµè§ˆå™¨å·¥ä½œåŸç†","date":"2020-08-16T13:16:51.000Z","updated":"2020-08-16T15:13:34.939Z","comments":true,"path":"2020/08/16/å­¦ä¹ ç¬”è®°ï¼šæµè§ˆå™¨å·¥ä½œåŸç†/","link":"","permalink":"http://ziiyan.github.io/2020/08/16/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%9A%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/","excerpt":"","text":"æµè§ˆå™¨ç»“æ„å›¾ ç”¨æˆ·ç•Œé¢ï¼šå±•ç¤ºé™¤æ ‡ç­¾é¡µçª—å£ä¹‹å¤–çš„å…¶ä»–ç”¨æˆ·ç•Œé¢å†…å®¹ æ¸²æŸ“å¼•æ“ï¼ˆæµè§ˆå™¨å†…æ ¸ï¼‰ï¼šæ¸²æŸ“ç”¨æˆ·è¯·æ±‚çš„é¡µé¢å†…å®¹ æµè§ˆå™¨å¼•æ“ï¼šç”¨æˆ·ç•Œé¢å’Œæ¸²æŸ“å¼•æ“ä¹‹é—´ä¼ é€’æ•°æ® ç½‘ç»œæ¨¡å—ï¼šè´Ÿè´£ç½‘ç»œè¯·æ±‚ js è§£é‡Šå™¨ï¼šè§£æå’Œæ‰§è¡Œ js æ•°æ®æŒä¹…å±‚ï¼šå­˜å‚¨å„ç§æ•°æ® è¿›ç¨‹ / çº¿ç¨‹ è¿›ç¨‹ æ“ä½œç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„åŸºæœ¬å•å…ƒ å¯ä»¥ç”³è¯·å’Œæ‹¥æœ‰è®¡ç®—æœºèµ„æºï¼Œè¿›ç¨‹æ˜¯ç¨‹åºçš„åŸºæœ¬æ‰§è¡Œå®ä½“ çº¿ç¨‹ æ“ä½œç³»ç»Ÿèƒ½å¤Ÿè¿›è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•ä½ ä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥å¹¶å‘å¤šä¸ªçº¿ç¨‹ï¼Œæ¯æ¡çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œä¸åŒçš„ä»»åŠ¡ å¤šè¿›ç¨‹æµè§ˆå™¨ç»“æ„ æµè§ˆå™¨è¿›ç¨‹ï¼šæ§åˆ¶é™¤æ ‡ç­¾é¡µå¤–çš„ç”¨æˆ·ç•Œé¢ï¼ˆåŒ…æ‹¬åœ°å€æ ã€ä¹¦ç­¾ã€åé€€å’Œå‰è¿›æŒ‰é’®ï¼Œè´Ÿè´£ä¸æµè§ˆå™¨çš„å…¶ä»–è¿›ç¨‹åè°ƒå·¥ä½œï¼‰ ç½‘ç»œè¿›ç¨‹ï¼šå‘èµ·æ¥æ”¶ç½‘ç»œè¯·æ±‚ GPU è¿›ç¨‹ï¼šæ•´ä¸ªæµè§ˆå™¨ç•Œé¢çš„æ¸²æŸ“ æ’ä»¶è¿›ç¨‹ï¼šæ§åˆ¶ç½‘ç«™ä½¿ç”¨çš„æ‰€æœ‰æ’ä»¶ï¼ˆflashï¼‰ æ¸²æŸ“å™¨è¿›ç¨‹ï¼šæ§åˆ¶æ˜¾ç¤º tab æ ‡ç­¾å†…çš„æ‰€æœ‰å†…å®¹ åœ°å€æ è¾“å…¥åœ°å€åˆ°é¡µé¢å±•ç¤º æµè§ˆå™¨è¿›ç¨‹çš„ UI çº¿ç¨‹æ•æ‰è¾“å…¥å†…å®¹ ç½‘ç»œçº¿ç¨‹è¯·æ±‚ DNS è¿›è¡ŒåŸŸåè§£æï¼Œå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ è·å–åˆ°æ•°æ®åé€šè¿‡ SafeBrowsing æ£€æŸ¥ç«™ç‚¹æ˜¯å¦æ˜¯æ¶æ„ç«™ç‚¹ æ¸²æŸ“å™¨è¿›ç¨‹æ¸²æŸ“é¡µé¢ ä¸»çº¿ç¨‹è§£æ htmlï¼Œæ„é€  DOM æ•°æ®ç»“æ„ ä¸»çº¿ç¨‹è§£æ CSSï¼Œç¡®å®šæ¯ä¸ª DOM èŠ‚ç‚¹çš„è®¡ç®—æ ·å¼ Computed Style æ ·å¼è®¡ç®—é˜¶æ®µ ä¸»çº¿ç¨‹éå† DOM å’Œæ ·å¼ç”Ÿæˆ Layout Tree Layout å¸ƒå±€é˜¶æ®µ Layout Tree èŠ‚ç‚¹è®°å½•åæ ‡å’Œè¾¹æ¡†å°ºå¯¸ Layout Tree å’Œæœ€åå±•ç¤ºåœ¨å±å¹•ä¸Šçš„èŠ‚ç‚¹ä¸€æ · display: none çš„èŠ‚ç‚¹ä¼šåœ¨ dom tree ä½†ä¸åœ¨ layout tree ä¸»çº¿ç¨‹éå† Layout Tree ç”Ÿæˆç»˜åˆ¶é¡ºåºè¡¨ ç»˜åˆ¶é˜¶æ®µï¼ˆpaintï¼‰ å—åˆ° z-index å½±å“ ä¸»çº¿ç¨‹éå† Layout Tree ç”Ÿæˆ Layer Tree ä¸»çº¿ç¨‹å°† ç»˜åˆ¶é¡ºåºè¡¨å’Œ Layer Tree ä¼ ç»™åˆæˆå™¨çº¿ç¨‹ åˆæˆå™¨çº¿ç¨‹å°†æ¯ä¸ªå›¾å±‚åˆ‡å‰²åˆ†ç»™å¤šä¸ªæ …æ ¼åŒ–çº¿ç¨‹ï¼ˆTaster Threadï¼‰ æ …æ ¼åŒ–çº¿ç¨‹å°†ç»“æœä¿å­˜åœ¨ GPU åˆæˆå™¨çº¿ç¨‹æ”¶é›†æ …æ ¼ç»“æœï¼Œç”Ÿæˆåˆæˆå™¨å¸§ æµè§ˆå™¨è¿›ç¨‹å°†åˆæˆå™¨å¸§ä¼ é€ç»™ GPU GPU æ¸²æŸ“å±•ç¤ºåˆ°å±å¹• é‡æ’ / é‡ç»˜ é‡æ’ æ”¹å˜å°ºå¯¸ä½ç½®å±æ€§ é‡æ–°è¿›è¡Œæ ·å¼è®¡ç®—ï¼ˆcomputed styleï¼‰ã€å¸ƒå±€ï¼ˆLayoutï¼‰ã€ç»˜åˆ¶ï¼ˆpaintï¼‰ä»¥åŠä¹‹åçš„æ‰€æœ‰æµç¨‹ é‡ç»˜ æ”¹å˜é¢œè‰²å±æ€§ é‡æ–°è¿›è¡Œæ ·å¼è®¡ç®—ï¼ˆcomputed styleï¼‰ã€ç»˜åˆ¶ï¼ˆpaintï¼‰ä»¥åŠä¹‹åçš„æ‰€æœ‰æµç¨‹ é‡æ’å’Œé‡ç»˜éƒ½ä¼šå ç”¨ä¸»çº¿ç¨‹ï¼ŒJS ä¹Ÿåœ¨ä¸»çº¿ç¨‹ï¼Œä¼šæŠ¢å  åˆæˆå™¨çº¿ç¨‹å’Œæ …æ ¼çº¿ç¨‹ä¸ä¼šå’Œ JS å‘ç”Ÿå†²çª Transform å±æ€§ä¸ç»è¿‡å¸ƒå±€å’Œç»˜åˆ¶ï¼ŒèŠ‚çœè¿ç®—æ—¶é—´ é‡æ’æ¯”é‡ç»˜å¤šä¸€ä¸ª å¸ƒå±€ Layout è¿‡ç¨‹","categories":[],"tags":[{"name":"æµè§ˆå™¨","slug":"æµè§ˆå™¨","permalink":"http://ziiyan.github.io/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"}]},{"title":"é¢ç»ï¼šè´å£³æ‰¾æˆ¿-ä¸€é¢äºŒé¢hré¢","slug":"é¢ç»ï¼šè´å£³æ‰¾æˆ¿-ä¸€é¢äºŒé¢hré¢","date":"2020-08-15T10:40:32.000Z","updated":"2020-08-31T13:32:33.968Z","comments":true,"path":"2020/08/15/é¢ç»ï¼šè´å£³æ‰¾æˆ¿-ä¸€é¢äºŒé¢hré¢/","link":"","permalink":"http://ziiyan.github.io/2020/08/15/%E9%9D%A2%E7%BB%8F%EF%BC%9A%E8%B4%9D%E5%A3%B3%E6%89%BE%E6%88%BF-%E4%B8%80%E9%9D%A2%E4%BA%8C%E9%9D%A2hr%E9%9D%A2/","excerpt":"","text":"ä¸€é¢ è‡ªæˆ‘ä»‹ç» webpack æ‰“åŒ…ä¼˜åŒ–ï¼ˆé¡¹ç›®ï¼‰ ä¼˜åŒ–çš„æ€è€ƒè¿‡ç¨‹ é™¤äº†å·²ç»åšçš„ä¼˜åŒ–è¿˜æœ‰å“ªæ–¹é¢å¯ä»¥åŠªåŠ› vue å®ç°ä¸€ä¸ªå€’è®¡æ—¶ç»„ä»¶ css å‚ç›´å±…ä¸­ï¼Œå­—ä½“ 6px transform position å–å€¼ ä¿®æ”¹ç›’æ¨¡å‹ è®²ä¸€ä¸‹ CORS é™¤äº† CORS è¿˜æœ‰ä»€ä¹ˆè·¨åŸŸ josnp Vue-router åŸç† hash history webpack loaderï¼ˆé¡¹ç›®ï¼‰ arguments åˆ¤æ–­æ•°æ®ç±»å‹çš„æ–¹æ³• JS è·å– DOM å…ƒç´ çš„æ–¹æ³• äºŒé¢ è‡ªæˆ‘ä»‹ç» ä»‹ç»ä¸€ä¸‹é¡¹ç›®ï¼Œåœ¨è¿™ä¸ªé¡¹ç›®é‡Œåšäº†ä»€ä¹ˆ webpack ä¼˜åŒ–çš„æ€è·¯ é¢„æ¸²æŸ“ è®²è®² loader å®ç°èƒŒæ™¯ markdown è§£æ SEO çš„ç†è§£ é€šå¸¸ SEO çš„åšæ³• è¯­ä¹‰åŒ–æ ‡ç­¾ å®ç°è¯»å–ä¸€ä¸ªåµŒå¥—æ·±çš„å¯¹è±¡å±æ€§ï¼ˆ lodash çš„ get æ–¹æ³•ï¼‰ Vue-router åŸç† å·¥ä½œä¸Šå“ªä¸ªè¯¾ç¨‹ç”¨çš„å¤š ç”¨è®¡ç®—æœºç½‘ç»œçš„çŸ¥è¯†ç»“åˆé¡¹ç›®åˆ†æ å¹³æ—¶æ€ä¹ˆå­¦ä¹  hré¢ è‡ªæˆ‘ä»‹ç» æ€ä¹ˆçŸ¥é“è´å£³ æœ‰æ²¡æœ‰æ·±é€ è®¡åˆ’ èŒä¸šè§„åˆ’ æœ‰æœ¨æœ‰å½“è¿‡ç­é•¿/æ”¯ä¹¦ æœ‰æ²¡æœ‰æŠ•åˆ«çš„å…¬å¸ é€‰å…¬å¸çš„åå¥½ æ•ˆç‡æé«˜ï¼ŒæŠ•å®Œç®€å†é©¬ä¸Šæ”¶åˆ°ç¬”è¯•é‚®ä»¶ï¼Œç¬”è¯•ç¬¬äºŒå¤©æ¥åˆ°é¢è¯•é€šçŸ¥ï¼Œ3ç‚¹ä¸€é¢ï¼Œ4ç‚¹äºŒé¢ï¼Œ5ç‚¹hr ä¸€é¢äºŒé¢éƒ½æœ‰é—®åˆ°é¡¹ç›®ï¼Œæ‰€ä»¥é‡å¤çš„é—®é¢˜ä¹Ÿå¤šï¼Œä¸€é¢å¤šäº†äº›åŸºç¡€ï¼ŒäºŒé¢æ„Ÿè§‰æ›´å¤šåœºæ™¯å’Œæ·±æŒ–ï¼Œhr æ˜¯ä¸ªå¾ˆæ¸©æŸ”çš„å°å§å§ æ€»ä½“æ„Ÿå—è¿˜æ˜¯å¾ˆå¥½ï¼Œhr è¯´ä¸€å‘¨ç»™å›å¤","categories":[],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://ziiyan.github.io/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"é¢è¯•å‡†å¤‡ï¼šè™šæ‹Ÿ DOM","slug":"é¢è¯•å‡†å¤‡ï¼šè™šæ‹ŸDOM","date":"2020-08-11T01:02:38.000Z","updated":"2020-08-12T07:10:17.725Z","comments":true,"path":"2020/08/11/é¢è¯•å‡†å¤‡ï¼šè™šæ‹ŸDOM/","link":"","permalink":"http://ziiyan.github.io/2020/08/11/%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%EF%BC%9A%E8%99%9A%E6%8B%9FDOM/","excerpt":"","text":"çœŸå® DOM æ£€æŸ¥ HTML å¹¶æ„å»º DOM æ ‘ æ£€æŸ¥ CSS æ„å»º Style Rules ç»“åˆ DOM &amp; Style Rulesï¼Œæ„å»º Render æ ‘ æ¯ä¸ª DOM èŠ‚ç‚¹éƒ½æœ‰ attach æ–¹æ³•ï¼Œæ¥æ”¶æ ·å¼ä¿¡æ¯ï¼Œè¿”å›ä¸€ä¸ª render å¯¹è±¡ render å¯¹è±¡æ„æˆ render æ ‘ æ ¹æ® render æ ‘ç¡®å®šèŠ‚ç‚¹åæ ‡ï¼Œè°ƒç”¨æ¯ä¸ªèŠ‚ç‚¹çš„ paint æ–¹æ³•ï¼Œç»˜åˆ¶é¡µé¢ æ³¨æ„ç‚¹ DOM æ ‘æ¸è¿›æ„å»ºï¼Œä¸å¿…ç­‰æ•´ä¸ª HTML è§£æå®Œ Render æ ‘ã€DOM æ ‘ã€CSSOM æ ‘æ„å»ºå¹¶ä¸å®Œå…¨ç‹¬ç«‹ï¼Œå¯èƒ½ä¼šäº¤å‰ CSS ä»å³å¾€å·¦è§£æï¼ŒåµŒå¥—æ ‡ç­¾è¶Šå¤šï¼Œè§£æè¶Šæ…¢ æœ€å³å¯ä»¥å¿«é€Ÿåˆ¤æ–­å½“å‰å…ƒç´ æ˜¯å¦åŒ¹é…ï¼Œå‘ä¸ŠéªŒè¯ ä»å·¦å¼€å§‹ç±»ä¼¼æ·±æœï¼Œéœ€è¦å›æº¯å¤šæ¬¡ åŸç”Ÿ JS æ“ä½œ DOM æ—¶ï¼Œæµè§ˆå™¨ä¼šä»æ„å»º DOM æ ‘å¼€å§‹ä»å¤´åˆ°å°¾æ‰§è¡Œä¸€éæµç¨‹ï¼Œå¦‚æœéœ€è¦æ›´æ–° 10 ä¸ªèŠ‚ç‚¹ï¼Œå°±ä¼šæ“ä½œ 10 æ¬¡ã€‚ è™šæ‹Ÿ DOM å¦‚æœéœ€è¦æ›´æ–° 10 ä¸ªèŠ‚ç‚¹ï¼Œè™šæ‹Ÿ DOM ä¸ä¼šç«‹å³æ“ä½œ DOMï¼Œè€Œæ˜¯å°† 10 æ¬¡æ›´æ–°çš„å†…å®¹ä¿å­˜åˆ°æœ¬åœ° js å¯¹è±¡ä¸­ï¼Œå†ä¸€æ¬¡æ€§ attch åˆ° DOM æ ‘ä¸Šï¼Œé¿å…æ— ç”¨çš„ DOM æ“ä½œã€‚ ç®—æ³•æ­¥éª¤ ç”¨ JavaScript å¯¹è±¡ç»“æ„è¡¨ç¤º DOM æ ‘çš„ç»“æ„ï¼Œç„¶åç”¨å¯¹è±¡æ„é€ ä¸€ä¸ªçœŸæ­£çš„ DOM æ ‘ï¼Œæ’åˆ°æ–‡æ¡£ä¸­ å½“çŠ¶æ€å˜æ›´æ—¶ï¼Œé‡æ–°æ„é€ ä¸€æ£µå¯¹è±¡æ ‘ï¼Œç„¶åç”¨æ–°çš„æ ‘å’Œæ—§çš„æ ‘æ¯”è¾ƒï¼Œè®°å½•å·®å¼‚ æŠŠå·®å¼‚åº”ç”¨åˆ°çœŸçš„ DOM æ ‘ä¸Šï¼Œè§†å›¾å°±æ›´æ–°äº† è™šæ‹Ÿ DOM æœ¬è´¨ä¸Šå°±æ˜¯åœ¨ JS å’Œ DOM ä¹‹é—´åšäº†ä¸€ä¸ªç¼“å­˜ ç®—æ³•å®ç°ä¸€ã€ç”¨ JS å¯¹è±¡æ¨¡æ‹Ÿ DOM æ ‘æ„å»º JS èŠ‚ç‚¹1234567891011121314151617181920212223function Element (tagName, props, children) &#123; this.tagName = tagName this.props = props this.children = children&#125;module.exports = function (tagName, props, children) &#123; return new Element(tagName, props, children)&#125;// ç”¨ä¾‹var el = require('./element')var ul = el('ul', &#123;id: 'list'&#125;, [ el('li', &#123;class: 'item'&#125;, ['Item 1']), el('li', &#123;class: 'item'&#125;, ['Item 2']), el('li', &#123;class: 'item'&#125;, ['Item 3']),])// &lt;ul id='list'&gt;// &lt;li class='item'&gt;Item 1&lt;/li&gt;// &lt;li class='item'&gt;Item 2&lt;/li&gt;// &lt;li class='item'&gt;Item 3&lt;/li&gt;// &lt;/ul&gt; æ„å»º DOM èŠ‚ç‚¹1234567891011121314151617181920Element.prototype.render = function () &#123; var el = document.createElement(this.tagName) var props = this.props for (var propName in props) &#123; var propValue = props[propName] el.setAttribute(propName, propValue) &#125; var children = this.children || [] children.forEach(function(child) &#123; var childEl = (child instanceof Element) ? child.render() // å¦‚æœå­èŠ‚ç‚¹ä¹Ÿæ˜¯è™šæ‹ŸDOMï¼Œé€’å½’æ„å»ºDOMèŠ‚ç‚¹ : document.createTextNode(child) // å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œæ„å»ºæ–‡æœ¬èŠ‚ç‚¹ el.appendChild(childEl) &#125;) return el&#125; äºŒã€æ¯”è¾ƒä¸¤æ£µæ ‘çš„å·®å¼‚ï¼ˆdiffï¼‰ é€šç”¨ç®—æ³•ï¼Œæ ‘çš„æœ€å°ç¼–è¾‘è·ç¦»ï¼ŒO(n^3) åŒå±‚æ¯”è¾ƒï¼Œé™ä½æ—¶é—´å¤æ‚åº¦ï¼ŒO(n) æ·±æœï¼Œè®°å½•å·®å¼‚ æ¯éå†åˆ°ä¸€ä¸ªèŠ‚ç‚¹å°±æŠŠè¯¥èŠ‚ç‚¹å’Œæ–°çš„çš„æ ‘è¿›è¡Œå¯¹æ¯” 12345678910111213141516171819202122232425function diff (oldTree, newTree) &#123; var index = 0 // å½“å‰èŠ‚ç‚¹æ ‡å¿—ï¼ŒæŒ‰æ·±æœé¡ºåºä» 9 å¼€å§‹ var patches = &#123;&#125; // ç”¨æ¥è®°å½•æ¯ä¸ªèŠ‚ç‚¹å·®å¼‚çš„å¯¹è±¡ dfsWalk(oldTree, newTree, index, patches) return patches&#125;function dfsWalk (oldNode, newNode, index, patches) &#123; // å¯¹æ¯” oldNode å’Œ newNode çš„ä¸åŒï¼Œè®°å½•ä¸‹æ¥ patches[index] = [&#123;difference&#125;, &#123;difference&#125;, ...] diffChildren(oldNode.children, newNode.children, index, patches)&#125;function diffChildren (oldChildren, newChildren, index, patches) &#123; var leftNode = null var currentNodeIndex = index oldChildren.forEach(function (child, i) &#123; var newChild = newChildren[i] currentNodeIndex = (leftNode &amp;&amp; leftNode.count) // è®¡ç®—èŠ‚ç‚¹æ ‡è¯† ? currentNodeIndex + leftNode.count + 1 : currentNodeIndex + 1 dfsWalk(child, newChild, currentNodeIndex, patches) leftNode = child &#125;)&#125; å·®å¼‚ç±»å‹ æ›¿æ¢æˆæ–°èŠ‚ç‚¹ REPLACE = 0 ç§»åŠ¨åˆ é™¤æ–°å¢ REORDER = 1 ä¿®æ”¹éƒ¨åˆ†å±æ€§ PROPS = 2 ä¿®æ”¹æ–‡æœ¬å†…å®¹ TEXT = 3 1234567891011121314patches[0] = [&#123; type: REPLACE, node: newNode // el('div', props, children)&#125;, &#123; type: PROPS, props: &#123; id: \"container\" &#125;&#125;]patches[2] = [&#123; type: TEXT, content: \"Virtual DOM2\"&#125;] åˆ—è¡¨å¯¹æ¯”ç®—æ³• æœ€å°ç¼–è¾‘è·ç¦»ï¼Œé’ˆå¯¹ REORDERï¼ŒåŒå±‚å…ƒç´ å¯¹æ¯”é¡ºåºï¼Œè§£å†³å¦‚ä½•ç§»åŠ¨æœ€ä½³ éœ€è¦ç”¨åˆ°å”¯ä¸€æ ‡è¯† key 1234patches[0] = [&#123; type: REORDER, moves: [&#123;remove or insert&#125;, &#123;remove or insert&#125;, ...]&#125;] ä¸‰ã€æŠŠå·®å¼‚åº”ç”¨åˆ°çœŸçš„ DOM æ ‘ä¸Š123456789101112131415161718192021function patch (node, patches) &#123; var walker = &#123;index: 0&#125; dfsWalk(node, walker, patches)&#125;function dfsWalk (node, walker, patches) &#123; var currentPatches = patchea[walker.index] var len = node.childNodes ? node.childNodes.length : 0 for (var i = 0; i &lt; len; i++) &#123; var child = node.childNodes[i] walker.index++ dfsWalk(child, walker, patches) &#125; if (currentPatches) &#123; applyPatches(onde, currentPatches) // å¯¹å½“å‰èŠ‚ç‚¹è¿›è¡Œ DOM æ“ä½œ &#125;&#125; 1234567891011121314151617181920function applyPatches (node, currentPatches) &#123; currentPatches.forEach(function (currentPatch) &#123; switch (currentPatch.type) &#123; case REPLACE: node.parentNode.replaceChild(currentPatch.node.render(), node) break case REORDER: reorderChildren(node, currentPatch.moves) break case PROPS: setProps(node, currentPatch.props) break case TEXT: node.textContent = currentPatch.content break default: throw new Error('Unknown patch type ' + currentPatch.type) &#125; &#125;)&#125; æ€»ç»“1234567891011121314151617181920212223// 1. æ„å»ºè™šæ‹ŸDOMvar tree = el('div', &#123;'id': 'container'&#125;, [ el('h1', &#123;style: 'color: blue'&#125;, ['simple virtal dom']), el('p', ['Hello, virtual-dom']), el('ul', [el('li')])])// 2. é€šè¿‡è™šæ‹ŸDOMæ„å»ºçœŸæ­£çš„DOMvar root = tree.render()document.body.appendChild(root)// 3. ç”Ÿæˆæ–°çš„è™šæ‹ŸDOMvar newTree = el('div', &#123;'id': 'container'&#125;, [ el('h1', &#123;style: 'color: red'&#125;, ['simple virtal dom']), el('p', ['Hello, virtual-dom']), el('ul', [el('li'), el('li')])])// 4. æ¯”è¾ƒä¸¤æ£µè™šæ‹ŸDOMæ ‘çš„ä¸åŒvar patches = diff(tree, newTree)// 5. åœ¨çœŸæ­£çš„DOMå…ƒç´ ä¸Šåº”ç”¨å˜æ›´patch(root, patches) references æ·±åº¦å‰–æï¼šå¦‚ä½•å®ç°ä¸€ä¸ª Virtual DOM ç®—æ³• æ·±å…¥å‰–æï¼šVueæ ¸å¿ƒä¹‹è™šæ‹ŸDOM","categories":[],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://ziiyan.github.io/tags/Vue/"},{"name":"React","slug":"React","permalink":"http://ziiyan.github.io/tags/React/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://ziiyan.github.io/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"å­¦ä¹ ç¬”è®°ï¼šReact","slug":"å­¦ä¹ ç¬”è®°ï¼šReact","date":"2020-08-07T02:46:01.000Z","updated":"2020-08-11T08:15:03.941Z","comments":true,"path":"2020/08/07/å­¦ä¹ ç¬”è®°ï¼šReact/","link":"","permalink":"http://ziiyan.github.io/2020/08/07/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%9AReact/","excerpt":"","text":"æ ¸å¿ƒæ¦‚å¿µJSX ç®€ä»‹ JSX æ˜¯ä¸€ä¸ª JavaScript çš„è¯­æ³•æ‰©å±• JSX å¯ä»¥ç”Ÿæˆ React å…ƒç´  1const element = &lt;h1&gt;Hello, world!&lt;/h1&gt;; ä¸ºä»€ä¹ˆä½¿ç”¨ JSXï¼Ÿ React è®¤ä¸ºæ¸²æŸ“é€»è¾‘æœ¬è´¨ä¸Šä¸å…¶ä»– UI é€»è¾‘å†…åœ¨è€¦åˆ React å¹¶æ²¡æœ‰é‡‡ç”¨å°†æ ‡è®°ä¸é€»è¾‘è¿›è¡Œåˆ†ç¦»åˆ°ä¸åŒæ–‡ä»¶è¿™ç§äººä¸ºåœ°åˆ†ç¦»æ–¹å¼ï¼Œè€Œæ˜¯é€šè¿‡å°†äºŒè€…å…±åŒå­˜æ”¾åœ¨ç§°ä¹‹ä¸ºâ€œç»„ä»¶â€çš„æ¾æ•£è€¦åˆå•å…ƒä¹‹ä¸­ï¼Œæ¥å®ç°å…³æ³¨ç‚¹åˆ†ç¦»ã€‚ å…³æ³¨ç‚¹åˆ†ç¦»åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œæ˜¯å°†è®¡ç®—æœºç¨‹åºåˆ†éš”ä¸ºä¸åŒéƒ¨åˆ†çš„è®¾è®¡åŸåˆ™ï¼Œæ˜¯é¢å‘å¯¹è±¡çš„ç¨‹åºè®¾è®¡çš„æ ¸å¿ƒæ¦‚å¿µã€‚ å…ƒç´ æ¸²æŸ“ å…ƒç´ æ˜¯æ„æˆ React åº”ç”¨çš„æœ€å°ç –å— ä¸æµè§ˆå™¨çš„ DOM å…ƒç´ ä¸åŒï¼ŒReact å…ƒç´ æ˜¯åˆ›å»ºå¼€é”€æå°çš„æ™®é€šå¯¹è±¡ã€‚React DOM ä¼šè´Ÿè´£æ›´æ–° DOM æ¥ä¸ React å…ƒç´ ä¿æŒä¸€è‡´ã€‚ å°†ä¸€ä¸ªå…ƒç´ æ¸²æŸ“ä¸º DOM æƒ³è¦å°†ä¸€ä¸ª React å…ƒç´ æ¸²æŸ“åˆ°æ ¹ DOM èŠ‚ç‚¹ä¸­ï¼Œåªéœ€æŠŠå®ƒä»¬ä¸€èµ·ä¼ å…¥ React DOM.render() 12const element = &lt;h1&gt;Hello, world&lt;/h1&gt;;ReactDOM.render(element, document.getElementById('root')); æ›´æ–°å·²æ¸²æŸ“çš„å…ƒç´  React å…ƒç´ æ˜¯ä¸å¯å˜å¯¹è±¡ã€‚ä¸€ä¸ªå…ƒç´ å°±åƒç”µå½±çš„å•å¸§ï¼Œä»£è¡¨äº†æŸä¸ªç‰¹å®šæ—¶åˆ»çš„ UI æ›´æ–° UI å”¯ä¸€çš„æ–¹å¼æ˜¯åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å…ƒç´ ï¼Œå¹¶å°†å…¶ä¼ å…¥ React DOM.render() React åªæ›´æ–°å®ƒéœ€è¦æ›´æ–°çš„éƒ¨åˆ† React DOM ä¼šå°†å…ƒç´ å’Œå®ƒçš„å­å…ƒç´ ä¸å®ƒä»¬ä¹‹å‰çš„çŠ¶æ€è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶åªä¼šè¿›è¡Œå¿…è¦çš„æ›´æ–°æ¥ä½¿ DOM è¾¾åˆ°é¢„æœŸçš„çŠ¶æ€ã€‚ ç»„ä»¶ &amp; Props ç»„ä»¶å…è®¸ä½ å°† UI æ‹†åˆ†ä¸ºç‹¬ç«‹å¯å¤ç”¨çš„ä»£ç ç‰‡æ®µï¼Œå¹¶å¯¹æ¯ä¸ªç‰‡æ®µè¿›è¡Œç‹¬ç«‹æ„æ€ ç»„ä»¶ï¼Œä»æ¦‚å¿µä¸Šç±»ä¼¼äº JavaScript å‡½æ•°ã€‚æ¥å—ä»»æ„çš„å…¥å‚ï¼ˆå³ â€œpropsâ€ï¼‰ï¼Œå¹¶è¿”å›ç”¨äºæè¿°é¡µé¢å±•ç¤ºå†…å®¹çš„ React å…ƒç´  æ¸²æŸ“ç»„ä»¶ å½“ React å…ƒç´ ä¸ºç”¨æˆ·è‡ªå®šä¹‰ç»„ä»¶æ—¶ï¼Œå®ƒä¼šå°† JSX æ‰€æ¥æ”¶çš„å±æ€§ï¼ˆattributesï¼‰ä»¥åŠå­ç»„ä»¶ï¼ˆchildrenï¼‰è½¬æ¢ä¸ºå•ä¸ªå¯¹è±¡ä¼ é€’ç»™ç»„ä»¶ï¼Œè¿™ä¸ªå¯¹è±¡è¢«ç§°ä¹‹ä¸º â€œpropsâ€ã€‚ æ³¨æ„ï¼š ç»„ä»¶åç§°å¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´ã€‚ props æ˜¯åªè¯»çš„ State &amp; ç”Ÿå‘½å‘¨æœŸæ­£ç¡®åœ°ä½¿ç”¨ State ä¸è¦ç›´æ¥ä¿®æ”¹ Stateï¼Œç”¨ setState({ key: value }) State çš„æ›´æ–°å¯èƒ½æ˜¯å¼‚æ­¥çš„ å‡ºäºæ€§èƒ½è€ƒè™‘ï¼ŒReact å¯èƒ½ä¼šæŠŠå¤šä¸ª setState() è°ƒç”¨åˆå¹¶æˆä¸€ä¸ªè°ƒç”¨ å› ä¸º this.props å’Œ this.state å¯èƒ½ä¼šå¼‚æ­¥æ›´æ–°ï¼Œæ‰€ä»¥ä½ ä¸è¦ä¾èµ–ä»–ä»¬çš„å€¼æ¥æ›´æ–°ä¸‹ä¸€ä¸ªçŠ¶æ€ è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥è®© setState() æ¥æ”¶ä¸€ä¸ªå‡½æ•°è€Œä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ è°ƒç”¨ setState() çš„æ—¶å€™ï¼ŒReact ä¼šæŠŠå¯¹è±¡åˆå¹¶åˆ°å½“å‰çš„ stateï¼Œå› æ­¤åªéœ€è°ƒç”¨éœ€è¦æ›´æ”¹çš„éƒ¨åˆ† ä¸è¦å°† props çš„å€¼å¤åˆ¶ç»™ stateï¼Œprops æ›´æ–°ä¸ä¼šå½±å“ stateï¼Œåªæœ‰åœ¨åˆ»æ„å¿½ç•¥ prop æ›´æ–°çš„æƒ…å†µä¸‹ä½¿ç”¨ æ•°æ®æ˜¯è‡ªä¸Šè€Œä¸‹çš„å•å‘æ•°æ®æµç”Ÿå‘½å‘¨æœŸç”Ÿå‘½å‘¨æœŸæ–¹æ³• componentDidMountï¼šç»„ä»¶å·²ç»è¢«æ¸²æŸ“åˆ° DOM ä¸­åè¿è¡Œ componentWillUnmountï¼šç»„ä»¶ä» DOM ä¸­è¢«ç§»é™¤æ—¶è¿è¡Œ äº‹ä»¶å¤„ç† äº‹ä»¶å‘½åé‡‡ç”¨å°é©¼å³°ï¼Œä¼ å…¥å‡½æ•°ä½œä¸ºäº‹ä»¶å¤„ç†å‡½æ•° 1234&lt;!-- html --&gt;&lt;button onclick=\"activateLasers()\"&gt; Activate Lasers&lt;/button&gt; 1234// jsx&lt;button onClick=&#123;activateLasers&#125;&gt; Activate Lasers&lt;/button&gt; ä¸èƒ½é€šè¿‡ return false é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œå¿…é¡»æ˜¾ç¤ºä½¿ç”¨ preventDefault 1234&lt;!-- html --&gt;&lt;a href=\"#\" onclick=\"console.log('The link was clicked.'); return false\"&gt; Click me&lt;/a&gt; 12345678910111213// jsxfunction ActionLink() &#123; function handleClick(e) &#123; e.preventDefault(); console.log('The link was clicked.'); &#125; return ( &lt;a href=\"#\" onClick=&#123;handleClick&#125;&gt; Click me &lt;/a&gt; );&#125; e æ˜¯ä¸€ä¸ªåˆæˆäº‹ä»¶ï¼Œæ ¹æ® W3C è§„èŒƒå®šä¹‰ eï¼Œä¸å¿…æ‹…å¿ƒè·¨æµè§ˆå™¨çš„å…¼å®¹é—®é¢˜ é€šå¸¸çš„åšæ³•æ˜¯å°†äº‹ä»¶å¤„ç†å‡½æ•°å£°æ˜ä¸º class ä¸­çš„æ–¹æ³• 12345678910111213141516171819202122232425262728class Toggle extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123;isToggleOn: true&#125;; // ä¸ºäº†åœ¨å›è°ƒä¸­ä½¿ç”¨ `this`ï¼Œè¿™ä¸ªç»‘å®šæ˜¯å¿…ä¸å¯å°‘çš„ this.handleClick = this.handleClick.bind(this); &#125; handleClick() &#123; this.setState(state =&gt; (&#123; isToggleOn: !state.isToggleOn &#125;)); &#125; render() &#123; return ( &lt;button onClick=&#123;this.handleClick&#125;&gt; &#123;this.state.isToggleOn ? 'ON' : 'OFF'&#125; &lt;/button&gt; ); &#125;&#125;ReactDOM.render( &lt;Toggle /&gt;, document.getElementById('root')); åœ¨ JavaScript ä¸­ï¼Œclass çš„æ–¹æ³•é»˜è®¤ä¸ä¼šç»‘å®š thisã€‚å¦‚æœä½ å¿˜è®°ç»‘å®š this.handleClick å¹¶æŠŠå®ƒä¼ å…¥äº† onClickï¼Œå½“ä½ è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ this çš„å€¼ä¸º undefinedã€‚ å¦‚æœè§‰å¾—ä½¿ç”¨ bind å¾ˆéº»çƒ¦ï¼Œè¿™é‡Œæœ‰ä¸¤ç§æ–¹å¼å¯ä»¥è§£å†³ å®éªŒæ€§çš„ public class fields è¯­æ³• å›è°ƒä¸­ä½¿ç”¨ç®­å¤´å‡½æ•° æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šåˆ›å»ºä¸åŒçš„å›è°ƒå‡½æ•°ï¼Œå¦‚æœä¼ å…¥å­ç»„ä»¶ä¼šè¿›è¡Œé¢å¤–çš„é‡æ–°æ¸²æŸ“ å»ºè®®ä¸è¦ä½¿ç”¨è¿™ç§æ–¹å¼ å‘äº‹ä»¶å¤„ç†ç¨‹åºä¼ é€’å‚æ•° 12&lt;button onClick=&#123;(e) =&gt; this.deleteRow(id, e)&#125;&gt;Delete Row&lt;/button&gt;&lt;button onClick=&#123;this.deleteRow.bind(this, id)&#125;&gt;Delete Row&lt;/button&gt; æ¡ä»¶æ¸²æŸ“ ä¾æ®åº”ç”¨çš„ä¸åŒçŠ¶æ€ï¼Œåªæ¸²æŸ“å¯¹åº”çŠ¶æ€ä¸‹çš„éƒ¨åˆ†å†…å®¹ ä½¿ç”¨å˜é‡æ¥å‚¨å­˜å…ƒç´ ï¼Œç§°ä¸ºå…ƒç´ å˜é‡ é€šè¿‡èŠ±æ‹¬å·åŒ…è£¹ä»£ç å¯ä»¥åµŒå…¥è¡¨è¾¾å¼ &amp;&amp; ä¸‰ç›®è¿ç®—ç¬¦ return null ä¸è¿›è¡Œæ¸²æŸ“ï¼Œä¸å½±å“ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ åˆ—è¡¨ &amp; Key key å¸®åŠ© React è¯†åˆ«å“ªäº›å…ƒç´ æ”¹å˜äº†ï¼Œåº”å½“ç»™æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ èµ‹äºˆä¸€ä¸ªç¡®å®šçš„æ ‡è¯† ä¸€ä¸ªå…ƒç´ çš„ key æœ€å¥½æ˜¯è¿™ä¸ªå…ƒç´ åœ¨åˆ—è¡¨ä¸­æ‹¥æœ‰çš„ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å­—ç¬¦ä¸² ä¸€ä¸ªå¥½çš„ç»éªŒæ³•åˆ™æ˜¯ï¼šåœ¨ map() æ–¹æ³•ä¸­çš„å…ƒç´ éœ€è¦è®¾ç½® key å±æ€§ æ•°ç»„å…ƒç´ ä¸­ä½¿ç”¨çš„ key åœ¨å…¶å…„å¼ŸèŠ‚ç‚¹ä¹‹é—´åº”è¯¥æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œä¸éœ€è¦å…¨å±€å”¯ä¸€ key ä¼šä¼ é€’ä¿¡æ¯ç»™ React ï¼Œä½†ä¸ä¼šä¼ é€’ç»™ç»„ä»¶ è¡¨å•å—æ§ç»„ä»¶ state æˆä¸ºâ€œå”¯ä¸€æ•°æ®æºâ€ï¼Œç»„ä»¶æ§åˆ¶è¡¨å•æ“ä½œ å¯¹äºå—æ§ç»„ä»¶æ¥è¯´ï¼Œè¾“å…¥çš„å€¼å§‹ç»ˆç”± React çš„ state é©±åŠ¨ å½“éœ€è¦å¤„ç†å¤šä¸ª input å…ƒç´ æ—¶ï¼Œå¯ä»¥ç»™æ¯ä¸ªå…ƒç´ æ·»åŠ  name å±æ€§ï¼Œå¹¶è®©å¤„ç†å‡½æ•°æ ¹æ® event.target.name çš„å€¼é€‰æ‹©è¦æ‰§è¡Œçš„æ“ä½œ å—æ§ç»„ä»¶ç»„ç»‡ç”¨æˆ·æ›´æ”¹è¾“å…¥ï¼Œå¦‚æœæŒ‡å®š value ä»å¯ä»¥ç¼–è¾‘ï¼Œå¯èƒ½ value ä¸º undefined æˆ– null çŠ¶æ€æå‡ å¤šä¸ªç»„ä»¶éœ€è¦åæ˜ ç›¸åŒçš„å˜åŒ–æ•°æ®ï¼Œå»ºè®®å°†å…±äº«çŠ¶æ€æå‡åˆ°æœ€è¿‘çš„å…±åŒçˆ¶ç»„ä»¶ä¸­ ä»»ä½•å¯å˜æ•°æ®åº”å½“åªæœ‰ä¸€ä¸ªç›¸å¯¹åº”çš„å”¯ä¸€â€œæ•°æ®æº state éƒ½æ˜¯é¦–å…ˆæ·»åŠ åˆ°éœ€è¦æ¸²æŸ“æ•°æ®çš„ç»„ä»¶ä¸­å»ã€‚ç„¶åï¼Œå¦‚æœå…¶ä»–ç»„ä»¶ä¹Ÿéœ€è¦è¿™ä¸ª stateï¼Œé‚£ä¹ˆä½ å¯ä»¥å°†å®ƒæå‡è‡³è¿™äº›ç»„ä»¶çš„æœ€è¿‘å…±åŒçˆ¶ç»„ä»¶ä¸­ åº”å½“ä¾é è‡ªä¸Šè€Œä¸‹çš„æ•°æ®æµï¼Œè€Œä¸æ˜¯å°è¯•åœ¨ä¸åŒç»„ä»¶é—´åŒæ­¥ state ç»„åˆ vs ç»§æ‰¿ æ¨èä½¿ç”¨ç»„åˆå®ç°ä»£ç é‡ç”¨ åŒ…å«å…³ç³» é€šè¿‡ props.children å°†è·å–æ‰€æœ‰å­æ ‡ç­¾ ç‰¹ä¾‹å…³ç³» â€œç‰¹æ®Šâ€ç»„ä»¶å¯ä»¥é€šè¿‡ props å®šåˆ¶å¹¶æ¸²æŸ“â€œä¸€èˆ¬â€ç»„ä»¶ ä¸å»ºè®®ç”¨ç»§æ‰¿ã€‚ ç»„ä»¶å¯ä»¥æ¥å—ä»»æ„ propsï¼ŒåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»å‹ï¼ŒReact å…ƒç´ ä»¥åŠå‡½æ•°ã€‚ å¦‚æœä½ æƒ³è¦åœ¨ç»„ä»¶é—´å¤ç”¨é UI çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å»ºè®®å°†å…¶æå–ä¸ºä¸€ä¸ªå•ç‹¬çš„ JavaScript æ¨¡å—ï¼Œå¦‚å‡½æ•°ã€å¯¹è±¡æˆ–è€…ç±»ã€‚ç»„ä»¶å¯ä»¥ç›´æ¥å¼•å…¥ï¼ˆimportï¼‰è€Œæ— éœ€é€šè¿‡ extend ç»§æ‰¿å®ƒä»¬ã€‚ React å“²å­¦ å°† UI åˆ’åˆ†ä¸ºç»„ä»¶å±‚çº§ å•ä¸€åŠŸèƒ½åŸåˆ™ åˆ›å»ºä¸€ä¸ªä¸å«äº¤äº’åŠŸèƒ½çš„é™æ€ç‰ˆæœ¬ å°†æ¸²æŸ“ UI å’Œæ·»åŠ äº¤äº’è¿™ä¸¤ä¸ªè¿‡ç¨‹åˆ†å¼€ è¯¥é˜¶æ®µä¸åº”è¯¥ä½¿ç”¨ state è‡ªä¸Šè€Œä¸‹ï¼šé€‚åˆæ¯”è¾ƒç®€å•çš„é¡¹ç›® è‡ªä¸‹è€Œä¸Šï¼šé€‚åˆå¤§å‹çš„é¡¹ç›®ï¼Œå¹¶åŒæ—¶ä¸ºä½å±‚ç»„ä»¶ç¼–å†™æµ‹è¯• ç¡®å®š UI state çš„æœ€å°è¡¨ç¤º DRY ( Donâ€™t Repeat Yourself ) åªä¿ç•™åº”ç”¨æ‰€éœ€çš„å¯å˜ state çš„æœ€å°é›†åˆï¼Œå…¶ä»–æ•°æ®å‡ç”±å®ƒä»¬è®¡ç®—äº§ç”Ÿ å¦‚ï¼šåªéœ€è¦ä¿å­˜æ•°ç»„ï¼Œæ— éœ€ä¿å­˜æ•°ç»„é•¿åº¦ï¼Œå› ä¸ºé•¿åº¦å¯ä»¥é€šè¿‡æ•°ç»„çš„ length å±æ€§è·å– check listï¼š è¯¥æ•°æ®æ˜¯å¦æ˜¯ç”±çˆ¶ç»„ä»¶é€šè¿‡ props ä¼ é€’è€Œæ¥çš„ï¼Ÿå¦‚æœæ˜¯ï¼Œé‚£å®ƒåº”è¯¥ä¸æ˜¯ stateã€‚ è¯¥æ•°æ®æ˜¯å¦éšæ—¶é—´çš„æ¨ç§»è€Œä¿æŒä¸å˜ï¼Ÿå¦‚æœæ˜¯ï¼Œé‚£å®ƒåº”è¯¥ä¹Ÿä¸æ˜¯ stateã€‚ ä½ èƒ½å¦æ ¹æ®å…¶ä»– state æˆ– props è®¡ç®—å‡ºè¯¥æ•°æ®çš„å€¼ï¼Ÿå¦‚æœæ˜¯ï¼Œé‚£å®ƒä¹Ÿä¸æ˜¯ stateã€‚ ç¡®å®š state æ”¾ç½®çš„ä½ç½® å¯¹äºåº”ç”¨ä¸­çš„æ¯ä¸€ä¸ª stateï¼š æ‰¾åˆ°æ ¹æ®è¿™ä¸ª state è¿›è¡Œæ¸²æŸ“çš„æ‰€æœ‰ç»„ä»¶ã€‚ æ‰¾åˆ°ä»–ä»¬çš„å…±åŒæ‰€æœ‰è€…ï¼ˆcommon ownerï¼‰ç»„ä»¶ï¼ˆåœ¨ç»„ä»¶å±‚çº§ä¸Šé«˜äºæ‰€æœ‰éœ€è¦è¯¥ state çš„ç»„ä»¶ï¼‰ã€‚ è¯¥å…±åŒæ‰€æœ‰è€…ç»„ä»¶æˆ–è€…æ¯”å®ƒå±‚çº§æ›´é«˜çš„ç»„ä»¶åº”è¯¥æ‹¥æœ‰è¯¥ stateã€‚ å¦‚æœä½ æ‰¾ä¸åˆ°ä¸€ä¸ªåˆé€‚çš„ä½ç½®æ¥å­˜æ”¾è¯¥ stateï¼Œå°±å¯ä»¥ç›´æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ç»„ä»¶æ¥å­˜æ”¾è¯¥ stateï¼Œå¹¶å°†è¿™ä¸€æ–°ç»„ä»¶ç½®äºé«˜äºå…±åŒæ‰€æœ‰è€…ç»„ä»¶å±‚çº§çš„ä½ç½®ã€‚ æ·»åŠ åå‘æ•°æ®æµ å¤„äºè¾ƒä½å±‚çº§çš„ç»„ä»¶æ›´æ–°è¾ƒé«˜å±‚çº§çš„ç»„ä»¶ä¸­çš„ state çˆ¶ç»„ä»¶å°†ä¸€ä¸ªèƒ½å¤Ÿè§¦å‘ state æ”¹å˜çš„å›è°ƒå‡½æ•°ï¼ˆcallbackï¼‰ä¼ é€’ç»™å­ç»„ä»¶ é«˜çº§æŒ‡å¼•æ— éšœç¢ä»£ç åˆ†å‰² ä»£ç åˆ†å‰²èƒ½å¤Ÿâ€œæ‡’åŠ è½½â€å½“å‰ç”¨æˆ·æ‰€éœ€è¦çš„å†…å®¹ï¼Œæ˜¾è‘—åœ°æé«˜åº”ç”¨æ€§èƒ½ æ²¡æœ‰å‡å°‘åº”ç”¨æ•´ä½“çš„ä»£ç ä½“ç§¯ï¼Œå¯ä»¥é¿å…åŠ è½½ç”¨æˆ·æ°¸è¿œä¸éœ€è¦çš„ä»£ç ï¼Œå¹¶åœ¨åˆå§‹åŠ è½½çš„æ—¶å€™å‡å°‘æ‰€éœ€åŠ è½½çš„ä»£ç é‡ åŠ¨æ€ import() è¯­æ³•12import &#123; add &#125; from './math';console.log(add(16, 26)); 123import(\"./math\").then(math =&gt; &#123; console.log(math.add(16, 26));&#125;); å½“ä½¿ç”¨ Babel æ—¶ï¼Œä½ è¦ç¡®ä¿ Babel èƒ½å¤Ÿè§£æåŠ¨æ€ import è¯­æ³•è€Œä¸æ˜¯å°†å…¶è¿›è¡Œè½¬æ¢ã€‚å¯¹äºè¿™ä¸€è¦æ±‚ä½ éœ€è¦ babel-plugin-syntax-dynamic-import æ’ä»¶ã€‚ React.lazy1import OtherComponent from './OtherComponent'; 1const OtherComponent = React.lazy(() =&gt; import('./OtherComponent')); React.lazy æ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°éœ€è¦åŠ¨æ€è°ƒç”¨ import()ã€‚å®ƒå¿…é¡»è¿”å›ä¸€ä¸ª Promiseï¼Œè¯¥ Promise éœ€è¦ resolve ä¸€ä¸ª default export çš„ React ç»„ä»¶ã€‚ ç„¶ååº”åœ¨ Suspense ç»„ä»¶ä¸­æ¸²æŸ“ lazy ç»„ä»¶ï¼Œfallback å±æ€§æ¥å—ä»»ä½•åœ¨ç»„ä»¶åŠ è½½è¿‡ç¨‹ä¸­ä½ æƒ³å±•ç¤ºçš„ React å…ƒç´ ã€‚ä½ å¯ä»¥å°† Suspense ç»„ä»¶ç½®äºæ‡’åŠ è½½ç»„ä»¶ä¹‹ä¸Šçš„ä»»ä½•ä½ç½®ã€‚ä½ ç”šè‡³å¯ä»¥ç”¨ä¸€ä¸ª Suspense ç»„ä»¶åŒ…è£¹å¤šä¸ªæ‡’åŠ è½½ç»„ä»¶ã€‚ 12345678910111213import React, &#123; Suspense &#125; from 'react';const OtherComponent = React.lazy(() =&gt; import('./OtherComponent'));function MyComponent() &#123; return ( &lt;div&gt; &lt;Suspense fallback=&#123;&lt;div&gt;Loading...&lt;/div&gt;&#125;&gt; &lt;OtherComponent /&gt; &lt;/Suspense&gt; &lt;/div&gt; );&#125; å¼‚å¸¸æ•è·è¾¹ç•Œï¼ˆError boundariesï¼‰ å¦‚æœæ¨¡å—åŠ è½½å¤±è´¥ï¼ˆå¦‚ç½‘ç»œé—®é¢˜ï¼‰ï¼Œå®ƒä¼šè§¦å‘ä¸€ä¸ªé”™è¯¯ï¼Œå¯ä»¥é€šè¿‡å¼‚å¸¸æ•è·è¾¹ç•Œï¼ˆError boundariesï¼‰æŠ€æœ¯æ¥å¤„ç†è¿™äº›æƒ…å†µ åŸºäºè·¯ç”±çš„ä»£ç åˆ†å‰²å‘½åå¯¼å‡ºï¼ˆNamed Exportsï¼‰ React.lazy ç›®å‰åªæ”¯æŒé»˜è®¤å¯¼å‡ºï¼ˆdefault exportsï¼‰ã€‚å¦‚æœä½ æƒ³è¢«å¼•å…¥çš„æ¨¡å—ä½¿ç”¨å‘½åå¯¼å‡ºï¼ˆnamed exportsï¼‰ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªä¸­é—´æ¨¡å—ï¼Œæ¥é‡æ–°å¯¼å‡ºä¸ºé»˜è®¤æ¨¡å—ã€‚è¿™èƒ½ä¿è¯ tree shaking ä¸ä¼šå‡ºé”™ï¼Œå¹¶ä¸”ä¸å¿…å¼•å…¥ä¸éœ€è¦çš„ç»„ä»¶ã€‚ Context ç»„ä»¶ä¹‹é—´å…±äº«çš„å€¼ï¼Œå¦‚ ä¸»é¢˜ã€å½“å‰ç”¨æˆ·ã€é¦–é€‰è¯­è¨€ ç­‰å…¨å±€å±æ€§ API React.createContext Context.Provider Class.contextType Context.Consumer Context.displayName é”™è¯¯è¾¹ç•Œï¼ˆError Boundariesï¼‰ é”™è¯¯è¾¹ç•Œæ˜¯ä¸€ç§ React ç»„ä»¶ï¼Œè¿™ç§ç»„ä»¶å¯ä»¥æ•è·å¹¶æ‰“å°å‘ç”Ÿåœ¨å…¶å­ç»„ä»¶æ ‘ä»»ä½•ä½ç½®çš„ JavaScript é”™è¯¯ï¼Œå¹¶ä¸”ï¼Œå®ƒä¼šæ¸²æŸ“å‡ºå¤‡ç”¨ UIï¼Œè€Œä¸æ˜¯æ¸²æŸ“é‚£äº›å´©æºƒäº†çš„å­ç»„ä»¶æ ‘ã€‚ é”™è¯¯è¾¹ç•Œåœ¨æ¸²æŸ“æœŸé—´ã€ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å’Œæ•´ä¸ªç»„ä»¶æ ‘çš„æ„é€ å‡½æ•°ä¸­æ•è·é”™è¯¯ã€‚ é”™è¯¯è¾¹ç•Œçš„å·¥ä½œæ–¹å¼ç±»ä¼¼äº JavaScript çš„ catch {}ï¼Œä¸åŒçš„åœ°æ–¹åœ¨äºé”™è¯¯è¾¹ç•Œåªé’ˆå¯¹ React ç»„ä»¶ã€‚ åªæœ‰ class ç»„ä»¶æ‰å¯ä»¥æˆä¸ºé”™è¯¯è¾¹ç•Œç»„ä»¶ã€‚ å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ åªéœ€è¦å£°æ˜ä¸€æ¬¡é”™è¯¯è¾¹ç•Œç»„ä»¶ï¼Œå¹¶åœ¨æ•´ä¸ªåº”ç”¨ä¸­ä½¿ç”¨å®ƒã€‚ æ³¨æ„é”™è¯¯è¾¹ç•Œä»…å¯ä»¥æ•è·å…¶å­ç»„ä»¶çš„é”™è¯¯ï¼Œå®ƒæ— æ³•æ•è·å…¶è‡ªèº«çš„é”™è¯¯ã€‚ ä»»ä½•æœªè¢«é”™è¯¯è¾¹ç•Œæ•è·çš„é”™è¯¯å°†ä¼šå¯¼è‡´æ•´ä¸ª React ç»„ä»¶æ ‘è¢«å¸è½½ã€‚ å…³äºäº‹ä»¶å¤„ç†å™¨ é”™è¯¯è¾¹ç•Œæ— æ³•æ•è·äº‹ä»¶å¤„ç†å™¨å†…éƒ¨çš„é”™è¯¯ã€‚ å¦‚æœéœ€è¦åœ¨äº‹ä»¶å¤„ç†å™¨å†…éƒ¨æ•è·é”™è¯¯ï¼Œä½¿ç”¨æ™®é€šçš„ JavaScript try / catch è¯­å¥ã€‚ Refs &amp; DOM åœ¨å…¸å‹çš„ React æ•°æ®æµä¸­ï¼Œprops æ˜¯çˆ¶ç»„ä»¶ä¸å­ç»„ä»¶äº¤äº’çš„å”¯ä¸€æ–¹å¼ Refs æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œå…è®¸è®¿é—® DOM èŠ‚ç‚¹æˆ–åœ¨ render æ–¹æ³•ä¸­åˆ›å»ºçš„ React å…ƒç´  åœºæ™¯ ç®¡ç†ç„¦ç‚¹ï¼Œæ–‡æœ¬é€‰æ‹©æˆ–åª’ä½“æ’­æ”¾ è§¦å‘å¼ºåˆ¶åŠ¨ç”» é›†æˆç¬¬ä¸‰æ–¹ DOM åº“ å‹¿è¿‡åº¦ä½¿ç”¨ Refs åˆ›å»ºï¼šæ„é€ å‡½æ•°ä¸­ this.myRef = React.createRef() è®¿é—®ï¼šconst node = this.myRef.current å½“ ref å±æ€§ç”¨äº HTML å…ƒç´ æ—¶ï¼Œæ„é€ å‡½æ•°ä¸­ä½¿ç”¨ React.createRef() åˆ›å»ºçš„ ref æ¥æ”¶åº•å±‚ DOM å…ƒç´ ä½œä¸ºå…¶ current å±æ€§ã€‚ å½“ ref å±æ€§ç”¨äºè‡ªå®šä¹‰ class ç»„ä»¶æ—¶ï¼Œref å¯¹è±¡æ¥æ”¶ç»„ä»¶çš„æŒ‚è½½å®ä¾‹ä½œä¸ºå…¶ current å±æ€§ã€‚ ä¸èƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸Šä½¿ç”¨ ref å±æ€§ï¼Œå› ä¸ºä»–ä»¬æ²¡æœ‰å®ä¾‹ã€‚ Refs è½¬å‘ Ref è½¬å‘æ˜¯ä¸€é¡¹å°† ref è‡ªåŠ¨åœ°é€šè¿‡ç»„ä»¶ä¼ é€’åˆ°å…¶ä¸€å­ç»„ä»¶çš„æŠ€å·§ éå—æ§ç»„ä»¶ å—æ§ç»„ä»¶ï¼Œè¡¨å•æ•°æ®æ˜¯ç”± React ç»„ä»¶æ¥ç®¡ç†çš„ éå—æ§ç»„ä»¶ï¼Œè¡¨å•æ•°æ®å°†äº¤ç”± DOM èŠ‚ç‚¹æ¥å¤„ç† å¯ä»¥ ä½¿ç”¨ ref æ¥ä» DOM èŠ‚ç‚¹ä¸­è·å–è¡¨å•æ•°æ® é»˜è®¤å€¼ åœ¨ React æ¸²æŸ“ç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œè¡¨å•å…ƒç´ ä¸Šçš„ value å°†ä¼šè¦†ç›– DOM èŠ‚ç‚¹ä¸­çš„å€¼ï¼Œåœ¨éå—æ§ç»„ä»¶ä¸­ï¼Œä½ ç»å¸¸å¸Œæœ› React èƒ½èµ‹äºˆç»„ä»¶ä¸€ä¸ªåˆå§‹å€¼ï¼Œä½†æ˜¯ä¸å»æ§åˆ¶åç»­çš„æ›´æ–°ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹, ä½ å¯ä»¥æŒ‡å®šä¸€ä¸ª defaultValue å±æ€§ï¼Œè€Œä¸æ˜¯ valueã€‚ åœ¨ React ä¸­ï¼Œ&lt;input type=&quot;file&quot; /&gt; å§‹ç»ˆæ˜¯ä¸€ä¸ªéå—æ§ç»„ä»¶ï¼Œå› ä¸ºå®ƒçš„å€¼åªèƒ½ç”±ç”¨æˆ·è®¾ç½®ï¼Œè€Œä¸èƒ½é€šè¿‡ä»£ç æ§åˆ¶ã€‚ Fragments Fragments å°†å­åˆ—è¡¨åˆ†ç»„ï¼Œæ— éœ€å‘ DOM æ·»åŠ é¢å¤–èŠ‚ç‚¹ 12345678910class Columns extends React.Component &#123; render() &#123; return ( &lt;React.Fragment key=&#123;...&#125;&gt; &lt;td&gt;Hello&lt;/td&gt; &lt;td&gt;World&lt;/td&gt; &lt;/React.Fragment&gt; ); &#125;&#125; çŸ­è¯­æ³•ï¼ˆä¸æ”¯æŒ keyï¼‰12345678910class Columns extends React.Component &#123; render() &#123; return ( &lt;&gt; &lt;td&gt;Hello&lt;/td&gt; &lt;td&gt;World&lt;/td&gt; &lt;/&gt; ); &#125;&#125; é«˜é˜¶ç»„ä»¶ï¼ˆHigher-Order Componentsï¼‰ ç”¨äºå¤ç”¨ç»„ä»¶é€»è¾‘çš„ä¸€ç§é«˜çº§æŠ€å·§ï¼ŒåŸºäº React çš„ç»„åˆç‰¹æ€§è€Œå½¢æˆçš„è®¾è®¡æ¨¡å¼ ç»„ä»¶æ˜¯å°† props è½¬æ¢ä¸º UIï¼Œè€Œé«˜é˜¶ç»„ä»¶æ˜¯å°†ç»„ä»¶è½¬æ¢ä¸ºå¦ä¸€ä¸ªç»„ä»¶ é«˜é˜¶ç»„ä»¶æ˜¯å‚æ•°ä¸ºç»„ä»¶ï¼Œè¿”å›å€¼ä¸ºæ–°ç»„ä»¶çš„å‡½æ•° Render Props render prop æ˜¯ä¸€ä¸ªç”¨äºå‘ŠçŸ¥ç»„ä»¶éœ€è¦æ¸²æŸ“ä»€ä¹ˆå†…å®¹çš„å‡½æ•° prop å¯ä»¥ä½¿ç”¨å¸¦æœ‰ render prop çš„å¸¸è§„ç»„ä»¶æ¥å®ç°å¤§å¤šæ•°é«˜é˜¶ç»„ä»¶ ä¸ç¬¬ä¸‰æ–¹åº“ååŒ React ä¸ä¼šç†ä¼š React è‡ªèº«ä¹‹å¤–çš„ DOM æ“ä½œ å®ƒæ ¹æ®å†…éƒ¨è™šæ‹Ÿ DOM æ¥å†³å®šæ˜¯å¦éœ€è¦æ›´æ–°ï¼Œè€Œä¸”å¦‚æœåŒä¸€ä¸ª DOM èŠ‚ç‚¹è¢«å¦ä¸€ä¸ªåº“æ“ä½œäº†ï¼ŒReact ä¼šè§‰å¾—å›°æƒ‘è€Œä¸”æ²¡æœ‰åŠæ³•æ¢å¤ã€‚ æ·±å…¥ JSX å®é™…ä¸Šï¼ŒJSX ä»…ä»…åªæ˜¯ React.createElement(component, props, ...children) å‡½æ•°çš„è¯­æ³•ç³– Profiler å°†å­èŠ‚ç‚¹æ¸²æŸ“åˆ°å­˜åœ¨äºçˆ¶ç»„ä»¶ä»¥å¤–çš„ DOM èŠ‚ç‚¹ ReactDOM.createPortal(child, container) åœºæ™¯å½“çˆ¶ç»„ä»¶æœ‰ overflow: hidden æˆ– z-index ï¼Œä½†éœ€è¦å­ç»„ä»¶èƒ½å¤Ÿåœ¨è§†è§‰ä¸Šâ€œè·³å‡ºâ€å…¶å®¹å™¨ã€‚ å¦‚å¯¹è¯æ¡†ã€æ‚¬æµ®å¡ä»¥åŠæç¤ºæ¡† å…¶ä»–æ–¹é¢ï¼Œå…¶è¡Œä¸ºå’Œæ™®é€šçš„ React å­èŠ‚ç‚¹è¡Œä¸ºä¸€è‡´ å¦‚å†’æ³¡äº‹ä»¶ï¼Œä» portal å†…éƒ¨è§¦å‘çš„äº‹ä»¶ä¼šä¸€ç›´å†’æ³¡è‡³åŒ…å«React æ ‘çš„ç¥–å…ˆï¼Œå³ä¾¿è¿™äº›å…ƒç´ å¹¶ä¸æ˜¯DOM æ ‘ä¸­çš„ç¥–å…ˆ æ€§èƒ½ä¼˜åŒ–Profiler æµ‹é‡æ¸²æŸ“ä¸€ä¸ª React åº”ç”¨å¤šä¹…æ¸²æŸ“ä¸€æ¬¡ä»¥åŠæ¸²æŸ“ä¸€æ¬¡çš„â€œä»£ä»·â€ï¼Œç›®çš„æ˜¯è¯†åˆ«æ¸²æŸ“æ…¢çš„éƒ¨åˆ†ï¼Œä»¥ä¾¿ä¼˜åŒ– é™æ€ç±»å‹æ£€æŸ¥ PropTypes å»ºè®®å¤§å‹ä»£ç åº“ä¸­ä½¿ç”¨ Flow æˆ– TypeScript æ¥ä»£æ›¿ PropTypes ä¸¥æ ¼æ¨¡å¼åè°ƒï¼ˆdiffing ç®—æ³•ï¼‰&amp; key å½“ç»„ä»¶çš„ props æˆ– state å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒReact é€šè¿‡å°†æœ€æ–°è¿”å›çš„å…ƒç´ ä¸åŸå…ˆæ¸²æŸ“çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œæ¥å†³å®šæ˜¯å¦æœ‰å¿…è¦è¿›è¡Œä¸€æ¬¡å®é™…çš„ DOM æ›´æ–°ã€‚å½“å®ƒä»¬ä¸ç›¸ç­‰æ—¶ï¼ŒReact æ‰ä¼šæ›´æ–° DOMã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºâ€œåè°ƒâ€ã€‚ å¯¹æ¯”ä¸åŒç±»å‹çš„å…ƒç´  æ ¹èŠ‚ç‚¹ä¸ºä¸åŒç±»å‹çš„å…ƒç´ æ—¶ï¼ŒReact ä¼šæ‹†å¸åŸæœ‰çš„æ ‘å¹¶å»ºç«‹æ–°çš„æ ‘ å½“æ‹†å¸ä¸€æ£µæ ‘æ—¶ï¼Œå¯¹åº”çš„ DOM èŠ‚ç‚¹ä¹Ÿä¼šè¢«é”€æ¯ï¼Œæ‰§è¡Œ componentWillUnmount å½“å»ºç«‹ä¸€æ£µæ–°çš„æ ‘æ—¶ï¼Œå¯¹åº”çš„ DOM èŠ‚ç‚¹ä¼šè¢«åˆ›å»ºä»¥åŠæ’å…¥åˆ° DOM ä¸­ï¼Œæ‰§è¡Œ componentWillMount åŠ componentDidMount å¯¹æ¯”åŒç±»å‹çš„å…ƒç´  ä¿ç•™ DOM èŠ‚ç‚¹ï¼Œä»…æ¯”å¯¹åŠæ›´æ–°æœ‰æ”¹å˜çš„å±æ€§ å¯¹æ¯”åŒç±»å‹çš„ç»„ä»¶å…ƒç´  å½“ä¸€ä¸ªç»„ä»¶æ›´æ–°æ—¶ï¼Œç»„ä»¶å®ä¾‹ä¿æŒä¸å˜ å¯¹å­èŠ‚ç‚¹è¿›è¡Œé€’å½’ åœ¨é»˜è®¤æ¡ä»¶ä¸‹ï¼Œå½“é€’å½’ DOM èŠ‚ç‚¹çš„å­å…ƒç´ æ—¶ï¼ŒReact ä¼šåŒæ—¶éå†ä¸¤ä¸ªå­å…ƒç´ çš„åˆ—è¡¨ï¼›å½“äº§ç”Ÿå·®å¼‚æ—¶ï¼Œç”Ÿæˆä¸€ä¸ª mutation ç›´æ¥åˆ—è¡¨å°¾éƒ¨æ’å…¥æ²¡é—®é¢˜ï¼Œä½†é¦–éƒ¨æ’å…¥æ—¶ï¼Œæ— æ³•æ„ŸçŸ¥åŸæ¥çš„å…ƒç´ è¢«ç§»åŠ¨äº†ï¼Œéƒ½ä¼šå› åŒ¹é…ä¸æˆåŠŸç”Ÿæˆæ–°å…ƒç´  ç”¨å”¯ä¸€ key æ ‡è¯†å…ƒç´ ï¼Œå› æ­¤å»ºè®®ä¸ç”¨ä¸‹æ ‡åš keyï¼Œå› ä¸ºä¸‹æ ‡ä¹Ÿä¼šå› ä¸ºç§»åŠ¨è€Œæ”¹å˜ï¼Œè€Œæ— æ³•è¾¾åˆ°è¯†åˆ«å…ƒç´ ç§»åŠ¨çš„ç›®çš„ API REFERENCEReactReact.Componentç”Ÿå‘½å‘¨æœŸå›¾è°± æŒ‚è½½ï¼šå½“ç»„ä»¶å®ä¾‹è¢«åˆ›å»ºå¹¶æ’å…¥ DOM ä¸­ constructor() å¦‚æœä¸åˆå§‹åŒ– state æˆ–ä¸è¿›è¡Œæ–¹æ³•ç»‘å®šï¼Œåˆ™ä¸éœ€è¦å®ç° static getDerivedStateFromProps() render() render() åº”è¯¥ä¸ºçº¯å‡½æ•° class ç»„ä»¶ä¸­å”¯ä¸€å¿…é¡»å®ç°çš„æ–¹æ³• componentDidMount() ç»„ä»¶æŒ‚è½½åï¼ˆæ’å…¥ DOM æ ‘ä¸­ï¼‰ç«‹å³è°ƒç”¨ ä¾èµ–äº DOM èŠ‚ç‚¹çš„åˆå§‹åŒ–åº”è¯¥æ”¾åœ¨è¿™é‡Œ æ›´æ–°ï¼šprops æˆ– state å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘æ›´æ–° static getDerivedStateFromProps() shouldComponentUpdate() render() getSnapshotBeforeUpdate() componentDidUpdate() æ›´æ–°åä¼šè¢«ç«‹å³è°ƒç”¨ é¦–æ¬¡æ¸²æŸ“ä¸ä¼šæ‰§è¡Œæ­¤æ–¹æ³• å¸è½½ï¼šç»„ä»¶ä» DOM ä¸­ç§»é™¤ componentWillUnmount() ç»„ä»¶å¸è½½åŠé”€æ¯ä¹‹å‰ç›´æ¥è°ƒç”¨ æ‰§è¡Œå¿…è¦çš„æ¸…ç†æ“ä½œ é”™è¯¯å¤„ç†ï¼šæŠ›å‡ºé”™è¯¯æ—¶ static getDerivedStateFromError() componentDidCatch() HOOKæµ‹è¯• Jest","categories":[],"tags":[{"name":"React","slug":"React","permalink":"http://ziiyan.github.io/tags/React/"}]},{"title":"é¢è¯•å‡†å¤‡ï¼šåŒå‘ç»‘å®šåŸç†","slug":"é¢è¯•å‡†å¤‡ï¼šæ·±å…¥å“åº”å¼åŸç†","date":"2020-08-06T08:58:28.000Z","updated":"2020-08-10T01:30:45.444Z","comments":true,"path":"2020/08/06/é¢è¯•å‡†å¤‡ï¼šæ·±å…¥å“åº”å¼åŸç†/","link":"","permalink":"http://ziiyan.github.io/2020/08/06/%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%EF%BC%9A%E6%B7%B1%E5%85%A5%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86/","excerpt":"","text":"æ·±å…¥å“åº”å¼åŸç† Vue æœ€ç‹¬ç‰¹çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œæ˜¯å…¶éä¾µå…¥æ€§çš„å“åº”å¼ç³»ç»Ÿã€‚ æ•°æ®æ¨¡å‹ä»…ä»…æ˜¯æ™®é€šçš„ JavaScript å¯¹è±¡ã€‚è€Œå½“ä½ ä¿®æ”¹å®ƒä»¬æ—¶ï¼Œè§†å›¾ä¼šè¿›è¡Œæ›´æ–°ï¼Œè¿™ä½¿å¾—çŠ¶æ€ç®¡ç†éå¸¸ç®€å•ç›´æ¥ã€‚ å¦‚ä½•è¿½è¸ªå˜åŒ– å½“ä½ æŠŠä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ä¼ å…¥ Vue å®ä¾‹ä½œä¸º data é€‰é¡¹ï¼ŒVue å°†éå†æ­¤å¯¹è±¡æ‰€æœ‰çš„å±æ€§ï¼Œå¹¶ä½¿ç”¨ Object.defineProperty æŠŠè¿™äº›å±æ€§å…¨éƒ¨è½¬ä¸º getter/setterã€‚ å…ˆæ¥çœ‹çœ‹è¿™ä¸ªObject.definePropertyï¼ŒæŸ¥é˜… MDNï¼š Object.defineProperty() æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œå¹¶è¿”å›æ­¤å¯¹è±¡ã€‚ ç›´æ¥åœ¨ Object æ„é€ å™¨å¯¹è±¡ä¸Šè°ƒç”¨æ­¤æ–¹æ³•ï¼Œè€Œä¸æ˜¯å®ä¾‹ã€‚ 1234567891011121314151617const _xxObj = &#123;&#125;;Object.defineProperty(_xxObj, 'xx_val', &#123; get: function () &#123; console.log('ggg'); &#125;, set: function () &#123; console.log('sss'); &#125;&#125;);// å†™å…¥æ—¶è§¦å‘ set_xxObj.xx_val = 123; // sss// è¯»å–æ—¶è§¦å‘ getconsole.log(_xxObj.xx_val); // ggg// undefine å› ä¸º get() æ²¡æœ‰è¿”å›å€¼ å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯ä¿®æ”¹ object å¯¹è±¡çš„æ–¹æ³•å˜›ï¼Œæ³¨æ„è¿™ä¸æ˜¯å®ä¾‹çš„æ–¹æ³•ï¼Œè€Œæ˜¯æ„é€ å™¨çš„ã€‚ Object.defineProperty æ˜¯ ES5 ä¸­ä¸€ä¸ªæ— æ³• shim çš„ç‰¹æ€§ï¼Œè¿™ä¹Ÿå°±æ˜¯ Vue ä¸æ”¯æŒ IE8 ä»¥åŠæ›´ä½ç‰ˆæœ¬æµè§ˆå™¨çš„åŸå› ã€‚ è¿™é‡Œæ˜¯ shim æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿshim å¯ä»¥å°†æ–°çš„ API å¼•å…¥åˆ°æ—§çš„ç¯å¢ƒä¸­ï¼Œè€Œä¸”ä»…é å°±ç¯å¢ƒä¸­å·²æœ‰çš„æ‰‹æ®µå®ç°ã€‚æ‰€ä»¥è¿™é‡Œçš„æ„æ€æ˜¯è¯´ï¼ŒObject.defineProperty è¿™ä¸ªæ–¹æ³•æ˜¯æ— æ³•å¼•å…¥åˆ°æ—§çš„ç¯å¢ƒçš„ï¼Œæ‰€ä»¥ä¸æ”¯æŒä½ç‰ˆæœ¬æµè§ˆå™¨ã€‚ è¿™äº› getter/setter å¯¹ç”¨æˆ·æ¥è¯´æ˜¯ä¸å¯è§çš„ï¼Œä½†æ˜¯åœ¨å†…éƒ¨å®ƒä»¬è®© Vue èƒ½å¤Ÿè¿½è¸ªä¾èµ–ï¼Œåœ¨å±æ€§è¢«è®¿é—®å’Œä¿®æ”¹æ—¶é€šçŸ¥å˜æ›´ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ä¸åŒæµè§ˆå™¨åœ¨æ§åˆ¶å°æ‰“å°æ•°æ®å¯¹è±¡æ—¶å¯¹ getter/setter çš„æ ¼å¼åŒ–å¹¶ä¸åŒï¼Œæ‰€ä»¥å»ºè®®å®‰è£… vue-devtools æ¥è·å–å¯¹æ£€æŸ¥æ•°æ®æ›´åŠ å‹å¥½çš„ç”¨æˆ·ç•Œé¢ã€‚ æ¯ä¸ªç»„ä»¶å®ä¾‹éƒ½å¯¹åº”ä¸€ä¸ª watcher å®ä¾‹ï¼Œå®ƒä¼šåœ¨ç»„ä»¶æ¸²æŸ“çš„è¿‡ç¨‹ä¸­æŠŠâ€œæ¥è§¦â€è¿‡çš„æ•°æ®å±æ€§è®°å½•ä¸ºä¾èµ–ã€‚ä¹‹åå½“ä¾èµ–é¡¹çš„ setter è§¦å‘æ—¶ï¼Œä¼šé€šçŸ¥ watcherï¼Œä»è€Œä½¿å®ƒå…³è”çš„ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚ æ£€æµ‹å˜åŒ–çš„æ³¨æ„äº‹é¡¹ å—ç°ä»£ JavaScript çš„é™åˆ¶ (è€Œä¸” Object.observe ä¹Ÿå·²ç»è¢«åºŸå¼ƒ)ï¼ŒVue æ— æ³•æ£€æµ‹åˆ°å¯¹è±¡å±æ€§çš„æ·»åŠ æˆ–åˆ é™¤ã€‚ç”±äº Vue ä¼šåœ¨åˆå§‹åŒ–å®ä¾‹æ—¶å¯¹å±æ€§æ‰§è¡Œ getter/setter è½¬åŒ–ï¼Œæ‰€ä»¥å±æ€§å¿…é¡»åœ¨ data å¯¹è±¡ä¸Šå­˜åœ¨æ‰èƒ½è®© Vue å°†å®ƒè½¬æ¢ä¸ºå“åº”å¼çš„ã€‚ å¯¹äºå·²ç»åˆ›å»ºçš„å®ä¾‹ï¼ŒVue ä¸å…è®¸åŠ¨æ€æ·»åŠ æ ¹çº§åˆ«çš„å“åº”å¼å±æ€§ã€‚ä½†æ˜¯ï¼Œå¯ä»¥ä½¿ç”¨ Vue.set(object, propertyName, value) æ–¹æ³•å‘åµŒå¥—å¯¹è±¡æ·»åŠ å“åº”å¼å±æ€§ã€‚ 1Vue.set(vm.someObject, 'b', 2) æœ‰æ—¶ä½ å¯èƒ½éœ€è¦ä¸ºå·²æœ‰å¯¹è±¡èµ‹å€¼å¤šä¸ªæ–°å±æ€§ï¼Œæ¯”å¦‚ä½¿ç”¨ Object.assign() æˆ– _.extend()ã€‚ä½†æ˜¯ï¼Œè¿™æ ·æ·»åŠ åˆ°å¯¹è±¡ä¸Šçš„æ–°å±æ€§ä¸ä¼šè§¦å‘æ›´æ–°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥ç”¨åŸå¯¹è±¡ä¸è¦æ··åˆè¿›å»çš„å¯¹è±¡çš„å±æ€§ä¸€èµ·åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚ 1this.someObject = Object.assign(&#123;&#125;, this.someObject, &#123; a: 1, b: 2 &#125;) Object.assign() æ–¹æ³•ç”¨äºå°†æ‰€æœ‰å¯æšä¸¾å±æ€§çš„å€¼ä»ä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ã€‚å®ƒå°†è¿”å›ç›®æ ‡å¯¹è±¡ã€‚ 1Object.assign(target, ...sources) å£°æ˜å“åº”å¼å±æ€§ ç”±äº Vue ä¸å…è®¸åŠ¨æ€æ·»åŠ æ ¹çº§å“åº”å¼å±æ€§ï¼Œæ‰€ä»¥ä½ å¿…é¡»åœ¨åˆå§‹åŒ–å®ä¾‹å‰å£°æ˜æ‰€æœ‰æ ¹çº§å“åº”å¼å±æ€§ï¼Œå“ªæ€•åªæ˜¯ä¸€ä¸ªç©ºå€¼ã€‚ å¼‚æ­¥æ›´æ–°é˜Ÿåˆ— Vue åœ¨æ›´æ–° DOM æ—¶æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ã€‚ åªè¦ä¾¦å¬åˆ°æ•°æ®å˜åŒ–ï¼ŒVue å°†å¼€å¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¹¶ç¼“å†²åœ¨åŒä¸€äº‹ä»¶å¾ªç¯ä¸­å‘ç”Ÿçš„æ‰€æœ‰æ•°æ®å˜æ›´ã€‚ å¦‚æœåŒä¸€ä¸ª watcher è¢«å¤šæ¬¡è§¦å‘ï¼Œåªä¼šè¢«æ¨å…¥åˆ°é˜Ÿåˆ—ä¸­ä¸€æ¬¡ã€‚ è¿™ç§åœ¨ç¼“å†²æ—¶å»é™¤é‡å¤æ•°æ®å¯¹äºé¿å…ä¸å¿…è¦çš„è®¡ç®—å’Œ DOM æ“ä½œæ˜¯éå¸¸é‡è¦çš„ã€‚ æ„Ÿè§‰è¿™ç§å¤„ç†ç±»ä¼¼äºé˜²æŠ–ï¼Œæå‡æ€§èƒ½ã€‚ ç„¶åï¼Œåœ¨ä¸‹ä¸€ä¸ªçš„äº‹ä»¶å¾ªç¯ â€œtickâ€ ä¸­ï¼ŒVue åˆ·æ–°é˜Ÿåˆ—å¹¶æ‰§è¡Œå®é™… (å·²å»é‡çš„) å·¥ä½œã€‚ Vue åœ¨å†…éƒ¨å¯¹å¼‚æ­¥é˜Ÿåˆ—å°è¯•ä½¿ç”¨åŸç”Ÿçš„ Promise.thenã€MutationObserver å’Œ setImmediateï¼Œå¦‚æœæ‰§è¡Œç¯å¢ƒä¸æ”¯æŒï¼Œåˆ™ä¼šé‡‡ç”¨ setTimeout(fn, 0) ä»£æ›¿ã€‚ Promise.thenï¼š ES6 MutationObserverï¼šæ¥å£æä¾›äº†ç›‘è§†å¯¹DOMæ ‘æ‰€åšæ›´æ”¹çš„èƒ½åŠ›ã€‚å®ƒè¢«è®¾è®¡ä¸ºæ—§çš„Mutation EventsåŠŸèƒ½çš„æ›¿ä»£å“ï¼Œè¯¥åŠŸèƒ½æ˜¯DOM3 Eventsè§„èŒƒçš„ä¸€éƒ¨åˆ†ã€‚ setImmediateï¼šéæ ‡å‡†ã€‚ ä¾‹å¦‚ï¼Œå½“ä½ è®¾ç½® vm.someData = &#39;new value&#39;ï¼Œè¯¥ç»„ä»¶ä¸ä¼šç«‹å³é‡æ–°æ¸²æŸ“ã€‚ å½“åˆ·æ–°é˜Ÿåˆ—æ—¶ï¼Œç»„ä»¶ä¼šåœ¨ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯ â€œtickâ€ ä¸­æ›´æ–°ã€‚ å¤šæ•°æƒ…å†µæˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒè¿™ä¸ªè¿‡ç¨‹ï¼Œä½†æ˜¯å¦‚æœä½ æƒ³åŸºäºæ›´æ–°åçš„ DOM çŠ¶æ€æ¥åšç‚¹ä»€ä¹ˆï¼Œè¿™å°±å¯èƒ½ä¼šæœ‰äº›æ£˜æ‰‹ã€‚ è™½ç„¶ Vue.js é€šå¸¸é¼“åŠ±å¼€å‘äººå‘˜ä½¿ç”¨â€œæ•°æ®é©±åŠ¨â€çš„æ–¹å¼æ€è€ƒï¼Œé¿å…ç›´æ¥æ¥è§¦ DOMï¼Œä½†æ˜¯æœ‰æ—¶æˆ‘ä»¬å¿…é¡»è¦è¿™ä¹ˆåšã€‚ ä¸ºäº†åœ¨æ•°æ®å˜åŒ–ä¹‹åç­‰å¾… Vue å®Œæˆæ›´æ–° DOMï¼Œå¯ä»¥åœ¨æ•°æ®å˜åŒ–ä¹‹åç«‹å³ä½¿ç”¨ Vue.nextTick(callback)ã€‚è¿™æ ·å›è°ƒå‡½æ•°å°†åœ¨ DOM æ›´æ–°å®Œæˆåè¢«è°ƒç”¨ã€‚ ç®€å•å®ç° Observeï¼Œç»™å¯¹è±¡çš„å±æ€§æ·»åŠ  setter/getter äº‹ä»¶ 12345678910111213141516171819202122232425262728293031323334var data = &#123; name: 'aaa'&#125;observe(data)let name = data.namedata.name = 'bbb'function observe(obj) &#123; // åˆ¤æ–­ç±»å‹ if (!obj || typeof obj !== 'object') &#123; return &#125; Object.keys(obj).forEach(key =&gt; &#123; defineReactive(obj, key, obj[key]) &#125;)&#125;function defineReactive(obj, key, val) &#123; // é€’å½’å­å±æ€§ observe(val) Object.defineProperty(obj, key, &#123; // å¯æšä¸¾ enumerable: true, // å¯é…ç½® configurable: true, // è‡ªå®šä¹‰å‡½æ•° get: function reactiveGetter() &#123; console.log('get value') return val &#125;, set: function reactiveSetter(newVal) &#123; console.log('change value') val = newVal &#125; &#125;)&#125; Depï¼Œç”¨äºè§£è€¦å±æ€§çš„ä¾èµ–æ‰‹æœºå’Œæ´¾å‘æ›´æ–°æ“ä½œ 1234567891011121314151617class Dep &#123; constructor() &#123; this.subs = [] &#125; // æ·»åŠ ä¾èµ– addSub(sub) &#123; this.subs.push(sub) &#125; // æ›´æ–° notify() &#123; this.subs.forEach(sub =&gt; &#123; sub.update() &#125;) &#125;&#125;// å…¨å±€å±æ€§ï¼Œé€šè¿‡è¯¥å±æ€§é…ç½® WatcherDep.target = null Watcherï¼Œè§¦å‘ä¾èµ–æ”¶é›†æ—¶çš„æ“ä½œ 12345678910111213141516171819class Watcher &#123; constructor(obj, key, cb) &#123; // å°† Dep.target æŒ‡å‘è‡ªå·± // ç„¶åè§¦å‘å±æ€§çš„ getter æ·»åŠ ç›‘å¬ // æœ€åå°† Dep.target ç½®ç©º Dep.target = this this.cb = cb this.obj = obj this.key = key this.value = obj[key] Dep.target = null &#125; update() &#123; // è·å¾—æ–°å€¼ this.value = this.obj[this.key] // è°ƒç”¨ update æ–¹æ³•æ›´æ–° Dom this.cb(this.value) &#125;&#125; æ”¹é€  defineReactiveï¼Œæ·»åŠ ä¾èµ–æ”¶é›†å’Œæ´¾å‘æ›´æ–°ç›¸å…³ä»£ç  12345678910111213141516171819202122232425function defineReactive(obj, key, val) &#123; // é€’å½’å­å±æ€§ observe(val) let dp = new Dep() Object.defineProperty(obj, key, &#123; // å¯æšä¸¾ enumerable: true, // å¯é…ç½® configurable: true, // è‡ªå®šä¹‰å‡½æ•° get: function reactiveGetter() &#123; console.log('get value') if (Dep.target) &#123; dp.addSub(Dep.target) &#125; return val &#125;, set: function reactiveSetter(newVal) &#123; console.log('change value') val = newVal dp.notify() &#125; &#125;)&#125; æç®€ç‰ˆåŒå‘ç»‘å®š123456789101112131415161718192021222324&lt;h1&gt;æç®€ç‰ˆåŒå‘ç»‘å®š&lt;/h1&gt;&lt;input type=\"text\" id=\"text_id\" /&gt;&lt;p id=\"p_id\"&gt;&lt;/p&gt;&lt;script type=\"text/javascript\"&gt; var _xxObj = &#123;&#125; Object.defineProperty(_xxObj, 'xx_val', &#123; get: function () &#123; console.log('ggg'); return 'xx123' &#125;, set: function (_n) &#123; document.getElementById('txt_id').value = _n; document.getElementById('p_id').innerHTML = _n; &#125; &#125;); // ç›‘å¬é”®ç›˜äº‹ä»¶ document.addEventListener('keyup', function (e) &#123; _xxObj.xx_val = e.target.value; &#125;)&lt;/script&gt; ä¸Šé¢ç›´æ¥æ“ä½œ DOMï¼Œæ•ˆç‡ä½ é€šè¿‡è§‚å¯Ÿè€…æ¨¡å¼æé«˜åŒå‘ç»‘å®šæ•ˆç‡ å®ç°åŒå‘ç»‘å®š MVVM1234567891011121314151617181920212223&lt;div id=\"mvvm-app\"&gt; &lt;input type=\"text\" v-model=\"word\"&gt; &lt;p&gt;&#123;&#123;word&#125;&#125;&lt;/p&gt; &lt;button v-on:click=\"sayHi\"&gt;change model&lt;/button&gt;&lt;/div&gt;&lt;script src=\"./js/observer.js\"&gt;&lt;/script&gt;&lt;script src=\"./js/watcher.js\"&gt;&lt;/script&gt;&lt;script src=\"./js/compile.js\"&gt;&lt;/script&gt;&lt;script src=\"./js/mvvm.js\"&gt;&lt;/script&gt;&lt;script&gt; var vm = new MVVM(&#123; el: '#mvvm-app', data: &#123; word: 'Hello World!' &#125;, methods: &#123; sayHi: function() &#123; this.word = 'Hi, everybody!'; &#125; &#125; &#125;);&lt;/script&gt; æ€è·¯æ•´ç† å®ç°ä¸€ä¸ªæ•°æ®ç›‘å¬å™¨ Observerï¼Œèƒ½å¤Ÿå¯¹æ•°æ®å¯¹è±¡çš„æ‰€æœ‰å±æ€§è¿›è¡Œç›‘å¬ï¼Œå¦‚æœ‰å˜åŠ¨å¯æ‹¿åˆ°æœ€æ–°å€¼å¹¶é€šçŸ¥è®¢é˜…è€… å®ç°ä¸€ä¸ªæŒ‡ä»¤è§£æå™¨ Compileï¼Œå¯¹æ¯ä¸ªå…ƒç´ èŠ‚ç‚¹çš„æŒ‡ä»¤è¿›è¡Œæ‰«æå’Œè§£æï¼Œæ ¹æ®æŒ‡ä»¤æ¨¡æ¿æ›¿æ¢æ•°æ®ï¼Œä»¥åŠç»‘å®šç›¸åº”çš„æ›´æ–°å‡½æ•° å®ç°ä¸€ä¸ª Watcherï¼Œä½œä¸ºè¿æ¥ Observer å’Œ Compile çš„æ¡¥æ¢ï¼Œèƒ½å¤Ÿè®¢é˜…å¹¶æ”¶åˆ°æ¯ä¸ªå±æ€§å˜åŠ¨çš„é€šçŸ¥ï¼Œæ‰§è¡ŒæŒ‡ä»¤ç»‘å®šçš„ç›¸åº”å›è°ƒå‡½æ•°ï¼Œä»è€Œæ›´æ–°è§†å›¾ mvvm å…¥å£å‡½æ•°ï¼Œæ•´åˆä»¥ä¸Šä¸‰è€… å®ç° Observer åˆ©ç”¨ Object.defineProperty() æ¥ç›‘å¬å±æ€§å˜åŠ¨ï¼Œéå†éœ€è¦ç›‘å¬çš„å±æ€§ï¼Œè®¾ç½® set å’Œ getï¼Œåœ¨ç»™å±æ€§èµ‹å€¼çš„æ—¶å€™å°±ä¼šè§¦å‘ setï¼Œè®¿é—®è¿™ä¸ªå±æ€§çš„æ—¶å€™å°±ä¼šè§¦å‘ get 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647// observer.jsvar data = &#123; name: 'vue' &#125;;observe(data);data.name = 'dmq'; // èµ‹å€¼ï¼Œè§¦å‘å±æ€§ name çš„ setfunction observe(data) &#123; // å®ç° observer if (!data || typeof data !== 'object') &#123; return; &#125; Object.keys(data).forEach(function(key) &#123; // å–å‡ºæ‰€æœ‰å±æ€§éå† defineReactive(data, key, data[key]); &#125;);&#125;;function defineReactive(data, key, val) &#123; var dep = new Dep(); observe(val); // ç›‘å¬å­å±æ€§ Object.defineProperty(data, key, &#123; enumerable: true, // å¯æšä¸¾ configurable: false, // ä¸èƒ½å† define get: function () &#123; Dep.target &amp;&amp; dep.addSub(Dep.target); // ç”±äºéœ€è¦åœ¨é—­åŒ…å†…æ·»åŠ watcherï¼Œæ‰€ä»¥é€šè¿‡Depå®šä¹‰ä¸€ä¸ªå…¨å±€targetå±æ€§ï¼Œæš‚å­˜watcher, æ·»åŠ å®Œç§»é™¤ï¼ˆçœ‹ Watcher.jsï¼‰ return val; &#125;, set: function (newVal) &#123; if (val === newVal) return; // æ²¡å˜åŒ– console.log('ç›‘å¬', val, '--&gt;', newVal); val = newVal; dep.notify(); // é€šçŸ¥æ‰€æœ‰è®¢é˜…è€… &#125; &#125;);&#125;function Dep() &#123; // æ¶ˆæ¯è®¢é˜…å™¨ this.subs = []; // æ”¶é›†è®¢é˜…è€…&#125;Dep.prototype = &#123; addSub: function(sub) &#123; // æ·»åŠ è®¢é˜…è€… this.subs.push(sub); &#125;, notify: function() &#123; // é€šçŸ¥è®¢é˜…è€… this.subs.forEach(function(sub) &#123; sub.update(); // è°ƒç”¨è®¢é˜…è€…çš„æ›´æ–°æ–¹æ³• &#125;); &#125;&#125;; å®ç° Compile è§£ææ¨¡æ¿æŒ‡ä»¤ï¼Œå°†æ¨¡æ¿ä¸­çš„å˜é‡æ›¿æ¢æˆæ•°æ®ï¼Œç„¶ååˆå§‹åŒ–æ¸²æŸ“é¡µé¢è§†å›¾ï¼Œå¹¶å°†æ¯ä¸ªæŒ‡ä»¤å¯¹åº”çš„èŠ‚ç‚¹ç»‘å®šæ›´æ–°å‡½æ•°ï¼Œæ·»åŠ ç›‘å¬æ•°æ®çš„è®¢é˜…è€…ï¼Œä¸€æ—¦æ•°æ®æœ‰å˜åŠ¨ï¼Œæ”¶åˆ°é€šçŸ¥ï¼Œæ›´æ–°è§†å›¾ å› ä¸ºéå†è§£æçš„è¿‡ç¨‹æœ‰å¤šæ¬¡æ“ä½œdomèŠ‚ç‚¹ï¼Œä¸ºæé«˜æ€§èƒ½å’Œæ•ˆç‡ï¼Œä¼šå…ˆå°†è·ŸèŠ‚ç‚¹elè½¬æ¢æˆæ–‡æ¡£ç¢ç‰‡fragmentè¿›è¡Œè§£æç¼–è¯‘æ“ä½œï¼Œè§£æå®Œæˆï¼Œå†å°†fragmentæ·»åŠ å›åŸæ¥çš„çœŸå®domèŠ‚ç‚¹ä¸­ å®ç° Watcher Watcherè®¢é˜…è€…ä½œä¸º Observer å’Œ Compile ä¹‹é—´é€šä¿¡çš„æ¡¥æ¢ï¼Œä¸»è¦åšçš„äº‹æƒ…æ˜¯: åœ¨è‡ªèº«å®ä¾‹åŒ–æ—¶å¾€å±æ€§è®¢é˜…å™¨ dep é‡Œé¢æ·»åŠ è‡ªå·± è‡ªèº«å¿…é¡»æœ‰ä¸€ä¸ª update æ–¹æ³• å¾…å±æ€§å˜åŠ¨ dep.notice() é€šçŸ¥æ—¶ï¼Œèƒ½è°ƒç”¨è‡ªèº«çš„ update() æ–¹æ³•ï¼Œå¹¶è§¦å‘Compile ä¸­ç»‘å®šçš„å›è°ƒ 123456789101112131415161718192021222324252627// watcher.jsfunction Watcher(vm, exp, cb) &#123; this.cb = cb; this.vm = vm; this.exp = exp; this.value = this.get(); // æ­¤å¤„ä¸ºäº†è§¦å‘å±æ€§çš„getterï¼Œä»è€Œåœ¨ dep æ·»åŠ è‡ªå·±ï¼Œç»“åˆObserveræ›´æ˜“ç†è§£ Watcher.prototype = &#123; update: function() &#123; this.run(); // å±æ€§å€¼å˜åŒ–æ”¶åˆ°é€šçŸ¥ &#125;, run: function() &#123; var value = this.get(); // å–åˆ°æœ€æ–°å€¼ var oldVal = this.value; if (value !== oldVal) &#123; this.value = value; this.cb.call(this.vm, value, oldVal); // æ‰§è¡ŒCompileä¸­ç»‘å®šçš„å›è°ƒï¼Œæ›´æ–°è§†å›¾ &#125; &#125;, get: function() &#123; Dep.target = this; // å°†å½“å‰è®¢é˜…è€…æŒ‡å‘è‡ªå·± var value = this.vm[exp]; // è§¦å‘getterï¼Œæ·»åŠ è‡ªå·±åˆ°å±æ€§è®¢é˜…å™¨ä¸­ Dep.target = null; // æ·»åŠ å®Œæ¯•ï¼Œé‡ç½® return value; &#125; &#125;&#125; è°ˆä¸€è°ˆ vue åŒå‘ç»‘å®šåŸç†å¯¹è±¡ é¦–å…ˆï¼ŒVue æ˜¯é‡‡ç”¨æ•°æ®åŠ«æŒç»“åˆå‘å¸ƒè€…-è®¢é˜…æ¨¡å¼ï¼Œé€šè¿‡ Object.defineProperty() æ¥åŠ«æŒå„ä¸ªå±æ€§çš„ setter å’Œ getter æ¯ä¸ªå±æ€§éƒ½å¯¹åº”æœ‰ä¸€ä¸ªè®¢é˜…è€…åˆ—è¡¨ï¼Œè®¢é˜…è€…è·å–è¯¥å±æ€§æ—¶ä¼šè§¦å‘ getï¼Œè¿™ä¸ªæ—¶å€™å°†è®¢é˜…è€…æ·»åŠ åˆ°å±æ€§çš„è®¢é˜…è€…åˆ—è¡¨é‡Œï¼Œè¿™å°±æ˜¯æ”¶é›†ä¾èµ–çš„è¿‡ç¨‹ åœ¨è¯¥å±æ€§æ”¹å˜æ—¶ï¼Œä¼šè§¦å‘ setï¼Œåœ¨ set é‡Œé€šçŸ¥æ‰€æœ‰è®¢é˜…è€… è®¢é˜…è€…æ”¶åˆ°å±æ€§æ”¹å˜çš„äº‹ä»¶åï¼Œå†æ›´æ–°è§†å›¾ è§‚å¯Ÿè€…æ¨¡å¼ 123 â€”â€” Fire Event â€”â€”&gt;Subject Observer &lt;â€”â€” Subscribe â€”â€” å‘å¸ƒè®¢é˜…æ¨¡å¼ 123 â€”â€” Fire Event â€”â€”&gt;Publisher â€”â€” Publish Event â€”â€”&gt; Event Channel Observer &lt;â€”â€” Subscribe â€”â€” è§‚å¯Ÿè€…æ˜¯ç›´æ¥è®¢é˜…ç›®æ ‡äº‹ä»¶çš„ï¼Œè€Œå‘å¸ƒè€…å’Œè®¢é˜…è€…ä¸­é—´è¿˜æœ‰ä¸€ä¸ªç¬¬ä¸‰æ–¹ï¼Œä¸€èˆ¬æ˜¯é˜Ÿåˆ—å®ç°çš„ï¼Œè¿™ä¸ªç¬¬ä¸‰æ–¹ä¸€æ–¹é¢ä»å‘å¸ƒè€…æ¥æ”¶äº‹ä»¶ï¼Œå¦ä¸€ä¸ªæ–¹é¢å‘è®¢é˜…è€…å‘å¸ƒäº‹ä»¶ï¼Œé¿å…å‘å¸ƒè€…å’Œè®¢é˜…è€…äº§ç”Ÿä¾èµ–ã€‚ æ•°ç»„æ‹¦æˆªå™¨ï¼Œé‡å†™æ•°ç»„æ–¹æ³• é¦–å…ˆè¦çŸ¥é“ä¼šæ”¹å˜åŸæ•°ç»„çš„æ–¹æ³• Pushã€popã€unshiftã€shiftã€spliceã€sortã€reverse å½“è¢«ç›‘å¬çš„æ•°ç»„è°ƒç”¨è¿™äº›æ–¹æ³•çš„æ—¶å€™å»é€šçŸ¥è®¢é˜…è€…ï¼Œæ‰€ä»¥ç”¨æ–¹æ‹¬å·&amp;ä¸‹æ ‡æ–¹å¼ä¿®æ”¹æ•°ç»„æ˜¯ä¸ä¼šè§¦å‘å“åº”çš„ é‡å†™è¿™äº›æ–¹æ³•ï¼Œåœ¨è°ƒç”¨æ•°ç»„åŸç”Ÿæ–¹æ³•å‰å…ˆåšä¸€äº›å¤„ç† 1234567891011121314const arrayProto = Array.prototype; // åŸç”Ÿçš„ Array.prototypeconst arrayMethods = Object.create(arrayProto); // æ‹·è´['push', 'pop', 'shift', 'unshift', 'splice', 'sort', 'reverse'].forEach(function(method) &#123; const original = arrayProto[method]; // æ”¹å†™åŸç”Ÿçš„æ–¹æ³• Object.defineProperty(arrayMethods, method, &#123; value: function(...args) &#123; // TODO åœ¨è¿™é‡Œå®ç° Vue éœ€è¦çš„åŠŸèƒ½ return original.apply(this, ...args); &#125;, enumerable: false, sritable: true, configurable: true &#125;)&#125;) å®ç°å“åº”å¼ Observer å®ç° observer çš„æ—¶å€™å…ˆåˆ¤æ–­æ˜¯å¯¹è±¡è¿˜æ˜¯æ•°ç»„ï¼Œå¦‚æœæ˜¯æ•°ç»„å°±æŠŠ __proto__ æ”¹å†™æˆè‡ªå·±çš„ arrayMethodsï¼š value.__proto__ = arrayMethods æ”¶é›†ä¾èµ– å¯¹è±¡çš„ä¾èµ–æ”¶é›†æ˜¯åœ¨ defineReactive é‡Œï¼Œæ•°ç»„çš„æ‹¦æˆªå™¨è®¿é—®ä¸åˆ°ï¼Œå› æ­¤ Vue æŠŠä¾èµ–æ”¶é›†æå‰äº†ï¼Œæ”¾åœ¨åœ¨ Observer ä¸­ã€‚æŠŠ Observer å®ä¾‹ç»‘åˆ° value çš„æŸä¸ªå±æ€§ä¸‹ï¼Œæ‹¦æˆªå™¨å°±å¯ä»¥é€šè¿‡è¿™ä¸ªå±æ€§æ‰¾åˆ°ä¾èµ–ã€‚ è§¦å‘ä¾èµ– åœ¨æ‹¦æˆªå™¨é‡Œè§¦å‘ä¾èµ–ï¼ˆå³åœ¨ä¸Šé¢é‡å†™æ–¹æ³•çš„ TODO ä½ç½®è°ƒç”¨è®¢é˜…è€…ï¼Œå³ä¾èµ–çš„ notify æ–¹æ³•ï¼‰ ç›‘å¬å­å…ƒç´  Observer ä¸­é€’å½’ ç›‘æµ‹æ–°å¢å…ƒç´  åœ¨æ‹¦æˆªå™¨é‡Œå¯¹å¯ä»¥æ·»åŠ å…ƒç´ çš„æ–¹æ³•pushã€unshiftã€splice è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœæœ‰æ–°å¢å…ƒç´ ï¼Œå¯¹æ–°å¢å…ƒç´ æ·»åŠ  observer references æ·±å…¥å“åº”å¼åŸç† å“åº”å¼å¯¹è±¡ VueåŒå‘ç»‘å®šåŸç† å‰–æVueåŸç†&amp;å®ç°åŒå‘ç»‘å®šMVVM Vue2.xåŒå‘æ•°æ®ç»‘å®šåŸç†-Arrayç¯‡","categories":[],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://ziiyan.github.io/tags/Vue/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://ziiyan.github.io/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"é¢è¯•å‡†å¤‡ï¼šæ°´å¹³å‚ç›´å±…ä¸­","slug":"é¢è¯•å‡†å¤‡ï¼šæ°´å¹³å‚ç›´å±…ä¸­","date":"2020-08-05T09:06:52.000Z","updated":"2020-08-05T15:40:50.125Z","comments":true,"path":"2020/08/05/é¢è¯•å‡†å¤‡ï¼šæ°´å¹³å‚ç›´å±…ä¸­/","link":"","permalink":"http://ziiyan.github.io/2020/08/05/%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%EF%BC%9A%E6%B0%B4%E5%B9%B3%E5%9E%82%E7%9B%B4%E5%B1%85%E4%B8%AD/","excerpt":"","text":"123&lt;div class=\"container\"&gt; &lt;div class=\"item\"&gt;&lt;/div&gt;&lt;/div&gt; 1ã€æ°´å¹³å±…ä¸­1.1ã€è¡Œå†…å…ƒç´  ç¼ºç‚¹ï¼šä¸ºäº†å±…ä¸­å…ƒç´ ï¼Œä½¿æ–‡æœ¬ä¹Ÿå±…ä¸­äº†ï¼Œå› æ­¤å¯èƒ½éœ€è¦é‡ç½®æ–‡æœ¬ä½ç½®ã€‚ ä¼˜ç‚¹ï¼šä¸éœ€è¦å›ºå®šå±…ä¸­å…ƒç´ çš„å®½ã€‚ 1234567.container &#123; text-align: center;&#125;.item &#123; display: inline-block; text-align: left; /* if need initial text position */&#125; è¯¥æ–¹æ¡ˆçš„åŸç†æ˜¯ï¼šä¸Šé¢ä»£ç ä¸­çš„ text-align: center; ä¼šä½¿æ–‡æœ¬å±…ä¸­ï¼Œä½†æ˜¯å¯¹å—çº§å…ƒç´ æ— æ•ˆï¼Œå¦‚æœå°†å…ƒç´ è®¾ç½®ä¸º inline-blockï¼Œè¯¥å…ƒç´ å°±ä¼šè¢«å½“åšæ–‡æœ¬å¯¹å¾…ï¼Œä»è€Œå®ç°å…ƒç´ å±…ä¸­ã€‚ 1.2ã€å—çº§å…ƒç´ 1.2.1ã€margin123.item &#123; margin: 0 auto;&#125; è¯¥æ–¹æ¡ˆçš„åŸç†æ˜¯ï¼šå…ƒç´ è¢«è®¾ç½®æˆå—çº§åï¼Œä¼šç‹¬å ä¸€è¡Œï¼Œå¦‚æœå…¶å®½åº¦æ²¡æœ‰å æ»¡æ¨ªå‘ç©ºé—´ï¼Œé‚£ä¹ˆå‰©ä½™çš„ç©ºé—´å°±å¤„äºå¾…åˆ†é…çŠ¶æ€ï¼Œæ­¤æ—¶è®¾ç½® margin: auto; æ„å‘³ç€æŠŠå‰©ä½™çš„ç©ºé—´åˆ†é…ç»™ marginï¼Œå¹¶ä¸”å·¦å³å‡åˆ†ï¼Œæ‰€ä»¥å°±å®ç°äº†æ°´å¹³å±…ä¸­ã€‚ 1.2.2ã€flex1234.container &#123; display: flex; justify-content: center;&#125; 1.2.3ã€ç»å¯¹å®šä½1.2.3.1ã€transform12345678.container &#123; position: relative;&#125;.item &#123; position: absolute; left: 50%; transform: translateX(-50%);&#125; 1.2.3.2ã€margin-left12345678.container &#123; position: relative;&#125;.item &#123; position: absolute; left: 50%; margin-left: -0.5 * å…ƒç´ itemçš„å®½åº¦;&#125; 2ã€å‚ç›´å±…ä¸­2.1ã€è¡Œå†…å…ƒç´ 123456.container &#123; height: é«˜åº¦;&#125;.item &#123; line-height: é«˜åº¦;&#125; å•è¡Œæ–‡æœ¬ å…ƒç´ çš„ height å’Œ line-height ç›¸åŒçš„æ—¶å€™ï¼Œä¼šä½¿å…¶æ–‡æœ¬å†…å®¹å‚ç›´å±…ä¸­ã€‚å› æ­¤è¯¥æ–¹æ¡ˆåˆ©ç”¨äº†è¿™ä¸€ç‰¹ç‚¹ï¼Œä¸è¿‡æ–‡æœ¬å†…å®¹è™½ç„¶å‚ç›´å±…ä¸­äº†ï¼Œä½†æ˜¯å…ƒç´ å¹¶æ²¡æœ‰ï¼Œå› æ­¤å†å°†å…ƒç´ è®¾ç½®ä¸º inline-blockï¼Œè¿™æ ·å…ƒç´ å°±ä¼šè¢«å½“åšæ–‡æœ¬å¯¹å¾…äº†ã€‚åŒæ—¶ç”±äºå…·æœ‰äº† inline å±æ€§ï¼Œvertical-align: middle; ä¹Ÿå°±å¯ä»¥ç”Ÿæ•ˆäº†ã€‚ 2.2ã€å—çº§å…ƒç´ 2.2.1ã€flex1234.container &#123; display: flex; align-items: center;&#125; 2.2.2ã€ç»å¯¹å®šä½2.2.2.1ã€transform12345.item &#123; position: absolute; top: 50%; transform: translateY(0, -50%);&#125; 2.2.2.2ã€margin-top12345678.container &#123; position: relative;&#125;.item &#123; position: absolute; left: 50%; margin-top: -0.5 * å…ƒç´ itemçš„é«˜åº¦;&#125; 3ã€æ°´å¹³å‚ç›´å±…ä¸­3.1ã€Flex ä¼˜ç‚¹ï¼šä¸éœ€è¦å›ºå®šå±…ä¸­å…ƒç´ çš„å®½é«˜ 12345.container &#123; display: flex; justify-content: center; /* æ°´å¹³å±…ä¸­ */ align-items: center; /* å‚ç›´å±…ä¸­ */&#125; 123456.container &#123; display: flex;&#125;.item &#123; margin: auto;&#125; 3.2ã€Grid ä¼˜ç‚¹ï¼šä¸éœ€è¦å›ºå®šå±…ä¸­å…ƒç´ çš„å®½é«˜ã€‚ ç¼ºç‚¹ï¼šå…¼å®¹æ€§ä¸å¦‚ flex 123456.container &#123; display: grid;&#125;.item &#123; margin: auto;&#125; 3.3ã€ç»å¯¹å®šä½3.3.1ã€transform ä¼˜ç‚¹ï¼šä¸éœ€è¦å›ºå®šå±…ä¸­å…ƒç´ çš„å®½é«˜ 123456789.container &#123; position: relative;&#125;.item &#123; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);&#125; 3.3.2ã€è´Ÿ margin ç¼ºç‚¹ï¼šä¸éœ€è¦å›ºå®šå±…ä¸­å…ƒç´ çš„å®½é«˜ 12345678910.container &#123; position: relative;&#125;.item &#123; position: absolute; left: 50%; top: 50%; margin-left: -0.5 * å®½åº¦; margin-top: -0.5 * é«˜åº¦;&#125; 3.3.3ã€calc ç¼ºç‚¹ï¼šéœ€è¦å›ºå®šå±…ä¸­å…ƒç´ çš„å®½é«˜ 12345678.container &#123; position: relative;&#125;.item &#123; position: absolute; left: calc(50% - 0.5 * å®½åº¦); top: calc(50% - 0.5 * é«˜åº¦);&#125; 3.3.4ã€margin: auto1234567891011.container &#123; position: relative;&#125;.item &#123; position: absolute; left: 0; right: 0; top: 0; bottom: 0; margin: auto;&#125; è¯¥æ–¹æ¡ˆçš„åŸç†æ˜¯ï¼šä½¿ç”¨äº† CSS ä¸­çš„å®šä½å±æ€§ï¼ˆabsoluteã€fixed ç­‰ï¼‰åï¼Œå¦‚æœ left è®¾ç½®äº†å…·ä½“å€¼ï¼Œæ²¡æœ‰è®¾ç½® right å’Œ widthï¼Œé‚£ä¹ˆå°±ä¼šè‡ªåŠ¨è®¡ç®—ï¼ŒæŠŠå‰©ä½™çš„ç©ºé—´åˆ†é…ç»™ right å’Œ widthã€‚å¦‚æœ leftã€right å’Œ width éƒ½è®¾ç½®äº†å…·ä½“å€¼ï¼Œå¹¶ä¸”æ²¡æœ‰å æ»¡æ¨ªå‘ç©ºé—´ï¼Œé‚£ä¹ˆå‰©ä½™ç©ºé—´å°±å¤„äºå¾…åˆ†é…çŠ¶æ€ï¼Œæ­¤æ—¶è®¾ç½® margin: auto; æ„å‘³ç€æŠŠå‰©ä½™çš„ç©ºé—´åˆ†é…ç»™ marginï¼Œå¹¶ä¸”å·¦å³å‡åˆ†ï¼Œæ‰€ä»¥å°±å®ç°äº†æ°´å¹³å±…ä¸­ï¼Œå‚ç›´æ–¹å‘åŒç†ã€‚ ä½†æ˜¯è¦çŸ¥é“è¯¥æ–¹æ³•çš„å‰¯ä½œç”¨ï¼š left: 0; right: 0; ç›¸å½“äº width: 100%; top: 0; bottom: 0; ç›¸å½“äº height: 100%; ç¼ºç‚¹ï¼šéœ€è¦å›ºå®šå±…ä¸­å…ƒç´ çš„å®½é«˜ï¼Œå¦åˆ™å…¶å®½é«˜ä¼šè¢«è®¾ä¸º 100%ï¼ˆå‰¯ä½œç”¨ï¼‰ã€‚ reference ä¸€èµ·ææ‡‚ CSS æ°´å¹³å±…ä¸­ä¸å‚ç›´å±…ä¸­çš„16ä¸ªæ–¹æ³• CSS æ‹·é—®ï¼šæ°´å¹³å‚ç›´å±…ä¸­æ–¹æ³•ä½ ä¼šå‡ ç§ï¼Ÿ","categories":[],"tags":[{"name":"CSS","slug":"CSS","permalink":"http://ziiyan.github.io/tags/CSS/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://ziiyan.github.io/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"é¢è¯•å‡†å¤‡ï¼šæ•°ç»„","slug":"é¢è¯•å‡†å¤‡ï¼šæ•°ç»„å»é‡","date":"2020-08-05T06:10:37.000Z","updated":"2020-08-05T07:31:48.902Z","comments":true,"path":"2020/08/05/é¢è¯•å‡†å¤‡ï¼šæ•°ç»„å»é‡/","link":"","permalink":"http://ziiyan.github.io/2020/08/05/%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%EF%BC%9A%E6%95%B0%E7%BB%84%E5%8E%BB%E9%87%8D/","excerpt":"","text":"1ã€æ•°ç»„å»é‡ æœ€ç¬¨çš„åŠæ³•åŒå±‚ for å¾ªç¯ å…ˆæ’åºï¼Œç›¸é‚»æ¯”è¾ƒ 1.1ã€indexOf 1arr.indexOf(searchElement[, fromIndex]) indexOf()æ–¹æ³•è¿”å›åœ¨æ•°ç»„ä¸­å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªç»™å®šå…ƒç´ çš„ç¬¬ä¸€ä¸ªç´¢å¼• å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å› -1 123456789function unique(arr) &#123; let result = []; for (let i = 0; i &lt; arr.length; i++) &#123; if (result.indexOf(arr[i]) === -1) &#123; result.push(arr[i]); &#125; &#125; return result;&#125; 1.2ã€includes123456789function unique(arr) &#123; let result = []; for (let i = 0; i &lt; arr.length; i++) &#123; if (!result.includes(arr[i])) &#123; result.push(arr[i]) &#125; &#125; return result;&#125; 1.3ã€reduce12345function unique(arr) &#123; return arr.reduce(function(pre, cur) &#123; return pre.includes(cur) ? pre : [...pre, cur] &#125;, [])&#125; 1.4ã€Map1234567891011function unique(arr) &#123; let result = []; let map = new Map(); for (let i = 0; i &lt; arr.length; i++) &#123; if (!map.has(arr[i])) &#123; map.set(arr[i]); result.push(arr[i]); &#125; &#125; return result;&#125; 1.5ã€Set1234function unique(arr) &#123; return [...new Set(arr)]; // Array.from(new Set(arr))&#125; ä¸ºä»€ä¹ˆè¦æ­é…æ‰©å±•è¿ç®—ç¬¦å’Œ Array.fromï¼Ÿ Set è¿”å›çš„æ˜¯ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ ä»€ä¹ˆæ˜¯ç±»æ•°ç»„å¯¹è±¡ï¼Ÿ å¯ä»¥é€šè¿‡ç´¢å¼•å±æ€§è®¿é—®å…ƒç´ å¹¶ä¸”æ‹¥æœ‰ length å±æ€§çš„å¯¹è±¡ åŒºåˆ«ï¼šç±»æ•°ç»„å¯¹è±¡ä¸èƒ½ç›´æ¥ä½¿ç”¨æ•°ç»„çš„æ–¹æ³• å¯ä»¥é€šè¿‡ Function.call æˆ–è€… Function.apply æ–¹æ³•æ¥é—´æ¥è°ƒç”¨ ä¾‹å¦‚ Array.prototype.push.call() arguments document.getElementsXXX() 2ã€åˆ¤æ–­æ•°ç»„ æ–¹æ³• æè¿° arr instanceof Array æ£€æµ‹æ„é€ å‡½æ•°çš„ prototype æ˜¯å¦å‡ºç°åœ¨å¯¹è±¡çš„åŸå‹é“¾ä¸­ Array.isArray(arr) Object.prototype.toString.call(arr)===â€[object Array]â€ å¯¹è±¡éƒ½æœ‰å†…éƒ¨å±æ€§ [[Class]] è¡¨ç¤ºå¯¹è±¡çš„åˆ†ç±»ï¼Œæ— æ³•ç›´æ¥è®¿é—®ï¼Œé€šè¿‡ Object.prototype.toString()è®¿é—®ï¼Œä½†ä¸€èˆ¬ toString éƒ½è¢«é‡å†™äº†ï¼Œæ‰€ä»¥éœ€è¦ call arr.constructor === Array","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://ziiyan.github.io/tags/JavaScript/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://ziiyan.github.io/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"å­¦ä¹ ç¬”è®°ï¼šFlex å¸ƒå±€","slug":"å­¦ä¹ ç¬”è®°ï¼šFlexå¸ƒå±€","date":"2020-08-02T02:00:03.000Z","updated":"2020-08-03T07:10:15.707Z","comments":true,"path":"2020/08/02/å­¦ä¹ ç¬”è®°ï¼šFlexå¸ƒå±€/","link":"","permalink":"http://ziiyan.github.io/2020/08/02/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%9AFlex%E5%B8%83%E5%B1%80/","excerpt":"","text":"1ã€Flex å¸ƒå±€123.box &#123; display: flex;&#125; è¡Œå†…å…ƒç´  123.box &#123; display: inline-flex;&#125; è®¾ä¸º Flex å¸ƒå±€ä»¥åï¼Œå­å…ƒç´ çš„floatã€clearå’Œvertical-alignå±æ€§å°†å¤±æ•ˆ 2ã€åŸºæœ¬æ¦‚å¿µ å®¹å™¨ï¼ˆflex containerï¼‰ è®¾ç½® flex å¸ƒå±€çš„å…ƒç´  é¡¹ç›®ï¼ˆflex itemï¼‰ å®¹å™¨çš„ç›´æ¥å­å…ƒç´  ä¸»è½´ï¼ˆmain axisï¼‰ï¼šé»˜è®¤æ²¿ä¸»è½´æ’åˆ— å¼€å§‹ä½ç½®ï¼ˆmain startï¼‰ ç»“æŸä½ç½®ï¼ˆmain endï¼‰ äº¤å‰è½´ï¼ˆcross axisï¼‰ å¼€å§‹ä½ç½®ï¼ˆacross startï¼‰ ç»“æŸä½ç½®ï¼ˆacross endï¼‰ å•ä¸ªé¡¹ç›®å æ®ä¸»è½´çš„ç©ºé—´ï¼ˆmain sizeï¼‰ å•ä¸ªé¡¹ç›®å æ®äº¤å‰è½´çš„ç©ºé—´ï¼ˆcross sizeï¼‰ 3ã€å®¹å™¨çš„å±æ€§ flex-direction flex-wrap flex-flow justify-content align-items align-content 3.1ã€flex-direction flex-direction å†³å®šä¸»è½´çš„æ–¹å‘ row ï¼ˆé»˜è®¤ï¼‰æ°´å¹³ï¼Œå·¦ -&gt; å³ row-reverse æ°´å¹³ï¼Œå·¦ &lt;- å³ column å‚ç›´ï¼Œä¸Š -&gt; ä¸‹ column-reverse å‚ç›´ï¼Œä¸Š &lt;- ä¸‹ 3.2ã€ flex-wrap flex-wrap å¦‚æœä¸€æ¡è½´çº¿æ’ä¸ä¸‹ï¼Œå¦‚ä½•æ¢è¡Œ nowrap ï¼ˆé»˜è®¤ï¼‰ä¸æ¢è¡Œ wrap æ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸Šæ–¹ wrap-reverse æ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸‹æ–¹ 3.3ã€flex-flow flex-flow æ˜¯ flex-direction å’Œ flex-wrap çš„ç®€å†™ flex-flow: &lt;flex-direction&gt; || &lt;flex-wrap&gt; 3.4ã€justify-content justify-content é¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼ flex-start ï¼ˆé»˜è®¤ï¼‰å·¦å¯¹é½ flex-end å³å¯¹é½ center å±…ä¸­ space-between ä¸¤ç«¯å¯¹é½ï¼Œé¡¹ç›®é—´éš”ç›¸ç­‰ space-around æ¯ä¸ªé¡¹ç›®ä¸¤ä¾§é—´éš”ç›¸ç­‰ï¼ˆé¡¹ç›®ä¹‹é—´çš„é—´è·æ˜¯é¡¹ç›®ä¸è¾¹æ¡†é—´è·çš„ä¸¤å€ï¼‰ 3.5ã€align-item align-item é¡¹ç›®åœ¨äº¤å‰è½´ä¸Šçš„å¯¹é½æ–¹å¼ flex-start èµ·ç‚¹å¯¹é½ flex-end ç»ˆç‚¹å¯¹é½ center å±…ä¸­ baseline é¡¹ç›®ç¬¬ä¸€è¡Œæ–‡å­—çš„åŸºçº¿å¯¹é½ stretch ï¼ˆé»˜è®¤ï¼‰é¡¹ç›®æœªè®¾ç½®é«˜åº¦æˆ–é«˜åº¦ autoï¼Œå æ»¡æ•´ä¸ªå®¹å™¨é«˜åº¦ 3.6ã€align-content align-content ï¼ˆå¦‚æœæœ‰å¤šæ ¹ä¸»è½´ï¼‰å¤šæ ¹ä¸»è½´çš„å¯¹é½æ–¹å¼ï¼Œåªæœ‰ä¸€æ ¹ä¸èµ·ä½œç”¨ flex-start ä¸äº¤å‰è½´çš„èµ·ç‚¹å¯¹é½ flex-end ä¸äº¤å‰è½´çš„ç»ˆç‚¹å¯¹é½ center ä¸äº¤å‰è½´çš„ä¸­ç‚¹å¯¹é½ space-between ä¸äº¤å‰è½´ä¸¤ç«¯å¯¹é½ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”å¹³å‡åˆ†å¸ƒ space-around æ¯æ ¹è½´çº¿ä¸¤ä¾§çš„é—´éš”éƒ½ç›¸ç­‰ã€‚æ‰€ä»¥ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”æ¯”è½´çº¿ä¸è¾¹æ¡†çš„é—´éš”å¤§ä¸€å€ stretch è½´çº¿å æ»¡æ•´ä¸ªäº¤å‰è½´ 4ã€é¡¹ç›®çš„å±æ€§ order flex-grow flex-shrink flex-basis flex align-self 4.1ã€order order é¡¹ç›®æ’åˆ—é¡ºåºï¼Œé»˜è®¤ 0ï¼Œæ•°å€¼è¶Šå°è¶Šé å‰ order: &lt;integer&gt; 4.2ã€flex-grow flex-grow é¡¹ç›®æ–¹å¤§æ¯”ä¾‹ï¼Œé»˜è®¤ 0ï¼Œå³ä¸æ”¾å¤§ flex-grow: &lt;number&gt; 4.3ã€flex-shrink flex-shrink é¡¹ç›®æ–¹å¤§æ¯”ä¾‹ï¼Œé»˜è®¤ 1ï¼Œå³ç¼©å° flex-shrink: &lt;number&gt; 4.4ã€flex-basis flex-basis é¡¹ç›®å æ®çš„é»˜è®¤ä¸»è½´ç©ºé—´ï¼Œå³æ”¾å¤§æˆ–ç¼©å°ä¹‹å‰é¡¹ç›®å æ®çš„ç©ºé—´ï¼Œæµè§ˆå™¨æ ¹æ®è¿™ä¸ªå±æ€§è®¡ç®—ä¸»è½´æ˜¯å¦æœ‰å¤šä½™ç©ºé—´ï¼Œé»˜è®¤ auto flex-basis: &lt;length&gt; | auto 4.5ã€flex flexå±æ€§æ˜¯flex-grow, flex-shrink å’Œ flex-basisçš„ç®€å†™ flex: &lt;flex-grow&gt; &lt;flex-shrink&gt; &lt;flex-basis&gt; auto (1 1 auto) none (0 0 auto) 4.6ã€align-self align-selfå±æ€§å…è®¸å•ä¸ªé¡¹ç›®æœ‰ä¸å…¶ä»–é¡¹ç›®ä¸ä¸€æ ·çš„å¯¹é½æ–¹å¼ï¼Œå¯è¦†ç›–align-itemsï¼Œé»˜è®¤å€¼ä¸ºautoï¼Œè¡¨ç¤ºç»§æ‰¿çˆ¶å…ƒç´ çš„align-itemså±æ€§ auto flex-start flex-end center baseline stretch 5ã€å®æˆ˜5.1ã€éª°å­å¸ƒå±€å‚ç›´å±…ä¸­123&lt;div class=\"box\"&gt; &lt;div class=\"item\"&gt;&lt;/div&gt;&lt;/div&gt; 12345.box &#123; display: flex; justify-content: center; align-items: center;&#125; 5.2ã€ç½‘æ ¼å¸ƒå±€5.3ã€åœ£æ¯å¸ƒå±€5.4ã€è¾“å…¥æ¡†çš„å¸ƒå±€5.5ã€æ‚¬æŒ‚å¼å¸ƒå±€5.7ã€æµå¼å¸ƒå±€reference Flex å¸ƒå±€æ•™ç¨‹ï¼šè¯­æ³•ç¯‡ Flex å¸ƒå±€æ•™ç¨‹ï¼šå®ä¾‹ç¯‡","categories":[],"tags":[{"name":"CSS","slug":"CSS","permalink":"http://ziiyan.github.io/tags/CSS/"}]},{"title":"å­¦ä¹ ç¬”è®°ï¼šCSSå¸ƒå±€å­¦ä¹ æŒ‡å—","slug":"å­¦ä¹ ç¬”è®°ï¼šCSSå¸ƒå±€å­¦ä¹ æŒ‡å—","date":"2020-07-31T02:01:37.000Z","updated":"2020-08-01T16:14:55.360Z","comments":true,"path":"2020/07/31/å­¦ä¹ ç¬”è®°ï¼šCSSå¸ƒå±€å­¦ä¹ æŒ‡å—/","link":"","permalink":"http://ziiyan.github.io/2020/07/31/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%9ACSS%E5%B8%83%E5%B1%80%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97/","excerpt":"","text":"1ã€æ­£å¸¸æ–‡æ¡£æµï¼ˆNormal Flowï¼‰ æ²¡æœ‰ç”¨ä»»ä½•CSSæ¥æ”¹å˜é¡µé¢å¸ƒå±€çš„ç½‘é¡µ åœ¨æ­£å¸¸æµä¸­ï¼Œå…ƒç´ ç›’å­ï¼ˆboxesï¼‰ä¼šåŸºäºæ–‡æ¡£çš„å†™ä½œæ¨¡å¼ï¼ˆwriting modeï¼‰ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ’åˆ— 1.1ã€é€šè¿‡é¡µé¢ç»“æ„æ¥å‘æŒ¥æ­£å¸¸æ–‡æ¡£æµçš„ä¼˜åŠ¿ CSSåŠ è½½å¤±è´¥äº†ï¼Œç”¨æˆ·ä»ç„¶èƒ½é˜…è¯»ä½ çš„é¡µé¢å†…å®¹ é˜…è¯»å™¨ä¼šæŒ‰ç…§å…ƒç´ åœ¨æ–‡æ¡£ä¸­çš„ä½ç½®æ¥è¯»å–é¡µé¢å†…å®¹ å†…å®¹é¡ºåºå’Œç”¨æˆ·é¢„æœŸçš„é˜…è¯»é¡ºåºä¸€è‡´åˆ™ä¸å¿…å¸ƒå±€ æ€è€ƒå¦‚ä½•å¸ƒå±€ä¹‹å‰éœ€è¦è®¤çœŸæ€è€ƒæ–‡æ¡£ç»“æ„ 1.2ã€è„±ç¦»æ­£å¸¸æ–‡æ¡£æµ ä¸€æ—¦ä½ æœ‰äº†ä¸€ä¸ªç»“æ„è‰¯å¥½çš„é¡µé¢ï¼Œä½ å°±éœ€è¦å»å†³å®šå¦‚ä½•åˆ©ç”¨å®ƒå¹¶å°†å®ƒå˜ä¸ºæˆ‘ä»¬éœ€è¦çš„å¸ƒå±€ç»“æ„ 2ã€æµ®åŠ¨ï¼ˆFloatï¼‰ æµ®åŠ¨è¢«ç”¨æ¥å°†ç›’å­ï¼ˆboxï¼‰ç½®äºå·¦ä¾§æˆ–å³ä¾§ï¼ŒåŒæ—¶è®©å†…å®¹ç¯ç»•å…¶å±•ç¤º 2.1ã€æ¸…é™¤æµ®åŠ¨ ä¸€æ—¦ä½ å¯¹ä¸€ä¸ªå…ƒç´ åº”ç”¨äº†æµ®åŠ¨ï¼Œæ‰€æœ‰æ¥ä¸‹æ¥çš„å…ƒç´ éƒ½ä¼šç¯ç»•å®ƒç›´åˆ°å†…å®¹å¤„äºå®ƒä¸‹æ–¹ä¸”å¼€å§‹åº”ç”¨æ­£å¸¸æ–‡æ¡£æµ å½“ä½ ä¸æƒ³è¦æŸä¸ªå…ƒç´ å—åˆ°å…¶ä¹‹å‰çš„æµ®åŠ¨å…ƒç´ å½±å“æ—¶ï¼Œä¸ºå…¶æ·»åŠ clearå±æ€§å³å¯ æœ€å¸¸è§çš„æ¸…é™¤æµ®åŠ¨çš„hackæ–¹æ¡ˆæ˜¯ï¼šåœ¨å®¹å™¨å†…æ·»åŠ ä¸€ä¸ªCSSä¼ªå…ƒç´ ï¼Œå¹¶å°†å…¶clearå±æ€§è®¾ç½®ä¸ºboth 12345.container::after &#123; content: \"\"; display: table; clear: both;&#125; 2.2ã€å—çº§æ ¼å¼ä¸Šä¸‹æ–‡ï¼ˆBlock Formatting Contextï¼‰ æ¸…é™¤æµ®åŠ¨çš„å¦ä¸€ä¸ªæ–¹æ³•æ˜¯åœ¨å®¹å™¨å†…åˆ›å»ºBFC ä¸€ä¸ªBFCå…ƒç´ å®Œå…¨åŒ…è£¹ä½äº†å®ƒå†…éƒ¨çš„æ‰€æœ‰å…ƒç´ ï¼ŒåŒ…æ‹¬å†…éƒ¨çš„æµ®åŠ¨å…ƒç´ ï¼Œä¿è¯æµ®åŠ¨å…ƒç´ ä¸ä¼šè¶…å‡ºå…¶åº•éƒ¨ åˆ›å»ºBFCçš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œå…¶ä¸­æœ€å¸¸ç”¨çš„ä¸€ç§æ¸…é™¤æµ®åŠ¨çš„æ–¹å¼æ˜¯ä¸ºå…ƒç´ è®¾ç½®é™¤visibleï¼ˆé»˜è®¤ï¼‰ä¹‹å¤–çš„overflowå±æ€§å€¼ 123.container &#123; overflow: auto;&#125; å‰¯ä½œç”¨ï¼šæ»šåŠ¨æ¡ ä¸ºäº†ä½¿æ¸…é™¤æµ®åŠ¨çš„æ„å›¾æ›´åŠ ç›´è§‚ï¼Œå¹¶ä¸”é¿å…BFCçš„è´Ÿé¢å½±å“ï¼Œä½ å¯ä»¥ä½¿ç”¨flow-rootä½œä¸ºdisplayå±æ€§çš„å€¼ 123.container &#123; display: flow-root;&#125; 2.3ã€æµ®åŠ¨çš„ä¸€äº›é—ç•™ç”¨æ³• åœ¨æ–°çš„å¸ƒå±€æ–¹å¼å‡ºç°ä»¥å‰ï¼Œfloatç»å¸¸ä¼šè¢«ç”¨æ¥åˆ›å»ºå¤šæ å¸ƒå±€ ä¸å»ºè®®å†ä½¿ç”¨ 3ã€å®šä½ï¼ˆpositionï¼‰ å½“å¤„äºæ­£å¸¸æ–‡æ¡£æµæ—¶ï¼Œå…ƒç´ çš„positionå±æ€§ä¸ºstatic å½“æ”¹å˜å…ƒç´ çš„positionå±æ€§æ—¶ï¼Œé€šå¸¸æƒ…å†µä¸‹ä¹Ÿä¼šè®¾ç½®ä¸€äº›åç§»é‡ï¼ˆtop / left / bottom / rightï¼‰æ¥ä½¿å…ƒç´ ç›¸å¯¹äºå‚ç…§ç‚¹è¿›è¡Œä¸€å®šçš„ç§»åŠ¨ ä¸åŒçš„positionå€¼ä¼šäº§ç”Ÿä¸åŒçš„å‚ç…§ç‚¹ 3.1ã€ç›¸å¯¹å®šä½ï¼ˆrelativeï¼‰ å‚ç…§ä½ï¼šå…ƒç´ åœ¨æ­£å¸¸æ–‡æ¡£æµä¸­çš„ä½ç½® ä¿ç•™æ­£å¸¸æ–‡æ¡£æµä¸­çš„ä½ç½® 3.2ã€ç»å¯¹å®šä½ï¼ˆabsoluteï¼‰ å‚ç…§ä½ï¼šposition ä¸ä¸º static çš„çˆ¶å…ƒç´  ä»æ­£å¸¸æ–‡æ¡£æµä¸­ç§»é™¤ 3.3ã€å›ºå®šå®šä½ï¼ˆfixedï¼‰ å‚ç…§ä½ï¼šè§†å£ ä»æ­£å¸¸æ–‡æ¡£æµä¸­ç§»é™¤ 3.4ã€ç²˜æ€§å®šä½ï¼ˆstickyï¼‰ è®©å…ƒç´ åœ¨é¡µé¢æ»šåŠ¨æ—¶å¦‚åŒåœ¨æ­£å¸¸æµä¸­ï¼Œä½†å½“å…¶æ»šåŠ¨åˆ°ç›¸å¯¹äºè§†å£çš„æŸä¸ªç‰¹å®šä½ç½®æ—¶å°±ä¼šå›ºå®šåœ¨å±å¹•ä¸Šï¼Œå¦‚åŒfixedä¸€èˆ¬ å¯¼èˆª èœå• æ¯”è¾ƒæ–°ï¼Œæœ‰å…¼å®¹æ€§é—®é¢˜ 4ã€å¼¹æ€§å¸ƒå±€ï¼ˆFlex Layoutï¼‰ ä¸€ç»´å¸ƒå±€ï¼ˆæŒ‰è¡Œæˆ–è€…åˆ—ï¼‰ ä½¿ç”¨display: flexæ¥å°†å…ƒç´ å˜ä¸ºå¼¹æ€§å¸ƒå±€ ç›´æ¥å­å…ƒç´ ä¼šå˜ä¸ºå¼¹æ€§é¡¹ï¼ˆflex itemï¼‰ï¼Œå¹¶æŒ‰è¡Œæ’åˆ— 4.1ã€å¼¹æ€§ç›’å­çš„è½´ï¼ˆaxisï¼‰ ä¸»è½´ï¼šé€šè¿‡è®¾ç½® flex-direction å±æ€§ row (é»˜è®¤) column äº¤å‰è½´ï¼šä¸ä¸»è½´å‚ç›´ 4.2ã€æ–¹å‘å’Œæ¬¡åº é€šè¿‡è®¾ç½®flex-direction å±æ€§æ¥æ”¹å˜ä¸»è½´æ–¹å‘ row-reverse column-reverse ä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½® order å±æ€§ï¼Œæ”¹å˜æŸä¸€ä¸ªå¼¹æ€§é¡¹çš„é¡ºåº 4.3. ä¸€äº›Flexçš„å±æ€§ æ§åˆ¶å¼¹æ€§é¡¹åœ¨ä¸»è½´ä¸Šç©ºé—´å¤§å° flex-growï¼šå¦‚æœä¸ºæ­£æ•°ï¼Œå…è®¸æ‹‰ä¼¸ï¼Œå€¼è¶Šå¤§æ‹‰ä¼¸æ¯”ä¾‹è¶Šå¤§ flex-shrinkï¼šå¦‚æœä¸ºæ­£æ•°ï¼Œå…ƒç´ æº¢å‡ºå®¹å™¨æ—¶ä¼šè¿›è¡Œæ”¶ç¼©ï¼Œå€¼è¶Šå¤§å‹ç¼©è¶Šå¤š flex-basisï¼šä¸ºå¼¹æ€§é¡¹è®¾ç½®åˆå§‹å¤§å° å¤§å¤šæ•°æƒ…å†µä¸‹å®¹å™¨å…ƒç´ å¤§å°ä¸ä¼šæ­£å¥½è¢«åˆ†ä¸ºè®¸å¤šåˆå§‹å¤§å°çš„é¡¹ï¼Œè€Œæ˜¯å¯èƒ½æœ‰ä¸€äº›ä¸è¶³æˆ–å‰©ä½™ç©ºé—´ã€‚flex-growå’Œflow-shrinkå±æ€§å…è®¸æˆ‘ä»¬åœ¨å®¹å™¨å¤§å°ä¸è¶³æˆ–æœ‰ç©ºä½™æ—¶æ§åˆ¶å„ä¸ªå¼¹æ€§é¡¹çš„å¤§å° ç®€å†™ flex: [flex-grow] [flex-shrink] [flex-basis] 5ã€ç½‘æ ¼å¸ƒå±€ï¼ˆGrid Layoutï¼‰ äºŒç»´å¸ƒå±€ï¼ˆæŒ‰è¡Œå’Œåˆ—ï¼‰ grid: grid ä½¿ç”¨grid-template-columnså’Œgrid-template-rowså±æ€§æ¥æ§åˆ¶ç½‘æ ¼ä¸­çš„è¡Œä¸åˆ—ï¼Œé»˜è®¤å€¼ä¸ºauto å¸¸ç”¨çš„æ¨¡å¼æ˜¯ä¸ºç½‘æ ¼åˆ¶å®šåˆ—å®½åº¦ï¼Œä½†æ˜¯å…è®¸ç½‘æ ¼æŒ‰éœ€æ·»åŠ è¡Œ fræ˜¯ä¸€ç§å¼¹æ€§å•ä½ï¼Œå®ƒå¯ä»¥æŒ‡å®šç½‘æ ¼å®¹å™¨å†…çš„ç©ºé—´è¢«å¦‚ä½•åˆ’åˆ† 5.1ã€å…³äºç½‘æ ¼çš„ä¸€äº›æœ¯è¯­ inline axis block axis grid line grid cell grid area 5.2ã€ç½‘æ ¼çš„è‡ªåŠ¨æ’åˆ—è§„åˆ™ ç½‘æ ¼å®¹å™¨çš„ç›´æ¥å­å…ƒç´ å°±ä¼šå¼€å§‹å°†å®ƒä»¬è‡ªå·±ä¸€ä¸ªä¸€ä¸ªåœ°æ”¾ç½®åœ¨ç½‘æ ¼çš„å•å…ƒæ ¼ä¸­ ç½‘æ ¼ä¸­ä»»ä½•æ²¡æœ‰è¢«è¿›è¡Œå®šä½çš„ç›´æ¥å­å…ƒç´ éƒ½ä¼šæ ¹æ®è‡ªåŠ¨æ’åˆ—è§„åˆ™è¿›è¡Œæ”¾ç½® 5.3ã€åŸºäºè¡Œ/åˆ—çš„åŸºæœ¬å®šä½æ–¹æ³• å®šä½ç½‘æ ¼å…ƒç´ æœ€ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨åŸºäºè¡Œ/åˆ—ï¼ˆlineï¼‰çš„å®šä½æ–¹æ³•ï¼Œåªéœ€å‘Šè¯‰æµè§ˆå™¨ä»å“ªä¸€æ’åˆ°å“ªä¸€æ’æ¥è¿›è¡Œåˆå¹¶ grid-column-start grid-column-end grid-row-start grid-row-end ç¼©å†™ grid-column: [start] / [end]ã€grid-row: [start] / [end] 5.4ã€é€šè¿‡å‘½ååŒºåŸŸæ¥å®šä½å…ƒç´  grid-area è®¾ç½®å…ƒç´ åå­— grid-template-areas è®¾ç½®å¸ƒå±€æ–¹å¼ . ç©ºå‡ºå•å…ƒæ ¼ 12345678910111213141516171819.item1 &#123; grid-area: a;&#125;.item2 &#123; grid-area: b;&#125;.item3 &#123; grid-area: c;&#125;.container &#123; display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; grid-template-areas: \"a a b b\" \"a a c c\";&#125; 6ã€æ˜¾ç¤ºé¡ºåºå’Œæ–‡æ¡£é¡ºåºï¼ˆvisual and document orderï¼‰ ä»ä¸Šåˆ°ä¸‹çš„é˜…è¯»é¡ºåºæ¥ç»„ç»‡æ–‡æ¡£é¡ºåº ä¼šæœ‰åŠ©äºå¯è¯»æ€§å’ŒCSSçš„å¸ƒå±€æ–¹å¼ 7ã€ç›’æ¨¡å‹çš„ç”Ÿæˆï¼ˆbox generationï¼‰ å†™åœ¨ç½‘é¡µé‡Œçš„ä»»ä½•ä¸œè¥¿éƒ½ä¼šç”Ÿæˆä¸€ä¸ªç›’å­ï¼ˆboxï¼‰ 7.1ã€ä¸ç”Ÿæˆç›’å­æˆ–å†…å®¹ï¼ˆdisplay: noneï¼‰ ä¸ä¼šè¢«å±•ç¤ºï¼Œå¹¶ä¸”ä¸ä¼šä¿ç•™å…¶æœ¬è¯¥å æœ‰çš„ç©ºé—´ 7.2 ä¸ç”Ÿæˆè¯¥å…ƒç´ ï¼Œä½†æ˜¯ç”Ÿæˆå…¶æ‰€æœ‰å­å…ƒç´ ï¼ˆdisplay: contentsï¼‰ è‡ªèº«çš„ç›’å­ä¸ç”Ÿæˆä½†æ‰€æœ‰çš„å­å…ƒç´ éƒ½ä¼šç…§å¸¸ç”Ÿæˆ å¦‚æœå¸Œæœ›ä¸€ä¸ªå¼¹æ€§å¸ƒå±€æˆ–ç½‘æ ¼å¸ƒå±€ä¸­çš„éç›´æ¥å­å…ƒç´ èƒ½åº”ç”¨è¿™äº›å¸ƒå±€ï¼Œè¿™å°±ä¼šéå¸¸æœ‰ç”¨ 8ã€å¯¹é½ justify-content align-content place-content justify-items align-items place-items justify-self align-self place-self row-gap column-gap gap 9ã€å¤šæ å¸ƒå±€ï¼ˆå¤šåˆ—å¸ƒå±€ï¼‰ æ”¯æŒåˆ›å»ºå¤šæ çš„å¸ƒå±€ç±»å‹ å½“å±•ç¤ºä¸€ç»„é«˜åº¦ä¸åŒçš„å¡ç‰‡æˆ–äº§å“æ—¶å¤šæ å¸ƒå±€ä¹Ÿéå¸¸æœ‰ç”¨ 9.1ã€è®¾ç½®æ çš„å®½åº¦123.container &#123; column-width: 300px;&#125; 9.2ã€è®¾ç½®æ çš„æ•°ç›®123.container &#123; column-count: 3;&#125; 9.3ã€é—´è·å’Œæ è§„åˆ™ column-gap é—´è· é»˜è®¤ 1em column-rule ä¸¤æ é—´è§„åˆ™ï¼Œç±»ä¼¼ borderï¼Œä¸å ç”¨ç©ºé—´ column-rule-width column-rule-color column-rule-style 9.4ã€å…è®¸å…ƒç´ æ¨ªè·¨å¤šæ  column-span all none 10ã€ç¢ç‰‡åŒ–ï¼ˆFragmentationï¼‰ break-inside: avoidï¼šç¡®ä¿å¡ç‰‡ä¸ä¼šè¢«æˆªä¸ºä¸¤åŠåˆ†åˆ°ä¸åŒçš„æ  reak-after: avoidï¼šå…ƒç´ åç¦æ­¢æ–­è¡Œ reference ä¸€ç¯‡å…¨é¢çš„CSSå¸ƒå±€å­¦ä¹ æŒ‡å— [è¯‘]","categories":[],"tags":[{"name":"CSS","slug":"CSS","permalink":"http://ziiyan.github.io/tags/CSS/"}]},{"title":"é¢ç»ï¼šå­—èŠ‚è·³åŠ¨-äº§å“ç ”å‘-ä¸€é¢","slug":"é¢ç»ï¼šå­—èŠ‚è·³åŠ¨-äº§å“ç ”å‘-ä¸€é¢","date":"2020-07-26T07:58:07.000Z","updated":"2020-08-31T14:09:33.529Z","comments":true,"path":"2020/07/26/é¢ç»ï¼šå­—èŠ‚è·³åŠ¨-äº§å“ç ”å‘-ä¸€é¢/","link":"","permalink":"http://ziiyan.github.io/2020/07/26/%E9%9D%A2%E7%BB%8F%EF%BC%9A%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8-%E4%BA%A7%E5%93%81%E7%A0%94%E5%8F%91-%E4%B8%80%E9%9D%A2/","excerpt":"","text":"è®¡ç®—æœºç½‘ç»œ TCP/IP ä¸ƒå±‚æ¨¡å‹ å››å±‚ï¼šåº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€ç‰©ç†å±‚ ä¸ƒå±‚ï¼šåº”ç”¨å±‚ã€è¡¨ç¤ºå±‚ã€ä¼šè¯å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç‰©ç†å±‚ TCPã€UDP åœ¨å“ªå±‚ï¼ŒåŒºåˆ« TCP å’Œ UDP æ˜¯ä¼ è¾“å±‚åè®®ã€‚ TCP æ˜¯é¢å‘è¿æ¥çš„ã€å¯é çš„ï¼Œè€Œ UDP ç›¸åï¼Œæ˜¯æ— è¿æ¥ã€ä¸å¯é çš„ã€‚TCP é€‚åˆæ•°æ®å¯é çš„åœºæ™¯ï¼ŒUDP é€‚åˆé€šä¿¡é€Ÿåº¦é«˜çš„åœºæ™¯ ä¸‰æ¬¡æ¡æ‰‹æµç¨‹ï¼š é¦–å…ˆï¼Œå®¢æˆ·ç«¯å‘èµ·è¿æ¥è¯·æ±‚ï¼ŒåŒæ­¥æ ‡å¿—ä½1ï¼Œéšæœºèµ·å§‹åºå· xï¼› ç„¶åå®¢æˆ·ç«¯æ¥æ”¶åˆ°è¯·æ±‚ï¼Œå‘é€å“åº”æŠ¥æ–‡ï¼ŒåŒæ­¥æ ‡å¿—ä½1ï¼Œç¡®è®¤æ ‡å¿—ä½1ï¼Œéšæœºèµ·å§‹åºå· yï¼Œç¡®è®¤å· x+1ï¼› æœ€åå®¢æˆ·ç«¯æ”¶åˆ°å“åº”æŠ¥æ–‡ï¼Œå‘é€ç¡®è®¤æŠ¥æ–‡ï¼ŒåŒæ­¥æ ‡å¿—ä½1ï¼Œç¡®è®¤æ ‡å¿—ä½1ï¼Œåºå·x+1ï¼Œç¡®è®¤å·y+1 ä¸ºä»€ä¹ˆä¸‰æ¬¡ï¼š ä¸¤æ¬¡ä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢æœåŠ¡å™¨å’Œè¿‡æœŸçš„è¯·æ±‚å»ºç«‹è¿æ¥ï¼Œå¦‚æœå®¢æˆ·ç«¯è¿ç»­å‘é€å¥½å‡ ä¸ªè¿æ¥è¯·æ±‚ï¼ŒæœåŠ¡ç«¯åªèƒ½å…¨ç›˜æ¥å— æœ‰äº†ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯å°±å¯ä»¥åœ¨ç¬¬ä¸‰æ¬¡çš„ç¡®è®¤æŠ¥æ–‡æ®µå‘Šè¯‰æœåŠ¡ç«¯ä½ å“åº”çš„é‚£ä¸ªè¿æ¥è¯·æ±‚æ˜¯è¿‡æœŸçš„ å››æ¬¡çš„è¯æ˜¯å¯ä»¥ä½†æ²¡å¿…è¦ï¼Œå› ä¸ºæ— è®ºæ€ä¹ˆæ ·æˆ‘ä»¬éƒ½æ— æ³•ä¿è¯è¿æ¥ç™¾åˆ†ä¹‹ç™¾ä¸å‡ºé”™ï¼Œåº”è¯¥è¯´ä¸‰æ¬¡æ˜¯æœ€å°æ¬¡æ•° æ— å·®é”™ TCP æ€ä¹ˆå®ç°ä¸¢åŒ…æ£€æµ‹æœºåˆ¶ åˆ©ç”¨æ»‘åŠ¨çª—å£ï¼Œåªæ¥æ”¶åºå·åœ¨çª—å£å†…çš„æ•°æ®åŒ…ï¼Œè¿™æ ·èƒ½æŒ‰é¡ºåºæ¥æ”¶ï¼Œä¸åœ¨æ»‘åŠ¨çª—å£å†…çš„åºå·åŒ…å°±ä¸¢å¼ƒã€‚å“åº”æŠ¥æ–‡ä¼šå‘é€ç¡®è®¤å·ï¼Œè¡¨ç¤ºå¤šå°‘å·ä¹‹å‰çš„æŠ¥æ–‡æˆ‘éƒ½æ¥å—åˆ°äº†ï¼Œå‘é€æ–¹å°±ä¼šé‡ä¼ ç¡®è®¤å·ä¹‹åçš„æŠ¥æ–‡ã€‚ HTTPã€HTTPS åŒºåˆ« HTTPS æ¯” HTTP å¤šäº†ä¸€å±‚ SSLï¼ŒHTTP å…ˆå’Œ SSL é€šä¿¡å†ç”± SSL å’Œ TCP é€šä¿¡ï¼ŒHTTPS éœ€è¦ CA è¯ä¹¦ã€‚ HTTP æ˜¯ä¸å®‰å…¨çš„ï¼Œä½“ç°åœ¨ä¸‰ä¸ªæ–¹é¢ï¼Œä¸€æ˜¯æ˜æ–‡ä¼ è¾“ï¼ŒäºŒæ˜¯æ— æ³•éªŒè¯æ•°æ®å®Œæ•´æ€§ï¼Œä¸‰æ˜¯æ— æ³•éªŒè¯å¯¹æ–¹èº«ä»½ï¼Œå¯èƒ½è¢«ä¼ªè£… HTTPS ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¯¹æ•°æ®å¯¹ç§°åŠ å¯†å†ä¼ è¾“çš„ï¼Œé¿å…äº†æ˜æ–‡ä¼ è¾“ã€‚åŒæ—¶å¯¹æ•°æ®æ‘˜è¦è¿›è¡Œç­¾åå¹¶æŠŠç­¾åç»“æœä¸€èµ·å‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ç”¨ç›¸åŒçš„æ‘˜è¦ç®—æ³•æå–æ‘˜è¦ï¼Œå†å’Œè§£å¯†åçš„ç­¾åç»“æœè¿›è¡Œæ¯”å¯¹ï¼Œå°±èƒ½çŸ¥é“å‘é€è¿‡æ¥çš„æ•°æ®æ˜¯å¦è¢«ç¯¡æ”¹ã€‚å› ä¸ºæœ‰äº†æ•°å­—ç­¾åï¼Œä¹Ÿå¯ä»¥è¯æ˜è¿™ä¸ªæŠ¥æ–‡å°±æ˜¯å¯†é’¥çš„æŒæœ‰äººå‘é€çš„ã€‚ HTML è¯­ä¹‰åŒ–æ ‡ç­¾æœ‰å“ªäº› æ ‡é¢˜ h1 - h6 åˆ—è¡¨ ulã€ol å¸ƒå±€ headerã€footerã€navã€mainã€articleã€sectionã€aside èŠèŠ meta æ ‡ç­¾ charset å£°æ˜æ–‡æ¡£ä½¿ç”¨çš„å­—ç¬¦ç¼–ç  http-equiv æ·»åŠ  http å¤´éƒ¨å†…å®¹ name=viewport ä¸»è¦å½±å“ç§»åŠ¨ç«¯å¸ƒå±€çš„ï¼Œåœ¨content é‡Œè®¾ç½® widthï¼Œ device-width æ˜¯è®¾å¤‡å®½åº¦ CSS å®ç°æ°´å¹³å‚ç›´å±…ä¸­çš„æ–¹æ³•ï¼Œå°½é‡å¤š 12345678910111213// flex.container &#123; display: flex; justify-content: center; align-items: center;&#125;---.container &#123; display: flex;&#125;.item &#123; margin: auto;&#125; 123456789101112131415161718192021222324252627282930313233// ç»å¯¹å®šä½.container &#123; position: relative;&#125;.item &#123; position: absoluate; left: 50%; top: 50%; transform: translate(-50%, -50%);&#125;---.container &#123; position: relative;&#125;.item &#123; position: absoluate; left: 50%; top: 50%; margin-left: -0.5 * å®½åº¦; margin-top: -0.5 * é«˜åº¦;&#125;---.container &#123; position: relative;&#125;.item &#123; position: absoluate; left: 0; right: 0; top: 0; bottom: 0; margin: auto;&#125; å®ç°åŒæ å¸ƒå±€ï¼ˆå·¦è¾¹å®šå®½100pxï¼Œå³è¾¹è‡ªé€‚åº”ï¼‰ 12345678910111213141516171819&lt;div class=\"container\"&gt; &lt;div class=\"left\"&gt;&lt;/div&gt; &lt;div class=\"right\"&gt;&lt;/div&gt;&lt;/div&gt;&lt;style&gt; .container &#123; position: relative; padding-left: 100px; &#125; .left &#123; width: 100px; margin-left: -100px; float: left; &#125; .right &#123; width: 100%; &#125;&lt;/style&gt; JS åŸºæœ¬æ•°æ®ç±»å‹ ï¼ˆ6ç§ï¼‰Stringã€Numberã€Undefinedã€NULLã€Booleanã€Symbol å¼•ç”¨æ•°æ®ç±»å‹ï¼ˆ1ï¼‰ Object å…³äº Symbol çŸ¥é“å¤šå°‘ åˆ¤æ–­æ•°æ®ç±»å‹çš„æ–¹æ³• typeofï¼šå¼•ç”¨ç±»å‹é™¤functionä¹‹å¤–è¿”å›çš„éƒ½æ˜¯object å·²çŸ¥å¼•ç”¨ç±»å‹ç”¨ instanceof å’Œ constructor instanceofï¼šåŸºäºåŸå‹é“¾ constructorï¼šå±æ€§æ˜“å˜ï¼Œä¸å¯ä¿¡èµ– Object.prototype.toString.call é€šç”¨ä½†ç¹ç å¦‚ä½•åŒºåˆ† Array å’Œ Object arr instanceof Array arr.constructor === Array Object.prototype.toString.call(arr) === â€œ[object Array]â€ Array.isArray(arr) èŠ‚æµã€é˜²æŠ–åœºæ™¯ èŠ‚æµæ˜¯æ¯éš”ä¸€æ®µæ—¶é—´æ‰§è¡Œä¸€æ¬¡æ“ä½œï¼Œæ¯”å¦‚ç›‘å¬æ»šåŠ¨äº‹ä»¶ é˜²æŠ–æ˜¯å»¶è¿Ÿæ‰§è¡Œï¼Œæ¯”å¦‚è¿ç»­ç‚¹å‡»ï¼Œåªåœ¨æœ€åä¸€æ¬¡ç‚¹å‡»ä¹‹åå‘é€è¯·æ±‚ æ‰‹å†™èŠ‚æµ / é˜²æŠ– 1234567891011121314151617181920function debounce(fn, ms) &#123; let timer = null; return (...arg) =&gt; &#123; clearTimeout(timer); timer = setTimeout(() =&gt; &#123; fn(...arg); &#125;, ms) &#125;&#125;function throttle(fn, ms) &#123; let timer = null; return (...arg) =&gt; &#123; if (timer) return; timer = setTimeout(() =&gt; &#123; fn(...arg); timer = null; &#125;, ms) &#125;&#125; Vue åŒå‘ç»‘å®šåŸç† setterã€getter çš„æ—¶å€™åšäº†ä»€ä¹ˆ æ•°æ®ç»“æ„ åˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰ç¯ å²›å±¿æœ€å¤§é¢ç§¯","categories":[],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://ziiyan.github.io/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"æµè§ˆå™¨ç¼“å­˜","slug":"æµè§ˆå™¨ç¼“å­˜","date":"2020-07-21T07:58:33.000Z","updated":"2020-07-27T09:15:42.890Z","comments":true,"path":"2020/07/21/æµè§ˆå™¨ç¼“å­˜/","link":"","permalink":"http://ziiyan.github.io/2020/07/21/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98/","excerpt":"","text":"HTTP ç¼“å­˜1ã€ç¼“å­˜çš„åˆ¤æ–­ç­–ç•¥1.1ã€å­˜å‚¨ç­–ç•¥ å‘ç”Ÿåœ¨æ”¶åˆ°è¯·æ±‚å“åº”å ç”¨äºå†³å®šæ˜¯å¦ç¼“å­˜ç›¸åº”èµ„æº 1.2ã€è¿‡æœŸç­–ç•¥ å‘ç”Ÿåœ¨è¯·æ±‚å‰ ç”¨äºåˆ¤æ–­ç¼“å­˜æ˜¯å¦è¿‡æœŸ 1.3ã€åå•†ç­–ç•¥ å‘ç”Ÿåœ¨è¯·æ±‚ä¸­ ç”¨äºåˆ¤æ–­ç¼“å­˜èµ„æºæ˜¯å¦æ›´æ–° æµè§ˆå™¨ä¸‹è®¿é—®èµ„æºçš„æ–¹å¼ä¸»è¦æœ‰ä»¥ä¸‹7ç§ï¼š (æ–°æ ‡ç­¾)åœ°å€æ å›è½¦ é“¾æ¥è·³è½¬ å‰è¿›ã€åé€€ ä»æ”¶è—æ æ‰“å¼€é“¾æ¥ (window.open)æ–°å¼€çª—å£ åˆ·æ–°ï¼ˆCommand + R / F5ï¼‰ å¼ºåˆ¶åˆ·æ–°ï¼ˆCommand + Shift + R / Ctrl + F5ï¼‰ 2ã€ç¼“å­˜åŸºç¡€ç¼“å­˜åˆåˆ†ä¸ºå¼ºç¼“å­˜å’Œå¼±ç¼“å­˜ï¼ˆåˆç§°ä¸ºåå•†ç¼“å­˜ï¼‰ï¼ŒåŒºåˆ«æ˜¯è·å–èµ„æºæ—¶æ˜¯å¦ä¼šå‘é€è¯·æ±‚ã€‚ 2.1ã€å¼ºç¼“å­˜ åŒ…æ‹¬ Expires å’Œ Cache-Control è¿‡æœŸç­–ç•¥ç”Ÿæ•ˆæ—¶åº”ç”¨çš„ç¼“å­˜ 2.2ã€å¼±ç¼“å­˜ åŒ…æ‹¬ Last-Modified å’Œ ETag åå•†ç­–ç•¥ååº”ç”¨çš„ç¼“å­˜ 2.3ã€HTTP ç›¸å…³å­—æ®µ2.3.1ã€Expiresï¼ˆ1.0ï¼‰ æŒ‡å®šç¼“å­˜çš„è¿‡æœŸæ—¶é—´ï¼Œä¸ºç»å¯¹æ—¶é—´ å“åº”å¤´å­—æ®µ å‚è€ƒæœ¬åœ°æ—¶é—´è¿›è¡Œæ¯”å¯¹ï¼Œåœ¨æŒ‡å®šæ—¶åˆ»åè¿‡æœŸ å› æ­¤ä¿®æ”¹æœ¬åœ°æ—¶é—´å°±ä¼šå¤±æ•ˆ 2.3.2ã€Cache-Control æŒ‡å®šèµ„æºçš„ç¼“å­˜æœºåˆ¶ åŒæ—¶åœ¨è¯·æ±‚å¤´å’Œå“åº”å¤´ä¸­è®¾å®š æ¶‰åŠå­˜å‚¨ç­–ç•¥ã€è¿‡æœŸç­–ç•¥ 2.3.2.1ã€cache-directive å¤§å°å†™ä¸æ•æ„Ÿ2.3.2.2ã€åœ¨è¯·æ±‚å¤´ä¸­çš„ max-age max-age=&lt;seconds&gt; å®¢æˆ·ç«¯ä¸æ¥å—æœ‰æ•ˆæ—¶é—´å¤§äºæŒ‡å®šæ—¶é—´çš„ç¼“å­˜ Chromeå’ŒFirefoxæµè§ˆå™¨ä¸‹çš„åˆ·æ–°æ“ä½œï¼ˆCommand+ R / F5ï¼‰å‡æ˜¯åœ¨è¯·æ±‚å¤´ä¸Šæ·»åŠ äº†max-age=0æŒ‡ä»¤ï¼Œè¡¨ç¤ºä¸ä½¿ç”¨å¼ºç¼“å­˜ï¼Œä½†å…è®¸åå•†ç¼“å­˜ 2.3.2.3ã€max-age ä¼˜å…ˆçº§é«˜äº Expires2.3.2.4ã€no-cache å’Œ no-store no-cacheï¼šè·³è¿‡å¼ºç¼“å­˜ï¼Œå¼ºåˆ¶è¿›å…¥åå•†ç­–ç•¥ no-storeï¼šä¸ç¼“å­˜ 2.3.3ã€Pragmaï¼ˆ1.0ï¼‰ é€šå¸¸è®¾ç½®ä¸ºPragma:no-cacheï¼Œä½œç”¨ä¸Cache-Control:no-cacheç›¸åŒ å½“åœ¨æµè§ˆå™¨è¿›è¡Œå¼ºåˆ·ï¼ˆComand + Shift + R / Ctrl + F5ï¼‰æˆ–åœ¨NetWorké¢æ¿å†…å‹¾é€‰ç¦ç”¨ç¼“å­˜ï¼ˆDisable Cachesï¼‰æ—¶ï¼Œä¼šè‡ªåŠ¨å¸¦ä¸ŠPragma:no-cacheå’ŒCache-Control:no-cacheï¼Œå¹¶ä¸”ä¸ä¼šå¸¦ä¸Šåå•†ç­–ç•¥ä¸­æ‰€æ¶‰åŠçš„ä¿¡æ¯ï¼ˆä¸‹é¢ä»‹ç»çš„If-Modified-Since/If-None-Matchï¼‰ã€‚è¿™æ—¶ä¸ä¼šä½¿ç”¨ä»»ä½•ç¼“å­˜ï¼Œé‡æ–°è·å–èµ„æº 2.3.4ã€Last-Modified / If-Modified-Since / If-Unmodified-Since Last-Modifiedç”¨äºæ ‡è®°è¯·æ±‚èµ„æºçš„æœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´ è¿”å›çš„èµ„æºå¸¦æœ‰Last-Modifiedæ ‡è¯†æ—¶ï¼Œå†æ¬¡è¯·æ±‚è¯¥èµ„æºï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å¸¦ä¸ŠIf-Modified-Sinceï¼Œå€¼ä¸ºè¿”å›çš„Last-Modifiedå€¼ è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨åï¼ŒæœåŠ¡å™¨è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœä»ä¸Šæ¬¡æ›´æ–°åæ²¡æœ‰å†æ›´æ–°ï¼Œåˆ™è¿”å›304ã€‚å¦‚æœæ›´æ–°äº†åˆ™é‡æ–°è¿”å› If-Modified-Since åªèƒ½ç”¨äº GETã€HEAD If-Unmodified-Since è¡¨ç¤ºèµ„æºæœªä¿®æ”¹åˆ™æ­£å¸¸æ‰§è¡Œæ›´æ–°ï¼Œå¦åˆ™è¿”å›412 2.3.5ã€ETag / If-Match / If-None-Match ETagæ˜¯è¯·æ±‚èµ„æºåœ¨æœåŠ¡å™¨çš„å”¯ä¸€æ ‡è¯†ï¼Œæµè§ˆå™¨å¯ä»¥æ ¹æ®ETagå€¼ç¼“å­˜æ•°æ® å†æ¬¡è¯·æ±‚æ—¶é€šè¿‡ If-None-Match æºå¸¦ä¸Šæ¬¡çš„ ETag å€¼ å¦‚æœå€¼ä¸å˜ï¼Œåˆ™è¿”å›304 å¦‚æœæ”¹å˜åˆ™è¿”å›æ–°çš„å†…å®¹ ETagçš„ä¼˜å…ˆçº§é«˜äºLast-Modified 3ã€ç¼“å­˜çš„ä¼˜ç¼ºç‚¹![image-20200721172953127](/Users/wuziyan/Library/Application Support/typora-user-images/image-20200721172953127.png) æµè§ˆå™¨ç¼“å­˜åº”ç”¨ç¨‹åºç¼“å­˜","categories":[],"tags":[{"name":"æµè§ˆå™¨","slug":"æµè§ˆå™¨","permalink":"http://ziiyan.github.io/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"},{"name":"æ€§èƒ½","slug":"æ€§èƒ½","permalink":"http://ziiyan.github.io/tags/%E6%80%A7%E8%83%BD/"}]},{"title":"Vue.js æ€§èƒ½ä¼˜åŒ–å®è·µ","slug":"é¦–å±åŠ è½½é€Ÿåº¦ä¼˜åŒ–","date":"2020-07-20T05:30:32.000Z","updated":"2020-07-28T10:47:40.262Z","comments":true,"path":"2020/07/20/é¦–å±åŠ è½½é€Ÿåº¦ä¼˜åŒ–/","link":"","permalink":"http://ziiyan.github.io/2020/07/20/%E9%A6%96%E5%B1%8F%E5%8A%A0%E8%BD%BD%E9%80%9F%E5%BA%A6%E4%BC%98%E5%8C%96/","excerpt":"","text":"1ã€webpack-bundle-analyzer å¯è§†åŒ–çš„æ–¹å¼åˆ†æ bundle æ‰“åŒ…æƒ…å†µ é’ˆå¯¹æ€§ä¼˜åŒ– INSTALL1npm install --save-dev webpack-bundle-analyzer USAGE12345678910// vue.config.jsconst BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin;module.exports = &#123; configureWebpack: &#123; plugins: [ new BundleAnalyzerPlugin() ... ] &#125;&#125; è¿™é‡Œä¸»è¦å‘ç°ä¸¤ä¸ªé—®é¢˜ï¼š 1.1ã€ç»„ä»¶æ›¿æ¢ä¸å®Œå…¨ Vuetify è§£å†³æ–¹æ¡ˆåˆ é™¤è¿™ä¸ªåŒ… 1.2ã€ç¬¬ä¸‰æ–¹åŒ…æœªæŒ‰éœ€å¼•å…¥ ant design lodash è§£å†³æ–¹æ¡ˆä½¿ç”¨ babel-plugin-import å°† js å’Œ css æŒ‰éœ€å¼•å…¥ åŸç† 2ã€gZip æœåŠ¡å™¨å‘é€å‹ç¼©åŒ…ï¼Œæµè§ˆå™¨è¿›è¡Œè§£å‹ ç›®çš„æ˜¯å‡å°‘èµ„æºä¼ è¾“æ—¶é—´ å®¢æˆ·ç«¯å‘é€è¯·æ±‚æ—¶ Accept-Encoding å­—æ®µè¯´æ˜è‡ªå·±æ¥å—å“ªäº›å‹ç¼©æ–¹æ³• æœåŠ¡å™¨å‘é€èµ„æºæ—¶ Content-Encoding å­—æ®µè¯´æ˜æ•°æ®çš„å‹ç¼©æ–¹æ³• å¦‚æœæœåŠ¡å™¨åœ¨æ¥æ”¶åˆ°è¯·æ±‚æ—¶æ‰è¿›è¡Œå‹ç¼©ï¼Œç„¶åå‹ç¼©å¥½å†å‘é€ï¼Œå‹ç¼©æ—¶é—´å°±ä¼šè¢«ç”¨æˆ·æ„ŸçŸ¥ è§£å†³æ–¹æ¡ˆä½¿ç”¨ compression-webpack-plugin åœ¨å‰ç«¯é¡¹ç›®æ‰“åŒ…æ—¶å°±è¿›è¡Œå‹ç¼© testï¼šæ­£åˆ™åŒ¹é…éœ€è¦å‹ç¼©çš„æ–‡ä»¶ thresholdï¼šè¶…è¿‡é˜ˆå€¼è¿›è¡Œå‹ç¼© deleteOriginalAssetsï¼šæ˜¯å¦åˆ é™¤åŸæ–‡ä»¶ è¿™è¾¹ç”±äºä¿ç•™äº†åŸæ–‡ä»¶åŠå‹ç¼©åŒ…ï¼Œæ‰€ä»¥æ‰“åŒ…å‡ºæ¥çš„ dist æ–‡ä»¶ä¼šæ¯”ä¹‹å‰å¤§ï¼Œä½†å¯¹ä¼ è¾“æ¥è¯´ä¸å½±å“ 3ã€ä»£ç åˆ†å‰² æŠŠä»£ç åˆ†ç¦»åˆ°ä¸åŒçš„ bundle ä¸­ï¼Œå¯ä»¥æŒ‰éœ€åŠ è½½æˆ–å¹¶è¡ŒåŠ è½½è¿™äº›æ–‡ä»¶ å¸¸ç”¨çš„ä»£ç åˆ†ç¦»æ–¹æ³•æœ‰ä¸‰ç§ï¼š å…¥å£èµ·ç‚¹ï¼šä½¿ç”¨ entry é…ç½®æ‰‹åŠ¨åœ°åˆ†ç¦»ä»£ç  é˜²æ­¢é‡å¤ï¼šä½¿ç”¨ SplitChunksPlugin å»é‡å’Œåˆ†ç¦» chunk åŠ¨æ€å¯¼å…¥ï¼šé€šè¿‡æ¨¡å—çš„å†…è”å‡½æ•°è°ƒç”¨æ¥åˆ†ç¦»ä»£ç  åœ¨ä»£ç ä¸­è‡ªåŠ¨å°†ä½¿ç”¨ import() åŠ è½½çš„æ¨¡å—åˆ†ç¦»æˆç‹¬ç«‹çš„åŒ… 3.1ã€æå–å…¬å…±ä»£ç  ç›¸åŒçš„èµ„æºè¢«é‡å¤åŠ è½½ï¼Œæµªè´¹ç”¨æˆ·çš„æµé‡å’ŒæœåŠ¡å™¨çš„æˆæœ¬ æ¯ä¸ªé¡µé¢éœ€è¦åŠ è½½çš„èµ„æºå¤ªå¤§ï¼Œå¯¼è‡´ç½‘é¡µé¦–å±åŠ è½½ç¼“æ…¢ï¼Œå½±å“ç”¨æˆ·ä½“éªŒ å°†å¤šä¸ªé¡µé¢çš„å…¬å…±ä»£ç æŠ½ç¦»æˆå•ç‹¬çš„æ–‡ä»¶ è§£å†³æ–¹æ¡ˆsplitChunks 3.2ã€Vue.js è·¯ç”±æ‡’åŠ è½½ æŠŠä¸åŒè·¯ç”±å¯¹åº”çš„ç»„ä»¶åˆ†å‰²æˆä¸åŒçš„ä»£ç å—ï¼Œå½“è·¯ç”±è¢«è®¿é—®çš„æ—¶å€™æ‰åŠ è½½å¯¹åº”ç»„ä»¶ ç»“åˆ Vue çš„å¼‚æ­¥ç»„ä»¶å’Œ Webpack çš„ä»£ç åˆ†å‰²åŠŸèƒ½ 4ã€é¢„æ¸²æŸ“5ã€æµè§ˆå™¨ç¼“å­˜6ã€CDN Content Delivery Networkï¼Œå†…å®¹åˆ†å‘ç½‘ç»œ ä½¿ç”¨æˆ·å¯å°±è¿‘å–å¾—æ‰€éœ€å†…å®¹ï¼Œè§£å†³Internetç½‘ç»œæ‹¥æŒ¤çš„çŠ¶å†µï¼Œæé«˜ç”¨æˆ·è®¿é—®ç½‘ç«™çš„å“åº”é€Ÿåº¦","categories":[],"tags":[{"name":"æµè§ˆå™¨","slug":"æµè§ˆå™¨","permalink":"http://ziiyan.github.io/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"},{"name":"æ€§èƒ½","slug":"æ€§èƒ½","permalink":"http://ziiyan.github.io/tags/%E6%80%A7%E8%83%BD/"},{"name":"ç½‘ç»œ","slug":"ç½‘ç»œ","permalink":"http://ziiyan.github.io/tags/%E7%BD%91%E7%BB%9C/"}]},{"title":"é¢è¯•å‡†å¤‡ï¼šåˆ·é¢ç»","slug":"é¢è¯•å‡†å¤‡ï¼šåˆ·é¢ç»","date":"2020-07-07T12:38:41.000Z","updated":"2020-08-13T02:42:04.797Z","comments":true,"path":"2020/07/07/é¢è¯•å‡†å¤‡ï¼šåˆ·é¢ç»/","link":"","permalink":"http://ziiyan.github.io/2020/07/07/%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%EF%BC%9A%E5%88%B7%E9%9D%A2%E7%BB%8F/","excerpt":"","text":"æœ€è¿‘æœ‰ç‚¹çœ‹ä¸è¿›å»ä¹¦ï¼Œåˆ°ç‰›å®¢æ‰¾é¢ç»ä¸Šé¢å¯¹é¢ç»å¤ä¹  ä¸»è¦æ˜¯ä¸ºäº†ç”¨è‡ªå·±çš„è¯­è¨€ç»„ç»‡ä¸€ä¸‹ï¼Œæ€•é¢è¯•äº†ç­”ä¸ä¸Šæ¥ HTML ç®€è¿°ä¸€ä¸‹ä½ å¯¹ HTML è¯­ä¹‰åŒ–çš„ç†è§£ ç”¨æ­£ç¡®çš„æ ‡ç­¾åšæ­£ç¡®çš„äº‹ ä¾¿äºæµè§ˆå™¨åŠæœç´¢å¼•æ“çš„è§£æï¼Œåˆ©äº SEO å¯è¯»æ€§ è§†è§‰éšœç¢çš„äººå¯èƒ½ä¼šä½¿ç”¨å±å¹•é˜…è¯»å™¨ï¼Œè¯­ä¹‰åŒ–çš„æ–‡æ¡£å¯¹å±å¹•é˜…è¯»å™¨æ›´å‹å¥½ å¼€å‘äººå‘˜çœ‹ä»£ç æ—¶ä¹Ÿæ›´å®¹æ˜“ç†è§£ç»“æ„ï¼Œåˆ©äºç»´æŠ¤ JS this ä½œç”¨åŸŸ æŒ‡å‘è¿è¡Œæ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸï¼Œä¸€èˆ¬æ˜¯è°ƒç”¨å‡½æ•°çš„å¯¹è±¡ å¦‚æœæ˜¯å…¨å±€å°±æ˜¯ Window å¦‚æœæ˜¯è¯¥å‡½æ•°æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼ŒthisæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªæ–°çš„å¯¹è±¡ ä½¿ç”¨ callã€applyã€bind å¯ä»¥æ”¹å˜ this çš„æŒ‡å‘ callã€apply åŒºåˆ«ï¼š ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯ this éœ€è¦æŒ‡å‘çš„å¯¹è±¡ call å‚æ•°ä¸€ä¸ªä¸ªä¼  apply ä¼ æ•°ç»„ bind åªæ˜¯ç»‘å®šä¸€ä¸‹ï¼Œä¸æ‰§è¡Œï¼Œè¦æ‰§è¡Œçš„è¯éœ€è¦å†åŠ æ‹¬å· ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ thisï¼Œæ ¹æ®ä½œç”¨åŸŸé“¾å»æ‰¾ å¦‚æœç®­å¤´å‡½æ•°ä½¿ç”¨ callã€applyã€bindï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¼šè¢«å¿½ç•¥ ä»€ä¹ˆæ ·çš„ const å€¼å¯ä»¥æ›´æ”¹ const åªè§„å®šäº†å˜é‡çš„å†…å®¹ä¸è¢«ä¿®æ”¹ å¦‚æœæ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆstringã€numberã€boolã€undefinedã€nullã€symbolï¼‰å°±ä¸èƒ½æ”¹ï¼Œå› ä¸ºç›´æ¥å­˜çš„æ•°æ® å¦‚æœæ˜¯å¤æ‚æ•°æ®ç±»å‹ï¼ˆObjectï¼‰å°±å¯ä»¥æ”¹ï¼Œå› ä¸ºä¿å­˜çš„æ˜¯å˜é‡çš„åœ°å€ï¼Œåœ°å€å†æŒ‡å‘çœŸå®çš„æ•°æ®ï¼Œæ”¹å˜çœŸå®æ•°æ®çš„æƒ…å†µä¸‹ï¼Œåœ°å€ä¸ä¼šå˜ äº‹ä»¶ äº‹ä»¶æ•è· å¤„äºç›®æ ‡é˜¶æ®µ äº‹ä»¶å†’æ³¡ Promise å‡½æ•°çš„æŸ¯é‡ŒåŒ– æŠŠæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›æ¥å—ä½™ä¸‹å‚æ•°çš„æ–°å‡½æ•° js åŸå‹é“¾ æ·±æµ…å¤åˆ¶ é—­åŒ… èƒ½å¤Ÿè¯»å–å…¶ä»–å‡½æ•°å˜é‡çš„å‡½æ•° new ä¸€ä¸ªå¯¹è±¡çš„è¿‡ç¨‹ åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ å°†å¯¹è±¡çš„åŸå‹æŒ‡å‘æ„é€ å‡½æ•° æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç  è¿”å›æ–°å¯¹è±¡ 123let obj = &#123;&#125;obj.__proto__ = Base.prototype;Base.call(obj); CSS å‚ç›´å±…ä¸­ æ€ä¹ˆç”¨ css ç”»ä¸€ä¸ªä¸‰è§’å½¢ ç›¸å¯¹å®šä½ ç»å¯¹å®šä½ flex-box æ€ä¹ˆç”¨ åœ£æ¯å¸ƒå±€ &lt;body&gt; &lt;div class=\"container\"&gt; &lt;div class=\"main\"&gt;main&lt;/div&gt; &lt;div class=\"left\"&gt;left&lt;/div&gt; &lt;div class=\"right\"&gt;right&lt;/div&gt; &lt;/div&gt; &lt;/body&gt; &lt;style&gt; .left, .main, .right { position: relative; min-height: 200px; float: left; } .left { width: 200px; background: lightpink; margin-left: -100%; left: -200px; } .right { width: 300px; background-color: lightgreen; margin-left: -300px; right: -300px; } .main { width: 100%; background-color: lightblue; } .container { padding: 0 300px 0 200px; } &lt;/style&gt; 1234567891011121314151617181920212223242526272829303132333435363738394041* åŒé£ç¿¼å¸ƒå±€ * &#96;&#96;&#96;html &lt;body&gt; &lt;div class&#x3D;&quot;container&quot;&gt; &lt;div class&#x3D;&quot;main&quot;&gt; &lt;div class&#x3D;&quot;inner&quot;&gt;content&lt;&#x2F;div&gt; &lt;&#x2F;div&gt; &lt;div class&#x3D;&quot;left&quot;&gt;left&lt;&#x2F;div&gt; &lt;div class&#x3D;&quot;right&quot;&gt;right&lt;&#x2F;div&gt; &lt;&#x2F;div&gt; &lt;&#x2F;body&gt; &lt;style&gt; .left, .main, .right &#123; min-height: 200px; float: left; &#125; .left &#123; width: 200px; background: lightpink; margin-left: -100%; &#125; .right &#123; width: 300px; background: lightgreen; margin-left: -300px; &#125; .main &#123; width: 100%; background: lightblue; &#125; .inner &#123; background: salmon; min-height: 200px; margin: 0 300px 0 200px; &#125; &lt;&#x2F;style&gt; Vue åŒå‘ç»‘å®šåŸç† vue-router å®ç°æ–¹å¼ vue å’Œ React çš„åŒºåˆ« mvvm çš„è®¾è®¡æ¨¡å¼ ViewModel åˆ†ç¦»è§†å›¾å’Œæ¨¡å‹ï¼ŒViewModel åªå…³å¿ƒæ•°æ®å’Œä¸šåŠ¡çš„å¤„ç† çˆ¶å­ç»„ä»¶çš„é€šä¿¡æœºåˆ¶ ç»„ä»¶åŒ–æ€æƒ³ é¡µé¢æ‡’åŠ è½½å‘å†™æ³• ç”Ÿå‘½å‘¨æœŸ æ•°æ®ç»“æ„ é˜Ÿåˆ—å’Œæ ˆçš„åŒºåˆ«ï¼Ÿç”¨æ ˆæ¥å®ç°é˜Ÿåˆ— é˜Ÿåˆ—æ˜¯å…ˆè¿›å…ˆå‡ºï¼Œç±»ä¼¼äºæ’é˜Ÿï¼›æ ˆçš„è¯æ˜¯å…ˆè¿›åå‡ºï¼Œå‡ºå…¥å£æ˜¯åŒä¸€ä¸ªï¼Œå…ˆè¿›çš„å…ƒç´ ä¼šè¢«å‹åœ¨ä¸‹é¢ å¯ä»¥ç”¨ä¸¤ä¸ªæ ˆï¼Œåœ¨å‡ºæ ˆçš„æ—¶å€™æŠŠå…ƒç´ éƒ½å…ˆæ”¾åˆ°å¦å¤–ä¸€ä¸ªæ ˆä¸­ï¼Œè¿™æ ·é¡ºåºå°±å¯¹äº† ç½‘ç»œ TCPã€UDPåŒºåˆ«ï¼ŸTCPå¦‚ä½•åšåˆ°åŒå·¥å¯é ä¼ è¾“ï¼ŸTCPé˜»å¡æ§åˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ TCP æ˜¯é¢å‘è¿æ¥çš„ï¼Œä¼ è¾“æ¯”è¾ƒå¯é ï¼›UDP æ˜¯ä¸å¯é ä¼ è¾“ï¼Œæ¯”è¾ƒé€‚ç”¨äºå®æ—¶åº”ç”¨ 302 å’Œ 304 çš„åŒºåˆ« http code çš„å«ä¹‰ HTTP 1.0/2.0 HTTPS HTTPçš„å‘å±• å¦‚ä½•ä¼˜é›…çš„è°ˆè®ºHTTP æµè§ˆå™¨ è·¨åŸŸ jsonp åŸç† ç”¨æˆ·è¾“å…¥ç½‘å€ï¼Œçœ‹åˆ°é¡µé¢çš„æµç¨‹ å­˜å‚¨ é¡¹ç›® é¡¹ç›®éš¾ç‚¹ ä¹‹å‰é¡¹ç›®æœ‰ä¸€ä¸ªæŠ½å±‰ç»„ä»¶ï¼Œæœ€ä¸‹é¢æœ‰æäº¤æŒ‰é’®ï¼Œå°±æ˜¯è¯´æŠ½å±‰ç»„ä»¶å†…çš„ä¿¡æ¯ç¼–è¾‘å®Œæˆåä¸€æ¬¡æ€§æäº¤ç»™åå°ã€‚ æŠ½å±‰ç»„ä»¶é‡Œæœ‰ä¸€ä¸ªæˆå‘˜åˆ—è¡¨ï¼Œæ˜¯åç«¯åˆ†é¡µçš„ï¼Œä¸€æ¬¡åªèƒ½æ‹¿åˆ°10æ¡æ•°æ®ï¼ŒåŒæ—¶åˆ—è¡¨æ¯è¡Œéƒ½æœ‰ç§»é™¤æŒ‰é’®ï¼Œå°±æ˜¯ç§»é™¤å•ä¸ªæˆå‘˜ã€‚æ ¹æ®åˆšæ‰è¯´çš„ï¼Œåœ¨ç‚¹å‡»æŠ½å±‰ç»„ä»¶çš„æäº¤æŒ‰é’®ä¹‹å‰ï¼Œè¿™ä¸ªç§»é™¤æ“ä½œè¿˜æ²¡æœ‰æäº¤ç»™åå°ã€‚ åŒæ—¶åˆ—è¡¨æ—è¾¹æœ‰ä¸€ä¸ªæ·»åŠ æˆå‘˜çš„æŒ‰é’®ï¼Œç‚¹å‡»ä¹‹åä¼šå‡ºç°ä¸€ä¸ªå¼¹çª—ï¼Œå¯ä»¥è¿›è¡Œæˆå‘˜çš„æœç´¢ï¼Œå°±æ˜¯æ ¹æ®æœç´¢æ¡†çš„è¾“å…¥è¿›è¡Œå®æ—¶çš„getè¯·æ±‚ï¼Œå½“ç„¶è¿™é‡Œç”¨é˜²æŠ–ï¼ˆdebounceï¼‰åšäº†ä¸€ç‚¹ç‚¹ä¼˜åŒ–ã€‚è¿™é‡Œçš„æœç´¢ç»“æœæ˜¯åŒ¹é…çš„æˆå‘˜åˆ—è¡¨ï¼ŒåŒæ—¶éœ€è¦å±•ç¤ºè¯¥æˆå‘˜æ˜¯å¦å·²åŠ å…¥å½“å‰ç»„ç»‡ï¼Œå¦‚æœå·²åŠ å…¥å½“ç„¶å°±ä¸èƒ½é€‰æ‹©äº†ï¼Œéœ€è¦ç¦æ­¢ç‚¹å‡»ã€‚è¿™é‡Œé€‰æ‹©å®Œæˆåï¼Œç‚¹å‡»å¼¹çª—çš„ç¡®å®šæŒ‰é’®ï¼Œéœ€è¦æŠŠåˆšåˆšé€‰æ‹©çš„äººæ·»åŠ åˆ°ä¸Šä¸€å±‚æŠ½å±‰ç»„ä»¶çš„æˆå‘˜åˆ—è¡¨ä¸­ã€‚å½“ç„¶è¿™ä¸ªæ·»åŠ æ“ä½œå’Œåˆšåˆšçš„ç§»é™¤ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œè¿˜æ²¡æœ‰æäº¤ç»™åå°ã€‚ æ•°æ®æµæ˜¯è¿™æ ·çš„ï¼Œæ‰“å¼€æŠ½å±‰ç»„ä»¶çš„æ—¶å€™ï¼Œä¼šè¯·æ±‚æˆå‘˜åˆ—è¡¨ç¬¬ä¸€é¡µçš„æ•°æ®ï¼Œæ·»åŠ å’Œç§»é™¤æˆå‘˜çš„æ“ä½œéƒ½æ˜¯å‰ç«¯ä¸´æ—¶çš„ï¼Œæ²¡æœ‰åŒæ­¥åˆ°åç«¯ï¼Œä½†åœ¨æ·»åŠ æˆå‘˜çš„å¼¹çª—é‡Œï¼Œæœç´¢å±•ç¤ºçš„æˆå‘˜çŠ¶æ€æ˜¯å’Œåç«¯å®æ—¶åŒæ­¥çš„ã€‚ è¿™ç§å‰åçš„æ•°æ®ä¸ç»Ÿä¸€çš„åœºæ™¯ä¼šå¸¦æ¥å¾ˆå¤šé—®é¢˜ åˆ—è¡¨åˆ†é¡µçš„é—®é¢˜ã€‚æ¯”å¦‚æˆ‘æœ‰20æ¡æ•°æ®ï¼Œç¬¬ä¸€é¡µ1-10ï¼Œç¬¬äºŒé¡µ11-20ï¼Œæˆ‘åœ¨ç¬¬ä¸€é¡µç§»é™¤äº†ç¼–å·1çš„æ•°æ®ï¼Œæ­¤æ—¶å‰ç«¯ç¬¬ä¸€é¡µ2-11ï¼Œç¬¬äºŒé¡µ12-20ï¼Œ åç«¯æ•°æ®ä¸å˜ï¼Œå‰åçš„æ•°æ®å·²ç»ä¸ç»Ÿä¸€äº†ï¼Œå…·ä½“åº”è¯¥æ€ä¹ˆå±•ç¤ºå°±æ˜¯ä¸€ä¸ªå¤§é—®é¢˜ã€‚è¿™é‡Œæˆ‘ç»´æŠ¤ä¸€ä¸ªå·²åˆ é™¤åˆ—è¡¨ï¼ŒæŠŠåˆšåˆšé‚£ä¸ªç¼–å·1è®°å½•ä¸‹æ¥ï¼Œç¬¬ä¸€é¡µå°±åªå±•ç¤º9æ¡æ•°æ®ï¼Œç¬¬äºŒé¡µè¿˜æ˜¯10æ¡ï¼Œå½“ç”¨æˆ·ä»ç¬¬äºŒé¡µåˆ‡æ¢å›ç¬¬ä¸€é¡µçš„æ—¶å€™ï¼Œå†æŠŠç¼–å·1ç­›é€‰å‡ºæ¥ï¼Œä¸å±•ç¤ºåœ¨ç•Œé¢ä¸Šã€‚å½“ç„¶è¿™ç§æƒ…å†µä¸‹ï¼Œæ¯é¡µçš„é•¿åº¦å°±ä¸ä¸€æ ·äº†ï¼Œæ›´æç«¯çš„æŠŠæŸä¸€é¡µçš„æ•°æ®å…¨ç§»é™¤çš„è¯ï¼Œå°±ç¿»è½¦äº† ç‚¹å‡»ç§»é™¤åï¼Œå¼¹çª—é‡Œçš„æœç´¢ç»“æœè¿˜æ˜¯å·²åŠ å…¥ã€‚è¿™é‡Œå’Œåˆšæ‰æ€è·¯ä¹Ÿæ˜¯ä¸€æ ·ï¼Œè·å–åˆ°æœç´¢ç»“æœä¹‹åå†ç­›é€‰ï¼Œå¦‚æœæ˜¯åœ¨å·²åˆ é™¤åˆ—è¡¨é‡Œçš„ï¼Œä¿®æ”¹ä¸€ä¸‹æ˜¯å¦å­˜åœ¨çš„å­—æ®µå°±è¡Œã€‚ å¼¹çª—é€‰æ‹©ç¡®å®šåï¼Œéœ€è¦æ·»åŠ æ–°é€‰æ‹©çš„æˆå‘˜åˆ°åˆ—è¡¨é‡Œï¼Œè¿™é‡Œç»´æŠ¤ä¸€ä¸ªå·²æ·»åŠ åˆ—è¡¨ï¼Œä¸´æ—¶æ‹¼æ¥åœ¨å½“å‰é¡µåé¢ï¼Œå½“ç„¶è¿™ä¹Ÿä¼šå¯¼è‡´åˆ—è¡¨é•¿åº¦ä¸ä¸€çš„æƒ…å†µã€‚è¿™è¾¹è¿˜è¦åŒæ—¶æ¯”è¾ƒä¸€ä¸‹å·²åˆ é™¤åˆ—è¡¨ï¼Œå¦‚æœæŸä¸ªæˆå‘˜åŒæ—¶å­˜åœ¨ç§»é™¤å’Œæ·»åŠ é‡Œï¼Œè¯´æ˜å®ƒçŠ¶æ€å’Œåç«¯æ˜¯åŒæ­¥çš„ï¼Œå¯ä»¥åŒæ—¶ä»ä¸¤ä¸ªåˆ—è¡¨ä¸­ç§»é™¤äº†ï¼Œä¸éœ€è¦ç‰¹åˆ¤ã€‚è¿™è¾¹ç»„ä»¶é—´ä¼ å€¼ç”¨çš„æ˜¯ props å’Œ emitã€‚ æœ€åæŠ½å±‰æäº¤çš„æ—¶å€™åªè¦æäº¤å·²åˆ é™¤åˆ—è¡¨å’Œå·²æ·»åŠ åˆ—è¡¨å°±è¡Œäº†ã€‚ æˆ‘è§‰å¾—è¿™ç§å¤„ç†æ–¹å¼è¿˜æ˜¯æœ‰éå¸¸å¤š bug ï¼Œè€ƒè™‘åˆ°ä¸šåŠ¡åœºæ™¯ï¼Œå’Œäº§å“å•†é‡ä¹‹åè¿˜ç®—å¯ä»¥æ¥å—ï¼Œå°±å…ˆè¿™æ ·åšäº†ã€‚ æ€ä¹ˆä¼˜åŒ–é¡¹ç›® æ‰‹æ’•ä»£ç  æå–urlä¸­searchéƒ¨åˆ†å‚æ•°ï¼Œhttps://www.aliexpress.com/?a=1&amp;b=2 12345678910function fn (str) &#123; let arr = str.split('?')[1]; let params = arr.split('&amp;'); let ans = [] for (item of params) &#123; let param = item.split('='); ans.push(&#123;key: param[0], value: param[1]&#125;) &#125; return ans;&#125; å†™ä¸€ä¸ªç±»Personï¼Œ æ‹¥æœ‰å±æ€§ageå’Œnameï¼Œæ‹¥æœ‰æ–¹æ³•say(something)ï¼Œ å†å†™ä¸€ä¸ªç±»Supermanï¼Œç»§æ‰¿Personï¼Œæ‹¥æœ‰è‡ªå·±çš„å±æ€§powerï¼Œæ‹¥æœ‰è‡ªå·±çš„æ–¹æ³•fly(height) 123456789101112131415161718class Person &#123; constructor(age, name) &#123; this.age = age; this.name = name; &#125; say(something) &#123; console.log(something) &#125;&#125;class Superman extends Person &#123; constructor(power) &#123; super(); this.power = power; &#125; fly(height) &#123; console.log(`fly to $&#123;height&#125;`) &#125;&#125; Given a sorted array nums, remove the duplicates in-place such that each element appear only once and return the new length. Do not allocate extra space for another array, you must do this by modifying the input array in-place with O(1) extra memory. 123456789function moveDup(params) &#123; for (let i = 1; i &lt; params.length; i++) &#123; if (params[i] === params[i-1]) &#123; params.splice(i, 1) &#125; &#125; return params&#125;console.log(moveDup([1, 2, 3, 3, 4, 5, 5])) quickSort 12345678910111213141516171819202122function quickSort(arr, left = 0, right = arr.length - 1) &#123; if (left &gt;= right) &#123; return &#125; const priv = arr[right]; let i = left; let j = right; while (i &lt; j) &#123; while (i &lt; j &amp;&amp; arr[i] &lt; priv) &#123; i++; &#125; arr[j] = arr[i]; while (j &gt; i &amp;&amp; arr[j] &gt; priv) &#123; j--; &#125; arr[i] = arr[j]; &#125; arr[j] = priv; quickSort(arr, left, j-1); quickSort(arr, j+1, right); return arr;&#125; debounce 123456789function debounce(fn, ms) &#123; let timer = null; return function () &#123; clearTimeout(timer); timer = setTimeout(()=&gt;&#123; fn.apply(this, arguments); &#125;, ms); &#125;&#125; throttle 1234567891011function throttle(fn, ms) &#123; let flag = true; return function() &#123; if (!flag) return; flag = false; setTimeout(()=&gt;&#123; fn.apply(this, arguments); flag = true &#125;, ms) &#125;&#125;","categories":[],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://ziiyan.github.io/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"Webpakc ä»åŸç†åˆ°å®æˆ˜","slug":"Webpakc ä»åŸç†åˆ°å®æˆ˜","date":"2020-07-01T14:48:02.000Z","updated":"2020-07-27T09:19:51.167Z","comments":true,"path":"2020/07/01/Webpakc ä»åŸç†åˆ°å®æˆ˜/","link":"","permalink":"http://ziiyan.github.io/2020/07/01/Webpakc%20%E4%BB%8E%E5%8E%9F%E7%90%86%E5%88%B0%E5%AE%9E%E6%88%98/","excerpt":"","text":"Webpakc ä»åŸç†åˆ°å®æˆ˜ ç†è§£å‰ç«¯æ¨¡å—åŒ– å‘å±•å†ç¨‹ ä¸åŒæ¨¡å—åŒ–æ–¹æ¡ˆçš„å®ç° ç†è§£ webpack æ‰“åŒ…æ ¸å¿ƒæ€è·¯ ç†è§£ loader &amp; plugin ç®€ä»‹ webpack æ˜¯ä¸€ä¸ªç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å— æ‰“åŒ…å™¨ é»˜è®¤åªå¤„ç† Javascript é€»è¾‘å¤šã€æ–‡ä»¶å¤šï¼Œé¡¹ç›®çš„å¤æ‚åº¦æé«˜ï¼Œæ‰€ä»¥éœ€è¦æ‰“åŒ… æ‰“åŒ…ä¹‹å¤–ï¼Œè¿˜æœ‰â€œç¿»è¯‘â€åŠŸèƒ½ â€”â€” loader åŠ ä¸Šä¸€äº›å°åŠ¨ä½œ â€”â€” plugin å¯æ’æ‹” åŸç†ä¸èƒŒæ™¯ç†è§£å‰ç«¯æ¨¡å—åŒ–ä½œç”¨åŸŸè¿è¡Œæ—¶ - å˜é‡ å‡½æ•° å¯¹è±¡ å¯è®¿é—®æ€§ ä½œç”¨åŸŸå†³å®šäº†ä»£ç ä¸­å˜é‡å’Œå…¶å®ƒèµ„æºçš„å¯è§æ€§ å‘½åç©ºé—´æ¨¡å—åŒ–çš„ä¼˜ç‚¹ ä½œç”¨åŸŸå°è£… é‡ç”¨æ€§ è§£é™¤è€¦åˆ æ¨¡å—åŒ–æ–¹æ¡ˆè¿›åŒ–å²AMD Asynchronous Module Definition 12345define('getSum', ['math'], function (math) &#123; return function (a, b) &#123; console.log('sum: ' + math.sum(a, b)); &#125;&#125;); COMMONJS æœåŠ¡ç«¯æ¨¡å—æ ‡å‡†ï¼Œä¸æ˜¯ç”¨äºæµè§ˆå™¨ç¯å¢ƒ nodejs é‡‡ç”¨å¹¶å®ç°éƒ¨åˆ†è§„èŒƒ 1234const math = require('./math');exports.getSum = function (a, b) &#123; return a + b;&#125; ES6 MOUDLE Javascript åŸç”Ÿæ”¯æŒ 1234import math from './math';export function sum(a, b) &#123; return a + b;&#125; Gulpã€Grunt â€”â€” è‡ªåŠ¨åŒ–æ„å»ºå·¥å…· æ‰“åŒ…åªæ˜¯è‡ªåŠ¨åŒ–æ„å»ºä¸­çš„ä¸€éƒ¨åˆ† webpack ä¸“é—¨é’ˆå¯¹æ‰“åŒ…ï¼Œä»£è¡¨ç€æ¨¡å—åŒ–çš„æµè¡Œ webpack çš„æ‰“åŒ…è¿‡ç¨‹ ä»å…¥å£æ–‡ä»¶å¼€å§‹ï¼Œåˆ†ææ•´ä¸ªåº”ç”¨çš„ä¾èµ–æ ‘ å°†æ¯ä¸ªä¾èµ–æ¨¡å—åŒ…è£…èµ·æ¥ï¼Œæ”¾åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ç­‰å¾…è°ƒç”¨ å®ç°æ¨¡å—åŠ è½½çš„æ–¹æ³•ï¼Œå¹¶æŠŠå®ƒæ”¾åˆ°æ¨¡å—æ‰§è¡Œçš„ç¯å¢ƒä¸­ï¼Œç¡®ä¿æ¨¡å—é—´å¯ä»¥äº’ç›¸è°ƒç”¨ æŠŠæ‰§è¡Œå…¥å£æ–‡ä»¶çš„é€»è¾‘æ”¾åœ¨ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼ä¸­ï¼Œå¹¶ç«‹å³æ‰§è¡Œè¿™ä¸ªå‡½æ•° å®æˆ˜é…ç½®å¼€å‘ç¯å¢ƒnpm ä¸åŒ…ç®¡ç†å™¨ ä¾èµ– â€“save â€“dev ç‰ˆæœ¬å· ^version ä¸­ç‰ˆæœ¬å’Œå°ç‰ˆæœ¬ ^1.0.1 -&gt; 1.x.x ä¸­å–æœ€æ–° ~version å°ç‰ˆæœ¬ ~1.0.1 -&gt; 1.0.x ä¸­å–æœ€æ–° version: ç‰¹å®šç‰ˆæœ¬ scripts npm install è¿‡ç¨‹ æ£€æŸ¥ .npmrc æ–‡ä»¶ï¼šä¼˜å…ˆçº§ä¸ºï¼šé¡¹ç›®çº§çš„ .npmrc æ–‡ä»¶ &gt; ç”¨æˆ·çº§çš„ .npmrc æ–‡ä»¶&gt; å…¨å±€çº§çš„ .npmrc æ–‡ä»¶ &gt; npm å†…ç½®çš„ .npmrc æ–‡ä»¶ æ£€æŸ¥é¡¹ç›®ä¸­æœ‰æ—  lock æ–‡ä»¶ã€‚ æ—  lock æ–‡ä»¶ï¼š ä» npm è¿œç¨‹ä»“åº“è·å–åŒ…ä¿¡æ¯ æ ¹æ® package.json æ„å»ºä¾èµ–æ ‘ï¼Œæ„å»ºè¿‡ç¨‹ï¼š æ„å»ºä¾èµ–æ ‘æ—¶ï¼Œä¸ç®¡å…¶æ˜¯ç›´æ¥ä¾èµ–è¿˜æ˜¯å­ä¾èµ–çš„ä¾èµ–ï¼Œä¼˜å…ˆå°†å…¶æ”¾ç½®åœ¨ node_modules æ ¹ç›®å½•ã€‚ å½“é‡åˆ°ç›¸åŒæ¨¡å—æ—¶ï¼Œåˆ¤æ–­å·²æ”¾ç½®åœ¨ä¾èµ–æ ‘çš„æ¨¡å—ç‰ˆæœ¬æ˜¯å¦ç¬¦åˆæ–°æ¨¡å—çš„ç‰ˆæœ¬èŒƒå›´ï¼Œå¦‚æœç¬¦åˆåˆ™è·³è¿‡ï¼Œä¸ç¬¦åˆåˆ™åœ¨å½“å‰æ¨¡å—çš„ node_modules ä¸‹æ”¾ç½®è¯¥æ¨¡å—ã€‚ æ³¨æ„è¿™ä¸€æ­¥åªæ˜¯ç¡®å®šé€»è¾‘ä¸Šçš„ä¾èµ–æ ‘ï¼Œå¹¶éçœŸæ­£çš„å®‰è£…ï¼Œåé¢ä¼šæ ¹æ®è¿™ä¸ªä¾èµ–ç»“æ„å»ä¸‹è½½æˆ–æ‹¿åˆ°ç¼“å­˜ä¸­çš„ä¾èµ–åŒ… åœ¨ç¼“å­˜ä¸­ä¾æ¬¡æŸ¥æ‰¾ä¾èµ–æ ‘ä¸­çš„æ¯ä¸ªåŒ… ä¸å­˜åœ¨ç¼“å­˜ï¼š ä» npm è¿œç¨‹ä»“åº“ä¸‹è½½åŒ… æ ¡éªŒåŒ…çš„å®Œæ•´æ€§ æ ¡éªŒä¸é€šè¿‡ï¼š é‡æ–°ä¸‹è½½ æ ¡éªŒé€šè¿‡ï¼š å°†ä¸‹è½½çš„åŒ…å¤åˆ¶åˆ° npm ç¼“å­˜ç›®å½• å°†ä¸‹è½½çš„åŒ…æŒ‰ç…§ä¾èµ–ç»“æ„è§£å‹åˆ° node_modules å­˜åœ¨ç¼“å­˜ï¼šå°†ç¼“å­˜æŒ‰ç…§ä¾èµ–ç»“æ„è§£å‹åˆ° node_modules å°†åŒ…è§£å‹åˆ° node_modules ç”Ÿæˆ lock æ–‡ä»¶ æœ‰ lock æ–‡ä»¶ï¼š æ£€æŸ¥ package.json ä¸­çš„ä¾èµ–ç‰ˆæœ¬æ˜¯å¦å’Œ package-lock.json ä¸­çš„ä¾èµ–æœ‰å†²çªã€‚ å¦‚æœæ²¡æœ‰å†²çªï¼Œç›´æ¥è·³è¿‡è·å–åŒ…ä¿¡æ¯ã€æ„å»ºä¾èµ–æ ‘è¿‡ç¨‹ï¼Œå¼€å§‹åœ¨ç¼“å­˜ä¸­æŸ¥æ‰¾åŒ…ä¿¡æ¯ï¼Œåç»­è¿‡ç¨‹ç›¸åŒ æ„å»ºå·¥ç¨‹æ ¸å¿ƒç‰¹æ€§loader å’Œ pluginwebpack ä¸å‰ç«¯æ€§èƒ½webpack æ€§èƒ½è°ƒä¼˜æ‰“åŒ…ç»“æœä¼˜åŒ– BundleAnalyZerPlugin æ„å»ºè¿‡ç¨‹ä¼˜åŒ– åˆ©ç”¨å¤šçº¿ç¨‹ é¢„ç¼–è¯‘ç¼“å­˜Tree-Shakingæ€»ç»“ä¸æ­¢ â€œpackâ€","categories":[],"tags":[{"name":"Webpack","slug":"Webpack","permalink":"http://ziiyan.github.io/tags/Webpack/"}]},{"title":"å›è°ƒåœ°ç‹± Callback Hell","slug":"å›è°ƒåœ°ç‹±-callbackhell","date":"2020-06-15T02:59:02.000Z","updated":"2020-06-15T02:59:31.925Z","comments":true,"path":"2020/06/15/å›è°ƒåœ°ç‹±-callbackhell/","link":"","permalink":"http://ziiyan.github.io/2020/06/15/%E5%9B%9E%E8%B0%83%E5%9C%B0%E7%8B%B1-callbackhell/","excerpt":"","text":"http://callbackhell.com/","categories":[],"tags":[{"name":"ç¿»è¯‘","slug":"ç¿»è¯‘","permalink":"http://ziiyan.github.io/tags/%E7%BF%BB%E8%AF%91/"},{"name":"ç²¾è¯»","slug":"ç²¾è¯»","permalink":"http://ziiyan.github.io/tags/%E7%B2%BE%E8%AF%BB/"}]},{"title":"MDN-JavaScript","slug":"MDN-JavaScript","date":"2020-06-09T15:35:41.000Z","updated":"2020-06-28T03:18:29.319Z","comments":true,"path":"2020/06/09/MDN-JavaScript/","link":"","permalink":"http://ziiyan.github.io/2020/06/09/MDN-JavaScript/","excerpt":"","text":"æ•°æ®ç±»å‹å­—ç¬¦ä¸² indexOf æŸ¥æ‰¾å­ä¸² slice åˆ†ç‰‡ replace æ›¿æ¢ split å­—ç¬¦ä¸²è½¬æ•°ç»„ æ•°ç»„ join æ•°ç»„è½¬å­—ç¬¦ä¸²ï¼ˆæŒ‡å®šåˆ†éš”ç¬¦ï¼‰ toString æ•°ç»„è½¬å­—ç¬¦ä¸²ï¼ˆé€—å·åˆ†éš”ï¼‰ äº‹ä»¶åŸå‹_proto_ åœ¨javascriptä¸­ï¼Œå‡½æ•°å¯ä»¥æœ‰å±æ€§ï¼Œæ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§å«ä½œåŸå‹ åŸå‹é“¾ä¸­çš„æ–¹æ³•å’Œå±æ€§æ²¡æœ‰è¢«å¤åˆ¶åˆ°å…¶ä»–å¯¹è±¡â€”â€”å®ƒä»¬è¢«è®¿é—®éœ€è¦é€šè¿‡å‰é¢æ‰€è¯´çš„â€œåŸå‹é“¾â€çš„æ–¹å¼ æ²¡æœ‰å®˜æ–¹çš„æ–¹æ³•ç”¨äºç›´æ¥è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„åŸå‹å¯¹è±¡â€”â€”åŸå‹é“¾ä¸­çš„â€œè¿æ¥â€è¢«å®šä¹‰åœ¨ä¸€ä¸ªå†…éƒ¨å±æ€§ä¸­ï¼Œåœ¨ JavaScript è¯­è¨€æ ‡å‡†ä¸­ç”¨ [[prototype]] è¡¨ç¤ºï¼ˆå‚è§ ECMAScriptï¼‰ã€‚ç„¶è€Œï¼Œå¤§å¤šæ•°ç°ä»£æµè§ˆå™¨è¿˜æ˜¯æä¾›äº†ä¸€ä¸ªåä¸º __proto__ ï¼ˆå‰åå„æœ‰2ä¸ªä¸‹åˆ’çº¿ï¼‰çš„å±æ€§ï¼Œå…¶åŒ…å«äº†å¯¹è±¡çš„åŸå‹ prototype prototype å±æ€§çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬å¸Œæœ›è¢«åŸå‹é“¾ä¸‹æ¸¸çš„å¯¹è±¡ç»§æ‰¿çš„å±æ€§å’Œæ–¹æ³•ï¼Œéƒ½è¢«å‚¨å­˜åœ¨å…¶ä¸­ ä¸åœ¨ prototype å¯¹è±¡å†…çš„æˆå‘˜ï¼Œä¸ä¼šè¢«â€œå¯¹è±¡å®ä¾‹â€æˆ–â€œç»§æ‰¿è‡ª Object() çš„å¯¹è±¡ç±»å‹â€æ‰€ç»§æ‰¿ è¿™äº›æ–¹æ³•/å±æ€§ä»…èƒ½è¢« Object() æ„é€ å™¨è‡ªèº«ä½¿ç”¨ 123person = function () &#123;&#125;person1 = new function()Person1.__proto__ === person.prototype constructor æ¯ä¸ªå®ä¾‹å¯¹è±¡éƒ½ä»åŸå‹ä¸­ç»§æ‰¿äº†ä¸€ä¸ªconstructorå±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘äº†ç”¨äºæ„é€ æ­¤å®ä¾‹å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼ˆå¯ä»¥ç”¨æ¥ newï¼‰ 123456person = function () &#123;&#125;person1 = new function()person1.constructor === person// new function() &lt;=&gt; new person1.constructor()person1.constructor.name// \"person\" åŸå‹å¼ç»§æ‰¿123456789101112function Person(first, last, age, gender, interests) &#123; this.name = &#123; first, last &#125;; this.age = age; this.gender = gender; this.interests = interests;&#125;;Person.prototype.greeting = function() &#123; alert('Hi! I\\'m ' + this.name.first + '.');&#125;; 12345678function Teacher(first, last, age, gender, interests, subject) &#123; Person.call(this, first, last, age, gender, interests); this.subject = subject;&#125;Teacher.prototype = Object.create(Person.prototype);Teacher.prototype.constructor = Teacher; å½“æˆ‘ä»¬è¾“å…¥ç±»ä¼¼var person1=new Person(...)æ¥æ„é€ å¯¹è±¡æ—¶ï¼ŒJavaScriptå®é™…ä¸Šå‚è€ƒçš„æ˜¯Person.prototypeæŒ‡å‘çš„å¯¹è±¡æ¥ç”Ÿæˆperson1ã€‚ å¦ä¸€æ–¹é¢ï¼ŒPerson()å‡½æ•°æ˜¯Person.prototypeçš„æ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´Person===Person.prototype.constructor å§”æ‰˜ å§”æ‰˜ - ç‰¹æ®Šçš„å¯¹è±¡å°†åŠŸèƒ½å§”æ‰˜ç»™é€šç”¨çš„å¯¹è±¡ç±»å‹å®Œæˆ è€ƒè™‘åˆ°JavaScriptçš„å·¥ä½œæ–¹å¼ï¼Œç”±äºåŸå‹é“¾ç­‰ç‰¹æ€§çš„å­˜åœ¨ï¼Œåœ¨ä¸åŒå¯¹è±¡ä¹‹é—´åŠŸèƒ½çš„å…±äº«é€šå¸¸è¢«å«åš å§”æ‰˜ - ç‰¹æ®Šçš„å¯¹è±¡å°†åŠŸèƒ½å§”æ‰˜ç»™é€šç”¨çš„å¯¹è±¡ç±»å‹å®Œæˆã€‚è¿™ä¹Ÿè®¸æ¯”å°†å…¶ç§°ä¹‹ä¸ºç»§æ‰¿æ›´ä¸ºè´´åˆ‡ï¼Œå› ä¸ºâ€œè¢«ç»§æ‰¿â€äº†çš„åŠŸèƒ½å¹¶æ²¡æœ‰è¢«æ‹·è´åˆ°æ­£åœ¨â€œè¿›è¡Œç»§æ‰¿â€çš„å¯¹è±¡ä¸­ï¼Œç›¸åå®ƒä»å­˜åœ¨äºé€šç”¨çš„å¯¹è±¡ä¸­ã€‚ å¼‚æ­¥çº¿ç¨‹ ä¸€ä¸ªçº¿ç¨‹æ˜¯ä¸€ä¸ªåŸºæœ¬çš„å¤„ç†è¿‡ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹ä¸€æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ ç°åœ¨çš„è®¡ç®—æœºå¤§éƒ½æœ‰å¤šä¸ªå†…æ ¸ï¼ˆcoreï¼‰ï¼Œå› æ­¤å¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ æ”¯æŒå¤šçº¿ç¨‹çš„ç¼–ç¨‹è¯­è¨€å¯ä»¥ä½¿ç”¨è®¡ç®—æœºçš„å¤šä¸ªå†…æ ¸ï¼ŒåŒæ—¶å®Œæˆå¤šä¸ªä»»åŠ¡ JavaScript æ˜¯å•çº¿ç¨‹çš„ å³ä½¿æœ‰å¤šä¸ªå†…æ ¸ï¼Œä¹Ÿåªèƒ½åœ¨å•ä¸€çº¿ç¨‹ä¸Šè¿è¡Œå¤šä¸ªä»»åŠ¡ï¼Œç§°ä¸ºä¸»çº¿ç¨‹ï¼ˆmain threadï¼‰ å¼‚æ­¥ä»£ç Web workers é€šè¿‡ Web workers å¯ä»¥æŠŠä¸€äº›ä»»åŠ¡äº¤ç»™ä¸€ä¸ªåä¸º worker çš„å•ç‹¬çš„çº¿ç¨‹ ç”¨ä¸€ä¸ª workeræ¥è¿è¡Œä¸€ä¸ªè€—æ—¶çš„ä»»åŠ¡ï¼Œä¸»çº¿ç¨‹å°±å¯ä»¥å¤„ç†ç”¨æˆ·çš„äº¤äº’ï¼ˆé¿å…äº†é˜»å¡ï¼‰ web workers ä¸èƒ½è®¿é—® DOM Promise Promises fetch ç°ä»£ç‰ˆçš„ï¼Œæ›´é«˜æ•ˆçš„ XMLHttpRequest äº‹ä»¶é˜Ÿåˆ— åƒpromiseè¿™æ ·çš„å¼‚æ­¥æ“ä½œè¢«æ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œäº‹ä»¶é˜Ÿåˆ—åœ¨ä¸»çº¿ç¨‹å®Œæˆå¤„ç†åè¿è¡Œï¼Œè¿™æ ·å®ƒä»¬å°±ä¸ä¼šé˜»æ­¢åç»­JavaScriptä»£ç çš„è¿è¡Œã€‚æ’é˜Ÿæ“ä½œå°†å°½å¿«å®Œæˆï¼Œç„¶åå°†ç»“æœè¿”å›åˆ°JavaScriptç¯å¢ƒã€‚ é—´éš” setTimeout() åœ¨æŒ‡å®šçš„æ—¶é—´åæ‰§è¡Œä¸€æ®µä»£ç  setInterval() ä»¥å›ºå®šçš„æ—¶é—´é—´éš”ï¼Œé‡å¤è¿è¡Œä¸€æ®µä»£ç  1234567let i = 1;setTimeout(function run() &#123; console.log(i); i++; setTimeout(run, 100);&#125;, 100); 123456let i = 1;setInterval(function run() &#123; console.log(i); i++&#125;, 100); åŒºåˆ«ï¼š é€’å½’ setTimeout() ä¿è¯æ‰§è¡Œä¹‹é—´çš„å»¶è¿Ÿç›¸åŒï¼Œä¾‹å¦‚åœ¨ä¸Šè¿°æƒ…å†µä¸‹ä¸º100msã€‚ ä»£ç å°†è¿è¡Œï¼Œç„¶ååœ¨å®ƒå†æ¬¡è¿è¡Œä¹‹å‰ç­‰å¾…100msï¼Œå› æ­¤æ— è®ºä»£ç è¿è¡Œå¤šé•¿æ—¶é—´ï¼Œé—´éš”éƒ½æ˜¯ç›¸åŒçš„ã€‚ ä½¿ç”¨ setInterval() çš„ç¤ºä¾‹æœ‰äº›ä¸åŒã€‚ æˆ‘ä»¬é€‰æ‹©çš„é—´éš”åŒ…æ‹¬æ‰§è¡Œæˆ‘ä»¬æƒ³è¦è¿è¡Œçš„ä»£ç æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚å‡è®¾ä»£ç éœ€è¦40æ¯«ç§’æ‰èƒ½è¿è¡Œ - ç„¶åé—´éš”æœ€ç»ˆåªæœ‰60æ¯«ç§’ã€‚ å½“é€’å½’ä½¿ç”¨ setTimeout() æ—¶ï¼Œæ¯æ¬¡è¿­ä»£éƒ½å¯ä»¥åœ¨è¿è¡Œä¸‹ä¸€æ¬¡è¿­ä»£ä¹‹å‰è®¡ç®—ä¸åŒçš„å»¶è¿Ÿã€‚ æ¢å¥è¯è¯´ï¼Œç¬¬äºŒä¸ªå‚æ•°çš„å€¼å¯ä»¥æŒ‡å®šåœ¨å†æ¬¡è¿è¡Œä»£ç ä¹‹å‰ç­‰å¾…çš„ä¸åŒæ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚ å½“ä½ çš„ä»£ç æœ‰å¯èƒ½æ¯”ä½ åˆ†é…çš„æ—¶é—´é—´éš”ï¼ŒèŠ±è´¹æ›´é•¿æ—¶é—´è¿è¡Œæ—¶ï¼Œæœ€å¥½ä½¿ç”¨é€’å½’çš„ setTimeout() - è¿™å°†ä½¿æ‰§è¡Œä¹‹é—´çš„æ—¶é—´é—´éš”ä¿æŒä¸å˜ï¼Œæ— è®ºä»£ç æ‰§è¡Œå¤šé•¿æ—¶é—´ï¼Œä½ ä¸ä¼šå¾—åˆ°é”™è¯¯ã€‚ requestAnimationFrame() åœ¨æµè§ˆå™¨ä¸‹ä¸€æ¬¡é‡æ–°ç»˜åˆ¶æ˜¾ç¤ºä¹‹å‰æ‰§è¡ŒæŒ‡å®šçš„ä»£ç å—ï¼Œä»è€Œå…è®¸åŠ¨ç”»åœ¨é€‚å½“çš„å¸§ç‡ä¸‹è¿è¡Œï¼Œè€Œä¸ç®¡å®ƒåœ¨ä»€ä¹ˆç¯å¢ƒä¸­è¿è¡Œ å®¢æˆ·ç«¯ APIæµè§ˆå™¨ API DOMï¼ˆæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰ windowæ˜¯è½½å…¥æµè§ˆå™¨çš„æ ‡ç­¾ navigatorè¡¨ç¤ºæµè§ˆå™¨å­˜åœ¨äºwebä¸Šçš„çŠ¶æ€å’Œæ ‡è¯†ï¼ˆå³ç”¨æˆ·ä»£ç†ï¼‰ documentï¼ˆåœ¨æµè§ˆå™¨ä¸­ç”¨DOMè¡¨ç¤ºï¼‰æ˜¯è½½å…¥çª—å£çš„å®é™…é¡µé¢ XMLHttpRequest Fetch API Canvas Web Storage API IndexedDB API ç”»å›¾éŸ³é¢‘ä¸è§†é¢‘å®¢æˆ·ç«¯å­˜å‚¨ä¼ ç»Ÿæ–¹æ³•ï¼šcookie è¿‡æ—¶ã€å­˜åœ¨å„ç§å®‰å…¨é—®é¢˜ï¼Œè€Œä¸”æ— æ³•å­˜å‚¨å¤æ‚æ•°æ® å”¯ä¸€ä¼˜åŠ¿æ˜¯å®ƒä»¬å¾—åˆ°äº†éå¸¸æ—§çš„æµè§ˆå™¨çš„æ”¯æŒ æ–°æµæ´¾ï¼šWeb Storage å’Œ IndexedDB Web Storage API æä¾›äº†ä¸€ç§éå¸¸ç®€å•çš„è¯­æ³•ï¼Œç”¨äºå­˜å‚¨å’Œæ£€ç´¢è¾ƒå°çš„ã€ç”±åç§°å’Œç›¸åº”å€¼ç»„æˆçš„æ•°æ®é¡¹ã€‚å½“æ‚¨åªéœ€è¦å­˜å‚¨ä¸€äº›ç®€å•çš„æ•°æ®æ—¶ï¼Œæ¯”å¦‚ç”¨æˆ·çš„åå­—ï¼Œç”¨æˆ·æ˜¯å¦ç™»å½•ï¼Œå±å¹•èƒŒæ™¯ä½¿ç”¨äº†ä»€ä¹ˆé¢œè‰²ç­‰ç­‰ï¼Œè¿™æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ IndexedDB API ä¸ºæµè§ˆå™¨æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„æ•°æ®åº“ç³»ç»Ÿæ¥å­˜å‚¨å¤æ‚çš„æ•°æ®ã€‚è¿™å¯ä»¥ç”¨äºå­˜å‚¨ä»å®Œæ•´çš„ç”¨æˆ·è®°å½•åˆ°ç”šè‡³æ˜¯å¤æ‚çš„æ•°æ®ç±»å‹ï¼Œå¦‚éŸ³é¢‘æˆ–è§†é¢‘æ–‡ä»¶ã€‚ Web Storage æ‰€æœ‰çš„ web storage æ•°æ®éƒ½åŒ…å«åœ¨æµè§ˆå™¨å†…ä¸¤ä¸ªç±»ä¼¼äºå¯¹è±¡çš„ç»“æ„ä¸­ï¼š sessionStorage å’Œ localStorageã€‚ sessionStorageï¼šåªè¦æµè§ˆå™¨å¼€ç€ï¼Œæ•°æ®å°±ä¼šä¸€ç›´ä¿å­˜ï¼›å…³é—­æµè§ˆå™¨æ—¶æ•°æ®ä¼šä¸¢å¤± localStorageï¼šä¸€ç›´ä¿å­˜æ•°æ®ï¼Œç”šè‡³åˆ°æµè§ˆå™¨å…³é—­åˆå¼€å¯åä¹Ÿæ˜¯è¿™æ · æ¯ä¸ªåŸŸéƒ½æœ‰ä¸€ä¸ªå•ç‹¬çš„æ•°æ®å­˜å‚¨åŒº IndexedDBæœªæ¥ï¼šCache API Cache API æ˜¯ä¸ºå­˜å‚¨ç‰¹å®šHTTPè¯·æ±‚çš„å“åº”æ–‡ä»¶è€Œè®¾è®¡çš„ï¼Œå®ƒå¯¹äºåƒå­˜å‚¨ç¦»çº¿ç½‘ç«™æ–‡ä»¶è¿™æ ·çš„äº‹æƒ…éå¸¸æœ‰ç”¨ï¼Œè¿™æ ·ç½‘ç«™å°±å¯ä»¥åœ¨æ²¡æœ‰ç½‘ç»œè¿æ¥çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚ ç¼“å­˜é€šå¸¸ä¸ Service Worker API ç»„åˆä½¿ç”¨ï¼Œå°½ç®¡ä¸ä¸€å®šéè¦è¿™ä¹ˆåšã€‚","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://ziiyan.github.io/tags/JavaScript/"}]},{"title":"leetcodeå‘¨èµ›-ç¬¬192åœº","slug":"leetcodeå‘¨èµ›-ç¬¬192åœº","date":"2020-06-07T11:25:04.000Z","updated":"2020-07-27T09:18:38.245Z","comments":true,"path":"2020/06/07/leetcodeå‘¨èµ›-ç¬¬192åœº/","link":"","permalink":"http://ziiyan.github.io/2020/06/07/leetcode%E5%91%A8%E8%B5%9B-%E7%AC%AC192%E5%9C%BA/","excerpt":"","text":"T1ä»£ç 12345678910111213141516171819/** * @param &#123;number[]&#125; nums * @param &#123;number&#125; n * @return &#123;number[]&#125; */var shuffle = function(nums, n) &#123; let x = nums.slice(0, n); // x: [x1, x2, ..., xn] let y = nums.slice(n, 2 * n); // y: [y1, y2, ..., yn] let ans = [], t = 0; while (t &lt; n) &#123; ans.push(x[t]); ans.push(y[t]); // ans: [x1, y1, ..., xn, yn] t++; &#125; return ans;&#125;; æ€»ç»“æš´åŠ›æ¨¡æ‹Ÿ åˆ«äººçš„ä»£ç ï¼š12345678910var shuffle = function(nums, n) &#123; let xArr = nums.slice(0, n); let yArr = nums.slice(n, nums.length); let result = []; xArr.forEach((item, index) =&gt; &#123; result.push(item); result.push(yArr[index]); &#125;); return result;&#125;; æ€æƒ³å…¶å®å·®ä¸å¤šï¼Œä¸»è¦æ˜¯è¿™ä¸ª forEachï¼Œé€Ÿåº¦å¥½åƒæ¯”è¾ƒå¿« Array.prototype.forEach() æ–¹æ³•å¯¹æ•°ç»„çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€æ¬¡ç»™å®šçš„å‡½æ•°ã€‚ è¯­æ³•1arr.forEach(callback(currentValue [, index [, array]])[, thisArg]) callback ä¸ºæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ æ‰§è¡Œçš„å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥æ”¶ä¸€è‡³ä¸‰ä¸ªå‚æ•°ï¼š currentValue æ•°ç»„å½“å‰é¡¹çš„å€¼ index æ•°ç»„å½“å‰é¡¹çš„ç´¢å¼• array æ•°ç»„å¯¹è±¡æœ¬èº« thisArg å¯é€‰ å¦‚æœ thisArg å‚æ•°æœ‰å€¼ï¼Œåˆ™æ¯æ¬¡ callback å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œthis éƒ½ä¼šæŒ‡å‘ thisArg å‚æ•° å¦‚æœçœç•¥äº† thisArg å‚æ•°ï¼Œæˆ–è€…å…¶å€¼ä¸º null æˆ– undefinedï¼Œthis åˆ™æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚ è¿”å›å€¼ï¼šundefined forEach ä¸ä¼šç›´æ¥æ”¹å˜è°ƒç”¨å®ƒçš„å¯¹è±¡ï¼Œä½†æ˜¯é‚£ä¸ªå¯¹è±¡å¯èƒ½ä¼šè¢« callback å‡½æ•°æ”¹å˜ é™¤äº†æŠ›å‡ºå¼‚å¸¸ä»¥å¤–ï¼Œæ²¡æœ‰åŠæ³•ä¸­æ­¢æˆ–è·³å‡º forEach() å¾ªç¯ Array.prototype.map() map() æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶ç»“æœæ˜¯è¯¥æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½è°ƒç”¨ä¸€æ¬¡æä¾›çš„å‡½æ•°åçš„è¿”å›å€¼ã€‚ è¯­æ³•123var new_array = arr.map(function callback(currentValue[, index[, array]]) &#123; // Return element for new_array &#125;[, thisArg]) callback ä¸ºæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ æ‰§è¡Œçš„å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥æ”¶ä¸€è‡³ä¸‰ä¸ªå‚æ•°ï¼š currentValue æ•°ç»„å½“å‰é¡¹çš„å€¼ index æ•°ç»„å½“å‰é¡¹çš„ç´¢å¼• array æ•°ç»„å¯¹è±¡æœ¬èº« thisArg å¯é€‰ å¦‚æœ thisArg å‚æ•°æœ‰å€¼ï¼Œåˆ™æ¯æ¬¡ callback å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œthis éƒ½ä¼šæŒ‡å‘ thisArg å‚æ•° å¦‚æœçœç•¥äº† thisArg å‚æ•°ï¼Œæˆ–è€…å…¶å€¼ä¸º null æˆ– undefinedï¼Œthis åˆ™æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚ è¿”å›å€¼ï¼šä¸€ä¸ªç”±åŸæ•°ç»„æ¯ä¸ªå…ƒç´ æ‰§è¡Œå›è°ƒå‡½æ•°çš„ç»“æœç»„æˆçš„æ–°æ•°ç»„ mapä¸ä¿®æ”¹è°ƒç”¨å®ƒçš„åŸæ•°ç»„æœ¬èº«ï¼ˆå½“ç„¶å¯ä»¥åœ¨ callback æ‰§è¡Œæ—¶æ”¹å˜åŸæ•°ç»„ï¼‰â€”â€”è¿™ä¸ªä¸ forEach æ˜¯ä¸€æ ·çš„ ä¸è¯¥ä½¿ç”¨mapï¼š ä¸æ‰“ç®—ä½¿ç”¨è¿”å›çš„æ–°æ•°ç»„ æ²¡æœ‰ä»å›è°ƒå‡½æ•°ä¸­è¿”å›å€¼ forEach å’Œ map åŒºåˆ«map ç”Ÿæˆä¸€ä¸ªæ–°æ•°ç»„ï¼ŒforEach åˆ™æ²¡æœ‰ äºŒè€…å‡ä¸ä¿®æ”¹æ•°ç»„ï¼Œä½†åœ¨å›è°ƒå‡½æ•°é‡Œçš„ä¿®æ”¹ä¼šåŒæ­¥åˆ°åŸæ•°ç»„ æ‰€ä»¥åŒºåˆ«åªæœ‰æ˜¯å¦è¿”å›æ–°çš„æ•°ç»„ å¦‚æœåŒæ—¶éœ€è¦åŸæ•°ç»„&amp;æ–°æ•°ç»„â€”â€”map å¦‚æœä¸éœ€è¦åŸæ•°ç»„â€”â€”forEach T2ä»£ç 123456789101112131415161718192021222324252627/** * @param &#123;number[]&#125; arr * @param &#123;number&#125; k * @return &#123;number[]&#125; */var getStrongest = function(arr, k) &#123; arr.sort((a, b) =&gt; a - b); // å°†æ•°ç»„ arr ä»å°åˆ°å¤§æ’åº let n = arr.length; let m = arr[parseInt((n-1)/2)]; // m: æ•°ç»„ä¸­ä½æ•° let tmp = []; // tmp: ä¸´æ—¶æ•°ç»„ï¼Œç”¨äºç»Ÿè®¡ æ¯ä¸ªå…ƒç´ ä¸ä¸­ä½æ•°çš„è·ç¦»ï¼Œå³ |arr[i] - m| for (let i = 0; i &lt; n; i++) &#123; tmp.push(&#123; val: arr[i], // val: æ•°ç»„å…ƒç´  dis: Math.abs(arr[i] - m) // dis: å½“å‰å…ƒç´ ä¸ä¸­ä½æ•°çš„è·ç¦» &#125;); &#125; tmp.sort((a, b) =&gt; &#123; // å°† tmp æ’åºï¼ˆæ ¹æ®é¢˜ç›®çš„å€¼å¼ºå¼±æ’åºï¼‰ if (a.dis === b.dis) &#123; // è‹¥ dis ç›¸ç­‰ return b.val - a.val; // æ ¹æ® val ä»å¤§åˆ°å°æ’åº &#125; return b.dis - a.dis; // å¦åˆ™æ ¹æ® dis ä»å¤§åˆ°å°æ’åº &#125;); let ans = tmp.map(obj =&gt; &#123; // å°† tmp ä¸­çš„ val æŠ½ç¦»å‡ºæ¥ï¼Œèµ‹å€¼åˆ° ansï¼ˆæŠ›å¼ƒ disï¼‰ return obj.val; &#125;) return ans.slice(0, k); // å–å‰ k ä½&#125;; æ€»ç»“æš´åŠ›æ¨¡æ‹Ÿï¼Œæ’åº åˆ«äººçš„ä»£ç ï¼š12345678910111213141516171819202122232425262728/** * @param &#123;number[]&#125; arr * @param &#123;number&#125; k * @return &#123;number[]&#125; */var getStrongest = function(arr, k) &#123; let len = arr.length, midIndex = Math.floor((len - 1) / 2); let other = [...arr].sort((a, b) =&gt; a - b); let m = other[midIndex]; arr.sort((a, b) =&gt; &#123; if ( Math.abs(a - m) &gt; Math.abs(b - m) || (Math.abs(a - m) == Math.abs(b - m) &amp;&amp; a &gt; b) ) &#123; // a æ¯” b å¼º return -1; &#125; else &#123; return 1; &#125; &#125;); return arr.slice(0, k);&#125;;ä½œè€…ï¼šignore_expressé“¾æ¥ï¼šhttps://leetcode-cn.com/problems/the-k-strongest-values-in-an-array/solution/js-by-ignore_express-4/æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚ æ„Ÿè§‰å¤§å®¶çš„æ€è·¯ä¹Ÿéƒ½å·®ä¸å¤šâ€¦â€¦ä½†æ˜¯åˆ«äººçš„å†™æ³•å°±æ˜¯æ•ˆç‡æ¯”è¾ƒé«˜ï¼ˆæ‘” Array.prototype.sort() ç”¨åŸåœ°ç®—æ³•å¯¹æ•°ç»„çš„å…ƒç´ è¿›è¡Œæ’åºï¼Œå¹¶è¿”å›æ•°ç»„ é»˜è®¤æ’åºé¡ºåºæ˜¯åœ¨å°†å…ƒç´ è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åæ¯”è¾ƒå®ƒä»¬çš„UTF-16ä»£ç å•å…ƒå€¼åºåˆ—æ—¶æ„å»ºçš„ æ•°å­—ï¼š11 &lt; 2 å¤§å°å†™ï¼šâ€™Bananaâ€™ &lt; â€˜cherryâ€™ è¯­æ³•1arr.sort([compareFunction(a, b)]) compareFunction å¯é€‰ ç”¨æ¥æŒ‡å®šæŒ‰æŸç§é¡ºåºè¿›è¡Œæ’åˆ—çš„å‡½æ•°ã€‚å¦‚æœçœç•¥ï¼Œå…ƒç´ æŒ‰ç…§è½¬æ¢ä¸ºçš„å­—ç¬¦ä¸²çš„å„ä¸ªå­—ç¬¦çš„Unicodeä½ç‚¹è¿›è¡Œæ’åºã€‚ å¦‚æœ compareFunction(a, b) å°äº 0 ï¼Œé‚£ä¹ˆ a ä¼šè¢«æ’åˆ—åˆ° b ä¹‹å‰ï¼› å¦‚æœ compareFunction(a, b) ç­‰äº 0 ï¼Œ a å’Œ b çš„ç›¸å¯¹ä½ç½®ä¸å˜ã€‚å¤‡æ³¨ï¼š ECMAScript æ ‡å‡†å¹¶ä¸ä¿è¯è¿™ä¸€è¡Œä¸º å¦‚æœ compareFunction(a, b) å¤§äº 0 ï¼Œ b ä¼šè¢«æ’åˆ—åˆ° a ä¹‹å‰ã€‚ è¿”å›å€¼ï¼šæ’åºåçš„æ•°ç»„ã€‚è¯·æ³¨æ„ï¼šæ•°ç»„å·²åŸåœ°æ’åº T3ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243/** * @param &#123;string&#125; homepage */var BrowserHistory = function(homepage) &#123; this._stack = [homepage]; this._cur = 0;&#125;;/** * @param &#123;string&#125; url * @return &#123;void&#125; */BrowserHistory.prototype.visit = function(url) &#123; this._stack = this._stack.slice(0, this._cur + 1); this._stack.push(url); this._cur += 1;&#125;;/** * @param &#123;number&#125; steps * @return &#123;string&#125; */BrowserHistory.prototype.back = function(steps) &#123; this._cur = Math.max(this._cur - steps, 0); return this._stack[this._cur];&#125;;/** * @param &#123;number&#125; steps * @return &#123;string&#125; */BrowserHistory.prototype.forward = function(steps) &#123; this._cur = Math.min(this._cur + steps, this._stack.length - 1); return this._stack[this._cur];&#125;;/** * Your BrowserHistory object will be instantiated and called as such: * var obj = new BrowserHistory(homepage) * obj.visit(url) * var param_2 = obj.back(steps) * var param_3 = obj.forward(steps) */ æ€»ç»“æ¨¡æ‹Ÿï¼Œè¿™ç§é¢˜ç›®æ²¡æ‰¾åˆ°å¥½åŠæ³•ï¼Œé¢å‘æµ‹è¯•ç”¨ä¾‹ç¼–ç¨‹ T4","categories":[],"tags":[{"name":"åˆ·é¢˜","slug":"åˆ·é¢˜","permalink":"http://ziiyan.github.io/tags/%E5%88%B7%E9%A2%98/"}]},{"title":"MDN-CSS(Cascading Style Sheets)","slug":"MDN-CSS","date":"2020-06-07T06:05:20.000Z","updated":"2020-06-09T15:36:40.672Z","comments":true,"path":"2020/06/07/MDN-CSS/","link":"","permalink":"http://ziiyan.github.io/2020/06/07/MDN-CSS/","excerpt":"","text":"CSS å·¥ä½œåŸç† æµè§ˆå™¨è½½å…¥HTMLæ–‡ä»¶ï¼ˆæ¯”å¦‚ä»ç½‘ç»œä¸Šè·å–ï¼‰ã€‚ å°†HTMLæ–‡ä»¶è½¬åŒ–æˆä¸€ä¸ªDOMï¼ˆDocument Object Modelï¼‰ã€‚ æ¥ä¸‹æ¥ï¼Œæµè§ˆå™¨ä¼šæ‹‰å–è¯¥HTMLç›¸å…³çš„å¤§éƒ¨åˆ†èµ„æºï¼Œæ¯”å¦‚åµŒå…¥åˆ°é¡µé¢çš„å›¾ç‰‡ã€è§†é¢‘å’ŒCSSæ ·å¼ã€‚JavaScriptåˆ™ä¼šç¨åè¿›è¡Œå¤„ç†ã€‚ æµè§ˆå™¨æ‹‰å–åˆ°CSSä¹‹åä¼šè¿›è¡Œè§£æï¼Œæ ¹æ®é€‰æ‹©å™¨çš„ä¸åŒç±»å‹ï¼ˆæ¯”å¦‚elementã€classã€idç­‰ç­‰ï¼‰æŠŠä»–ä»¬åˆ†åˆ°ä¸åŒçš„â€œæ¡¶â€ä¸­ã€‚æµè§ˆå™¨åŸºäºå®ƒæ‰¾åˆ°çš„ä¸åŒçš„é€‰æ‹©å™¨ï¼Œå°†ä¸åŒçš„è§„åˆ™ï¼ˆåŸºäºé€‰æ‹©å™¨çš„è§„åˆ™ï¼Œå¦‚å…ƒç´ é€‰æ‹©å™¨ã€ç±»é€‰æ‹©å™¨ã€idé€‰æ‹©å™¨ç­‰ï¼‰åº”ç”¨åœ¨å¯¹åº”çš„DOMçš„èŠ‚ç‚¹ä¸­ï¼Œå¹¶æ·»åŠ èŠ‚ç‚¹ä¾èµ–çš„æ ·å¼ï¼ˆè¿™ä¸ªä¸­é—´æ­¥éª¤ç§°ä¸ºæ¸²æŸ“æ ‘ï¼‰ã€‚ ä¸Šè¿°çš„è§„åˆ™åº”ç”¨äºæ¸²æŸ“æ ‘ä¹‹åï¼Œæ¸²æŸ“æ ‘ä¼šä¾ç…§åº”è¯¥å‡ºç°çš„ç»“æ„è¿›è¡Œå¸ƒå±€ã€‚ ç½‘é¡µå±•ç¤ºåœ¨å±å¹•ä¸Šï¼ˆè¿™ä¸€æ­¥è¢«ç§°ä¸ºç€è‰²ï¼‰ã€‚ å†²çªè§„åˆ™å±‚å  åŒçº§ï¼Œåé¢ &gt; å‰é¢ ä¼˜å…ˆçº§ åƒä½ï¼š å¦‚æœå£°æ˜åœ¨ style çš„å±æ€§ï¼ˆå†…è”æ ·å¼ï¼‰åˆ™è¯¥ä½å¾—ä¸€åˆ†ã€‚è¿™æ ·çš„å£°æ˜æ²¡æœ‰é€‰æ‹©å™¨ï¼Œæ‰€ä»¥å®ƒå¾—åˆ†æ€»æ˜¯1000ã€‚ ç™¾ä½ï¼š é€‰æ‹©å™¨ä¸­åŒ…å«IDé€‰æ‹©å™¨åˆ™è¯¥ä½å¾—ä¸€åˆ†ã€‚ åä½ï¼š é€‰æ‹©å™¨ä¸­åŒ…å«ç±»é€‰æ‹©å™¨ã€å±æ€§é€‰æ‹©å™¨æˆ–è€…ä¼ªç±»åˆ™è¯¥ä½å¾—ä¸€åˆ†ã€‚ ä¸ªä½ï¼šé€‰æ‹©å™¨ä¸­åŒ…å«å…ƒç´ ã€ä¼ªå…ƒç´ é€‰æ‹©å™¨åˆ™è¯¥ä½å¾—ä¸€åˆ†ã€‚ åœ¨è¿›è¡Œè®¡ç®—æ—¶ä¸å…è®¸è¿›è¡Œè¿›ä½ï¼Œä¾‹å¦‚ï¼Œ20 ä¸ªç±»é€‰æ‹©å™¨ä»…ä»…æ„å‘³ç€ 20 ä¸ªåä½ï¼Œè€Œä¸èƒ½è§†ä¸º ä¸¤ä¸ªç™¾ä½ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ— è®ºå¤šå°‘ä¸ªç±»é€‰æ‹©å™¨çš„æƒé‡å åŠ ï¼Œéƒ½ä¸ä¼šè¶…è¿‡ä¸€ä¸ª ID é€‰æ‹©å™¨ã€‚ !important è¦†ç›–æ™®é€šè§„åˆ™çš„å±‚å  ç»§æ‰¿ æœ‰äº›å±æ€§å¯ä»¥è¢«ç»§æ‰¿ï¼Œæœ‰äº›ä¸è¡Œ æ§åˆ¶ç»§æ‰¿ï¼Œæ‰€æœ‰å±æ€§éƒ½å¯ä»¥å–ä»¥ä¸‹ä¸‰ä¸ªå€¼ inherit å¼€å¯ç»§æ‰¿ initial ä¸ç»§æ‰¿ unset è‡ªç„¶ç»§æ‰¿ é€‰æ‹©å™¨ é€‰æ‹©å™¨ ç¤ºä¾‹ å­¦ä¹ CSSçš„æ•™ç¨‹ ç±»å‹é€‰æ‹©å™¨ h1 { } ç±»å‹é€‰æ‹©å™¨ é€šé…é€‰æ‹©å™¨ * { } é€šé…é€‰æ‹©å™¨ ç±»é€‰æ‹©å™¨ .box { } ç±»é€‰æ‹©å™¨ IDé€‰æ‹©å™¨ #unique { } IDé€‰æ‹©å™¨ æ ‡ç­¾å±æ€§é€‰æ‹©å™¨ a[title] { } æ ‡ç­¾å±æ€§é€‰æ‹©å™¨ ä¼ªç±»é€‰æ‹©å™¨ p:first-child { } ä¼ªç±» ä¼ªå…ƒç´ é€‰æ‹©å™¨ p::first-line { } ä¼ªå…ƒç´  åä»£é€‰æ‹©å™¨ article p åä»£è¿ç®—ç¬¦ å­ä»£é€‰æ‹©å™¨ article &gt; p å­ä»£é€‰æ‹©å™¨ ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨ h1 + p ç›¸é‚»å…„å¼Ÿ é€šç”¨å…„å¼Ÿé€‰æ‹©å™¨ h1 ~ p é€šç”¨å…„å¼Ÿ ç›’æ¨¡å‹å¤–éƒ¨æ˜¾ç¤ºç±»å‹å—çº§ display: block æ¯ä¸ªç›’å­éƒ½ä¼šæ¢è¡Œ width å’Œ height å±æ€§å¯ä»¥å‘æŒ¥ä½œç”¨ paddingã€marginã€border ä¼šå°†å…¶ä»–å…ƒç´ ä»å½“å‰ç›’å­å‘¨å›´â€œæ¨å¼€â€ ç›’å­ä¼šåœ¨å†…è”çš„æ–¹å‘ä¸Šæ‰©å±•å¹¶å æ®çˆ¶å®¹å™¨åœ¨è¯¥æ–¹å‘ä¸Šçš„æ‰€æœ‰å¯ç”¨ç©ºé—´ï¼Œåœ¨ç»å¤§æ•°æƒ…å†µä¸‹æ„å‘³ç€ç›’å­ä¼šå’Œçˆ¶å®¹å™¨ä¸€æ ·å®½ å†…è” display: inline ç›’å­ä¸ä¼šäº§ç”Ÿæ¢è¡Œ width å’Œ height å±æ€§å°†ä¸èµ·ä½œç”¨ å‚ç›´æ–¹å‘çš„paddingã€marginã€borderä¼šè¢«åº”ç”¨ä½†æ˜¯ä¸ä¼šæŠŠå…¶ä»–å¤„äº inline çŠ¶æ€çš„ç›’å­æ¨å¼€ æ°´å¹³æ–¹å‘çš„paddingã€marginã€borderä¼šè¢«åº”ç”¨è€Œä¸”ä¹Ÿä¼šæŠŠå…¶ä»–å¤„äº inline çŠ¶æ€çš„ç›’å­æ¨å¼€ ä¸­é—´çŠ¶æ€ display: inlin-block ä¸ä¼šæ¢è¡Œ è®¾ç½®width å’Œheight å±æ€§ä¼šç”Ÿæ•ˆã€‚ padding, margin, ä»¥åŠborder ä¼šæ¨å¼€å…¶ä»–å…ƒç´ ã€‚ å†…éƒ¨æ˜¾ç¤ºç±»å‹ flex grid ç›’æ¨¡å‹ Content box: è¿™ä¸ªåŒºåŸŸæ˜¯ç”¨æ¥æ˜¾ç¤ºå†…å®¹ Padding box: åŒ…å›´åœ¨å†…å®¹åŒºåŸŸå¤–éƒ¨çš„ç©ºç™½åŒºåŸŸ ä¸å¯ä»¥ä¸ºè´Ÿæ•° Border box: è¾¹æ¡†ç›’åŒ…è£¹å†…å®¹å’Œå†…è¾¹è· Margin box: è¿™æ˜¯æœ€å¤–é¢çš„åŒºåŸŸï¼Œæ˜¯ç›’å­å’Œå…¶ä»–å…ƒç´ ä¹‹é—´çš„ç©ºç™½åŒºåŸŸ å¯ä»¥ä¸ºè´Ÿæ•° æ³¨æ„å¤–è¾¹è·æŠ˜å  æ ‡å‡†ç›’æ¨¡å‹ box-sizing: content-box width å’Œ height åŒ…å« content box æ›¿ä»£ï¼ˆIEï¼‰ç›’æ¨¡å‹ box-sizing: border-box width å’Œ height åŒ…å« content boxã€padding boxã€border box æº¢å‡ºå—çº§æ’ç‰ˆä¸Šä¸‹æ–‡ï¼ˆBlock Formatting Contextï¼ŒBFCï¼‰CSS çš„å€¼æ•°å­—ï¼Œé•¿åº¦å’Œç™¾åˆ†æ¯”ç»å¯¹é•¿åº¦å•ä½ å•ä½ åç§° cm å˜ç±³ mm æ¯«ç±³ Q å››åˆ†ä¹‹ä¸€æ¯«ç±³ in è‹±å¯¸ pc åäºŒç‚¹æ´»å­— pt ç‚¹ px åƒç´  ç›¸å¯¹é•¿åº¦å•ä½ å•ä½ ç›¸å¯¹äº em åœ¨ font-size ä¸­ä½¿ç”¨æ˜¯ç›¸å¯¹äºçˆ¶å…ƒç´ çš„å­—ä½“å¤§å°ï¼Œåœ¨å…¶ä»–å±æ€§ä¸­ä½¿ç”¨æ˜¯ç›¸å¯¹äºè‡ªèº«çš„å­—ä½“å¤§å°ï¼Œå¦‚ width ex å­—ç¬¦â€œxâ€çš„é«˜åº¦ ch æ•°å­—â€œ0â€çš„å®½åº¦ rem æ ¹å…ƒç´ çš„å­—ä½“å¤§å° lh å…ƒç´ çš„line-height vw 1vw è§†çª—å®½åº¦çš„1% vh 1vh è§†çª—é«˜åº¦çš„1% vmin 1vmin è§†çª—è¾ƒå°å°ºå¯¸çš„1% vmax 1vmax è§†å›¾å¤§å°ºå¯¸çš„1% ems and rems em çˆ¶å…ƒç´ å­—ä½“å¤§å° rem æ ¹å…ƒç´ å­—ä½“å¤§å° é¢œè‰²å›¾ç‰‡ä½ç½®å­—ç¬¦ä¸²å’Œæ ‡è¯†ç¬¦å‡½æ•°ç¼–ç é£æ ¼æ–¹æ³•è®ºOOCSSBEM BEM å—çº§å…ƒç´ ä¿®é¥°å­—ç¬¦ï¼ˆBlock Element Modifierï¼‰ SASS Sassï¼ˆSyntactically Awesome StyleSheetsï¼‰ä¸¥æ ¼ç¼©è¿› Scssï¼ˆSassy CSSï¼‰å…¼å®¹ css çš„ sass å®šä¹‰å˜é‡åŸç”Ÿcssä¹Ÿå¯ä»¥ å¸ƒå±€æ­£å¸¸å¸ƒå±€æµï¼ˆé»˜è®¤ï¼‰è¦†ç›–é»˜è®¤å¸ƒå±€ display blockã€inlineã€inline-block æ˜¯æ­£å¸¸å¸ƒå±€æµ å…¶ä»–ï¼ˆå¦‚ gridã€flexï¼‰ä¸æ˜¯ æµ®åŠ¨ float position é»˜è®¤ staticï¼Œæ­£å¸¸å¸ƒå±€æµ è¡¨æ ¼å¸ƒå±€ display: table å¤šåˆ—å¸ƒå±€ å¼¹æ€§ç›’å­ï¼ˆFlexboxï¼‰ ä¸€ç»´ display: flex ç›´æ¥å­å…ƒç´ ä¼šæŒ‰ç…§flexè¿›è¡Œå¸ƒå±€ ç½‘æ ¼ï¼ˆGridï¼‰ äºŒç»´ display: grid æµ®åŠ¨ï¼ˆfloatï¼‰ ä»æ­£å¸¸å¸ƒå±€æµ(normal flow)ä¸­ç§»é™¤ å…¶ä»–å†…å®¹ä¼šåœ¨è¿™ä¸ªè¢«è®¾ç½®æµ®åŠ¨çš„å…ƒç´ å‘¨å›´ç¯ç»• æ¸…é™¤æµ®åŠ¨ clear leftï¼šåœæ­¢ä»»ä½•æ´»åŠ¨çš„å·¦æµ®åŠ¨ rightï¼šåœæ­¢ä»»ä½•æ´»åŠ¨çš„å³æµ®åŠ¨ bothï¼šåœæ­¢ä»»ä½•æ´»åŠ¨çš„å·¦å³æµ®åŠ¨ å®šä½ï¼ˆpositionï¼‰static å°†å…ƒç´ æ”¾åœ¨æ–‡æ¡£å¸ƒå±€æµçš„é»˜è®¤ä½ç½® relative ç›¸å¯¹äºå…ƒç´ åœ¨æ­£å¸¸çš„æ–‡æ¡£æµä¸­çš„ä½ç½®ç§»åŠ¨å®ƒ absolute å°†å…ƒç´ å®Œå…¨ä»é¡µé¢çš„æ­£å¸¸å¸ƒå±€æµä¸­ç§»å‡ºï¼Œç±»ä¼¼å°†å®ƒå•ç‹¬æ”¾åœ¨ä¸€ä¸ªå›¾å±‚ä¸­ ç›¸å¯¹äºè¯¥å…ƒç´ çš„æœ€è¿‘è¢«å®šä½ç¥–å…ˆå…ƒç´  fixed ç›¸å¯¹æµè§ˆå™¨è§†å£å›ºå®š sticky è®©å…ƒç´ å…ˆä¿æŒå’Œposition: staticä¸€æ ·çš„å®šä½ å½“å®ƒçš„ç›¸å¯¹è§†å£ä½ç½®è¾¾åˆ°æŸä¸€ä¸ªé¢„è®¾å€¼æ—¶ï¼Œåƒposition: fixedä¸€æ ·å®šä½ CSS è¡¨æ ¼å¸ƒå±€ï¼ˆtableï¼‰##å¤šåˆ—å¸ƒå±€ column-count column-width column-gap column-rule å“åº”å¼è®¾è®¡ RWDï¼Œresponsive web designï¼ˆå…è®¸Webé¡µé¢é€‚åº”ä¸åŒå±å¹•å®½åº¦å› ç´ ç­‰ï¼Œè¿›è¡Œå¸ƒå±€å’Œå¤–è§‚çš„è°ƒæ•´ï¼‰ åª’ä½“æŸ¥è¯¢123@media media-type and (media-feature-rule) &#123; /* CSS rules go here */&#125; ä¸€ä¸ªåª’ä½“ç±»å‹ï¼Œå‘Šè¯‰æµè§ˆå™¨è¿™æ®µä»£ç æ˜¯ç”¨åœ¨ä»€ä¹ˆç±»å‹çš„åª’ä½“ä¸Šçš„ï¼ˆä¾‹å¦‚å°åˆ·å“æˆ–è€…å±å¹•ï¼‰ all print screen speech ä¸€ä¸ªåª’ä½“è¡¨è¾¾å¼ï¼Œæ˜¯ä¸€ä¸ªè¢«åŒ…å«çš„CSSç”Ÿæ•ˆæ‰€éœ€çš„è§„åˆ™æˆ–è€…æµ‹è¯• å®½å’Œé«˜ æœå‘ orientation portrait landscape hover pointer ä¸€ç»„CSSè§„åˆ™ï¼Œä¼šåœ¨æµ‹è¯•é€šè¿‡ä¸”åª’ä½“ç±»å‹æ­£ç¡®çš„æ—¶å€™åº”ç”¨ åª’ä½“æŸ¥è¯¢åŒ¹é…é€»è¾‘ï¼šä¸/æˆ–/é ç§»åŠ¨ä¼˜å…ˆè®¾è®¡ï¼šä¸ºçª„å±è®¾å¤‡ï¼ˆä¾‹å¦‚ç§»åŠ¨è®¾å¤‡ï¼‰åˆ›å»ºä¸€ä¸ªç®€å•çš„å•æ å¸ƒå±€ï¼Œç„¶åæ£€æŸ¥æ˜¯å¦æ˜¯å¤§äº›çš„å±å¹•ï¼Œåœ¨ä½ çŸ¥é“ä½ æœ‰è¶³å¤Ÿå®¹çº³çš„å±å¹•å®½åº¦çš„æ—¶å€™ï¼Œå¼€å§‹é‡‡ç”¨ä¸€ç§å¤šæ çš„å¸ƒå±€ çµæ´»ç½‘æ ¼ æ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ªä½œä¸ºå®½åº¦çš„ç™¾åˆ†æ•°ï¼Œè€Œä¸”ç¡®ä¿æ•´ä¸ªå¸ƒå±€çš„å’Œä¸ä¼šè¶…è¿‡100% ç°ä»£å¸ƒå±€æŠ€æœ¯å¤šåˆ—å¸ƒå±€flexGridå“åº”å¼å›¾åƒ &lt;picture&gt; &lt;img&gt; srcset sizes å“åº”å¼æ’ç‰ˆ é€šè¿‡åª’ä½“æŸ¥è¯¢æ”¹å˜å­—ä½“å¤§å° ä½¿ç”¨è§†å£å•ä½å®ç°å“åº”å¼æ’ç‰ˆ è§†å£å…ƒæ ‡ç­¾1&lt;meta name=\"viewport\" content=\"width=device-width,initial-scale=1\"&gt; ç§»åŠ¨ç«¯æµè§ˆå™¨å› æ­¤ä¼šæŠŠè§†å£å®½åº¦è®¾ä¸º960åƒç´ ï¼Œå¹¶ä»¥è¿™ä¸ªå®½åº¦æ¸²æŸ“é¡µé¢ ç”¨è®¾å¤‡çš„å®é™…å®½åº¦ device-width è¦†å†™äº†é»˜è®¤çš„ width=960px @è§„åˆ™ @charset, å®šä¹‰æ ·å¼è¡¨ä½¿ç”¨çš„å­—ç¬¦é›†. @import, å‘Šè¯‰ CSS å¼•æ“å¼•å…¥ä¸€ä¸ªå¤–éƒ¨æ ·å¼è¡¨. @namespace, å‘Šè¯‰ CSS å¼•æ“å¿…é¡»è€ƒè™‘XMLå‘½åç©ºé—´ã€‚ åµŒå¥—@è§„åˆ™, æ˜¯åµŒå¥—è¯­å¥çš„å­é›†,ä¸ä»…å¯ä»¥ä½œä¸ºæ ·å¼è¡¨é‡Œçš„ä¸€ä¸ªè¯­å¥ï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨æ¡ä»¶è§„åˆ™ç»„é‡Œï¼š @media, å¦‚æœæ»¡è¶³åª’ä»‹æŸ¥è¯¢çš„æ¡ä»¶åˆ™æ¡ä»¶è§„åˆ™ç»„é‡Œçš„è§„åˆ™ç”Ÿæ•ˆã€‚ @page, æè¿°æ‰“å°æ–‡æ¡£æ—¶å¸ƒå±€çš„å˜åŒ–. @font-face, æè¿°å°†ä¸‹è½½çš„å¤–éƒ¨çš„å­—ä½“ã€‚ @keyframes, æè¿° CSS åŠ¨ç”»çš„ä¸­é—´æ­¥éª¤ . @supports, å¦‚æœæ»¡è¶³ç»™å®šæ¡ä»¶åˆ™æ¡ä»¶è§„åˆ™ç»„é‡Œçš„è§„åˆ™ç”Ÿæ•ˆã€‚ @document, å¦‚æœæ–‡æ¡£æ ·å¼è¡¨æ»¡è¶³ç»™å®šæ¡ä»¶åˆ™æ¡ä»¶è§„åˆ™ç»„é‡Œçš„è§„åˆ™ç”Ÿæ•ˆã€‚ (æ¨å»¶è‡³ CSS Level 4 è§„èŒƒ)","categories":[],"tags":[{"name":"CSS","slug":"CSS","permalink":"http://ziiyan.github.io/tags/CSS/"}]},{"title":"MDN-HTML","slug":"MDN-HTML","date":"2020-06-04T13:42:32.000Z","updated":"2020-06-09T15:36:33.130Z","comments":true,"path":"2020/06/04/MDN-HTML/","link":"","permalink":"http://ziiyan.github.io/2020/06/04/MDN-HTML/","excerpt":"","text":"è¯­ä¹‰ä¸ºä»€ä¹ˆéœ€è¦ç»“æ„åŒ– ç”¨æˆ·ç»å¸¸åªé˜…è¯»å¼€å¤´çš„æ ‡é¢˜ SEO å±å¹•é˜…è¯»å™¨ ä¸ºä»€ä¹ˆéœ€è¦è¯­ä¹‰ SEO å±å¹•é˜…è¯»å™¨ è¯­ä¹‰åŒ–æ ‡ç­¾æ ‡é¢˜/æ®µè½ &lt;h1&gt; ~ &lt;h6&gt; &lt;p&gt; æœ€å¥½åªå¯¹æ¯ä¸ªé¡µé¢ä½¿ç”¨ä¸€æ¬¡ åˆ—è¡¨ Lists æ— åº &lt;ul&gt;&lt;li&gt;&lt;/li&gt;&lt;/ul&gt; æœ‰åº &lt;ol&gt;&lt;li&gt;&lt;/li&gt;&lt;/ol&gt; åµŒå¥—åˆ—è¡¨12345678910&lt;ol&gt; &lt;li&gt;item&lt;/li&gt; &lt;li&gt;item&lt;/li&gt; &lt;li&gt; &lt;ul&gt; &lt;li&gt;item&lt;/li&gt; &lt;li&gt;item&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt;&lt;/ol&gt; å¼ºè°ƒ &lt;em&gt; &lt;strong&gt; è¡¨è±¡å…ƒç´ ï¼ˆæ²¡æœ‰è¯­ä¹‰ï¼‰ &lt;i&gt; è¢«ç”¨æ¥ä¼ è¾¾ä¼ ç»Ÿä¸Šç”¨æ–œä½“è¡¨è¾¾çš„æ„ä¹‰ï¼šå¤–å›½æ–‡å­—ï¼Œåˆ†ç±»åç§°ï¼ŒæŠ€æœ¯æœ¯è¯­ï¼Œä¸€ç§æ€æƒ³â€¦â€¦ &lt;b&gt; è¢«ç”¨æ¥ä¼ è¾¾ä¼ ç»Ÿä¸Šç”¨ç²—ä½“è¡¨è¾¾çš„æ„ä¹‰ï¼šå…³é”®å­—ï¼Œäº§å“åç§°ï¼Œå¼•å¯¼å¥â€¦â€¦ &lt;u&gt;è¢«ç”¨æ¥ä¼ è¾¾ä¼ ç»Ÿä¸Šç”¨ä¸‹åˆ’çº¿è¡¨è¾¾çš„æ„ä¹‰ï¼šä¸“æœ‰åè¯ï¼Œæ‹¼å†™é”™è¯¯â€¦â€¦ æè¿°åˆ—è¡¨ &lt;dl&gt; description list - æè¿°åˆ—è¡¨ &lt;dt&gt; description term - æè¿°æœ¯è¯­ &lt;dd&gt; description description - æè¿°åˆ—è¡¨çš„æè¿°éƒ¨åˆ† dt ä¸ dd ä¹‹é—´æœ‰ç¼©è¿› å¼•ç”¨ å—å¼•ç”¨ &lt;blockquote cite=&quot;http://xxx...&quot;&gt; cite ä¸æ˜¾ç¤º è¡Œå†…å¼•ç”¨ &lt;q cite=&quot;http://xxx...&quot;&gt; cite ä¸æ˜¾ç¤º å¼•æ–‡ &lt;cite&gt;MDN&lt;/cite&gt; æ–œä½“ï¼Œæ˜¾ç¤ºåœ¨é¡µé¢ä¸Š ç¼©ç•¥è¯­ &lt;abbr title=&quot;å…¨ç§°&quot;&gt;ç¼©å†™&lt;/abbr&gt; ä¸Šæ ‡/ä¸‹æ ‡ &lt;sub&gt; &lt;sup&gt; æ„å»ºå†…å®¹ &lt;header&gt;é¡µçœ‰ &lt;nav&gt; å¯¼èˆªæ  &lt;main&gt; ä¸»å†…å®¹ï¼Œå­˜æ”¾æ¯ä¸ªé¡µé¢ç‹¬æœ‰çš„å†…å®¹ã€‚æ¯ä¸ªé¡µé¢ä¸Šåªèƒ½ç”¨ä¸€æ¬¡ &lt;main&gt;ï¼Œä¸”ç›´æ¥ä½äº&lt;body&gt; ä¸­ã€‚æœ€å¥½ä¸è¦æŠŠå®ƒåµŒå¥—è¿›å…¶å®ƒå…ƒç´ ã€‚ &lt;article&gt; åŒ…å›´çš„å†…å®¹å³ä¸€ç¯‡æ–‡ç« ï¼Œä¸é¡µé¢å…¶å®ƒéƒ¨åˆ†æ—  &lt;section&gt; &lt;div&gt; &lt;aside&gt; ä¾§è¾¹æ ï¼ŒåµŒå¥—åœ¨ &lt;main&gt; ä¸­ &lt;footer&gt; æ¢è¡Œæ°´å¹³åˆ†å‰²çº¿ &lt;br&gt; &lt;hr&gt; æ®µè½çº§å…ƒç´ ä¹‹é—´çš„ä¸»é¢˜è½¬æ¢ æ— è¯­ä¹‰ï¼ˆå°‘ç”¨ï¼‰ &lt;div&gt; &lt;span&gt; ä»£ç  &lt;code&gt; ç”¨äºæ ‡è®°è®¡ç®—æœºé€šç”¨ä»£ç ã€‚ &lt;pre&gt; ç”¨äºä¿ç•™ç©ºç™½å­—ç¬¦ï¼ˆé€šå¸¸ç”¨äºä»£ç å—ï¼‰ &lt;var&gt;ç”¨äºæ ‡è®°å…·ä½“å˜é‡åã€‚ &lt;kbd&gt; ç”¨äºæ ‡è®°è¾“å…¥ç”µè„‘çš„é”®ç›˜ï¼ˆæˆ–å…¶ä»–ç±»å‹ï¼‰è¾“å…¥ã€‚ &lt;samp&gt; ç”¨äºæ ‡è®°è®¡ç®—æœºç¨‹åºçš„è¾“å‡ºã€‚ æ—¶é—´ &lt;time datetime=&quot;&quot;&gt; è¯´æ˜æ–‡å­— &lt;figure&gt; &lt;figcaption&gt; 1234&lt;figure&gt; &lt;img src=\"...\" /&gt; &lt;figcaption&gt;æè¿°è¯´æ˜&lt;/figcaption&gt;&lt;/figure&gt; HTMLå…ƒç´ å‚è€ƒ è¶…é“¾æ¥ å°½å¯èƒ½ä½¿ç”¨ç›¸å¯¹é“¾æ¥ é¦–å…ˆï¼Œæ£€æŸ¥ä»£ç è¦å®¹æ˜“å¾—å¤šâ€”â€”ç›¸å¯¹URLé€šå¸¸æ¯”ç»å¯¹URLçŸ­å¾—å¤šï¼Œè¿™ä½¿å¾—é˜…è¯»ä»£ç æ›´å®¹æ˜“ã€‚ å…¶æ¬¡ï¼Œåœ¨å¯èƒ½çš„æƒ…å†µä¸‹ä½¿ç”¨ç›¸å¯¹URLæ›´æœ‰æ•ˆã€‚ å½“ä½¿ç”¨ç»å¯¹URLæ—¶ï¼Œæµè§ˆå™¨é¦–å…ˆé€šè¿‡DNSæŸ¥æ‰¾æœåŠ¡å™¨çš„çœŸå®ä½ç½®ï¼Œç„¶åå†è½¬åˆ°è¯¥æœåŠ¡å™¨å¹¶æŸ¥æ‰¾æ‰€è¯·æ±‚çš„æ–‡ä»¶ã€‚å¦ä¸€æ–¹é¢ï¼Œç›¸å¯¹URLï¼Œæµè§ˆå™¨åªåœ¨åŒä¸€æœåŠ¡å™¨ä¸ŠæŸ¥æ‰¾è¢«è¯·æ±‚çš„æ–‡ä»¶ã€‚ å› æ­¤ï¼Œå¦‚æœä½ ä½¿ç”¨ç»å¯¹URLè€Œä¸æ˜¯ç›¸å¯¹URLï¼Œä½ å°±ä¼šä¸æ–­åœ°è®©ä½ çš„æµè§ˆå™¨åšé¢å¤–çš„å·¥ä½œï¼Œè¿™æ„å‘³ç€å®ƒçš„æ•ˆç‡ä¼šé™ä½ã€‚ å¤šåª’ä½“&amp;åµŒå…¥ &lt;video&gt; è§†é¢‘ &lt;resource src=&quot;xxx&quot; type=&quot;video/mp4&quot;&gt; æ²¡æœ‰ type ä¼šé¡ºåºå°è¯•åŠ è½½ &lt;video&gt; ä¸­å¤šä¸ª &lt;resource&gt; ï¼Œæ’­æ”¾ç¬¬ä¸€ä¸ªåŒ¹é…çš„æº &lt;audio&gt; éŸ³é¢‘ &lt;iframe&gt; sandbox æé«˜å®‰å…¨æ€§ &lt;embed&gt;ã€&lt;object&gt; å°‘ç”¨ Iframe - å®‰å…¨é—®é¢˜ é»‘å®¢åˆ©ç”¨ iframe åµŒå…¥äº¤äº’ç»„ä»¶ï¼Œä¾‹å¦‚æŒ‰é’®ã€è¡¨å•ï¼Œè¯±å¯¼ç”¨æˆ·ç‚¹å‡» åªåœ¨æœ‰å¿…è¦æ—¶åµŒå…¥ ä½¿ç”¨ HTTPS HTTPSå‡å°‘äº†è¿œç¨‹å†…å®¹åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«ç¯¡æ”¹çš„æœºä¼šï¼Œ HTTPSé˜²æ­¢åµŒå…¥å¼å†…å®¹è®¿é—®æ‚¨çš„çˆ¶æ–‡æ¡£ä¸­çš„å†…å®¹ï¼Œåä¹‹äº¦ç„¶ã€‚ å§‹ç»ˆä½¿ç”¨sandboxå±æ€§ é…ç½®CSPæŒ‡ä»¤ svg ä½å›¾ä½¿ç”¨åƒç´ ç½‘æ ¼æ¥å®šä¹‰ â€” ä¸€ä¸ªä½å›¾æ–‡ä»¶ç²¾ç¡®å¾—åŒ…å«äº†æ¯ä¸ªåƒç´ çš„ä½ç½®å’Œå®ƒçš„è‰²å½©ä¿¡æ¯ã€‚æµè¡Œçš„ä½å›¾æ ¼å¼åŒ…æ‹¬ Bitmap (.bmp), PNG (.png), JPEG (.jpg), and GIF (.gif.) çŸ¢é‡å›¾ä½¿ç”¨ç®—æ³•æ¥å®šä¹‰ â€” ä¸€ä¸ªçŸ¢é‡å›¾æ–‡ä»¶åŒ…å«äº†å›¾å½¢å’Œè·¯å¾„çš„å®šä¹‰ï¼Œç”µè„‘å¯ä»¥æ ¹æ®è¿™äº›å®šä¹‰è®¡ç®—å‡ºå½“å®ƒä»¬åœ¨å±å¹•ä¸Šæ¸²æŸ“æ—¶åº”è¯¥å‘ˆç°çš„æ ·å­ã€‚ imgä¼˜ç‚¹ å¿«é€Ÿï¼Œç†Ÿæ‚‰çš„å›¾åƒè¯­æ³•ä¸altå±æ€§ä¸­æä¾›çš„å†…ç½®æ–‡æœ¬ç­‰æ•ˆã€‚ å¯ä»¥é€šè¿‡åœ¨``å…ƒç´ åµŒå¥—&lt;img&gt;ï¼Œä½¿å›¾åƒè½»æ¾åœ°æˆä¸ºè¶…é“¾æ¥ã€‚ ç¼ºç‚¹ æ— æ³•ä½¿ç”¨JavaScriptæ“ä½œå›¾åƒã€‚ å¦‚æœè¦ä½¿ç”¨CSSæ§åˆ¶SVGå†…å®¹ï¼Œåˆ™å¿…é¡»åœ¨SVGä»£ç ä¸­åŒ…å«å†…è”CSSæ ·å¼ã€‚ ï¼ˆä»SVGæ–‡ä»¶è°ƒç”¨çš„å¤–éƒ¨æ ·å¼è¡¨ä¸èµ·ä½œç”¨ï¼‰ ä¸èƒ½ç”¨CSSä¼ªç±»æ¥é‡è®¾å›¾åƒæ ·å¼ï¼ˆå¦‚:focusï¼‰ã€‚ ä»£ç ä¼˜ç‚¹ å°† SVG å†…è”å‡å°‘ HTTP è¯·æ±‚ï¼Œå¯ä»¥å‡å°‘åŠ è½½æ—¶é—´ã€‚ æ‚¨å¯ä»¥ä¸º SVG å…ƒç´ åˆ†é…classå’Œidï¼Œå¹¶ä½¿ç”¨ CSS ä¿®æ”¹æ ·å¼ï¼Œæ— è®ºæ˜¯åœ¨SVGä¸­ï¼Œè¿˜æ˜¯ HTML æ–‡æ¡£ä¸­çš„ CSS æ ·å¼è§„åˆ™ã€‚ å®é™…ä¸Šï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»»ä½• SVGå¤–è§‚å±æ€§ ä½œä¸ºCSSå±æ€§ã€‚ å†…è”SVGæ˜¯å”¯ä¸€å¯ä»¥è®©æ‚¨åœ¨SVGå›¾åƒä¸Šä½¿ç”¨CSSäº¤äº’ï¼ˆå¦‚:focusï¼‰å’ŒCSSåŠ¨ç”»çš„æ–¹æ³•ï¼ˆå³ä½¿åœ¨å¸¸è§„æ ·å¼è¡¨ä¸­ï¼‰ã€‚ æ‚¨å¯ä»¥é€šè¿‡å°† SVG æ ‡è®°åŒ…åœ¨``å…ƒç´ ä¸­ï¼Œä½¿å…¶æˆä¸ºè¶…é“¾æ¥ã€‚ ç¼ºç‚¹ è¿™ç§æ–¹æ³•åªé€‚ç”¨äºåœ¨ä¸€ä¸ªåœ°æ–¹ä½¿ç”¨çš„SVGã€‚å¤šæ¬¡ä½¿ç”¨ä¼šå¯¼è‡´èµ„æºå¯†é›†å‹ç»´æŠ¤ï¼ˆresource-intensive maintenanceï¼‰ã€‚ é¢å¤–çš„ SVG ä»£ç ä¼šå¢åŠ HTMLæ–‡ä»¶çš„å¤§å°ã€‚ æµè§ˆå™¨ä¸èƒ½åƒç¼“å­˜æ™®é€šå›¾ç‰‡ä¸€æ ·ç¼“å­˜å†…è”SVGã€‚ æ‚¨å¯èƒ½ä¼šåœ¨`` å…ƒç´ ä¸­åŒ…å«å›é€€ï¼Œä½†æ”¯æŒ SVG çš„æµè§ˆå™¨ä»ç„¶ä¼šä¸‹è½½ä»»ä½•åå¤‡å›¾åƒã€‚ä½ éœ€è¦è€ƒè™‘ä»…ä»…ä¸ºæ”¯æŒè¿‡æ—¶çš„æµè§ˆå™¨ï¼Œè€Œå¢åŠ é¢å¤–å¼€é”€æ˜¯å¦çœŸçš„å€¼å¾—ã€‚ iframe ä¸å»ºè®® ç¼ºç‚¹ å¦‚ä½ æ‰€çŸ¥ï¼Œ iframeæœ‰ä¸€ä¸ªå›é€€æœºåˆ¶ï¼Œå¦‚æœæµè§ˆå™¨ä¸æ”¯æŒiframeï¼Œåˆ™åªä¼šæ˜¾ç¤ºå›é€€ã€‚ æ­¤å¤–ï¼Œé™¤é SVG å’Œæ‚¨å½“å‰çš„ç½‘é¡µå…·æœ‰ç›¸åŒçš„ originï¼Œå¦åˆ™ä½ ä¸èƒ½åœ¨ä¸»é¡µé¢ä¸Šä½¿ç”¨ JavaScript æ¥æ“çºµ SVGã€‚ å“åº”å¼å›¾ç‰‡ &lt;img&gt; srcset å±æ€§ sizes å±æ€§ &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot;&gt;&lt;/meta&gt; è¿™è¡Œä»£ç ä¼šå¼ºåˆ¶åœ°è®©æ‰‹æœºæµè§ˆå™¨é‡‡ç”¨å®ƒä»¬çœŸå®å¯è§†çª—å£çš„å®½åº¦æ¥åŠ è½½ç½‘é¡µ &lt;picture&gt; &lt;source&gt; &lt;img&gt; ä¸ºä»€ä¹ˆä¸ç”¨ CSS æˆ– JavaScript æ¥åšå“åº”å¼ï¼Ÿ æ€§èƒ½é—®é¢˜ï¼šå…ˆåŠ è½½ HTMLï¼Œå†ç”¨ JavaScript æ£€æµ‹å¯è§†çª—å£çš„å®½åº¦ï¼Œå¦‚æœä¸åˆé€‚å†åŠ è½½å›¾ç‰‡æ›¿æ¢å·²ç»åŠ è½½çš„å›¾ç‰‡ã€‚ è¡¨æ ¼ &lt;colgroup&gt; &lt;col&gt; &lt;caption&gt; è¡¨æ ¼æ ‡é¢˜ scope è¡Œ/åˆ—æ ‡é¢˜ id header","categories":[],"tags":[{"name":"HTML","slug":"HTML","permalink":"http://ziiyan.github.io/tags/HTML/"}]},{"title":"ä¸‰ç§ä¸»æµçš„WebæœåŠ¡å®ç°æ–¹æ¡ˆ(REST+SOAP+RPC)","slug":"ä¸‰ç§ä¸»æµçš„WebæœåŠ¡å®ç°æ–¹æ¡ˆ-REST-SOAP-XML-RPC","date":"2020-06-03T14:27:52.000Z","updated":"2020-07-27T09:21:30.582Z","comments":true,"path":"2020/06/03/ä¸‰ç§ä¸»æµçš„WebæœåŠ¡å®ç°æ–¹æ¡ˆ-REST-SOAP-XML-RPC/","link":"","permalink":"http://ziiyan.github.io/2020/06/03/%E4%B8%89%E7%A7%8D%E4%B8%BB%E6%B5%81%E7%9A%84Web%E6%9C%8D%E5%8A%A1%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88-REST-SOAP-XML-RPC/","excerpt":"","text":"RPC Remote recedure callï¼Œè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ åƒè°ƒç”¨æœ¬åœ°æœåŠ¡ï¼ˆæ–¹æ³•ï¼‰ä¸€æ ·è°ƒç”¨æœåŠ¡å™¨çš„æœåŠ¡ï¼ˆæ–¹æ³•ï¼‰ SOAP Simple Object Access Protocolï¼Œç®€å•å¯¹è±¡è®¿é—®åè®® REST Representation State Transferï¼Œè¡¨ç°å±‚çŠ¶æ€è½¬ç§» Resource Representation State Transfer èµ„æºåœ¨ç½‘ç»œä¸­ä»¥æŸç§è¡¨ç°å½¢å¼è¿›è¡ŒçŠ¶æ€è½¬ç§» Resourceï¼šèµ„æºï¼Œå³æ•°æ®ï¼ˆå‰é¢è¯´è¿‡ç½‘ç»œçš„æ ¸å¿ƒï¼‰ã€‚æ¯”å¦‚ newsfeedï¼Œfriendsç­‰ Representationalï¼šæŸç§è¡¨ç°å½¢å¼ï¼Œæ¯”å¦‚ç”¨JSONï¼ŒXMLï¼ŒJPEGç­‰ State Transferï¼šçŠ¶æ€å˜åŒ–ã€‚é€šè¿‡HTTPåŠ¨è¯å®ç° çœ‹ url å°±çŸ¥é“è¦ä»€ä¹ˆçœ‹ http method å°±çŸ¥é“å¹²ä»€ä¹ˆçœ‹ http status code å°±çŸ¥é“ç»“æœå¦‚ä½• ç”¨URLå®šä½èµ„æºï¼Œç”¨HTTPæè¿°æ“ä½œ","categories":[],"tags":[{"name":"å…¶å®ƒ","slug":"å…¶å®ƒ","permalink":"http://ziiyan.github.io/tags/%E5%85%B6%E5%AE%83/"}]},{"title":"å‰‘æŒ‡ offerï¼š45.æŠŠæ•°ç»„æ’æˆæœ€å°çš„æ•°","slug":"å‰‘æŒ‡ offerï¼š45-æŠŠæ•°ç»„æ’æˆæœ€å°çš„æ•°","date":"2020-05-28T13:35:18.000Z","updated":"2020-07-27T11:44:31.568Z","comments":true,"path":"2020/05/28/å‰‘æŒ‡ offerï¼š45-æŠŠæ•°ç»„æ’æˆæœ€å°çš„æ•°/","link":"","permalink":"http://ziiyan.github.io/2020/05/28/%E5%89%91%E6%8C%87%20offer%EF%BC%9A45-%E6%8A%8A%E6%95%B0%E7%BB%84%E6%8E%92%E6%88%90%E6%9C%80%E5%B0%8F%E7%9A%84%E6%95%B0/","excerpt":"","text":"é¢˜ç›®è¾“å…¥ä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ï¼ŒæŠŠæ•°ç»„é‡Œæ‰€æœ‰æ•°å­—æ‹¼æ¥èµ·æ¥æ’æˆä¸€ä¸ªæ•°ï¼Œæ‰“å°èƒ½æ‹¼æ¥å‡ºçš„æ‰€æœ‰æ•°å­—ä¸­æœ€å°çš„ä¸€ä¸ªã€‚ æç¤º: 0 &lt; nums.length &lt;= 100è¯´æ˜: è¾“å‡ºç»“æœå¯èƒ½éå¸¸å¤§ï¼Œæ‰€ä»¥ä½ éœ€è¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²è€Œä¸æ˜¯æ•´æ•°æ‹¼æ¥èµ·æ¥çš„æ•°å­—å¯èƒ½ä¼šæœ‰å‰å¯¼ 0ï¼Œæœ€åç»“æœä¸éœ€è¦å»æ‰å‰å¯¼ 0 æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/ba-shu-zu-pai-cheng-zui-xiao-de-shu-lcofè‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚ è§£é¢˜æ€è·¯è‡ªå®šä¹‰æ’åº ab &lt; ba åˆ™ [a, b] ab &gt; ba åˆ™ [b, a] ä¸çŸ¥é“è§„å¾‹å¤§æ¦‚æƒ³ç ´è„‘è¢‹ä¹Ÿæƒ³ä¸å‡ºæ¥ï¼Ÿ ä»£ç 1234567/** * @param &#123;number[]&#125; nums * @return &#123;string&#125; */var minNumber = function(nums) &#123; return nums.sort((a, b) =&gt; (a+''+b) - (b+''+a)).join('');&#125;; æ€»ç»“ JavaScript sort è‹¥ a å°äº bï¼Œåœ¨æ’åºåçš„æ•°ç»„ä¸­ a åº”è¯¥å‡ºç°åœ¨ b ä¹‹å‰ï¼Œåˆ™è¿”å›ä¸€ä¸ªå°äº 0 çš„å€¼ã€‚ è‹¥ a ç­‰äº bï¼Œåˆ™è¿”å› 0ã€‚ è‹¥ a å¤§äº bï¼Œåˆ™è¿”å›ä¸€ä¸ªå¤§äº 0 çš„å€¼ã€‚ JavaScript join æŠŠæ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ æ”¾å…¥ä¸€ä¸ªå­—ç¬¦ä¸² å‚æ•°ä¸ºè¦ä½¿ç”¨çš„åˆ†éš”ç¬¦ã€‚å¦‚æœçœç•¥è¯¥å‚æ•°ï¼Œåˆ™ä½¿ç”¨é€—å·ä½œä¸ºåˆ†éš”ç¬¦ã€‚","categories":[],"tags":[{"name":"åˆ·é¢˜","slug":"åˆ·é¢˜","permalink":"http://ziiyan.github.io/tags/%E5%88%B7%E9%A2%98/"}]},{"title":"å‰‘æŒ‡ offerï¼š59-I.æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼","slug":"å‰‘æŒ‡ offerï¼š59-I-æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼","date":"2020-05-27T15:52:18.000Z","updated":"2020-07-27T11:44:35.574Z","comments":true,"path":"2020/05/27/å‰‘æŒ‡ offerï¼š59-I-æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼/","link":"","permalink":"http://ziiyan.github.io/2020/05/27/%E5%89%91%E6%8C%87%20offer%EF%BC%9A59-I-%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC/","excerpt":"","text":"é¢˜ç›®ç»™å®šä¸€ä¸ªæ•°ç»„ nums å’Œæ»‘åŠ¨çª—å£çš„å¤§å° kï¼Œè¯·æ‰¾å‡ºæ‰€æœ‰æ»‘åŠ¨çª—å£é‡Œçš„æœ€å¤§å€¼ã€‚ æç¤ºï¼š ä½ å¯ä»¥å‡è®¾ k æ€»æ˜¯æœ‰æ•ˆçš„ï¼Œåœ¨è¾“å…¥æ•°ç»„ä¸ä¸ºç©ºçš„æƒ…å†µä¸‹ï¼Œ1 â‰¤ k â‰¤ è¾“å…¥æ•°ç»„çš„å¤§å°ã€‚ æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/hua-dong-chuang-kou-de-zui-da-zhi-lcofè‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚ è§£é¢˜æ€è·¯å†™æ³•æœ‰ç‚¹æš´åŠ›â€¦â€¦æ•ˆç‡æ¯”è¾ƒå·® Array.slice(i, j)æˆªå–å­æ•°ç»„ Array[i~j]ï¼ŒMath.max(...Array) å–æœ€å¤§ ä»£ç 1234567891011121314/** * @param &#123;number[]&#125; nums * @param &#123;number&#125; k * @return &#123;number[]&#125; */var maxSlidingWindow = function(nums, k) &#123; if (nums.length === 0) return []; let ans = []; for (let i = 0; i &lt;= nums.length - k; i++) &#123; let tmp = nums.slice(i, i+k); ans.push(Math.max(...tmp)); &#125; return ans;&#125;; æ€»ç»“ Array.slice(i, j) æ‰©å±•è¿ç®—ç¬¦ ...","categories":[],"tags":[{"name":"åˆ·é¢˜","slug":"åˆ·é¢˜","permalink":"http://ziiyan.github.io/tags/%E5%88%B7%E9%A2%98/"}]},{"title":"å‰‘æŒ‡ offerï¼š59-II.é˜Ÿåˆ—çš„æœ€å¤§å€¼","slug":"å‰‘æŒ‡ offerï¼š59-II-é˜Ÿåˆ—çš„æœ€å¤§å€¼","date":"2020-05-27T15:42:18.000Z","updated":"2020-07-27T11:44:44.350Z","comments":true,"path":"2020/05/27/å‰‘æŒ‡ offerï¼š59-II-é˜Ÿåˆ—çš„æœ€å¤§å€¼/","link":"","permalink":"http://ziiyan.github.io/2020/05/27/%E5%89%91%E6%8C%87%20offer%EF%BC%9A59-II-%E9%98%9F%E5%88%97%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC/","excerpt":"","text":"é¢˜ç›®è¯·å®šä¹‰ä¸€ä¸ªé˜Ÿåˆ—å¹¶å®ç°å‡½æ•° max_value å¾—åˆ°é˜Ÿåˆ—é‡Œçš„æœ€å¤§å€¼ï¼Œè¦æ±‚å‡½æ•°max_valueã€push_back å’Œ pop_front çš„å‡æ‘Šæ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1)ã€‚ è‹¥é˜Ÿåˆ—ä¸ºç©ºï¼Œpop_front å’Œ max_value éœ€è¦è¿”å› -1 é™åˆ¶ï¼š 1 &lt;= push_back,pop_front,max_valueçš„æ€»æ“ä½œæ•° &lt;= 100001 &lt;= value &lt;= 10^5 æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/dui-lie-de-zui-da-zhi-lcofè‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚ è§£é¢˜æ€è·¯ç»´æŠ¤ä¸€ä¸ªå•è°ƒé€’å‡çš„é˜Ÿåˆ— maxxã€‚ value å…¥é˜Ÿæ—¶ï¼Œæ£€æŸ¥ maxx å°¾éƒ¨ï¼Œå°äºå½“å‰ value çš„å…ƒç´ å…¨éƒ¨å‡ºæ ˆã€‚ å…¥é˜Ÿ 4 queue 4 maxx 4 å…¥é˜Ÿ 2 queue 4 2 maxx 4 2 å…¥é˜Ÿ 3 queue 4 2 3 maxx 4 3 å‡ºé˜Ÿ queue 2 3 maxx 3 å¯ä»¥ä¿è¯ maxx é˜Ÿé¦–çš„å§‹ç»ˆæ˜¯ queue ä¸­çš„æœ€å¤§å€¼ ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748var MaxQueue = function() &#123; this.queue = []; this.maxx = [];&#125;;/** * @return &#123;number&#125; */MaxQueue.prototype.max_value = function() &#123; if (this.maxx.length) &#123; return this.maxx[0]; &#125; return -1;&#125;;/** * @param &#123;number&#125; value * @return &#123;void&#125; */MaxQueue.prototype.push_back = function(value) &#123; this.queue.push(value); while (this.maxx.length &amp;&amp; this.maxx[this.maxx.length-1] &lt; value) &#123; this.maxx.pop(); &#125; this.maxx.push(value);&#125;;/** * @return &#123;number&#125; */MaxQueue.prototype.pop_front = function() &#123; if (this.queue.length) &#123; let cur = this.queue.shift(); if (cur === this.maxx[0]) &#123; this.maxx.shift(); &#125; return cur; &#125; return -1;&#125;;/** * Your MaxQueue object will be instantiated and called as such: * var obj = new MaxQueue() * var param_1 = obj.max_value() * obj.push_back(value) * var param_3 = obj.pop_front() */ æ€»ç»“è”åŠ¨ åŒ…å«minå‡½æ•°çš„æ ˆ","categories":[],"tags":[{"name":"åˆ·é¢˜","slug":"åˆ·é¢˜","permalink":"http://ziiyan.github.io/tags/%E5%88%B7%E9%A2%98/"}]},{"title":"å‰‘æŒ‡ offerï¼š30. åŒ…å«minå‡½æ•°çš„æ ˆ","slug":"å‰‘æŒ‡ offerï¼š30-åŒ…å«minå‡½æ•°çš„æ ˆ","date":"2020-05-27T15:14:18.000Z","updated":"2020-07-27T11:44:13.546Z","comments":true,"path":"2020/05/27/å‰‘æŒ‡ offerï¼š30-åŒ…å«minå‡½æ•°çš„æ ˆ/","link":"","permalink":"http://ziiyan.github.io/2020/05/27/%E5%89%91%E6%8C%87%20offer%EF%BC%9A30-%E5%8C%85%E5%90%ABmin%E5%87%BD%E6%95%B0%E7%9A%84%E6%A0%88/","excerpt":"","text":"é¢˜ç›®å®šä¹‰æ ˆçš„æ•°æ®ç»“æ„ï¼Œè¯·åœ¨è¯¥ç±»å‹ä¸­å®ç°ä¸€ä¸ªèƒ½å¤Ÿå¾—åˆ°æ ˆçš„æœ€å°å…ƒç´ çš„ min å‡½æ•°åœ¨è¯¥æ ˆä¸­ï¼Œè°ƒç”¨ minã€push åŠ pop çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(1)ã€‚ æç¤ºï¼š å„å‡½æ•°çš„è°ƒç”¨æ€»æ¬¡æ•°ä¸è¶…è¿‡ 20000 æ¬¡ æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/bao-han-minhan-shu-de-zhan-lcofè‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚ è§£é¢˜æ€è·¯ç»´æŠ¤ä¸€ä¸ªå•è°ƒé€’å‡çš„æ ˆ minnï¼Œä¿è¯å½“å‰ stack ä¸­çš„æœ€å°å€¼å§‹ç»ˆä¿æŒåœ¨ minn çš„æœ«å°¾ï¼ˆæ ˆé¡¶ï¼‰ stackå‡ºæ ˆçš„æ—¶å€™æ£€æŸ¥æ˜¯å¦æ˜¯æœ€å°å€¼ï¼ˆå³ç­‰äºminn æ ˆé¡¶å…ƒç´ ï¼‰ ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354/** * initialize your data structure here. */var MinStack = function() &#123; this.minn = []; this.stack = [];&#125;;/** * @param &#123;number&#125; x * @return &#123;void&#125; */MinStack.prototype.push = function(x) &#123; this.stack.push(x); if (!this.minn.length) &#123; this.minn.push(x); &#125; else if (x &lt;= this.minn[this.minn.length-1]) &#123; this.minn.push(x); &#125;&#125;;/** * @return &#123;void&#125; */MinStack.prototype.pop = function() &#123; let t = this.stack.pop(); if (t === this.minn[this.minn.length-1]) &#123; this.minn.pop(); &#125; return t;&#125;;/** * @return &#123;number&#125; */MinStack.prototype.top = function() &#123; return this.stack[this.stack.length-1];&#125;;/** * @return &#123;number&#125; */MinStack.prototype.min = function() &#123; return this.minn[this.minn.length-1];&#125;;/** * Your MinStack object will be instantiated and called as such: * var obj = new MinStack() * obj.push(x) * obj.pop() * var param_3 = obj.top() * var param_4 = obj.min() */ æ€»ç»“è”åŠ¨ é˜Ÿåˆ—çš„æœ€å¤§å€¼","categories":[],"tags":[{"name":"åˆ·é¢˜","slug":"åˆ·é¢˜","permalink":"http://ziiyan.github.io/tags/%E5%88%B7%E9%A2%98/"}]},{"title":"å‰‘æŒ‡ offerï¼š09. ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—","slug":"å‰‘æŒ‡ offerï¼š09-ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—","date":"2020-05-27T15:06:18.000Z","updated":"2020-07-27T11:44:11.483Z","comments":true,"path":"2020/05/27/å‰‘æŒ‡ offerï¼š09-ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—/","link":"","permalink":"http://ziiyan.github.io/2020/05/27/%E5%89%91%E6%8C%87%20offer%EF%BC%9A09-%E7%94%A8%E4%B8%A4%E4%B8%AA%E6%A0%88%E5%AE%9E%E7%8E%B0%E9%98%9F%E5%88%97/","excerpt":"","text":"é¢˜ç›®ç”¨ä¸¤ä¸ªæ ˆå®ç°ä¸€ä¸ªé˜Ÿåˆ—ã€‚é˜Ÿåˆ—çš„å£°æ˜å¦‚ä¸‹ï¼Œè¯·å®ç°å®ƒçš„ä¸¤ä¸ªå‡½æ•° appendTail å’Œ deleteHead ï¼Œåˆ†åˆ«å®Œæˆåœ¨é˜Ÿåˆ—å°¾éƒ¨æ’å…¥æ•´æ•°å’Œåœ¨é˜Ÿåˆ—å¤´éƒ¨åˆ é™¤æ•´æ•°çš„åŠŸèƒ½ã€‚(è‹¥é˜Ÿåˆ—ä¸­æ²¡æœ‰å…ƒç´ ï¼ŒdeleteHead æ“ä½œè¿”å› -1 ) æç¤ºï¼š 1 &lt;= values &lt;= 10000æœ€å¤šä¼šå¯¹ appendTailã€deleteHead è¿›è¡Œ 10000 æ¬¡è°ƒç”¨ æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/yong-liang-ge-zhan-shi-xian-dui-lie-lcofè‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚ è§£é¢˜æ€è·¯stack1 è´Ÿè´£å…¥é˜Ÿï¼Œä¿è¯å…¥é˜Ÿé¡ºåºã€‚è¦ä¹ˆä¸ºç©ºï¼Œè¦ä¹ˆæ˜¯æ­£ç¡®çš„é˜Ÿåˆ—é¡ºåºã€‚ stack2 è´Ÿè´£å‡ºé˜Ÿï¼Œä¿è¯å‡ºé˜Ÿé¡ºåºã€‚è¦ä¹ˆä¸ºç©ºï¼Œè¦ä¹ˆæ˜¯é€†åºçš„é˜Ÿåˆ—é¡ºåºã€‚ ä»£ç 123456789101112131415161718192021222324252627282930313233var CQueue = function() &#123; this.stack1 = []; this.stack2 = [];&#125;;/** * @param &#123;number&#125; value * @return &#123;void&#125; */CQueue.prototype.appendTail = function(value) &#123; while (this.stack2.length) &#123; this.stack1.push(this.stack2.pop()) &#125; this.stack1.push(value) return null;&#125;;/** * @return &#123;number&#125; */CQueue.prototype.deleteHead = function() &#123; while (this.stack1.length) &#123; this.stack2.push(this.stack1.pop()) &#125; return this.stack2.length ? this.stack2.pop() : -1&#125;;/** * Your CQueue object will be instantiated and called as such: * var obj = new CQueue() * obj.appendTail(value) * var param_2 = obj.deleteHead() */ æ€»ç»“ æ°´é¢˜","categories":[],"tags":[{"name":"åˆ·é¢˜","slug":"åˆ·é¢˜","permalink":"http://ziiyan.github.io/tags/%E5%88%B7%E9%A2%98/"}]},{"title":"Vueé¢„æ¸²æŸ“å®æˆ˜-prerender-spa-plugin","slug":"Vueé¢„æ¸²æŸ“å®æˆ˜","date":"2020-05-27T03:17:16.000Z","updated":"2020-05-27T12:11:15.795Z","comments":true,"path":"2020/05/27/Vueé¢„æ¸²æŸ“å®æˆ˜/","link":"","permalink":"http://ziiyan.github.io/2020/05/27/Vue%E9%A2%84%E6%B8%B2%E6%9F%93%E5%AE%9E%E6%88%98/","excerpt":"","text":"å‰è¨€å®˜ç½‘éœ€è¦ SEOï¼Œçœ‹äº†ä¸‹æ–¹æ¡ˆè§‰å¾—é¢„æ¸²æŸ“æ¯”è¾ƒåˆé€‚ ç•Œé¢å°‘ å¼±äº¤äº’ æœåŠ¡å™¨ç«¯æ¸²æŸ“ vs é¢„æ¸²æŸ“ (SSR vs Prerendering) å¦‚æœä½ è°ƒç ”æœåŠ¡å™¨ç«¯æ¸²æŸ“ (SSR) åªæ˜¯ç”¨æ¥æ”¹å–„å°‘æ•°è¥é”€é¡µé¢ï¼ˆä¾‹å¦‚ /, /about, /contact ç­‰ï¼‰çš„ SEOï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦é¢„æ¸²æŸ“ã€‚æ— éœ€ä½¿ç”¨ web æœåŠ¡å™¨å®æ—¶åŠ¨æ€ç¼–è¯‘ HTMLï¼Œè€Œæ˜¯ä½¿ç”¨é¢„æ¸²æŸ“æ–¹å¼ï¼Œåœ¨æ„å»ºæ—¶ (build time) ç®€å•åœ°ç”Ÿæˆé’ˆå¯¹ç‰¹å®šè·¯ç”±çš„é™æ€ HTML æ–‡ä»¶ã€‚ä¼˜ç‚¹æ˜¯è®¾ç½®é¢„æ¸²æŸ“æ›´ç®€å•ï¼Œå¹¶å¯ä»¥å°†ä½ çš„å‰ç«¯ä½œä¸ºä¸€ä¸ªå®Œå…¨é™æ€çš„ç«™ç‚¹ã€‚ å¦‚æœä½ ä½¿ç”¨ webpackï¼Œä½ å¯ä»¥ä½¿ç”¨ prerender-spa-plugin è½»æ¾åœ°æ·»åŠ é¢„æ¸²æŸ“ã€‚å®ƒå·²ç»è¢« Vue åº”ç”¨ç¨‹åºå¹¿æ³›æµ‹è¯• - äº‹å®ä¸Šï¼Œä½œè€…æ˜¯ Vue æ ¸å¿ƒå›¢é˜Ÿçš„æˆå‘˜ã€‚ What is Prerendering? Recently, SSR (Server Side Rendering) has taken the JavaScript front-end world by storm. The fact that you can now render your sites and apps on the server before sending them to your clients is an absolutely revolutionary idea (and totally not what everyone was doing before JS client-side apps got popular in the first placeâ€¦) However, the same criticisms that were valid for PHP, ASP, JSP, (and such) sites are valid for server-side rendering today. Itâ€™s slow, breaks fairly easily, and is difficult to implement properly. Thing is, despite what everyone might be telling you, you probably donâ€™t need SSR. You can get almost all the advantages of it (without the disadvantages) by using prerendering. Prerendering is basically firing up a headless browser, loading your appâ€™s routes, and saving the results to a static HTML file. You can then serve it with whatever static-file-serving solution you were using previously. It just works with HTML5 navigation and the likes. No need to change your code or add server-side rendering workarounds. In the interest of transparency, there are some use-cases where prerendering might not be a great idea. Tons of routes - If your site has hundreds or thousands of routes, prerendering will be really slow. Sure you only have to do it once per update, but it could take ages. Most people donâ€™t end up with thousands of static routes, but just in-caseâ€¦ Dynamic Content - If your render routes that have content thatâ€™s specific to the user viewing it or other dynamic sources, you should make sure you have placeholder components that can display until the dynamic content loads on the client-side. Otherwise it might be a tad weird. ä¸‰ç§ä¸åŒæ¸²æŸ“æ–¹å¼çš„åŒºåˆ« å®¢æˆ·ç«¯æ¸²æŸ“ï¼šç”¨æˆ·è®¿é—® url -&gt; è¯·æ±‚ html æ–‡ä»¶ -&gt; åŠ è½½ css/js -&gt; å‰ç«¯åŠ¨æ€æ¸²æŸ“é¡µé¢å†…å®¹ æ€§èƒ½æ¶ˆè€—åœ¨å®¢æˆ·ç«¯ æœåŠ¡ç«¯æ¸²æŸ“ï¼šç”¨æˆ·è®¿é—® url -&gt; æœåŠ¡ç«¯æ ¹æ®è®¿é—®è·¯å¾„è¯·æ±‚æ‰€éœ€æ•°æ® -&gt; æ‹¼æ¥æˆ html -&gt; è¿”å›ç»™å‰ç«¯ ç½‘ç»œä¼ è¾“æ•°æ®é‡å¤§ é¢„æ¸²æŸ“ï¼šæ„å»ºé˜¶æ®µç”ŸæˆåŒ¹é…é¢„æ¸²æŸ“è·¯å¾„çš„ html æ–‡ä»¶ -&gt; ç”¨æˆ·è®¿é—® url -&gt; è¿”å› html ç»™å‰ç«¯ æ„å»ºå‡ºæ¥çš„ html æ–‡ä»¶å·²ç»æœ‰é™æ€æ•°æ®ï¼Œéœ€è¦ajaxæ•°æ®çš„éƒ¨åˆ†æœªæ„å»º åŸç† puppeteeræ˜¯è°·æ­Œå‡ºå“çš„ä¸€ä¸ªæ’ä»¶ï¼Œå¯ä»¥å®Œæˆå¾ˆå¤šçš„æ“ä½œï¼Œå¹¿æ³›ä½¿ç”¨åœ¨çˆ¬è™«ã€æµ‹è¯•è‡ªåŠ¨åŒ–ç­‰æµè§ˆå™¨è‡ªåŠ¨åŒ–æ–¹å‘çš„åº”ç”¨ï¼Œè€Œprerender-spa-pluginè¿™ä¸ªæ’ä»¶æ­£æ˜¯ä¾èµ–puppeteeræ“ä½œchromiumè¿™ä¸ªçœŸæ­£çš„æµè§ˆå™¨å†…æ ¸å¯¹SPAè·‘äº†ä¸€éï¼Œç”Ÿæˆä¸€ä¸ªé™æ€çš„HTMLï¼Œé‡Œé¢æ˜¯å·²ç»å¡«å¥½çš„domèŠ‚ç‚¹å’Œæ•°æ®ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ç²—æš´ï¼Œä¸ºäº†ç»™ç”¨æˆ·ç›´æ¥è¿”å›æœ‰å†…å®¹çš„xhtmlæ–‡æ¡£ï¼Œæå‰åœ¨ä¸€ä¸ªæµè§ˆå™¨é‡Œè·‘äº†ä¸€éï¼Œç”Ÿæˆäº†è·‘è¿‡jså’Œcssä¹‹åindex.html(è·Ÿè·¯ç”±)å’Œå…¶ä»–æ–‡æ¡£ã€‚è¿™æ ·çš„è¯æœ‰ä¸¤ä¸ªç¼ºé™·ï¼Œç¬¬ä¸€ä¸ªï¼šæ— æ³•å±•ç¤ºç”¨æˆ·è‡ªèº«çš„å†…å®¹ï¼Œç¬¬äºŒä¸ªï¼šä¸é€‚åˆåŠ¨æ€è·¯ç”±å¤šçš„å¤§å‹é¡¹ç›®ã€‚ ä½œè€…ï¼šmguy_1é“¾æ¥ï¼šhttps://juejin.im/post/5c125787f265da611d668807æ¥æºï¼šæ˜é‡‘è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚ å®‰è£…1yarn install prerender-spa-plugin --save é…ç½®123456// router.jsconst router = new VueRouter(&#123; mode: 'history', base: process.env.BASE_URL, routes&#125;) 1234567891011121314151617// vue.config.jsconst PrerenderSPAPlugin = require('prerender-spa-plugin');const Renderer = PrerenderSPAPlugin.PuppeteerRenderer;module.exports = &#123; configureWebpack: &#123; â€¦â€¦ plugins: [ new PrerenderSPAPlugin(&#123; // è¾“å‡ºè·¯å¾„ staticDir: path.join(__dirname, 'dist'), // éœ€è¦é¢„æ¸²æŸ“çš„è·¯ç”± routes: ['/'] &#125;) ] &#125;&#125; åè®°é…ç½®è¿˜æ˜¯æ¯”è¾ƒç®€å•ï¼Œå‘ç‚¹æ˜¯ prerender-spa-plugin å®‰è£…è¶…çº§æ…¢ã€‚å®˜æ–¹æºå’Œæ·˜å®æºæ¢æ¥æ¢å» / ç§‘å­¦ä¸Šç½‘å¼€å¼€å…³å…³ï¼ŒæŠ˜è…¾äº†åŠå¤©æ‰ä¸‹å¥½ã€‚ éƒ½è¯´å¤§é‡è·¯ç”±ä¸é€‚åˆç”¨é¢„æ¸²æŸ“ï¼Œä½†å®é™…ä¸Šä¸»è¦æ˜¯æ„å»ºè¿‡ç¨‹æ¯”è¾ƒæ…¢ï¼Œä¼¼ä¹å¯¹ç”¨æˆ·æ¥è¯´æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Ÿ","categories":[],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://ziiyan.github.io/tags/Vue/"},{"name":"æµè§ˆå™¨","slug":"æµè§ˆå™¨","permalink":"http://ziiyan.github.io/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"}]},{"title":"webæ€§èƒ½æƒå¨æŒ‡å—-ç½‘ç»œæŠ€æœ¯æ¦‚è§ˆ","slug":"webæ€§èƒ½æƒå¨æŒ‡å—-ç½‘ç»œæŠ€æœ¯æ¦‚è§ˆ","date":"2020-05-27T02:48:02.000Z","updated":"2020-06-09T15:36:51.827Z","comments":true,"path":"2020/05/27/webæ€§èƒ½æƒå¨æŒ‡å—-ç½‘ç»œæŠ€æœ¯æ¦‚è§ˆ/","link":"","permalink":"http://ziiyan.github.io/2020/05/27/web%E6%80%A7%E8%83%BD%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97-%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF%E6%A6%82%E8%A7%88/","excerpt":"","text":"ç¬¬1ç«  å»¶è¿Ÿä¸å¸¦å®½ å»¶è¿Ÿ ï¼šåˆ†ç»„ä»ä¿¡æ¯æºå‘é€åˆ°ç›®çš„åœ°æ‰€éœ€çš„æ—¶é—´ å¸¦å®½ ï¼šé€»è¾‘æˆ–ç‰©ç†é€šä¿¡è·¯å¾„æœ€å¤§çš„ååé‡ å»¶è¿Ÿçš„æ„æˆ å»¶è¿Ÿæ˜¯æ¶ˆæ¯ï¼ˆ messageï¼‰æˆ–åˆ†ç»„ï¼ˆpacketï¼‰ä»èµ·ç‚¹åˆ°ç»ˆç‚¹ç»å†çš„æ—¶é—´ã€‚ è·¯ç”±å™¨ ä¼ æ’­å»¶è¿Ÿï¼šæ¶ˆæ¯ä»å‘é€ç«¯åˆ°æ¥æ”¶ç«¯éœ€è¦çš„æ—¶é—´ ä¼ è¾“å»¶è¿Ÿï¼šæ¶ˆæ¯ä¸­çš„æ‰€æœ‰æ¯”ç‰¹è½¬ç§»åˆ°é“¾è·¯ä¸­éœ€è¦çš„æ—¶é—´ å¤„ç†å»¶è¿Ÿï¼šå¤„ç†åˆ†ç»„é¦–éƒ¨ã€æ£€æŸ¥ä½é”™è¯¯åŠç¡®å®šåˆ†ç»„ç›®æ ‡æ‰€éœ€çš„æ—¶é—´ æ’é˜Ÿå»¶è¿Ÿï¼šåˆ°æ¥çš„åˆ†ç»„æ’é˜Ÿç­‰å¾…å¤„ç†çš„æ—¶é—´ -&gt; ç¼“å†²åŒºçˆ†æ»¡ ä¼ æ’­å»¶è¿Ÿ CDNï¼ˆContent Delivery Networkï¼Œå†…å®¹åˆ†å‘ç½‘ç»œï¼‰ æŠŠå†…å®¹éƒ¨ç½²åœ¨å…¨çƒå„åœ°ï¼Œè®©ç”¨æˆ·ä»æœ€è¿‘çš„æœåŠ¡å™¨åŠ è½½å†…å®¹ï¼Œå¤§å¹…é™ä½ä¼ æ’­åˆ†ç»„çš„æ—¶é—´ã€‚ å¤§å¤šæ•°ç½‘ç«™æ€§èƒ½çš„ç“¶é¢ˆéƒ½æ˜¯å»¶è¿Ÿï¼Œè€Œä¸æ˜¯å®½å¸¦ã€‚ ç¬¬2ç«  TCPçš„æ„æˆå› ç‰¹ç½‘ä¸¤ä¸ªæ ¸å¿ƒåè®®ï¼š IPï¼ˆInternet Protocolï¼Œå› ç‰¹ç½‘åè®®ï¼‰ è´Ÿè´£è”ç½‘ä¸»æœºä¹‹é—´çš„è·¯ç”±é€‰æ‹©å’Œå¯»å€ TCPï¼ˆTransmission Control Protocolï¼Œä¼ è¾“æ§åˆ¶åè®®ï¼‰ è´Ÿè´£åœ¨ä¸å¯é çš„ä¼ è¾“ä¿¡é“ä¹‹ä¸Šæä¾›å¯é çš„æŠ½è±¡å±‚ TCP/IP å¸¸è¢«ç§°ä¸º â€œå› ç‰¹ç½‘åè®®å¥—ä»¶â€ï¼ˆInternet Protocol Suiteï¼‰ ä¸‰æ¬¡æ¡æ‰‹å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨åœ¨äº¤æ¢åº”ç”¨æ•°æ®ä¹‹å‰ï¼Œå¿…é¡»å°±èµ·å§‹åˆ†ç»„åºåˆ—å·ï¼Œä»¥åŠå…¶ä»–ä¸€äº›è¿æ¥ç›¸å…³çš„ç»†èŠ‚è¾¾æˆä¸€è‡´ï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼Œåºåˆ—å·ç”±ä¸¤ç«¯éšæœºç”Ÿæˆã€‚ SYNï¼ˆsynchronousï¼‰ å®¢æˆ·ç«¯é€‰æ‹©ä¸€ä¸ªéšæœºåºåˆ—å· xï¼Œå¹¶å‘é€ä¸€ä¸ª SYN åˆ†ç»„ï¼Œå…¶ä¸­å¯èƒ½è¿˜åŒ…æ‹¬å…¶ä»– TCP æ ‡å¿—å’Œé€‰é¡¹ SYN ACK æœåŠ¡å™¨ç»™ x åŠ  1ï¼Œå¹¶é€‰æ‹©è‡ªå·±çš„ä¸€ä¸ªéšæœºåºåˆ—å· yï¼Œè¿½åŠ è‡ªå·±çš„æ ‡å¿—å’Œé€‰é¡¹ï¼Œè¿”å›å“åº” ACKï¼ˆacknowledgementï¼‰ å®¢æˆ·ç«¯ç»™ x å’Œ y åŠ  1 å¹¶å‘é€æ¡æ‰‹æœŸé—´çš„æœ€åä¸€ä¸ª ACK åˆ†ç»„ å®¢æˆ·ç«¯å¯ä»¥åœ¨å‘é€ACKåˆ†ç»„ä¹‹åç«‹å³å‘é€æ•°æ®ï¼Œè€ŒæœåŠ¡å™¨å¿…é¡»ç­‰æ¥æ”¶åˆ°ACKåˆ†ç»„ä¹‹åæ‰èƒ½å‘é€æ•°æ®ã€‚ ä¸‰æ¬¡æ¡æ‰‹å¸¦æ¥çš„å»¶è¿Ÿä½¿å¾—æ¯åˆ›å»ºä¸€ä¸ªæ–°TCPè¿æ¥éƒ½è¦ä»˜å‡ºå¾ˆå¤§ä»£ä»·ã€‚è€Œè¿™ä¹Ÿå†³å®šäº†æé«˜TCPåº”ç”¨æ€§èƒ½çš„å…³é”®ï¼Œåœ¨äºæƒ³åŠæ³•é‡ç”¨è¿æ¥ã€‚ æ‹¥å¡é¢„é˜²åŠæ§åˆ¶æµé‡æ§åˆ¶ æµé‡æ§åˆ¶æ˜¯ä¸€ç§é¢„é˜²å‘é€ç«¯è¿‡å¤šå‘æ¥æ”¶ç«¯å‘é€æ•°æ®çš„æœºåˆ¶ ä¸ºå®ç°æµé‡æ§åˆ¶ï¼ŒTCP è¿æ¥çš„æ¯ä¸€æ–¹éƒ½è¦é€šå‘Šè‡ªå·±çš„æ¥æ”¶çª—å£ï¼ˆrwndï¼‰ï¼Œå…¶ä¸­åŒ…å«èƒ½å¤Ÿä¿å­˜æ•°æ®çš„ç¼“å†²åŒºç©ºé—´å¤§å°ä¿¡æ¯ ç¬¬ä¸€æ¬¡å»ºç«‹è¿æ¥æ—¶ï¼Œä¸¤ç«¯éƒ½ä¼šä½¿ç”¨è‡ªèº«ç³»ç»Ÿçš„é»˜è®¤è®¾ç½®æ¥å‘é€rwnd å¦‚æœå…¶ä¸­ä¸€ç«¯è·Ÿä¸ä¸Šæ•°æ®ä¼ è¾“ï¼Œé‚£å®ƒå¯ä»¥å‘å‘é€ç«¯é€šå‘Šä¸€ä¸ªè¾ƒå°çš„çª—å£ è¿™ä¸ªè¿‡ç¨‹è´¯ç©¿äºæ¯ä¸ªTCPè¿æ¥çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼š æ¯ä¸ªACKåˆ†ç»„éƒ½ä¼šæºå¸¦ç›¸åº”çš„æœ€æ–°rwndå€¼ï¼Œä»¥ä¾¿ä¸¤ç«¯åŠ¨æ€è°ƒæ•´æ•°æ®æµé€Ÿï¼Œä½¿ä¹‹é€‚åº”å‘é€ç«¯å’Œæ¥æ”¶ç«¯çš„å®¹é‡åŠå¤„ç†èƒ½åŠ› æ…¢å¯åŠ¨ æœåŠ¡å™¨é€šè¿‡TCPè¿æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„æ‹¥å¡çª—å£ï¼ˆcwndï¼‰å˜é‡ï¼Œå°†å…¶å€¼è®¾ç½®ä¸ºä¸€ä¸ªç³»ç»Ÿè®¾å®šçš„ä¿å®ˆå€¼ å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´æœ€å¤§å¯ä»¥ä¼ è¾“ï¼ˆæœªç»ACKç¡®è®¤çš„ï¼‰æ•°æ®é‡å–rwndå’Œcwndå˜é‡ä¸­çš„æœ€å°å€¼ æ…¢å¯åŠ¨é™åˆ¶äº†å¯ç”¨çš„ååé‡ï¼Œè¿™å¯¹äºå°æ–‡ä»¶ä¼ è¾“éå¸¸ä¸åˆ© æ‹¥å¡é¢„é˜² TCPè°ƒèŠ‚æ€§èƒ½ä¸»è¦ä¾èµ–ä¸¢åŒ…åé¦ˆæœºåˆ¶ã€‚ æ‹¥å¡é¢„é˜²ç®—æ³•æŠŠä¸¢åŒ…ä½œä¸ºç½‘ç»œæ‹¥å¡çš„æ ‡å¿— å³è·¯å¾„ä¸­æŸä¸ªè¿æ¥æˆ–è·¯ç”±å™¨å·²ç»æ‹¥å µäº†ï¼Œä»¥è‡³äºå¿…é¡»é‡‡å–åˆ åŒ…æªæ–½ å¿…é¡»è°ƒæ•´çª—å£å¤§å°ï¼Œä»¥é¿å…é€ æˆæ›´å¤šçš„åŒ…ä¸¢å¤±ï¼Œä»è€Œä¿è¯ç½‘ç»œç•…é€š é‡ç½®æ‹¥å¡çª—å£åï¼Œæ‹¥å¡é¢„é˜²æœºåˆ¶æŒ‰ç…§è‡ªå·±çš„ç®—æ³•æ¥å¢å¤§çª—å£ä»¥å°½é‡é¿å…ä¸¢åŒ…ã€‚ å®½å¸¦å»¶è¿Ÿç§¯ç¬¬3ç«  UDPçš„æ„æˆç¬¬4ç«  ä¼ è¾“å±‚å®‰å…¨ï¼ˆTLSï¼‰","categories":[],"tags":[{"name":"æ€§èƒ½","slug":"æ€§èƒ½","permalink":"http://ziiyan.github.io/tags/%E6%80%A7%E8%83%BD/"},{"name":"ç½‘ç»œ","slug":"ç½‘ç»œ","permalink":"http://ziiyan.github.io/tags/%E7%BD%91%E7%BB%9C/"}]},{"title":"å‰‘æŒ‡ offerï¼š38.å­—ç¬¦ä¸²çš„æ’åˆ—","slug":"å‰‘æŒ‡ offerï¼š38-å­—ç¬¦ä¸²çš„æ’åˆ—","date":"2020-05-25T15:42:18.000Z","updated":"2020-07-27T11:44:22.476Z","comments":true,"path":"2020/05/25/å‰‘æŒ‡ offerï¼š38-å­—ç¬¦ä¸²çš„æ’åˆ—/","link":"","permalink":"http://ziiyan.github.io/2020/05/25/%E5%89%91%E6%8C%87%20offer%EF%BC%9A38-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%8E%92%E5%88%97/","excerpt":"","text":"é¢˜ç›®è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰“å°å‡ºè¯¥å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„æ‰€æœ‰æ’åˆ—ã€‚ ä½ å¯ä»¥ä»¥ä»»æ„é¡ºåºè¿”å›è¿™ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œä½†é‡Œé¢ä¸èƒ½æœ‰é‡å¤å…ƒç´ ã€‚ é™åˆ¶ï¼š 1 &lt;= s çš„é•¿åº¦ &lt;= 8 æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/zi-fu-chuan-de-pai-lie-lcofè‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚ è§£é¢˜æ€è·¯å­—ç¬¦ä¸² &quot;abc&quot; ï¼Œä½œä¸ºæ•°ç»„ [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]ï¼Œå¯¹æ•°ç»„[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;] çš„å…ƒç´ è¿›è¡Œå…¨æ’åˆ—ï¼Œå»é‡ã€‚ vis æ ‡è®°æ•°ç»„å¯¹åº”ä½ç½®æ˜¯å¦å·²ç»ä½¿ç”¨è¿‡ã€‚ é€’å½’ï¼Œæ¯æ¬¡åœ¨æ•°ç»„ä¸­é€‰æ‹©ä¸€ä¸ªæœªä½¿ç”¨çš„å­—ç¬¦æ”¾å…¥ä¸´æ—¶å­—ç¬¦ä¸²ã€‚ é€’å½’å‡ºå£ï¼šä¸´æ—¶å­—ç¬¦ä¸²é•¿åº¦ = è¾“å…¥å­—ç¬¦ä¸²é•¿åº¦ã€‚ é‡‡ç”¨ Set å»é‡ã€‚ ä»£ç 123456789101112131415161718192021222324/** * @param &#123;string&#125; s * @return &#123;string[]&#125; */var permutation = function(s) &#123; let len = s.length; let vis = new Array(len).fill(false); const dfs = function (ans, str) &#123; if (str.length === len) &#123; ans.add(str); return; &#125; for (let i = 0; i &lt; len; i++) &#123; if (!vis[i]) &#123; vis[i] = true; dfs(ans, str+s[i]); vis[i] = false; &#125; &#125; &#125; let ans = new Set(); dfs(ans, ''); return [...ans];&#125;; æ€»ç»“æ’åˆ— ğŸ”— å›æº¯ set ç”¨æ³• add() æ·»åŠ å…ƒç´  æ‰©å±•è¿ç®—ç¬¦ ... [â€¦Set] ===&gt; Array","categories":[],"tags":[{"name":"åˆ·é¢˜","slug":"åˆ·é¢˜","permalink":"http://ziiyan.github.io/tags/%E5%88%B7%E9%A2%98/"}]},{"title":"PWAå…¥é—¨","slug":"PWAå…¥é—¨","date":"2020-05-23T09:30:58.000Z","updated":"2020-06-02T04:32:57.669Z","comments":true,"path":"2020/05/23/PWAå…¥é—¨/","link":"","permalink":"http://ziiyan.github.io/2020/05/23/PWA%E5%85%A5%E9%97%A8/","excerpt":"","text":"PWA åŸºæœ¬ä»‹ç»PWA æ˜¯ä»€ä¹ˆProgressive Web Appï¼Œæ¸è¿›å¼ Web åº”ç”¨ï¼Œæå‡ Web App ä½“éªŒçš„æ–¹æ³•ï¼Œç»™ç”¨æˆ·åŸç”Ÿç”¨æˆ·çš„ä½“éªŒã€‚https://developer.mozilla.org/zh-CN/docs/Web/Progressive_web_apps PWA çš„ä¼˜åŠ¿ æ¸è¿›å¼ - é€‚ç”¨äºæ‰€æœ‰æµè§ˆå™¨ï¼Œä¸å½±å“åŸ Web App åŠŸèƒ½ æµç•… - å€ŸåŠ© Wervice Worker åœ¨ç¦»çº¿æˆ–è€…ç½‘ç»œè¾ƒå·®çš„æƒ…å†µä¸‹æ­£å¸¸è®¿é—® å¯å®‰è£… - ç”¨æˆ·å¯ä»¥æ·»åŠ å¸¸ç”¨çš„ webapp åˆ°æ¡Œé¢ï¼Œå…å»åº”ç”¨å•†åº—ä¸‹è½½çš„éº»çƒ¦ åŸç”Ÿä½“éªŒ - å’Œ app ä¸€æ ·ï¼Œæ‹¥æœ‰é¦–å±åŠ è½½åŠ¨ç”»ï¼Œå¯ä»¥éšè—åœ°å€æ ç­‰æ²‰æµ¸å¼ä½“éªŒ ç²˜æ€§ - é€šè¿‡æ¨é€ç¦»çº¿é€šçŸ¥ç­‰ï¼Œå¯ä»¥è®©ç”¨æˆ·å›æµ PWA æ ¸å¿ƒæŠ€æœ¯æ­ç§˜web app manifestï¼šåº”ç”¨ç¨‹åºæ¸…å•https://developer.mozilla.org/zh-CN/docs/Web/Manifest åŸºæœ¬ä»‹ç» web app manifest æ˜¯ PWA æŠ€æœ¯é›†åˆçš„ä¸€éƒ¨åˆ† web app manifest å¯ä»¥è®©ç½‘ç«™å®‰è£…åˆ°è®¾å¤‡çš„ä¸»å±å¹•ï¼Œè€Œä¸éœ€è¦ç”¨æˆ·é€šè¿‡åº”ç”¨å•†åº—è¿›è¡Œä¸‹è½½ web app manifestï¼Œåœ¨ä¸€ä¸ª JSON æ–‡æœ¬æ–‡ä»¶ä¸­æä¾›æœ‰å…³åº”ç”¨ç¨‹åºçš„ä¿¡æ¯ï¼ˆå¦‚åç§°ã€ä½œè€…ã€å›¾æ ‡å’Œæè¿°ï¼‰ ä¼ ç»Ÿçš„ web app å…¥å£ï¼š ç½‘å€ ä¹¦ç­¾ï¼Œæ”¶è—å¤¹ ç›´æ¥æœç´¢ Web app manifest å¯ä»¥æ·»åŠ åˆ°æ¡Œé¢ï¼Œæœ‰å”¯ä¸€çš„å›¾æ ‡å’Œåç§° æœ‰å¯åŠ¨æ—¶ç•Œé¢ï¼Œé¿å…ç”Ÿç¡¬çš„è¿‡æ¸¡ éšè—æµè§ˆå™¨ç›¸å…³çš„ UIï¼Œæ¯”å¦‚åœ°å€æ ç­‰ ä½¿ç”¨æ­¥éª¤ é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª manifes.json æ–‡ä»¶ åœ¨ index.html ä¸­å¼•å…¥ manifes.json æ–‡ä»¶ 1&lt;link rel=\"manifest\" href=\"manifest.json\" /&gt; åœ¨ manifest.json æ–‡ä»¶ä¸­æä¾›å¸¸è§çš„é…ç½® éœ€è¦åœ¨ https åè®®æˆ– http://localhost ä¸‹è®¿é—®é¡¹ç›® å¸¸è§é…ç½® name åº”ç”¨çš„åç§° ç”¨æˆ·å®‰è£…æ¨ªå¹…æç¤ºçš„åç§° å¯åŠ¨ç”»é¢ä¸­çš„æ–‡å­— short_name åº”ç”¨çš„çŸ­åç§° ä¸»å±å¹•æ˜¾ç¤º start_url è®¾å¤‡å¯åŠ¨åº”ç”¨ç¨‹åºæ—¶åŠ è½½çš„ url ç»å¯¹è·¯å¾„ / ç›¸å¯¹è·¯å¾„ iconsï¼šå›¾æ ‡å¯¹è±¡æ•°ç»„ ä¸€èˆ¬é… 144x144 background_colorï¼šå¯åŠ¨åŠ¨ç”»çš„èƒŒæ™¯é¢œè‰² theme_colorï¼šåº”ç”¨ç¨‹åºçš„ä¸»é¢˜é¢œè‰² displayï¼šapp æ˜¾ç¤ºæ¨¡å¼ fullscreen standalone minimal-ui service worker ä¸€ä¸ªæ ‡å‡†çš„ PWA ç¨‹åºï¼Œå¿…é¡»åŒ…å« 3 ä¸ªéƒ¨åˆ† https æœåŠ¡å™¨æˆ–è€… http://localhost manifest.json service worker W3C ç»„ç»‡åœ¨ 14 å¹´ 5 æœˆæå‡º service worker è¿™æ ·ä¸€ä¸ª HTML5 APIï¼Œä¸»è¦ç”¨æ¥åšæŒä¹…çš„ç¦»çº¿ç¼“å­˜ å‰ç«¯æœ‰å¾ˆå¤šæ€§èƒ½ä¼˜åŒ–æ‰‹æ®µï¼ˆå¿…é¡»è”ç½‘ï¼‰ CDN CSS Sprite æ–‡ä»¶çš„åˆå¹¶å‹ç¼© å¼‚æ­¥åŠ è½½ èµ„æºç¼“å­˜ service worker å…è®¸ web åº”ç”¨åœ¨ç½‘ç»œç¯å¢ƒæ¯”è¾ƒå·®æˆ–è€…æ˜¯ç¦»çº¿çš„ç¯å¢ƒä¸‹ä¾æ—§å¯ä»¥ä½¿ç”¨ service worker å¯ä»¥æå¤§çš„æå‡ web app çš„ç”¨æˆ·ä½“éªŒ service worker æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ worker çº¿ç¨‹ï¼Œç‹¬ç«‹äºå½“å‰ç½‘é¡µè¿›ç¨‹ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„ web worker web workerç®€ä»‹ æµè§ˆå™¨ä¸­çš„ JavaScript éƒ½æ˜¯è¿è¡Œåœ¨ä¸€ä¸ªå•ä¸€ä¸»çº¿ç¨‹ä¸Šçš„ï¼Œåœ¨åŒä¸€æ—¶é—´å†…åªèƒ½åšä¸€ä»¶äº‹ éšç€ web ä¸šåŠ¡ä¸æ–­å¤æ‚ï¼Œé€æ¸åœ¨ JavaScript ä¸­åŠ äº†å¾ˆå¤šå¤æ‚è¿ç®—è¿‡ç¨‹ï¼Œå¦‚æœåœ¨ä¸»çº¿ç¨‹ä¸­è®¡ç®—ï¼Œä¼šé€ æˆæ€§èƒ½é—®é¢˜ W3c æä¾› web worker çš„ APIï¼Œweb worker è„±ç¦»åœ¨ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œå°†å¤æ‚çš„åŠŸèƒ½ç‹¬ç«‹äºä¸»çº¿ç¨‹ å®Œæˆåé€šè¿‡ postMessage æ–¹æ³•å‘Šè¯‰ä¸»çº¿ç¨‹ web worker æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿è¡Œç¯å¢ƒï¼Œä¸èƒ½æ“ä½œ DOM å’Œ BOM ä½¿ç”¨ åˆ›å»º 1var worker = new Worker('work.js') æ‰§è¡Œå¤æ‚è®¡ç®— é€šçŸ¥ä¸»çº¿ç¨‹ 1self.postMessage(msg) ä¸»çº¿ç¨‹ç›‘å¬æ¶ˆæ¯ 1worker.onmessage = function(msg) &#123;&#125; service worker åŸºæœ¬ä»‹ç» web worker æ˜¯ä¸´æ—¶çš„ï¼Œæ— æ³•æ“ä½œç¼“å­˜ï¼Œæ— æ³•æŒä¹…å­˜å‚¨ service worker ä¸€æ—¦è¢« installï¼Œå°±æ°¸è¿œå­˜åœ¨ï¼Œé™¤éè¢«æ‰‹åŠ¨ unregister ç”¨åˆ°çš„æ—¶å€™å¯ä»¥ç›´æ¥å”¤é†’ï¼Œä¸ç”¨çš„æ—¶å€™è‡ªåŠ¨ç¡çœ  å¯ç¼–ç¨‹æ‹¦æˆªä»£ç†è¯·æ±‚å’Œè¿”å›ï¼Œç¼“å­˜æ–‡ä»¶ï¼Œç¼“å­˜çš„æ–‡ä»¶å¯ä»¥è¢«ç½‘é¡µè¿›ç¨‹å–åˆ°ï¼ˆåŒ…æ‹¬ç½‘ç»œç¦»çº¿çŠ¶æ€ï¼‰ ç¦»çº¿å†…å®¹å¼€å‘è€…å¯æ§ å¿…é¡»åœ¨ HTTPS ç¯å¢ƒä¸‹æ‰èƒ½å·¥ä½œ å¼‚æ­¥å®ç°ï¼Œå†…éƒ¨å¤§éƒ½æ˜¯é€šè¿‡ Promise å®ç° ![image-20200524233840196](/Users/wuziyan/Library/Application Support/typora-user-images/image-20200524233840196.png) service worker ä½¿ç”¨æ­¥éª¤ åœ¨ window.onload ä¸­æ³¨å†Œ service workerï¼Œé˜²æ­¢ä¸å…¶ä»–èµ„æºç«äº‰ navigator å¯¹è±¡ä¸­å†…ç½®äº† serviceWorker å±æ€§ service worker åœ¨è€ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸­ä¸æ”¯æŒï¼Œéœ€è¦è¿›è¡Œæµè§ˆå™¨å…¼å®¹ if (â€˜serviceWorkerâ€™ in navigator) {} æ³¨å†Œ service worker navigator.serviceWorker.register(â€˜./sw.jsâ€™)ï¼Œè¿”å›ä¸€ä¸ª promise å¯¹è±¡ 12345678910window.onload = function () &#123; if ('serviceWorker' in navigator) &#123; navigator.serviceWorker .register('./sw.js') .then(resitration =&gt; &#123;console.log(resitration)&#125;) .catch(err =&gt; &#123; console.log(err) &#125;) &#125;&#125; service worker ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ Install äº‹ä»¶ æ³¨å†ŒæˆåŠŸè§¦å‘ ç”¨äºç¼“å­˜èµ„æº activate äº‹ä»¶ æ¿€æ´»æ—¶å€™è§¦å‘ ç”¨äºåˆ é™¤é™ˆæ—§èµ„æº fetch äº‹ä»¶ å‘é€è¯·æ±‚æ—¶å€™è§¦å‘ ç”¨äºæ“ä½œç¼“å­˜æˆ–è€…è¯»å–ç½‘ç»œèµ„æº sw.js æ”¹å˜ï¼Œinstall äº‹ä»¶é‡æ–°è§¦å‘ activate äº‹ä»¶åœ¨ install äº‹ä»¶åè§¦å‘ ä½†å·²å­˜åœ¨ service worker äº†ï¼Œé‚£ä¹ˆå°±å¤„äºç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°å½“å‰ service worker ç»ˆæ­¢ å¯ä»¥é€šè¿‡ self.skipWaiting() æ–¹æ³•è·³è¿‡ç­‰å¾…ï¼Œè¿”å›ä¸€ä¸ª promise å¯¹è±¡ event.waitUnitl(promise å¯¹è±¡) promise å¯¹è±¡æ‰§è¡Œç»“æŸåæ‰ç»“æŸå½“å‰ç”Ÿå‘½å‘¨æœŸå‡½æ•° é˜²æ­¢æµè§ˆå™¨åœ¨å¼‚æ­¥æ“ä½œå‰åœæ­¢ç”Ÿå‘½å‘¨æœŸ Service worker æ¿€æ´»åï¼Œä¼šåœ¨ä¸‹ä¸€æ¬¡åˆ·æ–°é¡µé¢çš„æ—¶å€™ç”Ÿæ•ˆ å¯ä»¥é€šè¿‡ self.clients.claim() ç«‹å³è·å–æ§åˆ¶æƒ promise å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œæ¯”ä¼ ç»Ÿæ–¹æ¡ˆï¼ˆå›è°ƒå‡½æ•°å’Œäº‹ä»¶ï¼‰æ›´åˆç† ä»¥é“¾å¼çš„æ–¹å¼è¿›è¡Œå¼‚æ­¥ç¼–ç¨‹ï¼Œè§£å†³å›è°ƒåœ°ç‹± å¸¸ç”¨æ–¹æ³• Promise.resolve() Promise.reject() Promise.all() Promise.race() async / await ä½¿å¼‚æ­¥æ“ä½œæ›´æ–¹ä¾¿ async ä¿®é¥°å‡½æ•°ï¼Œasync function fn() {} await å‡½æ•°è¿”å›ä¸€ä¸ª promise å¯¹è±¡ await åªèƒ½å‡ºç°åœ¨ async å‡½æ•°ä¸­ï¼Œåé¢è·Ÿä¸€ä¸ª promise å¯¹è±¡ï¼Œç”¨äºè·å– promise å¯¹è±¡æˆåŠŸçš„ç»“æœ å¦‚æœä¸æ˜¯ promise å¯¹è±¡ï¼Œç›´æ¥è¿”å›å€¼ await é˜»å¡ async å‡½æ•°æ‰§è¡Œ await åé¢çš„ promise å¦‚æœæ²¡æœ‰æˆåŠŸï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œéœ€è¦ tryâ€¦catch fetch api fetch api æä¾›äº†ä¸€ä¸ª JavaScript æ¥å£ï¼Œç”¨äºè®¿é—®å’Œæ“çºµ HTTP ç®¡é“çš„éƒ¨åˆ† ä¾‹å¦‚è¯·æ±‚å’Œå“åº” service worker ä¸­å‘é€è¯·æ±‚åªèƒ½ç”¨ fetch api fetch api æ˜¯åŸºäº promise å®ç°çš„ fetch(url, config) ç”¨äºå‘é€ http è¯·æ±‚ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«å“åº”ç»“æœçš„ promise å¯¹è±¡ response æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ•°æ®æµï¼Œéœ€è¦è°ƒç”¨ json() æ–¹æ³•è½¬æ¢æˆ json æ•°æ® config å¸¸è§å‚æ•° bodyï¼šè®¾ç½®è¯·æ±‚ä½“ headersï¼šè®¾ç½®è¯·æ±‚å¤´ methodï¼šè®¾ç½®è¯·æ±‚æ–¹å¼ cache storageåŸºæœ¬ä½¿ç”¨ cacheStorage æ¥å£è¡¨ç¤º Cache å¯¹è±¡çš„å­˜å‚¨ï¼Œé…åˆ service worker æ¥å®ç°èµ„æºçš„ç¼“å­˜ caches api ç±»ä¼¼äºæ•°æ®åº“çš„æ“ä½œ caches.open(cacheName).then(function(cache) {}) æ‰“å¼€ç¼“å­˜ï¼Œè¿”å› promise ç±»ä¼¼è¿æ¥æ•°æ®åº“ caches.keys() è¿”å› promise å¯¹è±¡ï¼ŒåŒ…æ‹¬æ‰€æœ‰ç¼“å­˜çš„ key æ•°æ®åº“å caches.delete(key) æ ¹æ® key åˆ é™¤å¯¹åº”ç¼“å­˜ï¼ˆæ•°æ®åº“ï¼‰ cache å¯¹è±¡å¸¸ç”¨æ–¹æ³•ï¼ˆå•æ¡æ•°æ®çš„æ“ä½œï¼‰ cache æ¥å£ä¸ºç¼“å­˜çš„ Request / Response å¯¹è±¡å¯¹æä¾›å­˜å‚¨æœºåˆ¶ cache.put(req, res) æŠŠè¯·æ±‚å½“æˆ keyï¼ŒæŠŠå¯¹åº”å“åº”å­˜å‚¨èµ·æ¥ cache.add(url) æ ¹æ® url å‘èµ·è¯·æ±‚ï¼ŒæŠŠå“åº”ç»“æœå­˜å‚¨èµ·æ¥ cache.addAll(urls) æŠ“å–ä¸€ä¸ª url æ•°ç»„ï¼Œå¹¶ä¸”æŠŠç»“æœå­˜å‚¨èµ·æ¥ cache.match(req) è·å– req å¯¹åº”çš„ response ç¦»çº¿å¤„ç† caches ä¸­å·²ç»ç¼“å­˜äº†æˆ‘ä»¬éœ€è¦çš„é™æ€èµ„æº å½“è¯·æ±‚å¤±è´¥çš„æ—¶å€™ï¼Œå°±å¯ä»¥å»ç¼“å­˜ä¸­è¯»å–å¯¹åº”æ•°æ® é€šè¿‡ event.respondWith(response) å¯ä»¥æ§åˆ¶å“åº”çš„å†…å®¹ notification apiåŸºæœ¬ä½¿ç”¨ notifications API çš„é€šçŸ¥æ¥å£ç”¨äºå‘ç”¨æˆ·é…ç½®å’Œæ˜¾ç¤ºæ¡Œé¢é€šçŸ¥ notification.permission å¯ä»¥è·å–å½“å‰ç”¨æˆ·çš„æˆæƒæƒ…å†µ default æœªæˆæƒ denied æ‹’ç»ï¼Œæ— æ³•å†æ¬¡è¯·æ±‚ granted é€šè¿‡ notification.requestPermission() å¯ä»¥è¯·æ±‚ç”¨æˆ·çš„æˆæƒ é€šè¿‡ new notification(â€˜titleâ€™, { body: â€˜â€¦â€™ , icon: â€˜â€¦â€™ }) å¯ä»¥æ˜¾ç¤ºé€šçŸ¥ åœ¨æˆæƒæƒ…å†µä¸‹ï¼Œå¯ä»¥åœ¨ service worker ä¸­æ˜¾ç¤ºé€šçŸ¥ self.registration.showNotification(â€˜titleâ€™, { body: â€˜msgâ€™ })","categories":[],"tags":[{"name":"PWA","slug":"PWA","permalink":"http://ziiyan.github.io/tags/PWA/"}]},{"title":"ES6ï¼šProxy","slug":"ES6ï¼šProxy","date":"2020-05-08T07:31:18.000Z","updated":"2020-08-13T08:57:16.022Z","comments":true,"path":"2020/05/08/ES6ï¼šProxy/","link":"","permalink":"http://ziiyan.github.io/2020/05/08/ES6%EF%BC%9AProxy/","excerpt":"","text":"æ¦‚è¿° åœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾ä¸€å±‚â€œæ‹¦æˆªâ€ï¼Œå¤–ç•Œå¯¹è¯¥å¯¹è±¡çš„è®¿é—®ï¼Œéƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆª å› æ­¤æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™ Proxy å®é™…ä¸Šé‡è½½ï¼ˆoverloadï¼‰äº†ç‚¹è¿ç®—ç¬¦ï¼Œå³ç”¨è‡ªå·±çš„å®šä¹‰è¦†ç›–äº†è¯­è¨€çš„åŸå§‹å®šä¹‰ Proxy å®ä¾‹çš„æ–¹æ³•Proxy.revocable()this é—®é¢˜å®ä¾‹ï¼šWeb æœåŠ¡çš„å®¢æˆ·ç«¯","categories":[],"tags":[{"name":"ECMAScript 6 å…¥é—¨","slug":"ECMAScript-6-å…¥é—¨","permalink":"http://ziiyan.github.io/tags/ECMAScript-6-%E5%85%A5%E9%97%A8/"}]},{"title":"canvasä»å…¥é—¨åˆ°æ”¾å¼ƒ","slug":"canvasä»å…¥é—¨åˆ°æ”¾å¼ƒ","date":"2020-04-25T04:46:30.000Z","updated":"2020-07-27T09:22:14.693Z","comments":true,"path":"2020/04/25/canvasä»å…¥é—¨åˆ°æ”¾å¼ƒ/","link":"","permalink":"http://ziiyan.github.io/2020/04/25/canvas%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83/","excerpt":"","text":"ç®€ä»‹H5 æ–°å¢çš„æ ‡ç­¾ï¼Œå¯ä»¥ç”¨è„šæœ¬ï¼ˆjsï¼‰åœ¨å…¶ä¸­ç»˜åˆ¶å›¾åƒçš„ HTML å…ƒç´ ã€‚ åŸºæœ¬ä½¿ç”¨å…ƒç´ å¯ä»¥ç”¨ css è®¾ç½®å±æ€§ï¼Œä½†æ¯”ä¾‹ä¸ä¸€è‡´ä¼šæ‰­æ›²ï¼Œå»ºè®®ç›´æ¥ç”¨ width height å±æ€§ é»˜è®¤ width 300 height 150 å•ä½ px 1&lt;canvas&gt;æ›¿æ¢å†…å®¹&lt;/canvas&gt; ä¸æ”¯æŒ canvas çš„æµè§ˆå™¨ä¼šæ˜¾ç¤ºæ›¿æ¢å†…å®¹ï¼Œå°¾æ ‡ç­¾ä¸å¯çœç•¥ æ¸²æŸ“ä¸Šä¸‹æ–‡&lt;canvas&gt; åˆ›å»ºä¸€ä¸ªå›ºå®šå¤§å°çš„ç”»å¸ƒï¼Œå…¬å¼€ä¸€ä¸ªæˆ–å¤šä¸ªæ¸²æŸ“ä¸Šä¸‹æ–‡ï¼ˆç”»ç¬”ï¼‰ï¼Œä½¿ç”¨æ¸²æŸ“ä¸Šä¸‹æ–‡æ¥ç»˜åˆ¶å’Œå¤„ç†è¦å±•ç¤ºçš„å†…å®¹ã€‚ ä¸»è¦ä½¿ç”¨ 2D ä¸Šä¸‹æ–‡ï¼ŒWebGL ä½¿ç”¨äº†åŸºäº OpenGL ES çš„ 3D ä¸Šä¸‹æ–‡ æ£€æµ‹æ”¯æŒç‰¹æ€§1234567var canvas = document.getElementById('myCanvas');if (canvas.getContext) &#123; var ctx = canvas.getContext('2d'); ...&#125; else &#123;sr ...&#125; ç»˜åˆ¶å½¢çŠ¶ç»˜åˆ¶çŸ©å½¢åŸç”Ÿåªæ”¯æŒçŸ©å½¢ç»˜åˆ¶ï¼Œå…¶ä»–æ‰€æœ‰å›¾å½¢éƒ½è‡³å°‘éœ€è¦ç”Ÿæˆä¸€ç§è·¯å¾„ï¼ˆpathï¼‰ fillRect(x, y, width, height) å¡«å…… strokeRect(x, y,width, height) ç©ºå¿ƒ clearRect(x, y, width, height) æ¸…é™¤åŒºåŸŸ ç»˜åˆ¶è·¯å¾„è·¯å¾„æ˜¯é€šè¿‡ä¸åŒé¢œè‰²å’Œå®½åº¦çš„çº¿æ®µæˆ–æ›²çº¿ç›¸è¿å½¢æˆçš„ä¸åŒå½¢çŠ¶çš„ç‚¹çš„é›†åˆï¼Œæ¯ä¸ªè·¯å¾„éƒ½æ˜¯é—­åˆçš„ã€‚ è·¯å¾„ç»˜åˆ¶å›¾å½¢æ­¥éª¤ï¼š åˆ›å»ºè·¯å¾„èµ·å§‹ç‚¹ è°ƒç”¨ç»˜åˆ¶æ–¹æ³•ç»˜åˆ¶è·¯å¾„ å°é—­è·¯å¾„ é€šè¿‡æè¾¹æˆ–å¡«å……è·¯å¾„åŒºåŸŸæ¥æ¸²æŸ“å›¾å½¢ ç»˜åˆ¶æ–¹æ³•ï¼š beginPath() åˆ›å»ºè·¯å¾„ï¼Œç”»ç¬”æŒ‡å‘è·¯å¾„ moveTo(x, y) ç”»ç¬”ç§»åŠ¨åˆ°åæ ‡ï¼Œè®¾ç½®è·¯å¾„èµ·å§‹ç‚¹ closePath() é—­åˆè·¯å¾„ï¼ˆè‡ªåŠ¨è¿æ¥ç»ˆç‚¹å’Œèµ·å§‹ç‚¹ï¼‰ï¼Œç”»ç¬”æŒ‡å‘ä¸Šä¸‹æ–‡ stroke() çº¿æ¡ fill() å¡«å…… çº¿æ®µ lineTo(x, y) å¼§å½¢ arc(x, y, r, startAngle, endAngle, anticlockwise) (x, y) åœ†å¿ƒï¼Œr åŠå¾„ï¼ŒstartAngle å¼§åº¦åˆ° endAngle å¼§åº¦ç»“æŸï¼Œanticlockwise true é€†æ—¶é’ˆï¼Œfalseï¼ˆé»˜è®¤ï¼‰é¡ºæ—¶é’ˆ 12// è§’åº¦æ¢ç®—å¼§åº¦const radians = (Math.PI / 180) * degrees arcTo(x1, y1, x2, y2, radius)æ ¹æ®ç»™å®šçš„æ§åˆ¶ç‚¹å’ŒåŠå¾„ç”»å¼§ï¼Œç›´çº¿è¿æ¥ä¸¤ä¸ªç‚¹ ç”»ä¸€æ¡ä¸èµ·å§‹ç‚¹-&gt;(x1, y1)ï¼Œ(x1, y1)-&gt;(x2, y2) è¿™ä¸¤æ¡åˆ‡çº¿ç›¸åˆ‡çš„åœ†å¼§ ç»˜åˆ¶è´å¡å°”æ›²çº¿äºŒæ¬¡è´å¡å°”æ›²çº¿ quadraticCurveTo(cp1x, cp1y, x, y) (cp1x, cp1y) æ§åˆ¶ç‚¹ (x, y) ç»“æŸç‚¹ ä¸‰æ¬¡æ¬¡è´å¡å°”æ›²çº¿ quadraticCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) æ·»åŠ æ ·å¼å’Œé¢œè‰² fillStyle = color å¡«å……é¢œè‰² strokeStyle = color è½®å»“é¢œè‰² colorï¼šè¡¨ç¤º css é¢œè‰²å€¼çš„å­—ç¬¦ä¸²ã€æ¸å˜å¯¹è±¡ã€å›¾æ¡ˆå¯¹è±¡ã€‚é»˜è®¤é»‘è‰²ã€‚è®¾ç½®åä¿æŒç›´åˆ°é‡æ–°è®¾ç½®ã€‚ globalAlpha = transparencyValueå…¨å±€é€æ˜åº¦ lineWidth = 1.0 çº¿å®½ï¼Œé»˜è®¤ 1.0 lineCap = type çº¿æ¡æœ«ç«¯æ ·å¼ butt æ–¹å½¢ round åœ†å½¢ squareæ–¹å½¢ï¼Œå¤šäº†ä¸€ä¸ªé«˜åº¦æ˜¯çº¿æ®µåšåº¦ä¸€åŠçš„çŸ©å½¢ lineJoin = type åŒä¸€ä¸ª path å†…ï¼Œçº¿æ¡ä¸çº¿æ¡ä¹‹é—´æ¥åˆå¤„çš„æ ·å¼ round åœ† bevel å¹³ miter å°–ï¼ˆé»˜è®¤ï¼‰ è™šçº¿ setLineDash([å®ç°é•¿åº¦ï¼Œé—´éš™é•¿åº¦]) lineDashOffset åç§»é‡ ç»˜åˆ¶æ–‡æœ¬ fillText(text, x, y [, maxWidth]) åœ¨ (x, y) å¡«å……æ–‡æœ¬ï¼Œæœ€å¤§å®½åº¦å¯é€‰ strokeText(text, x, y [, maxWidth]) åœ¨ (x, y) ç»˜åˆ¶è¾¹æ¡†ï¼Œæœ€å¤§å®½åº¦å¯é€‰ æ ·å¼ font = value æ–‡æœ¬æ ·å¼ï¼ŒåŒ css font å±æ€§ textAlign = value å¯¹é½é€‰é¡¹ startï¼ˆé»˜è®¤ï¼‰ end left right center textBaseline = value åŸºçº¿å¯¹é½é€‰é¡¹ top hanging middle alphabeticï¼ˆé»˜è®¤ï¼‰ ideographic bottom direction = value æ–‡æœ¬æ–¹å‘ ltr trl Inheritï¼ˆé»˜è®¤ï¼‰ ç»˜åˆ¶å›¾ç‰‡ç”±é›¶å¼€å§‹åˆ›å»ºå›¾ç‰‡ drawImage(img, x, y) 12345var img = new Image();img.src = 'myImage.png';img.onload = function () &#123; // åŠ è½½åå†ç»˜åˆ¶ ctx.drawImage(img, 0, 0);&#125; img å¯ä»¥æ˜¯DOMå…ƒç´  12var img = document.querySelector(\"img\");ctx.drawImage(img, 0, 0); drawImage(img, x, y, width, height) å›¾ç‰‡ç¼©æ”¾ drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight) (sx, sy) åŸå›¾åƒä¸­çš„ç‚¹ï¼Œå‰ªè£ (sx+sWidth, sy+sHeight)ï¼›ç»˜åˆ¶åˆ°ç”»å¸ƒï¼ˆdx, dyï¼‰ä¸Š çŠ¶æ€çš„ä¿å­˜å’Œæ¢å¤ save() å­˜å‚¨åœ¨æ ˆä¸­ï¼Œå¯ä»¥å¤šæ¬¡è°ƒç”¨ï¼Œç±»ä¼¼äº push() restore() æ¢å¤ï¼Œå¯ä»¥å¤šæ¬¡è°ƒç”¨ï¼Œç±»ä¼¼äº pop() å˜å½¢ä½¿ç”¨å‰å…ˆä¿å­˜çŠ¶æ€ä¾¿äºæ¢å¤ translate(x, y) ç§»åŠ¨åŸç‚¹åˆ°(x, y) rotate(angle) æ—‹è½¬åæ ‡è½´ï¼Œé¡ºæŒ‡é’ˆ scale(x, y) x è½´å’Œ y è½´çš„ç¼©æ”¾å› å­ transform(a, b, c, d, e, f) å˜å½¢çŸ©é˜µ åˆæˆ globalCompositeOperation = type é»˜è®¤ï¼šæ–°å›¾åƒ+è€å›¾åƒï¼ˆæ–°å›¾åƒåœ¨è€å›¾åƒä¸Šé¢ï¼‰ source-inï¼šæ–°å›¾åƒçš„é‡å éƒ¨åˆ† Source-outï¼šæ–°å›¾åƒçš„æ²¡é‡å éƒ¨åˆ† source-atopï¼šè€å›¾åƒ+é‡å éƒ¨åˆ† destination-overï¼šæ–°å›¾åƒ+è€å›¾åƒï¼ˆè€å›¾åƒåœ¨æ–°å›¾åƒä¸Šé¢ï¼‰ destination-inï¼šè€å›¾åƒçš„é‡å éƒ¨åˆ† destination-outï¼šè€å›¾åƒçš„æ²¡é‡å éƒ¨åˆ† destination-atopï¼šè€å›¾åƒé‡å éƒ¨åˆ†+æ–°å›¾åƒï¼ˆæ–°å›¾åƒåœ¨è€å›¾åƒä¸‹é¢ï¼‰ lighterï¼šæ–°å›¾åƒ+è€å›¾åƒï¼ˆé‡å åŒºåŸŸé¢œè‰²å åŠ ï¼‰ darkenï¼šæ–°å›¾åƒ+è€å›¾åƒï¼ˆé‡å åŒºåŸŸé¢œè‰²å–æœ€æ·±ï¼‰ lightenï¼šæ–°å›¾åƒ+è€å›¾åƒï¼ˆé‡å åŒºåŸŸé¢œè‰²å–æœ€äº®ï¼‰ xorï¼šé‡å éƒ¨åˆ†é€æ˜ copyï¼šæ–°å›¾åƒä¿ç•™ï¼Œæ¸…æ¥šå…¶ä½™éƒ¨åˆ† è£å‰ªè·¯å¾„ clip() é®ç½©ï¼Œåªæ˜¾ç¤ºè·¯å¾„å†…çš„åŒºåŸŸ åŠ¨ç”»åŸºæœ¬æ­¥éª¤ æ¸…ç©º canvas ç»˜åˆ¶æ¯ä¸€å¸§åŠ¨ç”»å‰ï¼Œè¦æ¸…ç©ºæ‰€æœ‰ clearRect() ä¿å­˜ canvas çŠ¶æ€ æ§åˆ¶åŠ¨ç”»å›¾å½¢ çœŸæ­£çš„ç»˜åˆ¶åŠ¨ç”»å¸§ æ¢å¤ canvas çŠ¶æ€ æ§åˆ¶åŠ¨ç”» setInterval() setTimeout() requestAnimationFrame()","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://ziiyan.github.io/tags/JavaScript/"}]},{"title":"DEæ‰“åŒ…ä¼˜åŒ–","slug":"dataExploreræ‰“åŒ…ä¼˜åŒ–","date":"2020-04-07T11:24:25.000Z","updated":"2020-07-27T09:20:47.060Z","comments":true,"path":"2020/04/07/dataExploreræ‰“åŒ…ä¼˜åŒ–/","link":"","permalink":"http://ziiyan.github.io/2020/04/07/dataExplorer%E6%89%93%E5%8C%85%E4%BC%98%E5%8C%96/","excerpt":"","text":"æˆæœä¼˜åŒ–å‰ ä¼˜åŒ–åå·¥å…·å®‰è£…1npm install webpack-bundle-analyzer é…ç½®å› ä¸ºæ˜¯ vue-cli 3.0ï¼Œæ²¡æœ‰ webpack é…ç½®æ–‡ä»¶äº†ï¼Œåœ¨æ ¹ç›®å½•ä¸‹è‡ªå·±æ‰‹åŠ¨æ–°å»º vue.config.js 1234567module.exports = &#123; chainWebpack: config =&gt; &#123; config .plugin('webpack-bundle-analyzer') .use(require('webpack-bundle-analyzer').BundleAnalyzerPlugin) &#125;&#125; æŸ¥çœ‹1npm run server é‡æ–°å¯åŠ¨ä¹‹åè®¿é—® http://127.0.0.1:8888 å°±æ˜¯å¯è§†åŒ–çš„å›¾äº† Webpack æ–‡ä»¶åˆ†ç¦»Webpack æ–‡ä»¶åˆ†ç¦»åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯ Bundle çš„åˆ†ç¦»ï¼Œä¸€ä¸ªæ˜¯ Code ä»£ç çš„åˆ†ç¦»: Bundle splitting: å®é™…ä¸Šå°±æ˜¯åˆ›å»ºå¤šä¸ªæ›´å°çš„æ–‡ä»¶ï¼Œå¹¶è¡ŒåŠ è½½ï¼Œä»¥è·å¾—æ›´å¥½çš„ç¼“å­˜æ•ˆæœï¼›ä¸»è¦çš„ä½œç”¨å°±æ˜¯ä½¿æµè§ˆå™¨å¹¶è¡Œä¸‹è½½ï¼Œæé«˜ä¸‹è½½é€Ÿåº¦ã€‚å¹¶ä¸”è¿ç”¨æµè§ˆå™¨ç¼“å­˜ï¼Œåªæœ‰ä»£ç è¢«ä¿®æ”¹ï¼Œæ–‡ä»¶åä¸­çš„å“ˆå¸Œå€¼æ”¹å˜äº†æ‰ä¼šå»å†æ¬¡åŠ è½½ã€‚ Code splitting: åªåŠ è½½ç”¨æˆ·æœ€éœ€è¦çš„éƒ¨åˆ†ï¼Œå…¶ä½™çš„ä»£ç éƒ½éµä»æ‡’åŠ è½½çš„ç­–ç•¥ï¼›ä¸»è¦çš„ä½œç”¨å°±æ˜¯åŠ å¿«é¡µé¢åŠ è½½é€Ÿåº¦ï¼Œä¸åŠ è½½ä¸å¿…è¦åŠ è½½çš„ä¸œè¥¿ã€‚ Bundle splittingé…ç½®1234567891011121314151617181920212223242526module.exports = &#123; chainWebpack: config =&gt; &#123; config .plugin('webpack-bundle-analyzer') .use(require('webpack-bundle-analyzer').BundleAnalyzerPlugin) &#125;, configureWebpack: &#123; optimization: &#123; splitChunks: &#123; chunks: 'all', maxInitialRequests: Infinity, minSize: 0, minChunks: 1, cacheGroups: &#123; commons: &#123; test: /[\\\\/]node_modules[\\\\/]/, name(module) &#123; const packageName = module.context.match(/[\\\\/]node_modules[\\\\/](.*?)([\\\\/]|$)/)[1]; return `modules.$&#123;packageName.replace('@', '')&#125;`; &#125; &#125; &#125; &#125; &#125; &#125;&#125; é¦–å…ˆå¢åŠ  maxInitialRequests å¹¶è®¾ç½®æˆ Infinityï¼ŒæŒ‡å®šè¿™ä¸ªå…¥å£æ–‡ä»¶æœ€å¤§å¹¶è¡Œè¯·æ±‚æ•° ç„¶åå°† minSize å’Œ minChunks åˆ†åˆ«è®¾ç½®æˆ 0 å’Œ 1ï¼Œå³ä½¿æ¨¡å—éå¸¸å°ä¹Ÿå°†å…¶æå–å‡ºæ¥ï¼Œå¹¶ä¸”è¿™ä¸ªæ¨¡å—çš„å¼•ç”¨æ¬¡æ•°åªæœ‰ 1 ä¹Ÿè¦æå– æœ€åé…ç½®åŒ¹é…çš„ä¾èµ–ä»¥åŠåˆ†ç¦»å‡ºçš„æ–‡ä»¶åæ ¼å¼ å¦å¤–ï¼Œæˆ‘ä»¬è¿˜å°†è¿è¡Œæ—¶ä»£ç åˆ†ç¦»å‡ºæ¥ï¼Œè¿™å—ä»£ç è¿˜å¯ä»¥é…åˆ InlineManifestWebpackPlugin ç›´æ¥æ’å…¥åˆ° HTML æ–‡ä»¶ä¸­ã€‚è¿™é‡Œæˆ‘ä»¬å°†è¿™ä¸ªé…ç½®è®¾ç½®æˆ singleï¼Œå³å°†æ‰€æœ‰chunkçš„è¿è¡Œä»£ç æ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ ç°åœ¨å¯ä»¥çœ‹åˆ° app.js è¢«æ‹†è§£æˆå¾ˆå¤šä¸ªå•ç‹¬çš„åŒ…ï¼Œè¿™äº›åŒ…åœ¨åŠ è½½æ—¶å¯ä»¥å¹¶è¡Œä¸‹è½½ï¼Œæé«˜ä¸‹è½½é€Ÿåº¦ã€‚ é€ä¸ªå‡»ç ´Echartsé¡¹ç›®é‡Œç”¨åˆ°çš„åªæœ‰ bar è¿™ä¸ªå›¾å½¢ï¼Œæ‰€ä»¥æŒ‰éœ€è½½å…¥å³å¯ã€‚ /src/plugins ä¸‹æ–°å»ºæ–‡ä»¶ echarts.jsï¼š 123456import echarts from 'echarts/lib/echarts'import 'echarts/lib/chart/bar'import 'echarts/lib/component/legend'export default echarts ä½¿ç”¨åˆ° Echarts çš„ç»„ä»¶ä¸­ï¼š 1import echarts from '@/plugins/echarts' 2.52 M -&gt; 830.76 KB monacoè¿™ä¸ªæ˜¯ä»£ç ç¼–è¾‘å™¨ï¼Œç”¨åˆ°çš„åœ°æ–¹æ¯”è¾ƒå¤šï¼Œæœ¬æ¥æƒ³åƒ echarts ä¸€æ ·æŒ‰éœ€å¼•å…¥ï¼Œä½†æ˜¯å¼•å…¥å®Œä¹‹åä¾æ—§éå¸¸å¤§ï¼Œè€ƒè™‘ç”¨ CDN åŠ é€Ÿï¼Œå‚è€ƒï¼š https://github.com/microsoft/monaco-editor/blob/master/docs/integrate-amd-cross.md https://www.cnblogs.com/XHappyness/p/9708102.html 1npm install html-loader --save-dev 1234567891011121314151617// index.html &lt;script type=\"text/javascript\" src=\"https://cdn.bootcss.com/monaco-editor/0.20.0/min/vs/loader.js\"&gt;&lt;/script&gt; &lt;script&gt; require.config(&#123; paths: &#123; 'vs': 'https://cdn.bootcss.com/monaco-editor/0.20.0/min/vs' &#125;&#125;); window.MonacoEnvironment = &#123; getWorkerUrl: function(workerId, label) &#123; return `data:text/javascript;charset=utf-8,$&#123;encodeURIComponent(` self.MonacoEnvironment = &#123; baseUrl: 'https://cdn.bootcss.com/monaco-editor/0.20.0/min/' &#125;; importScripts('https://cdn.bootcss.com/monaco-editor/0.20.0/min/vs/base/worker/workerMain.js');` )&#125;`; &#125; &#125;; require([\"vs/editor/editor.main\"], function () &#123;&#125;); &lt;/script&gt; 12345678910111213141516171819// vue.config.jsmodule.exports = &#123; Â·Â·Â· chainWebpack: config =&gt; &#123; config.module .rule('html') .test(/\\.html$/) .use('html-loader') .loader('html-loader') &#125; Â·Â·Â· configureWebpack: &#123; ... externals: &#123; 'monaco-editor': 'monaco-editor' &#125; &#125;&#125; æŠ˜è…¾äº†å¤§åŠå¤©æ€»ç®—å¯ä»¥ï¼Œä½¿ç”¨çš„æ—¶å€™éœ€è¦ window.monaco.editor.create(...)","categories":[],"tags":[{"name":"å·¥ä½œ","slug":"å·¥ä½œ","permalink":"http://ziiyan.github.io/tags/%E5%B7%A5%E4%BD%9C/"}]},{"title":"Performance Benchmarking and Optimizing Hyperledger Fabric Blockchain Platform","slug":"Performance-Benchmarking-and-Optimizing-Hyperledger-Fabric-Blockchain-Platform","date":"2020-04-04T08:53:39.000Z","updated":"2020-05-10T17:20:10.828Z","comments":true,"path":"2020/04/04/Performance-Benchmarking-and-Optimizing-Hyperledger-Fabric-Blockchain-Platform/","link":"","permalink":"http://ziiyan.github.io/2020/04/04/Performance-Benchmarking-and-Optimizing-Hyperledger-Fabric-Blockchain-Platform/","excerpt":"","text":"Abstract The rise in popularity of permissioned blockchain platforms in recent time is significant. Hyperledger Fabric is one such permissioned blockchain platform and one of the Hyperledger projects hosted by the Linux Foundation. The Fabric comprises of various components such as smart-contracts, endorsers, committers, validators, and orderers. As the performance of blockchain platform is a major concern for enterprise applications, in this work, we perform a comprehensive empirical study to characterize the performance of Hyperledger Fabric and identify potential performance bottlenecks to gain a better understanding of the system. æœ€è¿‘ä¸€æ®µæ—¶é—´ï¼Œè®¸å¯é“¾å¹³å°çš„æµè¡Œåº¦æ˜¾ç€ä¸Šå‡ã€‚ Hyperledger Fabric æ˜¯ä¸€ç§è¿™æ ·çš„è®¸å¯é“¾å¹³å°ï¼Œä¹Ÿæ˜¯ Linux åŸºé‡‘ä¼šæ‰˜ç®¡çš„ Hyperledger é¡¹ç›®ä¹‹ä¸€ã€‚ Fabric ç”±å„ç§ç»„ä»¶ç»„æˆï¼Œä¾‹å¦‚æ™ºèƒ½åˆçº¦ï¼ŒèƒŒä¹¦èŠ‚ç‚¹ï¼Œæäº¤èŠ‚ç‚¹ï¼ŒéªŒè¯èŠ‚ç‚¹å’Œæ’åºèŠ‚ç‚¹ã€‚ ç”±äºåŒºå—é“¾å¹³å°çš„æ€§èƒ½æ˜¯ä¼ä¸šåº”ç”¨ç¨‹åºçš„ä¸»è¦å…³æ³¨ç‚¹ï¼Œå› æ­¤åœ¨è¿™é¡¹å·¥ä½œä¸­ï¼Œæˆ‘ä»¬è¿›è¡Œäº†å…¨é¢çš„å®è¯ç ”ç©¶ï¼Œä»¥è¡¨å¾ Hyperledger Fabric çš„æ€§èƒ½å¹¶ç¡®å®šæ½œåœ¨çš„æ€§èƒ½ç“¶é¢ˆï¼Œä»¥æ›´å¥½åœ°äº†è§£ç³»ç»Ÿã€‚ We follow a two-phased approach. In the first phase, our goal is to understand the impact of various configuration parameters such as block size, endorsement policy, channels, resource allocation, state database choice on the transaction throughput &amp; latency to provide various guidelines on configuring these parameters. In addition, we also aim to identify performance bottlenecks and hotspots. We observed that (1) endorsement policy verification, (2) sequential policy validation of transactions in a block, and (3) state validation and commit (with CouchDB) were the three major bottlenecks. æˆ‘ä»¬éµå¾ªä¸¤é˜¶æ®µçš„æ–¹æ³•ã€‚ åœ¨ç¬¬ä¸€é˜¶æ®µï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯äº†è§£å„ç§é…ç½®å‚æ•°ï¼ˆä¾‹å¦‚å—å¤§å°ã€èƒŒä¹¦ç­–ç•¥ã€é€šé“ã€èµ„æºé…ç½®ã€çŠ¶æ€æ•°æ®åº“é€‰æ‹©ï¼‰å¯¹äº¤æ˜“ååé‡å’Œå»¶è¿Ÿçš„å½±å“ï¼Œä»¥æä¾›æœ‰å…³é…ç½®è¿™äº›å‚æ•°çš„å„ç§æŒ‡å¯¼ã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜æ—¨åœ¨ç¡®å®šæ€§èƒ½ç“¶é¢ˆå’Œçƒ­ç‚¹ã€‚ æˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼ˆ1ï¼‰èƒŒä¹¦ç­–ç•¥éªŒè¯ï¼Œï¼ˆ2ï¼‰å—ä¸­äº¤æ˜“çš„é¡ºåºç­–ç•¥éªŒè¯ï¼Œï¼ˆ3ï¼‰çŠ¶æ€éªŒè¯å’Œæäº¤ï¼ˆä½¿ç”¨ CouchDBï¼‰æ˜¯ä¸‰ä¸ªä¸»è¦ç“¶é¢ˆã€‚ In the second phase, we focus on optimizing Hyperledger Fabric v1.0 based on our observations. We introduced and studied various simple optimizations such as aggressive caching for endorsement policy verification in the cryptography component (3Ã— improvement in the performance) and parallelizing endorsement policy verification (7Ã— improvement). Further, we enhanced and measured the effect of an existing bulk read/write optimization for CouchDB during state validation &amp; commit phase (2.5Ã— improvement). By combining all three optimizations, we improved the overall throughput by 16Ã— (i.e., from 140 tps to 2250 tps). åœ¨ç¬¬äºŒé˜¶æ®µï¼Œæˆ‘ä»¬å°†æ ¹æ®æˆ‘ä»¬çš„è§‚å¯Ÿä¼˜åŒ– Hyperledger Fabric v1.0ã€‚ æˆ‘ä»¬ä»‹ç»å¹¶ç ”ç©¶å„ç§ç®€å•çš„ä¼˜åŒ–æ–¹æ³•ï¼Œä¾‹å¦‚åœ¨åŠ å¯†ç»„ä»¶ä¸­è¿›è¡ŒèƒŒä¹¦ç­–ç•¥éªŒè¯çš„ä¸»åŠ¨ç¼“å­˜ï¼ˆæ€§èƒ½æé«˜äº† 3 å€ï¼‰å’Œå¹¶è¡ŒåŒ–èƒŒä¹¦ç­–ç•¥éªŒè¯ï¼ˆæé«˜ 7 å€ï¼‰ã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬åœ¨éªŒè¯å’Œæäº¤é˜¶æ®µæœŸé—´å¢å¼ºå¹¶æµ‹é‡äº†ç°æœ‰çš„é’ˆå¯¹ CouchDB æ‰¹é‡è¯»å†™ä¼˜åŒ–çš„æ•ˆæœï¼ˆæé«˜ 2.5 å€ï¼‰ã€‚ é€šè¿‡ç»“åˆè¿™ 3 ä¸ªä¼˜åŒ–ï¼Œæˆ‘ä»¬å°†æ•´ä½“ååé‡æå‡äº† 16 å€ï¼Œå³ä» 140 tps åˆ° 2250 tpsã€‚ I. INTRODUCTION Blockchain technologies initially gained popularity as they were seen as a way to get rid of the intermediary and decentralize the system. Since then, blockchain has witnessed a growing interest from different domains and use cases. A blockchain is a shared, distributed ledger that records transactions and is maintained by multiple nodes in the network where nodes do not trust each other. Each node holds the identical copy of the ledger which is usually represented as a chain of blocks, with each block being a logical sequence of transactions. Each block encloses the hash of its immediate previous block, thereby guaranteeing the immutability of ledger. åŒºå—é“¾æœ€åˆå¼€å§‹æµè¡Œæ˜¯å› ä¸ºå®ƒä»¬è¢«è®¤ä¸ºæ˜¯ä¸€ç§æ‘†è„±ä¸­ä»‹å’Œå»ä¸­å¿ƒåŒ–ç³»ç»Ÿçš„æ–¹å¼ã€‚ä»é‚£ä¹‹åï¼ŒåŒºå—é“¾è§è¯äº†æ¥è‡ªä¸åŒé¢†åŸŸå’Œç”¨ä¾‹æ—¥ç›Šå¢é•¿çš„å…´è¶£ã€‚ åŒºå—é“¾æ˜¯ä¸€ä¸ªå…±äº«çš„ã€åˆ†å¸ƒå¼çš„è´¦æœ¬ï¼Œå®ƒè®°å½•äº¤æ˜“å¹¶ç”±ç½‘ç»œä¸­äº’ä¸ä¿¡ä»»çš„å¤šä¸ªèŠ‚ç‚¹å…±åŒç»´æŠ¤ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½æ‹¥æœ‰è¯¥è´¦æœ¬çš„ç›¸åŒå‰¯æœ¬ï¼Œè´¦æœ¬é€šå¸¸ç”±åŒºå—é“¾è¡¨ç¤ºï¼Œæ¯ä¸ªåŒºå—éƒ½æ˜¯äº¤æ˜“çš„é€»è¾‘é¡ºåºã€‚æ¯ä¸ªäº¤æ˜“éƒ½åŒ…å«å‰ä¸€ä¸ªåŒºå—çš„å“ˆå¸Œï¼Œä»è€Œä¿è¯äº†è´¦æœ¬çš„ä¸å¯ç¯¡æ”¹ã€‚ Blockchain is often hailed as a new breed of database systems, in essence being a distributed transaction processing system where the nodes are not trusted and the system needs to achieve Byzantine fault tolerance. Blockchain provides serializability, immutability, and cryptographic verifiability without a single point of trust unlike a database system; properties that have triggered blockchain adoption in a wide variety of industries. åŒºå—é“¾é€šå¸¸è¢«èª‰ä¸ºä¸€ç§æ–°å‹çš„æ•°æ®åº“ç³»ç»Ÿï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„äº¤æ˜“å¤„ç†ç³»ç»Ÿï¼Œå…¶ä¸­çš„èŠ‚ç‚¹ä¸å—ä¿¡ä»»ï¼Œå¹¶ä¸”è¿™ä¸ªç³»ç»Ÿéœ€è¦å®ç°æ‹œå åº­å®¹é”™ã€‚ä¸æ•°æ®åº“ç³»ç»Ÿä¸åŒï¼ŒåŒºå—é“¾åœ¨æ²¡æœ‰å•ä¸€ä¿¡ä»»ç‚¹çš„æƒ…å†µä¸‹æä¾›äº†å¯ä¸²è¡Œæ€§ã€ä¸å¯ç¯¡æ”¹æ€§å’ŒåŠ å¯†å¯éªŒè¯æ€§ï¼›å¼•å‘åŒºå—é“¾åœ¨ä¼—å¤šè¡Œä¸šä¸­é‡‡ç”¨çš„ç‰¹æ€§ã€‚ A blockchain network can be either permissionless or permissioned. In a permissionless network or public network such as Bitcoin, Ethereum, anyone can join the network to perform transactions. Due to a large number of nodes in a public network, a proof-of-work consensus approach is used to order transactions and create a block. In a permissioned network, the identity of each participant is known and authenticated cryptographically such that blockchain can store who performed which transaction. In addition, such a network can have extensive access control mechanisms built-in to limit who can (a) read &amp; append to ledger data, (b) issue transactions, (c) administer participation in the blockchain network. åŒºå—é“¾ç½‘ç»œå¯ä»¥æ˜¯æœªç»è®¸å¯çš„æˆ–ç»è¿‡è®¸å¯çš„ã€‚ åœ¨æœªç»è®¸å¯çš„ç½‘ç»œæˆ–å…¬å…±ç½‘ç»œï¼ˆä¾‹å¦‚æ¯”ç‰¹å¸ã€ä»¥å¤ªåŠï¼‰ä¸­ï¼Œä»»ä½•äººéƒ½å¯ä»¥åŠ å…¥ç½‘ç»œä»¥æ‰§è¡Œäº¤æ˜“ã€‚ç”±äºå…¬å…±ç½‘ç»œä¸­æœ‰å¤§é‡èŠ‚ç‚¹ï¼Œå› æ­¤é‡‡ç”¨å·¥ä½œé‡è¯æ˜å…±è¯†ç®—æ³•æ¥å¯¹äº¤æ˜“è¿›è¡Œæ’åºå¹¶åˆ›å»ºä¸€ä¸ªåŒºå—ã€‚ åœ¨ç»è¿‡è®¸å¯çš„ç½‘ç»œä¸­ï¼Œæ¯ä¸ªå‚ä¸è€…çš„èº«ä»½éƒ½æ˜¯å·²çŸ¥çš„ï¼Œé€šè¿‡å¯†ç éªŒè¯ï¼ŒåŒºå—é“¾å¯ä»¥å­˜å‚¨è°æ‰§è¡Œäº†å“ªä¸ªäº¤æ˜“ã€‚æ­¤å¤–ï¼Œè¿™æ ·çš„ç½‘ç»œå¯ä»¥å†…ç½®å¹¿æ³›çš„ç½‘ç»œæ§åˆ¶æœºåˆ¶æ¥é™åˆ¶è°å¯ä»¥ï¼ˆaï¼‰è¯»å–å¹¶æ·»åŠ è´¦æœ¬æ•°æ®ï¼Œï¼ˆbï¼‰å‘é€äº¤æ˜“ï¼Œï¼ˆcï¼‰ç®¡ç†å‚ä¸åŒºå—é“¾ç½‘ç»œã€‚ A permissioned network is highly suitable for enterprise applications that require authenticated participants. Each node in a permissioned network can be owned by different organizations. Further, enterprise applications need complex data models and expressibility which can be supported using smart-contracts. Enterprises find value in being able to integrate diverse systems without having to build a centralized solution and to bring a level of trust among untrusting parties or to bring in a trusted third-party. Trade Finance and Food Safety are examples of blockchain applications where participants see value in visibility advantages it offers as compared to the existing loosely coupled centralized systems. è®¸å¯ç½‘ç»œéå¸¸é€‚åˆéœ€è¦éªŒè¯å‚ä¸è€…èº«ä»½çš„ä¼ä¸šåº”ç”¨ç¨‹åºã€‚ è®¸å¯ç½‘ç»œä¸­çš„æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥ç”±ä¸åŒçš„ç»„ç»‡æ‹¥æœ‰ã€‚ æ­¤å¤–ï¼Œä¼ä¸šåº”ç”¨ç¨‹åºéœ€è¦å¤æ‚çš„æ•°æ®æ¨¡å‹å’Œå¯è¡¨è¾¾æ€§ï¼Œå¯ä»¥ä½¿ç”¨æ™ºèƒ½åˆçº¦æ¥æ”¯æŒå®ƒä»¬ã€‚ ä¼ä¸šå‘ç°äº†èƒ½å¤Ÿé›†æˆå„ç§ç³»ç»Ÿè€Œæ— éœ€æ„å»ºé›†ä¸­å¼è§£å†³æ–¹æ¡ˆå¹¶åœ¨éä¿¡ä»»æ–¹ä¹‹é—´å»ºç«‹ä¿¡ä»»åº¦æˆ–å¼•å…¥å—ä¿¡ä»»çš„ç¬¬ä¸‰æ–¹çš„ä»·å€¼ã€‚ è´¸æ˜“é‡‘èå’Œé£Ÿå“å®‰å…¨æ˜¯åŒºå—é“¾åº”ç”¨çš„ä¾‹å­ï¼Œä¸ç°æœ‰çš„æ¾æ•£è€¦åˆçš„é›†ä¸­å¼ç³»ç»Ÿç›¸æ¯”ï¼Œå‚ä¸è€…åœ¨å…¶å¯è§æ€§ä¼˜åŠ¿ä¸­çœ‹åˆ°äº†ä»·å€¼ã€‚ There is a lot of concern about the performance of permissioned blockchain platforms and their ability to handle a huge volume of transactions at low latency. Another concern is the richness of language to describe the transactions. Different blockchain platforms such as Quorum, Corda address these concerns using different techniques derived from the distributed systems domain. Hyperledger Fabric is an enterprise-grade open-source permissioned blockchain platform which has a modular design and a high degree of specifiability through trust models and pluggable components. Fabric is currently being used in many different use cases such as Global Trade Digitization, SecureKey, Everledger and is the focus of our performance study. å¯¹äºè®¸å¯é“¾å¹³å°çš„æ€§èƒ½åŠå…¶ä»¥ä½å»¶è¿Ÿå¤„ç†å¤§é‡äº¤æ˜“çš„èƒ½åŠ›ï¼Œå­˜åœ¨å¾ˆå¤šæ‹…å¿§ã€‚ å¦ä¸€ä¸ªé—®é¢˜æ˜¯æè¿°äº¤æ˜“çš„è¯­è¨€ä¸°å¯Œã€‚ Quorumï¼ŒCorda ç­‰ä¸åŒçš„åŒºå—é“¾å¹³å°ä½¿ç”¨æºè‡ªåˆ†å¸ƒå¼ç³»ç»Ÿé¢†åŸŸçš„ä¸åŒæŠ€æœ¯æ¥è§£å†³è¿™äº›é—®é¢˜ã€‚Hyperledger Fabric æ˜¯ä¼ä¸šçº§å¼€æºè®¸å¯é“¾å¹³å°ï¼Œå…·æœ‰æ¨¡å—åŒ–è®¾è®¡ï¼Œå¹¶é€šè¿‡ä¿¡ä»»æ¨¡å‹å’Œå¯æ’æ‹”ç»„ä»¶å®ç°é«˜åº¦å¯å®šåˆ¶æ€§ã€‚ ç›®å‰ï¼ŒFabric å·²åœ¨è®¸å¤šä¸åŒçš„ç”¨ä¾‹ä¸­ä½¿ç”¨ï¼Œä¾‹å¦‚å…¨çƒè´¸æ˜“æ•°å­—åŒ–ï¼ŒSecureKeyï¼ŒEverledgerï¼Œè¿™æ˜¯æˆ‘ä»¬æ€§èƒ½ç ”ç©¶çš„é‡ç‚¹ã€‚ Fabric consists of various components such as endorsers, ordering service, and committers. Further, it constitutes various phases in processing a transaction such as endorsement phase, ordering phase, validation and commit phase. Due to numerous components and phases, Fabric provides various configurable parameters such as block size, endorsement policy, channels, state database. Hence, one of the main challenges in setting up an efficient blockchain network is finding the right set of values for these parameters. For e.g., depending on the application and requirements, one might need to answer the following questions: What should be the block size to achieve a lower latency? How many channels can be created and what should be the resource allocation? What types of endorsement policy is more efficient? How much is the performance difference between GoLevelDB and CocuhDB when it is used as the state database? Fabric ç”±å„ç§ç»„ä»¶ç»„æˆï¼Œä¾‹å¦‚æ™ºèƒ½åˆçº¦ï¼ŒèƒŒä¹¦èŠ‚ç‚¹ï¼Œæäº¤èŠ‚ç‚¹ï¼ŒéªŒè¯èŠ‚ç‚¹å’Œæ’åºèŠ‚ç‚¹ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜æ„æˆäº†å¤„ç†äº¤æ˜“çš„å„ä¸ªé˜¶æ®µï¼Œä¾‹å¦‚èƒŒä¹¦é˜¶æ®µï¼Œæ’åºé˜¶æ®µï¼ŒéªŒè¯å’Œæäº¤é˜¶æ®µã€‚ç”±äºç»„ä»¶å’Œé˜¶æ®µä¼—å¤šï¼ŒFabric æä¾›äº†å„ç§å¯é…ç½®çš„å‚æ•°ï¼Œä¾‹å¦‚å—å¤§å°ï¼ŒèƒŒä¹¦ç­–ç•¥ï¼Œé€šé“ï¼ŒçŠ¶æ€æ•°æ®åº“ã€‚å› æ­¤ï¼Œå»ºç«‹æœ‰æ•ˆçš„åŒºå—é“¾ç½‘ç»œçš„ä¸»è¦æŒ‘æˆ˜ä¹‹ä¸€æ˜¯ä¸ºè¿™äº›å‚æ•°æ‰¾åˆ°æ­£ç¡®çš„å€¼é›†ã€‚ä¾‹å¦‚ï¼Œæ ¹æ®åº”ç”¨å’Œè¦æ±‚ï¼Œå¯èƒ½éœ€è¦å›ç­”ä»¥ä¸‹é—®é¢˜ï¼š è¾¾åˆ°è¾ƒä½å»¶è¿Ÿçš„å—å¤§å°åº”è¯¥æ˜¯å¤šå°‘ï¼Ÿ å¯ä»¥åˆ›å»ºå¤šå°‘ä¸ªé€šé“ï¼Œåº”è¯¥æ€ä¹ˆåˆ†é…èµ„æºï¼Ÿ å“ªç§ç±»å‹çš„è®¤å¯æ”¿ç­–æ›´æœ‰æ•ˆï¼Ÿ GoLevelDB å’Œ CocuhDB ç”¨ä½œçŠ¶æ€æ•°æ®åº“æ—¶å®ƒä»¬ä¹‹é—´çš„æ€§èƒ½å·®å¼‚æœ‰å¤šå°‘ï¼Ÿ To answer above questions and to identify the performance bottlenecks, we perform a comprehensive empirical study of Fabric v1.0 with various configurable parameters. Specifically, our three major contributions are listed below. We conducted a comprehensive empirical study of Fabric platform by varying values assigned to the five major parameters by conducting over 1000s of experiments. As a result, we provide six guidelines on configuring these parameters to attain the maximum performance. We identified three major performance bottlenecks: (i) crypto operations, (ii) serial validation of transactions in a block, and (iii) multiple REST API calls to CouchDB. Introduced and studied three simple optimizations to improve the overall performance by 16Ã— (i.e., from 140 tps to 2250 tps) for a single channel environment. ä¸ºäº†å›ç­”ä¸Šè¿°é—®é¢˜å¹¶ç¡®å®šæ€§èƒ½ç“¶é¢ˆï¼Œæˆ‘ä»¬å¯¹ Fabric v1.0 çš„å„ç§å¯é…ç½®å‚æ•°çš„è¿›è¡Œäº†å…¨é¢çš„å®è¯ç ”ç©¶ã€‚ å…·ä½“æ¥è¯´ï¼Œä»¥ä¸‹æ˜¯æˆ‘ä»¬çš„ä¸‰å¤§è´¡çŒ®ã€‚ æˆ‘ä»¬é€šè¿‡è¿›è¡Œ1000å¤šæ¬¡å®éªŒï¼Œé€šè¿‡æ”¹å˜åˆ†é…ç»™äº”ä¸ªä¸»è¦å‚æ•°çš„å€¼ï¼Œå¯¹Fabric å¹³å°è¿›è¡Œäº†å…¨é¢çš„å®è¯ç ”ç©¶ã€‚ æœ€ç»ˆï¼Œæˆ‘ä»¬æä¾›äº†å…­ç§æœ‰å…³é…ç½®è¿™äº›å‚æ•°çš„å‡†åˆ™ä»¥è·å¾—æœ€ä½³æ€§èƒ½ã€‚ æˆ‘ä»¬ç¡®å®šäº†ä¸‰ä¸ªä¸»è¦çš„æ€§èƒ½ç“¶é¢ˆï¼šï¼ˆiï¼‰åŠ å¯†æ“ä½œï¼Œï¼ˆiiï¼‰å—ä¸­äº¤æ˜“çš„ä¸²è¡ŒéªŒè¯ä»¥åŠï¼ˆiiiï¼‰å¯¹ CouchDB çš„å¤šä¸ª REST API è°ƒç”¨ã€‚ å¼•å…¥å¹¶ç ”ç©¶äº†ä¸‰ç§ç®€å•çš„ä¼˜åŒ–æ–¹æ³•ï¼Œé’ˆå¯¹å•ä¸ªé€šé“ç¯å¢ƒå°†æ•´ä½“æ€§èƒ½æé«˜16å€ï¼ˆå³ä» 140 tps åˆ° 2250 tpsï¼‰ã€‚ II. BACKGROUND: HYPERLEDGER FABRIC ARCHITECTURE &amp; CONFIGURATION PARAMETERS The Hyperledger Fabric is an implementation of permissioned blockchain system which has many unique properties suited for enterprise-class applications. It can run arbitrary smart contracts (a.k.a chaincodes) implemented in Go/JAVA/Nodejs language. It supports an application specifiable trust model for transaction validation and a pluggable consensus protocol to name a few. A Fabric network consists of different types of entities, peer nodes, ordering service nodes and clients, belonging to different organizations. Each of these has an identity on the network which is provided by a Membership Service Provider (MSP), typically associated with an organization. All entities in the network have visibility to identities of all organizations and can verify them. Hyperledger Fabric æ˜¯è®¸å¯åŒºå—é“¾ç³»ç»Ÿçš„å®ç°ï¼Œå…·æœ‰è®¸å¤šé€‚åˆä¼ä¸šçº§åº”ç”¨ç¨‹åºçš„ç‹¬ç‰¹å±æ€§ã€‚ å®ƒå¯ä»¥è¿è¡Œä»¥ Go / JAVA / Nodejs è¯­è¨€å®ç°çš„ä»»æ„æ™ºèƒ½åˆçº¦ï¼ˆä¹Ÿç§°ä¸ºé“¾ç ï¼‰ã€‚ å®ƒæ”¯æŒç”¨äºäº¤æ˜“éªŒè¯çš„åº”ç”¨ç¨‹åºå¯å®šåˆ¶çš„ä¿¡ä»»æ¨¡å‹å’Œå¯æ’æ‹”çš„å…±è¯†åè®®ç­‰ã€‚ Fabric ç½‘ç»œç”±å±äºä¸åŒç»„ç»‡çš„ä¸åŒç±»å‹çš„å®ä½“ã€å¯¹ç­‰èŠ‚ç‚¹ã€æ’åºèŠ‚ç‚¹å’Œå®¢æˆ·ç«¯ç»„æˆã€‚è¿™äº›ä¸­çš„æ¯ä¸€ä¸ªåœ¨ç½‘ç»œä¸Šéƒ½æœ‰ä¸€ä¸ªèº«ä»½ï¼Œè¯¥èº«ä»½ç”±é€šå¸¸ç”±ç»„ç»‡ç›¸å…³è”çš„æˆå‘˜èµ„æ ¼æœåŠ¡æä¾›å•†ï¼ˆMSPï¼‰æä¾›ã€‚ ç½‘ç»œä¸­çš„æ‰€æœ‰å®ä½“éƒ½å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ç»„ç»‡çš„èº«ä»½ï¼Œå¹¶å¯ä»¥å¯¹å…¶è¿›è¡ŒéªŒè¯ã€‚ A. Key Components in FabricPeer A peer node executes the chaincode, which implements a user smart-contract, and maintains the ledger in a file system. The chaincode is allowed access to the shared state by well-defined ledger APIs. A peer is further segregated as an endorsing peer, one which has the chaincode logic and executes it to endorse a transaction or a committing peer, one which does not hold the chaincode logic. Irrespective of this differentiation, both types of peer maintain the ledger. Additionally, both peers maintain the current state as StateDB in a key-value store such that chaincode can query or modify the state using the database query language. å¯¹ç­‰èŠ‚ç‚¹æ‰§è¡Œé“¾ç ï¼ˆè¯¥é“¾ç å®ç°äº†ç”¨æˆ·æ™ºèƒ½åˆçº¦ï¼‰å¹¶åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ç»´æŠ¤è´¦æœ¬ã€‚ é“¾ç å¯ä»¥é€šè¿‡å®šä¹‰æ˜ç¡®çš„åˆ†ç±»è´¦æœ¬ API è®¿é—®å…±äº«çŠ¶æ€ã€‚ å¯¹ç­‰èŠ‚ç‚¹è¿›ä¸€æ­¥è¢«åˆ†ç±»ä¸ºèƒŒä¹¦èŠ‚ç‚¹ï¼ˆå…·æœ‰é“¾ç é€»è¾‘å’Œæ‰§è¡Œé“¾ç ä»¥èƒŒä¹¦ä¸€ä¸ªäº¤æ˜“ï¼‰æˆ–æäº¤èŠ‚ç‚¹ï¼ˆæ²¡æœ‰é“¾ç é€»è¾‘ï¼‰ã€‚ ä¸è®ºè¿™äº›åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œä¸¤ç§ç±»å‹çš„å¯¹ç­‰èŠ‚ç‚¹éƒ½å…±åŒç»´æŠ¤è´¦æœ¬ã€‚ æ­¤å¤–ï¼Œä¸¤ç§å¯¹ç­‰èŠ‚ç‚¹åœ¨é”®å€¼å­˜å‚¨ä¸­å°†å½“å‰çŠ¶æ€ä¿æŒä¸º StateDBï¼Œä»¥ä¾¿é“¾ç å¯ä»¥ä½¿ç”¨æ•°æ®åº“æŸ¥è¯¢è¯­è¨€æŸ¥è¯¢æˆ–ä¿®æ”¹çŠ¶æ€ã€‚ Endorsement Policies Chaincodes are written in generalpurpose languages that execute on untrusted peers in the network. This poses multiple problems, one of non-deterministic execution and the other of trusting the results from any given peer. The endorsement policy addresses these two concerns, by specifying as part of an endorsement policy, the set of peers that need to simulate the transaction and endorse or digitally sign the execution results. Endorsement policies are specified as boolean expressions over network principals identities. A principal here is a member of a specific organization. é“¾ç ç”¨é€šç”¨è¯­è¨€ç¼–å†™ï¼Œå¯åœ¨ç½‘ç»œä¸­ä¸å—ä¿¡ä»»çš„å¯¹ç­‰èŠ‚ç‚¹ä¸Šæ‰§è¡Œã€‚ è¿™å¸¦æ¥äº†å¤šä¸ªé—®é¢˜ï¼Œä¸€ä¸ªæ˜¯ä¸ç¡®å®šæ€§æ‰§è¡Œï¼Œå¦ä¸€ä¸ªæ˜¯ä¿¡ä»»æ¥è‡ªä»»æ„ç»™å®šå¯¹ç­‰èŠ‚ç‚¹çš„ç»“æœã€‚èƒŒä¹¦ç­–ç•¥é€šè¿‡æŒ‡å®šä½œä¸ºèƒŒä¹¦ç­–ç•¥çš„ä¸€éƒ¨åˆ†å¯¹ç­‰èŠ‚ç‚¹é›†åˆæ¥è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œè¿™äº›å¯¹ç­‰ç‚¹éœ€è¦æ¨¡æ‹Ÿäº¤æ˜“å¹¶èƒŒä¹¦æˆ–å¯¹æ‰§è¡Œç»“æœè¿›è¡Œæ•°å­—ç­¾åã€‚èƒŒä¹¦ç­–ç•¥è¢«æŒ‡å®šä¸ºåŸºäºç½‘ç»œä¸»ä½“èº«ä»½çš„å¸ƒå°”è¡¨è¾¾å¼ã€‚ æ­¤å¤„çš„è´Ÿè´£äººæ˜¯ç‰¹å®šç»„ç»‡çš„æˆå‘˜ã€‚ System chaincodes System chaincode has the same programming model as normal user chaincodes and is built into the peer executable, unlike user chaincodes. Fabric implements various system chaincodes; the life cycle system chaincode (LSCC)â€”to install/instantiate/update chaincodes; the endorsement system chaincode (ESCC)â€”to endorse a transaction by digitally signing the response; the validation system chaincode (VSCC)â€”to validate a transactionâ€™s endorsement signature set against the endorsement policy; the configuration system chaincode (CSCC) â€“ to manage channel configurations. ç³»ç»Ÿé“¾ç å…·æœ‰ä¸æ™®é€šç”¨æˆ·é“¾ç ç›¸åŒçš„ç¼–ç¨‹æ¨¡å‹ï¼Œå¹¶ä¸”å†…ç½®åœ¨å¯¹ç­‰èŠ‚ç‚¹å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œè¿™ä¸ç”¨æˆ·é“¾ç ä¸åŒã€‚ Fabric å®ç°å„ç§ç³»ç»Ÿé“¾ç ï¼› ç”Ÿå‘½å‘¨æœŸç³»ç»Ÿé“¾ä»£ç ï¼ˆLSCCï¼‰-ç”¨æ¥å®‰è£…/å®ä¾‹åŒ–/æ›´æ–°é“¾ç ï¼› èƒŒä¹¦ç³»ç»Ÿé“¾ç ï¼ˆESCCï¼‰-é€šè¿‡å¯¹å“åº”è¿›è¡Œæ•°å­—ç­¾åæ¥èƒŒä¹¦äº¤æ˜“ï¼› éªŒè¯ç³»ç»Ÿé“¾ç ï¼ˆVSCCï¼‰-æ ¹æ®èƒŒä¹¦ç­–ç•¥æ¥éªŒè¯äº¤æ˜“çš„èƒŒä¹¦ç­¾åé›†ï¼› é…ç½®ç³»ç»Ÿé“¾ç ï¼ˆCSCCï¼‰â€“ç®¡ç†é€šé“é…ç½®ã€‚ Channel Fabric introduces a concept called channel as a â€œprivateâ€ subnet of communication between two or more peers to provide a level of isolation. Transactions on a channel are only seen by the peer members and participants. The immutable ledger and chaincodes are on a per-channel basis. Further, the consensus is applicable on a per-channel basis, i.e., there is no defined order for transaction across channels. Fabric å¼•å…¥äº†ä¸€ä¸ªç§°ä¸ºé€šé“çš„æ¦‚å¿µï¼Œä½œä¸ºä¸¤ä¸ªæˆ–å¤šä¸ªå¯¹ç­‰èŠ‚ç‚¹ä¹‹é—´çš„â€œä¸“ç”¨â€é€šä¿¡å­ç½‘ï¼Œä»¥æä¾›ä¸€å®šç¨‹åº¦çš„éš”ç¦»ã€‚ é€šé“ä¸Šçš„äº¤æ˜“ä»…ç”±å¯¹ç­‰èŠ‚ç‚¹æˆå‘˜å’Œå‚ä¸è€…å¯è§ã€‚ åœ¨æ¯ä¸ªé€šé“ä¸Šéƒ½æœ‰ä¸å˜çš„è´¦æœ¬å’Œé“¾ç ã€‚ æ­¤å¤–ï¼Œå…±è¯†é€‚ç”¨äºæ¯ä¸ªé€šé“ï¼Œå³æ²¡æœ‰å®šä¹‰çš„è·¨é€šé“çš„äº¤æ˜“é¡ºåºã€‚ Ordering Service An Ordering Service Node (OSN), participate in the consensus protocol and cuts block of transactions which is delivered to the peers by a gossip communication protocol. The structure of a block in Fabric v1.0 is shown in Figure2. The ordering service is modular and supports a pluggable consensus mechanism. By default, a serial ordering (i.e., consensus) is achieved using an underlying Kafka/Zookeeper cluster. OSNs publish transactions to kafka topics and leverages the ordered and immutable nature of records in kafka topic to generate a unique ordered sequence of transactions in a block. A block is cut, when either a maximum number of new transactions, since the last block cut, are added added or a configured timeout since the last block cut has occurred. When any one condition is satisfied, an OSN, publishes a time-to-cut marker and cut a block of all transactions message offsets since the last time-to-cut message offset. The block is then delivered to the peer nodes. æ’åºæœåŠ¡èŠ‚ç‚¹ï¼ˆOSNï¼‰å‚ä¸å…±è¯†åè®®å’Œâ€œå‰Šå‡â€äº¤æ˜“å—ï¼Œè¯¥äº¤æ˜“é€šè¿‡ Gossip é€šä¿¡åè®®ä¼ é€’ç»™å¯¹ç­‰èŠ‚ç‚¹ã€‚ Fabric v1.0 ä¸­çš„å—ç»“æ„å¦‚å›¾æ‰€ç¤ºã€‚ æ’åºæœåŠ¡æ˜¯æ¨¡å—åŒ–çš„ï¼Œå¹¶æ”¯æŒå¯æ’å…¥çš„å…±è¯†æœºåˆ¶ã€‚ é»˜è®¤ä½¿ç”¨åŸºç¡€çš„ Kafka / Zookeeper é›†ç¾¤å®ç°åºåˆ—æ’åºï¼ˆå³å…±è¯†ï¼‰ã€‚ OSN å°†äº¤æ˜“å‘å¸ƒåˆ° kafka topicï¼Œå¹¶åˆ©ç”¨ kafka topic ä¸­è®°å½•çš„æœ‰åºå’Œä¸å˜æ€§åœ¨ä¸€ä¸ªå—ä¸­ç”Ÿæˆå”¯ä¸€çš„æœ‰åºäº¤æ˜“åºåˆ—ã€‚ å½“æ·»åŠ äº†è‡ªä¸Šæ¬¡åˆ‡å—ä»¥æ¥æœ€å¤§æ•°é‡çš„æ–°äº¤æ˜“ï¼Œæˆ–è€…è‡ªä¸Šæ¬¡åˆ‡å—å‘ç”Ÿä»¥æ¥çš„é…ç½®è¶…æ—¶æ—¶ï¼Œè¯¥å—è¢«åˆ‡æ‰ã€‚å½“æ»¡è¶³ä»»ä½•ä¸€ä¸ªæ¡ä»¶æ—¶ï¼ŒOSN ä¼šå‘å¸ƒä¸€ä¸ªæˆªæ­¢æ—¶é—´æ ‡è®°ï¼Œå¹¶åˆ‡æ‰è‡ªä¸Šæ¬¡æˆªæ­¢æ—¶é—´æ¶ˆæ¯åç§»ä»¥æ¥æ‰€æœ‰äº¤æ˜“æ¶ˆæ¯åç§»ç»„æˆçš„å—ã€‚ ç„¶åå°†è¯¥å—ä¼ é€’åˆ°å¯¹ç­‰èŠ‚ç‚¹ã€‚ Client The client application is responsible for putting together a transaction proposal as shown in Figure2. The client submits the transaction proposal to 1-or-more peers simultaneously for collecting proposal responses with endorsements to satisfy the endorsement policy. It then broadcasts the transaction to the orderer to be included into a block and delivered to all peers for validation and commit. In Fabric v1.0, the onus is on the client to ensure that the transaction is well-formed and satisfies the endorsement policies. å¦‚å›¾2æ‰€ç¤ºï¼Œå®¢æˆ·åº”ç”¨ç¨‹åºè´Ÿè´£å°†äº¤æ˜“ææ¡ˆæ±‡æ€»åœ¨ä¸€èµ·ã€‚ å®¢æˆ·å°†äº¤æ˜“ææ¡ˆåŒæ—¶æäº¤ç»™ä¸€ä¸ªæˆ–å¤šä¸ªå¯¹ç­‰èŠ‚ç‚¹ï¼Œä»¥æ”¶é›†å¸¦æœ‰èƒŒä¹¦çš„ææ¡ˆå“åº”ï¼Œä»¥æ»¡è¶³èƒŒä¹¦ç­–ç•¥ã€‚ ç„¶åï¼Œå®ƒå°†äº¤æ˜“å¹¿æ’­ç»™æ’åºèŠ‚ç‚¹ï¼Œä¸ºäº†æ‰“åŒ…å¹¶äº¤ä»˜ç»™æ‰€æœ‰å¯¹ç­‰èŠ‚ç‚¹æ¥è¿›è¡ŒéªŒè¯å’Œæäº¤ã€‚ åœ¨Fabric v1.0ä¸­ï¼Œå®¢æˆ·æœ‰è´£ä»»ç¡®ä¿äº¤æ˜“çš„æ ¼å¼æ­£ç¡®å¹¶æ»¡è¶³èƒŒä¹¦ç­–ç•¥ã€‚ B. Transaction Flow in Hyperledger Fabric Unlike other Blockchain network which employ an order-execute transaction model, the Fabric employs a simulate order-validate &amp; commit model. Figure 1 depicts the transaction flow which involves 3 steps, 1) Endorsement Phase â€“ simulating the transaction on selective peers and collecting the state changes; 2) Ordering Phase â€“ ordering the transactions through a consensus protocol; and 3) Validation Phase â€“ validation followed by commit to ledger. Before transactions can be submitted on Fabric, the network needs to be bootstrapped with participating organizations, their MSPs and identities for peers. First, a channel is created on the orderer network with respective organization MSPs. Second, peers of each organization join the channel and initializes the ledger. Finally, the required chaincodes are installed on the channel. ä¸å…¶ä»–é‡‡ç”¨é¡ºåºæ‰§è¡Œäº¤æ˜“æ¨¡å‹çš„åŒºå—é“¾ç½‘ç»œä¸åŒï¼ŒFabric é‡‡ç”¨æ¨¡æ‹Ÿé¡ºåºéªŒè¯å’Œæäº¤æ¨¡å‹ã€‚ å›¾1æç»˜äº†æ¶‰åŠä¸‰ä¸ªæ­¥éª¤çš„äº¤æ˜“æµç¨‹ï¼š 1ï¼‰èƒŒä¹¦é˜¶æ®µâ€“åœ¨å¯é€‰æ‹©çš„å¯¹ç­‰èŠ‚ç‚¹ä¸Šæ¨¡æ‹Ÿäº¤æ˜“å¹¶æ”¶é›†çŠ¶æ€å˜åŒ–ï¼› 2ï¼‰æ’åºé˜¶æ®µâ€“é€šè¿‡å…±è¯†åè®®å¯¹äº¤æ˜“è¿›è¡Œæ’åºï¼› 3ï¼‰éªŒè¯é˜¶æ®µâ€“éªŒè¯ï¼Œç„¶åæäº¤åˆ°è´¦æœ¬ã€‚ åœ¨å¯ä»¥åœ¨ Fabric ä¸Šæäº¤äº¤æ˜“ä¹‹å‰ï¼Œç½‘ç»œéœ€è¦ä¸å‚ä¸ç»„ç»‡ï¼ˆå®ƒä»¬çš„èµ„æ ¼æœåŠ¡æä¾›å•†ï¼‰ä¸€èµ·è‡ªä¸¾å¹¶éªŒè¯å¯¹ç­‰èŠ‚ç‚¹ã€‚ é¦–å…ˆï¼Œåœ¨å¸¦æœ‰å„è‡ªç»„ç»‡èµ„æ ¼æœåŠ¡æä¾›å•†çš„æ’åºç½‘ç»œä¸Šåˆ›å»ºé€šé“ã€‚ å…¶æ¬¡ï¼Œæ¯ä¸ªç»„ç»‡çš„å¯¹ç­‰èŠ‚ç‚¹åŠ å…¥é€šé“å¹¶åˆå§‹åŒ–è´¦æœ¬ã€‚ æœ€åï¼Œæ‰€éœ€çš„é“¾ç è¢«å®‰è£…åœ¨é€šé“ä¸Šã€‚ Endorsement Phase A client application using the Fabric SDK, constructs a transaction proposal to invoke a chaincode function which in-turn will perform read and/or write operations on the ledger state. The proposal is signed with the clientâ€™s credentials and the client sends it to 1-or-more endorsing peers simultaneously. The endorsement policy for the chaincode dictates the organization peers the client needs to send the proposal to for simulation. å®¢æˆ·ç«¯ï¼ˆclientï¼‰ä½¿ç”¨ Fabric SDK æ„é€ äº¤æ˜“æè®®ï¼ˆtransaction proposalï¼‰ ä»¥è°ƒç”¨é“¾ç å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†ä¾æ¬¡å¯¹è´¦æœ¬çŠ¶æ€æ‰§è¡Œè¯»å–å’Œ/æˆ–å†™å…¥æ“ä½œã€‚ ææ¡ˆå·²è¢«å®¢æˆ·ç«¯çš„èµ„æ ¼è¯ä¹¦ç­¾åï¼Œä¸”å®¢æˆ·ç«¯åŒæ—¶å°†ææ¡ˆå‘é€ç»™1ä¸ªæˆ–å¤šä¸ªèƒŒä¹¦èŠ‚ç‚¹ã€‚ é“¾ç çš„èƒŒä¹¦ç­–ç•¥è§„å®šäº†å®¢æˆ·ç«¯éœ€è¦å‘é€æè®®ç»™æ¨¡æ‹Ÿçš„ç»„ç»‡å¯¹ç­‰èŠ‚ç‚¹ã€‚ First, each endorsing peer verifies that the submitter is authorized to invoke transactions on the channel. Second, the peer executes the chaincode, which can access the current ledger state on peer. The transaction results include response value, read-set and write-set. All reads read the current state of ledger, but all writes are intercepted and modify a private transaction workspace. Third, the endorsing peer calls a system chaincode called ESCC which signs this transaction response with peerâ€™s identity and replies back to client with proposal response. Finally, the client inspects the proposal response to verify that it bears the signature of the peer. The client collects enough proposal response from different peers, verifies that the endorsements are same. Since each peer could have executed the transaction at different height in the blockchain, it is possible that the proposal response differs. In such cases, the client has to re-submit the proposal to other peers, to obtain sufficient matching responses. é¦–å…ˆï¼Œæ¯ä¸ªèƒŒä¹¦èŠ‚ç‚¹éƒ½ä¼šéªŒè¯æäº¤è€…æ˜¯å¦æœ‰æƒè°ƒç”¨é€šé“ä¸Šçš„äº¤æ˜“ã€‚ å…¶æ¬¡ï¼Œå¯¹ç­‰èŠ‚ç‚¹æ‰§è¡Œé“¾ç ï¼Œè¯¥é“¾ç å¯ä»¥è®¿é—®èŠ‚ç‚¹ä¸Šå½“å‰çš„è´¦æœ¬çŠ¶æ€ã€‚äº¤æ˜“ç»“æœåŒ…æ‹¬å“åº”å€¼ï¼Œè¯»é›†å’Œå†™é›†ã€‚æ‰€æœ‰è¯»å‡è¯»å–è´¦æœ¬çš„å½“å‰çŠ¶æ€ï¼Œä½†æ‰€æœ‰å†™å…¥å‡ä¼šè¢«æ‹¦æˆªå¹¶ä¿®æ”¹ç§æœ‰äº¤æ˜“å·¥ä½œåŒºã€‚ ç¬¬ä¸‰ï¼ŒèƒŒä¹¦èŠ‚ç‚¹è°ƒç”¨ä¸€ä¸ªç§°ä¸º ESCC çš„ç³»ç»Ÿé“¾ç ï¼Œè¯¥ç³»ç»Ÿé“¾ç ä»¥èŠ‚ç‚¹çš„èº«ä»½å¯¹è¯¥äº¤æ˜“å“åº”è¿›è¡Œç­¾åï¼Œå¹¶é€šè¿‡ææ¡ˆå“åº”å°†å…¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ æœ€åï¼Œå®¢æˆ·ç«¯æ£€æŸ¥æè®®å“åº”ä»¥éªŒè¯å®ƒæ˜¯å¦å¸¦æœ‰èŠ‚ç‚¹çš„ç­¾åã€‚å®¢æˆ·ç«¯ä»ä¸åŒçš„èŠ‚ç‚¹é‚£é‡Œæ”¶é›†åˆ°è¶³å¤Ÿå¤šçš„ææ¡ˆå“åº”ï¼ŒéªŒè¯èƒŒä¹¦æ˜¯å¦ç›¸åŒã€‚ ç”±äºæ¯ä¸ªèŠ‚ç‚¹å¯èƒ½åœ¨åŒºå—é“¾ä¸­çš„ä¸åŒé«˜åº¦å¤„æ‰§è¡Œäº¤æ˜“ï¼Œå› æ­¤ææ¡ˆå“åº”å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯å¿…é¡»å°†ææ¡ˆé‡æ–°æäº¤ç»™å…¶ä»–èŠ‚ç‚¹ï¼Œä»¥è·å¾—è¶³å¤Ÿçš„åŒ¹é…å“åº”ã€‚ Ordering Phase The client broadcasts a well-formed transaction message to the Ordering Service. The transaction will contain the read-write sets, the endorsing peer signatures and the Channel ID. The ordering service does not need to inspect the contents of the transaction to perform its operation. It receives transactions from different clients for various channels and enqueues them on a per-channel basis. It creates blocks of transactions per channel, sign the block with its identity and delivers them to peers using gossip messaging protocol. å®¢æˆ·ç«¯å‘æ’åºæœåŠ¡å¹¿æ’­æ ¼å¼æ­£ç¡®çš„äº¤æ˜“æ¶ˆæ¯ã€‚ äº¤æ˜“å°†åŒ…å«è¯»å†™é›†ï¼ŒèƒŒä¹¦èŠ‚ç‚¹ç­¾åå’Œé€šé“IDã€‚ æ’åºæœåŠ¡ä¸éœ€è¦æ£€æŸ¥äº¤æ˜“çš„å†…å®¹å³å¯æ‰§è¡Œæ“ä½œã€‚ å®ƒæ¥æ”¶æ¥è‡ªä¸åŒå®¢æˆ·çš„å„ç§é€šé“çš„äº¤æ˜“ï¼Œå¹¶åœ¨æ¯ä¸ªé€šé“çš„åŸºç¡€ä¸Šæ’é˜Ÿã€‚ å®ƒåˆ›å»ºæ¯ä¸ªé€šé“çš„äº¤æ˜“å—ï¼Œç”¨å…¶èº«ä»½ç­¾åè¯¥å—ï¼Œå¹¶ä½¿ç”¨ gossip é€šä¿¡åè®®å°†å…¶â€œä¼ é€’â€ç»™èŠ‚ç‚¹ã€‚ Validation Phase All peers, both endorsing and committing peers on a channel receive blocks from the network. The peer first verifies the Ordererâ€™s signature on the block. Each valid block is decoded and all transactions in a block goes through VSCC validation first before performing MVCC validation. é€šé“ä¸Šçš„æ‰€æœ‰å¯¹ç­‰èŠ‚ç‚¹ï¼ˆèƒŒä¹¦èŠ‚ç‚¹å’Œæäº¤èŠ‚ç‚¹ï¼‰éƒ½ä»ç½‘ç»œæ¥æ”¶å—ã€‚ é¦–å…ˆï¼ŒèŠ‚ç‚¹éªŒè¯å—ä¸Šæ’åºèŠ‚ç‚¹çš„ç­¾åã€‚ åœ¨æ‰§è¡Œ MVCC éªŒè¯ä¹‹å‰ï¼Œæ¯ä¸ªæœ‰æ•ˆå—éƒ½å°†è¢«è§£ç ï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªå—ä¸­çš„æ‰€æœ‰äº¤æ˜“éƒ½å°†å…ˆé€šè¿‡ VSCC éªŒè¯ã€‚ VSCC Validation A Validation system chaincode evaluates endorsements in the transaction against the endorsement policy specified for the chaincode. If the endorsement policy is not satisfied, then that transaction is marked invalid. éªŒè¯ç³»ç»Ÿé“¾ç ä¼šæ ¹æ®ä¸ºé“¾ç æŒ‡å®šçš„èƒŒä¹¦ç­–ç•¥è¯„ä¼°äº¤æ˜“ä¸­çš„èƒŒä¹¦ã€‚ å¦‚æœä¸ç¬¦åˆåˆ™è¯¥äº¤æ˜“å°†æ ‡è®°ä¸ºæ— æ•ˆã€‚ MVCC Validation As the name implies, the Multi-Version Concurrency Control check ensures that the versions of keys read by a transaction during the endorsement phase are same as their current state in the local ledger at commit time. This is similar to a read-write conflict check done for concurrency control, and is performed sequentially on all the valid transactions in the block (as marked by VSCC validation). If the read-set versions do not match, denoting that a concurrent previous (as-in earlier in this block or before) transaction modified the data read and was since (itâ€™s endorsement) successfully committed, the transaction is marked invalid. To ensure that no phantom reads occur, for range queries, the query is re-executed and compares the hashes of results (which is also stored as part of read-set captured during endorsement). é¡¾åæ€ä¹‰ï¼Œâ€œå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶â€æ£€æŸ¥ç¡®ä¿äº¤æ˜“åœ¨èƒŒä¹¦é˜¶æ®µè¯»å–çš„å¯†é’¥ç‰ˆæœ¬ä¸æäº¤æ—¶æœ¬åœ°è´¦æœ¬ä¸­çš„å½“å‰çŠ¶æ€ç›¸åŒã€‚ è¿™ç±»ä¼¼äºä¸ºè¿›è¡Œå¹¶å‘æ§åˆ¶è€Œè¿›è¡Œçš„è¯»å†™å†²çªæ£€æŸ¥ï¼Œå¹¶ä¸”å¯¹å—ä¸­çš„æ‰€æœ‰æœ‰æ•ˆäº¤æ˜“æŒ‰é¡ºåºæ‰§è¡Œï¼ˆç”± VSCC éªŒè¯æ ‡è®°ï¼‰ã€‚ å¦‚æœè¯»å–çš„ç‰ˆæœ¬ä¸åŒ¹é…ï¼Œè¡¨ç¤ºå¹¶å‘çš„å…ˆå‰ï¼ˆåœ¨æ­¤å—ä¸­è¾ƒæ—©æˆ–ä¹‹å‰ï¼‰çš„äº¤æ˜“ä¿®æ”¹äº†è¯»å–çš„æ•°æ®ï¼Œå¹¶ä¸”æ˜¯ç”±äºï¼ˆèƒŒä¹¦ï¼‰æˆåŠŸæäº¤çš„ï¼Œåˆ™è¯¥äº¤æ˜“è¢«æ ‡è®°ä¸ºæ— æ•ˆã€‚ ä¸ºç¡®ä¿ä¸å‘ç”Ÿå¹»è¯»ï¼Œå¯¹äºèŒƒå›´æŸ¥è¯¢ï¼Œå°†é‡æ–°æ‰§è¡ŒæŸ¥è¯¢å¹¶æ¯”è¾ƒç»“æœçš„å“ˆå¸Œå€¼ï¼ˆä¹Ÿå°†å…¶å­˜å‚¨ä¸ºèƒŒä¹¦æœŸé—´æ•è·çš„è¯»å–é›†çš„ä¸€éƒ¨åˆ†ï¼‰ã€‚ Ledger Update Phase As the last step of transaction processing, the ledger is updated by appending the block to the local ledger. The StateDB, which holds the current state of all keys is updated with the write-sets of valid transactions (as marked by MVCC validation). These updates to the StateDB are performed atomically for a block of transactions and applies the updates to bring the StateDB to the state after all transaction in the block have been processed. ä½œä¸ºäº¤æ˜“å¤„ç†çš„æœ€åä¸€æ­¥ï¼Œé€šè¿‡å°†å—æ·»åŠ åˆ°æœ¬åœ°è´¦æœ¬æ¥æ›´æ–°è´¦æœ¬ã€‚ ä½¿ç”¨æœ‰æ•ˆäº¤æ˜“çš„å†™é›†ï¼ˆç”± MVCC éªŒè¯æ ‡è®°ï¼‰æ›´æ–°ä¿å­˜æ‰€æœ‰å¯†é’¥å½“å‰çŠ¶æ€çš„ StateDBã€‚ å¯¹ StateDB çš„è¿™äº›æ›´æ–°æ˜¯é’ˆå¯¹ä¸€ä¸ªäº¤æ˜“å—è‡ªåŠ¨æ‰§è¡Œçš„ï¼Œå¹¶åœ¨å¤„ç†äº†è¯¥å—ä¸­çš„æ‰€æœ‰äº¤æ˜“ä¹‹åï¼Œåº”ç”¨æ›´æ–°ä»¥ä½¿ StateDB è¿›å…¥çŠ¶æ€ã€‚ C. Configuration Parameters Our goal is to study the performance of Fabric under various conditions to understand how choices of different facets of the system affect performance. However, the parameter space is wide and we limit our choices to comprehensively cover a few components and look widely at other aspects of the system so that we can identify interplay of component level choices. To this end, we choose to understand and characterize the overall performance primarily from a peerâ€™s perspective. More specifically, we keep the Orderer, Gossip (physical network) etc. static so that it does not affect our experiments and observations. Next, we describe the five parameters considered in this study and their significance. æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç ”ç©¶å„ç§æ¡ä»¶ä¸‹ Fabric çš„æ€§èƒ½ï¼Œä»¥äº†è§£ç³»ç»Ÿä¸åŒæ–¹é¢çš„é€‰æ‹©å¦‚ä½•å½±å“æ€§èƒ½ã€‚ ä½†æ˜¯ï¼Œå‚æ•°æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬å°†é€‰æ‹©èŒƒå›´é™åˆ¶ä¸ºå…¨é¢æ¶µç›–å‡ ä¸ªç»„ä»¶ï¼Œå¹¶å¹¿æ³›æŸ¥çœ‹ç³»ç»Ÿçš„å…¶ä»–æ–¹é¢ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥è¯†åˆ«ç»„ä»¶çº§åˆ«é€‰æ‹©çš„ç›¸äº’å½±å“ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬é€‰æ‹©ä¸»è¦ä»èŠ‚ç‚¹çš„è§’åº¦æ¥ç†è§£å’Œè¡¨å¾æ•´ä½“ç»©æ•ˆã€‚ æ›´å…·ä½“åœ°è¯´ï¼Œæˆ‘ä»¬å°†æ’åºèŠ‚ç‚¹ï¼ŒGossipï¼ˆç‰©ç†ç½‘ç»œï¼‰ç­‰ä¿æŒé™æ€ï¼Œä»¥å…å½±å“æˆ‘ä»¬çš„å®éªŒå’Œè§‚å¯Ÿç»“æœã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æè¿°äº†è¿™é¡¹ç ”ç©¶ä¸­è€ƒè™‘çš„äº”ä¸ªå‚æ•°åŠå…¶æ„ä¹‰ã€‚ 1) Block Size Transactions are batched at the orderer and delivered as a block to peers using a gossip protocol. Each peer processes one block at a time. Cryptographic processing like orderer signature verification is done per-block unlike transaction endorsement signatures verification, which is pertransaction. Varying blocksize also brings in the throughputvs-latency tradeoff and for a better picture, we study it in conjunction with the transaction arrival rate. äº¤æ˜“åœ¨æ’åºèŠ‚ç‚¹å¤„åˆ†æ‰¹å¤„ç†ï¼Œå¹¶æ‰“åŒ…åä½¿ç”¨ gossip åè®®äº¤ä»˜ç»™å¯¹ç­‰èŠ‚ç‚¹ã€‚ æ¯ä¸ªå¯¹ç­‰èŠ‚ç‚¹ä¸€æ¬¡å¤„ç†ä¸€ä¸ªå—ã€‚ åƒæ’åºèŠ‚ç‚¹éªŒç­¾è¿™æ ·çš„åŠ å¯†å¤„ç†æ˜¯æŒ‰å—å®Œæˆçš„ï¼Œè¿™ä¸äº¤æ˜“èƒŒä¹¦éªŒç­¾ï¼ˆå³æ¯ç¬”äº¤æ˜“ï¼‰ä¸åŒã€‚ å˜åŒ–çš„å—å¤§å°è¿˜ä¼šå¸¦æ¥ååé‡ä¸å»¶è¿Ÿä¹‹é—´çš„æƒè¡¡ï¼Œä¸ºäº†æ›´å¥½åœ°äº†è§£æƒ…å†µï¼Œæˆ‘ä»¬ç»“åˆäº¤æ˜“åˆ°è¾¾ç‡å¯¹å…¶è¿›è¡Œäº†ç ”ç©¶ã€‚ 2) Endorsement Policy An endorsement policy dictates how many executions of a transaction and signing need to happen before a transaction request can be submitted to the orderer so that the transaction can pass the VSCC validation phase at peers. The VSCC validation of a transactionâ€™ endorsements require evaluation of endorsement policy expression against the collected endorsements and checking for satisfiability, which is NP-Complete. Additionally, a check includes verifying that the identity and its signature. The complexity of the endorsement policy will affect resources and the time taken to collect and evaluate it. èƒŒä¹¦ç­–ç•¥æŒ‡ç¤ºåœ¨å¯ä»¥å°†äº¤æ˜“è¯·æ±‚æäº¤ç»™æ’åºèŠ‚ç‚¹ä¹‹å‰ï¼Œéœ€è¦æ‰§è¡Œå¤šå°‘äº¤æ˜“å’Œç­¾åï¼Œä»¥ä¾¿äº¤æ˜“å¯ä»¥åœ¨å¯¹ç­‰èŠ‚ç‚¹ä¸­é€šè¿‡ VSCC éªŒè¯é˜¶æ®µã€‚ VSCC å¯¹äº¤æ˜“èƒŒä¹¦çš„éªŒè¯éœ€è¦æ ¹æ®æ”¶é›†çš„èƒŒä¹¦å’Œæ£€æŸ¥å¯æ»¡è¶³æ€§æ¥è¯„ä¼°èƒŒä¹¦ç­–ç•¥è¡¨ç¤ºï¼Œå³ NP å®Œå…¨ã€‚ å¦å¤–ï¼Œæ£€æŸ¥åŒ…æ‹¬éªŒè¯èº«ä»½åŠå…¶ç­¾åã€‚ èƒŒä¹¦æ”¿ç­–çš„å¤æ‚æ€§å°†å½±å“èµ„æºä»¥åŠæ”¶é›†å’Œè¯„ä¼°å®ƒçš„æ—¶é—´ã€‚ 3) Channel Channels isolate transactions from one another. Transactions submitted to different channels are ordered, delivered and processed independent of each other, albeit on same peers. Channels bring inherent parallelism to various aspects of transaction processing in the Fabric. While number of channels to use, and what channels to transact on is determined by the application and participant combinatorics, it has significant implications on platform performance and scalability. é€šé“å°†äº¤æ˜“å½¼æ­¤éš”ç¦»ã€‚ æäº¤åˆ°ä¸åŒé€šé“çš„äº¤æ˜“å½¼æ­¤ç‹¬ç«‹åœ°è¿›è¡Œæ’åºï¼Œäº¤ä»˜å’Œå¤„ç†ï¼Œå°½ç®¡å®ƒä»¬åœ¨åŒä¸€å¯¹ç­‰èŠ‚ç‚¹ä¸Šã€‚ é€šé“ä¸ºç»“æ„ä¸­äº¤æ˜“å¤„ç†çš„å„ä¸ªæ–¹é¢å¸¦æ¥äº†å›ºæœ‰çš„å¹¶è¡Œæ€§ã€‚ å°½ç®¡ä½¿ç”¨çš„é€šé“æ•°é‡ä»¥åŠè¦è¿›è¡Œäº¤æ˜“çš„é€šé“ç”±åº”ç”¨ç¨‹åºå’Œå‚ä¸è€…ç»„åˆç¨‹åºç¡®å®šï¼Œä½†å®ƒå¯¹å¹³å°æ€§èƒ½å’Œå¯æ‰©å±•æ€§å…·æœ‰é‡å¤§å½±å“ã€‚ 4) Resource Allocation Peers run CPU-intensive signature computation and verification routines as part of system chaincodes. User chaincodes executed by endorsing peers during transaction simulation add to this mix. We vary the number of CPU cores on peer nodes to study its effect. While network characteristics are important, we assume a datacenter or high bandwidth network with very low latency for this study. å¯¹ç­‰èŠ‚ç‚¹ å°† CPU å¯†é›†å‹ç­¾åè®¡ç®—å’ŒéªŒè¯ä¾‹ç¨‹ä½œä¸ºç³»ç»Ÿé“¾ç çš„ä¸€éƒ¨åˆ†è¿è¡Œã€‚ åœ¨äº¤æ˜“æ¨¡æ‹Ÿè¿‡ç¨‹ä¸­é€šè¿‡èƒŒä¹¦å¯¹ç­‰èŠ‚ç‚¹æ‰§è¡Œçš„ç”¨æˆ·é“¾ç å°†æ·»åŠ åˆ°æ­¤ç»„åˆä¸­ã€‚ æˆ‘ä»¬æ”¹å˜å¯¹ç­‰èŠ‚ç‚¹ä¸Š CPU å†…æ ¸çš„æ•°é‡ä»¥ç ”ç©¶å…¶æ•ˆæœã€‚ å°½ç®¡ç½‘ç»œç‰¹æ€§å¾ˆé‡è¦ï¼Œä½†æˆ‘ä»¬å‡è®¾æ­¤ç ”ç©¶çš„æ•°æ®ä¸­å¿ƒæˆ–é«˜å¸¦å®½ç½‘ç»œå…·æœ‰æä½çš„å»¶è¿Ÿã€‚ 5) Ledger Database Fabric supports two alternatives for key-value store, CouchDB and GoLevelDB to maintain the current state. Both are key-value stores, while GoLevelDB is an embedded database, CouchDB uses a client-server model (accessed using REST API over a secure HTTP) and supports document/JSON data-model. Fabric æ”¯æŒé”®å€¼å­˜å‚¨çš„ä¸¤ç§æ–¹æ¡ˆï¼Œå³ CouchDB å’Œ GoLevelDB ä»¥ç»´æŠ¤å½“å‰çŠ¶æ€ã€‚ ä¸¤è€…éƒ½æ˜¯é”®å€¼å­˜å‚¨ï¼Œè€Œ GoLevelDB æ˜¯åµŒå…¥å¼æ•°æ®åº“ï¼Œè€Œ CouchDB ä½¿ç”¨å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å‹ï¼ˆé€šè¿‡ REST API é€šè¿‡å®‰å…¨çš„ HTTP è®¿é—®ï¼‰ï¼Œå¹¶æ”¯æŒ æ–‡æ¡£/JSON æ•°æ®æ¨¡å‹ã€‚ III. PROBLEM STATEMENT The two primary goals of our work are: æˆ‘ä»¬å·¥ä½œçš„ä¸¤ä¸ªä¸»è¦ç›®æ ‡æ˜¯ï¼š 1) Performance Benchmarking To conduct an in-depth study of Fabric core components and benchmark Fabric performance for common usage patterns. We aim to study the throughput and latency characteristics of the system when varying the configuration of parameters listed Â§II-C to understand the relationship between the performance metrics and parameters. Based on our observations, we aim to derive and present a few high-level guidelines, which would be valuable to developers and deployment engineers. å¯¹ Fabric æ ¸å¿ƒç»„ä»¶è¿›è¡Œæ·±å…¥ç ”ç©¶ï¼Œå¹¶é’ˆå¯¹å¸¸è§ä½¿ç”¨æ¨¡å¼å¯¹åŸºå‡† Fabric æ€§èƒ½è¿›è¡ŒåŸºå‡†æµ‹è¯•ã€‚ å½“æ›´æ”¹ Â§II-C ä¸­åˆ—å‡ºçš„å‚æ•°é…ç½®æ—¶ï¼Œæˆ‘ä»¬æ—¨åœ¨ç ”ç©¶ç³»ç»Ÿçš„ååé‡å’Œå»¶è¿Ÿç‰¹æ€§ï¼Œä»¥äº†è§£æ€§èƒ½æŒ‡æ ‡ä¸å‚æ•°ä¹‹é—´çš„å…³ç³»ã€‚ æ ¹æ®æˆ‘ä»¬çš„è§‚å¯Ÿï¼Œæˆ‘ä»¬æ—¨åœ¨æ¨å¯¼å¹¶æå‡ºä¸€äº›é«˜çº§æŒ‡å—ï¼Œè¿™äº›æŒ‡å—å¯¹äºå¼€å‘äººå‘˜å’Œéƒ¨ç½²å·¥ç¨‹å¸ˆè€Œè¨€éå¸¸æœ‰ä»·å€¼ã€‚ 2) Optimization To identify bottlenecks using code-level instrumentation and to draw out action items to improve the overall performance of Fabric. On identifying bottlenecks, our goal is to introduce and implement optimizations to alleviate these bottlenecks. ä½¿ç”¨ä»£ç çº§å·¥å…·è¯†åˆ«ç“¶é¢ˆå¹¶åˆ¶å®šè¡ŒåŠ¨é¡¹ç›®ä»¥æé«˜ Fabric çš„æ•´ä½“æ€§èƒ½ã€‚ åœ¨ç¡®å®šç“¶é¢ˆæ–¹é¢ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å¼•å…¥å¹¶å®æ–½ä¼˜åŒ–æªæ–½ä»¥ç¼“è§£è¿™äº›ç“¶é¢ˆã€‚ IV. EXPERIMENTAL METHODOLOGY We study the throughput and latency as the primary performance metrics for Fabric. Throughput is the rate at which transactions are committed to ledger. Latency is the time taken from application sending the transaction proposal to the transaction commit and is made up of the following latencies: æˆ‘ä»¬å°†ååé‡å’Œå»¶è¿Ÿä½œä¸º Fabric çš„ä¸»è¦æ€§èƒ½æŒ‡æ ‡è¿›è¡Œç ”ç©¶ã€‚ ååé‡æ˜¯å°†äº¤æ˜“æäº¤åˆ°è´¦æœ¬çš„é€Ÿç‡ã€‚ ç­‰å¾…æ—¶é—´æ˜¯æŒ‡ä»åº”ç”¨ç¨‹åºå‘é€äº¤æ˜“ææ¡ˆåˆ°æäº¤äº¤æ˜“æ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œç”±ä»¥ä¸‹ç­‰å¾…æ—¶é—´ç»„æˆï¼š Endorsement latency â€“ the time taken for the client to collect all proposal responses along with the endorsements. Broadcast latency â€“ the time delay between client submitting to orderer and orderer acknowledges the client. Commit latency â€“ the time taken for the peer to validate and commit the transaction. Ordering latency â€“ the time transaction spent on the ordering service. As the performance of ordering service is not studied in this work, we are not presenting this latency. èƒŒä¹¦å»¶è¿Ÿ ï¼šå®¢æˆ·ç«¯æ”¶é›†æ‰€æœ‰ææ¡ˆå›å¤ä»¥åŠèƒŒä¹¦çš„æ—¶é—´ã€‚ å¹¿æ’­å»¶è¿Ÿï¼šå®¢æˆ·ç«¯æäº¤åˆ°æ’åºèŠ‚ç‚¹å’Œæ’åºèŠ‚ç‚¹é€šçŸ¥å®¢æˆ·ç«¯çš„æ—¶é—´ã€‚ æäº¤å»¶è¿Ÿï¼šå¯¹ç­‰èŠ‚ç‚¹éªŒè¯å¹¶æäº¤äº¤æ˜“æ‰€éœ€çš„æ—¶é—´ã€‚ æ’åºå»¶è¿Ÿï¼šäº¤æ˜“èŠ±è´¹åœ¨æ’åºæœåŠ¡çš„æ—¶é—´ã€‚ç”±äºæœ¬æ–‡æœªç ”ç©¶æ’åºæœåŠ¡çš„æ€§èƒ½ï¼Œå› æ­¤æˆ‘ä»¬ä¸ä»‹ç»è¿™ç§å»¶è¿Ÿã€‚ Further, we define the following three latency at block level: VSCC validation latency â€“ the time taken to validate all transactionsâ€™ endorsement signature set (in a block) against the endorsement policy. MVCC validation latency â€“ the time taken to validate all transactions in a block by employing multi-version concurrency control as described in Â§II-B. Ledger update latency â€“ the time taken to update the state database with write-set of all valid transactions in a block. æ­¤å¤–ï¼Œæˆ‘ä»¬åœ¨å—çº§åˆ«å®šä¹‰äº†ä»¥ä¸‹ä¸‰ä¸ªå»¶è¿Ÿï¼š VSCC éªŒè¯å»¶è¿Ÿï¼šæ ¹æ®èƒŒä¹¦ç­–ç•¥éªŒè¯æ‰€æœ‰äº¤æ˜“çš„èƒŒä¹¦ç­¾åé›†ï¼ˆä»¥å—ä¸ºå•ä½ï¼‰æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚ MVCC éªŒè¯ç­‰å¾…æ—¶é—´ï¼šé€šè¿‡é‡‡ç”¨ç¬¬ II-B èŠ‚æ‰€è¿°çš„å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶æ¥éªŒè¯ä¸€ä¸ªåŒºå—ä¸­æ‰€æœ‰äº¤æ˜“æ‰€éœ€çš„æ—¶é—´ã€‚ è´¦æœ¬æ›´æ–°ç­‰å¾…æ—¶é—´ï¼šå—ä¸­æ‰€æœ‰æœ‰æ•ˆäº¤æ˜“çš„å†™é›†æ›´æ–°çŠ¶æ€æ•°æ®åº“æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚ Since one of the major goal of this work is to identify performance bottlenecks, our load generator spans multiple clients each stresses the system by continuously generating transactions instead of following a distribution model (say, Poisson). Each client also sends proposal requests in parallel and collates endorsements. The transactions are submitted asynchronously to achieve the specified rate without waiting for commits. However, the benchmark framework tracks commit using our tools named fetch-block to calculate throughput and latency. Further, we instrumented the Fabric source code to collect fine-grained latency such as MVCC latency and others latencies. For multi-channel experiments, all organizations and all its peers join the channel. While other combinations are possible, we believe our approach will stress test the system. ç”±äºè¿™é¡¹å·¥ä½œçš„ä¸»è¦ç›®æ ‡ä¹‹ä¸€æ˜¯ç¡®å®šæ€§èƒ½ç“¶é¢ˆï¼Œå› æ­¤æˆ‘ä»¬çš„è´Ÿè½½ç”Ÿæˆå™¨è·¨è¶Šå¤šä¸ªå®¢æˆ·ç«¯ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯é€šè¿‡è¿ç»­ç”Ÿæˆäº¤æ˜“è€Œä¸æ˜¯éµå¾ªåˆ†å‘æ¨¡å‹ï¼ˆä¾‹å¦‚ Poissonï¼‰æ¥ç»™ç³»ç»Ÿæ–½åŠ å‹åŠ›ã€‚ æ¯ä¸ªå®¢æˆ·è¿˜å¹¶è¡Œå‘é€ææ¡ˆè¯·æ±‚å¹¶æ”¶é›†èƒŒä¹¦ã€‚ ä¸ºäº†è¾¾åˆ°æŒ‡å®šçš„é€Ÿç‡ï¼Œäº¤æ˜“æ˜¯å¼‚æ­¥æäº¤çš„ï¼Œæ— éœ€ç­‰å¾…æäº¤ã€‚ ç„¶è€Œï¼ŒåŸºå‡†æ¡†æ¶ä½¿ç”¨åä¸º fetch-block çš„å·¥å…·æ¥è·Ÿè¸ªæäº¤ï¼Œä»¥è®¡ç®—ååé‡å’Œå»¶è¿Ÿã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬æ£€æµ‹äº† Fabric æºä»£ç ï¼Œä»¥æ”¶é›†ç»†ç²’åº¦çš„å»¶è¿Ÿï¼Œä¾‹å¦‚ MVCC å»¶è¿Ÿå’Œå…¶ä»–å»¶è¿Ÿã€‚ å¯¹äºå¤šé€šé“å®éªŒï¼Œæ‰€æœ‰ç»„ç»‡åŠå…¶æ‰€æœ‰å¯¹ç­‰èŠ‚ç‚¹éƒ½åŠ å…¥äº†é€šé“ã€‚ å°½ç®¡å…¶ä»–ç»„åˆä¹Ÿæ˜¯å¯èƒ½çš„ï¼Œä½†æˆ‘ä»¬è®¤ä¸ºæˆ‘ä»¬çš„æ–¹æ³•å°†å¯¹ç³»ç»Ÿè¿›è¡Œå‹åŠ›æµ‹è¯•ã€‚ A. Setup and Workloads Our test Fabric network consists of 4 organizations, each with 2 endorsing peers for a total of 8 peer nodes as depicted in Figure 3. There is 1 orderer node with a kafka-zookeeper cluster backing it. All nodes and kafka-zookeeper run on the x86 64 virtual machines in a IBM SoftLayer Datacenter. Each virtual machine is allocated 32 vCPUs of Intel(R) Xeon(R) CPU E5-2683 v3 @ 2.00GHz and 32 GB of memory. The three powerful client machines used to generate load was allocated with 56 vCPUs and 128 GB memory. Nodes are connected to the 3 Gbps Datacenter network. å¦‚å›¾3æ‰€ç¤ºï¼Œæˆ‘ä»¬çš„æµ‹è¯• Fabric ç½‘ç»œç”± 4 ä¸ªç»„ç»‡ç»„æˆï¼Œæ¯ä¸ªç»„ç»‡éƒ½æœ‰ 2 ä¸ªèƒŒä¹¦èŠ‚ç‚¹ï¼Œæ€»å…± 8 ä¸ªå¯¹ç­‰èŠ‚ç‚¹ã€‚æœ‰ 1 ä¸ªå¸¦æœ‰ kafka-zookeeper é›†ç¾¤çš„æ’åºèŠ‚ç‚¹ã€‚ æ‰€æœ‰èŠ‚ç‚¹å’Œ kafka-zookeeper åœ¨ IBM SoftLayer æ•°æ®ä¸­å¿ƒçš„ x86 64 è™šæ‹Ÿæœºä¸Šè¿è¡Œã€‚ æ¯ä¸ªè™šæ‹Ÿæœºéƒ½åˆ†é…äº† 32 ä¸ª IntelÂ®XeonÂ®CPU E5-2683 v3 vCPU @ 2.00GHz å’Œ 32 GB å†…å­˜ã€‚ ç”¨äºç”Ÿæˆè´Ÿè½½çš„ä¸‰å°å¼ºå¤§çš„å®¢æˆ·ç«¯è®¡ç®—æœºåˆ†é…äº† 56 ä¸ª vCPU å’Œ 128 GB å†…å­˜ã€‚ èŠ‚ç‚¹å·²è¿æ¥åˆ° 3 Gbps æ•°æ®ä¸­å¿ƒç½‘ç»œã€‚ In the lack of standard benchmarks for Blockchain, we built our own benchmarks by surveying around 12 internal customer solutions built on Fabric for diverse use cases. We identified common defining patterns, data models, and requirements across the board. One of the recurrent pattern is for each chaincode invocation to operate on exactly one asset or unit of data with the identifier being passed to it. The query logic is done by higher level application layers, often without querying blockchain data. This pattern is modelled as simple writeonly transactions (1w, 3w and 5w denoting number of keys written) in our benchmark. Another common pattern is for a chaincode to read-and-write a small set of keys, like read a JSON document, update a field and write it back. We model these as read-writes of 1, 3 and 5 keys. As we have modeled our benchmark to imitate real world blockchain applications in production, we have not considered other macro benchmarks. åœ¨ç¼ºä¹åŒºå—é“¾æ ‡å‡†åŸºå‡†çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é€šè¿‡è°ƒæŸ¥åŸºäº Fabric çš„ 12 ç§å†…éƒ¨å®¢æˆ·è§£å†³æ–¹æ¡ˆçš„ä¸åŒæ¡ˆä¾‹ï¼Œå»ºç«‹äº†è‡ªå·±çš„åŸºå‡†ã€‚ æˆ‘ä»¬ç¡®å®šäº†é€šç”¨çš„å®šä¹‰æ¨¡å¼ï¼Œæ•°æ®æ¨¡å‹å’Œå…¨é¢çš„è¦æ±‚ã€‚ å¾ªç¯æ¨¡å¼ä¹‹ä¸€æ˜¯ï¼Œæ¯æ¬¡é“¾ç è°ƒç”¨éƒ½åªå¯¹ä¸€ä¸ªèµ„äº§æˆ–æ•°æ®å•å…ƒè¿›è¡Œæ“ä½œï¼Œå¹¶å°†æ ‡è¯†ç¬¦ä¼ é€’ç»™å®ƒã€‚ æŸ¥è¯¢é€»è¾‘ç”±é«˜å±‚åº”ç”¨ç¨‹åºå±‚å®Œæˆï¼Œé€šå¸¸æ— éœ€æŸ¥è¯¢åŒºå—é“¾æ•°æ®ã€‚ åœ¨æˆ‘ä»¬çš„åŸºå‡†ä¸­ï¼Œæ­¤æ¨¡å¼è¢«å»ºæ¨¡ä¸ºç®€å•çš„åªå†™äº¤æ˜“ï¼ˆ1wï¼Œ3w å’Œ 5w è¡¨ç¤ºå†™å…¥çš„å¯†é’¥æ•°ï¼‰ã€‚ å¦ä¸€ç§å¸¸è§æ¨¡å¼æ˜¯é“¾ç è¯»å†™å°‘é‡å¯†é’¥ï¼Œä¾‹å¦‚è¯»å– JSONæ–‡æ¡£ï¼Œæ›´æ–°å­—æ®µå¹¶å°†å…¶å†™å›ã€‚ æˆ‘ä»¬å°†è¿™äº›æ¨¡å‹å»ºæ¨¡ä¸º 1ã€3å’Œ 5 é”®çš„è¯»å†™ã€‚ ç”±äºæˆ‘ä»¬å·²ç»å»ºç«‹äº†åŸºå‡†æ¨¡å‹æ¥æ¨¡æ‹Ÿç”Ÿäº§ä¸­çš„ç°å®ä¸–ç•Œä¸­çš„åŒºå—é“¾åº”ç”¨ç¨‹åºï¼Œå› æ­¤æˆ‘ä»¬æ²¡æœ‰è€ƒè™‘å…¶ä»–å®è§‚åŸºå‡†ã€‚ V. EXPERIMENTAL RESULTS In this section, we study the impact of various configurable parameters listed in Â§II-C on the performance of Hyperledger Fabric. The throughput and transaction latency presented in this section are averaged over multiple runs. In total, we conducted more than 1000s of experiments. åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ç ”ç©¶ Â§II-C ä¸­åˆ—å‡ºçš„å„ç§å¯é…ç½®å‚æ•°å¯¹ Hyperledger Fabric æ€§èƒ½çš„å½±å“ã€‚ æœ¬èŠ‚ä»‹ç»çš„ååé‡å’Œäº¤æ˜“å»¶è¿Ÿæ˜¯å¤šæ¬¡è¿è¡Œçš„å¹³å‡å€¼ã€‚æˆ‘ä»¬æ€»å…±è¿›è¡Œäº† 1000 å¤šæ¬¡å®éªŒã€‚ A. Impact of Transaction Arrival Rate and Block Size Figure 4 plots the average throughput and latency for various block sizes over different transaction arrival rates. Table II presents various transaction arrival rates and block sizes used. For other parameters, refer to Table I. å›¾ 4 ç»˜åˆ¶äº†ä¸åŒäº¤æ˜“åˆ°è¾¾é€Ÿç‡ä¸‹å„ç§å—å¤§å°çš„å¹³å‡ååé‡å’Œå»¶è¿Ÿã€‚ è¡¨ II åˆ—å‡ºäº†ä½¿ç”¨çš„å„ç§äº¤æ˜“åˆ°è¾¾ç‡å’Œå—å¤§å°ã€‚ æœ‰å…³å…¶ä»–å‚æ•°ï¼Œè¯·å‚é˜…è¡¨ Iã€‚ Observation 1: With an increase in transaction arrival rate, the throughput increased linearly as expected till it flattened out at around 140 tps, the saturation point as shown in Figure 4. When the arrival rate was close to or above the saturation point, the latency increased significantly (i.e., from an order of 100s of ms to 10s of seconds). This is because the number of ordered transactions waiting in the VSCC queue during validation phase grew rapidly (refer to Figure 5) which affected the commit latency. However, with further increase in the arrival rate, we observed no impact on the endorsement and broadcast latency but commit latency. This is because VSCC utilized only a single vCPU and hence new transaction proposals utilized other vCPUs on the peer for simulation and endorsement. As a result, only the validation phase became a bottleneck. In this experiment, the endorsement and broadcast latency was around 12 ms and 9 ms, respectively. å¦‚å›¾4æ‰€ç¤ºï¼Œéšç€äº¤æ˜“åˆ°è¾¾ç‡çš„å¢åŠ ï¼Œååé‡æŒ‰é¢„æœŸçº¿æ€§å¢é•¿ï¼Œç›´åˆ°è¾¾åˆ°é¥±å’Œç‚¹ 140 tpsæ—¶æ‰è¶‹äºå¹³å¦ã€‚ å½“åˆ°è¾¾ç‡æ¥è¿‘æˆ–é«˜äºé¥±å’Œç‚¹æ—¶ï¼Œå»¶è¿Ÿæ˜¾ç€å¢åŠ ï¼ˆå³ä»100æ¯«ç§’åˆ°10ç§’çš„æ•°é‡çº§ï¼‰ã€‚ è¿™æ˜¯å› ä¸ºåœ¨éªŒè¯é˜¶æ®µåœ¨ VSCC é˜Ÿåˆ—ä¸­ç­‰å¾…çš„æ’åºäº¤æ˜“æ•°é‡è¿…é€Ÿå¢é•¿ï¼ˆè¯·å‚é˜…å›¾5ï¼‰ï¼Œè¿™å½±å“äº†æäº¤å»¶è¿Ÿã€‚ ä½†æ˜¯ï¼Œéšç€åˆ°è¾¾ç‡çš„è¿›ä¸€æ­¥æé«˜ï¼Œæˆ‘ä»¬å‘ç°å¯¹èƒŒä¹¦å’Œå¹¿æ’­å»¶è¿Ÿæ²¡æœ‰å½±å“ï¼Œä½†æ˜¯å¯¹æäº¤å»¶è¿Ÿæœ‰å½±å“ ã€‚ è¿™æ˜¯å› ä¸º VSCC ä»…ä½¿ç”¨å•ä¸ª vCPUï¼Œå› æ­¤æ–°çš„äº¤æ˜“ææ¡ˆä½¿ç”¨å¯¹ç­‰èŠ‚ç‚¹çš„å…¶ä»– vCPU è¿›è¡Œæ¨¡æ‹Ÿå’ŒèƒŒä¹¦ã€‚ ç»“æœï¼Œåªæœ‰éªŒè¯é˜¶æ®µæ‰æˆä¸ºç“¶é¢ˆã€‚ åœ¨æ­¤å®éªŒä¸­ï¼ŒèƒŒä¹¦å’Œå¹¿æ’­å»¶è¿Ÿåˆ†åˆ«çº¦ä¸º 12 æ¯«ç§’å’Œ 9 æ¯«ç§’ã€‚ Observation 2: For an arrival rate lower than the saturation point, with an increase in the block size, the latency increased. For e.g., when the arrival rate was 50 tps, with an increase in the block size from 10 to 100, the transaction latency increased 5-fold, from 242 ms to 1250 ms. The reason is that with an increase in the block size, the block creation time at the orderer increased and hence, on average, a transaction had to wait at the orderer for a little longer. For e.g., when the transaction arrival rate was 100 tps, for the block size of 50 and 100, the block creation rate was 2 and 1 block(s) per second, respectively, causing latency to double. å¯¹äºä½äºé¥±å’Œç‚¹çš„åˆ°è¾¾ç‡ï¼Œéšç€å—å¤§å°çš„å¢åŠ ï¼Œç­‰å¾…æ—¶é—´ä¼šå¢åŠ ã€‚ ä¾‹å¦‚ï¼Œå½“åˆ°è¾¾é€Ÿç‡ä¸º 50 tps æ—¶ï¼Œéšç€å—å¤§å°ä» 10 å¢åŠ åˆ° 100ï¼Œäº¤æ˜“å»¶è¿Ÿå¢åŠ äº† 5 å€ï¼Œä» 242 æ¯«ç§’å¢åŠ åˆ° 1250 æ¯«ç§’ã€‚ åŸå› æ˜¯éšç€å—å¤§å°çš„å¢åŠ ï¼Œæ’åºèŠ‚ç‚¹çš„å—åˆ›å»ºæ—¶é—´å¢åŠ ï¼Œå› æ­¤ï¼Œå¹³å‡è€Œè¨€ï¼Œæ¯ä¸ªäº¤æ˜“å¿…é¡»åœ¨æ’åºèŠ‚ç‚¹ç­‰å¾…æ›´é•¿çš„æ—¶é—´ã€‚ ä¾‹å¦‚ï¼Œå½“äº¤æ˜“åˆ°è¾¾é€Ÿç‡ä¸º 100 tpsæ—¶ï¼Œå¯¹äº 50 å’Œ 100 çš„å—å¤§å°ï¼Œå—åˆ›å»ºé€Ÿç‡åˆ†åˆ«ä¸ºæ¯ç§’ 2 ä¸ªå’Œ æ¯ç§’ 1 ä¸ªï¼Œä»è€Œå¯¼è‡´ç­‰å¾…æ—¶é—´åŠ å€ã€‚ Observation 3: For an arrival rate greater than the saturation point, with an increase in the block size, the latency decreased. For e.g., when the arrival rate was 150 tps, with an increase in block size from 10 to 200, the transaction latency decreased from 14 secs to 10 secs. This is because the time taken to validate and commit a block of size n was always lesser than the time taken to validate and commit m blocks each of size n/m. As a result, throughput also increased by m 3.5%. Note that the block creation rate at orderer node was always greater than the processing rate at validator irrespective of block size and arrival rate. å¯¹äºåˆ°è¾¾ç‡å¤§äºé¥±å’Œç‚¹çš„æƒ…å†µï¼Œéšç€å—å¤§å°çš„å¢åŠ ï¼Œç­‰å¾…æ—¶é—´å‡å°‘ã€‚ä¾‹å¦‚ï¼Œå½“åˆ°è¾¾ç‡ä¸º 150 tps æ—¶ï¼Œå—å¤§å°ä» 10å¢åŠ åˆ° 200ï¼Œäº¤æ˜“å»¶è¿Ÿä» 14 ç§’å‡å°‘åˆ° 10 ç§’ã€‚ è¿™æ˜¯å› ä¸ºéªŒè¯å’Œæäº¤å¤§å°ä¸º n çš„å—æ‰€éœ€çš„æ—¶é—´æ€»æ˜¯æ¯”éªŒè¯å’Œæäº¤å¤§å°ä¸º n/m çš„ m ä¸ªå—æ‰€éœ€çš„æ—¶é—´çŸ­ã€‚ ç»“æœï¼Œååé‡ä¹Ÿå¢åŠ äº† 3.5ï¼…ã€‚ è¯·æ³¨æ„ï¼Œæ— è®ºå—å¤§å°å’Œåˆ°è¾¾é€Ÿåº¦å¦‚ä½•ï¼Œåœ¨æ’åºèŠ‚ç‚¹ä¸Šçš„å—åˆ›å»ºé€Ÿåº¦å§‹ç»ˆå¤§äºéªŒè¯èŠ‚ç‚¹çš„å¤„ç†é€Ÿåº¦ã€‚ Observation 4: For a block size, the latency increases as arrival rate increases below the block size as the threshold. The latency decreases as arrival rate increases above the block size. For lower block sizes and at higher arrival rates, blocks were created faster (rather than waiting for a block timeout) which reduced the transaction waiting time at the orderer node. In contrast, for instance, when the block size was 100 and arrival rate increased from 25 to 75 tps, the latency increased from 900 ms to 1250 ms. The reason is that with the increase in rate, the number of transactions in a block increased and so did the time taken by validation and commit phase. Note that if block size limit was not reached within a second, a block was created due to a block timeout. å¯¹äºå—å¤§å°ï¼Œé˜ˆå€¼ä»¥ä¸‹å»¶è¿Ÿéšç€åˆ°è¾¾ç‡å¢åŠ è€Œå¢åŠ ã€‚ é˜ˆå€¼ä»¥ä¸Šéšç€åˆ°è¾¾é€Ÿç‡å¢åŠ è€Œå‡å°‘ã€‚å¯¹äºè¾ƒå°çš„å—å¤§å°å’Œè¾ƒé«˜çš„åˆ°è¾¾ç‡ï¼Œåˆ›å»ºå—çš„é€Ÿåº¦æ›´å¿«ï¼ˆè€Œä¸æ˜¯ç­‰å¾…å—è¶…æ—¶ï¼‰ï¼Œè¿™å‡å°‘äº†æ’åºèŠ‚ç‚¹çš„äº¤æ˜“ç­‰å¾…æ—¶é—´ã€‚ ç›¸åï¼Œä¾‹å¦‚ï¼Œå½“å—å¤§å°ä¸º 100 å¹¶ä¸”åˆ°è¾¾é€Ÿç‡ä» 25 tps å¢åŠ åˆ° 75 tps æ—¶ï¼Œå»¶è¿Ÿä» 900 ms å¢åŠ åˆ° 1250 msã€‚ åŸå› æ˜¯éšç€é€Ÿç‡çš„å¢åŠ ï¼Œä¸€ä¸ªåŒºå—ä¸­çš„äº¤æ˜“æ•°é‡å¢åŠ äº†ï¼ŒéªŒè¯å’Œæäº¤é˜¶æ®µæ‰€èŠ±è´¹çš„æ—¶é—´ä¹Ÿå¢åŠ äº†ã€‚ è¯·æ³¨æ„ï¼Œå¦‚æœåœ¨ä¸€ç§’é’Ÿå†…æœªè¾¾åˆ°å—å¤§å°é™åˆ¶ï¼Œåˆ™ç”±äºå—è¶…æ—¶è€Œåˆ›å»ºäº†ä¸€ä¸ªå—ã€‚ Observation 5: Even at the peak throughput, the resources utilization was very low. With an increase in the arrival rate from 25 to 175 tps, the avg CPU utilization merely increased from 1.4% to 6.7%. The reason is that the CPU intensive task performed during VSCC validation phase of a block (i.e., verification of signatures set against endorsement policy for each transaction) processed only one transaction at a time. Due to this serial execution, only one vCPU was utilized. å³ä½¿åœ¨å³°å€¼ååé‡ä¸‹ï¼Œèµ„æºåˆ©ç”¨ç‡ä¹Ÿå¾ˆä½ã€‚ éšç€åˆ°è¾¾é€Ÿåº¦ä» 25 tps å¢åŠ åˆ° 175 tpsï¼Œå¹³å‡ CPU åˆ©ç”¨ç‡ä»…ä» 1.4ï¼… å¢åŠ åˆ° 6.7ï¼…ã€‚ åŸå› æ˜¯ï¼Œåœ¨ä¸€ä¸ªå—çš„ VSCC éªŒè¯é˜¶æ®µï¼ˆå³ï¼Œé’ˆå¯¹æ¯ä¸ªäº¤æ˜“çš„æ ¹æ®èƒŒä¹¦ç­–ç•¥è¿›è¡Œçš„éªŒç­¾ï¼‰æ‰§è¡Œçš„ CPU å¯†é›†å‹ä»»åŠ¡ä¸€æ¬¡ä»…å¤„ç†ä¸€ä¸ªäº¤æ˜“ã€‚ ç”±äºä¸²è¡Œæ‰§è¡Œï¼Œå› æ­¤ä»…ä½¿ç”¨äº†ä¸€ä¸ª vCPUã€‚ Guideline 1: When the transaction arrival rate is expected to be lower than the saturation point, to achieve a lower transaction latency for applications, always use a lower block size. In such cases, the throughput will match the arrival rate. å½“é¢„è®¡äº¤æ˜“åˆ°è¾¾ç‡ä½äºé¥±å’Œç‚¹æ—¶ï¼Œè¦å®ç°è¾ƒä½çš„åº”ç”¨ç¨‹åºäº¤æ˜“å»¶è¿Ÿï¼Œè¯·å§‹ç»ˆä½¿ç”¨è¾ƒå°çš„å—å¤§å°ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œååé‡å°†ä¸åˆ°è¾¾é€Ÿç‡åŒ¹é…ã€‚ Guideline 2: When the transaction arrival rate is expected to be high, to achieve a higher throughput and a lower transaction latency, always use a higher block size. å½“é¢„è®¡äº¤æ˜“åˆ°è¾¾ç‡å¾ˆé«˜æ—¶ï¼Œè¦å®ç°æ›´é«˜çš„ååé‡å’Œæ›´ä½çš„äº¤æ˜“å»¶è¿Ÿï¼Œè¯·å§‹ç»ˆä½¿ç”¨æ›´å¤§çš„å—å¤§å°ã€‚ Action Item 1: CPU resources are under-utilized. A potential optimization would be to process multiple transactions at a time during the VSCC validation phase as shown in Â§VI-B. CPUèµ„æºåˆ©ç”¨ä¸è¶³ã€‚ æ½œåœ¨çš„ä¼˜åŒ–å°†æ˜¯åœ¨ VSCC éªŒè¯é˜¶æ®µä¸€æ¬¡å¤„ç†å¤šä¸ªäº¤æ˜“ï¼Œå¦‚ Â§VI-B æ‰€ç¤ºã€‚ B. Impact of Endorsement Policy Figure 6 plots the throughput and latency for various endorsement policies defined using both AND/OR and NOutOf syntax over different transaction arrival rates. Table III presents various policies used in this study. Note that â€˜aâ€™, â€˜bâ€™, â€˜câ€™ and â€˜dâ€™ denotes four different organizations. For other parameters, refer to Table I. Though the syntax (AND/OR, NOutOf) used to define the four endorsement policies are different, semantically they are same. For e.g., 3rd policy listed in both syntax denotes that any three organizations endorsement is adequate to pass the VSCC validation. å›¾ 6 ç»˜åˆ¶äº†ä½¿ç”¨ AND / OR å’Œ NOutOf è¯­æ³•å®šä¹‰çš„å„ç§èƒŒä¹¦ç­–ç•¥åœ¨ä¸åŒäº¤æ˜“åˆ°è¾¾ç‡ä¸Šçš„ååé‡å’Œå»¶è¿Ÿã€‚ è¡¨ III åˆ—å‡ºäº†æœ¬ç ”ç©¶ä¸­ä½¿ç”¨çš„å„ç§ç­–ç•¥ã€‚ è¯·æ³¨æ„ï¼Œâ€œ aâ€ï¼Œâ€œ bâ€ï¼Œâ€œ câ€ å’Œ â€œ dâ€ è¡¨ç¤ºå››ä¸ªä¸åŒçš„ç»„ç»‡ã€‚ æœ‰å…³å…¶ä»–å‚æ•°ï¼Œè¯·å‚é˜…è¡¨ I ã€‚ å°½ç®¡ç”¨äºå®šä¹‰å››ä¸ªèƒŒä¹¦ç­–ç•¥çš„è¯­æ³•ï¼ˆAND / ORï¼ŒNOutOfï¼‰ä¸åŒï¼Œä½†ä»è¯­ä¹‰ä¸Šè®²å®ƒä»¬æ˜¯ç›¸åŒçš„ã€‚ ä¾‹å¦‚ï¼Œä¸¤ç§è¯­æ³•ä¸­åˆ—å‡ºçš„ç¬¬ä¸‰ä¸ªç­–ç•¥è¡¨ç¤ºï¼Œä»»æ„ä¸‰ä¸ªç»„ç»‡çš„è®¤å¯éƒ½è¶³ä»¥é€šè¿‡ VSCC éªŒè¯ã€‚ Observation 6: A combination of a number of sub-policies and a number of crypto signatures verification impacted the performance as shown in Figure 6. The 1st and 4th AND/OR policies, having no sub-policies, performed the same as NOutOf policies due to a few signatures verification. With sub-policies, both the number of sub-policies (i.e., search space) and the number of signatures dictated the performance. For e.g., the throughput achieved with 2nd &amp; 3rd AND/OR policies was 7% &amp; 20% lesser than other policies, respectively. å¦‚å›¾6æ‰€ç¤ºï¼Œå­ç­–ç•¥å’ŒåŠ å¯†ç­¾åéªŒè¯çš„ç»„åˆä¼šå½±å“æ€§èƒ½ã€‚ç”±äºç­¾åéªŒè¯çš„åŸå› ï¼Œæ²¡æœ‰å­ç­–ç•¥çš„ç¬¬ 1 å’Œç¬¬ 4 ä¸ª AND / OR ç­–ç•¥çš„æ‰§è¡Œæ•ˆæœä¸ NOutOf ç­–ç•¥ç›¸åŒã€‚ æœ‰å­ç­–ç•¥çš„æƒ…å†µä¸‹ï¼Œå­ç­–ç•¥çš„æ•°é‡ï¼ˆå³æœç´¢ç©ºé—´ï¼‰å’Œç­¾åçš„æ•°é‡éƒ½å†³å®šäº†æ€§èƒ½ã€‚ ä¾‹å¦‚ï¼Œä½¿ç”¨ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªAND / OR ç­–ç•¥å®ç°çš„ååé‡åˆ†åˆ«æ¯”å…¶ä»–ç­–ç•¥ä½ 7ï¼…å’Œ20ï¼…ã€‚ Figure 7 plots the VSCC latency and the resource utilization at a peer node for various policies. With an increase in the number of signatures verification (specifically for NOutOf), the VSCC latency increased linearly from 68 ms to 137 ms. When there were sub-policies (as with 2nd and 3rd AND/OR policies), the VSCC latency increased significantly (i.e., 172 ms and 203 ms, respectively). A similar trend for resource utilization as show in Figure 7(b). Note that the block bytes increased with increase in the number of endorsements due to the number of x.509 certificates encoded in each transaction. å›¾ 7 ç»˜åˆ¶äº†å„ç§ç­–ç•¥ä¸‹çš„ VSCC å»¶è¿Ÿå’Œå¯¹ç­‰èŠ‚ç‚¹ä¸Šçš„èµ„æºåˆ©ç”¨ç‡ã€‚ éšç€ç­¾åéªŒè¯æ•°é‡çš„å¢åŠ ï¼ˆç‰¹åˆ«æ˜¯å¯¹äºNOutOfï¼‰ï¼ŒVSCC å»¶è¿Ÿä» 68 ms çº¿æ€§å¢åŠ åˆ° 137 msã€‚ å½“å­˜åœ¨å­ç­–ç•¥æ—¶ï¼ˆä¸ç¬¬ 2 å’Œç¬¬ 3 AND / ORç­–ç•¥ä¸€æ ·ï¼‰ï¼ŒVSCC å»¶è¿Ÿæ˜¾ç€å¢åŠ ï¼ˆå³åˆ†åˆ«ä¸º 172 ms å’Œ 203 msï¼‰ã€‚ èµ„æºåˆ©ç”¨ç‡è¶‹åŠ¿ç±»ä¼¼ï¼Œå¦‚å›¾7ï¼ˆbï¼‰æ‰€ç¤ºã€‚ è¯·æ³¨æ„ï¼Œç”±äºæ¯ä¸ªäº¤æ˜“ä¸­ç¼–ç çš„ x.509 è¯ä¹¦æ•°é‡å¢åŠ ï¼Œå› æ­¤å—å­—èŠ‚éšç€èƒŒä¹¦æ•°é‡çš„å¢åŠ è€Œå¢åŠ ã€‚ There are three major CPU intensive operations during the policy validation phase (excluding the check for satisfiability) which are listed below. 1) Deserialization of identity (i.e., x.509 certificate). 2) Validation of identity with organization MSP. 3) Verification of signature on the transaction data. åœ¨ç­–ç•¥éªŒè¯é˜¶æ®µæœ‰3ä¸ªä¸»è¦çš„CPUå¯†é›†å‹æ“ä½œï¼ˆä¸åŒ…æ‹¬æ»¡è¶³æ€§æ£€æŸ¥ï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ 1ï¼‰èº«ä»½çš„ååºåˆ—åŒ–ï¼ˆå³ x.509 è¯ä¹¦ï¼‰ã€‚ 2ï¼‰ä¸ç»„ç»‡ MSP ä¸€èµ·éªŒè¯èº«ä»½ã€‚ 3ï¼‰éªŒè¯äº¤æ˜“æ•°æ®ä¸Šçš„ç­¾åã€‚ Hence, with an increase in the sub-policies (i.e., search space), the number of identities &amp; signatures to be validated, both CPU utilization and VSCC latency increased. It is interesting to note that the MSP identifier is not sent along with x.509 certificate. As a result, the policy evaluator has to validate each x.509 certificate with multiple organization MSPs to identify the correct one. For a 5 minutes run at an arrival rate of 150 tps, we observed 220K such validation out of which 96K validation failed that resulted in wastage of CPU and time. å› æ­¤ï¼Œéšç€å­ç­–ç•¥ï¼ˆå³æœç´¢ç©ºé—´ï¼‰ã€è¦éªŒè¯çš„èº«ä»½å’Œç­¾åçš„æ•°é‡çš„å¢åŠ ï¼Œ CPU åˆ©ç”¨ç‡å’Œ VSCC å»¶è¿Ÿéƒ½å¢åŠ äº†ã€‚ æœ‰è¶£çš„æ˜¯ï¼ŒMSP æ ‡è¯†ç¬¦æ²¡æœ‰ä¸ x.509 è¯ä¹¦ä¸€èµ·å‘é€ã€‚ ç»“æœï¼Œç­–ç•¥è¯„ä¼°è€…å¿…é¡»ä½¿ç”¨å¤šä¸ªç»„ç»‡ MSP éªŒè¯æ¯ä¸ª x.509 è¯ä¹¦ï¼Œä»¥è¯†åˆ«å‡ºæ­£ç¡®çš„è¯ä¹¦ã€‚ ä»¥ 150 tps çš„åˆ°è¾¾é€Ÿåº¦è¿è¡Œäº† 5 åˆ†é’Ÿï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ° 220K è¿™æ ·çš„éªŒè¯ï¼Œå…¶ä¸­ 96K éªŒè¯å¤±è´¥ï¼Œè¿™å¯¼è‡´ CPU å’Œæ—¶é—´çš„æµªè´¹ã€‚ Guideline 3: To achieve a high performance, define policies with a fewer number of sub-policies and signatures. è¦è·å¾—é«˜æ€§èƒ½ï¼Œå®šä¹‰ç­–ç•¥æ—¶ä½¿ç”¨è¾ƒå°‘çš„å­ç­–ç•¥å’Œç­¾åã€‚ Action Item 2: As the cryptography operations are CPU intensive, we can avoid certain routine operations by maintaining a cache of deserialized identity and their MSP information as shown in Â§VI-A. This does not introduce a security risk as identities are long-lived and separate Certificate Revocation Lists (CRLs) are maintained. ç”±äºåŠ å¯†æ“ä½œæ˜¯ CPU å¯†é›†å‹æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç»´æŠ¤ååºåˆ—åŒ–èº«ä»½åŠå…¶ MSP ä¿¡æ¯çš„ç¼“å­˜æ¥é¿å…æŸäº›å¸¸è§„æ“ä½œï¼Œå¦‚ç¬¬ VI-A èŠ‚æ‰€ç¤ºã€‚è¿™ä¸ä¼šå¸¦æ¥å®‰å…¨é£é™©ï¼Œå› ä¸ºèº«ä»½æ˜¯é•¿æœŸçš„ï¼Œå¹¶ä¸”ç»´æŠ¤å•ç‹¬çš„è¯ä¹¦åŠé”€åˆ—è¡¨ï¼ˆCRLï¼‰ã€‚ C. Impact of Channels and Resource Allocation We categorize the arrival rate for different channel count into two categories; non-overloaded when the latency range was [0.4-1s] and overloaded when the latency range was [30-40s]. Figure 8 plots the average throughput and CPU utilization for these two categories. Table IV presents a various number of channels and transaction arrival rate used for this study. For other parameters, refer to Table I. All peers joined all the channels as described in Â§IV. æˆ‘ä»¬å°†ä¸åŒé€šé“æ•°çš„åˆ°è¾¾ç‡åˆ†ä¸ºä¸¤ç±»ï¼š æ—¶å»¶èŒƒå›´ä¸º[0.4-1s]æ—¶ä¸è¿‡è½½ï¼Œæ—¶å»¶èŒƒå›´ä¸º[30-40s]æ—¶è¿‡è½½ã€‚ å›¾8ç»˜åˆ¶äº†è¿™ä¸¤ç±»çš„å¹³å‡ååé‡å’ŒCPUåˆ©ç”¨ç‡ã€‚ è¡¨IVåˆ—å‡ºäº†ç”¨äºæ­¤ç ”ç©¶çš„å„ç§é€šé“å’Œäº¤æ˜“åˆ°è¾¾ç‡ã€‚ æœ‰å…³å…¶ä»–å‚æ•°ï¼Œè¯·å‚é˜…è¡¨Iã€‚æ‰€æœ‰å¯¹ç­‰æ–¹éƒ½æŒ‰ç…§Â§IVä¸­çš„è¯´æ˜åŠ å…¥äº†æ‰€æœ‰é€šé“ã€‚ Observation 7: With the increase in the number of channels, the throughput increased and latency decreased. The resource utilization such as CPU also increased as shown in Figure 8. For e.g., with the increase in the number of channels from 1 to 16, the throughput increased from 140 tps to 832 tps (i.e., by 6Ã— in non-overloaded case) and to 1320 tps (i.e., 9.5Ã— in overloaded case). This is because each channel is independent of others and maintains its own chain of blocks. Hence, the validation phase and the final ledger update of multiple blocks (one per channel) executed in parallel which increased CPU utilization that resulted in higher throughput. å¦‚å›¾ 8 æ‰€ç¤ºï¼Œéšç€é€šé“æ•°çš„å¢åŠ ï¼Œç³»ç»Ÿçš„ååé‡å¢åŠ ï¼Œæ—¶å»¶å‡å°ã€‚CPU ç­‰èµ„æºåˆ©ç”¨ç‡ä¹Ÿå¢åŠ äº†ã€‚ä¾‹å¦‚ï¼Œéšç€ä¿¡é“æ•°ç›®ä» 1 å¢åŠ åˆ° 16ï¼Œååé‡ä» 140 tps å¢åŠ åˆ° 832 tpsï¼ˆå³ï¼Œåœ¨éè¿‡è½½æƒ…å†µä¸‹å¢åŠ  6 å€ï¼‰æˆ–å¢åŠ åˆ° 1320 tpsï¼ˆå³ï¼Œåœ¨è¿‡è½½æƒ…å†µä¸‹å¢åŠ  9.5 å€ï¼‰ã€‚è¿™æ˜¯å› ä¸ºæ¯ä¸ªé€šé“éƒ½ç‹¬ç«‹äºå…¶ä»–é€šé“ï¼Œå¹¶ç»´æŠ¤è‡ªå·±çš„åŒºå—é“¾ã€‚å› æ­¤ï¼Œå¤šä¸ªå—ï¼ˆæ¯ä¸ªé€šé“ä¸€ä¸ªï¼‰çš„éªŒè¯é˜¶æ®µå’Œæœ€ç»ˆè´¦æœ¬çš„æ›´æ–°éƒ½æ˜¯å¹¶è¡Œæ‰§è¡Œï¼Œè¿™æé«˜äº† CPU åˆ©ç”¨ç‡ï¼Œä»è€Œæé«˜äº†ååé‡ã€‚ Figure 9(a) and (b) plot the throughput, endorsement &amp; commit latency for 4 and 16 channels, respectively, over a different number of allocated vCPUs but homogeneous peers. Figure 9(c) plots the absolute (instead of average) CPU utilization across all vCPUs. Table V presents a various number of vCPUs allocated, the number of channels and transaction arrival rate used. For other parameters, refer to Table I. å›¾9ï¼ˆaï¼‰å’Œï¼ˆbï¼‰åˆ†åˆ«ç»˜åˆ¶äº† 4 ä¸ªå’Œ 16 ä¸ªé€šé“åœ¨åŒæ„èŠ‚ç‚¹ä½†ä¸åŒæ•°é‡çš„ vcpu åˆ†é…ä¸Šçš„ååé‡ã€èƒŒä¹¦å’Œæäº¤å»¶è¿Ÿã€‚å›¾9ï¼ˆcï¼‰æç»˜äº†æ‰€æœ‰ vcpu çš„ç»å¯¹ï¼ˆè€Œä¸æ˜¯å¹³å‡ï¼‰CPU åˆ©ç”¨ç‡ã€‚è¡¨ V æ˜¾ç¤ºäº†åˆ†é…çš„å„ç§ VCPU æ•°ã€ä½¿ç”¨çš„é€šé“æ•°å’Œäº¤æ˜“åˆ°è¾¾ç‡ã€‚å…¶å®ƒå‚æ•°è§è¡¨ Iã€‚ Observation 8: At moderate loads, when the number of vCPUs allocated were lesser than the channel count, performance degraded. For e.g., When the number of vCPUs allocated were lesser than 16 for 16 channels, the throughput reduced significantly from 848 tps to 32 tps (by 26Ã—) â€“ refer to Figure 9(b). Further, both the average endorsement and commit latency exploded (from 37 ms to 21 s, and 640 ms to 49 s, respectively) due to a lot of contention on the CPU. Further, a significant number of requests got a timeout during the endorsement phase. Once a timeout occurs, we marked that transaction as failed. With an allocation of 2 vCPUs, a higher number of endorsement requests got a timeout as compared to 4 vCPUs. Thus, the endorsement and commit latency (of successful transactions) observed with 2 vCPUs were lesser than 4 vCPUs as shown in Figure 9(b). åœ¨ä¸­ç­‰è´Ÿè½½ä¸‹ï¼Œå½“åˆ†é…çš„ vCPU æ•°é‡å°‘äºé€šé“æ•°é‡æ—¶ï¼Œæ€§èƒ½ä¼šä¸‹é™ã€‚ ä¾‹å¦‚ï¼Œå½“åˆ†é…çš„ vCPU æ•°é‡å°‘äº 16 ä¸ªé€šé“çš„ 16 ä¸ªæ—¶ï¼Œååé‡ä» 848 tps æ˜¾ç€é™ä½åˆ° 32 tpsï¼ˆé™ä½äº†26å€ï¼‰â€“å‚è§å›¾9ï¼ˆbï¼‰ã€‚ æ­¤å¤–ï¼Œç”±äº CPU ä¸Šçš„å¤§é‡äº‰ç”¨ï¼ŒèƒŒä¹¦å’Œæäº¤çš„å¹³å‡å»¶æ—¶éƒ½çˆ†ç‚¸äº†ï¼ˆåˆ†åˆ«ä» 37 msåˆ° 21s å’Œ 640 ms åˆ° 49 sï¼‰ã€‚ æ­¤å¤–ï¼Œåœ¨èƒŒä¹¦é˜¶æ®µï¼Œå¤§é‡ç­¾åè¯·æ±‚è¶…æ—¶ã€‚ ä¸€æ—¦è¶…æ—¶ï¼Œæˆ‘ä»¬å°†è¯¥äº¤æ˜“æ ‡è®°ä¸ºå¤±è´¥ã€‚ ä¸ 4 ä¸ª vCPU ç›¸æ¯”ï¼Œåˆ†é… 2 ä¸ª vCPU ä¼šå¯¼è‡´æ›´å¤šçš„èƒŒä¹¦è¯·æ±‚è¶…æ—¶ã€‚ å› æ­¤ï¼Œå¦‚å›¾9ï¼ˆbï¼‰æ‰€ç¤ºï¼Œä½¿ç”¨ 2 ä¸ª vCPU è§‚å¯Ÿåˆ°çš„ï¼ˆæˆåŠŸäº¤æ˜“ï¼‰èƒŒä¹¦å’Œæäº¤ç­‰å¾…æ—¶é—´å°äº 4 ä¸ª vCPUã€‚ Due to the CPU contention, the VSCC latency also increased that affected the commit latency as shown in Figure 9(c). Increasing the vCPUs allocation increased CPU utilization and consequently performance up-to a peak where vCPUs matched the number of channels. Beyond this, additionally allocated vCPUs were idle due to the single-threaded sequential VSCC validation â€“ refer to Figure 9(c). ç”±äº CPU äº‰ç”¨ï¼ŒVSCC å»¶è¿Ÿä¹Ÿå¢åŠ äº†ï¼Œè¿™å½±å“äº†æäº¤å»¶è¿Ÿï¼Œå¦‚å›¾9ï¼ˆcï¼‰æ‰€ç¤ºã€‚ å¢åŠ  vCPU åˆ†é…å¢åŠ äº† CPU åˆ©ç”¨ç‡ï¼Œå› æ­¤æ€§èƒ½è¾¾åˆ°äº† vCPU ä¸é€šé“æ•°åŒ¹é…çš„å³°å€¼ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œç”±äºå•çº¿ç¨‹é¡ºåº VSCC éªŒè¯ï¼Œé¢å¤–åˆ†é…çš„ vCPU å¤„äºç©ºé—²çŠ¶æ€ â€“ å‚è§å›¾9ï¼ˆcï¼‰ã€‚ Figure 9(d) plot the throughput and latency for 16 channels in a heterogeneous setup. Table VI presents a various number of vCPUs allocated for different peers to enable heterogeneity, the number of channels, transaction complexity and transaction arrival rate used. For other parameters, refer to Table I. å›¾9ï¼ˆdï¼‰ç»˜åˆ¶äº†å¼‚æ„è®¾ç½®ä¸­ 16 ä¸ªé€šé“çš„ååé‡å’Œç­‰å¾…æ—¶é—´ã€‚ è¡¨ VI åˆ—å‡ºäº†åˆ†é…ç»™ä¸åŒèŠ‚ç‚¹çš„å„ç§ vCPUï¼Œä»¥å®ç°å¼‚æ„æ€§ã€é€šé“æ•°ã€äº¤æ˜“å¤æ‚æ€§å’Œæ‰€ä½¿ç”¨çš„äº¤æ˜“åˆ°è¾¾ç‡ã€‚ æœ‰å…³å…¶ä»–å‚æ•°ï¼Œè¯·å‚é˜…è¡¨ Iã€‚ Observation 9: At moderate loads, even when the number of vCPUs allocated for 2 peers out of 8 were lesser than the channel count, performance degraded. For e.g., when only 2 vCPUs were allocated for 2 peers (others with 32 vCPUs), the throughput reduced from 848 tps to 417 tps (by 2Ã—) for write-only transactions and to 307 tps (by 2.7Ã—) for readwrite transactions. The reasons for the reduction are twofold, endorsement requests timeout from less powerful peers and MVCC conflicts specifically for read/write transactions. Figure 10(a) plots the endorsement requests timeout, valid transactions and invalid transactions due to MVCC conflicts for readwrite transactions. With an increase in the number of less powerful peers, the endorsement requests timeout increased. Further, a higher proportion of total submitted transactions became invalid due to MVCC conflicts. The is because of the lower block commit rate at less powerful peers as compared to powerful peers. Due to the different block height at peers (refer to Figure 10(b)), there was a mismatch of keyâ€™s version in the read-set collected. As a result, MVCC conflicts occurred during the state validation which invalidated transactions. åœ¨ä¸­ç­‰è´Ÿè½½ä¸‹ï¼Œå³ä½¿ä¸º 8 ä¸ªä¸­çš„ 2 ä¸ªèŠ‚ç‚¹åˆ†é…çš„ vCPU æ•°é‡å°‘äºé€šé“æ•°ï¼Œæ€§èƒ½ä¹Ÿä¼šä¸‹é™ã€‚ä¾‹å¦‚ï¼Œå½“ä»…ä¸º 2 ä¸ªå¯¹ç­‰èŠ‚ç‚¹åˆ†é… 2 ä¸ª vCPU æ—¶ï¼ˆå…¶ä»–å…·æœ‰ 32 ä¸ªvCPUï¼‰ï¼Œä»…å†™äº¤æ˜“çš„ååé‡ä» 848 tps å‡å°‘åˆ° 417 tpsï¼ˆ2å€ï¼‰ï¼Œè€Œè¯»å†™æ“ä½œå‡å°‘åˆ°307 tpsï¼ˆ2.7å€ï¼‰ã€‚ å‡å°‘çš„åŸå› æœ‰ä¸¤ä¸ªï¼šæ”¯æŒèƒ½åŠ›è¾ƒå¼±çš„èŠ‚ç‚¹èƒŒä¹¦è¯·æ±‚è¶…æ—¶ï¼Œä»¥åŠä¸“é—¨é’ˆå¯¹è¯»/å†™äº¤æ˜“çš„ MVCC å‘ç”Ÿå†²çªã€‚ å›¾10ï¼ˆaï¼‰æç»˜äº†ç”±äºè¯»å†™äº¤æ˜“çš„ MVCC å†²çªè€Œå¯¼è‡´çš„èƒŒä¹¦è¯·æ±‚è¶…æ—¶ï¼Œæœ‰æ•ˆäº¤æ˜“å’Œæ— æ•ˆäº¤æ˜“ã€‚éšç€èƒ½åŠ›è¾ƒå¼±èŠ‚ç‚¹çš„æ•°é‡å¢åŠ ï¼ŒèƒŒä¹¦è¯·æ±‚è¶…æ—¶ä¹Ÿå¢åŠ äº†ã€‚ æ­¤å¤–ï¼Œç”±äº MVCC å†²çªï¼Œæäº¤çš„äº¤æ˜“ä¸­æœ‰è¾ƒé«˜æ¯”ä¾‹å˜å¾—æ— æ•ˆã€‚è¿™æ˜¯å› ä¸ºä¸åŠŸèƒ½å¼ºå¤§çš„èŠ‚ç‚¹ç›¸æ¯”ï¼ŒåŠŸèƒ½è¾ƒå¼±çš„å¯¹ç­‰èŠ‚ç‚¹çš„å—æäº¤ç‡è¾ƒä½ã€‚ç”±äºå¯¹ç­‰èŠ‚ç‚¹çš„å—é«˜åº¦ä¸åŒï¼ˆè¯·å‚è§å›¾10ï¼ˆbï¼‰ï¼‰ï¼Œå› æ­¤æ”¶é›†çš„è¯»å–é›†ä¸­çš„å¯†é’¥ç‰ˆæœ¬ä¸åŒ¹é…ã€‚ç»“æœï¼Œåœ¨çŠ¶æ€éªŒè¯æœŸé—´å‘ç”Ÿäº† MVCC å†²çªï¼Œä½¿äº¤æ˜“æ— æ•ˆã€‚ Though we have not studied the impact of network resources, we believe that the impact would be similar to that of CPU. This is because, with a low network bandwidth, the delay in both the block and transaction delivery would increase. Even with the heterogeneous network resources for peers, we expect the impact to be similar to the one we observed with CPU. å°½ç®¡æˆ‘ä»¬å°šæœªç ”ç©¶ç½‘ç»œèµ„æºçš„å½±å“ï¼Œä½†æˆ‘ä»¬è®¤ä¸ºå½±å“å°†ä¸ CPU ç›¸ä¼¼ã€‚ è¿™æ˜¯å› ä¸ºåœ¨ä½ç½‘ç»œå¸¦å®½çš„æƒ…å†µä¸‹ï¼Œå—å’Œäº¤æ˜“ä¼ é€’çš„å»¶è¿Ÿéƒ½ä¼šå¢åŠ ã€‚ å³ä½¿ä½¿ç”¨å¯¹ç­‰èŠ‚ç‚¹çš„å¼‚æ„ç½‘ç»œèµ„æºï¼Œæˆ‘ä»¬é¢„æœŸå…¶å½±å“ä¸æˆ‘ä»¬åœ¨ CPU ä¸Šè§‚å¯Ÿåˆ°çš„å½±å“ç›¸ä¼¼ã€‚ Guideline 4: To achieve higher throughput and lower latency, it is better to allocate at least one vCPU per channel. For optimal vCPU allocation, we need to determine the expected load at each channel and allocate adequate vCPUs accordingly. ä¸ºäº†è·å¾—æ›´é«˜çš„ååé‡å’Œæ›´ä½çš„å»¶è¿Ÿï¼Œæœ€å¥½ä¸ºæ¯ä¸ªé€šé“åˆ†é…è‡³å°‘ä¸€ä¸ª vCPUã€‚ ä¸ºäº†è·å¾—æœ€ä½³çš„ vCPU åˆ†é…ï¼Œæˆ‘ä»¬éœ€è¦ç¡®å®šæ¯ä¸ªé€šé“çš„é¢„æœŸè´Ÿè½½ï¼Œå¹¶ç›¸åº”åœ°åˆ†é…è¶³å¤Ÿçš„ vCPUã€‚ Guideline 5: To achieve higher throughput and lower latency, it is better to avoid heterogeneous peers as the performance would be dictated by less powerful peers. ä¸ºäº†è·å¾—æ›´é«˜çš„ååé‡å’Œæ›´ä½çš„å»¶è¿Ÿï¼Œæœ€å¥½é¿å…å¼‚æ„èŠ‚ç‚¹ï¼Œå› ä¸ºæ€§èƒ½å°†ç”±åŠŸèƒ½è¾ƒå¼±çš„èŠ‚ç‚¹å†³å®šã€‚ Action Item 3: Processing transactions within a channel and across channels can be improved to better utilize additional CPU power as shown in Â§VI-B. å¦‚ Â§VI-B æ‰€ç¤ºï¼Œå¯ä»¥æ”¹è¿›é€šé“å†…å’Œé€šé“é—´çš„äº¤æ˜“å¤„ç†ï¼Œä»¥æ›´å¥½åœ°åˆ©ç”¨é¢å¤–çš„ CPU åŠŸèƒ½ã€‚ D. Impact of Ledger Database Figure 11 plots the average throughput and latency over multiple transaction arrival rates for both GoLevelDB and CouchDB with different transaction complexities. Table VII presents various databases, transaction complexity and arrival rate used. For other parameters, refer to Table I. å›¾ 11 ç»˜åˆ¶äº†å…·æœ‰ä¸åŒäº¤æ˜“å¤æ‚æ€§çš„ GoLevelDB å’Œ CouchDB åœ¨å¤šä¸ªäº¤æ˜“åˆ°è¾¾ç‡ä¸Šçš„å¹³å‡ååé‡å’Œå»¶è¿Ÿã€‚ è¡¨ VII åˆ—å‡ºäº†ä½¿ç”¨çš„å„ç§æ•°æ®åº“ï¼Œäº¤æ˜“å¤æ‚æ€§å’Œåˆ°è¾¾ç‡ã€‚ æœ‰å…³å…¶ä»–å‚æ•°ï¼Œè¯·å‚é˜…è¡¨ Iã€‚ Observation 10: The Fabric transaction throughput with GoLevelDB as state database was 3*Ã— *greater than CouchDB. The maximum throughput achieved with GoLevelDB on a single channel was 140 tps (refer to Figure 4) while with CouchDB, it was only 50 tps (refer to Figure 11(b)). Further, with an increase in the transaction complexity, i.e., for multiple writes, the throughput with CouchDB dropped from 50 tps to 18 tps while no such impact with GoLevelDB (refer to Figure 11(a)). The reason for significant performance differences between CouchDB and GoLevelDB is that the latter is an embedded database to peer process while former is accessed using REST APIs over a secure HTTP. As a result, the endorsement latency, VSCC latency, MVCC latency and the ledger update latency was higher with CouchDB as compared to the GoLevelDB as shown in Figure 12(a) &amp; (b). With CouchDB, the VSCC latency increased compared to the GoLevelDB as the peer accessed state database using a REST API call for every transaction to retrieve the endorsement policy of the chaincode on which the transaction was simulated. Similarly, the MVCC latency also increased with CouchDB. ä½¿ç”¨ GoLevelDB ä½œä¸ºçŠ¶æ€æ•°æ®åº“çš„ Fabric äº¤æ˜“ååé‡æ¯” CouchDB é«˜ 3 å€ã€‚ä½¿ç”¨ GoLevelDB åœ¨å•ä¸ªé€šé“ä¸Šå®ç°çš„æœ€å¤§ååé‡ä¸º140 tpsï¼ˆè¯·å‚è§å›¾4ï¼‰ï¼Œè€Œå¯¹äºCouchDBï¼Œåˆ™ä»…ä¸º50 tpsï¼ˆè¯·å‚è§å›¾11ï¼ˆbï¼‰ï¼‰ã€‚ æ­¤å¤–ï¼Œéšç€äº¤æ˜“å¤æ‚åº¦çš„å¢åŠ ï¼Œå³å¯¹äºå¤šæ¬¡å†™å…¥ï¼ŒCouchDB çš„ååé‡ä» 50 tps ä¸‹é™åˆ° 18 tpsï¼Œè€Œ GoLevelDB åˆ™æ²¡æœ‰è¿™ç§å½±å“ï¼ˆè¯·å‚è§å›¾11ï¼ˆaï¼‰ï¼‰ã€‚ CouchDB å’Œ GoLevelDB ä¹‹é—´çš„æ˜¾ç€æ€§èƒ½å·®å¼‚çš„åŸå› æ˜¯ï¼Œåè€…æ˜¯èŠ‚ç‚¹è¿›ç¨‹çš„åµŒå…¥å¼æ•°æ®åº“ï¼Œè€Œå‰è€…æ˜¯é€šè¿‡ REST API é€šè¿‡å®‰å…¨ HTTP è®¿é—®çš„ã€‚ ç»“æœå¦‚å›¾12ï¼ˆaï¼‰å’Œï¼ˆbï¼‰æ‰€ç¤ºï¼Œä¸ GoLevelDB ç›¸æ¯”ï¼ŒCouchDB çš„èƒŒä¹¦ç­‰å¾…æ—¶é—´ï¼ŒVSCC ç­‰å¾…æ—¶é—´ï¼ŒMVCC ç­‰å¾…æ—¶é—´å’Œè´¦æœ¬æ›´æ–°ç­‰å¾…æ—¶é—´æ›´é«˜ã€‚ ä¸ GoLevelDB ç›¸æ¯”ï¼Œä½¿ç”¨ CouchDB æ—¶ï¼ŒVSCC å»¶è¿Ÿå¢åŠ äº†ï¼Œå› ä¸ºèŠ‚ç‚¹è®¿é—®çŠ¶æ€æ•°æ®åº“ä½¿ç”¨ REST API è°ƒç”¨æ¯ä¸ªäº¤æ˜“æ¥æ£€ç´¢åœ¨å…¶ä¸Šæ¨¡æ‹Ÿäº¤æ˜“çš„é“¾ç çš„èƒŒä¹¦ç­–ç•¥ã€‚ åŒæ ·ï¼ŒCouchDB ä¹Ÿå¢åŠ äº† MVCC å»¶è¿Ÿã€‚ Observation 11: With CouchDB, the endorsement latency and ledger update latency increased with an increase in the number of writes per transaction, i.e., from 40 ms and 240 ms with one write to 800 ms and 1200 ms with three writes, respectively, as shown in Figure 12(b) even though write-only transactions do not access the database during the endorsement phase. This is because the endorsement phase acquired a shared read lock on the whole database to provide a consistent view of data (i.e., repeatable read isolation level) to the chaincode. Similarly, the final ledger update phase acquired an exclusive write lock on the whole database. Hence, both the endorsement phase and final ledger update contended for this resource. Especially, the final ledger update with CouchDB was costlier as it had to perform the following three tasks for each key-value write in a transactionâ€™s write-set. å¦‚å›¾12ï¼ˆbï¼‰æ‰€ç¤ºï¼Œä½¿ç”¨ CouchDB æ—¶ï¼ŒèƒŒä¹¦ç­‰å¾…æ—¶é—´å’Œè´¦æœ¬æ›´æ–°ç­‰å¾…æ—¶é—´éšç€æ¯ç¬”äº¤æ˜“çš„å†™å…¥æ¬¡æ•°çš„å¢åŠ è€Œå¢åŠ ï¼Œå³ä»ä¸€æ¬¡å†™å…¥çš„ 40ms å’Œ 240ms å¢åŠ åˆ°ä¸‰æ¬¡å†™å…¥çš„ 800ms å’Œ 1200msï¼Œå³ä½¿åªå†™äº¤æ˜“åœ¨èƒŒä¹¦é˜¶æ®µä¹Ÿä¸è®¿é—®æ•°æ®åº“ã€‚ è¿™æ˜¯å› ä¸ºèƒŒä¹¦é˜¶æ®µè·å¾—äº†æ•´ä¸ªæ•°æ®åº“çš„å…±äº«è¯»å–é”å®šï¼Œä»¥ä¾¿ä¸ºé“¾ç æä¾›ä¸€è‡´çš„æ•°æ®è§†å›¾ï¼ˆå³å¯é‡å¤è¯»å–éš”ç¦»çº§åˆ«ï¼‰ã€‚ åŒæ ·ï¼Œæœ€åçš„è´¦æœ¬æ›´æ–°é˜¶æ®µåœ¨æ•´ä¸ªæ•°æ®åº“ä¸Šè·å¾—äº†æ’ä»–æ€§å†™é”å®šã€‚ å› æ­¤ï¼ŒèƒŒä¹¦é˜¶æ®µå’Œæœ€ç»ˆè´¦æœ¬æ›´æ–°éƒ½ä¸ºæ­¤èµ„æºç«äº‰ã€‚ ç‰¹åˆ«æ˜¯ï¼Œä½¿ç”¨ CouchDB è¿›è¡Œçš„æœ€ç»ˆè´¦æœ¬æ›´æ–°æˆæœ¬æ›´é«˜ï¼Œå› ä¸ºå®ƒå¿…é¡»ä¸ºäº¤æ˜“çš„å†™å…¥é›†ä¸­çš„æ¯ä¸ªé”®å€¼å†™å…¥æ‰§è¡Œä»¥ä¸‹ä¸‰ä¸ªä»»åŠ¡ã€‚ Retrieve the keyâ€™s previous revision number (used for concurrency control within CouchDB) by issuing a GET request, if it exists in the database. Construct a document for the value (could be a JSON document or binary attachment). Update the database by submitting a PUT request. å¦‚æœæ•°æ®åº“ä¸­å­˜åœ¨ GET è¯·æ±‚ï¼Œåˆ™é€šè¿‡å‘å‡º GET è¯·æ±‚æ¥æ£€ç´¢å¯†é’¥çš„å…ˆå‰ä¿®è®¢çš„ç‰ˆæœ¬å·ï¼ˆç”¨äº CouchDB ä¸­çš„å¹¶å‘æ§åˆ¶ï¼‰ã€‚ ä¸ºè¯¥å€¼æ„é€ ä¸€ä¸ªæ–‡æ¡£ï¼ˆå¯ä»¥æ˜¯ JSON æ–‡æ¡£æˆ–äºŒè¿›åˆ¶é™„ä»¶ï¼‰ã€‚ é€šè¿‡æäº¤ PUT è¯·æ±‚æ¥æ›´æ–°æ•°æ®åº“ã€‚ As a result, with the increase in the number of writes per transaction, the ledger update latency increased (refer to Figure 12(b)). Due to the above three time consuming serial operations, we surmise that the committer held the lock on the database for a longer duration which increased endorsement latency. To validate our hypothesis, we performed experiments by disabling the lock acquisition on the whole database during the endorsement phase and final ledger update. The side effect of such action was only providing non-repeatable read isolation level at that chaincode. As our transaction was only writing keys, such side effect did not affect the database consistency. Figure 12(d) shows the improvement in endorsement phase. The average endorsement latency reduced from 800 ms to 40 ms, validating our hypothesis. ç»“æœï¼Œéšç€æ¯ä¸ªäº¤æ˜“çš„å†™å…¥æ¬¡æ•°çš„å¢åŠ ï¼Œè´¦æœ¬æ›´æ–°ç­‰å¾…æ—¶é—´å¢åŠ äº†ï¼ˆè¯·å‚è§å›¾12ï¼ˆbï¼‰ï¼‰ã€‚ ç”±äºä¸Šè¿°ä¸‰ä¸ªè€—æ—¶çš„ä¸²è¡Œæ“ä½œï¼Œæˆ‘ä»¬æ¨æµ‹æäº¤è€…å°†é”é”å®šåœ¨æ•°æ®åº“ä¸Šçš„æ—¶é—´æ›´é•¿ï¼Œä»è€Œå¢åŠ äº†èƒŒä¹¦å»¶è¿Ÿã€‚ ä¸ºäº†éªŒè¯æˆ‘ä»¬çš„å‡è®¾ï¼Œæˆ‘ä»¬é€šè¿‡åœ¨èƒŒä¹¦é˜¶æ®µå’Œæœ€ç»ˆè´¦æœ¬æ›´æ–°æœŸé—´ç¦ç”¨æ•´ä¸ªæ•°æ®åº“çš„é”è·å–æ¥è¿›è¡Œå®éªŒã€‚ æ­¤ç±»æ“ä½œçš„å‰¯ä½œç”¨æ˜¯åœ¨è¯¥é“¾ç ä¸Šåªæä¾›äº†â€œä¸å¯é‡å¤çš„è¯»å–éš”ç¦»çº§åˆ«â€ã€‚ ç”±äºæˆ‘ä»¬çš„äº¤æ˜“åªæ˜¯å†™å¯†é’¥ï¼Œå› æ­¤è¿™ç§å‰¯ä½œç”¨ä¸ä¼šå½±å“æ•°æ®åº“çš„ä¸€è‡´æ€§ã€‚ å›¾12ï¼ˆdï¼‰æ˜¾ç¤ºäº†èƒŒä¹¦é˜¶æ®µçš„æ”¹è¿›ã€‚ å¹³å‡èƒŒä¹¦ç­‰å¾…æ—¶é—´ä» 800ms å‡å°‘åˆ° 40msï¼ŒéªŒè¯äº†æˆ‘ä»¬çš„å‡è®¾ã€‚ Observation 12: Only with an increase in the number of reads per transaction, the MVCC latency increased as shown in Figure 12(c). This is because with an increase in the number of items in the read set, the number of GET REST API calls to CouchDB increased during MVCC validation phase. With an increase in the number of writes, MVCC latency did not increase as shown in Figure 12(b) because it only checks whether any read keys has been modified. å¦‚å›¾12ï¼ˆcï¼‰æ‰€ç¤ºï¼Œä»…éšç€æ¯ä¸ªäº¤æ˜“è¯»å–æ¬¡æ•°çš„å¢åŠ ï¼ŒMVCC å»¶è¿Ÿæ‰å¢åŠ ã€‚ è¿™æ˜¯å› ä¸ºéšç€è¯»å–é›†ä¸­é¡¹ç›®çš„æ•°é‡å¢åŠ ï¼Œåœ¨ MVCC éªŒè¯é˜¶æ®µï¼Œå¯¹ CouchDB çš„ GET REST API è°ƒç”¨æ•°é‡ä¹Ÿå¢åŠ äº†ã€‚ éšç€å†™å…¥æ¬¡æ•°çš„å¢åŠ ï¼ŒMVCC å»¶è¿Ÿå¹¶æ²¡æœ‰å¢åŠ ï¼Œå¦‚å›¾ 12ï¼ˆbï¼‰æ‰€ç¤ºï¼Œå› ä¸ºå®ƒä»…æ£€æŸ¥æ˜¯å¦å·²ä¿®æ”¹ä»»ä½•è¯»å–å¯†é’¥ã€‚ Guideline 6: GoLevelDB is a better performant option for state database. CouchDB is a better choice if rich-query support for read-only transactions is important. When using CouchDB, design the application and transaction to read/write a fewer number of keys to accomplish a task. å¯¹äºçŠ¶æ€æ•°æ®åº“ï¼ŒGoLevelDB æ˜¯æ€§èƒ½æ›´å¥½çš„é€‰é¡¹ã€‚ å¦‚æœå¯¹åªè¯»äº¤æ˜“çš„å¯ŒæŸ¥è¯¢æ”¯æŒå¾ˆé‡è¦ï¼Œåˆ™ CouchDB æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚ ä½¿ç”¨ CouchDB æ—¶ï¼Œè®¾è®¡åº”ç”¨ç¨‹åºå’Œäº¤æ˜“ä»¥è¯»å–/å†™å…¥è¾ƒå°‘æ•°é‡çš„é”®å³å¯å®Œæˆä»»åŠ¡ã€‚ Action Item 4: CouchDB supports bulk read/write operations without additional transactional semantics. Using the bulk operations will reduce the lock holding duration and improve the performance as demonstrated in Â§VI-C. CouchDBæ”¯æŒæ‰¹é‡è¯»/å†™æ“ä½œï¼Œè€Œæ— éœ€å…¶ä»–äº¤æ˜“è¯­ä¹‰ã€‚ å¦‚ Â§VI-C æ‰€ç¤ºï¼Œä½¿ç”¨æ‰¹é‡æ“ä½œå°†å‡å°‘é”ä¿æŒæ—¶é—´å¹¶æé«˜æ€§èƒ½ã€‚ Action Item 5: The usage of database such as GoLevelDB and CouchDB, without the snapshot isolation level, results in whole database lock during the endorsement and the ledger update phase. Hence, our future work is to look at ways to remove the lock and/or use a database such as PostgreSQL that supports snapshot isolation. åœ¨æ²¡æœ‰å¿«ç…§éš”ç¦»çº§åˆ«çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨æ•°æ®åº“ï¼ˆä¾‹å¦‚GoLevelDBå’ŒCouchDBï¼‰ä¼šåœ¨èƒŒä¹¦å’Œè´¦æœ¬æ›´æ–°é˜¶æ®µå¯¼è‡´æ•´ä¸ªæ•°æ®åº“é”å®šã€‚ å› æ­¤ï¼Œæˆ‘ä»¬çš„æœªæ¥å·¥ä½œæ˜¯ç ”ç©¶åˆ é™¤é”å’Œ/æˆ–ä½¿ç”¨æ”¯æŒå¿«ç…§éš”ç¦»çš„æ•°æ®åº“ï¼ˆä¾‹å¦‚ PostgreSQLï¼‰çš„æ–¹æ³•ã€‚ E. Scalability and Fault Tolerant In Fabric, scalability can be measured in terms of the number of channels, number of organizations joining a channel and the number of peers per organization. From a resource consumption perspective, the endorsement policy complexity controls the scalability of network. Even with a large number of organizations or peers, if the endorsement policy requires only a few organizations signature, then the performance would be the unaffected. This is because, the transaction needs to be simulated at a fewer node in the network to collect endorsement. Scalability could also be defined in terms of number of geographically distributed nodes and latency in block dissemination among them. Number of ordering service nodes and choice of consensus protocol used among them would also affect scalability. Though these are out of scope of this study, are important aspects of network scalability. åœ¨ Fabric ä¸­ï¼Œå¯æ‰©å±•æ€§å¯ä»¥æ ¹æ®é€šé“æ•°é‡ï¼ŒåŠ å…¥é€šé“çš„ç»„ç»‡æ•°é‡ä»¥åŠæ¯ä¸ªç»„ç»‡çš„å¯¹ç­‰èŠ‚ç‚¹æ¥è¡¡é‡ã€‚ ä»èµ„æºæ¶ˆè€—çš„è§’åº¦æ¥çœ‹ï¼ŒèƒŒä¹¦ç­–ç•¥çš„å¤æ‚æ€§æ§åˆ¶ç€ç½‘ç»œçš„å¯æ‰©å±•æ€§ã€‚ å³ä½¿æœ‰å¤§é‡ç»„ç»‡æˆ–èŠ‚ç‚¹ï¼Œå¦‚æœèƒŒä¹¦ç­–ç•¥ä»…éœ€è¦å‡ ä¸ªç»„ç»‡ç­¾åï¼Œé‚£ä¹ˆæ€§èƒ½å°†ä¸ä¼šå—åˆ°å½±å“ã€‚ è¿™æ˜¯å› ä¸ºï¼Œéœ€è¦åœ¨ç½‘ç»œä¸­è¾ƒå°‘çš„èŠ‚ç‚¹ä¸Šæ¨¡æ‹Ÿäº¤æ˜“æ¥æ”¶é›†èƒŒä¹¦ã€‚ è¿˜å¯ä»¥æ ¹æ®åœ°ç†ä¸Šåˆ†æ•£çš„èŠ‚ç‚¹çš„æ•°é‡å’Œå®ƒä»¬ä¹‹é—´çš„å—åˆ†å‘ä¸­çš„ç­‰å¾…æ—¶é—´æ¥å®šä¹‰å¯æ‰©å±•æ€§ã€‚ æ’åºæœåŠ¡èŠ‚ç‚¹çš„æ•°é‡ä»¥åŠåœ¨å…¶ä¸­ä½¿ç”¨çš„å…±è¯†åè®®çš„é€‰æ‹©ä¹Ÿä¼šå½±å“å¯æ‰©å±•æ€§ã€‚ å°½ç®¡è¿™äº›è¶…å‡ºäº†æœ¬ç ”ç©¶çš„èŒƒå›´ï¼Œä½†å®ƒä»¬æ˜¯ç½‘ç»œå¯æ‰©å±•æ€§çš„é‡è¦æ–¹é¢ã€‚ Node failures are common in a distributed system and hence, it is important to study the fault tolerant capability of Fabric. In our initial and early study, we observed that node failures do not affect the performance (during non-overloaded case) as client can collect endorsement from other available nodes. With higher loads, node rejoining after a failure and syncing up the ledger due to missing blocks was observed to have large delays. This is because though the block processing rate at the rejoined node was at the peak, other nodes continues to add new blocks at the same peak processing rate. èŠ‚ç‚¹æ•…éšœåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¾ˆå¸¸è§ï¼Œå› æ­¤ï¼Œç ”ç©¶ Fabric çš„å®¹é”™èƒ½åŠ›å¾ˆé‡è¦ã€‚ åœ¨æˆ‘ä»¬çš„åˆæœŸå’Œæ—©æœŸç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°èŠ‚ç‚¹æ•…éšœä¸ä¼šå½±å“æ€§èƒ½ï¼ˆåœ¨éè¿‡è½½æƒ…å†µä¸‹ï¼‰ï¼Œå› ä¸ºå®¢æˆ·ç«¯å¯ä»¥ä»å…¶ä»–å¯ç”¨èŠ‚ç‚¹æ”¶é›†è®¤å¯ã€‚ å¯¹äºæ›´é«˜çš„è´Ÿè½½ï¼Œè§‚å¯Ÿåˆ°èŠ‚ç‚¹åœ¨æ•…éšœåé‡æ–°åŠ å…¥å¹¶ç”±äºç¼ºå°‘å—è€ŒåŒæ­¥äº†è´¦æœ¬ï¼Œè¿™ä¼šäº§ç”Ÿè¾ƒå¤§çš„å»¶è¿Ÿã€‚ è¿™æ˜¯å› ä¸ºå°½ç®¡é‡æ–°åŠ å…¥çš„èŠ‚ç‚¹å¤„çš„å—å¤„ç†é€Ÿç‡å¤„äºå³°å€¼ï¼Œä½†å…¶ä»–èŠ‚ç‚¹ä»ç»§ç»­ä»¥ç›¸åŒçš„å³°å€¼å¤„ç†é€Ÿç‡æ·»åŠ æ–°å—ã€‚ VI. OPTIMIZATIONS STUDIED In this section, we introduce three simple optimizations based on action items listed in Â§V â€“ (1) MSP cache in Â§VI-A, (2) parallel VSCC validation of a block in Â§VI-B, and (3) bulk read/write during MVCC validation &amp; commit for CouchDB in Â§VI-C. For each of these optimizations, first, we study the performance improvement individually. Then, we study the improvement by combining all the three optimizations. åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†åŸºäº Â§V ä¸­åˆ—å‡ºçš„æ“ä½œé¡¹ç›®ä»‹ç»ä¸‰ç§ç®€å•çš„ä¼˜åŒ–æ–¹æ³•-ï¼ˆ1ï¼‰Â§VI-A ä¸­çš„ MSP ç¼“å­˜ï¼Œï¼ˆ2ï¼‰Â§VI-B ä¸­çš„å—çš„å¹¶è¡Œ VSCC éªŒè¯ï¼Œä»¥åŠï¼ˆ3ï¼‰Â§VI-C ä¸­çš„åœ¨ MVCC éªŒè¯å’Œæäº¤æœŸé—´å¯¹ CouchDB æ‰¹é‡è¯»/å†™ã€‚ å¯¹äºè¿™äº›ä¼˜åŒ–ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬åˆ†åˆ«ç ”ç©¶æ€§èƒ½æ”¹è¿›ã€‚ ç„¶åæˆ‘ä»¬é€šè¿‡ç»“åˆä¸‰ä¸ªä¼˜åŒ–æ¥ç ”ç©¶æ”¹è¿›ã€‚ A. MSP Cache As crypto operations are very CPU intensive, in this section, we studied the efficiency of using a cache at the following two operations in the crypto module: Deserialization of identity (i.e., x.509 certificate). Validation of identity with Organizationâ€™s MSP. ç”±äºåŠ å¯†æ“ä½œéå¸¸å ç”¨CPUï¼Œå› æ­¤åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ç ”ç©¶äº†åœ¨åŠ å¯†æ¨¡å—ä¸­çš„ä»¥ä¸‹ä¸¤ä¸ªæ“ä½œä¸­ä½¿ç”¨ç¼“å­˜çš„æ•ˆç‡ï¼š èº«ä»½ååºåˆ—åŒ–ï¼ˆå³ x.509 è¯ä¹¦ï¼‰ã€‚ ä½¿ç”¨ç»„ç»‡çš„ MSP éªŒè¯èº«ä»½ã€‚ To avoid deserialization of the serialized identity every time, we cached the deserialized identity using a hash map with the serialized form as key. Similarly, to avoid validating an identity with multiple MSPs every time, we used a hash map with a key as identity and value as the corresponding MSP to which the identity belongs. Further, we employed the ARC algorithm for cache replacement. During identity revocations, we invalidated cache entries appropriately. ä¸ºäº†é¿å…æ¯æ¬¡éƒ½å¯¹åºåˆ—åŒ–æ ‡è¯†è¿›è¡Œååºåˆ—åŒ–ï¼Œæˆ‘ä»¬ä½¿ç”¨ä»¥åºåˆ—åŒ–å½¢å¼ä½œä¸ºé”®çš„å“ˆå¸Œæ˜ å°„å¯¹ååºåˆ—åŒ–çš„æ ‡è¯†è¿›è¡Œç¼“å­˜ã€‚ åŒæ ·ï¼Œä¸ºé¿å…æ¯æ¬¡éƒ½ä½¿ç”¨å¤šä¸ª MSP éªŒè¯èº«ä»½ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå“ˆå¸Œå›¾ï¼Œå…¶ä¸­é”®ä¸ºèº«ä»½ï¼Œå€¼ä¸ºèº«ä»½æ‰€å±çš„ç›¸åº”MSPã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬é‡‡ç”¨äº† ARC ç®—æ³•æ¥æ›¿æ¢ç¼“å­˜ã€‚ åœ¨èº«ä»½åŠé”€æœŸé—´ï¼Œæˆ‘ä»¬é€‚å½“åœ°ä½¿ç¼“å­˜æ¡ç›®æ— æ•ˆã€‚ Figure 13 plots the impact of MSP cache on the throughput and latency for AND/OR endorsement policies over different transaction arrival rates. Table III presents various policies used along with different transaction arrival rates. We draw the attention of the reader to Figure 6(b) for comparison against the no-cache behavior. On average, the throughput increased by 3Ã— due to MSP cache as compared to a vanilla peer. For e.g., when the endorsement policy required signature from two endorsers (defined using AND/OR syntax), the maximum throughput achieved without MSP cache was 160 tps while with cache, it increased to 540 tps. This is because the MSP cache reduced certain repetitive CPU intensive operations. å›¾ 13 ç»˜åˆ¶äº† MSP ç¼“å­˜å¯¹ä¸åŒäº¤æ˜“åˆ°è¾¾ç‡ä¸‹ AND / OR èƒŒä¹¦ç­–ç•¥çš„ååé‡å’Œå»¶è¿Ÿçš„å½±å“ã€‚ è¡¨ III åˆ—å‡ºäº†ä½¿ç”¨çš„å„ç§ç­–ç•¥ä»¥åŠä¸åŒçš„äº¤æ˜“åˆ°è¾¾ç‡ã€‚ æˆ‘ä»¬æè¯·è¯»è€…æ³¨æ„å›¾6ï¼ˆbï¼‰ï¼Œä»¥ä¸æ— ç¼“å­˜è¡Œä¸ºè¿›è¡Œæ¯”è¾ƒã€‚ å¹³å‡è€Œè¨€ï¼Œä¸æ™®é€šèŠ‚ç‚¹ç›¸æ¯”ï¼Œç”±äº MSP ç¼“å­˜ï¼Œååé‡å¢åŠ äº† 3 å€ã€‚ ä¾‹å¦‚ï¼Œå½“èƒŒä¹¦ç­–ç•¥éœ€è¦ä¸¤ä¸ªèƒŒä¹¦èŠ‚ç‚¹çš„ç­¾åï¼ˆä½¿ç”¨ AND / OR è¯­æ³•å®šä¹‰ï¼‰æ—¶ï¼Œä¸ä½¿ç”¨ MSP ç¼“å­˜æ—¶å®ç°çš„æœ€å¤§ååé‡ä¸º 160 tpsï¼Œè€Œä½¿ç”¨ç¼“å­˜æ—¶åˆ™è¾¾åˆ° 540 tpsã€‚ è¿™æ˜¯å› ä¸º MSP ç¼“å­˜å‡å°‘äº†æŸäº›é‡å¤çš„ CPU å¯†é›†å‹æ“ä½œã€‚ Figure 14 and 15 plots the flame graph showing frequency of crypto operations and call stack depth of VSCC validation phase in a vanilla peer and a peer with MSP cache, respectively. As it can be observed, the number of crypto operations and call stack depth reduced significantly with the MSP cache. å›¾ 14 å’Œ 15 ç»˜åˆ¶äº†ç«ç„°å›¾ï¼Œåˆ†åˆ«æ˜¾ç¤ºäº†åŸå§‹å¯¹ç­‰èŠ‚ç‚¹å’Œå…·æœ‰ MSP ç¼“å­˜çš„å¯¹ç­‰èŠ‚ç‚¹ä¸­çš„åŠ å¯†æ“ä½œé¢‘ç‡å’Œ VSCC éªŒè¯é˜¶æ®µçš„è°ƒç”¨å †æ ˆæ·±åº¦ã€‚ å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨ MSP ç¼“å­˜ï¼ŒåŠ å¯†æ“ä½œçš„æ•°é‡å’Œè°ƒç”¨å †æ ˆçš„æ·±åº¦å¤§å¤§å‡å°‘äº†ã€‚ B. Parallel VSCC Validation of a Block The VSCC validation phase validates each transaction in a block serially against the endorsement policy. As this approach under-utilized the resources, we studied the efficiency of parallel validation, i.e., validate multiple transactionsâ€™ endorsement in parallel to utilize otherwise idle CPU and improve the overall performance. To achieve this, we created a configurable number of worker threads per channel on peer startup. Each worker thread validates one transactionâ€™s endorsement signature set against its endorsement policy. VSCC éªŒè¯é˜¶æ®µæ ¹æ®èƒŒä¹¦ç­–ç•¥ä¾æ¬¡éªŒè¯æ¯ä¸ªäº¤æ˜“ã€‚ ç”±äºè¿™ç§æ–¹æ³•æœªå……åˆ†åˆ©ç”¨èµ„æºï¼Œå› æ­¤æˆ‘ä»¬ç ”ç©¶äº†å¹¶è¡ŒéªŒè¯çš„æ•ˆç‡ï¼Œå³å¹¶è¡ŒéªŒè¯å¤šä¸ªäº¤æ˜“çš„èƒŒä¹¦ï¼Œä»¥åˆ©ç”¨ç©ºé—²çš„ CPU å¹¶æé«˜æ•´ä½“æ€§èƒ½ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬åœ¨å¯¹ç­‰èŠ‚ç‚¹å¯åŠ¨æ—¶ä¸ºæ¯ä¸ªé€šé“åˆ›å»ºäº†å¯é…ç½®æ•°é‡çš„å·¥ä½œçº¿ç¨‹ã€‚ æ¯ä¸ªå·¥ä½œçº¿ç¨‹éƒ½ä¼šæ ¹æ®å…¶èƒŒä¹¦ç­–ç•¥éªŒè¯ä¸€ä¸ªäº¤æ˜“çš„èƒŒä¹¦ç­¾åé›†ã€‚ Figure 16 plots the impact of parallel VSCC on the performance and resource utilization. We categorize the arrival rate for different channel count into two categories; non-overloaded case when the latency falls in [0.1-1s] and overloaded when the latency falls in [30-40s]. For each channel, we allocated worker threads equal to the block size. The throughput and resource utilization during the non-overloaded case for one channel exploded from 130 tps to 800 tps (improved by 6.3Ã—) for the block size of 30 and to 980 tps (7.5Ã—) for the block size of 300. This is due to parallel validation and hence the reduction in the VSCC latency (from 300 ms to 30 ms, i.e., by 10Ã— reduction for the block size of 30). The throughput saturated at 950 tps (for the block size of 30) &amp; 1075 tps (for the block size of 300) â€“ refer to Figure 16(a). å›¾ 16 ç»˜åˆ¶äº†å¹¶è¡Œ VSCC å¯¹æ€§èƒ½å’Œèµ„æºåˆ©ç”¨ç‡çš„å½±å“ã€‚ æˆ‘ä»¬å°†ä¸åŒé€šé“æ•°çš„åˆ°è¾¾ç‡åˆ†ä¸ºä¸¤ç±»ï¼š å»¶è¿Ÿå°äº[0.1-1s]æ—¶å¤„äºéè¿‡è½½æƒ…å†µï¼Œè€Œå»¶è¿Ÿå°äº[30-40s]æ—¶å¤„äºè¿‡è½½çŠ¶æ€ã€‚ å¯¹äºæ¯ä¸ªé€šé“ï¼Œæˆ‘ä»¬åˆ†é…çš„å·¥ä½œçº¿ç¨‹ç­‰äºå—å¤§å°ã€‚ ä¸€ä¸ªé€šé“åœ¨éè¿‡è½½æƒ…å†µä¸‹çš„ååé‡å’Œèµ„æºåˆ©ç”¨ç‡ä»å—å¤§å°ä¸º 30 çš„ 130 tps æ¿€å¢è‡³ 800 tpsï¼ˆæé«˜äº†6.3å€ï¼‰ï¼Œå—å¤§å°ä¸º 300 çš„ååé‡å’Œèµ„æºåˆ©ç”¨ç‡æ¿€å¢è‡³ 980 tpsï¼ˆ7.5å€ï¼‰ã€‚ ç”±äºå¹¶è¡ŒéªŒè¯ï¼Œå› æ­¤å‡å°‘äº† VSCC å»¶è¿Ÿï¼ˆä» 300 æ¯«ç§’å‡å°‘åˆ° 30 æ¯«ç§’ï¼Œå³å¯¹äº 30 çš„å—å¤§å°å‡å°‘äº† 10 å€ï¼‰ã€‚ ååé‡è¾¾åˆ° 950 tpsï¼ˆå¯¹äº 30 å—çš„å—ï¼‰å’Œ 1075 tpsï¼ˆå¯¹äº 300å—ï¼‰è¾¾åˆ°é¥±å’Œâ€“è¯·å‚è§å›¾16ï¼ˆaï¼‰ã€‚ Similarly, the throughput and resource utilization during the overloaded case increased to 1.5Ã— for 16 channels to as much as 10Ã— for 1 channel â€“ refer to Figure 16(b). This shows that parallel VSCC validation of a block significantly increases the performance of a single channel. With an increase in the number of channels, the percentage of improvement decreased. This is because multiple channels by default result in the parallel validation of blocks (instead of transactions) and hence a few number of free vCPUs were available for parallel VSCC. åŒæ ·ï¼Œè¿‡è½½æƒ…å†µä¸‹ 16 é€šé“çš„ååé‡å’Œèµ„æºåˆ©ç”¨ç‡å¢åŠ  1.5 å€ï¼Œ 1 é€šé“å¢åŠ  10 å€â€“å‚è§å›¾16ï¼ˆbï¼‰ã€‚ è¿™è¡¨æ˜å—çš„å¹¶è¡Œ VSCC éªŒè¯æ˜¾ç€æé«˜äº†å•ä¸ªé€šé“çš„æ€§èƒ½ã€‚ éšç€é€šé“æ•°é‡çš„å¢åŠ ï¼Œæ”¹å–„çš„ç™¾åˆ†æ¯”é™ä½äº†ã€‚ è¿™æ˜¯å› ä¸ºé»˜è®¤æƒ…å†µä¸‹ï¼Œå¤šä¸ªé€šé“ä¼šå¯¼è‡´å—çš„å¹¶è¡ŒéªŒè¯ï¼ˆè€Œä¸æ˜¯äº¤æ˜“ï¼‰ï¼Œå› æ­¤ï¼Œæœ‰å‡ ä¸ªå¯ç”¨çš„ vCPU å¯ç”¨äºå¹¶è¡Œ VSCCã€‚ C. Bulk Read/Write During MVCC Validation &amp; Commit During the MVCC validation, with CouchDB as the state database, for each transaction in a block, for each key in the read set of the transaction, a GET REST API call to the database over a secure HTTPS retrieved the last committed version number. During the commit phase, for each valid transaction (recorded after MVCC validation) in a block, for each key in the write set of the transaction, a GET REST API call retrieved the revision numbers. Finally, for each entry in the write set, a PUT REST API call committed the document. Due to these multiple REST API calls, performance degraded significantly as demonstrated in Â§V-D. åœ¨ MVCC éªŒè¯æœŸé—´ï¼Œä»¥ CouchDB ä½œä¸ºçŠ¶æ€æ•°æ®åº“ï¼Œå¯¹äºå—ä¸­çš„æ¯ä¸ªäº¤æ˜“ï¼Œå¯¹äºäº¤æ˜“çš„è¯»å–é›†ä¸­çš„æ¯ä¸ªé”®ï¼Œé€šè¿‡å®‰å…¨ HTTPS å¯¹è¯¥æ•°æ®åº“çš„ GET REST API è°ƒç”¨éƒ½æ£€ç´¢åˆ°æœ€åæäº¤çš„ç‰ˆæœ¬å·ã€‚ åœ¨æäº¤é˜¶æ®µï¼Œå¯¹äºå—ä¸­çš„æ¯ä¸ªæœ‰æ•ˆäº¤æ˜“ï¼ˆåœ¨ MVCC éªŒè¯åè®°å½•ï¼‰ï¼Œå¯¹äºäº¤æ˜“çš„å†™é›†ä¸­çš„æ¯ä¸ªé”®ï¼ŒGET REST API è°ƒç”¨éƒ½ä¼šæ£€ç´¢ä¿®è®¢å·ã€‚ æœ€åï¼Œå¯¹äºå†™é›†ä¸­çš„æ¯ä¸ªæ¡ç›®ï¼Œéƒ½ä¼šé€šè¿‡ PUT REST API è°ƒç”¨æäº¤æ–‡æ¡£ã€‚ ç”±äºæœ‰å¤šä¸ª REST API è°ƒç”¨ï¼Œå› æ­¤æ€§èƒ½å¤§å¤§é™ä½ï¼Œå¦‚Â§V-Dæ‰€ç¤ºã€‚ To cut down the number of REST API calls, CouchDB suggests using bulk operations. Hence, we used the existing BatchRetrieval API in Fabric to batch load multiple keysâ€™ version and revision number into the cache over a single GET REST API call per block. To enhance the ledger update process, we used BatchUpdate API in Fabric to commit a batch of documents using a single PUT REST API call per block. Further, we introduced a cache in VSCC to reduce the calls to CouchDB to obtain the endorsement policy of the chaincode for each transaction. In this section, we show the efficiency of these enhancements on the overall performance. ä¸ºäº†å‡å°‘ REST API è°ƒç”¨çš„æ•°é‡ï¼ŒCouchDB å»ºè®®ä½¿ç”¨æ‰¹é‡æ“ä½œã€‚ å› æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨ Fabric ä¸­ç°æœ‰çš„ BatchRetrieval API é€šè¿‡æ¯ä¸ªå—ä¸€æ¬¡ GET REST API è°ƒç”¨å°†å¤šä¸ªå¯†é’¥çš„ç‰ˆæœ¬å’Œä¿®è®¢å·æ‰¹é‡åŠ è½½åˆ°ç¼“å­˜ä¸­ã€‚ ä¸ºäº†å¢å¼ºè´¦æœ¬æ›´æ–°è¿‡ç¨‹ï¼Œæˆ‘ä»¬åœ¨ Fabric ä¸­ä½¿ç”¨ BatchUpdate API é€šè¿‡æ¯ä¸ªå—ä¸€ä¸ª PUT REST API è°ƒç”¨æ¥æäº¤ä¸€æ‰¹æ–‡æ¡£ã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬åœ¨ VSCC ä¸­å¼•å…¥äº†ç¼“å­˜ï¼Œä»¥å‡å°‘å¯¹ CouchDB çš„è°ƒç”¨ï¼Œä»¥è·å–æ¯ä¸ªäº¤æ˜“çš„é“¾ç çš„èƒŒä¹¦ç­–ç•¥ã€‚ åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å±•ç¤ºè¿™äº›å¢å¼ºåŠŸèƒ½å¯¹æ•´ä½“æ€§èƒ½çš„æ•ˆç‡ã€‚ Figure 17 plots the throughput and latency when running a CouchDB as the state database with the bulk read/write optimization. For comparison against the non-bulk read/write, refer to Figure 11(b) and Figure 12. The performance increased significantly from 50 tps to 115 tps (i.e., by 2.3Ã—) for transactions with a single write. For multiple writes (3-w &amp; 5-w), the throughput increased from 26 tps to 100 tps (i.e., 3.8Ã— for 3-w), and 18 tps to 90 tps (i.e., 5Ã— for 5-w). We noticed similar improvements for read-write transactions. å›¾ 17 ç»˜åˆ¶äº†è¿è¡Œ CouchDB ä½œä¸ºçŠ¶æ€æ•°æ®åº“æ—¶æ‰¹é‡è¯»/å†™ä¼˜åŒ–çš„ååé‡å’Œå»¶è¿Ÿã€‚ ä¸ºäº†ä¸éæ‰¹é‡è¯»å–/å†™å…¥è¿›è¡Œæ¯”è¾ƒï¼Œè¯·å‚è€ƒå›¾11ï¼ˆbï¼‰å’Œå›¾12ã€‚å¯¹äºä¸€æ¬¡å†™å…¥çš„äº¤æ˜“ï¼Œæ€§èƒ½ä» 50 tps æ˜¾ç€æé«˜åˆ° 115 tpsï¼ˆå³ï¼Œæé«˜äº† 2.3 å€ï¼‰ã€‚ å¯¹äºå¤šæ¬¡å†™å…¥ï¼ˆ 3-w å’Œ 5-wï¼‰ï¼Œååé‡ä» 26 tps å¢åŠ åˆ° 100 tpsï¼ˆå³ 3-wä¸º3-xï¼‰ï¼Œä» 18 tps å¢åŠ åˆ° 90 tpsï¼ˆå³ 5-w ä¸º 5 å€ï¼‰ã€‚ æˆ‘ä»¬æ³¨æ„åˆ°è¯»å†™äº¤æ˜“ä¹Ÿæœ‰ç±»ä¼¼çš„æ”¹è¿›ã€‚ Due to the bulk read/write optimization, the MVCC latency, ledger update latency and endorsement latency decreased as shown in Figure 17(c) and (d) as compared to Figure 12. The reduction in endorsement latency (by at least 3Ã—) was because of the reduction in lock holding duration by the commit phase (by at least 8Ã—). The MVCC latency for read-write transactions reduced (by at least 6Ã—) due to a bulk reading of all keys in the read set of all transactions in a block. Note that the MVCC latency increased with the increase in the number of keys read in a bulk read. The ledger update latency of a block encompassing a higher number of writeonly transactions was higher. This is because, in read-write transactions, the MVCC validation phase itself loaded the required revision numbers into the cache (as the transaction read those keys before modification) which was not the case with write-only transactions. ç”±äºæ‰¹é‡è¯»/å†™ä¼˜åŒ–ï¼Œå›¾17ï¼ˆcï¼‰å’Œï¼ˆdï¼‰ä¸å›¾ 12 ç›¸æ¯”ï¼ŒMVCC å»¶è¿Ÿã€è´¦æœ¬æ›´æ–°å»¶è¿Ÿå’ŒèƒŒä¹¦å»¶è¿Ÿå‡å°‘ã€‚èƒŒä¹¦å»¶è¿Ÿå‡å°‘äº†ï¼ˆè‡³å°‘3å€ï¼‰ è¿™æ˜¯å› ä¸ºæäº¤é˜¶æ®µçš„é”ä¿æŒæ—¶é—´å‡å°‘äº†ï¼ˆè‡³å°‘å‡å°‘äº†8å€ï¼‰ã€‚ ç”±äºå—ä¸­æ‰€æœ‰äº¤æ˜“çš„è¯»å–é›†ä¸­çš„æ‰€æœ‰å¯†é’¥éƒ½æ˜¯æ‰¹é‡è¯»å–ï¼Œå› æ­¤è¯»å†™äº¤æ˜“çš„ MVCC å»¶è¿Ÿå‡å°‘äº†ï¼ˆè‡³å°‘6å€ï¼‰ã€‚ æ³¨æ„ï¼ŒMVCC å»¶è¿Ÿéšç€æ‰¹é‡è¯»å–ä¸­è¯»å–çš„é”®æ•°çš„å¢åŠ è€Œå¢åŠ ã€‚ åŒ…å«æ›´å¤šåªå†™äº¤æ˜“çš„å—çš„è´¦æœ¬æ›´æ–°ç­‰å¾…æ—¶é—´æ›´é•¿ã€‚ è¿™æ˜¯å› ä¸ºï¼Œåœ¨è¯»å†™äº¤æ˜“ä¸­ï¼ŒMVCC éªŒè¯é˜¶æ®µæœ¬èº«å°†æ‰€éœ€çš„ä¿®è®¢å·åŠ è½½åˆ°ç¼“å­˜ä¸­ï¼ˆå› ä¸ºäº¤æ˜“åœ¨ä¿®æ”¹ä¹‹å‰è¯»å–äº†è¿™äº›é”®ï¼‰ï¼Œè€Œå¯¹äºåªå†™äº¤æ˜“åˆ™ä¸æ˜¯è¿™ç§æƒ…å†µã€‚ D. Combinations of Optimizations Figure 18 plots the performance improvement achieved with all three optimizations combined. Table IX presents the number of VSCC worker threads per channel, block sizes, and other relavant parameters used for this study. å›¾ 18 åˆ—å‡ºäº†ä¸‰ä¸ªä¼˜åŒ–ç›¸ç»“åˆæ‰€å®ç°çš„æ€§èƒ½æ”¹è¿›ã€‚ è¡¨ IX åˆ—å‡ºäº†ç”¨äºæ­¤ç ”ç©¶çš„æ¯ä¸ªé€šé“çš„ VSCC å·¥ä½œçº¿ç¨‹æ•°ï¼Œå—å¤§å°å’Œå…¶ä»–ç›¸å…³å‚æ•°ã€‚ With GoLevelDB as the state database, the single channel throughput increased to 2250 tps from 140 tps (i.e., 16Ã— improvement) due to all three optimizations â€“ refer to Figure 18(a) and Figure 4. Similarly, with CouchDB as the state database, the singe channel throughput increased to 700 tps from 50 tps (i.e., 14Ã— improvement) â€“ refer to Figure 18(b) and Figure 11. With an increase in the block size, when CouchDB was the state database, we observed a lower total latency due to the reduction in the number of bulk REST API call to CouchDB (i.e, for 500 transactions, only 2 bulk REST API calls, one read call during MVCC phase and one write during commit phase, were issued when the block size was 500 as compared to 10 bulk REST API calls for a block size of 100). As a result, our guideline 1 &amp; 2 are not applicable for CouchDB with bulk read/write optimizations. ä½¿ç”¨ GoLevelDB ä½œä¸ºçŠ¶æ€æ•°æ®åº“ï¼Œç”±äºä¸‰ä¸ªä¼˜åŒ–ï¼Œå•é€šé“ååé‡ä» 140 tps å¢åŠ åˆ°äº† 2250 tpsï¼ˆå³æé«˜äº†16å€ï¼‰â€“å‚è§å›¾18ï¼ˆaï¼‰å’Œå›¾4ã€‚ç±»ä¼¼åœ°ï¼Œä½¿ç”¨ CouchDB ä½œä¸ºçŠ¶æ€æ•°æ®åº“ ï¼Œå•é€šé“ååé‡ä» 50 tps å¢åŠ åˆ° 700 tpsï¼ˆå³æé«˜äº†14å€ï¼‰â€“å‚è§å›¾18ï¼ˆbï¼‰å’Œå›¾11ã€‚å½“ CouchDB æ˜¯çŠ¶æ€æ•°æ®åº“æ—¶ï¼Œç”±äºå‡å°‘äº†å¯¹ CouchDB çš„æ‰¹é‡ REST API è°ƒç”¨çš„æ•°é‡è€Œå¯¼è‡´çš„æ€»å»¶è¿Ÿï¼Œéšç€å—å¤§å°çš„å¢åŠ ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°æ›´ä½çš„ååé‡ï¼ˆå¯¹äº 500 ä¸ªäº¤æ˜“ï¼Œå½“å—å¤§å°ä¸º 500 æ—¶ï¼Œä»…å‘å‡º 2 ä¸ªæ‰¹é‡ REST API è°ƒç”¨ï¼Œåœ¨MVCCé˜¶æ®µè¿›è¡Œä¸€æ¬¡è¯»è°ƒç”¨ï¼Œåœ¨æäº¤é˜¶æ®µè¿›è¡Œä¸€æ¬¡å†™æ“ä½œï¼Œè€Œå¯¹äºå—å¤§å°ä¸º 100 æ—¶è¿›è¡Œ 10 æ¬¡æ‰¹é‡ REST API è°ƒç”¨ï¼‰ ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬çš„å‡†åˆ™ 1 å’Œ 2 ä¸é€‚ç”¨äºå…·æœ‰æ‰¹é‡è¯»/å†™ä¼˜åŒ–åŠŸèƒ½çš„ CouchDBã€‚ Further, for 8 and 16 channels, the throughput increased to 2700 tps from 1025 tps and 1321 tps, respectively as shown in Figure 19(a). With a simpler endorsement policy, i.e., 1st AND/OR policy, the single channel throughput also increased to 2700 tps (with GoLevelDB) as shown in Figure 19(b). æ­¤å¤–ï¼Œå¯¹äº 8 å’Œ 16 é€šé“ï¼Œååé‡åˆ†åˆ«ä» 1025 tps å’Œ 1321 tps å¢åŠ åˆ° 2700 tpsï¼Œå¦‚å›¾19ï¼ˆaï¼‰æ‰€ç¤ºã€‚ ä½¿ç”¨æ›´ç®€å•çš„èƒŒä¹¦ç­–ç•¥ï¼ˆå³ç¬¬ä¸€ä¸ª AND / OR ç­–ç•¥ï¼‰ï¼Œå•é€šé“ååé‡ä¹Ÿå¢åŠ åˆ°äº† 2700 tpsï¼ˆä½¿ç”¨ GoLevelDBï¼‰ï¼Œå¦‚å›¾19ï¼ˆbï¼‰æ‰€ç¤ºã€‚ Even with a throughput of 2700 tps, the average CPU utilization of a peer was only 60% and the network utilization of a peer was 1680 Mbps (send) and 240 Mbps (receive). This is because the sum of MVCC latency and ledger update latency (less CPU intensive tasks) was almost same or higher than the VSCC latency (as shown in Figure 18(c) and (d)). Due to these sequential phases, vCPUs were underutilized. One potential optimization would be to pipeline the VSCC and MVCC validation phase. å³ä½¿ååé‡ä¸º 2700 tpsï¼Œå¯¹ç­‰èŠ‚ç‚¹çš„å¹³å‡ CPU åˆ©ç”¨ç‡ä¹Ÿä»…ä¸º 60ï¼…ï¼Œç½‘ç»œåˆ©ç”¨ç‡ä¸º1680 Mbpsï¼ˆå‘é€ï¼‰å’Œ 240 Mbpsï¼ˆæ¥æ”¶ï¼‰ã€‚ è¿™æ˜¯å› ä¸º MVCC å»¶è¿Ÿå’Œè´¦æœ¬æ›´æ–°å»¶è¿Ÿçš„æ€»å’Œï¼ˆè¾ƒå°‘çš„ CPU å¯†é›†å‹ä»»åŠ¡ï¼‰ä¸ VSCC å»¶è¿Ÿå‡ ä¹ç›¸åŒæˆ–æ›´é«˜ï¼ˆå¦‚å›¾18ï¼ˆcï¼‰å’Œï¼ˆdï¼‰æ‰€ç¤ºï¼‰ã€‚ ç”±äºè¿™äº›é¡ºåºçš„é˜¶æ®µï¼ŒvCPU æœªè¢«å……åˆ†åˆ©ç”¨ã€‚ ä¸€ç§æ½œåœ¨çš„ä¼˜åŒ–æ–¹æ³•æ˜¯ç®¡é“ VSCC å’Œ MVCC éªŒè¯é˜¶æ®µã€‚ VII. RELATED WORK There has been considerable interest in the scalability and performance characteristics of public blockchain networks and specifically the limiting factor of the consensus protocol and its security implications [31], [23]. äººä»¬å¯¹å…¬å…±åŒºå—é“¾ç½‘ç»œçš„å¯æ‰©å±•æ€§å’Œæ€§èƒ½ç‰¹å¾ï¼Œç‰¹åˆ«æ˜¯å…±è¯†åè®®çš„é™åˆ¶å› ç´ åŠå…¶å®‰å…¨æ€§æœ‰ç€ç›¸å½“å¤§çš„å…´è¶£ã€‚ Also for public blockchains, [19] have looked at quantifying throughput, latency, bootstrap time and cost per transaction for the Bitcoin network based on publicly available data. åŒæ ·å¯¹äºå…¬å…±åŒºå—é“¾ï¼Œ[19] å·²ç»ç ”ç©¶äº†åŸºäºå¯å…¬å¼€è·å¾—çš„æ•°æ®æ¥é‡åŒ–æ¯”ç‰¹å¸ç½‘ç»œçš„ååé‡ï¼Œç­‰å¾…æ—¶é—´ï¼Œè‡ªä¸¾æ—¶é—´å’Œæ¯ç¬”äº¤æ˜“æˆæœ¬ã€‚ BlockBench [22] was one of the first to look at permissioned blockchain. They present a framework for comparing performance of different blockchain platforms, namely, Ethereum, Parity and Hyperledger Fabric using a set of micro and macro benchmarks. Similar to [19] they generalize consensus, data, execution and application as 4 layers of blockchain and use the benchmarks to exercise them. They measure the overall performance in terms of throughput, latency and scalability of the platforms and draw conclusions across the 3 platforms. However, they studied the performance of Fabric v0.6, with v1.0 version bringing in a complete re-design, their observations do not hold relevance and needs re-study. BlockBench [22] æ˜¯æœ€æ—©ç ”ç©¶è®¸å¯åŒºå—é“¾çš„äººä¹‹ä¸€ã€‚ ä»–ä»¬æå‡ºäº†ä¸€ä¸ªæ¡†æ¶ï¼Œç”¨äºä½¿ç”¨ä¸€ç»„å¾®è§‚å’Œå®è§‚åŸºå‡†æ¥æ¯”è¾ƒä¸åŒåŒºå—é“¾å¹³å°ï¼ˆä»¥å¤ªåŠï¼ŒParity å’Œ Hyperledger Fabricï¼‰çš„æ€§èƒ½ã€‚ ä¸ [19] ç›¸ä¼¼ï¼Œä»–ä»¬å°†å…±è¯†ï¼Œæ•°æ®ï¼Œæ‰§è¡Œå’Œåº”ç”¨æ¦‚æ‹¬ä¸º4å±‚åŒºå—é“¾ï¼Œå¹¶ä½¿ç”¨åŸºå‡†å¯¹å…¶è¿›è¡Œäº†å®è·µã€‚ ä»–ä»¬æ ¹æ®å¹³å°çš„ååé‡ï¼Œå»¶è¿Ÿå’Œå¯ä¼¸ç¼©æ€§æ¥è¡¡é‡æ•´ä½“æ€§èƒ½ï¼Œå¹¶åœ¨è¿™ä¸‰ä¸ªå¹³å°ä¸Šå¾—å‡ºç»“è®ºã€‚ ä½†æ˜¯ï¼Œä»–ä»¬ç ”ç©¶äº† Fabric v0.6 çš„æ€§èƒ½ï¼Œè€Œ v1.0 ç‰ˆæœ¬å¸¦æ¥äº†å®Œæ•´çš„é‡æ–°è®¾è®¡ï¼Œä»–ä»¬çš„è§‚å¯Ÿç»“æœæ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œéœ€è¦é‡æ–°ç ”ç©¶ã€‚ [16] presents the design and the new architecture of Fabric, delving in-depth into its design considerations and modularity. It presents the performance of a single Bitcoin like crypto currency application on Fabric, called Fabcoin, which uses a customized VSCC to validate the Fabcoin specific transactions and avoid complex endorsements and channels. Further, they used CLI command to emulate clients, which is not realistic, instead of using a SDK [6], [8], [10]. Our work differs from theirs in that, we do a comprehensive study for different workloads keeping Fabricâ€™s modularity and application in multiple domains in focus. [16] ä»‹ç»äº† Fabric çš„è®¾è®¡å’Œæ–°æ¶æ„ï¼Œæ·±å…¥ç ”ç©¶äº†å…¶è®¾è®¡è€ƒè™‘å› ç´ å’Œæ¨¡å—åŒ–ã€‚ å®ƒå±•ç¤ºäº† Fabric ä¸Šå•ä¸ªæ¯”ç‰¹å¸ï¼ˆå¦‚åŠ å¯†è´§å¸ï¼‰åº”ç”¨ç¨‹åºçš„æ€§èƒ½ï¼Œç§°ä¸º Fabcoinï¼Œè¯¥åº”ç”¨ç¨‹åºä½¿ç”¨å®šåˆ¶çš„ VSCC æ¥éªŒè¯ Fabcoin ç‰¹å®šäº¤æ˜“å¹¶é¿å…å¤æ‚çš„è®¤å¯å’Œé€šé“ã€‚ æ­¤å¤–ï¼Œä»–ä»¬ä½¿ç”¨ CLI å‘½ä»¤æ¥æ¨¡æ‹Ÿå®¢æˆ·ç«¯ï¼Œè¿™æ˜¯ä¸ç°å®çš„ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ SDK [6]ï¼Œ[8]ï¼Œ[10]ã€‚ æˆ‘ä»¬çš„å·¥ä½œä¸ä»–ä»¬çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œæˆ‘ä»¬é’ˆå¯¹ä¸åŒçš„å·¥ä½œè´Ÿè½½è¿›è¡Œäº†å…¨é¢çš„ç ”ç©¶ï¼Œä»¥ç¡®ä¿Fabricçš„æ¨¡å—åŒ–å’Œåœ¨å¤šä¸ªé¢†åŸŸä¸­çš„åº”ç”¨ä¸ºé‡ç‚¹ã€‚ A note to the reader, [16] used Fabric v1.1-preview release, which incorporates all our optimizations and other additional functionalities over v1.0. However, being a minor version update much of the core functionality remains the same and our observations hold true for v1.1 and future versions based on the new architecture of Fabric. ç»™è¯»è€…çš„è¯´æ˜ï¼Œ[16] ä½¿ç”¨ Fabric v1.1-preview ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬åˆå¹¶äº†æˆ‘ä»¬åœ¨ v1.0 ä¸Šçš„æ‰€æœ‰ä¼˜åŒ–å’Œå…¶ä»–é™„åŠ åŠŸèƒ½ã€‚ ä½†æ˜¯ï¼Œä½œä¸ºæ¬¡è¦ç‰ˆæœ¬æ›´æ–°ï¼Œå¤§éƒ¨åˆ†æ ¸å¿ƒåŠŸèƒ½ä¿æŒä¸å˜ï¼Œå¹¶ä¸”æˆ‘ä»¬çš„è§‚å¯Ÿå¯¹äºåŸºäº Fabric çš„æ–°ä½“ç³»ç»“æ„çš„ v1.1 å’Œå°†æ¥ç‰ˆæœ¬ä»ç„¶é€‚ç”¨ã€‚ VIII. CONCLUSION &amp; FUTURE WORK In this paper, we conducted a comprehensive empirical study to understand the performance of Hyperledger Fabric, a permissioned blockchain platform, by varying values assigned to configurable parameters such as block size, endorsement policy, channels, resource allocation, and state database choices. As a result of our study, we provided six valuable guidelines on configuring these parameters and also identified three major performance bottlenecks. Hence, we introduced and studied three simple optimizations such as MSP cache, parallel VSCC validation, and bulk read/write during MVCC validation &amp; commit phase to improve the singe channel performance by 16Ã—. Further, these three optimizations have been successfully adopted in Fabric v1.1 åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬è¿›è¡Œäº†ä¸€é¡¹å…¨é¢çš„å®è¯ç ”ç©¶ï¼Œä»¥äº†è§£é€šè¿‡æ›´æ”¹åˆ†é…ç»™å¯é…ç½®å‚æ•°ï¼ˆä¾‹å¦‚åŒºå—å¤§å°ï¼ŒèƒŒä¹¦ç­–ç•¥ï¼Œé€šé“ï¼Œèµ„æºåˆ†é…å’ŒçŠ¶æ€æ•°æ®åº“é€‰æ‹©ï¼‰çš„å€¼æ¥äº†è§£è®¸å¯çš„åŒºå—é“¾å¹³å° Hyperledger Fabric çš„æ€§èƒ½ã€‚ ä½œä¸ºæˆ‘ä»¬ç ”ç©¶çš„ç»“æœï¼Œæˆ‘ä»¬æä¾›äº†å…­ç§æœ‰å…³é…ç½®è¿™äº›å‚æ•°çš„æœ‰ä»·å€¼çš„æŒ‡å—ï¼Œå¹¶ä¸”ç¡®å®šäº†ä¸‰ä¸ªä¸»è¦çš„æ€§èƒ½ç“¶é¢ˆã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å¼•å…¥å¹¶ç ”ç©¶äº†ä¸‰ç§ç®€å•çš„ä¼˜åŒ–æ–¹æ³•ï¼Œä¾‹å¦‚ MSP ç¼“å­˜ï¼Œå¹¶è¡Œ VSCC éªŒè¯ä»¥åŠ MVCC éªŒè¯å’Œæäº¤é˜¶æ®µæœŸé—´çš„æ‰¹é‡è¯»/å†™ï¼Œä»¥å°†å•é€šé“æ€§èƒ½æé«˜ 16 å€ã€‚ æ­¤å¤–ï¼Œè¿™ä¸‰ä¸ªä¼˜åŒ–å·²åœ¨ Fabric v1.1 ä¸­æˆåŠŸé‡‡ç”¨ As a part of future work, we will study the scalability and fault tolerant capability of Fabric by using different blockchain topologies such as different number of organizations and different number of nodes per organization. Further, we plan to quantify the impact of various consensus algorithms and number of nodes in the ordering service on the performance of different workloads. In our study, we assumed that the network is not a bottleneck. However, in the real world setup, nodes can be geographically distributed and hence, the network might play a role. In addition, the arrival rates in real world production system would be following certain distributions. Hence, we will study the performance of Fabric in Wide Area Network (WAN) with different arrival rate distributions. ä½œä¸ºæœªæ¥å·¥ä½œçš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä½¿ç”¨ä¸åŒçš„åŒºå—é“¾æ‹“æ‰‘æ¥ç ” ç©¶Fabric çš„å¯æ‰©å±•æ€§å’Œå®¹é”™èƒ½åŠ›ï¼Œä¾‹å¦‚ä¸åŒçš„ç»„ç»‡æ•°é‡å’Œæ¯ä¸ªç»„ç»‡çš„èŠ‚ç‚¹æ•°é‡ã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬è®¡åˆ’é‡åŒ–è®¢è´­æœåŠ¡ä¸­å„ç§å…±è¯†ç®—æ³•å’ŒèŠ‚ç‚¹æ•°å¯¹ä¸åŒå·¥ä½œè´Ÿè½½æ€§èƒ½çš„å½±å“ã€‚ åœ¨æˆ‘ä»¬çš„ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬å‡è®¾ç½‘ç»œä¸æ˜¯ç“¶é¢ˆã€‚ ä½†æ˜¯ï¼Œåœ¨ç°å®ä¸–ç•Œä¸­ï¼ŒèŠ‚ç‚¹å¯ä»¥åœ¨åœ°ç†ä½ç½®ä¸Šåˆ†å¸ƒï¼Œå› æ­¤ç½‘ç»œå¯èƒ½ä¼šå‘æŒ¥ä½œç”¨ã€‚ å¦å¤–ï¼Œå®é™…ç”Ÿäº§ç³»ç»Ÿä¸­çš„åˆ°è¾¾ç‡å°†éµå¾ªæŸäº›åˆ†å¸ƒã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å°†ç ”ç©¶å…·æœ‰ä¸åŒåˆ°è¾¾é€Ÿç‡åˆ†å¸ƒçš„å¹¿åŸŸç½‘ï¼ˆWANï¼‰ä¸­å…‰çº¤çš„æ€§èƒ½ã€‚ IX. ACKNOWLEDGEMENTS We wish to acknowledge our following colleagues for their valuable assistance to our work. Our proposed optimizations were successfully adopted to Fabric, thanks to fabric developers who took care of submitting patches to Fabric v1.1. Angelo De Carlo (MSP Cache), Alessandro Sorniotti (Parallel Validation). Thanks to David Enyeart, Chris Elder, Manish Sethi for their proposal on Bulk Read from CouchDB. We would like to thank Yacov Manevich for his consistent help. æˆ‘ä»¬è°¨æ„Ÿè°¢ä»¥ä¸‹åŒäº‹ä¸ºæˆ‘ä»¬çš„å·¥ä½œæä¾›çš„å®è´µå¸®åŠ©ã€‚ æˆ‘ä»¬çš„å»ºè®®ä¼˜åŒ–å·²æˆåŠŸåœ°è¢« Fabric é‡‡çº³ï¼Œè¿™è¦å½’åŠŸäº Fabricå¼€å‘äººå‘˜è´Ÿè´£å‘ Fabric v1.1 æäº¤è¡¥ä¸ã€‚ Angelo De Carloï¼ˆMSPç¼“å­˜ï¼‰ï¼ŒAlessandro Sorniottiï¼ˆå¹¶è¡ŒéªŒè¯ï¼‰ã€‚ æ„Ÿè°¢ David Enyeartï¼ŒChris Elder å’Œ Manish Sethi æå‡ºçš„æœ‰å…³ CouchDB æ‰¹é‡è¯»å–çš„å»ºè®®ã€‚ æˆ‘ä»¬è¦æ„Ÿè°¢ Yacov Manevich çš„ä¸€è´¯å¸®åŠ©ã€‚","categories":[],"tags":[{"name":"ç¿»è¯‘","slug":"ç¿»è¯‘","permalink":"http://ziiyan.github.io/tags/%E7%BF%BB%E8%AF%91/"},{"name":"ç²¾è¯»","slug":"ç²¾è¯»","permalink":"http://ziiyan.github.io/tags/%E7%B2%BE%E8%AF%BB/"}]},{"title":"é¢ç»ï¼šé˜¿é‡Œå·´å·´-AEæŠ€æœ¯éƒ¨-ä¸€é¢","slug":"é¢ç»ï¼šé˜¿é‡Œå·´å·´-AEæŠ€æœ¯éƒ¨-ä¸€é¢","date":"2020-04-02T13:40:50.000Z","updated":"2020-08-31T14:03:02.077Z","comments":true,"path":"2020/04/02/é¢ç»ï¼šé˜¿é‡Œå·´å·´-AEæŠ€æœ¯éƒ¨-ä¸€é¢/","link":"","permalink":"http://ziiyan.github.io/2020/04/02/%E9%9D%A2%E7%BB%8F%EF%BC%9A%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4-AE%E6%8A%80%E6%9C%AF%E9%83%A8-%E4%B8%80%E9%9D%A2/","excerpt":"","text":"30 åˆ†é’Ÿå‡‰ç» ä¸ºä»€ä¹ˆé€‰å‰ç«¯ ä½ è®¤ä¸ºå‰ç«¯éœ€è¦ä»€ä¹ˆèƒ½åŠ› ä»‹ç»ä¸€ä¸‹é¡¹ç›® ä¸ç”¨ svg çš„è¯å¯ä»¥ç”¨ä»€ä¹ˆï¼Ÿ å½“æ—¶ä¸ºä»€ä¹ˆä¸ç”¨ é¡¹ç›®åœ¨ä½ æ¥æ‰‹ä¹‹å‰å’Œä¹‹åæœ‰ä»€ä¹ˆä¸åŒå—ï¼Ÿæœ‰æ²¡æœ‰åšä»€ä¹ˆä¼˜åŒ– css position çš„å–å€¼ static å’Œ fixed æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ css é€‰æ‹©å™¨ äº‹ä»¶å†’æ³¡å’Œäº‹ä»¶æ•è·çš„åœºæ™¯ é¡¹ç›®ç”¨ä»€ä¹ˆæ¡†æ¶ï¼Ÿæ‰“åŒ…åŸç†æ¸…æ¥šå—ï¼Ÿwebpack ä¹‹ç±»çš„æœ‰é…ç½®è¿‡å— å›¾ç‰‡æ‡’åŠ è½½æ€ä¹ˆåšçš„ è¯´ä¸€ä¸‹ cookie è·¨åŸŸ CORS æœ‰é…ç½®è¿‡å— æœ‰æ²¡æœ‰åšè¿‡æœåŠ¡ç«¯ æœ‰ä»€ä¹ˆè¡¥å……çš„å— nextTick å’Œ setTimeout æœ‰ä»€ä¹ˆåŒºåˆ« æœ€åæˆ‘æ˜¯é—®å¯¹æˆ‘ä»Šåçš„å­¦ä¹ æœ‰ä»€ä¹ˆå»ºè®®ï¼Ÿ","categories":[],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://ziiyan.github.io/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"SpringBoot","slug":"SpringBootå…¥é—¨","date":"2020-04-02T06:11:47.000Z","updated":"2020-04-02T06:12:11.228Z","comments":true,"path":"2020/04/02/SpringBootå…¥é—¨/","link":"","permalink":"http://ziiyan.github.io/2020/04/02/SpringBoot%E5%85%A5%E9%97%A8/","excerpt":"","text":"Spring Boot å…¥é—¨Srping Boot ç®€ä»‹ ç®€åŒ– Spring åº”ç”¨å¼€å‘çš„ä¸€ä¸ªæ¡†æ¶ï¼› æ•´ä¸ª Spring æŠ€æœ¯æ ˆçš„ä¸€ä¸ªå¤§é›†åˆï¼› J2EE å¼€å‘çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼› å¾®æœåŠ¡å¾®æœåŠ¡ï¼šæ¶æ„é£æ ¼ï¼ˆå¾®æœåŠ¡åŒ–ï¼‰ ä¸€ä¸ªåº”ç”¨åº”è¯¥æ˜¯ä¸€ç»„å°å‹æœåŠ¡ï¼›å¯ä»¥é€šè¿‡ HTTP çš„æ–¹å¼è¿›è¡Œäº’é€šï¼› æ¯ä¸€ä¸ªåŠŸèƒ½å…ƒç´ æœ€ç»ˆéƒ½æ˜¯ä¸€ä¸ªå¯ç‹¬ç«‹æ›¿æ¢å’Œç‹¬ç«‹å‡çº§çš„è½¯ä»¶å•å…ƒï¼› Hello World æ¢ç©¶POMæ–‡ä»¶çˆ¶é¡¹ç›®1234567891011121314 &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.2.6.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt;// å®ƒçš„çˆ¶é¡¹ç›®æ˜¯ï¼ˆcmd+é¼ æ ‡å·¦é”®ç‚¹å‡» spring-boot-starter-parent æŸ¥çœ‹ï¼‰ &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt; &lt;version&gt;2.2.6.RELEASE&lt;/version&gt; &lt;relativePath&gt;../../spring-boot-dependencies&lt;/relativePath&gt; &lt;/parent&gt;// çœŸæ­£ç®¡ç† Spring Boot åº”ç”¨é‡Œæ‰€æœ‰ä¾èµ–ç‰ˆæœ¬ å¯åŠ¨å™¨spring-boot-starter-web spring-boot-starterï¼šSpringBoot åœºæ™¯å¯åŠ¨å™¨ Spring Boot å°†æ‰€æœ‰çš„åŠŸèƒ½åœºæ™¯éƒ½æŠ½å–å‡ºæ¥ï¼Œåšæˆä¸€ä¸ªä¸ªå¯åŠ¨å™¨ï¼Œåªéœ€è¦åœ¨é¡¹ç›®å¼•å…¥è¿™äº›å¯åŠ¨å™¨ç›¸å…³åœºæ™¯éƒ½æ‰€æœ‰ä¾èµ–éƒ½ä¼šå¯¼å…¥è¿›æ¥ï¼Œè¦ä»€ä¹ˆåŠŸèƒ½å°±å¯¼å…¥ä»€ä¹ˆå¯åŠ¨å™¨ spring-boot-starter-webï¼šå¸®æˆ‘ä»¬å¯¼å…¥äº† web æ¨¡å—æ­£å¸¸è¿è¡Œæ‰€ä¾èµ–çš„ç»„ä»¶ ä¸»ç¨‹åºç±»ï¼Œä¸»å…¥å£ç±»123456@SpringBootApplicationpublic class DemoApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(DemoApplication.class, args); &#125;&#125; @SpringBootApplicationï¼šè¯´æ˜è¿™ä¸ªç±»æ˜¯ä¸»é…ç½®ç±»ï¼Œè¿è¡Œè¯¥ç±»çš„ main æ–¹æ³•å¯åŠ¨ SpringBoot åº”ç”¨ 123456789101112131415@Target(&#123;ElementType.TYPE&#125;)@Retention(RetentionPolicy.RUNTIME)@Documented@Inherited@SpringBootConfiguration@EnableAutoConfiguration@ComponentScan( excludeFilters = &#123;@Filter( type = FilterType.CUSTOM, classes = &#123;TypeExcludeFilter.class&#125;), @Filter( type = FilterType.CUSTOM, classes = &#123;AutoConfigurationExcludeFilter.class&#125;)&#125;) @SpringBootConfigurationï¼šSpringBoot çš„é…ç½®ç±» æ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª SpringBoot çš„é…ç½®ç±» @Configurationï¼šé…ç½®ç±»ä¸Šæ ‡æ³¨è¿™ä¸ªæ³¨è§£ @Componentï¼šè¯´æ˜è¿™ä¹Ÿæ˜¯ä¸€ä¸ªspringçš„ç»„ä»¶ @EnableAutoConfigurationï¼šè‡ªåŠ¨é…ç½® @AutoConfigurationPackageï¼šè‡ªåŠ¨é…ç½®åŒ… @Import({Registrar.class}) Spring çš„åº•å±‚æ³¨è§£ï¼Œç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€ä¸ªç»„ä»¶ï¼šå¯¼å…¥çš„ç»„ä»¶ç”± Registrar.class æŒ‡å®š å°†ä¸»é…ç½®ç±»ï¼ˆ@SpringBootApplicationæ ‡æ³¨çš„ç±»ï¼‰çš„æ‰€åœ¨åŒ…ä»¥åŠä¸‹é¢æ‰€æœ‰å­åŒ…é‡Œé¢çš„æ‰€æœ‰ç»„ä»¶æ‰«æåˆ° Spring å®¹å™¨ @Import({AutoConfigurationImportSelector.class})ï¼šè‡ªåŠ¨é…ç½®å¯¼å…¥é€‰æ‹© å¯¼å…¥å“ªäº›ç»„ä»¶çš„é€‰æ‹©å™¨ å°†æ‰€æœ‰éœ€è¦å¯¼å…¥çš„ç»„ä»¶ä»¥å…¨ç±»åçš„æ–¹å¼è¿”å›ï¼›è¿™äº›ç»„ä»¶å°±ä¼šè¢«æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼› ä¼šç»™å®¹å™¨å¯¼å…¥éå¸¸å¤šçš„è‡ªåŠ¨é…ç½®ç±»ï¼ˆxxxAutoConfigurationï¼‰ï¼›å°±æ˜¯ç»™å®¹å™¨ä¸­å¯¼å…¥è¿™ä¸ªåœºæ™¯éœ€è¦çš„æ‰€æœ‰ç»„ä»¶ï¼Œå¹¶é…ç½®å¥½è¿™äº›ç»„ä»¶ï¼› META-INF/spring.factoriesï¼šè‡ªåŠ¨é…ç½®çš„æ ¸å¿ƒæ–‡ä»¶ ç»“è®ºï¼šSpringboot æ‰€æœ‰è‡ªåŠ¨é…ç½®éƒ½æ˜¯åœ¨å¯åŠ¨çš„æ—¶å€™æ‰«æå¹¶åŠ è½½ spring.factories æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ç±»éƒ½åœ¨è¿™é‡Œé¢ï¼Œä½†ä¸ä¸€å®šç”Ÿæ•ˆï¼Œè¦åˆ¤æ–­æ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œåªè¦å¯¼å…¥äº†å¯¹åº”çš„ startï¼Œå°±æœ‰å¯¹åº”çš„å¯åŠ¨å™¨äº†ï¼Œæœ‰äº†å¯åŠ¨å™¨ï¼Œæˆ‘ä»¬è‡ªåŠ¨è£…é…å°±ä¼šç”Ÿæ•ˆï¼Œç„¶åå°±é…ç½®æˆåŠŸ springboot åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œä»ç±»è·¯å¾„ä¸‹ /META-INF/spring.factories è·å–æŒ‡å®šçš„å€¼ å°†è¿™äº›è‡ªåŠ¨é…ç½®çš„ç±»å¯¼å…¥å®¹å™¨ï¼Œè‡ªåŠ¨é…ç½®å°±ä¼šç”Ÿæ•ˆï¼Œå¸®æˆ‘ä»¬è¿›è¡Œè‡ªåŠ¨é…ç½® æ•´åˆ javaEEï¼Œè§£å†³æ–¹æ¡ˆå’Œè‡ªåŠ¨é…ç½®çš„ä¸œè¥¿éƒ½åœ¨ spring-boot-autoconfigure-2.2.0.RELEASE.jar è¿™ä¸ªåŒ…ä¸‹ å®ƒä¼šæŠŠæ‰€æœ‰éœ€è¦å¯¼å…¥çš„ç»„ä»¶ï¼Œä»¥ç±»åçš„æ–¹å¼è¿”å›ï¼Œè¿™äº›ç»„ä»¶å°±ä¼šè¢«æ·»åŠ åˆ°å®¹å™¨ å®¹å™¨ä¸­ä¹Ÿä¼šå­˜åœ¨éå¸¸å¤šçš„ xxxAutoConfiguration çš„æ–‡ä»¶ï¼ˆ@Beanï¼‰ï¼Œå°±æ˜¯è¿™äº›ç±»ç»™å®¹å™¨ä¸­å¯¼å…¥äº†è¿™ä¸ªåœºæ™¯éœ€è¦çš„æ‰€æœ‰ç»„ä»¶ï¼›å¹¶è‡ªåŠ¨é…ç½®ï¼Œ@Configurationï¼ŒJavaConfig æœ‰äº†è‡ªåŠ¨é…ç½®ç±»ï¼Œå°±å…å»äº†æ‰‹åŠ¨é…ç½® ä½¿ç”¨ Spring Initialize å¿«é€Ÿåˆ›å»º Spring Boot é¡¹ç›®é»˜è®¤ç”Ÿæˆçš„ Spring Boot é¡¹ç›® ä¸»ç¨‹åºå·²ç»ç”Ÿæˆå¥½äº†ï¼Œåªéœ€è¦ç¼–å†™è‡ªå·±çš„é€»è¾‘ resources æ–‡ä»¶å¤¹ä¸­ç›®å½•ç»“æ„ staticï¼šä¿å­˜æ‰€æœ‰çš„é™æ€èµ„æºï¼›js css images templatesï¼šä¿å­˜æ‰€æœ‰çš„æ¨¡ç‰ˆé¡µé¢ï¼›ï¼ˆSpring Boot é»˜è®¤ jar åŒ…ä½¿ç”¨åµŒå…¥å¼çš„ Tomcatï¼Œé»˜è®¤ä¸æ”¯æŒ JSP é¡µé¢ï¼‰ï¼›å¯ä»¥ä½¿ç”¨æ¨¡ç‰ˆå¼•æ“ application.propertiesï¼šSpringBoot åº”ç”¨çš„é…ç½®æ–‡ä»¶ï¼šå¯ä»¥ä¿®æ”¹ç«¯å£ç­‰ #é…ç½®æ–‡ä»¶ application.properties è¯­æ³•ç»“æ„ï¼škey=value application.ymlï¼ˆæ¨èï¼‰ è¯­æ³•ç»“æ„ï¼škey:ç©ºæ ¼value Yaml å¯ä»¥ç›´æ¥ç»™å®ä½“ç±»èµ‹å€¼ @ConfigurationProperties(prefix = â€œxxxâ€) JSR-303 æ ¡éªŒ @validated æ•°æ®æ ¡éªŒ é…ç½®æ–‡ä»¶ä½ç½®åŠä¼˜å…ˆçº§ file: ./config/ file: ./ classpath: /config/ classpath:/ è‡ªåŠ¨è£…é…åŸç† SpringBoot å¯åŠ¨ä¼šåŠ è½½å¤§é‡çš„è‡ªåŠ¨é…ç½®ç±» çœ‹æˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½æœ‰æ²¡æœ‰åœ¨SpringBooté»˜è®¤å†™å¥½çš„è‡ªåŠ¨é…ç½®ç±»å½“ä¸­ åœ¨çœ‹è¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»ä¸­åˆ°åº•é…ç½®äº†å“ªäº›ç»„ä»¶ï¼ˆéœ€è¦çš„ç»„ä»¶æœ‰çš„è¯å°±ä¸ç”¨æ‰‹åŠ¨é…ç½®äº†ï¼‰ ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶çš„æ—¶å€™ï¼Œä¼šä» properties ç±»ä¸­å›å»æŸäº›å±æ€§ï¼Œåªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè¿™äº›å±æ€§çš„å€¼å³å¯ xxxAutoConfiguration è‡ªåŠ¨é…ç½®ç±»ï¼šç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ xxxPropertiesï¼šå°è£…é…ç½®æ–‡ä»¶ä¸­ç›¸å…³å±æ€§ SpringBoot Web å¼€å‘é™æ€èµ„æº åœ¨ springboot ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å¤„ç†é™æ€èµ„æº webjars publicã€staticã€/**ã€resources ä¼˜å…ˆçº§ï¼šresources &gt; static &gt; public æ¨¡ç‰ˆå¼•æ“12345678&lt;dependency&gt; &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt; &lt;artifactId&gt;thymeleaf-spring5&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt; &lt;artifactId&gt;thymeleaf-extras-java8time&lt;/artifactId&gt;&lt;/dependency&gt; å‰åç«¯åˆ†ç¦»è¿˜æœ‰ç”¨å—è¿™ä¸ªï¼Ÿ SpringMVC é…ç½®åŸç† åœ¨ Srpingboot ä¸­ï¼Œæœ‰éå¸¸å¤šçš„ xxxConfiguration å¸®åŠ©æˆ‘ä»¬è¿›è¡Œæ‰©å±•é…ç½®","categories":[],"tags":[{"name":"Java","slug":"Java","permalink":"http://ziiyan.github.io/tags/Java/"}]},{"title":"å­¦ä¹ ç¬”è®°ï¼šå›¾è§£HTTP","slug":"å­¦ä¹ ç¬”è®°ï¼šå›¾è§£HTTP","date":"2020-04-01T12:50:07.000Z","updated":"2020-08-11T01:03:08.122Z","comments":true,"path":"2020/04/01/å­¦ä¹ ç¬”è®°ï¼šå›¾è§£HTTP/","link":"","permalink":"http://ziiyan.github.io/2020/04/01/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%9A%E5%9B%BE%E8%A7%A3HTTP/","excerpt":"","text":"ç¬¬ä¸€ç«  äº†è§£ Web åŠç½‘ç»œåŸºç¡€ä½¿ç”¨ HTTP åè®®è®¿é—® WebWeb æ˜¯å»ºç«‹åœ¨ HTTP åè®®ä¸Šé€šä¿¡çš„ HTTP çš„è¯ç”Ÿæœ€åˆè®¾æƒ³çš„åŸºæœ¬ç†å¿µæ˜¯ï¼šå€ŸåŠ©å¤šæ–‡æ¡£ä¹‹é—´ç›¸äº’å…³è”å½¢æˆçš„è¶…æ–‡æœ¬ï¼ˆHyperTextï¼‰ï¼Œè¿æˆå¯ç›¸äº’å‚é˜…çš„ WWWï¼ˆWorld Wide Webï¼Œä¸‡ç»´ç½‘ï¼‰ HTMLï¼šæŠŠ SGML ä½œä¸ºé¡µé¢çš„æ–‡æœ¬æ ‡è®°è¯­è¨€ HTTPï¼šæ–‡æ¡£ä¼ é€’åè®® URLï¼šæŒ‡å®šæ–‡æ¡£æ‰€åœ¨ä½ç½® WWW è¿™ä¸€åç§°ï¼Œæ˜¯ Web æµè§ˆå™¨å½“å¹´ç”¨æ¥æµè§ˆè¶…æ–‡æœ¬çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºæ—¶çš„åç§°ã€‚ ç°åœ¨åˆ™ç”¨æ¥è¡¨ç¤ºè¿™ä¸€ç³»åˆ—çš„é›†åˆï¼Œä¹Ÿå¯ç®€ç§°ä¸º Webã€‚ ç½‘ç»œåŸºç¡€ TCP/IPHTTP æ˜¯ TCP/IP åè®®æ—çš„ä¸€ä¸ªå­é›† åº”ç”¨å±‚ FTPã€DNSã€HTTP HTTP æ•°æ® ä¼ è¾“å±‚ TCPã€UDP TCPé¦–éƒ¨ï¼ˆHTTPæ•°æ®ï¼‰ ç½‘ç»œå±‚ IP æ•°æ®åŒ… IPé¦–éƒ¨ï¼ˆTCPé¦–éƒ¨ï¼ˆHTTPæ•°æ®ï¼‰ï¼‰ é“¾è·¯å±‚ ç¡¬ä»¶ ä»¥å¤ªç½‘é¦–éƒ¨ï¼ˆIPé¦–éƒ¨ï¼ˆTCPé¦–éƒ¨ï¼ˆHTTPæ•°æ®ï¼‰ï¼‰ï¼‰ IP åè®®ï¼ˆè´Ÿè´£ä¼ è¾“ï¼‰ ä½œç”¨ï¼šæŠŠå„ç§æ•°æ®åŒ…ä¼ é€ç»™å¯¹æ–¹ IP åœ°å€ â€”ARPåœ°å€è§£æåè®®â€”&gt; MAC åœ°å€ è·¯ç”±é€‰æ‹© TCP åè®®ï¼ˆç¡®ä¿å¯é æ€§ï¼‰ ä½œç”¨ï¼šæä¾›å¯é çš„å­—èŠ‚æµæœåŠ¡ å­—èŠ‚æµæœåŠ¡ï¼šä¸ºäº†æ–¹ä¾¿ä¼ è¾“ï¼Œå°†å¤§å—æ•°æ®åˆ†å‰²æˆæŠ¥æ–‡æ®µï¼ˆsegmentï¼‰ä¸ºå•ä½çš„æ•°æ®åŒ…è¿›è¡Œç®¡ç† å¯é çš„ä¼ è¾“æœåŠ¡ï¼šèƒ½å¤Ÿç¡®è®¤æ•°æ®æœ€ç»ˆæ˜¯å¦é€è¾¾åˆ°å¯¹æ–¹ ä¸‰æ¬¡æ¡æ‰‹ç­–ç•¥ å‘é€ç«¯é¦–å…ˆå‘é€ä¸€ä¸ªå¸¦æœ‰ SYN æ ‡å¿—çš„æ•°æ®åŒ…ç»™å¯¹æ–¹ æ¥æ”¶ç«¯æ”¶åˆ°åï¼Œå›ä¼ ä¸€ä¸ªå¸¦æœ‰ SYN/ACK æ ‡å¿—çš„æ•°æ®åŒ…ä»¥ç¤ºä¼ è¾¾ç¡®è®¤ä¿¡æ¯ å‘é€ç«¯å†å›ä¼ ä¸€ä¸ªå¸¦ ACK æ ‡å¿—çš„æ•°æ®åŒ… DNS æœåŠ¡ï¼ˆè´Ÿè´£åŸŸåè§£æï¼‰ ä½œç”¨ï¼šåŸŸå &lt;===&gt; IP åœ°å€ å„ç§åè®®ä¸ HTTP åè®®çš„å…³ç³» DNS è§£æåŸŸåï¼Œå¾—åˆ°å¯¹åº” IP åœ°å€ HTTP åè®®ç”Ÿæˆ HTTP è¯·æ±‚æŠ¥æ–‡ TCP å°†è¯·æ±‚æŠ¥æ–‡åˆ†å‰²æˆæŠ¥æ–‡æ®µ IP åè®®è·¯ç”±å¯»å€ï¼Œä¸€è¾¹ä¸­è½¬ä¸€è¾¹ä¼ é€ TCP æ”¶åˆ°æŠ¥æ–‡æ®µï¼Œé‡ç»„æŠ¥æ–‡æ®µ HTTP é˜Ÿæ”¶åˆ°çš„è¯·æ±‚è¿›è¡Œå¤„ç† URI å’Œ URL URIï¼ˆUniform Resource Locatorï¼‰ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ URI ç”¨å­—ç¬¦ä¸²æ ‡è¯†æŸä¸€äº’è”ç½‘èµ„æºï¼Œè€Œ URL è¡¨ç¤ºèµ„æºçš„åœ°ç‚¹ï¼ˆäº’è”ç½‘ä¸Šæ‰€å¤„çš„ä½ç½®ï¼‰ã€‚å¯è§ URL æ˜¯ URI çš„å­é›†ã€‚ ç¬¬äºŒç«  ç®€å•çš„ HTTP åè®® HTTP åè®®ç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¹‹é—´çš„é€šä¿¡ é€šè¿‡è¯·æ±‚å’Œç›¸åº”çš„äº¤æ¢è¾¾æˆé€šä¿¡ï¼Œå¿…é¡»å…ˆæœ‰è¯·æ±‚æ‰æœ‰å“åº” è¯·æ±‚æŠ¥æ–‡ è¯·æ±‚æ–¹æ³• è¯·æ±‚ URI åè®®ç‰ˆæœ¬ å¯é€‰çš„è¯·æ±‚é¦–éƒ¨å­—æ®µ å†…å®¹å®ä½“ å“åº”æŠ¥æ–‡ åè®®ç‰ˆæœ¬ çŠ¶æ€ç ï¼ˆç”¨ä»¥è§£é‡ŠçŠ¶æ€ç çš„åŸå› çŸ­è¯­ï¼‰ å¯é€‰çš„å“åº”é¦–éƒ¨å­—æ®µ å®ä½“ä¸»ä½“ HTTP æ˜¯ä¸ä¿å­˜çŠ¶æ€çš„åè®® HTTP æ˜¯æ— çŠ¶æ€åè®®ï¼Œä¸ä¿ç•™ä¹‹å‰ä¸€åˆ‡çš„è¯·æ±‚æˆ–å“åº”æŠ¥æ–‡çš„ä¿¡æ¯ ä¸ºäº†å®ç°æœŸæœ›çš„ä¿æŒçŠ¶æ€åŠŸèƒ½ï¼Œå¼•å…¥ Cookie æŠ€æœ¯ è¯·æ±‚ URI å®šä½èµ„æº1234GET http:hackr.jp&#x2F;index.html HTTP&#x2F;1.1GET &#x2F;index.html HTTP&#x2F;1.1Host: hackr.jp ä¸æ˜¯è¯·æ±‚å…·ä½“èµ„æºï¼Œè€Œæ˜¯é’ˆå¯¹æœåŠ¡å™¨ç«¯æœ¬èº«çš„è¯·æ±‚ * ä»£æ›¿ URI 1OPTIONS * HTTP&#x2F;1.1 HTTP æ–¹æ³• GETï¼šè·å–èµ„æº è¯·æ±‚è®¿é—®å·²è¢« URI è¯†åˆ«çš„èµ„æºï¼Œèµ„æºç»è¿‡æœåŠ¡å™¨è§£æåè¿”å› POSTï¼šä¼ è¾“å®ä½“ä¸»ä½“ PUTï¼šä¼ è¾“æ–‡ä»¶ è¯·æ±‚æŠ¥æ–‡ä¸»ä½“ä¸­åŒ…å«æ–‡ä»¶å†…å®¹ï¼Œä¿å­˜åˆ°è¯·æ±‚ URI æŒ‡å®šçš„ä½ç½® PUT æ–¹æ³•è‡ªèº«ä¸å¸¦éªŒè¯æœºåˆ¶ï¼Œä»»ä½•äººéƒ½å¯ä»¥ä¸Šä¼ ï¼Œä¸ºäº†å®‰å…¨ä¸€èˆ¬éƒ½ä¸ç”¨ HEADï¼šè·å¾—æŠ¥æ–‡é¦–éƒ¨ ç±»ä¼¼ GETï¼Œä¸è¿”å›æŠ¥æ–‡ä¸»ä½“ï¼Œç”¨äºç¡®è®¤ URI çš„æœ‰æ•ˆæ€§åŠèµ„æºæ›´æ–°çš„æ—¥æœŸ DELETEï¼šåˆ é™¤æ–‡ä»¶ æŒ‰è¯·æ±‚ URI åˆ é™¤æŒ‡å®šçš„èµ„æº ä¸å¸¦éªŒè¯æœºåˆ¶ OPTIONSï¼ˆ1.1ï¼‰ï¼šè¯¢é—®æ”¯æŒçš„æ–¹æ³• æŸ¥è¯¢é’ˆå¯¹è¯·æ±‚ URI æŒ‡å®šçš„èµ„æºæ”¯æŒçš„æ–¹æ³• TRACEï¼ˆ1.1ï¼‰ï¼šè¿½è¸ªè·¯å¾„ è®© Web æœåŠ¡å‰ç«¯å°†ä¹‹å‰çš„è¯·æ±‚é€šä¿¡ç¯å›ç»™å®¢æˆ·ç«¯ ç¡®è®¤è¯·æ±‚è¿æ¥è¿‡ç¨‹ä¸­å‘ç”Ÿçš„ä¸€ç³»åˆ—æ“ä½œ å®¹æ˜“å¼•å‘ XSTï¼ˆCross-Site Tracingï¼Œè·¨ç«™è¿½è¸ªï¼‰æ”»å‡»ï¼Œä¸å¸¸ç”¨ CONNECTï¼ˆ1.1ï¼‰ï¼šè¦æ±‚ç”¨éš§é“åè®®è¿æ¥ä»£ç† SSLï¼ˆSecure Sockets Layerï¼Œå®‰å…¨å¥—é˜¶å±‚ï¼‰ TLSï¼ˆTransport Layer Securityï¼Œä¼ è¾“å±‚å®‰å…¨ï¼‰ TCP é€šä¿¡ï¼Œä½¿ç”¨ä»¥ä¸Šä¸¤ä¸ªåè®®åŠ å¯† æŒä¹…è¿æ¥èŠ‚çœé€šä¿¡é‡HTTP/1.0 æ¯è¿›è¡Œä¸€æ¬¡ HTTP é€šä¿¡å°±è¦æ–­å¼€ä¸€æ¬¡ TCP è¿æ¥ï¼›ä¸€ä¸ªç½‘é¡µåŒ…å«å¾ˆå¤šèµ„æºï¼ŒTCP è¿æ¥å»ºç«‹å’Œæ–­å¼€ä¼šå¢åŠ é€šä¿¡é‡çš„å¼€é”€ keep-aliveHTTP/1.1 ä¸­ï¼Œåªè¦ä»»æ„ä¸€ç«¯æ²¡æœ‰æ˜ç¡®æå‡ºæ–­å¼€è¿æ¥ï¼Œå°±ä¿æŒ TCP è¿æ¥çŠ¶æ€ ç®¡çº¿åŒ–ä»å‰å‘é€è¯·æ±‚åéœ€ç­‰å¾…å¹¶æ”¶åˆ°å“åº”æ‰èƒ½å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ ç®¡çº¿åŒ–æŠ€æœ¯å‡ºç°åï¼Œä¸ç”¨ç­‰å¾…å“åº”å°±å¯ä»¥ç›´æ¥å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ï¼Œå³èƒ½åšåˆ°åŒæ—¶å¹¶è¡Œå‘é€å¤šä¸ªè¯·æ±‚ Cookieé€šè¿‡åœ¨è¯·æ±‚å’Œå“åº”æŠ¥æ–‡ä¸­å†™å…¥ Cookie ä¿¡æ¯æ¥æ§åˆ¶å®¢æˆ·ç«¯çš„çŠ¶æ€ Cookie ä¼šæ ¹æ®ä»æœåŠ¡å™¨ç«¯å‘é€ç«¯å“åº”æŠ¥æ–‡å†…çš„ä¸€ä¸ªå«åš Set-Cookie çš„é¦–éƒ¨å­—æ®µä¿¡æ¯ï¼Œé€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜ Cookieã€‚å½“ä¸‹æ¬¡å®¢æˆ·ç«¯å†å¾€è¯¥æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨åœ¨è¯·æ±‚æŠ¥æ–‡ä¸­åŠ å…¥ Cookie å€¼åå‘é€å‡ºå» ç¬¬ä¸‰ç«  HTTP æŠ¥æ–‡å†…çš„ HTTP ä¿¡æ¯HTTP æŠ¥æ–‡æœ¬èº«æ˜¯ç”±å¤šè¡Œæ•°æ®æ„æˆçš„å­—ç¬¦ä¸²æ–‡æœ¬ è¯·æ±‚æŠ¥æ–‡ å“åº”æŠ¥æ–‡ è¯·æ±‚è¡Œ çŠ¶æ€è¡Œ æŠ¥ è¯·æ±‚é¦–éƒ¨å­—æ®µ å“åº”é¦–éƒ¨å­—æ®µ æ–‡ é€šç”¨é¦–éƒ¨å­—æ®µ é€šç”¨é¦–éƒ¨å­—æ®µ å®ä½“é¦–éƒ¨å­—æ®µ å®ä½“é¦–éƒ¨å­—æ®µ é¦– å…¶ä»– å…¶ä»– éƒ¨ ï¼ˆç©ºè¡Œï¼‰ ï¼ˆç©ºè¡Œï¼‰ æŠ¥æ–‡ä¸»ä½“ æŠ¥æ–‡ä¸»ä½“ æŠ¥æ–‡ä¸»ä½“å’Œå®ä½“ä¸»ä½“çš„å·®å¼‚ æŠ¥æ–‡ï¼ˆmessageï¼‰ï¼šæ˜¯ HTTP é€šä¿¡ä¸­çš„åŸºæœ¬å•ä½ï¼Œç”± 8 ä½ç»„å­—èŠ‚æµç»„æˆï¼Œé€šè¿‡ HTTP é€šä¿¡ä¼ è¾“ å®ä½“ï¼ˆenentityï¼‰ï¼šä½œä¸ºè¯·æ±‚æˆ–å“åº”çš„æœ‰æ•ˆè½½è·æ•°æ®ï¼ˆè¡¥å……é¡¹ï¼‰è¢«ä¼ è¾“ï¼Œå†…å®¹ç”±å®ä½“é¦–éƒ¨å’Œå®ä½“ä¸»ä½“ç»„æˆ å®ä½“é¦–éƒ¨æ˜¯æŠ¥æ–‡é¦–éƒ¨çš„ä¸€éƒ¨åˆ†ï¼ˆçœ‹ä¸Šé¢çš„è¡¨æ ¼ï¼‰ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå®ä½“ä¸»ä½“ç­‰äºæŠ¥æ–‡ä¸»ä½“ã€‚ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†æå‡ä¼ è¾“é€Ÿç‡ï¼Œä¼šå¯¹æŠ¥æ–‡ä¸»ä½“è¿›è¡Œç¼–ç ï¼Œè¿™æ ·æŠ¥æ–‡ä¸»ä½“å°±å’Œå®ä½“ä¸»ä½“ä¸åŒäº†ã€‚ å†…å®¹ç¼–ç ï¼ˆå‹ç¼©ä¼ è¾“ï¼‰ å†…å®¹ç¼–ç æŒ‡æ˜åº”ç”¨åœ¨å®ä½“å†…å®¹ä¸Šçš„ç¼–ç æ ¼å¼ã€‚å®¢æˆ·ç«¯æ¥æ”¶å¹¶è´Ÿè´£è§£ç ã€‚ å¸¸ç”¨çš„å†…å®¹ç¼–ç  gzipï¼ˆGNU zipï¼‰ compressï¼ˆUNIX ç³»ç»Ÿçš„æ ‡å‡†å‹ç¼©ï¼‰ deflateï¼ˆzlibï¼‰ identityï¼ˆä¸è¿›è¡Œç¼–ç ï¼‰ åˆ†å—ä¼ è¾“ç¼–ç åœ¨ HTTP é€šä¿¡è¿‡ç¨‹ä¸­ï¼Œè¯·æ±‚çš„ç¼–ç å®ä½“èµ„æºå°šæœªå…¨éƒ¨ä¼ è¾“å®Œæˆä¹‹å‰ï¼Œæµè§ˆå™¨æ— æ³•æ˜¾ç¤ºè¯·æ±‚é¡µé¢ã€‚ é€šè¿‡æŠŠæ•°æ®åˆ†å‰²æˆå¤šå—ï¼Œèƒ½å¤Ÿè®©æµè§ˆå™¨é€æ­¥æ˜¾ç¤ºé¡µé¢ã€‚ è¿™ç§æŠŠå®ä½“ä¸»ä½“åˆ†å—çš„åŠŸèƒ½ç§°ä¸ºåˆ†å—ä¼ è¾“ç¼–ç ã€‚ å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆï¼ˆå‘é€å¤šç§æ•°æ®ï¼‰ multipart/form-dataï¼šWebè¡¨å•æ–‡ä»¶ä¸Šä¼  multipart/byterangesï¼šçŠ¶æ€ç  206ï¼Œå“åº”æŠ¥æ–‡åŒ…å«å¤šä¸ªèŒƒå›´çš„å†…å®¹ ä½¿ç”¨å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆæ—¶ï¼Œéœ€è¦åœ¨é¦–éƒ¨å­—æ®µåŠ ä¸Š Content-type ä½¿ç”¨ boundary å­—ç¬¦ä¸²æ¥åˆ’åˆ†å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆæŒ‡æ˜çš„å„ç±»å®ä½“ èŒƒå›´è¯·æ±‚ï¼ˆæ–­ç‚¹é‡ä¼ ï¼‰ ä»ä¹‹å‰ä¸‹è½½çš„ä¸­æ–­å¤„æ¢å¤ä¸‹è½½ï¼Œä»…ä¸‹è½½æŒ‡å®šçš„å®ä½“èŒƒå›´ï¼Œç§°ä¸ºèŒƒå›´è¯·æ±‚ é¦–éƒ¨å­—æ®µ Range æ¥æŒ‡å®šèµ„æºçš„ byte èŒƒå›´ é’ˆå¯¹èŒƒå›´è¯·æ±‚ï¼Œå“åº”ä¼šè¿”å›çŠ¶æ€ç ä¸º 206 çš„å“åº”æŠ¥æ–‡ å¦‚æœæ˜¯å¤šé‡èŒƒå›´çš„èŒƒå›´è¯·æ±‚ï¼Œå“åº”ä¼šåœ¨é¦–éƒ¨å­—æ®µ Content-Type æ ‡æ˜ multipart/byteranges å¦‚æœæ— æ³•å“åº”èŒƒå›´è¯·æ±‚ï¼Œä¼šè¿”å› 200 å’Œå®Œæ•´çš„å®ä½“å†…å®¹ å†…å®¹åå•†å†…å®¹åå•†æœºåˆ¶æŒ‡å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å°±å“åº”çš„èµ„æºå†…å®¹è¿›è¡Œäº¤æ¶‰ï¼Œæä¾›æœ€åˆé€‚çš„èµ„æº åŸºå‡†ï¼šè¯­è¨€ã€å­—ç¬¦é›†ã€ç¼–ç æ–¹å¼ç­‰ Accept Accept-Charset Accept-Encoding Accept-Language Content-Language å†…å®¹åå•†æŠ€æœ¯ç±»å‹ æœåŠ¡å™¨é©±åŠ¨åå•† ä»¥è¯·æ±‚çš„é¦–éƒ¨å­—æ®µä¸ºå‚è€ƒï¼Œåœ¨æœåŠ¡å™¨ç«¯è‡ªåŠ¨å¤„ç†ï¼Œä¸ä¸€å®šç­›å‡ºæœ€ä¼˜å†…å®¹ å®¢æˆ·ç«¯é©±åŠ¨åå•† ç”¨æˆ·ä»æµè§ˆå™¨æ˜¾ç¤ºçš„å¯é€‰é¡¹åˆ—è¡¨ä¸­æ‰‹åŠ¨é€‰æ‹© åˆ©ç”¨ js è„šæœ¬åœ¨ Web é¡µé¢ä¸Šè¿›è¡Œé€‰æ‹© é€æ˜åå•† ç¬¬å››ç«  è¿”å›ç»“æœçš„ HTTP çŠ¶æ€ç  çŠ¶æ€ç çš„æŒ‡è´£æ˜¯å½“å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘é€è¯·æ±‚æ—¶ï¼Œæè¿°è¿”å›çš„è¯·æ±‚ç»“æœ ç±»åˆ« åŸå› çŸ­è¯­ 1xx Informational æ¥æ”¶çš„è¯·æ±‚æ­£åœ¨å¤„ç† 2xx Success è¯·æ±‚æ­£å¸¸å¤„ç†å®Œæ¯• 3xx Redirection éœ€è¦è¿›è¡Œé™„åŠ æ“ä½œä»¥å®Œæˆè¯·æ±‚ 4xx Client Error æœåŠ¡å™¨æ— æ³•å¤„ç†è¯·æ±‚ 5xx Server Error æœåŠ¡å™¨å¤„ç†è¯·æ±‚å‡ºé”™ 2xx æˆåŠŸ 200 OK 204 No Content 206 Partial Content 3xx é‡å®šå‘ 301 Moved Permanently æ°¸ä¹…æ€§é‡å®šå‘ï¼Œå»ºè®®ç”¨æˆ·ä¿®æ”¹ä¹¦ç­¾ 302 Found ä¸´æ—¶æ€§é‡å®šå‘ï¼Œå¸Œæœ›ç”¨æˆ·ï¼ˆæœ¬æ¬¡ï¼‰èƒ½ä½¿ç”¨æ–°çš„ URI è®¿é—® 303 See Other è¯·æ±‚å¯¹åº”çš„èµ„æºå­˜åœ¨å¦ä¸€ä¸ª URIï¼Œä¸”æ˜ç¡®ç”¨ GET è®¿é—® 304 Not Modified å®¢æˆ·ç«¯å‘é€é™„å¸¦æ¡ä»¶çš„è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ç«¯å…è®¸è¯·æ±‚è®¿é—®èµ„æº If-Match If-Modified-Since If-None-Match If-Range If-Unmodified-Since 307 Temporary Redirect ä¸´æ—¶é‡å®šå‘ 4xx å®¢æˆ·ç«¯é”™è¯¯ 400 Bad Request æŠ¥æ–‡ä¸­å­˜åœ¨è¯­æ³•é”™è¯¯ 401 Unauthorized å‘é€çš„è¯·æ±‚éœ€è¦æœ‰é€šè¿‡ HTTP è®¤è¯çš„è®¤è¯ä¿¡æ¯ 403 Forbidden è¯¥çŠ¶æ€ç è¡¨æ˜å¯¹è¯·æ±‚èµ„æºçš„è®¿é—®å‘—æœåŠ¡å™¨æ‹’ç»äº† 404 Not Found æœåŠ¡å™¨ä¸Šæ— æ³•æ‰¾åˆ°è¯·æ±‚çš„èµ„æº 5xx æœåŠ¡å™¨é”™è¯¯ 500 Internal Server Error æœåŠ¡å™¨ç«¯åœ¨æ‰§è¡Œè¯·æ±‚æ—¶å‘ç”Ÿäº†é”™è¯¯ 503 Service Unavailable è¶…è´Ÿè½½æˆ–åœæœºç»´æŠ¤ï¼Œæ— æ³•å¤„ç†è¯·æ±‚ ç¬¬äº”ç«  ä¸ HTTP åä½œçš„ Web æœåŠ¡å™¨ é€šä¿¡æ•°æ®è½¬å‘ç¨‹åº ä»£ç† è½¬å‘åŠŸèƒ½çš„åº”ç”¨ç¨‹åºï¼Œä¸æ”¹å˜ URI å¥½å¤„ åˆ©ç”¨ç¼“å­˜æŠ€æœ¯å‡å°‘ç½‘ç»œå¸¦å®½çš„æµé‡ ç»„ç»‡å†…éƒ¨é’ˆå¯¹ç‰¹å®šç½‘ç«™çš„è®¿é—®æ§åˆ¶ è·å–è®¿é—®æ—¥å¿— åˆ†ç±» ç¼“å­˜ä»£ç† é€æ˜ä»£ç†ï¼šä¸å¯¹æŠ¥æ–‡åšä»»ä½•åŠ å·¥ ç½‘å…³ è½¬å‘å…¶ä»–æœåŠ¡å™¨é€šä¿¡æ•°æ®çš„æœåŠ¡å™¨ å¥½å¤„ åˆ©ç”¨ç½‘å…³å¯ä»¥ç”± HTTP è¯·æ±‚è½¬åŒ–ä¸ºå…¶ä»–åè®®é€šä¿¡ éš§é“ æŒ‰è¦æ±‚å»ºç«‹ä¸€æ¡ä¸å…¶ä»–æœåŠ¡å™¨çš„é€šä¿¡çº¿è·¯ï¼Œä½¿ç”¨ SSL ç­‰åŠ å¯†æ‰‹æ®µè¿›è¡Œé€šä¿¡ ç›®çš„ ç¡®ä¿é€šä¿¡å®‰å…¨ éš§é“æœ¬èº«ä¸å»è§£æ HTTP è¯·æ±‚ ç¼“å­˜ ç¼“å­˜æ˜¯æŒ‡ä»£ç†æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯æœ¬åœ°ç£ç›˜å†…ä¿å­˜çš„èµ„æºå‰¯æœ¬ åˆ©ç”¨ç¼“å­˜å¯å‡å°‘å¯¹æºæœåŠ¡å™¨çš„è®¿é—®ï¼ŒèŠ‚çœäº†é€šä¿¡æµé‡å’Œé€šä¿¡æ—¶é—´ ç¼“å­˜è¿‡æœŸåï¼Œä¼šå‘æºæœåŠ¡å™¨ç¡®è®¤èµ„æºçš„æœ‰æ•ˆæ€§ è‹¥ç¼“å­˜å¤±æ•ˆï¼Œæµè§ˆå™¨ä¼šå†æ¬¡è¯·æ±‚æ–°èµ„æº ç¬¬å…­ç«  HTTP é¦–éƒ¨æŠ¥æ–‡é¦–éƒ¨HTTP è¯·æ±‚æŠ¥æ–‡ æŠ¥æ–‡é¦–éƒ¨ è¯·æ±‚è¡Œï¼šæ–¹æ³•ã€URIã€HTTP ç‰ˆæœ¬ HTTP é¦–éƒ¨å­—æ®µ è¯·æ±‚é¦–éƒ¨å­—æ®µ é€šç”¨é¦–éƒ¨å­—æ®µ å®ä½“é¦–éƒ¨å­—æ®µ å…¶ä»– ç©ºè¡Œ æŠ¥æ–‡ä¸»ä½“ HTTP å“åº”æŠ¥æ–‡ æŠ¥æ–‡é¦–éƒ¨ çŠ¶æ€è¡Œï¼šHTTP ç‰ˆæœ¬ã€çŠ¶æ€ç  HTTP é¦–éƒ¨å­—æ®µ å“åº”é¦–éƒ¨å­—æ®µ é€šç”¨é¦–éƒ¨å­—æ®µ å®ä½“é¦–éƒ¨å­—æ®µ å…¶ä»– ç©ºè¡Œ æŠ¥æ–‡ä¸»ä½“ HTTP é¦–éƒ¨å­—æ®µ é¦–éƒ¨å­—æ®µåï¼šå­—æ®µå€¼ 1Content-Type: text&#x2F;html åˆ†ç±» é€šç”¨é¦–éƒ¨å­—æ®µ è¯·æ±‚é¦–éƒ¨å­—æ®µ å“åº”é¦–éƒ¨å­—æ®µ å®ä½“é¦–éƒ¨å­—æ®µ é HTTP/1.1 é¦–éƒ¨å­—æ®µ Cookie Set-Cookie Content-Disposition é€šç”¨é¦–éƒ¨å­—æ®µ Cache-Controlï¼šæ§åˆ¶ç¼“å­˜è¡Œä¸º Connectionï¼šæ§åˆ¶ä¸å†è½¬å‘ç»™ä»£ç†çš„é¦–éƒ¨å­—æ®µï¼›ç®¡ç†æŒä¹…è¿æ¥ Dateï¼šåˆ›å»º HTTP æŠ¥æ–‡çš„æ—¥æœŸå’Œæ—¶é—´ Pragmaï¼šå‘åå…¼å®¹ï¼›è¦æ±‚æ‰€æœ‰çš„ä¸­é—´æœåŠ¡å™¨ä¸è¿”å›ç¼“å­˜çš„èµ„æº Trailerï¼šæŠ¥æ–‡ä¸»ä½“åè®°å½•äº†å“ªäº›é¦–éƒ¨å­—æ®µ Transfer-Encodingï¼šä¼ è¾“æ—¶çš„ç¼–ç æ–¹å¼ Upgradeï¼šæ£€æµ‹ HTTP åè®®åŠå…¶ä»–åè®®æ˜¯å¦å¯ä½¿ç”¨æ›´é«˜çš„ç‰ˆæœ¬è¿›è¡Œé€šä¿¡ Viaï¼šè¿½è¸ªä¼ è¾“è·¯å¾„ Warningï¼šç¼“å­˜ç›¸å…³é—®é¢˜çš„è­¦å‘Š è¯·æ±‚é¦–éƒ¨å­—æ®µ Acceptï¼šç”¨æˆ·ä»£ç†æ”¯æŒçš„åª’ä½“ç±»å‹åŠä¼˜å…ˆçº§ Accept-Charsetï¼šç”¨æˆ·ä»£ç†æ”¯æŒçš„å­—ç¬¦é›†åŠä¼˜å…ˆçº§ Accept-Encodingï¼šç”¨æˆ·ä»£ç†æ”¯æŒçš„å†…å®¹ç¼–ç åŠä¼˜å…ˆçº§ gzip compress deflate identity Accept-Languageï¼šç”¨æˆ·ä»£ç†æ”¯æŒçš„è‡ªç„¶è¯­è¨€é›†åŠä¼˜å…ˆçº§ Authorizationï¼š Expectï¼šæœŸæœ›å‡ºç°çš„æŸç§ç‰¹å®šè¡Œä¸º Fromï¼šç”µå­é‚®ä»¶åœ°å€ Hostï¼šè¯·æ±‚çš„èµ„æºæ‰€å¤„çš„äº’è”ç½‘ä¸»æœºåå’Œç«¯å£å·ï¼›å¦‚æœæœªè®¾ç½®ä¸»æœºåå‘é€ç©º If-xxxï¼šæ¡ä»¶è¯·æ±‚ï¼Œåˆ¤æ–­ä¸ºçœŸæ‰æ‰§è¡Œ IF-Matchï¼šå­—æ®µå€¼è·Ÿ ETag å€¼åŒ¹é…ä¸€è‡´æ—¶æ‰æ¥å—è¯·æ±‚ If-Modified-Sinceï¼šå­—æ®µå€¼ï¼ˆæ—¥æœŸï¼‰ä¹‹åèµ„æºæ›´æ–°ï¼Œæ¥å—è¯·æ±‚ If-None-Matchï¼šå­—æ®µå€¼è·Ÿ ETag å€¼ä¸ä¸€è‡´æ—¶æ‰æ¥å—è¯·æ±‚ If-Rangeï¼šå­—æ®µå€¼ï¼ˆETagæˆ–æ—¶é—´ï¼‰å’Œè¯·æ±‚èµ„æºï¼ˆETag å€¼æˆ–æ—¶é—´ï¼‰ç›¸ä¸€è‡´æ—¶ï¼Œä½œä¸ºèŒƒå›´è¯·æ±‚å¤„ç†ï¼Œå¦åˆ™è¿”å›å…¨ä½“èµ„æº å“åº”å­—æ®µé¦–éƒ¨ Accept-Ranges Age ETagï¼šå®ä½“èµ„æºçš„å”¯ä¸€æ ‡è¯†ï¼Œä¸­è‹±æ–‡æ˜¯åŒä¸€ä¸ª å¼º ETagï¼šç»†å¾®å˜åŒ–éƒ½ä¼šæ”¹å˜ å¼± ETagï¼šåªç”¨äºæç¤ºèµ„æºæ˜¯å¦ç›¸åŒï¼Œèµ„æºå‘ç”Ÿæ ¹æœ¬æ”¹å˜äº§ç”Ÿå·®å¼‚æ—¶æ‰æ”¹å˜ ETag å€¼ Location Proxy-Authenticate Retry-After Server Vary å®ä½“é¦–éƒ¨å­—æ®µ Allow Content-Encoding Content-Language Content-Length Content-Location Content-MD5 Content-Range Content-Type Expiresï¼šèµ„æºå¤±æ•ˆçš„æ—¥æœŸ Last-Modifiedï¼šèµ„æºæœ€ç»ˆä¿®æ”¹çš„æ—¶é—´ ä¸º CookieæœåŠ¡çš„é¦–éƒ¨å­—æ®µ é¦–éƒ¨å­—æ®µå è¯´æ˜ é¦–éƒ¨ç±»å‹ Set-Cookie å¼€å§‹çŠ¶æ€ç®¡ç†æ‰€ä½¿ç”¨çš„ Cookie ä¿¡æ¯ å“åº”é¦–éƒ¨å­—æ®µ COokie æœåŠ¡å™¨æ¥æ”¶åˆ°çš„ Cookie ä¿¡æ¯ è¯·æ±‚é¦–éƒ¨å­—æ®µ ç¬¬ä¸ƒç«  ç¡®ä¿ Web å®‰å…¨çš„ HTTPSHTTP çš„ç¼ºç‚¹ æ˜æ–‡ï¼Œå†…å®¹ä¼šè¢«çªƒå¬ ä¸éªŒè¯èº«ä»½ï¼Œä¼šè¢«ä¼ªè£… æ— æ³•éªŒè¯å®Œæ•´æ€§ï¼Œå¯èƒ½è¢«ç¯¡æ”¹ æœªåŠ å¯†åè®®éƒ½ä¼šå­˜åœ¨è¿™ç±»é—®é¢˜ æ˜æ–‡ TCP/IP æ˜¯å¯èƒ½è¢«çªƒå¬çš„ç½‘ç»œ æŠ“åŒ…å·¥å…· åŠ å¯†å¤„ç†é˜²æ­¢è¢«çªƒå¬ é€šä¿¡çš„åŠ å¯† SSL TLS å†…å®¹çš„åŠ å¯† éªŒè¯èº«ä»½ ä»»ä½•äººéƒ½å¯ä»¥å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚éƒ½ä¼šè¿”å›å“åº” æŸ¥æ˜å¯¹æ‰‹çš„è¯ä¹¦ï¼šSSL å®Œæ•´æ€§ é­é‡ç¯¡æ”¹ï¼ŒMITM ä¸­é—´äººæ”»å‡» é˜²æ­¢ç¯¡æ”¹ MD5 å’Œ SHA-1ç­‰æ•£åˆ—å€¼æ ¡éªŒ æ•°å­—ç­¾å HTTPS = HTTP + åŠ å¯† + è®¤è¯ + å®Œæ•´æ€§ä¿æŠ¤ å…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯† å…¬é’¥åŠ å¯†ä¸å…±äº«å¯†é’¥åŠ å¯†ç›¸æ¯”ï¼Œå¤„ç†é€Ÿåº¦è¦æ…¢ HTTPS é‡‡ç”¨æ··åˆåŠ å¯†æœºåˆ¶ ä½¿ç”¨å…¬é’¥åŠ å¯†æ–¹å¼äº¤æ¢å…±äº«å¯†é’¥ ä¹‹åçš„é€šä¿¡ä½¿ç”¨å…±äº«å¯†é’¥åŠ å¯† è¯ä¹¦è¯æ˜å…¬é’¥çš„æœ‰æ•ˆæ€§ ç¬¬å…«ç«  ç¡®è®¤è®¿é—®ç”¨æˆ·èº«ä»½çš„è®¤è¯BASIC è®¤è¯ï¼ˆåŸºæœ¬è®¤è¯ï¼‰ è¯·æ±‚çš„èµ„æºéœ€è¦ BASIC è®¤è¯æ—¶ï¼ŒæœåŠ¡å™¨ä¼šéšçŠ¶æ€ç  401 Authorization Reuiredï¼Œè¿”å›å¸¦ WWW-Authenticate é¦–éƒ¨å­—æ®µçš„å“åº”ã€‚è¯¥å­—æ®µå†…åŒ…å«è®¤è¯çš„æ–¹å¼ï¼ˆBASICï¼‰åŠ Request-URI å®‰å…¨åŸŸå­—ç¬¦ä¸²ï¼ˆrealmï¼‰ æ¥æ”¶åˆ°çŠ¶æ€ç  401 çš„å®¢æˆ·ç«¯ï¼Œéœ€è¦å°†ç”¨æˆ· ID åŠå¯†ç å‘é€ç»™æœåŠ¡å™¨ã€‚å‘é€çš„å­—ç¬¦ä¸²å†…å®¹æ˜¯ç”±ç”¨æˆ· ID å’Œå¯†ç æ„æˆï¼Œä¸¤è€…ä¸­é—´ä»¥å†’å·ï¼ˆï¼šï¼‰è¿æ¥åï¼Œå†ç»è¿‡ Base64 ç¼–ç å¤„ç†ã€‚ æ”¶åˆ°åŒ…å«é¦–éƒ¨å­—æ®µ Authorization è¯·æ±‚çš„æœåŠ¡å™¨ï¼Œä¼šå¯¹è®¤è¯ä¿¡æ¯çš„æ­£ç¡®æ€§è¿›è¡ŒéªŒè¯ã€‚å¦‚éªŒè¯é€šè¿‡ï¼Œåˆ™è¿”å›ä¸€æ¡åŒ…å« Request-URI èµ„æºçš„å“åº”ã€‚ DIGEST è®¤è¯ï¼ˆæ‘˜è¦è®¤è¯ï¼‰ è¯·æ±‚çš„èµ„æºéœ€è¦ DIGEST è®¤è¯æ—¶ï¼ŒæœåŠ¡å™¨ä¼šéšçŠ¶æ€ç  401 Authorization Reuiredï¼Œè¿”å›å¸¦ WWW-Authenticate é¦–éƒ¨å­—æ®µçš„å“åº”ã€‚è¯¥å­—æ®µå†…åŒ…å«è´¨é—®å“åº”æ–¹å¼è®¤è¯æ‰€éœ€çš„ä¸´æ—¶è´¨è¯¢ç ï¼ˆéšæœºæ•°ï¼Œnonceï¼‰ æ¥æ”¶åˆ°çŠ¶æ€ç  401 çš„å®¢æˆ·ç«¯ï¼Œè¿”å›çš„å“åº”ä¸­åŒ…å« DIGEST è®¤è¯å¿…é¡»çš„é¦–éƒ¨å­—æ®µ Authorization ä¿¡æ¯ï¼ŒåŒ…æ‹¬ usernameã€realmã€nonceã€uriã€response å­—æ®µã€‚ realmã€nonce æ˜¯ä»æœåŠ¡ç«¯å¾—åˆ° username æ˜¯ realm é™å®šèŒƒå›´å†…å¯è¿›è¡Œè®¤è¯ç­‰ç”¨æˆ·å uri å³ Request-URI response å­˜æ”¾ç»è¿‡ MD5 è¿ç®—åçš„å¯†ç å­—ç¬¦ä¸²ï¼Œå½¢æˆå“åº”ç  æ”¶åˆ°åŒ…å«é¦–éƒ¨å­—æ®µ Authorization è¯·æ±‚çš„æœåŠ¡å™¨ï¼Œä¼šå¯¹è®¤è¯ä¿¡æ¯çš„æ­£ç¡®æ€§è¿›è¡ŒéªŒè¯ã€‚å¦‚éªŒè¯é€šè¿‡ï¼Œåˆ™è¿”å›ä¸€æ¡åŒ…å« Request-URI èµ„æºçš„å“åº”ã€‚ SSL å®¢æˆ·ç«¯è®¤è¯å®¢æˆ·ç«¯äº‹å…ˆå®‰è£…è¯ä¹¦ æ¥æ”¶åˆ°éœ€è¦è®¤è¯èµ„æºçš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¼šå‘é€ Certificate Request æŠ¥æ–‡ï¼Œè¦æ±‚å®¢æˆ·ç«¯æä¾›å®¢æˆ·ç«¯è¯ä¹¦ã€‚ ç”¨æˆ·é€‰æ‹©å°†å‘é€çš„å®¢æˆ·ç«¯è¯ä¹¦åï¼Œå®¢æˆ·ç«¯ä¼šæŠŠå®¢æˆ·ç«¯è¯ä¹¦ä¿¡æ¯ä»¥ Client Certificate æŠ¥æ–‡æ–¹å¼å‘é€ç»™æœåŠ¡å™¨ã€‚ æœåŠ¡å™¨éªŒè¯å®¢æˆ·ç«¯è¯ä¹¦ï¼ŒéªŒè¯é€šè¿‡åæ–¹å¯é¢†å–è¯ä¹¦å†…å®¢æˆ·ç«¯çš„å…¬å¼€å¯†é’¥ï¼Œç„¶åå¼€å§‹ HTTPS åŠ å¯†é€šä¿¡ã€‚ åŒå› ç´ è®¤è¯ è¯ä¹¦è®¤è¯ -&gt; è®¤è¯å®¢æˆ·ç«¯è®¡ç®—æœº è¡¨å•è®¤è¯ -&gt; è®¤è¯ç”¨æˆ·æœ¬äººçš„è¡Œä¸º åŸºäºè¡¨å•è®¤è¯ ä¸€èˆ¬ç”¨ Cookie æ¥ç®¡ç† Session é€šè¿‡æœåŠ¡å™¨ç«¯çš„ web åº”ç”¨ï¼Œå°†å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„ç”¨æˆ· ID å’Œå¯†ç ä¸ä¹‹å‰ç™»å½•è¿‡çš„ä¿¡æ¯åšåŒ¹é…æ¥è¿›è¡Œè®¤è¯çš„ å®¢æˆ·ç«¯æŠŠç”¨æˆ· ID å’Œå¯†ç ç­‰ç™»å½•ä¿¡æ¯æ”¾å…¥æŠ¥æ–‡çš„å®ä½“éƒ¨åˆ†ï¼Œé€šå¸¸æ˜¯ä»¥ POST æ–¹æ³•æŠŠè¯·æ±‚å‘é€ç»™æœåŠ¡å™¨ã€‚è€Œè¿™æ—¶ï¼Œä¼šä½¿ç”¨ HTTPS é€šä¿¡æ¥è¿›è¡Œ HTML è¡¨å•ç”»é¢çš„æ˜¾ç¤ºå’Œç”¨æˆ·è¾“å…¥æ•°æ®çš„å‘é€ã€‚ æœåŠ¡å™¨ä¼šå‘æ”¾ç”¨ä»¥è¯†åˆ«ç”¨æˆ·çš„ Session IDã€‚é€šè¿‡éªŒè¯ä»å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„ç™»å½•ä¿¡æ¯è¿›è¡Œèº«ä»½è®¤è¯ï¼Œç„¶åæŠŠç”¨æˆ·çš„è®¤è¯çŠ¶æ€ä¸ Session ID ç»‘å®šåè®°å½•åœ¨æœåŠ¡å™¨ç«¯ã€‚å‘å®¢æˆ·ç«¯è¿”å›å“åº”æ—¶ï¼Œä¼šåœ¨é¦–éƒ¨å­—æ®µ Set-Cookie å†…å†™å…¥ Session IDã€‚ å®¢æˆ·ç«¯æ¥æ”¶åˆ°ä»æœåŠ¡ç«¯å‘æ¥çš„ Session ID åï¼Œä¼šå°†å…¶ä½œä¸º Cookie ä¿å­˜åœ¨æœ¬åœ°ã€‚ä¸‹æ¬¡å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å‘é€ Cookieï¼Œæ‰€ä»¥ Session ID ä¹Ÿéšä¹‹å‘é€åˆ°æœåŠ¡å™¨ã€‚æœåŠ¡å™¨ç«¯å¯é€šè¿‡éªŒè¯æ¥æ”¶åˆ°çš„ Session ID è¯†åˆ«ç”¨æˆ·å’Œå…¶è®¤è¯çŠ¶æ€ã€‚ ç¬¬ä¹ç«  åŸºäº HTTP çš„åŠŸèƒ½è¿½åŠ åè®®HTTP çš„ç“¶é¢ˆ ä¸€æ¡è¿æ¥ä¸Šåªå¯å‘é€ä¸€ä¸ªè¯·æ±‚ è¯·æ±‚åªèƒ½ä»å®¢æˆ·ç«¯å¼€å§‹ï¼Œå®¢æˆ·ç«¯ä¸å¯ä»¥æ¥æ”¶å“åº”æ„å¤–çš„æŒ‡ä»¤ è¯·æ±‚/å“åº”é¦–éƒ¨æœªç»å‹ç¼©å°±å‘é€ã€‚é¦–éƒ¨ä¿¡æ¯è¶Šå¤šå»¶è¿Ÿè¶Šå¤§ å‘é€å†—é•¿çš„é¦–éƒ¨ã€‚æ¯æ¬¡äº’ç›¸å‘é€ç›¸åŒçš„é¦–éƒ¨é€ æˆçš„æµªè´¹è¾ƒå¤šã€‚ å¯ä»»æ„é€‰æ‹©æ•°æ®å‹ç¼©æ ¼å¼ã€‚éå¼ºåˆ¶å‹ç¼©å‘é€ã€‚ Ajax Asynchronous JavaScript and XML æœ‰æ•ˆåˆ©ç”¨ JavaScript å’Œ DOM çš„æ“ä½œï¼Œè¾¾åˆ°å±€éƒ¨ Web é¡µé¢æ›¿æ¢åŠ è½½çš„å¼‚æ­¥é€šä¿¡æ‰‹æ®µ å’Œä»¥å‰çš„åŒæ­¥é€šä¿¡ç›¸æ¯”ï¼Œåªæ›´æ–°ä¸€éƒ¨åˆ†é¡µé¢ï¼Œä¼ è¾“çš„æ•°æ®é‡å‡å°‘ Ajax çš„æ ¸å¿ƒæŠ€æœ¯æ˜¯åä¸º XMLHttpRequest çš„ APIï¼Œé€šè¿‡ JavaScript çš„è°ƒç”¨å°±èƒ½å’ŒæœåŠ¡å™¨è¿›è¡Œ HTTP é€šä¿¡ Comet Comet å…ˆå°†å“åº”æŒ‚èµ·ï¼Œå½“æœåŠ¡å™¨ç«¯åæ›´æ–°å†è¿”å›ã€‚æ¨¡æ‹ŸæœåŠ¡å™¨ç«¯å‘å®¢æˆ·ç«¯æ¨é€çš„åŠŸèƒ½ã€‚ å†…å®¹å®æ—¶æ›´æ–°ï¼Œä¸ºäº†ç»´æŒè¿æ¥ä¼šæ¶ˆè€—æ›´å¤šçš„èµ„æº SPDY æ²¡æœ‰å®Œå…¨æ”¹å†™ HTTP åè®® åœ¨ TCP/IP çš„åº”ç”¨å±‚ä¸ä¼ è¾“å±‚ä¹‹é—´é€šè¿‡æ–°åŠ ä¼šè¯å±‚çš„å½¢å¼è¿ä½œ ä¸ºäº†å®‰å…¨è§„å®šä½¿ç”¨ SSL å¥½å¤„ å¤šè·¯å¤ç”¨æµ èµ‹äºˆè¯·æ±‚ä¼˜å…ˆçº§ å‹ç¼© HTTP é¦–éƒ¨ æ¨é€åŠŸèƒ½ æœåŠ¡å™¨æç¤ºåŠŸèƒ½ ç¼ºç‚¹ å•ä¸ªåŸŸåçš„é€šä¿¡å¤šè·¯æœç”¨ï¼Œä¸€ä¸ª Web ç½‘å€ä¸Šä½¿ç”¨å¤šä¸ªåŸŸåä¸‹çš„èµ„æºï¼Œæ”¹å–„æ•ˆæœæœ‰é™ WebSocket Web æµè§ˆå™¨ä¸ Web æœåŠ¡å™¨ä¹‹é—´å…¨åŒå·¥é€šä¿¡æ ‡å‡† å»ºç«‹åœ¨ HTTP åŸºç¡€ä¸Šï¼Œå‘èµ·æ–¹ä»æ˜¯å®¢æˆ·ç«¯ï¼Œä¸€æ—¦ç¡®ç«‹ WebSocket é€šä¿¡è¿æ¥ï¼Œä¸è®ºæœåŠ¡å™¨è¿˜æ˜¯å®¢æˆ·ç«¯ï¼Œä»»æ„ä¸€æ–¹å¯ä»¥ç›´æ¥å‘å¯¹æ–¹å‘é€æŠ¥æ–‡ã€‚ ç‰¹ç‚¹ æ¨é€åŠŸèƒ½ WebSocket é¦–éƒ¨ä¿¡æ¯å¾ˆå°ï¼Œå‡å°‘é€šä¿¡é‡ ä¸ºäº†å®ç° WebSocket é€šä¿¡ï¼Œåœ¨ HTTP è¿æ¥å»ºç«‹ä¹‹åï¼Œéœ€è¦å®Œæˆä¸€æ¬¡æ¡æ‰‹ã€‚ æ¡æ‰‹Â·è¯·æ±‚ HTTP çš„ Upgrade é¦–éƒ¨å­—æ®µï¼Œå‘ŠçŸ¥æœåŠ¡å™¨é€šä¿¡åè®®å‘ç”Ÿæ”¹å˜ï¼Œè¾¾åˆ°æ¡æ‰‹çš„ç›®çš„ã€‚ Sec-WebSocket-Key å­—æ®µå†…è®°å½•ç€æ¡æ‰‹è¿‡ç¨‹ä¸­å¿…ä¸å¯å°‘çš„é”®å€¼ Sec-WebSocket-Protocol å­—æ®µå†…è®°å½•ä½¿ç”¨çš„å­åè®® æ¡æ‰‹Â·å“åº” è¿”å›çŠ¶æ€ç  101 Switching Protocols Sec-WebSocket-Accept å­—æ®µå€¼æ˜¯ç”±æ¡æ‰‹è¯·æ±‚ä¸­çš„ Sec-WebSocket-Key çš„è‡ªåŠ¨å€¼ç”Ÿæˆçš„ HTTP/2.0 ç›®æ ‡æ˜¯æ”¹å–„ç”¨æˆ·åœ¨ä½¿ç”¨ Web æ—¶çš„é€Ÿåº¦ä½“éªŒ Web æœåŠ¡å™¨ç®¡ç†æ–‡ä»¶çš„ WebDAV Web-based Distributed Authoring and Versioning å¯å¯¹ Web æœåŠ¡å™¨ä¸Šçš„å†…å®¹ç›´æ¥è¿›è¡Œæ–‡ä»¶å¤åˆ¶ã€ç¼–è¾‘ç­‰æ“ä½œçš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ ç¬¬åç«  æ„å»º Web å†…å®¹çš„æŠ€æœ¯ HTMLï¼ˆHyperText Markup Languageï¼‰ CSSï¼ˆCascading Style Sheetsï¼‰ JavaScript JSONï¼ˆJavaScript Object Notationï¼‰ ç¬¬åä¸€ç«  Web çš„æ”»å‡»æŠ€æœ¯ HTTP ä¸å…·å¤‡å¿…è¦çš„å®‰å…¨åŠŸèƒ½ HTTP è¯·æ±‚å¯ä»¥åœ¨å®¢æˆ·ç«¯è‡ªç”±åœ°ä¿®æ”¹ åœ¨æŠ¥æ–‡å†…åŠ è½½æ”»å‡»ä»£ç  URL æŸ¥è¯¢å­—æ®µæˆ–è¡¨å•ã€HTTP é¦–éƒ¨ã€Cookie ç­‰é€”å¾„ é’ˆå¯¹ Web åº”ç”¨çš„æ”»å‡»æ¨¡å¼ ä»¥æœåŠ¡å™¨ä¸ºç›®æ ‡çš„ä¸»åŠ¨æ”»å‡» æŠŠæ”»å‡»ä»£ç ä¼ å…¥çš„æ”»å‡»æ¨¡å¼ ä»£è¡¨ SQL æ³¨å…¥æ”»å‡» OS å‘½ä»¤æ³¨å…¥æ”»å‡» ä»¥æœåŠ¡å™¨ä¸ºç›®æ ‡çš„è¢«åŠ¨æ”»å‡» åˆ©ç”¨åœˆå¥—ç­–ç•¥æ‰§è¡Œæ”»å‡»ä»£ç çš„æ”»å‡»æ¨¡å¼ è¯±ä½¿ç”¨æˆ·è§¦å‘å·²ç»è®¾ç½®å¥½çš„é™·é˜±ï¼Œé™·é˜±ä¼šè‡ªåŠ¨å‘é€å·²åµŒå…¥æ”»å‡»ä»£ç çš„ HTTP è¯·æ±‚ å½“ç”¨æˆ·ä¸çŸ¥ä¸è§‰ä¸­æ‹›åï¼Œç”¨æˆ·çš„æµè§ˆå™¨æˆ–é‚®ä»¶å®¢æˆ·ç«¯æ•‘æŠ¤è§¦å‘è¿™ä¸ªé™·é˜± ä¸­æ‹›åçš„ç”¨æˆ·æµè§ˆå™¨ä¼šæŠŠå«æœ‰æ”»å‡»ä»£ç çš„ HTTP è¯·æ±‚å‘é€ç»™ä½œä¸ºæ”»å‡»ç›®æ ‡çš„ Web åº”ç”¨ï¼Œè¿è¡Œæ”»å‡»ä»£ç  æ‰§è¡Œå®Œæ”»å‡»ä»£ç ï¼Œå­˜åœ¨å®‰å…¨æ¼æ´çš„ Web åº”ç”¨ä¼šæˆä¸ºæ”»å‡»è€…çš„è·³æ¿ï¼Œå¯èƒ½å¯¼è‡´ç”¨æˆ·æ‰€æŒçš„ Cookie ç­‰ä¸ªäººä¿¡æ¯è¢«çªƒå–ï¼Œç™»å½•çŠ¶æ€ä¸­çš„ç”¨æˆ·æƒé™é­æ¶æ„æ»¥ç”¨ç­‰åæœ ä»£è¡¨ XSS è·¨ç«™è„šæœ¬æ”»å‡» è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€  å› è¾“å…¥å€¼è½¬ä¹‰ä¸å®Œå…¨å¼•å‘çš„å®‰å…¨æ¼æ´ XSS è·¨ç«™è„šæœ¬æ”»å‡» åœ¨ html ä¸­æ³¨å…¥ js ä»£ç ä½¿å¾—ç”¨æˆ·åœ¨è¡¨å•ä¸­è¾“å…¥çš„è´¦æˆ·å¯†ç ä¼šå‘é€åˆ°æ”»å‡»è€…çš„ç½‘ç«™ SQL æ³¨å…¥æ”»å‡» é’ˆå¯¹æ•°æ®åº“ï¼Œä¼ å…¥éæ³•çš„ SQL è®©æœåŠ¡å™¨æ‰§è¡Œï¼Œå¯èƒ½å¯¼è‡´éæ³•æµè§ˆå’Œç¯¡æ”¹ OS å‘½ä»¤æ³¨å…¥æ”»å‡» é€šè¿‡ Web åº”ç”¨ï¼Œæ‰§è¡Œéæ³•çš„æ“ä½œç³»ç»Ÿå‘½ä»¤ HTTP é¦–éƒ¨æ³¨å…¥æ”»å‡» æ”»å‡»è€…é€šè¿‡åœ¨å“åº”é¦–éƒ¨å­—æ®µå†…æ’å…¥æ¢è¡Œï¼Œæ·»åŠ ä»»æ„å“åº”é¦–éƒ¨æˆ–ä¸»ä½“çš„ä¸€ç§æ”»å‡» æ¯”å¦‚ Cookie ä¿¡æ¯ã€é‡å®šå‘ URL ç›®å½•éå†æ”»å‡» å¯¹æœ¬æ— æ„å…¬å¼€çš„æ–‡ä»¶ç›®å½•ï¼Œé€šè¿‡éæ³•æˆªæ–­å…¶ç›®å½•è·¯å¾„åï¼Œè¾¾æˆè®¿é—®ç›®çš„ è¿œç¨‹æ–‡ä»¶åŒ…å«æ¼æ´ å½“éƒ¨åˆ†è„šæœ¬å†…å®¹éœ€è¦ä»å…¶ä»–æ–‡ä»¶è¯»å…¥æ—¶ï¼Œæ”»å‡»è€…åˆ©ç”¨æŒ‡å®šå¤–éƒ¨æœåŠ¡å™¨çš„ URL å……å½“ä»¥æ¥æ–‡ä»¶ï¼Œè®©è„šæœ¬è¯»å–ä¹‹åï¼Œå°±å¯ä»¥è¿è¡Œä»»æ„è„šæœ¬çš„ä¸€ç§æ”»å‡» å› è®¾ç½®æˆ–è®¾è®¡ä¸Šçš„ç¼ºé™·å¼•å‘çš„å®‰å…¨æ¼æ´ å¼ºåˆ¶æµè§ˆ ä¸æ­£ç¡®çš„é”™è¯¯æ¶ˆæ¯å¤„ç† å¼€æ”¾é‡å®šå‘ å› ä¼šè¯ç®¡ç†ç–å¿½å¼•å‘çš„å®‰å…¨æ¼æ´ ä¼šè¯åŠ«æŒ æ”»å‡»è€…é€šè¿‡æŸç§æ‰‹æ®µæ‹¿åˆ°ç”¨æˆ·çš„ä¼šè¯ IDï¼Œå¹¶éæ³•ä½¿ç”¨æ­¤ä¼šè¯ ID ä¼ªè£…æˆç”¨æˆ· ä¼šè¯å›ºå®šæ”»å‡» è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€  æ”»å‡»è€…é€šè¿‡è®¾ç½®å¥½çš„é™·é˜± å…¶ä»–å®‰å…¨æ¼æ´ å¯†ç ç ´è§£ ç‚¹å‡»åŠ«æŒ åˆ©ç”¨é€æ˜æŒ‰é’®è¦†ç›–åœ¨ Web é¡µé¢ä¸Šï¼Œè®©ç”¨æˆ·ç‚¹å‡»ï¼Œåˆç§°ç•Œé¢ä¼ªè£… DoS æ”»å‡» è®©è¿è¡Œä¸­çš„æœåŠ¡å‘ˆåœæ­¢çŠ¶æ€çš„æ”»å‡» åé—¨ç¨‹åº","categories":[],"tags":[{"name":"ç½‘ç»œ","slug":"ç½‘ç»œ","permalink":"http://ziiyan.github.io/tags/%E7%BD%91%E7%BB%9C/"}]},{"title":"æ’åº","slug":"æ’åº","date":"2020-03-30T05:24:43.000Z","updated":"2020-07-27T09:31:04.028Z","comments":true,"path":"2020/03/30/æ’åº/","link":"","permalink":"http://ziiyan.github.io/2020/03/30/%E6%8E%92%E5%BA%8F/","excerpt":"","text":"å¿«æ’12345678910111213141516171819202122function quickSort (arr, left = 0, right = arr.length -1) &#123; if (left &gt;= right) &#123; return &#125; let i = left; let j = right; const baseVal = arr[j]; while (i &lt; j) &#123; while (i &lt; j &amp;&amp; arr[i] &lt;= baseVal) &#123; i++; &#125; arr[j] = arr[i]; while (j &gt; i &amp;&amp; arr[j] &gt;= baseVal) &#123; j--; &#125; arr[i] = arr[j]; &#125; arr[j] = baseVal; quickSort(arr, left, j-1); quickSort(arr, j+1, right); return arr;&#125;","categories":[],"tags":[{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"http://ziiyan.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}]},{"title":"å­¦ä¹ ç¬”è®°ï¼šJSè¿è¡Œæœºåˆ¶.md","slug":"å­¦ä¹ ç¬”è®°ï¼šJSè¿è¡Œæœºåˆ¶","date":"2020-03-29T13:58:24.000Z","updated":"2020-08-16T13:18:19.180Z","comments":true,"path":"2020/03/29/å­¦ä¹ ç¬”è®°ï¼šJSè¿è¡Œæœºåˆ¶/","link":"","permalink":"http://ziiyan.github.io/2020/03/29/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%9AJS%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6/","excerpt":"","text":"https://mp.weixin.qq.com/s/vIKDUrbuxVNQMi_g_fiwUA åŒºåˆ†è¿›ç¨‹å’Œçº¿ç¨‹ è¿›ç¨‹æ˜¯ cpu èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œçº¿ç¨‹æ˜¯ cpu è°ƒåº¦çš„æœ€å°å•ä½ã€‚ ä¸€ä¸ªè¿›ç¨‹å´©æºƒï¼Œä¸ä¼šå¯¹å…¶ä»–è¿›ç¨‹äº§ç”Ÿå½±å“ï¼›è€Œä¸€ä¸ªçº¿ç¨‹å´©æºƒï¼Œä¼šè®©åŒä¸€è¿›ç¨‹å†…çš„å…¶ä»–çº¿ç¨‹ä¹Ÿæ­»æ‰ã€‚ è¿›ç¨‹åœ¨åˆ›å»ºã€åˆ‡æ¢å’Œé”€æ¯æ—¶å¼€é”€æ¯”è¾ƒå¤§ï¼Œè€Œçº¿ç¨‹æ¯”è¾ƒå°ã€‚ è¿›ç¨‹åˆ›å»ºçš„æ—¶å€™éœ€è¦åˆ†é…ç³»ç»Ÿèµ„æºï¼Œè€Œé”€æ¯çš„çš„æ—¶å€™éœ€è¦é‡Šæ”¾ç³»ç»Ÿèµ„æºã€‚ æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„ æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„ æµè§ˆå™¨ä¹‹æ‰€ä»¥èƒ½å¤Ÿè¿è¡Œï¼Œæ˜¯å› ä¸ºç³»ç»Ÿç»™å®ƒçš„è¿›ç¨‹åˆ†é…äº†èµ„æºï¼ˆcpuã€å†…å­˜ï¼‰ ç®€å•ç‚¹ç†è§£ï¼Œæ¯æ‰“å¼€ä¸€ä¸ªTabé¡µï¼Œå°±ç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªç‹¬ç«‹çš„æµè§ˆå™¨è¿›ç¨‹ åœ¨è¿™é‡Œæµè§ˆå™¨åº”è¯¥ä¹Ÿæœ‰è‡ªå·±çš„ä¼˜åŒ–æœºåˆ¶ï¼Œæœ‰æ—¶å€™æ‰“å¼€å¤šä¸ªtabé¡µåï¼Œå¯ä»¥åœ¨Chromeä»»åŠ¡ç®¡ç†å™¨ä¸­çœ‹åˆ°ï¼Œæœ‰äº›è¿›ç¨‹è¢«åˆå¹¶äº†ï¼ˆæ‰€ä»¥æ¯ä¸€ä¸ªTabæ ‡ç­¾å¯¹åº”ä¸€ä¸ªè¿›ç¨‹å¹¶ä¸ä¸€å®šæ˜¯ç»å¯¹çš„ï¼‰ æµè§ˆå™¨éƒ½åŒ…å«å“ªäº›è¿›ç¨‹ï¼Ÿ Browserè¿›ç¨‹ï¼šæµè§ˆå™¨çš„ä¸»è¿›ç¨‹ï¼ˆè´Ÿè´£åè°ƒã€ä¸»æ§ï¼‰ï¼Œåªæœ‰ä¸€ä¸ªã€‚ä½œç”¨æœ‰ï¼š è´Ÿè´£æµè§ˆå™¨ç•Œé¢æ˜¾ç¤ºï¼Œä¸ç”¨æˆ·äº¤äº’ã€‚å¦‚å‰è¿›ï¼Œåé€€ç­‰ è´Ÿè´£å„ä¸ªé¡µé¢çš„ç®¡ç†ï¼Œåˆ›å»ºå’Œé”€æ¯å…¶ä»–è¿›ç¨‹ å°†Rendererè¿›ç¨‹å¾—åˆ°çš„å†…å­˜ä¸­çš„Bitmapï¼Œç»˜åˆ¶åˆ°ç”¨æˆ·ç•Œé¢ä¸Š ç½‘ç»œèµ„æºçš„ç®¡ç†ï¼Œä¸‹è½½ç­‰ ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹ï¼šæ¯ç§ç±»å‹çš„æ’ä»¶å¯¹åº”ä¸€ä¸ªè¿›ç¨‹ï¼Œä»…å½“ä½¿ç”¨è¯¥æ’ä»¶æ—¶æ‰åˆ›å»º GPUè¿›ç¨‹ï¼šæœ€å¤šä¸€ä¸ªï¼Œç”¨äº3Dç»˜åˆ¶ç­‰ æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹ï¼ˆæµè§ˆå™¨å†…æ ¸ï¼‰ï¼ˆRendererè¿›ç¨‹ï¼Œå†…éƒ¨æ˜¯å¤šçº¿ç¨‹çš„ï¼‰ é»˜è®¤æ¯ä¸ªTabé¡µé¢ä¸€ä¸ªè¿›ç¨‹ï¼Œäº’ä¸å½±å“ã€‚ä¸»è¦ä½œç”¨ä¸º é¡µé¢æ¸²æŸ“ï¼Œè„šæœ¬æ‰§è¡Œï¼Œäº‹ä»¶å¤„ç†ç­‰ æµè§ˆå™¨å¤šè¿›ç¨‹çš„ä¼˜åŠ¿ é¿å…å•ä¸ªpage crashå½±å“æ•´ä¸ªæµè§ˆå™¨ é¿å…ç¬¬ä¸‰æ–¹æ’ä»¶crashå½±å“æ•´ä¸ªæµè§ˆå™¨ å¤šè¿›ç¨‹å……åˆ†åˆ©ç”¨å¤šæ ¸ä¼˜åŠ¿ æ–¹ä¾¿ä½¿ç”¨æ²™ç›’æ¨¡å‹éš”ç¦»æ’ä»¶ç­‰è¿›ç¨‹ï¼Œæé«˜æµè§ˆå™¨ç¨³å®šæ€§ é‡ç‚¹æ˜¯æµè§ˆå™¨å†…æ ¸ï¼ˆæ¸²æŸ“è¿›ç¨‹ï¼‰ é¡µé¢çš„æ¸²æŸ“ï¼ŒJSçš„æ‰§è¡Œï¼Œäº‹ä»¶çš„å¾ªç¯ï¼Œéƒ½åœ¨è¿™ä¸ªæ¸²æŸ“è¿›ç¨‹å†…è¿›è¡Œ æµè§ˆå™¨çš„æ¸²æŸ“è¿›ç¨‹æ˜¯å¤šçº¿ç¨‹çš„ GUIæ¸²æŸ“çº¿ç¨‹ è´Ÿè´£æ¸²æŸ“æµè§ˆå™¨ç•Œé¢ï¼Œè§£æHTMLï¼ŒCSSï¼Œæ„å»ºDOMæ ‘å’ŒRenderObjectæ ‘ï¼Œå¸ƒå±€å’Œç»˜åˆ¶ç­‰ å½“ç•Œé¢éœ€è¦é‡ç»˜ï¼ˆRepaintï¼‰æˆ–ç”±äºæŸç§æ“ä½œå¼•å‘å›æµ(reflow)æ—¶ï¼Œè¯¥çº¿ç¨‹å°±ä¼šæ‰§è¡Œ GUIæ¸²æŸ“çº¿ç¨‹ä¸JSå¼•æ“çº¿ç¨‹æ˜¯äº’æ–¥çš„ï¼Œå½“JSå¼•æ“æ‰§è¡Œæ—¶GUIçº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼ˆç›¸å½“äºè¢«å†»ç»“äº†ï¼‰ï¼ŒGUIæ›´æ–°ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ç­‰åˆ°JSå¼•æ“ç©ºé—²æ—¶ç«‹å³è¢«æ‰§è¡Œ JSå¼•æ“çº¿ç¨‹ ä¹Ÿç§°ä¸ºJSå†…æ ¸ï¼Œè´Ÿè´£å¤„ç†Javascriptè„šæœ¬ç¨‹åºã€‚ï¼ˆä¾‹å¦‚V8å¼•æ“ï¼‰ JSå¼•æ“çº¿ç¨‹è´Ÿè´£è§£æJavascriptè„šæœ¬ï¼Œè¿è¡Œä»£ç ã€‚ JSå¼•æ“ä¸€ç›´ç­‰å¾…ç€ä»»åŠ¡é˜Ÿåˆ—ä¸­ä»»åŠ¡çš„åˆ°æ¥ï¼Œç„¶ååŠ ä»¥å¤„ç†ï¼Œä¸€ä¸ªTabé¡µï¼ˆrendererè¿›ç¨‹ï¼‰ä¸­æ— è®ºä»€ä¹ˆæ—¶å€™éƒ½åªæœ‰ä¸€ä¸ªJSçº¿ç¨‹åœ¨è¿è¡ŒJSç¨‹åº GUIæ¸²æŸ“çº¿ç¨‹ä¸JSå¼•æ“çº¿ç¨‹æ˜¯äº’æ–¥çš„ï¼Œæ‰€ä»¥å¦‚æœJSæ‰§è¡Œçš„æ—¶é—´è¿‡é•¿ï¼Œè¿™æ ·å°±ä¼šé€ æˆé¡µé¢çš„æ¸²æŸ“ä¸è¿è´¯ï¼Œå¯¼è‡´é¡µé¢æ¸²æŸ“åŠ è½½é˜»å¡ äº‹ä»¶è§¦å‘çº¿ç¨‹ å½’å±äºæµè§ˆå™¨è€Œä¸æ˜¯JSå¼•æ“ï¼Œç”¨æ¥æ§åˆ¶äº‹ä»¶å¾ªç¯ å½“JSå¼•æ“æ‰§è¡Œä»£ç å—å¦‚setTimeOutæ—¶ï¼ˆä¹Ÿå¯æ¥è‡ªæµè§ˆå™¨å†…æ ¸çš„å…¶ä»–çº¿ç¨‹,å¦‚é¼ æ ‡ç‚¹å‡»ã€AJAXå¼‚æ­¥è¯·æ±‚ç­‰ï¼‰ï¼Œä¼šå°†å¯¹åº”ä»»åŠ¡æ·»åŠ åˆ°äº‹ä»¶çº¿ç¨‹ä¸­ å½“å¯¹åº”çš„äº‹ä»¶ç¬¦åˆè§¦å‘æ¡ä»¶è¢«è§¦å‘æ—¶ï¼Œè¯¥çº¿ç¨‹ä¼šæŠŠäº‹ä»¶æ·»åŠ åˆ°å¾…å¤„ç†é˜Ÿåˆ—çš„é˜Ÿå°¾ï¼Œç­‰å¾…JSå¼•æ“çš„å¤„ç† ç”±äºJSçš„å•çº¿ç¨‹å…³ç³»ï¼Œæ‰€ä»¥è¿™äº›å¾…å¤„ç†é˜Ÿåˆ—ä¸­çš„äº‹ä»¶éƒ½å¾—æ’é˜Ÿç­‰å¾…JSå¼•æ“å¤„ç†ï¼ˆå½“JSå¼•æ“ç©ºé—²æ—¶æ‰ä¼šå»æ‰§è¡Œï¼‰ å®šæ—¶è§¦å‘å™¨çº¿ç¨‹ ä¼ è¯´ä¸­çš„setIntervalä¸setTimeoutæ‰€åœ¨çº¿ç¨‹ æµè§ˆå™¨å®šæ—¶è®¡æ•°å™¨å¹¶ä¸æ˜¯ç”±JavaScriptå¼•æ“è®¡æ•°çš„,ï¼ˆå› ä¸ºJavaScriptå¼•æ“æ˜¯å•çº¿ç¨‹çš„, å¦‚æœå¤„äºé˜»å¡çº¿ç¨‹çŠ¶æ€å°±ä¼šå½±å“è®°è®¡æ—¶çš„å‡†ç¡®ï¼‰ å› æ­¤é€šè¿‡å•ç‹¬çº¿ç¨‹æ¥è®¡æ—¶å¹¶è§¦å‘å®šæ—¶ï¼ˆè®¡æ—¶å®Œæ¯•åï¼Œæ·»åŠ åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…JSå¼•æ“ç©ºé—²åæ‰§è¡Œï¼‰ æ³¨æ„ï¼ŒW3Cåœ¨HTMLæ ‡å‡†ä¸­è§„å®šï¼Œè§„å®šè¦æ±‚setTimeoutä¸­ä½äº4msçš„æ—¶é—´é—´éš”ç®—ä¸º4msã€‚ å¼‚æ­¥ http è¯·æ±‚çº¿ç¨‹ åœ¨XMLHttpRequeståœ¨è¿æ¥åæ˜¯é€šè¿‡æµè§ˆå™¨æ–°å¼€ä¸€ä¸ªçº¿ç¨‹è¯·æ±‚ å°†æ£€æµ‹åˆ°çŠ¶æ€å˜æ›´æ—¶ï¼Œå¦‚æœè®¾ç½®æœ‰å›è°ƒå‡½æ•°ï¼Œå¼‚æ­¥çº¿ç¨‹å°±äº§ç”ŸçŠ¶æ€å˜æ›´äº‹ä»¶ï¼Œå°†è¿™ä¸ªå›è°ƒå†æ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ã€‚å†ç”±JavaScriptå¼•æ“æ‰§è¡Œã€‚ Browserè¿›ç¨‹å’Œæµè§ˆå™¨å†…æ ¸ï¼ˆRendererè¿›ç¨‹ï¼‰çš„é€šä¿¡è¿‡ç¨‹ Browserè¿›ç¨‹æ”¶åˆ°ç”¨æˆ·è¯·æ±‚ï¼Œé¦–å…ˆéœ€è¦è·å–é¡µé¢å†…å®¹ï¼ˆè­¬å¦‚é€šè¿‡ç½‘ç»œä¸‹è½½èµ„æºï¼‰ï¼Œéšåå°†è¯¥ä»»åŠ¡é€šè¿‡RendererHostæ¥å£ä¼ é€’ç»™Renderè¿›ç¨‹ Rendererè¿›ç¨‹çš„Rendereræ¥å£æ”¶åˆ°æ¶ˆæ¯ï¼Œç®€å•è§£é‡Šåï¼Œäº¤ç»™æ¸²æŸ“çº¿ç¨‹ï¼Œç„¶åå¼€å§‹æ¸²æŸ“ æ¸²æŸ“çº¿ç¨‹æ¥æ”¶è¯·æ±‚ï¼ŒåŠ è½½ç½‘é¡µå¹¶æ¸²æŸ“ç½‘é¡µï¼Œè¿™å…¶ä¸­å¯èƒ½éœ€è¦Browserè¿›ç¨‹è·å–èµ„æºå’Œéœ€è¦GPUè¿›ç¨‹æ¥å¸®åŠ©æ¸²æŸ“ å½“ç„¶å¯èƒ½ä¼šæœ‰JSçº¿ç¨‹æ“ä½œDOMï¼ˆè¿™æ ·å¯èƒ½ä¼šé€ æˆå›æµå¹¶é‡ç»˜ï¼‰ æœ€åRenderè¿›ç¨‹å°†ç»“æœä¼ é€’ç»™Browserè¿›ç¨‹ Browserè¿›ç¨‹æ¥æ”¶åˆ°ç»“æœå¹¶å°†ç»“æœç»˜åˆ¶å‡ºæ¥ æ¢³ç†æµè§ˆå™¨å†…æ ¸ä¸­çº¿ç¨‹ä¹‹é—´çš„å…³ç³» GUIæ¸²æŸ“çº¿ç¨‹ä¸JSå¼•æ“çº¿ç¨‹äº’æ–¥ ç”±äºJavaScriptæ˜¯å¯æ“çºµDOMçš„ï¼Œå¦‚æœåœ¨ä¿®æ”¹è¿™äº›å…ƒç´ å±æ€§åŒæ—¶æ¸²æŸ“ç•Œé¢ï¼ˆå³JSçº¿ç¨‹å’ŒUIçº¿ç¨‹åŒæ—¶è¿è¡Œï¼‰ï¼Œé‚£ä¹ˆæ¸²æŸ“çº¿ç¨‹å‰åè·å¾—çš„å…ƒç´ æ•°æ®å°±å¯èƒ½ä¸ä¸€è‡´äº† å› æ­¤ä¸ºäº†é˜²æ­¢æ¸²æŸ“å‡ºç°ä¸å¯é¢„æœŸçš„ç»“æœï¼Œæµè§ˆå™¨è®¾ç½®GUIæ¸²æŸ“çº¿ç¨‹ä¸JSå¼•æ“ä¸ºäº’æ–¥çš„å…³ç³»ï¼Œå½“JSå¼•æ“æ‰§è¡Œæ—¶GUIçº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼ŒGUIæ›´æ–°åˆ™ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ç­‰åˆ°JSå¼•æ“çº¿ç¨‹ç©ºé—²æ—¶ç«‹å³è¢«æ‰§è¡Œ JSé˜»å¡é¡µé¢åŠ è½½ JSå¦‚æœæ‰§è¡Œæ—¶é—´è¿‡é•¿å°±ä¼šé˜»å¡é¡µé¢ã€‚ è­¬å¦‚ï¼Œå‡è®¾JSå¼•æ“æ­£åœ¨è¿›è¡Œå·¨é‡çš„è®¡ç®—ï¼Œæ­¤æ—¶å°±ç®—GUIæœ‰æ›´æ–°ï¼Œä¹Ÿä¼šè¢«ä¿å­˜åˆ°é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…JSå¼•æ“ç©ºé—²åæ‰§è¡Œã€‚ç„¶åï¼Œç”±äºå·¨é‡è®¡ç®—ï¼Œæ‰€ä»¥JSå¼•æ“å¾ˆå¯èƒ½å¾ˆä¹…å¾ˆä¹…åæ‰èƒ½ç©ºé—²ï¼Œè‡ªç„¶ä¼šæ„Ÿè§‰åˆ°å·¨å¡æ— æ¯”ã€‚ æ‰€ä»¥ï¼Œè¦å°½é‡é¿å…JSæ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œè¿™æ ·å°±ä¼šé€ æˆé¡µé¢çš„æ¸²æŸ“ä¸è¿è´¯ï¼Œå¯¼è‡´é¡µé¢æ¸²æŸ“åŠ è½½é˜»å¡çš„æ„Ÿè§‰ã€‚ WebWorkerï¼ŒJSçš„å¤šçº¿ç¨‹ï¼Ÿ åˆ›å»ºWorkeræ—¶ï¼ŒJSå¼•æ“å‘æµè§ˆå™¨ç”³è¯·å¼€ä¸€ä¸ªå­çº¿ç¨‹ï¼ˆå­çº¿ç¨‹æ˜¯æµè§ˆå™¨å¼€çš„ï¼Œå®Œå…¨å—ä¸»çº¿ç¨‹æ§åˆ¶ï¼Œè€Œä¸”ä¸èƒ½æ“ä½œDOMï¼‰ JSå¼•æ“çº¿ç¨‹ä¸workerçº¿ç¨‹é—´é€šè¿‡ç‰¹å®šçš„æ–¹å¼é€šä¿¡ï¼ˆpostMessage APIï¼Œéœ€è¦é€šè¿‡åºåˆ—åŒ–å¯¹è±¡æ¥ä¸çº¿ç¨‹äº¤äº’ç‰¹å®šçš„æ•°æ®ï¼‰ WebWorkerä¸SharedWorker WebWorkeråªå±äºæŸä¸ªé¡µé¢ï¼Œä¸ä¼šå’Œå…¶ä»–é¡µé¢çš„Renderè¿›ç¨‹ï¼ˆæµè§ˆå™¨å†…æ ¸è¿›ç¨‹ï¼‰å…±äº« æ‰€ä»¥Chromeåœ¨Renderè¿›ç¨‹ä¸­ï¼ˆæ¯ä¸€ä¸ªTabé¡µå°±æ˜¯ä¸€ä¸ªrenderè¿›ç¨‹ï¼‰åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥è¿è¡ŒWorkerä¸­çš„JavaScriptç¨‹åºã€‚ SharedWorkeræ˜¯æµè§ˆå™¨æ‰€æœ‰é¡µé¢å…±äº«çš„ï¼Œä¸èƒ½é‡‡ç”¨ä¸WorkeråŒæ ·çš„æ–¹å¼å®ç°ï¼Œå› ä¸ºå®ƒä¸éš¶å±äºæŸä¸ªRenderè¿›ç¨‹ï¼Œå¯ä»¥ä¸ºå¤šä¸ªRenderè¿›ç¨‹å…±äº«ä½¿ç”¨ æ‰€ä»¥Chromeæµè§ˆå™¨ä¸ºSharedWorkerå•ç‹¬åˆ›å»ºä¸€ä¸ªè¿›ç¨‹æ¥è¿è¡ŒJavaScriptç¨‹åºï¼Œåœ¨æµè§ˆå™¨ä¸­æ¯ä¸ªç›¸åŒçš„JavaScriptåªå­˜åœ¨ä¸€ä¸ªSharedWorkerè¿›ç¨‹ï¼Œä¸ç®¡å®ƒè¢«åˆ›å»ºå¤šå°‘æ¬¡ ç®€å•æ¢³ç†ä¸‹æµè§ˆå™¨æ¸²æŸ“æµç¨‹ æµè§ˆå™¨è¾“å…¥urlï¼Œæµè§ˆå™¨ä¸»è¿›ç¨‹æ¥ç®¡ï¼Œå¼€ä¸€ä¸ªä¸‹è½½çº¿ç¨‹ï¼Œç„¶åè¿›è¡Œhttpè¯·æ±‚ï¼ˆç•¥å»DNSæŸ¥è¯¢ï¼ŒIPå¯»å€ç­‰ç­‰æ“ä½œï¼‰ï¼Œç„¶åç­‰å¾…å“åº”ï¼Œè·å–å†…å®¹ï¼Œéšåå°†å†…å®¹é€šè¿‡RendererHostæ¥å£è½¬äº¤ç»™Rendererè¿›ç¨‹-æµè§ˆå™¨æ¸²æŸ“æµç¨‹å¼€å§‹ æµè§ˆå™¨å™¨å†…æ ¸æ‹¿åˆ°å†…å®¹åï¼Œæ¸²æŸ“å¤§æ¦‚å¯ä»¥åˆ’åˆ†æˆä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š è§£æhtmlå»ºç«‹domæ ‘ è§£æcssæ„å»ºrenderæ ‘ï¼ˆå°†CSSä»£ç è§£ææˆæ ‘å½¢çš„æ•°æ®ç»“æ„ï¼Œç„¶åç»“åˆDOMåˆå¹¶æˆrenderæ ‘ï¼‰ å¸ƒå±€renderæ ‘ï¼ˆLayout/reflowï¼‰ï¼Œè´Ÿè´£å„å…ƒç´ å°ºå¯¸ã€ä½ç½®çš„è®¡ç®— ç»˜åˆ¶renderæ ‘ï¼ˆpaintï¼‰ï¼Œç»˜åˆ¶é¡µé¢åƒç´ ä¿¡æ¯ æµè§ˆå™¨ä¼šå°†å„å±‚çš„ä¿¡æ¯å‘é€ç»™GPUï¼ŒGPUä¼šå°†å„å±‚åˆæˆï¼ˆcompositeï¼‰ï¼Œæ˜¾ç¤ºåœ¨å±å¹•ä¸Š æ¸²æŸ“å®Œæ¯•åå°±æ˜¯loadäº‹ä»¶äº†ï¼Œä¹‹åå°±æ˜¯è‡ªå·±çš„JSé€»è¾‘å¤„ç†äº†ã€‚ ![image-20200330102718586](/Users/wuziyan/Library/Application Support/typora-user-images/image-20200330102718586.png) loadäº‹ä»¶ä¸DOMContentLoadedäº‹ä»¶çš„å…ˆå å½“ DOMContentLoaded äº‹ä»¶è§¦å‘æ—¶ï¼Œä»…å½“DOMåŠ è½½å®Œæˆï¼Œä¸åŒ…æ‹¬æ ·å¼è¡¨ï¼Œå›¾ç‰‡ã€‚ (è­¬å¦‚å¦‚æœæœ‰asyncåŠ è½½çš„è„šæœ¬å°±ä¸ä¸€å®šå®Œæˆ) å½“ onload äº‹ä»¶è§¦å‘æ—¶ï¼Œé¡µé¢ä¸Šæ‰€æœ‰çš„DOMï¼Œæ ·å¼è¡¨ï¼Œè„šæœ¬ï¼Œå›¾ç‰‡éƒ½å·²ç»åŠ è½½å®Œæˆäº†ã€‚ï¼ˆæ¸²æŸ“å®Œæ¯•äº†ï¼‰ æ‰€ä»¥ï¼Œé¡ºåºæ˜¯ï¼šDOMContentLoaded -&gt; load cssåŠ è½½æ˜¯å¦ä¼šé˜»å¡domæ ‘æ¸²æŸ“ï¼Ÿ cssæ˜¯ç”±å•ç‹¬çš„ä¸‹è½½çº¿ç¨‹å¼‚æ­¥ä¸‹è½½çš„ã€‚ cssåŠ è½½ä¸ä¼šé˜»å¡DOMæ ‘è§£æï¼ˆå¼‚æ­¥åŠ è½½æ—¶DOMç…§å¸¸æ„å»ºï¼‰ ä½†ä¼šé˜»å¡renderæ ‘æ¸²æŸ“ï¼ˆæ¸²æŸ“æ—¶éœ€ç­‰cssåŠ è½½å®Œæ¯•ï¼Œå› ä¸ºrenderæ ‘éœ€è¦cssä¿¡æ¯ï¼‰ æ™®é€šå›¾å±‚å’Œå¤åˆå›¾å±‚ æµè§ˆå™¨æ¸²æŸ“çš„å›¾å±‚ä¸€èˆ¬åŒ…å«ä¸¤å¤§ç±»ï¼šæ™®é€šå›¾å±‚ä»¥åŠå¤åˆå›¾å±‚ æ™®é€šæ–‡æ¡£æµå†…å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå¤åˆå›¾å±‚ï¼ˆè¿™é‡Œç§°ä¸ºé»˜è®¤å¤åˆå±‚ï¼Œé‡Œé¢ä¸ç®¡æ·»åŠ å¤šå°‘å…ƒç´ ï¼Œå…¶å®éƒ½æ˜¯åœ¨åŒä¸€ä¸ªå¤åˆå›¾å±‚ä¸­ï¼‰ å…¶æ¬¡ï¼Œabsoluteå¸ƒå±€ï¼ˆfixedä¹Ÿä¸€æ ·ï¼‰ï¼Œè™½ç„¶å¯ä»¥è„±ç¦»æ™®é€šæ–‡æ¡£æµï¼Œä½†å®ƒä»ç„¶å±äºé»˜è®¤å¤åˆå±‚ GPUä¸­ï¼Œå„ä¸ªå¤åˆå›¾å±‚æ˜¯å•ç‹¬ç»˜åˆ¶çš„ï¼Œæ‰€ä»¥äº’ä¸å½±å“ å¦‚ä½•å˜æˆå¤åˆå›¾å±‚ï¼ˆç¡¬ä»¶åŠ é€Ÿï¼‰ å°†è¯¥å…ƒç´ å˜æˆä¸€ä¸ªå¤åˆå›¾å±‚ï¼Œå°±æ˜¯ä¼ è¯´ä¸­çš„ç¡¬ä»¶åŠ é€ŸæŠ€æœ¯ absoluteå’Œç¡¬ä»¶åŠ é€Ÿçš„åŒºåˆ« å¯ä»¥çœ‹åˆ°ï¼Œabsoluteè™½ç„¶å¯ä»¥è„±ç¦»æ™®é€šæ–‡æ¡£æµï¼Œä½†æ˜¯æ— æ³•è„±ç¦»é»˜è®¤å¤åˆå±‚ã€‚ æ‰€ä»¥ï¼Œå°±ç®—absoluteä¸­ä¿¡æ¯æ”¹å˜æ—¶ä¸ä¼šæ”¹å˜æ™®é€šæ–‡æ¡£æµä¸­renderæ ‘ï¼Œä½†æ˜¯ï¼Œæµè§ˆå™¨æœ€ç»ˆç»˜åˆ¶æ—¶ï¼Œæ˜¯æ•´ä¸ªå¤åˆå±‚ç»˜åˆ¶çš„ï¼Œæ‰€ä»¥absoluteä¸­ä¿¡æ¯çš„æ”¹å˜ï¼Œä»ç„¶ä¼šå½±å“æ•´ä¸ªå¤åˆå±‚çš„ç»˜åˆ¶ã€‚ ï¼ˆæµè§ˆå™¨ä¼šé‡ç»˜å®ƒï¼Œå¦‚æœå¤åˆå±‚ä¸­å†…å®¹å¤šï¼Œabsoluteå¸¦æ¥çš„ç»˜åˆ¶ä¿¡æ¯å˜åŒ–è¿‡å¤§ï¼Œèµ„æºæ¶ˆè€—æ˜¯éå¸¸ä¸¥é‡çš„ï¼‰ è€Œç¡¬ä»¶åŠ é€Ÿç›´æ¥å°±æ˜¯åœ¨å¦ä¸€ä¸ªå¤åˆå±‚äº†ï¼ˆå¦èµ·ç‚‰ç¶ï¼‰ï¼Œæ‰€ä»¥å®ƒçš„ä¿¡æ¯æ”¹å˜ä¸ä¼šå½±å“é»˜è®¤å¤åˆå±‚ï¼ˆå½“ç„¶äº†ï¼Œå†…éƒ¨è‚¯å®šä¼šå½±å“å±äºè‡ªå·±çš„å¤åˆå±‚ï¼‰ï¼Œä»…ä»…æ˜¯å¼•å‘æœ€åçš„åˆæˆï¼ˆè¾“å‡ºè§†å›¾ï¼‰ å¤åˆå›¾å±‚çš„ä½œç”¨ï¼Ÿ ä¸€èˆ¬ä¸€ä¸ªå…ƒç´ å¼€å¯ç¡¬ä»¶åŠ é€Ÿåä¼šå˜æˆå¤åˆå›¾å±‚ï¼Œå¯ä»¥ç‹¬ç«‹äºæ™®é€šæ–‡æ¡£æµä¸­ï¼Œæ”¹åŠ¨åå¯ä»¥é¿å…æ•´ä¸ªé¡µé¢é‡ç»˜ï¼Œæå‡æ€§èƒ½ ä½†æ˜¯å°½é‡ä¸è¦å¤§é‡ä½¿ç”¨å¤åˆå›¾å±‚ï¼Œå¦åˆ™ç”±äºèµ„æºæ¶ˆè€—è¿‡åº¦ï¼Œé¡µé¢åè€Œä¼šå˜çš„æ›´å¡ ä»Event Loopè°ˆJSçš„è¿è¡Œæœºåˆ¶ JSåˆ†ä¸ºåŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡ åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆ ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œäº‹ä»¶è§¦å‘çº¿ç¨‹ç®¡ç†ç€ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼Œåªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æœï¼Œå°±åœ¨ä»»åŠ¡é˜Ÿåˆ—ä¹‹ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ã€‚ ä¸€æ—¦æ‰§è¡Œæ ˆä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼ˆæ­¤æ—¶JSå¼•æ“ç©ºé—²ï¼‰ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–ä»»åŠ¡é˜Ÿåˆ—ï¼Œå°†å¯è¿è¡Œçš„å¼‚æ­¥ä»»åŠ¡æ·»åŠ åˆ°å¯æ‰§è¡Œæ ˆä¸­ï¼Œå¼€å§‹æ‰§è¡Œã€‚ äº‹ä»¶å¾ªç¯æœºåˆ¶è¿›ä¸€æ­¥è¡¥å…… ä¸Šå›¾å¤§è‡´æè¿°å°±æ˜¯ï¼š ä¸»çº¿ç¨‹è¿è¡Œæ—¶ä¼šäº§ç”Ÿæ‰§è¡Œæ ˆï¼Œæ ˆä¸­çš„ä»£ç è°ƒç”¨æŸäº›apiæ—¶ï¼Œå®ƒä»¬ä¼šåœ¨äº‹ä»¶é˜Ÿåˆ—ä¸­æ·»åŠ å„ç§äº‹ä»¶ï¼ˆå½“æ»¡è¶³è§¦å‘æ¡ä»¶åï¼Œå¦‚ajaxè¯·æ±‚å®Œæ¯•ï¼‰ è€Œæ ˆä¸­çš„ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå°±ä¼šè¯»å–äº‹ä»¶é˜Ÿåˆ—ä¸­çš„äº‹ä»¶ï¼Œå»æ‰§è¡Œé‚£äº›å›è°ƒ å¦‚æ­¤å¾ªç¯ æ³¨æ„ï¼Œæ€»æ˜¯è¦ç­‰å¾…æ ˆä¸­çš„ä»£ç æ‰§è¡Œå®Œæ¯•åæ‰ä¼šå»è¯»å–äº‹ä»¶é˜Ÿåˆ—ä¸­çš„äº‹ä»¶ å•ç‹¬è¯´è¯´å®šæ—¶å™¨ ä¸Šè¿°äº‹ä»¶å¾ªç¯æœºåˆ¶çš„æ ¸å¿ƒæ˜¯ï¼šJSå¼•æ“çº¿ç¨‹å’Œäº‹ä»¶è§¦å‘çº¿ç¨‹ å½“ä½¿ç”¨setTimeoutæˆ–setIntervalæ—¶ï¼Œéœ€è¦å®šæ—¶å™¨çº¿ç¨‹è®¡æ—¶ï¼Œè®¡æ—¶å®Œæˆåå°±ä¼šå°†ç‰¹å®šçš„äº‹ä»¶æ¨å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ setTimeoutè€Œä¸æ˜¯setInterval ç”¨setTimeoutæ¨¡æ‹Ÿå®šæœŸè®¡æ—¶å’Œç›´æ¥ç”¨setIntervalæ˜¯æœ‰åŒºåˆ«çš„ å› ä¸ºæ¯æ¬¡setTimeoutè®¡æ—¶åˆ°åå°±ä¼šå»æ‰§è¡Œï¼Œç„¶åæ‰§è¡Œä¸€æ®µæ—¶é—´åæ‰ä¼šç»§ç»­setTimeoutï¼Œä¸­é—´å°±å¤šäº†è¯¯å·®ï¼ˆè¯¯å·®å¤šå°‘ä¸ä»£ç æ‰§è¡Œæ—¶é—´æœ‰å…³ï¼‰ è€ŒsetIntervalåˆ™æ˜¯æ¯æ¬¡éƒ½ç²¾ç¡®çš„éš”ä¸€æ®µæ—¶é—´æ¨å…¥ä¸€ä¸ªäº‹ä»¶ ï¼ˆä½†æ˜¯ï¼Œäº‹ä»¶çš„å®é™…æ‰§è¡Œæ—¶é—´ä¸ä¸€å®šå°±å‡†ç¡®ï¼Œè¿˜æœ‰å¯èƒ½æ˜¯è¿™ä¸ªäº‹ä»¶è¿˜æ²¡æ‰§è¡Œå®Œæ¯•ï¼Œä¸‹ä¸€ä¸ªäº‹ä»¶å°±æ¥äº†ï¼‰ è€Œä¸”setIntervalæœ‰ä¸€äº›æ¯”è¾ƒè‡´å‘½çš„é—®é¢˜å°±æ˜¯ï¼š ç´¯è®¡æ•ˆåº”ï¼ˆä¸Šé¢æåˆ°çš„ï¼‰ï¼Œå¦‚æœsetIntervalä»£ç åœ¨ï¼ˆsetIntervalï¼‰å†æ¬¡æ·»åŠ åˆ°é˜Ÿåˆ—ä¹‹å‰è¿˜æ²¡æœ‰å®Œæˆæ‰§è¡Œï¼Œå°±ä¼šå¯¼è‡´å®šæ—¶å™¨ä»£ç è¿ç»­è¿è¡Œå¥½å‡ æ¬¡ï¼Œè€Œä¹‹é—´æ²¡æœ‰é—´éš”ã€‚å°±ç®—æ­£å¸¸é—´éš”æ‰§è¡Œï¼Œå¤šä¸ªsetIntervalçš„ä»£ç æ‰§è¡Œæ—¶é—´å¯èƒ½ä¼šæ¯”é¢„æœŸå°ï¼ˆå› ä¸ºä»£ç æ‰§è¡Œéœ€è¦ä¸€å®šæ—¶é—´ï¼‰ è­¬å¦‚åƒiOSçš„webview,æˆ–è€…Safariç­‰æµè§ˆå™¨ä¸­éƒ½æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œåœ¨æ»šåŠ¨çš„æ—¶å€™æ˜¯ä¸æ‰§è¡ŒJSçš„ï¼Œå¦‚æœä½¿ç”¨äº†setIntervalï¼Œä¼šå‘ç°åœ¨æ»šåŠ¨ç»“æŸåä¼šæ‰§è¡Œå¤šæ¬¡ç”±äºæ»šåŠ¨ä¸æ‰§è¡ŒJSç§¯æ”’å›è°ƒï¼Œå¦‚æœå›è°ƒæ‰§è¡Œæ—¶é—´è¿‡é•¿,å°±ä¼šéå¸¸å®¹å™¨é€ æˆå¡é¡¿é—®é¢˜å’Œä¸€äº›ä¸å¯çŸ¥çš„é”™è¯¯ï¼ˆè¿™ä¸€å—åç»­æœ‰è¡¥å……ï¼ŒsetIntervalè‡ªå¸¦çš„ä¼˜åŒ–ï¼Œä¸ä¼šé‡å¤æ·»åŠ å›è°ƒï¼‰ è€Œä¸”æŠŠæµè§ˆå™¨æœ€å°åŒ–æ˜¾ç¤ºç­‰æ“ä½œæ—¶ï¼ŒsetIntervalå¹¶ä¸æ˜¯ä¸æ‰§è¡Œç¨‹åºï¼Œå®ƒä¼šæŠŠsetIntervalçš„å›è°ƒå‡½æ•°æ”¾åœ¨é˜Ÿåˆ—ä¸­ï¼Œç­‰æµè§ˆå™¨çª—å£å†æ¬¡æ‰“å¼€æ—¶ï¼Œä¸€ç¬é—´å…¨éƒ¨æ‰§è¡Œæ—¶ æ‰€ä»¥ï¼Œé‰´äºè¿™ä¹ˆå¤šä½†é—®é¢˜ï¼Œç›®å‰ä¸€èˆ¬è®¤ä¸ºçš„æœ€ä½³æ–¹æ¡ˆæ˜¯ï¼šç”¨setTimeoutæ¨¡æ‹ŸsetIntervalï¼Œæˆ–è€…ç‰¹æ®Šåœºåˆç›´æ¥ç”¨requestAnimationFrame äº‹ä»¶å¾ªç¯è¿›é˜¶ï¼šmacrotaskä¸microtask Promiseé‡Œæœ‰äº†ä¸€ä¸ªä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼šmicrotask JSä¸­åˆ†ä¸ºä¸¤ç§ä»»åŠ¡ç±»å‹ï¼šmacrotaskå’Œmicrotaskï¼Œåœ¨ECMAScriptä¸­ï¼Œmicrotaskç§°ä¸ºjobsï¼Œmacrotaskå¯ç§°ä¸ºtask åŒºåˆ«ï¼š macrotaskï¼ˆåˆç§°ä¹‹ä¸ºå®ä»»åŠ¡ï¼‰ï¼Œå¯ä»¥ç†è§£æ˜¯æ¯æ¬¡æ‰§è¡Œæ ˆæ‰§è¡Œçš„ä»£ç å°±æ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼ˆåŒ…æ‹¬æ¯æ¬¡ä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ä¸€ä¸ªäº‹ä»¶å›è°ƒå¹¶æ”¾åˆ°æ‰§è¡Œæ ˆä¸­æ‰§è¡Œï¼‰ æ¯ä¸€ä¸ªtaskä¼šä»å¤´åˆ°å°¾å°†è¿™ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œä¸ä¼šæ‰§è¡Œå…¶å®ƒ æµè§ˆå™¨ä¸ºäº†èƒ½å¤Ÿä½¿å¾—JSå†…éƒ¨taskä¸DOMä»»åŠ¡èƒ½å¤Ÿæœ‰åºçš„æ‰§è¡Œï¼Œä¼šåœ¨ä¸€ä¸ªtaskæ‰§è¡Œç»“æŸåï¼Œåœ¨ä¸‹ä¸€ä¸ª task æ‰§è¡Œå¼€å§‹å‰ï¼Œå¯¹é¡µé¢è¿›è¡Œé‡æ–°æ¸²æŸ“ ï¼ˆtask-&gt;æ¸²æŸ“-&gt;task-&gt;...ï¼‰ microtaskï¼ˆåˆç§°ä¸ºå¾®ä»»åŠ¡ï¼‰ï¼Œå¯ä»¥ç†è§£æ˜¯åœ¨å½“å‰ task æ‰§è¡Œç»“æŸåç«‹å³æ‰§è¡Œçš„ä»»åŠ¡ ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å½“å‰taskä»»åŠ¡åï¼Œä¸‹ä¸€ä¸ªtaskä¹‹å‰ï¼Œåœ¨æ¸²æŸ“ä¹‹å‰ æ‰€ä»¥å®ƒçš„å“åº”é€Ÿåº¦ç›¸æ¯”setTimeoutï¼ˆsetTimeoutæ˜¯taskï¼‰ä¼šæ›´å¿«ï¼Œå› ä¸ºæ— éœ€ç­‰æ¸²æŸ“ ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æŸä¸€ä¸ªmacrotaskæ‰§è¡Œå®Œåï¼Œå°±ä¼šå°†åœ¨å®ƒæ‰§è¡ŒæœŸé—´äº§ç”Ÿçš„æ‰€æœ‰microtaskéƒ½æ‰§è¡Œå®Œæ¯•ï¼ˆåœ¨æ¸²æŸ“å‰ï¼‰ åˆ†åˆ«ä»€ä¹ˆæ ·çš„åœºæ™¯ä¼šå½¢æˆmacrotaskå’Œmicrotaskå‘¢ï¼Ÿ macrotaskï¼šä¸»ä»£ç å—ï¼ŒsetTimeoutï¼ŒsetIntervalç­‰ï¼ˆå¯ä»¥çœ‹åˆ°ï¼Œäº‹ä»¶é˜Ÿåˆ—ä¸­çš„æ¯ä¸€ä¸ªäº‹ä»¶éƒ½æ˜¯ä¸€ä¸ªmacrotaskï¼‰ microtaskï¼šPromiseï¼Œprocess.nextTickç­‰ å†æ ¹æ®çº¿ç¨‹æ¥ç†è§£ä¸‹ï¼š macrotaskä¸­çš„äº‹ä»¶éƒ½æ˜¯æ”¾åœ¨ä¸€ä¸ªäº‹ä»¶é˜Ÿåˆ—ä¸­çš„ï¼Œè€Œè¿™ä¸ªé˜Ÿåˆ—ç”±äº‹ä»¶è§¦å‘çº¿ç¨‹ç»´æŠ¤ microtaskä¸­çš„æ‰€æœ‰å¾®ä»»åŠ¡éƒ½æ˜¯æ·»åŠ åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆJob Queuesï¼‰ä¸­ï¼Œç­‰å¾…å½“å‰macrotaskæ‰§è¡Œå®Œæ¯•åæ‰§è¡Œï¼Œè€Œè¿™ä¸ªé˜Ÿåˆ—ç”±JSå¼•æ“çº¿ç¨‹ç»´æŠ¤ ï¼ˆè¿™ç‚¹ç”±è‡ªå·±ç†è§£+æ¨æµ‹å¾—å‡ºï¼Œå› ä¸ºå®ƒæ˜¯åœ¨ä¸»çº¿ç¨‹ä¸‹æ— ç¼æ‰§è¡Œçš„ï¼‰ æ‰€ä»¥ï¼Œæ€»ç»“ä¸‹è¿è¡Œæœºåˆ¶ï¼š æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼ˆæ ˆä¸­æ²¡æœ‰å°±ä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ï¼‰ æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°å¾®ä»»åŠ¡ï¼Œå°±å°†å®ƒæ·»åŠ åˆ°å¾®ä»»åŠ¡çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œç«‹å³æ‰§è¡Œå½“å‰å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰å¾®ä»»åŠ¡ï¼ˆä¾æ¬¡æ‰§è¡Œï¼‰ å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ£€æŸ¥æ¸²æŸ“ï¼Œç„¶åGUIçº¿ç¨‹æ¥ç®¡æ¸²æŸ“ æ¸²æŸ“å®Œæ¯•åï¼ŒJSçº¿ç¨‹ç»§ç»­æ¥ç®¡ï¼Œå¼€å§‹ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼ˆä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ï¼‰","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://ziiyan.github.io/tags/JavaScript/"},{"name":"æµè§ˆå™¨","slug":"æµè§ˆå™¨","permalink":"http://ziiyan.github.io/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"}]},{"title":"é¢è¯•å‡†å¤‡ï¼šé˜²æŠ– & èŠ‚æµ","slug":"é¢è¯•å‡†å¤‡ï¼šé˜²æŠ– & èŠ‚æµ","date":"2020-03-28T13:55:35.000Z","updated":"2020-08-06T01:40:53.039Z","comments":true,"path":"2020/03/28/é¢è¯•å‡†å¤‡ï¼šé˜²æŠ– & èŠ‚æµ/","link":"","permalink":"http://ziiyan.github.io/2020/03/28/%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%EF%BC%9A%E9%98%B2%E6%8A%96%20&%20%E8%8A%82%E6%B5%81/","excerpt":"","text":"https://www.cnblogs.com/Antwan-Dmy/p/10714445.html 1ã€é˜²æŠ– debounce é˜²æ­¢æŠ–åŠ¨ï¼Œé¿å…æŠŠä¸€æ¬¡äº‹ä»¶è¯¯è®¤ä¸ºå¤šæ¬¡ åœºæ™¯ è¿ç»­ç‚¹å‡»æŒ‰é’®å¯¼è‡´å‘é€å¤šæ¬¡ç›¸åŒè¯·æ±‚ è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°ï¼Œç›‘å¬äº‹ä»¶ å®æ—¶æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæ— æ›´æ”¹ä¸€ç§’åå†ä¿å­˜ é˜²æŠ–é‡åœ¨æ¸…é›¶ clearTimeout(timer) 123456789function debounce(fn, ms) &#123; let timer = null; return (...args) =&gt; &#123; clearTimeout(timer); timer = setTimeout(() =&gt; &#123; fn(...args); &#125;, ms); &#125;&#125; 2ã€èŠ‚æµ throttle èŠ‚çœæ°´æµï¼Œæ§åˆ¶äº‹ä»¶å‘ç”Ÿçš„é¢‘ç‡ï¼Œé™åˆ¶æµé‡ åœºæ™¯ scroll äº‹ä»¶ï¼Œæ¯éš”ä¸€ç§’è®¡ç®—ä¸€æ¬¡ä½ç½® æµè§ˆå™¨æ’­æ”¾äº‹ä»¶ï¼Œæ¯éš”ä¸€ç§’ä¸€ç®—ä¸€æ¬¡è¿›åº¦ input æ¡†å®æ—¶æœç´¢ï¼Œæ¯éš”ä¸€ç§’å‘é€ä¸€æ¬¡è¯·æ±‚ï¼ˆä¹Ÿå¯ä»¥é˜²æŠ–ï¼Œçœ‹éœ€æ±‚ï¼‰ èŠ‚æµé‡åœ¨åŠ é” timer=timeout 12345678910function throttle(fn, ms) &#123; let timer = null; return (...args) =&gt; &#123; if (timer) &#123; return &#125; timer = setTimeout(() =&gt; &#123; f(...args) timer = null; &#125;, ms) &#125;&#125; reference 2019 é¢è¯•å‡†å¤‡ - JS é˜²æŠ–ä¸èŠ‚æµ (è¶…çº§ é‡è¦!!!!!) ã€æ»´æ»´ã€‘ä»€ä¹ˆæ˜¯é˜²æŠ–å’ŒèŠ‚æµï¼Œä»–ä»¬çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://ziiyan.github.io/tags/JavaScript/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://ziiyan.github.io/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"ES6ï¼šmodule","slug":"ES6ï¼šmodule","date":"2020-03-28T10:51:28.000Z","updated":"2020-08-13T08:57:09.211Z","comments":true,"path":"2020/03/28/ES6ï¼šmodule/","link":"","permalink":"http://ziiyan.github.io/2020/03/28/ES6%EF%BC%9Amodule/","excerpt":"","text":"Module çš„è¯­æ³•æ¦‚è¿° CommonJS æ¨¡å—å°±æ˜¯å¯¹è±¡ï¼Œè¾“å…¥æ—¶å¿…é¡»æŸ¥æ‰¾å¯¹è±¡å±æ€§ 12345678// CommonJSæ¨¡å—let &#123; stat, exists, readFile &#125; = require('fs');// ç­‰åŒäºlet _fs = require('fs');let stat = _fs.stat;let exists = _fs.exists;let readfile = _fs.readfile; æ•´ä½“åŠ è½½fsæ¨¡å—ï¼ˆå³åŠ è½½fsçš„æ‰€æœ‰æ–¹æ³•ï¼‰ï¼Œç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼ˆ_fsï¼‰ï¼Œç„¶åå†ä»è¿™ä¸ªå¯¹è±¡ä¸Šé¢è¯»å– 3 ä¸ªæ–¹æ³•ã€‚è¿™ç§åŠ è½½ç§°ä¸ºâ€œè¿è¡Œæ—¶åŠ è½½â€ï¼Œå› ä¸ºåªæœ‰è¿è¡Œæ—¶æ‰èƒ½å¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Œå¯¼è‡´å®Œå…¨æ²¡åŠæ³•åœ¨ç¼–è¯‘æ—¶åšâ€œé™æ€ä¼˜åŒ–â€ã€‚ ES6 æ¨¡å—ä¸æ˜¯å¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡exportå‘½ä»¤æ˜¾å¼æŒ‡å®šè¾“å‡ºçš„ä»£ç ï¼Œå†é€šè¿‡importå‘½ä»¤è¾“å…¥ 12// ES6æ¨¡å—import &#123; stat, exists, readFile &#125; from 'fs'; ä¸Šé¢ä»£ç çš„å®è´¨æ˜¯ä»fsæ¨¡å—åŠ è½½ 3 ä¸ªæ–¹æ³•ï¼Œå…¶ä»–æ–¹æ³•ä¸åŠ è½½ è¿™ç§åŠ è½½ç§°ä¸ºâ€œç¼–è¯‘æ—¶åŠ è½½â€æˆ–è€…é™æ€åŠ è½½ï¼Œå³ ES6 å¯ä»¥åœ¨ç¼–è¯‘æ—¶å°±å®Œæˆæ¨¡å—åŠ è½½ï¼Œæ•ˆç‡è¦æ¯” CommonJS æ¨¡å—çš„åŠ è½½æ–¹å¼é«˜ è¿™ä¹Ÿå¯¼è‡´äº†æ²¡æ³•å¼•ç”¨ ES6 æ¨¡å—æœ¬èº«ï¼Œå› ä¸ºå®ƒä¸æ˜¯å¯¹è±¡ã€‚ ä¸¥æ ¼æ¨¡å¼ ES6 çš„æ¨¡å—è‡ªåŠ¨é‡‡ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œä¸ç®¡ä½ æœ‰æ²¡æœ‰åœ¨æ¨¡å—å¤´éƒ¨åŠ ä¸Š&quot;use strict&quot;; é™åˆ¶ å˜é‡å¿…é¡»å£°æ˜åå†ä½¿ç”¨ å‡½æ•°çš„å‚æ•°ä¸èƒ½æœ‰åŒåå±æ€§ï¼Œå¦åˆ™æŠ¥é”™ ä¸èƒ½ä½¿ç”¨withè¯­å¥ ä¸èƒ½å¯¹åªè¯»å±æ€§èµ‹å€¼ï¼Œå¦åˆ™æŠ¥é”™ ä¸èƒ½ä½¿ç”¨å‰ç¼€ 0 è¡¨ç¤ºå…«è¿›åˆ¶æ•°ï¼Œå¦åˆ™æŠ¥é”™ ä¸èƒ½åˆ é™¤ä¸å¯åˆ é™¤çš„å±æ€§ï¼Œå¦åˆ™æŠ¥é”™ ä¸èƒ½åˆ é™¤å˜é‡delete propï¼Œä¼šæŠ¥é”™ï¼Œåªèƒ½åˆ é™¤å±æ€§delete global[prop] evalä¸ä¼šåœ¨å®ƒçš„å¤–å±‚ä½œç”¨åŸŸå¼•å…¥å˜é‡ evalå’Œargumentsä¸èƒ½è¢«é‡æ–°èµ‹å€¼ argumentsä¸ä¼šè‡ªåŠ¨åæ˜ å‡½æ•°å‚æ•°çš„å˜åŒ– ä¸èƒ½ä½¿ç”¨arguments.callee ä¸èƒ½ä½¿ç”¨arguments.caller ç¦æ­¢thisæŒ‡å‘å…¨å±€å¯¹è±¡ ä¸èƒ½ä½¿ç”¨fn.callerå’Œfn.argumentsè·å–å‡½æ•°è°ƒç”¨çš„å †æ ˆ å¢åŠ äº†ä¿ç•™å­—ï¼ˆæ¯”å¦‚protectedã€staticå’Œinterfaceï¼‰ ES6 æ¨¡å—ä¹‹ä¸­ï¼Œé¡¶å±‚çš„thisæŒ‡å‘undefinedï¼Œå³ä¸åº”è¯¥åœ¨é¡¶å±‚ä»£ç ä½¿ç”¨this export å‘½ä»¤ ä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶å†…éƒ¨çš„æ‰€æœ‰å˜é‡ï¼Œå¤–éƒ¨æ— æ³•è·å– å¦‚æœå¸Œæœ›å¤–éƒ¨èƒ½å¤Ÿè¯»å–æ¨¡å—å†…éƒ¨çš„æŸä¸ªå˜é‡ï¼Œå°±å¿…é¡»ä½¿ç”¨exportå…³é”®å­—è¾“å‡ºè¯¥å˜é‡ é€šå¸¸æƒ…å†µä¸‹ï¼Œexportè¾“å‡ºçš„å˜é‡å°±æ˜¯æœ¬æ¥çš„åå­—ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨aså…³é”®å­—é‡å‘½åã€‚é‡å‘½ååï¼Œå¯ä»¥ç”¨ä¸åŒçš„åå­—è¾“å‡ºä¸¤æ¬¡ exportè¯­å¥è¾“å‡ºçš„æ¥å£ï¼Œä¸å…¶å¯¹åº”çš„å€¼æ˜¯åŠ¨æ€ç»‘å®šå…³ç³»ï¼Œå³é€šè¿‡è¯¥æ¥å£ï¼Œå¯ä»¥å–åˆ°æ¨¡å—å†…éƒ¨å®æ—¶çš„å€¼ exportå‘½ä»¤å¯ä»¥å‡ºç°åœ¨æ¨¡å—çš„ä»»ä½•ä½ç½®ï¼Œåªè¦å¤„äºæ¨¡å—é¡¶å±‚å°±å¯ä»¥ã€‚å¦‚æœå¤„äºå—çº§ä½œç”¨åŸŸå†…ï¼Œå°±ä¼šæŠ¥é”™ï¼Œä¸‹ä¸€èŠ‚çš„importå‘½ä»¤ä¹Ÿæ˜¯å¦‚æ­¤ã€‚è¿™æ˜¯å› ä¸ºå¤„äºæ¡ä»¶ä»£ç å—ä¹‹ä¸­ï¼Œå°±æ²¡æ³•åšé™æ€ä¼˜åŒ–äº†ï¼Œè¿èƒŒäº† ES6 æ¨¡å—çš„è®¾è®¡åˆè¡· import å‘½ä»¤ importå‘½ä»¤è¦ä½¿ç”¨aså…³é”®å­—ï¼Œå°†è¾“å…¥çš„å˜é‡é‡å‘½å importå‘½ä»¤è¾“å…¥çš„å˜é‡éƒ½æ˜¯åªè¯»çš„ï¼Œå› ä¸ºå®ƒçš„æœ¬è´¨æ˜¯è¾“å…¥æ¥å£ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å…è®¸åœ¨åŠ è½½æ¨¡å—çš„è„šæœ¬é‡Œé¢ï¼Œæ”¹å†™æ¥å£ å¦‚æœæ˜¯å¯¹è±¡ï¼Œå±æ€§å¯ä¿®æ”¹ï¼Œä½†ä¸å»ºè®®è¿™æ ·åš importå‘½ä»¤å…·æœ‰æå‡æ•ˆæœï¼Œä¼šæå‡åˆ°æ•´ä¸ªæ¨¡å—çš„å¤´éƒ¨ï¼Œé¦–å…ˆæ‰§è¡Œ æœ¬è´¨æ˜¯ï¼Œimportå‘½ä»¤æ˜¯ç¼–è¯‘é˜¶æ®µæ‰§è¡Œçš„ï¼Œåœ¨ä»£ç è¿è¡Œä¹‹å‰ ç”±äºimportæ˜¯é™æ€æ‰§è¡Œï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨è¡¨è¾¾å¼å’Œå˜é‡ï¼Œè¿™äº›åªæœ‰åœ¨è¿è¡Œæ—¶æ‰èƒ½å¾—åˆ°ç»“æœçš„è¯­æ³•ç»“æ„ æ¨¡å—çš„æ•´ä½“åŠ è½½ import * (as xxx) from &#39;...&#39; export default å‘½ä»¤ export default xxx ä¸éœ€è¦å¤§æ‹¬å·ï¼Œimport xxx from &#39;...&#39; ä¹Ÿä¸éœ€è¦å¤§æ‹¬å· export defaultå‘½ä»¤ç”¨äºæŒ‡å®šæ¨¡å—çš„é»˜è®¤è¾“å‡ºã€‚æ˜¾ç„¶ï¼Œä¸€ä¸ªæ¨¡å—åªèƒ½æœ‰ä¸€ä¸ªé»˜è®¤è¾“å‡ºï¼Œå› æ­¤export defaultå‘½ä»¤åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚æ‰€ä»¥ï¼Œimportå‘½ä»¤åé¢æ‰ä¸ç”¨åŠ å¤§æ‹¬å·ï¼Œå› ä¸ºåªå¯èƒ½å”¯ä¸€å¯¹åº”export defaultå‘½ä»¤ æœ¬è´¨ä¸Šï¼Œexport defaultå°±æ˜¯è¾“å‡ºä¸€ä¸ªå«åšdefaultçš„å˜é‡æˆ–æ–¹æ³•ï¼Œç„¶åç³»ç»Ÿå…è®¸ä½ ä¸ºå®ƒå–ä»»æ„åå­— export ä¸ import çš„å¤åˆå†™æ³•12345export &#123; foo, bar &#125; from 'my_module';// å¯ä»¥ç®€å•ç†è§£ä¸ºimport &#123; foo, bar &#125; from 'my_module';export &#123; foo, bar &#125;; å†™æˆä¸€è¡Œä»¥åï¼Œfooå’Œbarå®é™…ä¸Šå¹¶æ²¡æœ‰è¢«å¯¼å…¥å½“å‰æ¨¡å—ï¼Œåªæ˜¯ç›¸å½“äºå¯¹å¤–è½¬å‘äº†è¿™ä¸¤ä¸ªæ¥å£ï¼Œå½“å‰æ¨¡å—ä¸èƒ½ç›´æ¥ä½¿ç”¨fooå’Œbar import() importå’Œexportå‘½ä»¤åªèƒ½åœ¨æ¨¡å—çš„é¡¶å±‚ï¼Œä¸èƒ½åœ¨ä»£ç å—ä¹‹ä¸­ æœ‰åˆ©äºç¼–è¯‘å™¨æé«˜æ•ˆç‡ï¼Œä½†ä¹Ÿå¯¼è‡´æ— æ³•åœ¨è¿è¡Œæ—¶åŠ è½½æ¨¡å— ES2020 ææ¡ˆå¼•å…¥ import() å‡½æ•°æ”¯æŒåŠ¨æ€åŠ è½½æ¨¡å— Module çš„åŠ è½½å®ç°æµè§ˆå™¨åŠ è½½ä¼ ç»Ÿæ–¹æ³• æµè§ˆå™¨æ˜¯åŒæ­¥åŠ è½½ JavaScript è„šæœ¬ï¼Œå³æ¸²æŸ“å¼•æ“é‡åˆ°&lt;script&gt;æ ‡ç­¾å°±ä¼šåœä¸‹æ¥ï¼Œç­‰åˆ°æ‰§è¡Œå®Œè„šæœ¬ï¼Œå†ç»§ç»­å‘ä¸‹æ¸²æŸ“ã€‚å¦‚æœæ˜¯å¤–éƒ¨è„šæœ¬ï¼Œè¿˜å¿…é¡»åŠ å…¥è„šæœ¬ä¸‹è½½çš„æ—¶é—´ å¦‚æœè„šæœ¬ä½“ç§¯å¾ˆå¤§ï¼Œä¸‹è½½å’Œæ‰§è¡Œçš„æ—¶é—´å°±ä¼šå¾ˆé•¿ï¼Œå› æ­¤é€ æˆæµè§ˆå™¨å µå¡ï¼Œç”¨æˆ·ä¼šæ„Ÿè§‰åˆ°æµè§ˆå™¨â€œå¡æ­»â€äº†ï¼Œæ²¡æœ‰ä»»ä½•å“åº”ã€‚è¿™æ˜¾ç„¶æ˜¯å¾ˆä¸å¥½çš„ä½“éªŒï¼Œæ‰€ä»¥æµè§ˆå™¨å…è®¸è„šæœ¬å¼‚æ­¥åŠ è½½ &lt;script&gt; æ ‡ç­¾æ‰“å¼€ defer æˆ– async å±æ€§ï¼Œè„šæœ¬å°±ä¼šå¼‚æ­¥åŠ è½½ã€‚æ¸²æŸ“å¼•æ“é‡åˆ°è¿™ä¸€è¡Œå‘½ä»¤ï¼Œå°±ä¼šå¼€å§‹ä¸‹è½½å¤–éƒ¨è„šæœ¬ï¼Œä½†ä¸ä¼šç­‰å®ƒä¸‹è½½å’Œæ‰§è¡Œï¼Œè€Œæ˜¯ç›´æ¥æ‰§è¡Œåé¢çš„å‘½ä»¤ deferä¸asyncçš„åŒºåˆ«æ˜¯ï¼šdeferè¦ç­‰åˆ°æ•´ä¸ªé¡µé¢åœ¨å†…å­˜ä¸­æ­£å¸¸æ¸²æŸ“ç»“æŸï¼ˆDOM ç»“æ„å®Œå…¨ç”Ÿæˆï¼Œä»¥åŠå…¶ä»–è„šæœ¬æ‰§è¡Œå®Œæˆï¼‰ï¼Œæ‰ä¼šæ‰§è¡Œï¼›asyncä¸€æ—¦ä¸‹è½½å®Œï¼Œæ¸²æŸ“å¼•æ“å°±ä¼šä¸­æ–­æ¸²æŸ“ï¼Œæ‰§è¡Œè¿™ä¸ªè„šæœ¬ä»¥åï¼Œå†ç»§ç»­æ¸²æŸ“ã€‚ ä¸€å¥è¯ï¼Œdeferæ˜¯â€œæ¸²æŸ“å®Œå†æ‰§è¡Œâ€ï¼Œasyncæ˜¯â€œä¸‹è½½å®Œå°±æ‰§è¡Œâ€ã€‚ å¦å¤–ï¼Œå¦‚æœæœ‰å¤šä¸ªdeferè„šæœ¬ï¼Œä¼šæŒ‰ç…§å®ƒä»¬åœ¨é¡µé¢å‡ºç°çš„é¡ºåºåŠ è½½ï¼Œè€Œå¤šä¸ªasyncè„šæœ¬æ˜¯ä¸èƒ½ä¿è¯åŠ è½½é¡ºåºçš„ åŠ è½½è§„åˆ™ æµè§ˆå™¨åŠ è½½ ES6 æ¨¡å—ï¼Œä¹Ÿä½¿ç”¨ &lt;script&gt; æ ‡ç­¾ï¼Œä½†æ˜¯è¦åŠ å…¥ type=&quot;module&quot; å±æ€§ module å±æ€§éƒ½æ˜¯å¼‚æ­¥åŠ è½½ï¼Œä¸ä¼šé€ æˆå µå¡æµè§ˆå™¨ï¼Œå³ç­‰åˆ°æ•´ä¸ªé¡µé¢æ¸²æŸ“å®Œï¼Œå†æ‰§è¡Œæ¨¡å—è„šæœ¬ï¼Œç­‰åŒäºæ‰“å¼€äº†``æ ‡ç­¾çš„deferå±æ€§ ES6 æ¨¡å—ä¸ CommonJS æ¨¡å—çš„å·®å¼‚ CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„æ‹·è´ï¼ŒES6 æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ ä¸€æ—¦è¾“å‡ºä¸€ä¸ªå€¼ï¼Œæ¨¡å—å†…éƒ¨çš„å˜åŒ–å°±å½±å“ä¸åˆ°è¿™ä¸ªå€¼ CommonJS æ¨¡å—æ˜¯è¿è¡Œæ—¶åŠ è½½ï¼ŒES6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£ ç”Ÿæˆä¸€ä¸ªåªè¯»å¼•ç”¨ã€‚ç­‰åˆ°è„šæœ¬çœŸæ­£æ‰§è¡Œæ—¶ï¼Œå†æ ¹æ®è¿™ä¸ªåªè¯»å¼•ç”¨ï¼Œåˆ°è¢«åŠ è½½çš„é‚£ä¸ªæ¨¡å—é‡Œé¢å»å–å€¼ ES6 æ¨¡å—æ˜¯åŠ¨æ€å¼•ç”¨ï¼Œå¹¶ä¸”ä¸ä¼šç¼“å­˜å€¼ï¼Œæ¨¡å—é‡Œé¢çš„å˜é‡ç»‘å®šå…¶æ‰€åœ¨çš„æ¨¡å—","categories":[],"tags":[{"name":"ECMAScript 6 å…¥é—¨","slug":"ECMAScript-6-å…¥é—¨","permalink":"http://ziiyan.github.io/tags/ECMAScript-6-%E5%85%A5%E9%97%A8/"}]},{"title":"åŸå‹ & åŸå‹é“¾","slug":"åŸå‹-åŸå‹é“¾","date":"2020-03-25T07:19:10.000Z","updated":"2020-07-27T09:30:21.278Z","comments":true,"path":"2020/03/25/åŸå‹-åŸå‹é“¾/","link":"","permalink":"http://ziiyan.github.io/2020/03/25/%E5%8E%9F%E5%9E%8B-%E5%8E%9F%E5%9E%8B%E9%93%BE/","excerpt":"","text":"åŸæ–‡ï¼šhttps://mengera88.github.io/2017/06/06/javascript%E5%AF%B9%E8%B1%A1%E8%AF%A6%E8%A7%A3%EF%BC%9A%E6%90%9E%E6%B8%85%E6%A5%9A%E5%8E%9F%E5%9E%8B%E4%B8%8E%E5%8E%9F%E5%9E%8B%E9%93%BE/","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://ziiyan.github.io/tags/JavaScript/"}]},{"title":"ES6ï¼šClassçš„åŸºæœ¬è¯­æ³•å’Œç»§æ‰¿","slug":"ES6ï¼šClassçš„åŸºæœ¬è¯­æ³•å’Œç»§æ‰¿","date":"2020-03-24T13:43:45.000Z","updated":"2020-08-13T08:56:55.769Z","comments":true,"path":"2020/03/24/ES6ï¼šClassçš„åŸºæœ¬è¯­æ³•å’Œç»§æ‰¿/","link":"","permalink":"http://ziiyan.github.io/2020/03/24/ES6%EF%BC%9AClass%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%E5%92%8C%E7%BB%A7%E6%89%BF/","excerpt":"","text":"Class çš„åŸºæœ¬è¯­æ³•ç®€ä»‹ç±»çš„ç”±æ¥ js ä¸­ç”Ÿæˆå®ä¾‹å¯¹è±¡çš„ä¼ ç»Ÿæ–¹æ³•æ˜¯é€šè¿‡æ„é€ å‡½æ•° 12345678function Point(x, y) &#123; this.x = x; this.y = y;&#125;Point.prototype.toString = function () &#123; return '(' + this.x + ',' + this.y + ')';&#125;;var p = new Point(1, 2); Es6 ä¸ºäº†æ¥è¿‘ä¼ ç»Ÿè¯­è¨€ï¼Œå¼•å…¥äº† Classï¼Œä½œä¸ºå¯¹è±¡çš„æ¨¡ç‰ˆã€‚ é€šè¿‡ class å…³é”®å­—ï¼Œå¯ä»¥å®šä¹‰ç±» Es6 çš„ clss çœ‹ä½œä¸€ä¸ªè¯­æ³•ç³–ï¼Œå¤§éƒ¨åˆ†åŠŸèƒ½ es5 éƒ½å¯ä»¥åšåˆ°ï¼Œåªæ˜¯è®©å†™æ³•æ›´åƒé¢å‘å¯¹è±¡ç¼–ç¨‹çš„è¯­æ³• 12345678910class Point &#123; constructor(x, y) &#123; this.x = x; this.y = y; &#125; toString() &#123; return '(' + this.x + ',' + this.y + ')'; &#125;&#125; ES5 çš„æ„é€ å‡½æ•° Pointï¼Œå¯¹åº” ES6 çš„ Point ç±»çš„æ„é€ æ–¹æ³• constructor ç±»çš„æ•°æ®ç±»å‹å°±æ˜¯å‡½æ•°ï¼Œç±»æœ¬èº«å°±æŒ‡å‘æ„é€ å‡½æ•° 12345class Point &#123; // ...&#125;typeof Point // \"function\"Point === Point.prototype.constructor // true ä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æ¥ç”¨ new å‘½ä»¤ï¼Œè·Ÿæ„é€ å‡½æ•°ä¸€æ · ç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½å®šä¹‰åœ¨ç±»çš„prototypeå±æ€§ä¸Šé¢ 123456789101112131415161718class Point &#123; constructor() &#123; // ... &#125; toString() &#123; // ... &#125; toValue() &#123; // ... &#125;&#125;// ç­‰åŒäºPoint.prototype = &#123; constructor() &#123;&#125;, toString() &#123;&#125;, toValue() &#123;&#125;,&#125;; åœ¨ç±»çš„å®ä¾‹ä¸Šè°ƒç”¨æ–¹æ³•ï¼Œå°±æ˜¯è°ƒç”¨åŸå‹ä¸Šçš„æ–¹æ³• 1234class B &#123;&#125;let b = new B();b.constructor === B.prototype.constructor // true ç±»çš„æ–¹æ³•éƒ½æ˜¯å®šä¹‰åœ¨ prototype å¯¹è±¡ä¸Šé¢æ‰€ä»¥ç±»çš„æ–°æ–¹æ³•å¯ä»¥æ·»åŠ åœ¨prototypeå¯¹è±¡ä¸Šé¢ã€‚Object.assignæ–¹æ³•å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä¸€æ¬¡å‘ç±»æ·»åŠ å¤šä¸ªæ–¹æ³• 12345678910class Point &#123; constructor() &#123; // ... &#125;&#125;Object.assign(Point.prototype, &#123; toString() &#123;&#125;, toValue() &#123;&#125;&#125;); prototypeå¯¹è±¡çš„constructorå±æ€§ï¼Œç›´æ¥æŒ‡å‘â€œç±»â€çš„æœ¬èº«ï¼Œè¿™ä¸ ES5 çš„è¡Œä¸ºæ˜¯ä¸€è‡´çš„ 1Point.prototype.constructor === Point ç±»çš„å†…éƒ¨æ‰€æœ‰å®šä¹‰çš„æ–¹æ³•ï¼Œéƒ½æ˜¯ä¸å¯æšä¸¾çš„ï¼ˆnon-enumerableï¼‰ï¼Œè¿™ä¸ ES5 çš„è¡Œä¸ºä¸ä¸€è‡´ 12345678910111213141516171819202122232425262728class Point &#123; constructor(x, y) &#123; // ... &#125; toString() &#123; // ... &#125;&#125;Object.keys(Point.prototype)// []Object.getOwnPropertyNames(Point.prototype)// [\"constructor\",\"toString\"]// ES5 çš„å†™æ³•å¯æšä¸¾var Point = function (x, y) &#123; // ...&#125;;Point.prototype.toString = function() &#123; // ...&#125;;Object.keys(Point.prototype)// [\"toString\"]Object.getOwnPropertyNames(Point.prototype)// [\"constructor\",\"toString\"] constructor æ–¹æ³• constructor æ–¹æ³•éƒ½æ˜¯ç±»çš„é»˜è®¤æ–¹æ³•ï¼Œé€šè¿‡ new å‘½ä»¤ç”Ÿæˆå¯¹è±¡å®ä¾‹æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨è¯¥æ–¹æ³• ä¸€ä¸ªç±»å¿…é¡»æœ‰ constructor æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰æ˜¾ç¤ºå®šä¹‰ï¼Œä¸€ä¸ªç©ºçš„ constructor æ–¹æ³•ä¼šè¢«é»˜è®¤æ·»åŠ  constructor æ–¹æ³•é»˜è®¤è¿”å›å®ä¾‹å¯¹è±¡ï¼ˆå³ thisï¼‰ï¼Œå¯ä»¥æ‰‹åŠ¨æŒ‡å®šè¿”å›å¦å¤–ä¸€ä¸ªå¯¹è±¡ 12345678class Foo &#123; constructor() &#123; return Object.create(null); &#125;&#125;new Foo() instanceof Foo// false ç±»å¿…é¡»ä½¿ç”¨newè°ƒç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å®ƒè·Ÿæ™®é€šæ„é€ å‡½æ•°çš„ä¸€ä¸ªä¸»è¦åŒºåˆ«ï¼Œåè€…ä¸ç”¨newä¹Ÿå¯ä»¥æ‰§è¡Œ ç±»çš„å®ä¾‹ å¿…é¡»ç”¨ new ç”Ÿæˆ ä¸ ES5 ä¸€æ ·ï¼Œå®ä¾‹çš„å±æ€§é™¤éæ˜¾å¼å®šä¹‰åœ¨å…¶æœ¬èº«ï¼ˆå³å®šä¹‰åœ¨thiså¯¹è±¡ä¸Šï¼‰ï¼Œå¦åˆ™éƒ½æ˜¯å®šä¹‰åœ¨åŸå‹ä¸Šï¼ˆå³å®šä¹‰åœ¨classä¸Šï¼‰ 12345678910111213141516171819202122//å®šä¹‰ç±»class Point &#123; constructor(x, y) &#123; this.x = x; this.y = y; &#125; toString() &#123; return '(' + this.x + ', ' + this.y + ')'; &#125;&#125;var point = new Point(2, 3);point.toString() // (2, 3)point.hasOwnProperty('x') // truepoint.hasOwnProperty('y') // truepoint.hasOwnProperty('toString') // falsepoint.__proto__.hasOwnProperty('toString') // true ç±»çš„æ‰€æœ‰å®ä¾‹å…±äº«ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡å®ä¾‹çš„__proto__å±æ€§ä¸ºâ€œç±»â€æ·»åŠ æ–¹æ³• __proto__ å¹¶ä¸æ˜¯è¯­è¨€æœ¬èº«çš„ç‰¹æ€§ï¼Œè¿™æ˜¯å„å¤§å‚å•†å…·ä½“å®ç°æ—¶æ·»åŠ çš„ç§æœ‰å±æ€§ï¼Œè™½ç„¶ç›®å‰å¾ˆå¤šç°ä»£æµè§ˆå™¨çš„ JS å¼•æ“ä¸­éƒ½æä¾›äº†è¿™ä¸ªç§æœ‰å±æ€§ï¼Œä½†ä¾æ—§ä¸å»ºè®®åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨è¯¥å±æ€§ï¼Œé¿å…å¯¹ç¯å¢ƒäº§ç”Ÿä¾èµ–ã€‚ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Object.getPrototypeOf æ–¹æ³•æ¥è·å–å®ä¾‹å¯¹è±¡çš„åŸå‹ï¼Œç„¶åå†æ¥ä¸ºåŸå‹æ·»åŠ æ–¹æ³•/å±æ€§ã€‚ getter å’Œ setter ä¸ ES5 ä¸€æ ·ï¼Œåœ¨â€œç±»â€çš„å†…éƒ¨å¯ä»¥ä½¿ç”¨getå’Œsetå…³é”®å­—ï¼Œå¯¹æŸä¸ªå±æ€§è®¾ç½®å­˜å€¼å‡½æ•°å’Œå–å€¼å‡½æ•°ï¼Œæ‹¦æˆªè¯¥å±æ€§çš„å­˜å–è¡Œä¸º 12345678910111213141516171819class MyClass &#123; constructor() &#123; // ... &#125; get prop() &#123; return 'getter'; &#125; set prop(value) &#123; console.log('setter: '+value); &#125;&#125;let inst = new MyClass();inst.prop = 123;// setter: 123inst.prop// 'getter' å­˜å€¼å‡½æ•°å’Œå–å€¼å‡½æ•°æ˜¯å®šä¹‰åœ¨å±æ€§çš„æè¿°å¯¹è±¡ä¸Šé¢ï¼Œè¿™ä¸ ES5 å®Œå…¨ä¸€è‡´ å±æ€§è¡¨è¾¾å¼12345678910111213let methodName = 'getArea';class Square &#123; constructor(length) &#123; // ... &#125; [methodName]() &#123; // ... &#125;&#125;// Squareç±»çš„æ–¹æ³•ågetAreaï¼Œæ˜¯ä»è¡¨è¾¾å¼å¾—åˆ°çš„ Class è¡¨è¾¾å¼ ä¸å‡½æ•°ä¸€æ ·ï¼Œç±»ä¹Ÿå¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼çš„å½¢å¼å®šä¹‰ 123456789const MyClass = class Me &#123; getClassName() &#123; return Me.name; &#125;&#125;;// ç±»çš„åå­—æ˜¯Meï¼Œä½†æ˜¯Meåªåœ¨ Class çš„å†…éƒ¨å¯ç”¨ï¼ŒæŒ‡ä»£å½“å‰ç±»// åœ¨ Class å¤–éƒ¨ï¼Œè¿™ä¸ªç±»åªèƒ½ç”¨ MyClass å¼•ç”¨// å†…éƒ¨ä¸ç”¨ Me å¯ä»¥çœç•¥const MyClass = class &#123; /* ... */ &#125;; ç«‹å³æ‰§è¡Œçš„ Class 1234567891011let person = new class &#123; constructor(name) &#123; this.name = name; &#125; sayName() &#123; console.log(this.name); &#125;&#125;('å¼ ä¸‰');person.sayName(); // \"å¼ ä¸‰\" æ³¨æ„ç‚¹ ä¸¥æ ¼æ¨¡å¼ ç±»å’Œæ¨¡å—çš„å†…éƒ¨ï¼Œé»˜è®¤å°±æ˜¯ä¸¥æ ¼æ¨¡å¼ï¼Œæ‰€ä»¥ä¸éœ€è¦ä½¿ç”¨use strictæŒ‡å®šè¿è¡Œæ¨¡å¼ ç±»ä¸å­˜åœ¨å˜é‡æå‡ name å±æ€§çš„å€¼æ˜¯ç±»å Generator æ–¹æ³• å¦‚æœæŸä¸ªæ–¹æ³•ä¹‹å‰åŠ ä¸Šæ˜Ÿå·ï¼ˆ*ï¼‰ï¼Œå°±è¡¨ç¤ºè¯¥æ–¹æ³•æ˜¯ä¸€ä¸ª Generator å‡½æ•° this ç±»çš„æ–¹æ³•å†…éƒ¨å¦‚æœå«æœ‰thisï¼Œå®ƒé»˜è®¤æŒ‡å‘ç±»çš„å®ä¾‹ 1234567891011121314class Logger &#123; printName(name = 'there') &#123; this.print(`Hello $&#123;name&#125;`); &#125; print(text) &#123; console.log(text); &#125;&#125;const logger = new Logger();const &#123; printName &#125; = logger;printName(); // TypeError: Cannot read property 'print' of undefined// thisä¼šæŒ‡å‘è¯¥æ–¹æ³•è¿è¡Œæ—¶æ‰€åœ¨çš„ç¯å¢ƒï¼ˆç”±äº class å†…éƒ¨æ˜¯ä¸¥æ ¼æ¨¡å¼ï¼Œæ‰€ä»¥ this å®é™…æŒ‡å‘çš„æ˜¯undefinedï¼‰ï¼Œä»è€Œå¯¼è‡´æ‰¾ä¸åˆ°printæ–¹æ³•è€ŒæŠ¥é”™ è§£å†³åŠæ³• 1234567// æ„é€ æ–¹æ³•ä¸­ç»‘å®š`this`ï¼Œè¿™æ ·å°±ä¸ä¼šæ‰¾ä¸åˆ°`print`æ–¹æ³•äº†class Logger &#123; constructor() &#123; this.printName = this.printName.bind(this); &#125; // ...&#125; 123456789// ç®­å¤´å‡½æ•°class Obj &#123; constructor() &#123; this.getThis = () =&gt; this; &#125;&#125;const myObj = new Obj();myObj.getThis() === myObj // true 1234567891011121314151617181920// ä½¿ç”¨Proxyï¼Œè·å–æ–¹æ³•çš„æ—¶å€™ï¼Œè‡ªåŠ¨ç»‘å®šthisfunction selfish (target) &#123; const cache = new WeakMap(); const handler = &#123; get (target, key) &#123; const value = Reflect.get(target, key); if (typeof value !== 'function') &#123; return value; &#125; if (!cache.has(value)) &#123; cache.set(value, value.bind(target)); &#125; return cache.get(value); &#125; &#125;; const proxy = new Proxy(target, handler); return proxy;&#125;const logger = selfish(new Logger()); é™æ€æ–¹æ³• ç±»ç›¸å½“äºå®ä¾‹çš„åŸå‹ï¼Œæ‰€æœ‰åœ¨ç±»ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œéƒ½ä¼šè¢«å®ä¾‹ç»§æ‰¿ å¦‚æœåœ¨ä¸€ä¸ªæ–¹æ³•å‰åŠ ä¸Š static å…³é”®å­—ï¼Œè¡¨ç¤ºè¯¥æ–¹æ³•ä¸ä¼šè¢«å®ä¾‹ç»§æ‰¿ï¼Œè€Œæ˜¯é€šè¿‡ç±»æ¥è°ƒç”¨ï¼Œç§°ä¸ºâ€œé™æ€æ–¹æ³•â€ å¦‚æœé™æ€æ–¹æ³•åŒ…å«thiså…³é”®å­—ï¼Œè¿™ä¸ªthisæŒ‡çš„æ˜¯ç±»ï¼Œè€Œä¸æ˜¯å®ä¾‹ é™æ€æ–¹æ³•å¯ä»¥ä¸éé™æ€æ–¹æ³•é‡å 12345678910111213class Foo &#123; static bar() &#123; this.baz(); &#125; static baz() &#123; console.log('hello'); &#125; baz() &#123; console.log('world'); &#125;&#125;Foo.bar() // hello çˆ¶ç±»çš„é™æ€æ–¹æ³•ï¼Œå¯ä»¥è¢«å­ç±»ç»§æ‰¿ 12345678910class Foo &#123; static classMethod() &#123; return 'hello'; &#125;&#125;class Bar extends Foo &#123;&#125;Bar.classMethod() // 'hello' é™æ€æ–¹æ³•ä¹Ÿæ˜¯å¯ä»¥ä»superå¯¹è±¡ä¸Šè°ƒç”¨çš„ 12345678910111213class Foo &#123; static classMethod() &#123; return 'hello'; &#125;&#125;class Bar extends Foo &#123; static classMethod() &#123; return super.classMethod() + ', too'; &#125;&#125;Bar.classMethod() // \"hello, too\" å®ä¾‹å±æ€§å’Œæ–°å†™æ³• å®ä¾‹å±æ€§é™¤äº†å®šä¹‰åœ¨constructor()æ–¹æ³•é‡Œé¢çš„thisä¸Šé¢ï¼Œä¹Ÿå¯ä»¥å®šä¹‰åœ¨ç±»çš„æœ€é¡¶å±‚ 123456789class IncreasingCounter &#123; constructor() &#123; this._count = 0; &#125;&#125;// ç­‰åŒäºclass IncreasingCounter &#123; _count = 0;&#125; é™æ€å±æ€§ é™æ€å±æ€§æŒ‡çš„æ˜¯ Class æœ¬èº«çš„å±æ€§ï¼Œå³Class.propNameï¼Œè€Œä¸æ˜¯å®šä¹‰åœ¨å®ä¾‹å¯¹è±¡ï¼ˆthisï¼‰ä¸Šçš„å±æ€§ 12345678910// è€å†™æ³•class Foo &#123; // ...&#125;Foo.prop = 1;// æ–°å†™æ³•ï¼ˆææ¡ˆï¼‰class Foo &#123; static prop = 1;&#125; ç§æœ‰æ–¹æ³•å’Œç§æœ‰å±æ€§ ç§æœ‰æ–¹æ³•å’Œç§æœ‰å±æ€§ï¼Œæ˜¯åªèƒ½åœ¨ç±»çš„å†…éƒ¨è®¿é—®çš„æ–¹æ³•å’Œå±æ€§ï¼Œå¤–éƒ¨ä¸èƒ½è®¿é—® è¿™æ˜¯å¸¸è§éœ€æ±‚ï¼Œæœ‰åˆ©äºä»£ç çš„å°è£…ï¼Œä½† ES6 ä¸æä¾›ï¼Œåªèƒ½é€šè¿‡å˜é€šæ–¹æ³•æ¨¡æ‹Ÿå®ç° ç°æœ‰çš„è§£å†³æ–¹æ¡ˆ å‘½åä¸ŠåŠ ä»¥åŒºåˆ« ä¸ä¿é™©ï¼Œåœ¨ç±»çš„å¤–éƒ¨è¿˜æ˜¯å¯ä»¥è°ƒç”¨ 12345678910class Widget &#123; // å…¬æœ‰æ–¹æ³• foo (baz) &#123; this._bar(baz); &#125; // ç§æœ‰æ–¹æ³• _bar(baz) &#123; return this.snaf = baz; &#125;&#125; å°†ç§æœ‰æ–¹æ³•ç§»å‡ºæ¨¡å—ï¼Œå› ä¸ºæ¨¡å—å†…éƒ¨çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯å¯¹å¤–å¯è§çš„ 12345678class Widget &#123; foo (baz) &#123; bar.call(this, baz); &#125;&#125;function bar(baz) &#123; return this.snaf = baz;&#125; åˆ©ç”¨Symbolå€¼çš„å”¯ä¸€æ€§ï¼Œå°†ç§æœ‰æ–¹æ³•çš„åå­—å‘½åä¸ºä¸€ä¸ªSymbolå€¼ Reflect.ownKeys() å¯ä»¥æ‹¿åˆ° 123456789101112const bar = Symbol('bar');const snaf = Symbol('snaf');export default class myClass&#123; // å…¬æœ‰æ–¹æ³• foo(baz) &#123; this[bar](baz); &#125; // ç§æœ‰æ–¹æ³• [bar](baz) &#123; return this[snaf] = baz; &#125;&#125;; ææ¡ˆ å±æ€§åä¹‹å‰ï¼Œä½¿ç”¨#è¡¨ç¤º new.target å±æ€§ ç”¨åœ¨æ„é€ å‡½æ•°ä¹‹ä¸­ï¼Œè¿”å›newå‘½ä»¤ä½œç”¨äºçš„é‚£ä¸ªæ„é€ å‡½æ•° å¦‚æœæ„é€ å‡½æ•°ä¸æ˜¯é€šè¿‡newå‘½ä»¤æˆ–Reflect.construct()è°ƒç”¨çš„ï¼Œnew.targetä¼šè¿”å›undefined å› æ­¤è¿™ä¸ªå±æ€§å¯ä»¥ç”¨æ¥ç¡®å®šæ„é€ å‡½æ•°æ˜¯æ€ä¹ˆè°ƒç”¨çš„ å­ç±»ç»§æ‰¿çˆ¶ç±»æ—¶ï¼Œnew.targetä¼šè¿”å›å­ç±» åˆ©ç”¨è¿™ä¸ªç‰¹ç‚¹ï¼Œå¯ä»¥å†™å‡ºä¸èƒ½ç‹¬ç«‹ä½¿ç”¨ã€å¿…é¡»ç»§æ‰¿åæ‰èƒ½ä½¿ç”¨çš„ç±» åœ¨å‡½æ•°å¤–éƒ¨ï¼Œä½¿ç”¨new.targetä¼šæŠ¥é”™ Class çš„ç»§æ‰¿ç®€ä»‹ é€šè¿‡extendså…³é”®å­—å®ç°ç»§æ‰¿ ES5 é€šè¿‡ä¿®æ”¹åŸå‹é“¾å®ç°ç»§æ‰¿ 1234567891011class Point &#123;&#125;class ColorPoint extends Point &#123; constructor(x, y, color) &#123; super(x, y); // è°ƒç”¨çˆ¶ç±»çš„constructor(x, y) this.color = color; &#125; toString() &#123; return this.color + ' ' + super.toString(); // è°ƒç”¨çˆ¶ç±»çš„toString() &#125;&#125; superå…³é”®å­—ï¼Œå®ƒåœ¨è¿™é‡Œè¡¨ç¤ºçˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œç”¨æ¥æ–°å»ºçˆ¶ç±»çš„thiså¯¹è±¡ å­ç±»å¿…é¡»åœ¨constructoræ–¹æ³•ä¸­è°ƒç”¨superæ–¹æ³•ï¼Œå¦åˆ™æ–°å»ºå®ä¾‹æ—¶ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºå­ç±»è‡ªå·±çš„thiså¯¹è±¡ï¼Œå¿…é¡»å…ˆé€šè¿‡çˆ¶ç±»çš„æ„é€ å‡½æ•°å®Œæˆå¡‘é€ ï¼Œå¾—åˆ°ä¸çˆ¶ç±»åŒæ ·çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ï¼Œç„¶åå†å¯¹å…¶è¿›è¡ŒåŠ å·¥ï¼ŒåŠ ä¸Šå­ç±»è‡ªå·±çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ã€‚å¦‚æœä¸è°ƒç”¨superæ–¹æ³•ï¼Œå­ç±»å°±å¾—ä¸åˆ°thiså¯¹è±¡ã€‚ ES5 çš„ç»§æ‰¿ï¼Œå®è´¨æ˜¯å…ˆåˆ›é€ å­ç±»çš„å®ä¾‹å¯¹è±¡thisï¼Œç„¶åå†å°†çˆ¶ç±»çš„æ–¹æ³•æ·»åŠ åˆ°thisä¸Šé¢ï¼ˆParent.apply(this)ï¼‰ã€‚ES6 çš„ç»§æ‰¿æœºåˆ¶å®Œå…¨ä¸åŒï¼Œå®è´¨æ˜¯å…ˆå°†çˆ¶ç±»å®ä¾‹å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼ŒåŠ åˆ°thisä¸Šé¢ï¼ˆæ‰€ä»¥å¿…é¡»å…ˆè°ƒç”¨superæ–¹æ³•ï¼‰ï¼Œç„¶åå†ç”¨å­ç±»çš„æ„é€ å‡½æ•°ä¿®æ”¹thisã€‚ Object.getPrototypeOf() Object.getPrototypeOfæ–¹æ³•å¯ä»¥ç”¨æ¥ä»å­ç±»ä¸Šè·å–çˆ¶ç±» å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•åˆ¤æ–­ï¼Œä¸€ä¸ªç±»æ˜¯å¦ç»§æ‰¿äº†å¦ä¸€ä¸ªç±» 12Object.getPrototypeOf(ColorPoint) === Point// true super å…³é”®å­— superä½œä¸ºå‡½æ•°è°ƒç”¨æ—¶ï¼Œä»£è¡¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œåªèƒ½ç”¨åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­ ES6 è¦æ±‚ï¼Œå­ç±»çš„æ„é€ å‡½æ•°å¿…é¡»æ‰§è¡Œä¸€æ¬¡superå‡½æ•° 12345678910class A &#123;&#125;class B extends A &#123; constructor() &#123; super(); &#125;&#125;// superè™½ç„¶ä»£è¡¨äº†çˆ¶ç±»Açš„æ„é€ å‡½æ•°ï¼Œä½†æ˜¯è¿”å›çš„æ˜¯å­ç±»Bçš„å®ä¾‹// å³superå†…éƒ¨çš„thisæŒ‡çš„æ˜¯Bçš„å®ä¾‹// super()åœ¨è¿™é‡Œç›¸å½“äºA.prototype.constructor.call(this)ã€‚ superä½œä¸ºå¯¹è±¡æ—¶ åœ¨æ™®é€šæ–¹æ³•ä¸­ï¼ŒæŒ‡å‘çˆ¶ç±»çš„åŸå‹å¯¹è±¡ å®šä¹‰åœ¨çˆ¶ç±»å®ä¾‹ä¸Šçš„æ–¹æ³•æˆ–å±æ€§æ— æ³•é€šè¿‡ super è°ƒç”¨ ES6 è§„å®šï¼Œåœ¨å­ç±»æ™®é€šæ–¹æ³•ä¸­é€šè¿‡superè°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œæ–¹æ³•å†…éƒ¨çš„thisæŒ‡å‘å½“å‰çš„å­ç±»å®ä¾‹ åœ¨é™æ€æ–¹æ³•ä¸­ï¼ŒæŒ‡å‘çˆ¶ç±» åœ¨å­ç±»çš„é™æ€æ–¹æ³•ä¸­é€šè¿‡superè°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œæ–¹æ³•å†…éƒ¨çš„thisæŒ‡å‘å½“å‰çš„å­ç±»ï¼Œè€Œä¸æ˜¯å­ç±»çš„å®ä¾‹ ä½¿ç”¨superçš„æ—¶å€™ï¼Œå¿…é¡»æ˜¾å¼æŒ‡å®šæ˜¯ä½œä¸ºå‡½æ•°ã€è¿˜æ˜¯ä½œä¸ºå¯¹è±¡ä½¿ç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™ ç±»çš„ prototype å±æ€§å’Œ __proto__ å±æ€§ å¤§å¤šæ•°æµè§ˆå™¨çš„ ES5 å®ç°ä¹‹ä¸­ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰__proto__å±æ€§ï¼ŒæŒ‡å‘å¯¹åº”çš„æ„é€ å‡½æ•°çš„prototypeå±æ€§ã€‚Class ä½œä¸ºæ„é€ å‡½æ•°çš„è¯­æ³•ç³–ï¼ŒåŒæ—¶æœ‰prototypeå±æ€§å’Œ__proto__å±æ€§ï¼Œå› æ­¤åŒæ—¶å­˜åœ¨ä¸¤æ¡ç»§æ‰¿é“¾ å­ç±»çš„__proto__å±æ€§ï¼Œè¡¨ç¤ºæ„é€ å‡½æ•°çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±» å­ç±»prototypeå±æ€§çš„__proto__å±æ€§ï¼Œè¡¨ç¤ºæ–¹æ³•çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±»çš„prototypeå±æ€§ ä½œä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå­ç±»ï¼ˆBï¼‰çš„åŸå‹ï¼ˆ__proto__å±æ€§ï¼‰æ˜¯çˆ¶ç±»ï¼ˆAï¼‰ ä½œä¸ºä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå­ç±»ï¼ˆBï¼‰çš„åŸå‹å¯¹è±¡ï¼ˆprototypeå±æ€§ï¼‰æ˜¯çˆ¶ç±»çš„åŸå‹å¯¹è±¡ï¼ˆprototypeå±æ€§ï¼‰çš„å®ä¾‹ å®ä¾‹çš„ __proto__ å±æ€§ å­ç±»å®ä¾‹çš„ __proto__ å±æ€§çš„__proto__ å±æ€§ï¼ŒæŒ‡å‘çˆ¶ç±»å®ä¾‹çš„ __proto__ å±æ€§ã€‚å­ç±»çš„åŸå‹ï¼Œæ˜¯çˆ¶ç±»çš„åŸå‹ åŸç”Ÿæ„é€ å‡½æ•°çš„ç»§æ‰¿ Boolean() Number() String() Array() Date() Function() RegExp() Error() Object() Mixin æ¨¡å¼çš„å®ç° Mixin æŒ‡çš„æ˜¯å¤šä¸ªå¯¹è±¡åˆæˆä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œæ–°å¯¹è±¡å…·æœ‰å„ä¸ªç»„æˆæˆå‘˜çš„æ¥å£ 1234567const a = &#123; a: 'a'&#125;;const b = &#123; b: 'b'&#125;;const c = &#123;...a, ...b&#125;;","categories":[],"tags":[{"name":"ECMAScript 6 å…¥é—¨","slug":"ECMAScript-6-å…¥é—¨","permalink":"http://ziiyan.github.io/tags/ECMAScript-6-%E5%85%A5%E9%97%A8/"}]},{"title":"ES6ï¼šasyncå‡½æ•°","slug":"ES6ï¼šasyncå‡½æ•°","date":"2020-03-24T13:15:56.000Z","updated":"2020-08-13T08:56:50.690Z","comments":true,"path":"2020/03/24/ES6ï¼šasyncå‡½æ•°/","link":"","permalink":"http://ziiyan.github.io/2020/03/24/ES6%EF%BC%9Aasync%E5%87%BD%E6%95%B0/","excerpt":"","text":"async å‡½æ•°å«ä¹‰ async ä½¿å¼‚æ­¥æ“ä½œå˜å¾—æ›´åŠ æ–¹ä¾¿ï¼ŒGenerator çš„è¯­æ³•ç³– å°† Generator å‡½æ•°çš„æ˜Ÿå·ï¼ˆ*ï¼‰æ›¿æ¢æˆ asyncï¼Œå°† yield æ›¿æ¢æˆ await async å¯¹ Generator å‡½æ•°çš„æ”¹è¿›ï¼š å†…ç½®æ‰§è¡Œå™¨ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œ Generator éœ€è¦ co æ¨¡å—æ‰èƒ½è‡ªåŠ¨æ‰§è¡Œ æˆ–è€…è°ƒç”¨ next æ‰‹åŠ¨æ‰§è¡Œ æ›´å¥½çš„è¯­ä¹‰ æ›´å¹¿çš„é€‚ç”¨æ€§ await åé¢å¯ä»¥æ˜¯ Promise å¯¹è±¡å’ŒåŸå§‹ç±»å‹çš„å€¼ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼ï¼Œä¼šè‡ªåŠ¨è½¬æˆç«‹å³ resolved çš„ Promise å¯¹è±¡ï¼‰ è¿”å›å€¼æ˜¯ Promise async å¯ä»¥çœ‹ä½œå¤šä¸ªå¼‚æ­¥æ“ä½œï¼ŒåŒ…è£…æˆçš„ä¸€ä¸ª Promise å¯¹è±¡ï¼Œè€Œ await å‘½ä»¤å°±æ˜¯å†…éƒ¨ then å‘½ä»¤çš„è¯­æ³•ç³– åŸºæœ¬ç”¨æ³• async å‡½æ•°è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ then æ–¹æ³•æ·»åŠ å›è°ƒå‡½æ•° å½“å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€æ—¦é‡åˆ° await å°±ä¼šå…ˆè¿”å›ï¼Œç­‰åˆ°å¼‚æ­¥æ“ä½œå®Œæˆï¼Œå†æ¥ç€æ‰§è¡Œå‡½æ•°ä½“å†…åé¢çš„è¯­å¥ è¯­æ³• è¿”å› Promise å¯¹è±¡ async å‡½æ•°å†…éƒ¨ return è¯­å¥è¿”å›å€¼ï¼Œä¼šæˆä¸º then æ–¹æ³•å›è°ƒå‡½æ•°çš„å‚æ•° async å‡½æ•°å†…éƒ¨æŠ›å‡ºé”™è¯¯ï¼Œä¼šå¯¼è‡´è¿”å›çš„ Promise å¯¹è±¡å˜ä¸º reject çŠ¶æ€ Promise å¯¹è±¡çš„çŠ¶æ€å˜åŒ– async å‡½æ•°è¿”å›çš„ Promise å¯¹è±¡ï¼Œå¿…é¡»ç­‰åˆ°å†…éƒ¨æ‰€æœ‰ await å‘½ä»¤åé¢çš„ Promise å¯¹è±¡æ‰§è¡Œå®Œï¼Œæ‰ä¼šå‘ç”ŸçŠ¶æ€æ”¹å˜ é™¤é return æˆ–æŠ›å‡ºé”™è¯¯ ä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰ async å‡½æ•°å†…éƒ¨çš„å¼‚æ­¥æ“ä½œæ‰§è¡Œå®Œï¼Œæ‰ä¼šæ‰§è¡Œ then æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•° await å‘½ä»¤ å¦‚æœ await åé¢æ˜¯ä¸€ä¸ª thenable å¯¹è±¡ï¼ˆå®šä¹‰äº† then æ–¹æ³•çš„å¯¹è±¡ï¼‰ï¼Œä¼šå°†å…¶åŒç­‰äº Promise å¯¹è±¡ ä»»ä½•ä¸€ä¸ª await è¯­å¥åé¢çš„ Promise å¯¹è±¡å˜ä¸º reject çŠ¶æ€ï¼Œæ•´ä¸ª async å‡½æ•°éƒ½ä¼šä¸­æ–­æ‰§è¡Œ å¯ä»¥åœ¨ async å†…éƒ¨è¿›è¡Œé”™è¯¯å¤„ç†ï¼Œcatch é”™è¯¯å°±ä¸ä¼šå½±å“åç»­æ‰§è¡Œ æ³¨æ„ç‚¹ æœ€å¥½æŠŠ await å‘½ä»¤æ”¾åœ¨ try...catch ä»£ç å—ä¸­ å¤šä¸ª await å‘½ä»¤åé¢çš„å¼‚æ­¥æ“ä½œï¼Œå¦‚æœä¸å­˜åœ¨ç»§å‘å…³ç³»ï¼Œæœ€å¥½åŒæ—¶è§¦å‘ï¼Œæ¯”è¾ƒä¸è€—æ—¶ let [foo, bar] = await Promise.all([getFoo(), getBar()]); // æˆ– let fooPromise = getFoo(); let barPromise = getBar(); let foo = await fooPromise; let bar = await barPromise; &lt;!--ï¿¼0--&gt; é¡¶å±‚ await è¯­æ³•ææ¡ˆ å€Ÿç”¨ await è§£å†³æ¨¡å—å¼‚æ­¥åŠ è½½çš„é—®é¢˜","categories":[],"tags":[{"name":"ECMAScript 6 å…¥é—¨","slug":"ECMAScript-6-å…¥é—¨","permalink":"http://ziiyan.github.io/tags/ECMAScript-6-%E5%85%A5%E9%97%A8/"}]},{"title":"Vue å¸¸è€ƒçŸ¥è¯†ç‚¹","slug":"VueåŸºç¡€","date":"2020-03-24T10:54:30.000Z","updated":"2020-03-24T12:58:10.190Z","comments":true,"path":"2020/03/24/VueåŸºç¡€/","link":"","permalink":"http://ziiyan.github.io/2020/03/24/Vue%E5%9F%BA%E7%A1%80/","excerpt":"","text":"Vue å¸¸è€ƒçŸ¥è¯†ç‚¹ç”Ÿå‘½å‘¨æœŸ beforeCreate ï¼šè·å–ä¸åˆ° props æˆ–è€… data ä¸­çš„æ•°æ®çš„ï¼Œå› ä¸ºè¿™äº›æ•°æ®çš„åˆå§‹åŒ–éƒ½åœ¨ initState ä¸­ã€‚ created ï¼šå¯ä»¥è®¿é—®åˆ°ä¹‹å‰ä¸èƒ½è®¿é—®åˆ°çš„æ•°æ®ï¼Œä½†æ˜¯è¿™æ—¶å€™ç»„ä»¶è¿˜æ²¡è¢«æŒ‚è½½ï¼Œæ‰€ä»¥æ˜¯çœ‹ä¸åˆ°çš„ã€‚ beforeMount ï¼šå¼€å§‹åˆ›å»º VDOMï¼Œç»„ä»¶ä¸­å¦‚æœæœ‰å­ç»„ä»¶çš„è¯ï¼Œä¼šé€’å½’æŒ‚è½½å­ç»„ä»¶ mounted ï¼šå°† VDOM æ¸²æŸ“ä¸ºçœŸå® DOM å¹¶ä¸”æ¸²æŸ“æ•°æ® beforeUpdate ï¼šæ•°æ®æ›´æ–°å‰ updatedï¼šæ•°æ®æ›´æ–°å keep-alive ç‹¬æœ‰çš„ç”Ÿå‘½å‘¨æœŸï¼Œåˆ†åˆ«ä¸º activated å’Œ deactivated ç”¨ keep-alive åŒ…è£¹çš„ç»„ä»¶åœ¨åˆ‡æ¢æ—¶ä¸ä¼šè¿›è¡Œé”€æ¯ï¼Œè€Œæ˜¯ç¼“å­˜åˆ°å†…å­˜ä¸­å¹¶æ‰§è¡Œ deactivated é’©å­å‡½æ•°ï¼Œå‘½ä¸­ç¼“å­˜æ¸²æŸ“åä¼šæ‰§è¡Œ actived é’©å­å‡½æ•°ã€‚ beforeDestroy ï¼šé€‚åˆç§»é™¤äº‹ä»¶ã€å®šæ—¶å™¨ç­‰ç­‰ï¼Œå¦åˆ™å¯èƒ½ä¼šå¼•èµ·å†…å­˜æ³„éœ²çš„é—®é¢˜ã€‚ç„¶åè¿›è¡Œä¸€ç³»åˆ—çš„é”€æ¯æ“ä½œï¼Œå¦‚æœæœ‰å­ç»„ä»¶çš„è¯ï¼Œä¹Ÿä¼šé€’å½’é”€æ¯å­ç»„ä»¶ destroyedï¼šæ‰€æœ‰å­ç»„ä»¶éƒ½é”€æ¯å®Œæ¯•åæ‰ä¼šæ‰§è¡Œ ç»„ä»¶é€šä¿¡çˆ¶å­ç»„ä»¶é€šä¿¡ propsã€emit è®¿é—® $parent æˆ–è€… $children å¯¹è±¡ å…„å¼Ÿç»„ä»¶é€šä¿¡ é€šè¿‡æŸ¥æ‰¾çˆ¶ç»„ä»¶ä¸­çš„å­ç»„ä»¶å®ç°ï¼Œä¹Ÿå°±æ˜¯ this.$parent.$children åœ¨ $children ä¸­å¯ä»¥é€šè¿‡ç»„ä»¶ name æŸ¥è¯¢åˆ°éœ€è¦çš„ç»„ä»¶å®ä¾‹ è·¨å¤šå±‚çº§ç»„ä»¶é€šä¿¡ä»»æ„ç»„ä»¶ Vuex computed å’Œ watch åŒºåˆ« computed æ˜¯è®¡ç®—å±æ€§ï¼Œä¾èµ–å…¶ä»–å±æ€§è®¡ç®—å€¼ï¼Œå¹¶ä¸” computed çš„å€¼æœ‰ç¼“å­˜ï¼Œåªæœ‰å½“è®¡ç®—å€¼å˜åŒ–æ‰ä¼šè¿”å›å†…å®¹ã€‚ watch ç›‘å¬åˆ°å€¼çš„å˜åŒ–å°±ä¼šæ‰§è¡Œå›è°ƒï¼Œåœ¨å›è°ƒä¸­å¯ä»¥è¿›è¡Œä¸€äº›é€»è¾‘æ“ä½œã€‚ v-show ä¸ v-if åŒºåˆ« v-show åªæ˜¯åœ¨ display: none å’Œ display: block ä¹‹é—´åˆ‡æ¢ã€‚ æ— è®ºåˆå§‹æ¡ä»¶æ˜¯ä»€ä¹ˆéƒ½ä¼šè¢«æ¸²æŸ“å‡ºæ¥ï¼Œåé¢åªéœ€è¦åˆ‡æ¢ CSSï¼ŒDOM è¿˜æ˜¯ä¸€ç›´ä¿ç•™ç€çš„ã€‚ æ‰€ä»¥æ€»çš„æ¥è¯´ v-show åœ¨åˆå§‹æ¸²æŸ“æ—¶æœ‰æ›´é«˜çš„å¼€é”€ï¼Œä½†æ˜¯åˆ‡æ¢å¼€é”€å¾ˆå°ï¼Œæ›´é€‚åˆäºé¢‘ç¹åˆ‡æ¢çš„åœºæ™¯ã€‚ v-if çš„è¯å°±å¾—è¯´åˆ° Vue åº•å±‚çš„ç¼–è¯‘äº†ã€‚ å½“å±æ€§åˆå§‹ä¸º false æ—¶ï¼Œç»„ä»¶å°±ä¸ä¼šè¢«æ¸²æŸ“ï¼Œç›´åˆ°æ¡ä»¶ä¸º trueï¼Œå¹¶ä¸”åˆ‡æ¢æ¡ä»¶æ—¶ä¼šè§¦å‘é”€æ¯/æŒ‚è½½ç»„ä»¶ï¼Œæ‰€ä»¥æ€»çš„æ¥è¯´åœ¨åˆ‡æ¢æ—¶å¼€é”€æ›´é«˜ï¼Œæ›´é€‚åˆä¸ç»å¸¸åˆ‡æ¢çš„åœºæ™¯ã€‚ å¹¶ä¸”åŸºäº v-if çš„è¿™ç§æƒ°æ€§æ¸²æŸ“æœºåˆ¶ï¼Œå¯ä»¥åœ¨å¿…è¦çš„æ—¶å€™æ‰å»æ¸²æŸ“ç»„ä»¶ï¼Œå‡å°‘æ•´ä¸ªé¡µé¢çš„åˆå§‹æ¸²æŸ“å¼€é”€ã€‚ ç¼–è¯‘è¿‡ç¨‹ é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼å°†æ¨¡ç‰ˆè§£æä¸º ASTï¼ˆAbstract Syntax Treeï¼ŒæŠ½è±¡è¯­æ³•æ ‘ï¼‰ ä¼˜åŒ– ASTï¼šå¯¹èŠ‚ç‚¹è¿›è¡Œäº†é™æ€å†…å®¹æå–ï¼Œä¹Ÿå°±æ˜¯å°†æ°¸è¿œä¸ä¼šå˜åŠ¨çš„èŠ‚ç‚¹æå–äº†å‡ºæ¥ï¼Œå®ç°å¤ç”¨ Virtual DOMï¼Œè·³è¿‡å¯¹æ¯”ç®—æ³•çš„åŠŸ å°† AST è½¬æ¢ä¸º render å‡½æ•°ï¼šéå†æ•´ä¸ª ASTï¼Œæ ¹æ®ä¸åŒçš„æ¡ä»¶ç”Ÿæˆä¸åŒçš„ä»£ç ","categories":[],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://ziiyan.github.io/tags/Vue/"}]},{"title":"Reactå’ŒVue","slug":"Reactå’ŒVue","date":"2020-03-24T09:53:27.000Z","updated":"2020-03-24T15:55:37.419Z","comments":true,"path":"2020/03/24/Reactå’ŒVue/","link":"","permalink":"http://ziiyan.github.io/2020/03/24/React%E5%92%8CVue/","excerpt":"","text":"å†…å®¹è½¬è‡ªæ˜é‡‘å°å†Œã€Šå‰ç«¯é¢è¯•ä¹‹é“ã€‹ React å’Œ VueMVVMä¸ç®¡æ˜¯ React è¿˜æ˜¯ Vueï¼Œå®ƒä»¬éƒ½ä¸æ˜¯ MVVM æ¡†æ¶ï¼Œåªæ˜¯å€Ÿé‰´ MVVM çš„æ€è·¯ View ï¼šç”¨æˆ·çœ‹åˆ°çš„è§†å›¾ Modelï¼šæœ¬åœ°æ•°æ®å’Œæ•°æ®åº“ä¸­çš„æ•°æ® ä¼ ç»Ÿçš„ MVC æ¶æ„é€šå¸¸æ˜¯ä½¿ç”¨æ§åˆ¶å™¨æ›´æ–°æ¨¡å‹ï¼Œè§†å›¾ä»æ¨¡å‹ä¸­è·å–æ•°æ®å»æ¸²æŸ“ã€‚å½“ç”¨æˆ·æœ‰è¾“å…¥æ—¶ï¼Œä¼šé€šè¿‡æ§åˆ¶å™¨å»æ›´æ–°æ¨¡å‹ï¼Œå¹¶ä¸”é€šçŸ¥è§†å›¾è¿›è¡Œæ›´æ–°ã€‚ ViewModelï¼šåªå…³å¿ƒæ•°æ®å’Œä¸šåŠ¡çš„å¤„ç†ï¼Œä¸å…³å¿ƒ View å¦‚ä½•å¤„ç†æ•°æ® Binnderï¼ˆéšå¼ï¼‰ï¼šå®ç°äº† View å’Œ ViewModel çš„ç»‘å®š ç²¾é«“ï¼šé€šè¿‡ ViewModel å°†è§†å›¾ä¸­çš„çŠ¶æ€å’Œç”¨æˆ·çš„è¡Œä¸ºåˆ†ç¦»å‡ºä¸€ä¸ªæŠ½è±¡ Virtual DOMJS æ¨¡æ‹Ÿ DOM æ“ä½œ DOM å¾ˆæ…¢ï¼Œç›¸è¾ƒäº DOM æ¥è¯´ï¼Œæ“ä½œ JS å¯¹è±¡ä¼šå¿«å¾ˆå¤šï¼Œå¯ä»¥é€šè¿‡ JS æ¥æ¨¡æ‹Ÿ DOM 12345678910const ul = &#123; tag: 'ul', props: &#123; class: 'list' &#125;, children: &#123; tag: 'li', children: '1' &#125;&#125; ä¸Šè¿°ä»£ç å¯¹åº”çš„ DOM å°±æ˜¯ 123&lt;ul class='list'&gt; &lt;li&gt;1&lt;/li&gt;&lt;/ul&gt; Virtual DOM çš„ diff ç®—æ³• é€šè¿‡ JS æ¥æ¨¡æ‹Ÿ DOM å¹¶ä¸”æ¸²æŸ“å¯¹åº”çš„ DOM åªæ˜¯ç¬¬ä¸€æ­¥ï¼Œéš¾ç‚¹åœ¨äºå¦‚ä½•åˆ¤æ–­æ–°æ—§ä¸¤ä¸ª JS å¯¹è±¡çš„æœ€å°å·®å¼‚å¹¶ä¸”å®ç°å±€éƒ¨æ›´æ–° DOMã€‚ Virtual DOM åªä¼šå¯¹åŒä¸€ä¸ªå±‚çº§çš„å…ƒç´ è¿›è¡Œå¯¹æ¯” æ·±åº¦ä¼˜å…ˆéå†ï¼Œæ¯éå†åˆ°ä¸€ä¸ªèŠ‚ç‚¹å°±æŠŠè¯¥èŠ‚ç‚¹å’Œæ–°çš„çš„æ ‘è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœæœ‰å·®å¼‚çš„è¯å°±è®°å½•åˆ°ä¸€ä¸ªå¯¹è±¡é‡Œ key ä½œä¸ºå”¯ä¸€è¡¨ç¤º å·®å¼‚ç±»å‹ æ›¿æ¢æ‰åŸæ¥çš„èŠ‚ç‚¹ ç§»åŠ¨ã€åˆ é™¤ã€æ–°å¢å­èŠ‚ç‚¹ ä¿®æ”¹äº†èŠ‚ç‚¹çš„å±æ€§ å¯¹äºæ–‡æœ¬èŠ‚ç‚¹ï¼Œæ–‡æœ¬å†…å®¹å¯èƒ½ä¼šæ”¹å˜ æŠŠå·®å¼‚åº”ç”¨åˆ°çœŸæ­£çš„DOMæ ‘ä¸Š å¯¹ DOM æ ‘ä¹Ÿè¿›è¡Œæ·±åº¦ä¼˜å…ˆçš„éå†ï¼Œéå†çš„æ—¶å€™ä»ä¿å­˜å·®å¼‚çš„å¯¹è±¡ä¸­æ‰¾å‡ºå½“å‰éå†çš„èŠ‚ç‚¹å·®å¼‚ï¼Œç„¶åè¿›è¡Œ DOM æ“ä½œ æ€»ç»“1234567891011121314151617181920212223// 1\\. æ„å»ºè™šæ‹ŸDOMvar tree = el('div', &#123;'id': 'container'&#125;, [ el('h1', &#123;style: 'color: blue'&#125;, ['simple virtal dom']), el('p', ['Hello, virtual-dom']), el('ul', [el('li')])])// 2\\. é€šè¿‡è™šæ‹ŸDOMæ„å»ºçœŸæ­£çš„DOMvar root = tree.render()document.body.appendChild(root)// 3\\. ç”Ÿæˆæ–°çš„è™šæ‹ŸDOMvar newTree = el('div', &#123;'id': 'container'&#125;, [ el('h1', &#123;style: 'color: red'&#125;, ['simple virtal dom']), el('p', ['Hello, virtual-dom']), el('ul', [el('li'), el('li')])])// 4\\. æ¯”è¾ƒä¸¤æ£µè™šæ‹ŸDOMæ ‘çš„ä¸åŒvar patches = diff(tree, newTree)// 5\\. åœ¨çœŸæ­£çš„DOMå…ƒç´ ä¸Šåº”ç”¨å˜æ›´patch(root, patches) è·¯ç”±åŸç† ç›‘å¬ URL çš„å˜åŒ–ï¼Œç„¶ååŒ¹é…è·¯ç”±è§„åˆ™ï¼Œæ˜¾ç¤ºç›¸åº”çš„é¡µé¢ Hash æ¨¡å¼ www.test.com/#/ å°±æ˜¯ Hash URLï¼Œå½“ # åé¢çš„å“ˆå¸Œå€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¯ä»¥é€šè¿‡ hashchange äº‹ä»¶æ¥ç›‘å¬åˆ° URL çš„å˜åŒ–ï¼Œä»è€Œè¿›è¡Œè·³è½¬é¡µé¢ï¼Œå¹¶ä¸”æ— è®ºå“ˆå¸Œå€¼å¦‚ä½•å˜åŒ–ï¼ŒæœåŠ¡ç«¯æ¥æ”¶åˆ°çš„ URL è¯·æ±‚æ°¸è¿œæ˜¯ www.test.comã€‚ History æ¨¡å¼ History æ¨¡å¼æ˜¯ HTML5 æ–°æ¨å‡ºçš„åŠŸèƒ½ï¼Œä¸»è¦ä½¿ç”¨ history.pushState å’Œ history.replaceState æ”¹å˜ URLã€‚ é€šè¿‡ History æ¨¡å¼æ”¹å˜ URL åŒæ ·ä¸ä¼šå¼•èµ·é¡µé¢çš„åˆ·æ–°ï¼Œåªä¼šæ›´æ–°æµè§ˆå™¨çš„å†å²è®°å½•ã€‚ å¯¹æ¯” Hash æ¨¡å¼åªå¯ä»¥æ›´æ”¹ # åé¢çš„å†…å®¹ï¼ŒHistory æ¨¡å¼å¯ä»¥é€šè¿‡ API è®¾ç½®ä»»æ„çš„åŒæº URL History æ¨¡å¼å¯ä»¥é€šè¿‡ API æ·»åŠ ä»»æ„ç±»å‹çš„æ•°æ®åˆ°å†å²è®°å½•ä¸­ï¼ŒHash æ¨¡å¼åªèƒ½æ›´æ”¹å“ˆå¸Œå€¼ï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦ä¸² Hash æ¨¡å¼æ— éœ€åç«¯é…ç½®ï¼Œå¹¶ä¸”å…¼å®¹æ€§å¥½ã€‚History æ¨¡å¼åœ¨ç”¨æˆ·æ‰‹åŠ¨è¾“å…¥åœ°å€æˆ–è€…åˆ·æ–°é¡µé¢çš„æ—¶å€™ä¼šå‘èµ· URL è¯·æ±‚ï¼Œåç«¯éœ€è¦é…ç½® index.html é¡µé¢ç”¨äºåŒ¹é…ä¸åˆ°é™æ€èµ„æºçš„æ—¶å€™ã€‚ Vue å’Œ React ä¹‹é—´çš„åŒºåˆ« v-model setState JSX","categories":[],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://ziiyan.github.io/tags/Vue/"},{"name":"React","slug":"React","permalink":"http://ziiyan.github.io/tags/React/"}]},{"title":"Vueæ¸²æŸ“æ—¶æœº","slug":"Vueæ¸²æŸ“æ—¶æœº","date":"2020-03-24T04:39:49.000Z","updated":"2020-03-31T07:58:00.323Z","comments":true,"path":"2020/03/24/Vueæ¸²æŸ“æ—¶æœº/","link":"","permalink":"http://ziiyan.github.io/2020/03/24/Vue%E6%B8%B2%E6%9F%93%E6%97%B6%E6%9C%BA/","excerpt":"","text":"â€‹ æœ€è¿‘åœ¨æ”¹æ ·å¼æ—¶ç¢°åˆ°ä¸€ä¸ªå¾ˆç¥å¥‡çš„bugï¼šqrcode ç”Ÿæˆä¸€ä¸ªäºŒç»´ç ï¼Œç»˜åˆ¶åœ¨å¯¹åº”çš„ canvas æ ‡ç­¾ä¸­ï¼Œbug æ˜¯äºŒç»´ç ä¸æ˜¾ç¤ºã€‚ä»£ç æ€»å…±ä¸‰è¡Œï¼Œqrcode çš„å›è°ƒ error æ˜¯ç©ºçš„ï¼Œè¯´æ˜è‡³å°‘äºŒç»´ç çš„åˆ›å»ºåˆ°ç»˜åˆ¶æ˜¯æ²¡æœ‰é”™è¯¯çš„ã€‚ â€‹ æŸ¥çœ‹åˆ†æ”¯è®°å½•ï¼Œå‘ç°äº†ä¸€äº›ç›¸å…³ä¿®æ”¹ï¼šäºŒç»´ç ç æ˜¯æ”¾åœ¨ä¸€ä¸ªå¼¹çª—ä¸­çš„ï¼Œä»¥å‰çš„å¼¹çª—æ˜¯ç”¨ç»å¯¹å®šä½ç§»å‡ºå¯è§†åŒºåŸŸï¼Œå®é™…ä¸Šå¼¹çª—æ˜¯ä¸€ç›´å­˜åœ¨çš„ã€‚å› ä¸ºè®¾è®¡çš„éœ€æ±‚æ¢æˆäº† AntDï¼Œè¿™ä¸ªå¼¹çª—ä¹Ÿæ¢æˆäº† modal ç»„ä»¶ï¼Œåªæœ‰åœ¨ç‚¹å‡»ä¸ªäººä¿¡æ¯çš„æ—¶å€™æ‰æ˜¾ç¤ºã€‚ Modal ç»„ä»¶æ¸²æŸ“æ—¶æœº é¡¹ç›®é‡‡ç”¨çš„éƒ½æ˜¯åŒæ­¥å¼•å…¥çš„æ–¹å¼ï¼Œçˆ¶å­ç»„ä»¶æ¸²æŸ“é¡ºåºå¦‚ä¸‹ï¼š åŠ è½½æ¸²æŸ“è¿‡ç¨‹ çˆ¶ beforeCreateçˆ¶ createdçˆ¶ beforeMountå­ beforeCreateå­ createdå­ beforeMountå­ mountedçˆ¶ mounted æ›´æ–°è¿‡ç¨‹ çˆ¶ beforeUpdateå­ beforeUpdateå­ updatedçˆ¶ updated ç”Ÿå‘½å‘¨æœŸä»‹ç»ï¼šhttps://cn.vuejs.org/v2/api/#%E9%80%89%E9%A1%B9-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90 Bug åˆ†ææµç¨‹ ç°åœ¨åœ¨ mouted é‡Œé¢åŠ å…¥ç»˜åˆ¶äºŒç»´ç çš„ä»£ç  document.getElementById(â€˜canvasâ€™) è·å–åˆ°çš„å…ƒç´ ä¸ºç©º qrcode æŠ¥é”™ï¼Œè¿™é‡Œä¸»è¦æ˜¯ç”¨æ¥ç”ŸæˆäºŒç»´ç çš„ userInfo.pri_Key è¿˜æ²¡è·å–åˆ°å€¼ åœ¨ watch é‡Œé¢åŠ å…¥ç»˜åˆ¶äºŒç»´ç çš„ä»£ç ï¼Œç›‘å¬çš„æ˜¯æ§åˆ¶å¼¹çª—æ˜¯å¦æ˜¾ç¤ºçš„å˜é‡ document.getElementById(â€˜canvasâ€™) è·å–åˆ°çš„å…ƒç´ ä¸ºç©º userInfo.pri_Key æœ‰å€¼ï¼Œqrcode ä¸æŠ¥é”™äº† å¾ˆæ˜¾ç„¶ï¼Œé—®é¢˜å°±åœ¨ä¸ºä»€ä¹ˆè¿™ä¸ª canvas æ ‡ç­¾ä¸€ç›´è·å–ä¸åˆ°ï¼Œé‚£ä»€ä¹ˆæ—¶å€™æ‰èƒ½è·å–åˆ°å‘¢ï¼Ÿ Click ç‚¹å‡»æ˜¾ç¤º modalï¼Œè¦åˆ°å­ç»„ä»¶ updated æ—¶æ‰èƒ½è·å–åˆ°æ ‡ç­¾ ä¹Ÿå°±æ˜¯è¯´åœ¨ updated é‡Œé¢æ‰æ›´æ–° DOMï¼Œwatch é‡Œé¢æ˜¯ä¸æ›´æ–°çš„ å®˜ç½‘é‡Œé¢å…³äº updated çš„æè¿° ç”±äºæ•°æ®æ›´æ”¹å¯¼è‡´çš„è™šæ‹Ÿ DOM é‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ï¼Œåœ¨è¿™ä¹‹åä¼šè°ƒç”¨è¯¥é’©å­ã€‚ å½“è¿™ä¸ªé’©å­è¢«è°ƒç”¨æ—¶ï¼Œç»„ä»¶ DOM å·²ç»æ›´æ–°ï¼Œæ‰€ä»¥ä½ ç°åœ¨å¯ä»¥æ‰§è¡Œä¾èµ–äº DOM çš„æ“ä½œã€‚ç„¶è€Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥é¿å…åœ¨æ­¤æœŸé—´æ›´æ”¹çŠ¶æ€ã€‚å¦‚æœè¦ç›¸åº”çŠ¶æ€æ”¹å˜ï¼Œé€šå¸¸æœ€å¥½ä½¿ç”¨è®¡ç®—å±æ€§æˆ– watcher å–è€Œä»£ä¹‹ã€‚ ä½†æˆ‘ä»¬çŸ¥é“ï¼Œwatch é‡Œ DOM è¿˜æ²¡æ›´æ–°ï¼Œæˆ‘ä»¬å¦‚ä½•åœ¨ watch é‡Œé¢ä¿®æ”¹ canvas å‘¢ï¼Ÿ å¦‚æœä½ å¸Œæœ›ç­‰åˆ°æ•´ä¸ªè§†å›¾éƒ½é‡ç»˜å®Œæ¯•ï¼Œå¯ä»¥åœ¨ updated é‡Œä½¿ç”¨ vm.$nextTick nextTick å°†å›è°ƒå»¶è¿Ÿåˆ°ä¸‹æ¬¡ DOM æ›´æ–°å¾ªç¯ä¹‹åæ‰§è¡Œã€‚åœ¨ä¿®æ”¹æ•°æ®ä¹‹åç«‹å³ä½¿ç”¨å®ƒï¼Œç„¶åç­‰å¾… DOM æ›´æ–°ã€‚ æ˜¾ç„¶ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„æ–¹æ³•äº†ã€‚ ç­‰å¾… DOM æ›´æ–°ï¼Œå¯ä»¥å¾—åˆ° canvas æ ‡ç­¾ è°ƒç”¨ qrcode åº“åˆ›å»ºäºŒç»´ç å¹¶ä¼šç»˜åˆ¶åˆ° canvas ä¸Š å°†ç»˜åˆ¶äºŒç»´ç çš„ä»£ç å°è£…ä¸€å±‚ nextTick document.getElementById(â€˜canvasâ€™) å¯ä»¥æ­£å¸¸è·å–åˆ°å…ƒç´ ï¼ŒäºŒç»´ç æ­£å¸¸æ˜¾ç¤º å¼‚æ­¥æ›´æ–°é˜Ÿåˆ— Vue åœ¨æ›´æ–° DOM æ—¶æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ã€‚ åªè¦ä¾¦å¬åˆ°æ•°æ®å˜åŒ–ï¼ŒVue å°†å¼€å¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¹¶ç¼“å†²åœ¨åŒä¸€äº‹ä»¶å¾ªç¯ä¸­å‘ç”Ÿçš„æ‰€æœ‰æ•°æ®å˜æ›´ã€‚ å¦‚æœåŒä¸€ä¸ª watcher è¢«å¤šæ¬¡è§¦å‘ï¼Œåªä¼šè¢«æ¨å…¥åˆ°é˜Ÿåˆ—ä¸­ä¸€æ¬¡ã€‚ è¿™ç§åœ¨ç¼“å†²æ—¶å»é™¤é‡å¤æ•°æ®å¯¹äºé¿å…ä¸å¿…è¦çš„è®¡ç®—å’Œ DOM æ“ä½œæ˜¯éå¸¸é‡è¦çš„ã€‚ ç„¶åï¼Œåœ¨ä¸‹ä¸€ä¸ªçš„äº‹ä»¶å¾ªç¯ â€œtickâ€ ä¸­ï¼ŒVue åˆ·æ–°é˜Ÿåˆ—å¹¶æ‰§è¡Œå®é™… (å·²å»é‡çš„) å·¥ä½œã€‚ Vue åœ¨å†…éƒ¨å¯¹å¼‚æ­¥é˜Ÿåˆ—å°è¯•ä½¿ç”¨åŸç”Ÿçš„ Promise.thenã€MutationObserver å’Œ setImmediateï¼Œå¦‚æœæ‰§è¡Œç¯å¢ƒä¸æ”¯æŒï¼Œåˆ™ä¼šé‡‡ç”¨ setTimeout(fn, 0) ä»£æ›¿ã€‚ ä¹‹å‰è¯¯æ‰“è¯¯æ’ä½¿ç”¨äº† setTimeout(fn, 0)ï¼Œå®é™…ä¸Šæ°å¥½å®ç°äº†å¼‚æ­¥é˜Ÿåˆ— å¦‚æœä½ æƒ³åŸºäºæ›´æ–°åçš„ DOM çŠ¶æ€æ¥åšç‚¹ä»€ä¹ˆï¼Œè¿™å°±å¯èƒ½ä¼šæœ‰äº›æ£˜æ‰‹ã€‚ è™½ç„¶ Vue.js é€šå¸¸é¼“åŠ±å¼€å‘äººå‘˜ä½¿ç”¨â€œæ•°æ®é©±åŠ¨â€çš„æ–¹å¼æ€è€ƒï¼Œé¿å…ç›´æ¥æ¥è§¦ DOMï¼Œä½†æ˜¯æœ‰æ—¶æˆ‘ä»¬å¿…é¡»è¦è¿™ä¹ˆåšã€‚ ä¸ºäº†åœ¨æ•°æ®å˜åŒ–ä¹‹åç­‰å¾… Vue å®Œæˆæ›´æ–° DOMï¼Œå¯ä»¥åœ¨æ•°æ®å˜åŒ–ä¹‹åç«‹å³ä½¿ç”¨ Vue.nextTick(callback)ã€‚è¿™æ ·å›è°ƒå‡½æ•°å°†åœ¨ DOM æ›´æ–°å®Œæˆåè¢«è°ƒç”¨ã€‚ æ€»ç»“ moda ç»„ä»¶åœ¨ mounted æ—¶å¹¶ä¸ä¼šæ¸²æŸ“åˆ°é¡µé¢ä¸Š åœ¨æ§åˆ¶ modal æ˜¾ç¤ºå˜é‡ä¸º true ä¹‹åï¼Œç›´åˆ° updated é˜¶æ®µæ‰æ›´æ–° DOM watch å½“ä¸­æœ‰å…³ DOM çš„æ“ä½œï¼Œè¦åˆ©ç”¨ nextTick å»¶è¿Ÿåˆ° DOM æ¸²æŸ“ä¹‹åæ‰§è¡Œ","categories":[],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://ziiyan.github.io/tags/Vue/"},{"name":"æµè§ˆå™¨","slug":"æµè§ˆå™¨","permalink":"http://ziiyan.github.io/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"}]},{"title":"axios","slug":"axios","date":"2020-03-23T06:21:08.000Z","updated":"2020-03-24T15:55:45.775Z","comments":true,"path":"2020/03/23/axios/","link":"","permalink":"http://ziiyan.github.io/2020/03/23/axios/","excerpt":"","text":"","categories":[],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://ziiyan.github.io/tags/Vue/"}]},{"title":"ES6ï¼šIteratorå’Œfor...ofå¾ªç¯","slug":"ES6ï¼šIteratorå’Œfor-ofå¾ªç¯","date":"2020-03-22T06:38:06.000Z","updated":"2020-08-13T08:57:04.431Z","comments":true,"path":"2020/03/22/ES6ï¼šIteratorå’Œfor-ofå¾ªç¯/","link":"","permalink":"http://ziiyan.github.io/2020/03/22/ES6%EF%BC%9AIterator%E5%92%8Cfor-of%E5%BE%AA%E7%8E%AF/","excerpt":"","text":"Iterator å’Œ forâ€¦of å¾ªç¯Iteratorï¼ˆéå†å™¨ï¼‰çš„æ¦‚å¿µ JS åŸæ¥è¡¨ç¤ºâ€é›†åˆâ€çš„æ˜¯æ•°ç»„ Array å’Œå¯¹è±¡ Objectï¼ŒES6 æ·»åŠ äº† Map å’Œ Set Iterator æ˜¯ä¸€ç§æ¥å£ï¼Œä»»ä½•æ•°æ®ç»“æ„åªè¦éƒ¨ç½² Iterator æ¥å£ï¼Œå°±å¯ä»¥å®Œæˆä¾¿åˆ©æ“ä½œï¼ˆå³ä¾æ¬¡å¤„ç†è¯¥æ•°æ®ç»“æ„çš„æ‰€æœ‰æˆå‘˜ï¼‰ Iterator ä½œç”¨ï¼š ä¸ºå„ç§æ•°æ®ç»“æ„æä¾›ç»Ÿä¸€çš„ã€ç®€ä¾¿çš„è®¿é—®æ¥å£ ä½¿æ•°æ®ç»“æ„çš„æˆå‘˜èƒ½å¤ŸæŒ‰æŸç§æ¬¡åºæ’åˆ— ES6 åˆ›é€ äº†æ–°çš„éå†å‘½ä»¤ for...of éå†è¿‡ç¨‹ åˆ›å»ºæŒ‡é’ˆå¯¹è±¡ï¼ŒæŒ‡å‘å½“å‰æ•°æ®ç»“æ„çš„èµ·å§‹ä½ç½® éå†å¯¹è±¡æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ js æœ‰æŒ‡é’ˆçš„æ¦‚å¿µï¼Ÿ ç¬¬ä¸€æ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„ next æ–¹æ³•ï¼Œå¯ä»¥å°†æŒ‡é’ˆæŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬ä¸€ä¸ªæˆå‘˜ ä¸æ–­è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„ next æ–¹æ³•ï¼Œç›´åˆ°å®ƒæŒ‡å‘æ•°æ®ç»“æ„çš„ç»“æŸä½ç½® æ¯æ¬¡è°ƒç”¨ next è¿”å›ä¸€ä¸ªåŒ…å« value he done ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ã€‚ value å±æ€§æ˜¯å½“å‰æˆå‘˜çš„å€¼ done å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºéå†æ˜¯å¦ç»“æŸ 123456789101112131415var it = makeIterator(['a', 'b']);it.next();it.next();it.next();function makeIterator(array) &#123; var nextIndex = 0; return &#123; next: function() &#123; return nextIndex &lt; array.length ? &#123;value: array[nextIndex++], done: false&#125; : &#123;value: undefined, done: true&#125; &#125; &#125;&#125; é»˜è®¤ Iterator æ¥å£ å½“ä½¿ç”¨ for...of å¾ªç¯éå†æŸç§æ•°æ®ç»“æ„æ—¶ï¼Œè¯¥å¾ªç¯ä¼šè‡ªåŠ¨å»å¯»æ‰¾ Iterator æ¥å£ ES6 è§„å®šï¼Œé»˜è®¤çš„ Iterator æ¥å£éƒ¨ç½²åœ¨æ•°æ®ç»“æ„çš„ Symbol.iterator å±æ€§ï¼Œæˆ–è€…è¯´ï¼Œä¸€ä¸ªæ•°æ®ç»“æ„åªè¦æœ‰ Symbol.iterator å±æ€§ï¼Œå°±è®¤ä¸ºæ˜¯å¯éå†çš„ Symbol.iterator å±æ€§æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå°±æ˜¯å½“å‰æ•°æ®ç»“æ„é»˜è®¤çš„éå†å™¨ç”Ÿäº§å‡½æ•° æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªéå†å™¨ å±æ€§å Symbol.iterator æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¿”å› Symbol å¯¹è±¡çš„ iterator å±æ€§ 123456789101112const obj = &#123; [Symbol.iterator]: function () &#123; return &#123; next: function() &#123; return &#123; value: 1, done: true &#125;; &#125; &#125;; &#125;&#125;; åŸç”Ÿå…·å¤‡ Iterator æ¥å£çš„æ•°æ®ç»“æ„ï¼š Array Map Set String TypedArray å‡½æ•°çš„ arguments å¯¹è±¡ NodeList å¯¹è±¡ å¯¹è±¡ï¼ˆObjectï¼‰ä¹‹æ‰€ä»¥æ²¡æœ‰é»˜è®¤éƒ¨ç½² Iterator æ¥å£ï¼Œæ˜¯å› ä¸ºå¯¹è±¡çš„å“ªä¸ªå±æ€§å…ˆéå†ï¼Œå“ªä¸ªå±æ€§åéå†æ˜¯ä¸ç¡®å®šçš„ï¼Œéœ€è¦å¼€å‘è€…æ‰‹åŠ¨æŒ‡å®šã€‚æœ¬è´¨ä¸Šï¼Œéå†å™¨æ˜¯ä¸€ç§çº¿æ€§å¤„ç†ï¼Œå¯¹äºä»»ä½•éçº¿æ€§çš„æ•°æ®ç»“æ„ï¼Œéƒ¨ç½²éå†å™¨æ¥å£ï¼Œå°±ç­‰äºéƒ¨ç½²ä¸€ç§çº¿æ€§è½¬æ¢ã€‚ä¸è¿‡ï¼Œä¸¥æ ¼åœ°è¯´ï¼Œå¯¹è±¡éƒ¨ç½²éå†å™¨æ¥å£å¹¶ä¸æ˜¯å¾ˆå¿…è¦ï¼Œå› ä¸ºè¿™æ—¶å¯¹è±¡å®é™…ä¸Šè¢«å½“ä½œ Map ç»“æ„ä½¿ç”¨ï¼ŒES5 æ²¡æœ‰ Map ç»“æ„ï¼Œè€Œ ES6 åŸç”Ÿæä¾›äº†ã€‚ è°ƒç”¨ Iterator æ¥å£çš„åœºåˆ æ•°ç»„å’Œ Set ç»“æ„è¿›è¡Œè§£æ„èµ‹å€¼æ—¶ï¼Œé»˜è®¤è°ƒç”¨ Symbol.iterator æ–¹æ³• æ‰©å±•è¿ç®—ç¬¦ ... éƒ¨ç½²äº† Iterator æ¥å£çš„æ•°æ®ç»“æ„éƒ½èƒ½ç”¨æ‰©å±•è¿ç®—ç¬¦ yield* åé¢è·Ÿçš„æ˜¯ä¸€ä¸ªå¯éå†çš„è§£æ„ï¼Œå®ƒä¼šè°ƒç”¨è¯¥ç»“æ„çš„éå†å™¨æ¥å£ æ•°ç»„çš„éå†ä¼šè°ƒç”¨éå†å™¨æ¥å£ï¼Œæ‰€ä»¥ä»»ä½•æ¥å—æ•°ç»„ä½œä¸ºå‚æ•°çš„åœºåˆï¼Œéƒ½è°ƒç”¨äº†éå†å™¨ for â€¦ of Array.from() Map(), Set(), WeakMap(), WeakSet() Promise.all() Promise.race() Iterator æ¥å£ä¸ Generator å‡½æ•° Symbol.iterator æ–¹æ³•çš„æœ€ç®€å•å®ç° 1234567891011121314151617181920212223let myIterable = &#123; [Symbol.iterator]: function* () &#123; yield 1; yield 2; yield 3; &#125;&#125;[...myIterable] // [1, 2, 3]// æˆ–let obj = &#123; * [Symbol.iterator]() &#123; yield 'hello'; yield 'world'; &#125;&#125;;for (let x of obj) &#123; console.log(x);&#125;// \"hello\"// \"world\" forâ€¦of å¾ªç¯ æ•°æ®ç»“æ„åªè¦éƒ¨ç½²äº†Symbol.iteratorå±æ€§ï¼Œå°±è¢«è§†ä¸ºå…·æœ‰ iterator æ¥å£ï¼Œå°±å¯ä»¥ç”¨for...ofå¾ªç¯éå†å®ƒçš„æˆå‘˜ ä¹Ÿå°±æ˜¯è¯´ï¼Œfor...ofå¾ªç¯å†…éƒ¨è°ƒç”¨çš„æ˜¯æ•°æ®ç»“æ„çš„Symbol.iteratoræ–¹æ³• for...ofå¾ªç¯å¯ä»¥ä½¿ç”¨çš„èŒƒå›´ æ•°ç»„ Set Map æŸäº›ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ argumentså¯¹è±¡ DOM NodeList å¯¹è±¡ Generator å¯¹è±¡ å­—ç¬¦ä¸²","categories":[],"tags":[{"name":"ECMAScript 6 å…¥é—¨","slug":"ECMAScript-6-å…¥é—¨","permalink":"http://ziiyan.github.io/tags/ECMAScript-6-%E5%85%A5%E9%97%A8/"}]},{"title":"ES6ï¼šSetå’ŒMapæ•°æ®ç»“æ„","slug":"ES6ï¼šSetå’ŒMapæ•°æ®ç»“æ„","date":"2020-03-22T05:34:01.000Z","updated":"2020-08-13T08:57:20.471Z","comments":true,"path":"2020/03/22/ES6ï¼šSetå’ŒMapæ•°æ®ç»“æ„/","link":"","permalink":"http://ziiyan.github.io/2020/03/22/ES6%EF%BC%9ASet%E5%92%8CMap%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","excerpt":"","text":"Set å’Œ Map æ•°æ®ç»“æ„SetåŸºæœ¬ç”¨æ³• ç±»ä¼¼äºæ•°ç»„ï¼Œä½†æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ ä¸ä¼šå‘ç”Ÿç±»å‹è½¬æ¢ï¼Œæ‰€ä»¥ 5 å’Œ â€œ5â€ ä¸åŒ ä¸¤ä¸ª NaN æ˜¯ç›¸ç­‰çš„ï¼Œè¿™å’Œ === ä¸åŒ ä¸¤ä¸ªå¯¹è±¡æ€»æ˜¯ä¸æƒ³ç­‰ Set æ„é€ å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–å…·æœ‰ iterable æ¥å£çš„å…¶ä»–æ•°æ®ç»“æ„ï¼‰ä½œä¸ºå‚æ•° 123456789const s = new Set();[2, 3, 5, 4, 5, 2, 2].forEach(x =&gt; s.add(x));// ç­‰ä»·äºconst s = new Set([2, 3, 5, 4, 5, 2, 2]);for (let i of s) &#123; console.log(i);&#125;// 2 3 5 4 Array.from å¯ä»¥å°† Set ç»“æ„è½¬ä¸ºæ•°ç»„ Set å®ä¾‹çš„å±æ€§å’Œæ–¹æ³• å±æ€§ Set.prototype.constructor æ„é€ å‡½æ•° Set.prototype.size è¿”å› Set å®ä¾‹çš„æˆå‘˜æ€»æ•° æ–¹æ³• æ“ä½œæ–¹æ³• Set.prototype.add(value) æ·»åŠ æŸä¸ªå€¼ï¼Œè¿”å› Set ç»“æ„æœ¬èº« Set.prototype.delete(value) åˆ é™¤æŸä¸ªå€¼ï¼Œè¿”å›å¸ƒå°”è¡¨ç¤ºæ˜¯å¦æˆåŠŸ Set.prototype.has(value) è¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦ä¸º Set æˆå‘˜ Set.prototype.clear(value)æ¸…ç©ºï¼Œæ²¡æœ‰è¿”å›å€¼ éå†æ–¹æ³• Set.prototype.keys() è¿”å›é”®åï¼Œéå†å™¨å¯¹è±¡ Set.prototype.values() è¿”å›é”®å€¼ï¼Œéå†å™¨å¯¹è±¡ Set ç»“æ„æ²¡æœ‰é”®åï¼Œåªæœ‰é”®å€¼ï¼ˆæˆ–è€…è¯´é”®åé”®å€¼éƒ½æ˜¯åŒä¸€ä¸ªå€¼ï¼‰ï¼Œæ‰€ä»¥ keys æ–¹æ³•å’Œ values æ–¹æ³•ä¸€æ · Set.prototype.entries() è¿”å›é”®å€¼å¯¹ï¼Œéå†å™¨å¯¹è±¡ Set.prototype.forEach() ä½¿ç”¨å›è°ƒå‡½æ•°éå†æ¯ä¸ªæˆå‘˜ WeakSet ç±»ä¼¼ Set æˆå‘˜åªèƒ½æ˜¯å¯¹è±¡ å¼±å¼•ç”¨ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶ä¸è€ƒè™‘ WeakSet çš„å¼•ç”¨ï¼Œå¯èƒ½ä¼šéšæ—¶è¢«æ¸…ç©º ä¸å¯éå† MapåŸºæœ¬ç”¨æ³• ç±»ä¼¼äºå¯¹è±¡ï¼Œæ˜¯é”®å€¼å¯¹çš„é›†åˆ å¯¹è±¡çš„é”®åªèƒ½æ˜¯å­—ç¬¦ä¸²ï¼ŒMap çš„é”®ä¸é™åˆ¶ç±»å‹ Map æ„é€ å‡½æ•°å¯æ¥å—æ•°ç»„ï¼Œæ•°ç»„æˆå‘˜è¡¨ç¤ºä¸€ä¸ªé”®å€¼å¯¹ï¼ˆä»»ä½•å…·æœ‰ Iterator æ¥å£ï¼Œä¸”æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ªåŒå…ƒç´ çš„æ•°ç»„çš„æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚ Set å’Œ Mapï¼‰ 12345678910111213const map = new Map([ ['name', 'zhangsan'], ['title', 'Author']])// å®é™…ä¸Šæ‰§è¡Œconst items = [ ['name', 'zhangsan'], ['title', 'Author']]const map = new Map();items.forEach( ([key, value]) =&gt; map.set(key, value)) å¤šæ¬¡èµ‹å€¼ä¸€ä¸ªé”®ï¼Œä¼šè¦†ç›– è¯»å–ä¸€ä¸ªæœªçŸ¥çš„é”®ï¼Œè¿”å› undefined å¯¹äºå¯¹è±¡ï¼Œåœ°å€ç›¸åŒ Map ç»“æ„æ‰è§†ä¸ºåŒä¸€ä¸ªé”® å¯¹äºç®€å•ç±»å‹ï¼Œå€¼ä¸¥æ ¼ç›¸ç­‰ === å°±æ˜¯ä¸€ä¸ªé”® 1234const map = new Map();map.set(['a'], 555);map.get(['a']) // undefined// ['a'] æ˜¯å®ä¾‹ï¼Œè¿™é‡Œä¸¤ä¸ªå®ä¾‹ ['a'] å†…å­˜åœ°å€ä¸åŒ å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³• å±æ€§ size æ–¹æ³• æ“ä½œæ–¹æ³• Map.prototype.set(key, value) è¿”å›å½“å‰ Map å¯¹è±¡ï¼Œå¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³• Map.prototype.get(key) Map.prototype.has(key) Map.prototype.delete(key) Map.prototype.clear(key) éå†æ–¹æ³• Map.prototype.keys() Map.prototype.values() Map.prototype.entries() Map.prototype.forEach() Map æœ¬èº«æ²¡æœ‰ map å’Œ filter æ–¹æ³•ï¼Œéœ€è¦ç»“åˆæ•°ç»„ ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢ Map -&gt; æ•°ç»„ [...map] æ•°ç»„ -&gt; Map new Map(array) Map -&gt; å¯¹è±¡ å¯¹è±¡ -&gt; Map Map -&gt; JSON JSON -&gt; Map WeakMap ç±»ä¼¼ Map é”®ååªèƒ½å¯¹è±¡ï¼ˆé™¤äº† nullï¼‰ æŒ‡å‘çš„å¯¹è±¡ä¸è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶","categories":[],"tags":[{"name":"ECMAScript 6 å…¥é—¨","slug":"ECMAScript-6-å…¥é—¨","permalink":"http://ziiyan.github.io/tags/ECMAScript-6-%E5%85%A5%E9%97%A8/"}]},{"title":"ES6ï¼šGeneratorå‡½æ•°çš„è¯­æ³•","slug":"ES6ï¼šGeneratorå‡½æ•°çš„è¯­æ³•","date":"2020-03-21T09:18:23.000Z","updated":"2020-08-13T08:57:01.993Z","comments":true,"path":"2020/03/21/ES6ï¼šGeneratorå‡½æ•°çš„è¯­æ³•/","link":"","permalink":"http://ziiyan.github.io/2020/03/21/ES6%EF%BC%9AGenerator%E5%87%BD%E6%95%B0%E7%9A%84%E8%AF%AD%E6%B3%95/","excerpt":"","text":"Generator å‡½æ•°çš„è¯­æ³•ç®€ä»‹åŸºæœ¬æ¦‚å¿µ å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆï¼Œè¯­æ³•è¡Œä¸ºä¸ä¼ ç»Ÿå‡½æ•°å®Œå…¨ä¸åŒ ç†è§£ è¯­æ³•ä¸Šï¼ŒGenerator å‡½æ•°æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œå°è£…äº†å¤šä¸ªå†…éƒ¨çŠ¶æ€ æ‰§è¡Œ Generator å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ éå†å™¨å¯¹è±¡å¯ä»¥ä¾æ¬¡éå† Generator å‡½æ•°å†…éƒ¨çš„æ¯ä¸€ä¸ªçŠ¶æ€ å½¢å¼ä¸Šï¼ŒGenerator å‡½æ•°æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•° ä¸¤ä¸ªç‰¹å¾ function å…³é”®å­—ä¸å‡½æ•°åä¹‹é—´æœ‰ä¸€ä¸ªæ˜Ÿå·ï¼Œæ˜Ÿå·ä½ç½®å’Œç©ºæ ¼ä½ç½®çš„å…ˆåå…³ç³»æ²¡æœ‰è§„å®š å‡½æ•°ä½“å†…éƒ¨ä½¿ç”¨ yield è¡¨è¾¾å¼ï¼Œå®šä¹‰ä¸åŒçš„å†…éƒ¨çŠ¶æ€ 123456789function* helloWorldGenerator() &#123; yield 'hello'; yield 'world'; return 'ending';&#125;// ä¸‰ä¸ªçŠ¶æ€var hw = helloWorldGenerator();// è°ƒç”¨ è°ƒç”¨ Generator å‡½æ•°åï¼Œè¯¥å‡½æ•°å¹¶ä¸æ‰§è¡Œï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘å†…éƒ¨çŠ¶æ€çš„æŒ‡é’ˆå¯¹è±¡ï¼ˆiterator Objectï¼‰ è°ƒç”¨éå†å™¨å¯¹è±¡çš„ next æ–¹æ³•ï¼Œä½¿å¾—æŒ‡é’ˆç§»å‘ä¸‹ä¸€ä¸ªçŠ¶æ€ ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡è°ƒç”¨ next æ–¹æ³•ï¼Œå†…éƒ¨æŒ‡é’ˆå°±ä»å‡½æ•°å¤´éƒ¨æˆ–ä¸Šä¸€æ¬¡åœä¸‹æ¥çš„åœ°æ–¹å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ª yield è¡¨è¾¾å¼ï¼ˆæˆ– return è¯­å¥ï¼‰ æ¢è¨€ä¹‹ï¼ŒGenerator å‡½æ•°æ˜¯åˆ†æ®µæ‰§è¡Œçš„ï¼Œyield è¡¨è¾¾å¼æ˜¯æš‚åœæ‰§è¡Œçš„æ ‡è®°ï¼Œnext æ–¹æ³•æ¢å¤æ‰§è¡Œ next è¿”å›ä¸€ä¸ªå¯¹è±¡ å±æ€§ value æ˜¯å½“å‰ yield è¡¨è¾¾å¼çš„å€¼ å±æ€§ done è¡¨ç¤ºéå†æ˜¯å¦ç»“æŸ 12345678hw.next()// &#123; value: 'hello', done: false &#125;hw.next()// &#123; value: 'world', done: false &#125;hw.next()// &#123; value: 'ending', done: true &#125;hw.next()// &#123; value: undefined, done: true &#125; yield è¡¨è¾¾å¼ next æ–¹æ³•çš„è¿è¡Œé€»è¾‘ é‡åˆ° yield è¡¨è¾¾å¼ï¼Œå°±æš‚åœæ‰§è¡Œï¼Œå¹¶å°†ç´§è·Ÿåœ¨ yield åé¢çš„è¡¨è¾¾å¼çš„å€¼ä½œä¸ºå¯¹è±¡çš„ value å±æ€§è¿”å› ä¸‹æ¬¡è°ƒç”¨ yield æ—¶ï¼Œå†ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ª yield è¡¨è¾¾å¼ å¦‚æœæ²¡æœ‰é‡åˆ°æ–°çš„è¡¨è¾¾å¼ï¼Œå°±ä¸€ç›´è¿è¡Œåˆ° returnï¼Œå¹¶å°† return è¯­å¥åé¢çš„è¡¨è¾¾å¼çš„å€¼ä½œä¸ºå¯¹è±¡çš„ value å±æ€§ å¦‚æœæ²¡æœ‰return è¯­å¥ï¼Œåˆ™è¿”å›å¯¹è±¡çš„ value å±æ€§å€¼ä¸º undefined yield è¡¨è¾¾å¼åé¢çš„è¡¨è¾¾å¼ï¼Œåªæœ‰è°ƒç”¨ next æ–¹æ³•ã€å†…éƒ¨æŒ‡é’ˆæŒ‡å‘è¯¥è¯­å¥æ—¶æ‰ä¼šæ‰§è¡Œ ç»™ JavaScript æä¾›äº†æ‰‹åŠ¨æƒ°æ€§æ±‚å€¼çš„è¯­æ³•åŠŸèƒ½ ä¸ç”¨ yield çš„æƒ…å†µä¸‹ï¼ŒGenerator å°±æ˜¯ä¸€ä¸ªå•çº¯çš„æš‚ç¼“æ‰§è¡Œå‡½æ•° yield åªèƒ½ç”¨åœ¨ Generator å‡½æ•°é‡Œé¢ï¼Œå…¶å®ƒåœ°æ–¹ä¼šæŠ¥é”™ yield å¦‚æœç”¨åœ¨å¦ä¸€ä¸ªè¡¨è¾¾å¼ä¸­ï¼Œå¿…é¡»æ”¾åœ¨æ‹¬å·é‡Œé¢ yield ç”¨åšå‡½æ•°å‚æ•°æˆ–æ”¾åœ¨èµ‹å€¼è¡¨è¾¾å¼å³è¾¹ï¼Œä¸ç”¨æ‹¬å· next æ–¹æ³•çš„å‚æ•° è¿™èŠ‚æ²¡çœ‹æ‡‚ yield è¡¨è¾¾å¼æœ¬èº«æ²¡æœ‰è¿”å›å€¼ï¼Œæˆ–è€…è¯´æ€»æ˜¯è¿”å› undefined next æ–¹æ³•å¯ä»¥å¸¦ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°ä¼šè¢«å½“ä½œä¸Šä¸€ä¸ª yield è¡¨è¾¾å¼çš„è¿”å›å€¼ forâ€¦of å¾ªç¯ for...of å¾ªç¯è‡ªåŠ¨éå† Generator å‡½æ•°è¿è¡Œæ—¶ç”Ÿæˆçš„ Iterator å¯¹è±¡ï¼Œæ­¤æ—¶ä¸éœ€è¦è°ƒç”¨ next æ–¹æ³• æ–æ³¢é‚£å¥‘ 123456789101112function* fibonacci() &#123; let [prev, curr] = [0, 1]; for (;;) &#123; yield curr; [prev, curr] = [curr, prev + curr]; &#125;&#125;for (let n of fibonacci()) &#123; if (n &gt; 1000) break; console.log(n);&#125; Generator.prototype.throw() throw æ–¹æ³•å¯ä»¥åœ¨å‡½æ•°ä½“å¤–æŠ›å‡ºé”™è¯¯ï¼Œåœ¨å‡½æ•°ä½“å†…æ•è· å‰ææ˜¯å¿…é¡»è¿›è¡Œè¿‡ä¸€æ¬¡ next æ–¹æ³• æ•è·åä¼šè‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡ next æ–¹æ³•ï¼Œä¸å½±å“ä¸‹æ¬¡éå† å¦‚æœ Generator å‡½æ•°å†…éƒ¨æ²¡æœ‰éƒ¨ç½² try...catch ä»£ç å—ï¼Œé‚£ä¹ˆé”™è¯¯ä¼šè¢«å¤–éƒ¨çš„ try...catch ä»£ç å—æ•è· å¦‚æœéƒ½æ²¡æœ‰ï¼Œé‚£ä¹ˆç¨‹åºå°†æŠ¥é”™ï¼Œç›´æ¥ä¸­æ–­æ‰§è¡Œ Generator.prototype.return() è¿”å›ç»™å®šçš„å€¼ï¼Œå¹¶ç»ˆç»“éå† Generator å‡½æ•° next()ã€throw()ã€return() çš„å…±åŒç‚¹ ä½œç”¨éƒ½æ˜¯è®© Generator å‡½æ•°æ¢å¤æ‰§è¡Œï¼Œä½¿ç”¨ä¸åŒçš„è¯­å¥æ›¿æ¢ yield è¡¨è¾¾å¼ next() æ˜¯å°† yield è¡¨è¾¾å¼æ›¿æ¢æˆä¸€ä¸ªå€¼ throw() æ˜¯å°† yield è¡¨è¾¾å¼æ›¿æ¢æˆä¸€ä¸ª throw è¯­å¥ return() æ˜¯å°† yield è¡¨è¾¾å¼æ›¿æ¢æˆä¸€ä¸ª return è¯­å¥ yield* è¡¨è¾¾å¼ åœ¨ä¸€ä¸ª Generator å‡½æ•°é‡Œé¢æ‰§è¡Œå¦ä¸€ä¸ª Generator å‡½æ•° 1234567891011121314151617181920212223242526272829303132333435function* foo() &#123; yield 'a'; yield 'b';&#125;function* bar() &#123; yield 'x'; yield* foo(); yield 'y';&#125;// ç­‰åŒäºfunction* bar() &#123; yield 'x'; yield 'a'; yield 'b'; yield 'y';&#125;// ç­‰åŒäºfunction* bar() &#123; yield 'x'; for (let v of foo()) &#123; yield v; &#125; yield 'y';&#125;for (let v of bar()) &#123; console.log(v);&#125;// \"x\"// \"a\"// \"b\"// \"y\" ä»è¯­æ³•è§’åº¦çœ‹ï¼Œå¦‚æœyieldè¡¨è¾¾å¼åé¢è·Ÿçš„æ˜¯ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œéœ€è¦åœ¨yieldè¡¨è¾¾å¼åé¢åŠ ä¸Šæ˜Ÿå·ï¼Œå°±ä¼šæ‰§è¡Œè¿™ä¸ªéå†å™¨ ä»»ä½•æ•°æ®ç»“æ„åªè¦æœ‰ Iterator æ¥å£ï¼Œå°±å¯ä»¥è¢«yield*éå† ä½œä¸ºå¯¹è±¡å±æ€§çš„ Generator å‡½æ•°1234567891011let obj = &#123; * myGeneratorMethod() &#123; Â·Â·Â· &#125;&#125;;// ç­‰ä»·äºlet obj = &#123; myGeneratorMethod: function* () &#123; // Â·Â·Â· &#125;&#125;;","categories":[],"tags":[{"name":"ECMAScript 6 å…¥é—¨","slug":"ECMAScript-6-å…¥é—¨","permalink":"http://ziiyan.github.io/tags/ECMAScript-6-%E5%85%A5%E9%97%A8/"}]},{"title":"ES6ï¼šPromiseå¯¹è±¡","slug":"ES6ï¼šPromiseå¯¹è±¡","date":"2020-03-21T05:22:36.000Z","updated":"2020-08-13T08:57:11.612Z","comments":true,"path":"2020/03/21/ES6ï¼šPromiseå¯¹è±¡/","link":"","permalink":"http://ziiyan.github.io/2020/03/21/ES6%EF%BC%9APromise%E5%AF%B9%E8%B1%A1/","excerpt":"","text":"Promise å¯¹è±¡Promise çš„å«ä¹‰ å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œæ¯”ä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆæ›´åˆç†å’Œæ›´å¼ºå¤§ ä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆï¼šå›è°ƒå‡½æ•°å’Œäº‹ä»¶ Promise ç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœ ä»è¯­æ³•ä¸Šè¯´ï¼ŒPromise æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ ç‰¹ç‚¹ï¼š å¯¹è±¡çŠ¶æ€ä¸å—å¤–ç•Œå½±å“ Promise å¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæœ‰ä¸‰ç§çŠ¶æ€ pending è¿›è¡Œä¸­ fulfilled å·²æˆåŠŸ rejected å·²å¤±è´¥ åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœæ‰èƒ½æ”¹å˜çŠ¶æ€ ä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†æ”¹å˜ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥å¾—åˆ°è¿™ä¸ªç»“æœ çŠ¶æ€æ”¹å˜åªæœ‰ä¸¤ç§å¯èƒ½ pending -&gt; fulfilled pending -&gt; rejected ç¼ºç‚¹ï¼š æ— æ³•å–æ¶ˆã€‚ä¸€æ—¦æ–°å»ºå°±ä¼šç«‹å³æ‰§è¡Œï¼Œæ— æ³•ä¸­é€”å–æ¶ˆ å¦‚æœä¸è®¾ç½®å›è°ƒå‡½æ•°ï¼Œå†…éƒ¨æŠ›å‡ºçš„é”™è¯¯æ— æ³•ååº”åˆ°å¤–éƒ¨ å¤„äº pending çŠ¶æ€çš„æ—¶å€™ï¼Œæ— æ³•å¾—çŸ¥è¿›åº¦ å¦‚æœäº‹ä»¶ä¸æ–­åœ°åå¤å‘ç”Ÿï¼Œ Stream æ¨¡å¼æ˜¯æ¯” Promise æ›´å¥½çš„é€‰æ‹© åŸºæœ¬ç”¨æ³• åˆ›å»º Promise å®ä¾‹ 12345678const promise = new Promise(function(resolve, reject) &#123; // ... if (/* æˆåŠŸ */) &#123; resolve(value); // å°† Promise å¯¹è±¡çš„çŠ¶æ€ pending -&gt; fulfilled &#125; else &#123; reject(error); // å°† Promise å¯¹è±¡çš„çŠ¶æ€ pending -&gt; rejected &#125;&#125;); å›è°ƒå‡½æ•° 12345promise.then(function(value)&#123; // success&#125;, function(error)&#123; // failure&#125;); è°ƒç”¨ resolve æˆ– reject å¹¶ä¸ä¼šç»ˆç»“ Promise çš„å‚æ•°å‡½æ•°çš„æ‰§è¡Œ ç«‹å³ resolved çš„ Promise æ˜¯åœ¨æœ¬è½®äº‹ä»¶å¾ªç¯çš„æœ«å°¾æ‰§è¡Œï¼Œæ€»æ˜¯æ™šäºæœ¬è½®å¾ªç¯çš„åŒæ­¥ä»»åŠ¡ 12345678new Promise((resolve, reject) =&gt; &#123; resolve(1); console.log(2);&#125;).then(r =&gt; &#123; console.log(r);&#125;);// 2// 1 ä¸€èˆ¬æ¥è¯´ï¼Œresolve æˆ– reject ä¹‹å Promise çš„ä½¿å‘½å°±å®Œæˆäº†ï¼Œåç»­æ“ä½œåº”è¯¥æ”¾åˆ° then é‡Œ æ‰€ä»¥å¯ä»¥ return resolve() æˆ– return reject() Promise.prototype.then() then æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ï¼Œå› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³• 1234567getJSON(\"/post/1.json\").then(function(post)&#123; return getJSON(post.commentURL);&#125;).then(function(comments)&#123; console.log(...)&#125;, function(err)&#123; console.log(...)&#125;); ç®­å¤´å‡½æ•°å†™æ³• 123456getJSON(\"/post/1.json\").then( post =&gt; getJSON(post.commentURL);).then( comments =&gt; console.log(...), err =&gt; console.log(...)); Promise.prototype.catch() Promise.prototype.catch() æ˜¯ .then(null, rejection) æˆ– .then(undefined, rejection) çš„åˆ«åï¼Œç”¨äºæŒ‡å®šå‘ç”Ÿé”™è¯¯çš„å›è°ƒå‡½æ•° ä¸€èˆ¬æ¥è¯´ï¼Œä¸è¦ç”¨ then çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œç›´æ¥ç”¨ catchï¼Œå¯ä»¥æ•è·ç¬¬ä¸€ä¸ªå‚æ•°çš„æ‰§è¡Œé”™è¯¯ 12345getJSON('/posts.json').then(function(post)&#123; // ...&#125;).catch (function(error) &#123; // å¤„ç† getJOSN å’Œ å‰ä¸€ä¸ªå›è°ƒå‡½æ•°è¿è¡Œæ—¶å‘ç”Ÿçš„é”™è¯¯&#125;); reject æ–¹æ³•çš„ä½œç”¨ç­‰äºæŠ›å‡ºé”™è¯¯ å¦‚æœ Promise çŠ¶æ€å·²ç»å˜æˆ resulved å†æŠ›å‡ºé”™è¯¯æ˜¯æ— æ•ˆçš„ Promise å¯¹è±¡çš„é”™è¯¯å…·æœ‰â€å†’æ³¡â€æ€§è´¨ï¼Œä¼šä¸€ç›´å‘åä¼ é€’ï¼ŒçŸ¥é“è¢«æ•è·ä¸ºæ­¢ ä¹Ÿå°±æ˜¯è¯´ï¼Œé”™è¯¯æ€»æ˜¯ä¼šè¢«ä¸‹ä¸€ä¸ª catch è¯­å¥æ•è· å¦‚æœæ²¡æœ‰ä½¿ç”¨ carch æ–¹æ³•æŒ‡å®šé”™è¯¯å¤„ç†çš„å›è°ƒå‡½æ•°ï¼ŒPromise å¯¹è±¡æŠ›å‡ºçš„é”™è¯¯ä¸ä¼šä¼ é€’åˆ°å¤–å±‚ä»£ç  Node æœ‰ä¸€ä¸ª unhandledRejection äº‹ä»¶ï¼ˆè®¡åˆ’åºŸé™¤ï¼‰ï¼Œä¸“é—¨ç›‘å¬æœªæ•è·çš„ reject é”™è¯¯ catch è¿”å›å€¼ä¹Ÿæ˜¯ Promise å¯¹è±¡ï¼Œè¿˜å¯ä»¥æ¥ then ï¼Œä¹Ÿå¯ä»¥æŠ›å‡ºé”™è¯¯è¢«ä¸‹ä¸€ä¸ª catch æ•è· Promise.prototype.finally() æ— è®º Promise æœ€åçŠ¶æ€å¦‚ä½•ï¼Œéƒ½ä¼šæ‰§è¡Œçš„æ“ä½œï¼Œä¸æ¥æ”¶å‚æ•° æœ¬è´¨ä¸Šæ˜¯ then æ–¹æ³•çš„ç‰¹ä¾‹ï¼ˆthen ä¸­ä¸¤ç§æƒ…å†µä»£ç ä¸€æ ·ï¼‰ 1234567Promise.prototype.finally = function (callback) &#123; let P = this.constructor; return this.then( value =&gt; P.resolve(callback()).then(() =&gt; value), reason =&gt; P.resolve(callback()).then(() =&gt; &#123; throw reason &#125;) );&#125;; finally æ–¹æ³•æ€»æ˜¯è¿”å›åŸæ¥çš„å€¼ Promise.prototype.all() å°†å¤šä¸ª Promise å®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ å‚æ•°å¯ä»¥ä¸æ˜¯æ•°ç»„ï¼Œä½†å¿…é¡»å…·æœ‰ Iterator æ¥å£ï¼Œä¸”æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ Promise å®ä¾‹ 1const p = Promise.all([p1, p2, p3]); p çš„çŠ¶æ€ç”± p1, p2, p3 å†³å®š éƒ½ä¸º fulfilledï¼Œp ä¸º fulfilled è¿”å›å€¼ç»„æˆæ•°ç»„ï¼Œä¼ é€’ç»™ p çš„å›è°ƒå‡½æ•° ä»»ä¸€ rejectedï¼Œp ä¸º rejected ç¬¬ä¸€ä¸ªè¢« reject çš„å®ä¾‹çš„è¿”å›å€¼ï¼Œä¼ é€’ç»™ p çš„å›è°ƒå‡½æ•° å¦‚æœ p1, p2, p3 è‡ªå·±å®šä¹‰äº† catchï¼Œåˆ™ä¼šæ‰§è¡Œ catchï¼ŒçŠ¶æ€å˜æˆ catch è¿”å›çš„ resolve å¦‚æœæ²¡å®šä¹‰ catch æ‰ä¼šè°ƒç”¨ Promise.all() çš„ catch æ–¹æ³• Promise.prototype.race() å°†å¤šä¸ª Promise å®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ 1const p = Promise.race([p1, p2, p3]); åªè¦ p1, p2, p3 ä»»ä¸€æ”¹å˜çŠ¶æ€ï¼Œp å°±è·Ÿç€æ”¹å˜ ç‡å…ˆæ”¹å˜çš„ Promise å®ä¾‹çš„è¿”å›å€¼ï¼Œä¼ é€’ç»™ p çš„å›è°ƒå‡½æ•° Promise.prototype.allSettled() æ¥å—ä¸€ç»„ Promise å®ä¾‹ä½œä¸ºå‚æ•°ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ æ‰€æœ‰å‚æ•°å®ä¾‹éƒ½è¿”å›ç»“æœï¼ŒåŒ…è£…å®ä¾‹æ‰ä¼šç»“æŸ è¿”å›æ–°çš„ Promise å®ä¾‹ï¼ŒçŠ¶æ€æ€»æ˜¯ fulfilled ç›‘å¬å‡½æ•°æ¥æ”¶åˆ°çš„å‚æ•°æ˜¯å¯¹è±¡æ•°ç»„ï¼Œæ¯ä¸ªå¯¹è±¡åˆ†åˆ«å¯¹åº” allSettled çš„å‚æ•° å¯¹è±¡å±æ€§ status, value, reason Promise.prototype.any() æ¥å—ä¸€ç»„ Promise å®ä¾‹ä½œä¸ºå‚æ•°ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ ä»»ä¸€ fulfilled ï¼ŒåŒ…è£…å®ä¾‹å°± fulfilled å…¨éƒ¨ rejectd ï¼ŒåŒ…è£…å®ä¾‹æ‰ rejectd Promise.prototype.resolve() å°†ç°æœ‰å¯¹è±¡è½¬ä¸º Promise å¯¹è±¡ 123Promise.resolve('foo')// ç­‰ä»·äºnew Promise(resolve =&gt; resolve('foo')) å‚æ•°åˆ† 4 ç§æƒ…å†µ Promise å®ä¾‹ ä¸åšä»»ä½•ä¿®æ”¹ thenable å¯¹è±¡ï¼ˆå…·æœ‰ then æ–¹æ³•çš„å¯¹è±¡ï¼‰ è½¬ä¸º Promise å¯¹è±¡ï¼Œç«‹å³æ‰§è¡Œ then ä¸æ˜¯ thenable å¯¹è±¡ï¼ˆå…¶å®ƒå¯¹è±¡æˆ–ä¸æ˜¯å¯¹è±¡ï¼‰ è¿”å›ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡ï¼ŒçŠ¶æ€ resolved ä¸å¸¦å‚æ•° ç›´æ¥è¿”å›ä¸€ä¸ª resolved çš„Promise å¯¹è±¡ ç«‹å³ resolve çš„ Promise å¯¹è±¡ï¼Œåœ¨æœ¬è½®â€äº‹ä»¶å¾ªç¯â€çš„ç»“æŸæ—¶æ‰§è¡Œï¼Œä¸æ˜¯åœ¨ä¸‹ä¸€è½®â€äº‹ä»¶å¾ªç¯â€å¼€å§‹æ—¶ Promise.prototype.reject() è¿”å›ä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ï¼ŒçŠ¶æ€ä¸º rejected å‚æ•°ä¼šåŸå°ä¸åŠ¨ä½œä¸º reject ç†ç”±ï¼Œå’Œ resolve å¤„ç†ä¸åŒ åº”ç”¨ åŠ è½½å›¾ç‰‡ Generator å‡½æ•°ä¸ Promise ç»“åˆ Promise.try() åŒæ­¥å‡½æ•°åŒæ­¥æ‰§è¡Œï¼Œå¼‚æ­¥å‡½æ•°å¼‚æ­¥æ‰§è¡Œ æ¨¡æ‹Ÿ try ä»£ç å—","categories":[],"tags":[{"name":"ECMAScript 6 å…¥é—¨","slug":"ECMAScript-6-å…¥é—¨","permalink":"http://ziiyan.github.io/tags/ECMAScript-6-%E5%85%A5%E9%97%A8/"}]},{"title":"ES6ï¼šSymbol","slug":"ES6ï¼šSymbol","date":"2020-03-18T13:15:15.000Z","updated":"2020-08-13T08:56:30.029Z","comments":true,"path":"2020/03/18/ES6ï¼šSymbol/","link":"","permalink":"http://ziiyan.github.io/2020/03/18/ES6%EF%BC%9ASymbol/","excerpt":"","text":"Symbolæ¦‚è¿° ES5 çš„å¯¹è±¡å±æ€§åéƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå®¹æ˜“é€ æˆå±æ€§åå†²çª åŸå§‹æ•°æ®ç±»å‹ Symbol è¡¨ç¤ºç‹¬ä¸€æ— äºŒçš„å€¼ é€šè¿‡ Symbol å‡½æ•°ç”Ÿæˆ ä¸èƒ½ä½¿ç”¨ new å‘½ä»¤ å¯ä»¥æ¥å—å‚æ•°ï¼Œä½œä¸ºå˜é‡çš„æè¿°ï¼Œç”¨æ¥åŒºåˆ† å¦‚æœå‚æ•°æ˜¯å¯¹è±¡ï¼Œå…ˆè°ƒç”¨è¯¥å¯¹è±¡çš„ toString æ–¹æ³• 12let s = Symbol();typeof s // \"symbol\" ç°åœ¨ï¼Œå¯¹è±¡çš„å±æ€§åå¯ä»¥æœ‰ä¸¤ç§ç±»å‹ å­—ç¬¦ä¸² Symbol ç±»å‹ Symbol å€¼ä¸èƒ½ä¸å…¶ä»–ç±»å‹çš„å€¼è¿›è¡Œè¿ç®—ï¼Œä¼šæŠ¥é”™ å¯ä»¥è½¬ä¸ºå­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼(true)ï¼Œä½†ä¸èƒ½è½¬ä¸ºæ•°å€¼ Symbol.prototype.description åˆ›å»º Symbol çš„æ—¶å€™ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªæè¿° è¯»å–æè¿°éœ€è¦å°† Symbol æ˜¾å¼è½¬ä¸ºå­—ç¬¦ä¸² ES2019 æä¾› description å±æ€§ï¼Œè¿”å› Symbol æè¿° ä½œä¸ºå±æ€§åçš„ Symbol1234567891011121314151617let mySymbol = Symbol();// ç¬¬ä¸€ç§å†™æ³•let a = &#123;&#125;;a[mySymbol] = 'Hello!';// ç¬¬äºŒç§å†™æ³•let a = &#123; [mySymbol]: 'Hello!'&#125;;// ç¬¬ä¸‰ç§å†™æ³•let a = &#123;&#125;;Object.defineProperty(a, mySymbol, &#123; value: 'Hello!' &#125;);// ä»¥ä¸Šå†™æ³•éƒ½å¾—åˆ°åŒæ ·ç»“æœa[mySymbol] // \"Hello!\" Symbol å€¼ä½œä¸ºå¯¹è±¡å±æ€§åæ—¶ï¼Œä¸èƒ½ç”¨ç‚¹è¿ç®—ç¬¦ï¼Œå› ä¸ºç‚¹è¿ç®—ç¬¦åé¢æ€»æ˜¯å­—ç¬¦ä¸² è¦æ”¾åœ¨æ–¹æ‹¬å·ä¸­å®šä¹‰ 12345const mySymbol = Symbol();const a = &#123;&#125;;a.mySymbol = 'Hello';a[mySymbol] // undefineda['mySymbol'] // 'Hello' Symbol å€¼ä½œä¸ºå±æ€§åæ—¶ï¼Œè¯¥å±æ€§æ˜¯å…¬å¼€å±æ€§ï¼Œä¸æ˜¯ç§æœ‰å±æ€§ å®ä¾‹ï¼šæ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸² é­”æœ¯å­—ç¬¦ä¸²æŒ‡çš„æ˜¯ï¼Œåœ¨ä»£ç ä¹‹ä¸­å¤šæ¬¡å‡ºç°ã€ä¸ä»£ç å½¢æˆå¼ºè€¦åˆçš„æŸä¸€ä¸ªå…·ä½“çš„å­—ç¬¦ä¸²æˆ–è€…æ•°å€¼ã€‚é£æ ¼è‰¯å¥½çš„ä»£ç ï¼Œåº”è¯¥å°½é‡æ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²ï¼Œæ”¹ç”±å«ä¹‰æ¸…æ™°çš„å˜é‡ä»£æ›¿ã€‚ ç­‰äºå“ªä¸ªå€¼å¹¶ä¸é‡è¦ï¼Œåªè¦ç¡®ä¿ä¸ä¼šè·Ÿå…¶ä»–å±æ€§çš„å€¼å†²çªå³å¯ï¼Œå°±å¾ˆé€‚åˆæ”¹ç”¨ Symbol å€¼ å±æ€§åçš„éå† Symbol ä½œä¸ºå±æ€§åï¼Œéå†å¯¹è±¡çš„æ—¶å€™ä¸ä¼šå‡ºç°åœ¨for...inã€for...ofå¾ªç¯ä¸­ å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œä¸ºå¯¹è±¡å®šä¹‰éç§æœ‰ã€åªå¸Œæœ›å†…éƒ¨ä½¿ç”¨çš„æ–¹æ³• ä¸ä¼šè¢«Object.keys()ã€Object.getOwnPropertyNames()ã€JSON.stringify() è¿”å› Object.getOwnPropertySymbols()æ–¹æ³•ï¼Œå¯ä»¥è·å–æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰ Symbol å±æ€§å è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å½“å‰å¯¹è±¡çš„æ‰€æœ‰ç”¨ä½œå±æ€§åçš„ Symbol å€¼ Reflect.ownKeys(object)æ–¹æ³•å¯ä»¥è¿”å›æ‰€æœ‰ç±»å‹çš„é”®åï¼ŒåŒ…æ‹¬å¸¸è§„é”®åå’Œ Symbol é”®å Symbol.for()ï¼ŒSymbol.keyFor() Symbol.for(&#39;string&#39;) æ£€æŸ¥æ˜¯å¦æœ‰ä»¥ string ä½œä¸ºåç§°çš„ Symbol å€¼ï¼Œæœ‰åˆ™è¿”å›ï¼Œæ²¡æœ‰åˆ™æ–°å»ºï¼Œå¹¶æ³¨å†Œåˆ°å…¨å±€ Symbol()å†™æ³•æ²¡æœ‰ç™»è®°æœºåˆ¶ Symbol.keyFor(å˜é‡å)æ–¹æ³•è¿”å›ä¸€ä¸ªå·²ç™»è®°çš„ Symbol ç±»å‹å€¼çš„key å®ä¾‹ï¼šæ¨¡å—çš„ Singleton æ¨¡å¼ Singleton æ¨¡å¼ï¼ˆå•ä¾‹æ¨¡å¼ï¼‰æŒ‡çš„æ˜¯è°ƒç”¨ä¸€ä¸ªç±»ï¼Œä»»ä½•æ—¶å€™è¿”å›åˆ°éƒ½æ˜¯åŒä¸€ä¸ªå®ä¾‹ å†…ç½®çš„ Symbol å€¼ Symbol.hasInstance æŒ‡å‘ä¸€ä¸ªå†…éƒ¨æ–¹æ³• å½“å…¶ä»–å¯¹è±¡ä½¿ç”¨instanceofè¿ç®—ç¬¦ï¼Œä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³• æ¯”å¦‚ï¼Œfoo instanceof Fooåœ¨è¯­è¨€å†…éƒ¨ï¼Œå®é™…è°ƒç”¨çš„æ˜¯Foo[Symbol.hasInstance](foo) Symbol.isConcatSpreadable ç­‰äºä¸€ä¸ªå¸ƒå°”å€¼ è¡¨ç¤ºè¯¥å¯¹è±¡ç”¨äºArray.prototype.concat()æ—¶ï¼Œæ˜¯å¦å¯ä»¥å±•å¼€ Symbol.species æŒ‡å‘ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œåˆ›å»ºè¡ç”Ÿå¯¹è±¡æ—¶ä½¿ç”¨è¯¥å±æ€§ Symbol.match æŒ‡å‘ä¸€ä¸ªå‡½æ•° å¦‚æœè¯¥å±æ€§å­˜åœ¨ï¼Œè°ƒç”¨å®ƒå¹¶è¿”å›æ–¹æ³•çš„è¿”å›å€¼ Symbol.replace æŒ‡å‘ä¸€ä¸ªæ–¹æ³• å½“è¯¥å¯¹è±¡è¢«String.prototype.replaceæ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›è¯¥æ–¹æ³•çš„è¿”å›å€¼ Symbol.search æŒ‡å‘ä¸€ä¸ªæ–¹æ³• å½“è¯¥å¯¹è±¡è¢«String.prototype.searchæ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›è¯¥æ–¹æ³•çš„è¿”å›å€¼ Symbol.split æŒ‡å‘ä¸€ä¸ªæ–¹æ³• å½“è¯¥å¯¹è±¡è¢«String.prototype.splitæ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›è¯¥æ–¹æ³•çš„è¿”å›å€¼ Symbol.iterator Symbol.toPrimitive Symbol.toStringTag SYmbol.unscopables","categories":[],"tags":[{"name":"ECMAScript 6 å…¥é—¨","slug":"ECMAScript-6-å…¥é—¨","permalink":"http://ziiyan.github.io/tags/ECMAScript-6-%E5%85%A5%E9%97%A8/"}]},{"title":"ES6ï¼šå‡½æ•°çš„æ‰©å±•","slug":"ES6ï¼šå‡½æ•°çš„æ‰©å±•","date":"2020-03-18T13:15:15.000Z","updated":"2020-08-13T08:56:39.356Z","comments":true,"path":"2020/03/18/ES6ï¼šå‡½æ•°çš„æ‰©å±•/","link":"","permalink":"http://ziiyan.github.io/2020/03/18/ES6%EF%BC%9A%E5%87%BD%E6%95%B0%E7%9A%84%E6%89%A9%E5%B1%95/","excerpt":"","text":"å‡½æ•°çš„æ‰©å±•å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼åŸºæœ¬ç”¨æ³•1234function Pointï¼ˆx = 0, y = 0) &#123; this.x = x; this.y = y;&#125; å‚æ•°é»˜è®¤å€¼æ˜¯æƒ°æ€§æ±‚å€¼ï¼Œæ¯æ¬¡é‡æ–°è®¡ç®— ä¸è§£æ„èµ‹å€¼é»˜è®¤å€¼ç»“åˆä½¿ç”¨å‡½æ•°çš„ length å±æ€§ è¿”å›æ²¡æœ‰æŒ‡å®šé»˜è®¤å€¼çš„å‚æ•°ä¸ªæ•° rest å‚æ•° ...å˜é‡å ä¸éœ€è¦ä½¿ç”¨ arguments å¯¹è±¡ arguments æ˜¯ç±»æ•°ç»„ rest æ˜¯çœŸçš„æ•°ç»„ name å±æ€§ è¿”å›å‡½æ•°å ç®­å¤´å‡½æ•°æ³¨æ„ç‚¹ å‡½æ•°ä½“å†…çš„ this å¯¹è±¡ï¼Œæ˜¯å®šä¹‰æ—¶æ‰€åœ¨çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ—¶æ‰€åœ¨çš„å¯¹è±¡ ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ this ï¼Œå¼•ç”¨å¤–å±‚çš„ this ä¸å¯ä»¥å½“ä½œæ„é€ å‡½æ•°ï¼Œä¸å¯ä»¥ä½¿ç”¨ new å‘½ä»¤ ä¸å¯ä»¥ä½¿ç”¨ arguments å¯¹è±¡ï¼Œå¯ä»¥ç”¨ rest å‚æ•° ä¸å¯ä»¥ä½¿ç”¨ yield å‘½ä»¤ï¼Œå› æ­¤ä¸èƒ½ç”¨åš Generator å‡½æ•° å°¾è°ƒç”¨ä¼˜åŒ–ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨ æŸä¸ªå‡½æ•°çš„æœ€åä¸€æ­¥æ˜¯è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•° å°¾è°ƒç”¨ä¼˜åŒ– å‡½æ•°è°ƒç”¨ä¼šåœ¨å†…å­˜å½¢æˆä¸€ä¸ªâ€œè°ƒç”¨è®°å½•â€ï¼Œåˆç§°â€œè°ƒç”¨å¸§â€ï¼ˆcall frameï¼‰ï¼Œä¿å­˜è°ƒç”¨ä½ç½®å’Œå†…éƒ¨å˜é‡ç­‰ä¿¡æ¯ã€‚å¦‚æœåœ¨å‡½æ•°Açš„å†…éƒ¨è°ƒç”¨å‡½æ•°Bï¼Œé‚£ä¹ˆåœ¨Açš„è°ƒç”¨å¸§ä¸Šæ–¹ï¼Œè¿˜ä¼šå½¢æˆä¸€ä¸ªBçš„è°ƒç”¨å¸§ã€‚ç­‰åˆ°Bè¿è¡Œç»“æŸï¼Œå°†ç»“æœè¿”å›åˆ°Aï¼ŒBçš„è°ƒç”¨å¸§æ‰ä¼šæ¶ˆå¤±ã€‚å¦‚æœå‡½æ•°Bå†…éƒ¨è¿˜è°ƒç”¨å‡½æ•°Cï¼Œé‚£å°±è¿˜æœ‰ä¸€ä¸ªCçš„è°ƒç”¨å¸§ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ‰€æœ‰çš„è°ƒç”¨å¸§ï¼Œå°±å½¢æˆä¸€ä¸ªâ€œè°ƒç”¨æ ˆâ€ï¼ˆcall stackï¼‰ã€‚ å°¾è°ƒç”¨ç”±äºæ˜¯å‡½æ•°çš„æœ€åä¸€æ­¥æ“ä½œï¼Œæ‰€ä»¥ä¸éœ€è¦ä¿ç•™å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§ï¼Œå› ä¸ºè°ƒç”¨ä½ç½®ã€å†…éƒ¨å˜é‡ç­‰ä¿¡æ¯éƒ½ä¸ä¼šå†ç”¨åˆ°äº†ï¼Œåªè¦ç›´æ¥ç”¨å†…å±‚å‡½æ•°çš„è°ƒç”¨å¸§ï¼Œå–ä»£å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§å°±å¯ä»¥äº†ã€‚ åªæœ‰ Safari æ”¯æŒ å°¾é€’å½’ å°¾è°ƒç”¨è‡ªèº«ï¼Œå°±ç§°ä¸ºå°¾é€’å½’ã€‚ é€’å½’éå¸¸è€—è´¹å†…å­˜ï¼Œå› ä¸ºéœ€è¦åŒæ—¶ä¿å­˜æˆåƒä¸Šç™¾ä¸ªè°ƒç”¨å¸§ï¼Œå¾ˆå®¹æ˜“å‘ç”Ÿâ€œæ ˆæº¢å‡ºâ€é”™è¯¯ï¼ˆstack overflowï¼‰ã€‚ä½†å¯¹äºå°¾é€’å½’æ¥è¯´ï¼Œç”±äºåªå­˜åœ¨ä¸€ä¸ªè°ƒç”¨å¸§ï¼Œæ‰€ä»¥æ°¸è¿œä¸ä¼šå‘ç”Ÿâ€œæ ˆæº¢å‡ºâ€é”™è¯¯ã€‚ æ–æ³¢é‚£å¥‘ 12345678910function Fibonacci(n) &#123; if (n &lt;= 1) return 1; return Fibonacci(n-1) + Fibonacci(n-2);&#125;// å°¾é€’å½’function Fibonacci2 (n, ac1 = 1, ac2 = 1) &#123; if (n &lt;= 1) return ac2; return Fibonacci2 (n-1, ac2, ac1 + ac2);&#125; ES6 ä¸­åªè¦ä½¿ç”¨å°¾é€’å½’ï¼Œå°±ä¸ä¼šå‘ç”Ÿæ ˆæº¢å‡ºï¼Œç›¸å¯¹èŠ‚çœå†…å­˜ é€’å½’å‡½æ•°çš„æ”¹å†™ æŠŠæ‰€æœ‰ç”¨åˆ°çš„å†…éƒ¨å˜é‡æ”¹å†™æˆå‡½æ•°çš„å‚æ•° å‡½æ•°å¼ç¼–ç¨‹æœ‰ä¸€ä¸ªæ¦‚å¿µï¼Œå«åšæŸ¯é‡ŒåŒ–ï¼ˆcurryingï¼‰ï¼Œæ„æ€æ˜¯å°†å¤šå‚æ•°çš„å‡½æ•°è½¬æ¢æˆå•å‚æ•°çš„å½¢å¼ã€‚ ä¸¥æ ¼æ¨¡å¼ ES6 çš„å°¾è°ƒç”¨ä¼˜åŒ–åªåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹å¼€å¯ å‡½æ•°å‚æ•°çš„å°¾é€—å· ES6 ä¸­å‡½æ•°æœ€åä¸€ä¸ªå‚æ•°åæœ‰é€—å·ä¸ä¼šæŠ¥é”™ Function.prototype.toString() toString()æ–¹æ³•è¿”å›å‡½æ•°ä»£ç æœ¬èº«ï¼Œä»¥å‰ä¼šçœç•¥æ³¨é‡Šå’Œç©ºæ ¼ catch å‘½ä»¤çš„å‚æ•°çœç•¥ ä»¥å‰ catch å‘½ä»¤åé¢å¿…é¡»è·Ÿå‚æ•°ï¼ŒES6 å¯ä»¥çœç•¥","categories":[],"tags":[{"name":"ECMAScript 6 å…¥é—¨","slug":"ECMAScript-6-å…¥é—¨","permalink":"http://ziiyan.github.io/tags/ECMAScript-6-%E5%85%A5%E9%97%A8/"}]},{"title":"ES6ï¼šå­—ç¬¦ä¸²çš„æ‰©å±•","slug":"ES6ï¼šå­—ç¬¦ä¸²","date":"2020-03-16T16:43:37.000Z","updated":"2020-08-13T08:56:46.111Z","comments":true,"path":"2020/03/17/ES6ï¼šå­—ç¬¦ä¸²/","link":"","permalink":"http://ziiyan.github.io/2020/03/17/ES6%EF%BC%9A%E5%AD%97%E7%AC%A6%E4%B8%B2/","excerpt":"","text":"å­—ç¬¦ä¸²çš„æ‰©å±•å­—ç¬¦çš„ Unicode è¡¨ç¤ºæ³• ES6 åŠ å¼ºäº†å¯¹ Unicode çš„æ”¯æŒï¼Œå…è®¸é‡‡ç”¨ \\uxxxx å½¢å¼è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œxxxx è¡¨ç¤ºå­—ç¬¦çš„ Unicode ç ç‚¹ é™åˆ¶ç ç‚¹åœ¨ \\u0000 ~ \\uFFFF ä¹‹é—´çš„å­—ç¬¦ï¼Œè¶…å‡ºèŒƒå›´å¿…é¡»ç”¨ä¸¤ä¸ªåŒå­—èŠ‚çš„å½¢å¼è¡¨ç¤º 1234567\"\\uD842\\uDFB7\"// \"ğ ®·\"\"\\u20BB7\"// \" 7\"// JavaScript ä¼šç†è§£æˆ \\u20BB+7// \\u20BB ä¸å¯æ‰“å°ï¼Œè¾“å‡ºç©ºæ ¼ åªè¦å°†ç ç‚¹æ”¾å…¥å¤§æ‹¬å·ï¼Œå°±èƒ½æ­£ç¡®è§£è¯» 12\"\\u&#123;20BB7&#125;\"// \"ğ ®·\" å¯¹ç¼–ç ä»ç„¶æ˜¯ä¸€çªä¸é€šâ€¦â€¦ å­—ç¬¦ä¸²çš„éå†å™¨æ¥å£ ES6 å¯¹å­—ç¬¦ä¸²æ·»åŠ äº†éå†å™¨æ¥å£ï¼ˆè¯¦è§ã€ŠIteratorã€‹ä¸€ç« ï¼‰ï¼Œä½¿å¾—å­—ç¬¦ä¸²å¯ä»¥è¢« for...of å¾ªç¯ä¾¿åˆ© é™¤äº†éå†å­—ç¬¦ä¸²ï¼Œéå†å™¨æœ€å¤§çš„ä¼˜ç‚¹æ˜¯å¯ä»¥è¯†åˆ«å¤§äº 0xFFFF çš„ç ç‚¹ ç›´æ¥è¾“å…¥ U+2028 å’Œ U+2029 JavaScript å­—ç¬¦ä¸²å…è®¸ç›´æ¥è¾“å…¥å­—ç¬¦ï¼Œä»¥åŠè¾“å…¥å­—ç¬¦çš„è½¬ä¹‰å½¢å¼ 1'ä¸­' === '\\u4e2d' è§„å®šä¸èƒ½åœ¨å­—ç¬¦ä¸²é‡Œç›´æ¥ä½¿ç”¨ï¼Œåªèƒ½ç”¨è½¬ä¹‰å½¢å¼ U+005Cï¼šåæ–œæ  U+000Dï¼šå›è½¦ U+2028ï¼šè¡Œåˆ†éš”ç¬¦ U+2029ï¼šæ®µåˆ†éš”ç¬¦ U+000Aï¼šæ¢è¡Œç¬¦ JSON å…è®¸ä½¿ç”¨ U+2028ã€U+2029 JSON.parse() è§£æè¿™ä¸¤ä¸ªä¼šæŠ¥é”™ ä¸ºäº†å…¼å®¹ JSONï¼ŒES2019 æ”¯æŒç›´æ¥è¾“å…¥è¿™ä¸¤ä¸ª JSON.stringify() çš„æ”¹é€  æ ¹æ®æ ‡å‡†ï¼ŒJSON æ•°æ®å¿…é¡»æ˜¯ UTF-8 ç¼–ç ï¼Œä½†æ˜¯ç°åœ¨çš„ JSON.stringify() æœ‰å¯èƒ½è¿”å›ä¸ç¬¦åˆ UTF-8 æ ‡å‡†çš„å­—ç¬¦ä¸² UTF-8 æ ‡å‡†è§„å®šï¼Œ0xD800 åˆ° 0xDFFF ä¹‹é—´çš„ç ç‚¹å¿…é¡»é…å¯¹ä½¿ç”¨ JSON.stringify() å¯èƒ½è¿”å› 0xD800 åˆ° 0xDFFF ä¹‹é—´çš„å•ä¸ªç ç‚¹ ä¸ºäº†ç¡®ä¿è¿”å›çš„æ˜¯åˆæ³•çš„ UTF-8 å­—ç¬¦ï¼Œå¦‚æœé‡åˆ°0xD800åˆ°0xDFFFä¹‹é—´çš„å•ä¸ªç ç‚¹ï¼Œæˆ–è€…ä¸å­˜åœ¨çš„é…å¯¹å½¢å¼ï¼Œå®ƒä¼šè¿”å›è½¬ä¹‰å­—ç¬¦ä¸²ï¼Œç•™ç»™åº”ç”¨è‡ªå·±å†³å®šä¸‹ä¸€æ­¥çš„å¤„ç† æ¨¡æ¿å­—ç¬¦ä¸² å¢å¼ºç‰ˆçš„å­—ç¬¦ä¸²ï¼Œç”¨åå¼•å·ï¼ˆ`ï¼‰æ ‡è¯† å¯ä»¥å½“ä½œæ™®é€šå­—ç¬¦ä¸²ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰å¤šè¡Œå­—ç¬¦ä¸²ï¼Œæˆ–è€…åœ¨å­—ç¬¦ä¸²ä¸­åµŒå…¥ ${å˜é‡} 12let name = \"Bob\", time = \"today\";`Hello $&#123;name&#125;, how are you $&#123;time&#125;?` åå¼•å·éœ€è¦åæ–œæ è½¬ä¹‰ ä¿ç•™ç©ºæ ¼å’Œç¼©è¿›ï¼Œå¯ä»¥ç”¨ trim() æ–¹æ³•æ¶ˆé™¤ å¦‚æœå˜é‡çš„å€¼ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œå°†æŒ‰ç…§ä¸€èˆ¬çš„è§„åˆ™è½¬ä¸ºå­—ç¬¦ä¸² æ¯”å¦‚ï¼Œå¤§æ‹¬å·ä¸­æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°†é»˜è®¤è°ƒç”¨å¯¹è±¡çš„toStringæ–¹æ³• æ ‡ç­¾æ¨¡æ¿ æ¨¡ç‰ˆå­—ç¬¦ä¸²è·Ÿåœ¨ä¸€ä¸ªå‡½æ•°ååé¢ï¼Œè¯¥å‡½æ•°å°†è¢«è°ƒç”¨æ¥å¤„ç†è¿™ä¸ªæ¨¡ç‰ˆå­—ç¬¦ä¸² 123alert`hello`// ç­‰åŒäºalert(['hello']) æ ‡ç­¾æ¨¡ç‰ˆå…¶å®ä¸æ˜¯æ¨¡ç‰ˆï¼Œè€Œæ˜¯å‡½æ•°è°ƒç”¨çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ â€œæ ‡ç­¾â€ æŒ‡çš„æ˜¯å‡½æ•°ï¼Œè·Ÿåœ¨åé¢çš„æ¨¡ç‰ˆå­—ç¬¦ä¸²æ˜¯å‚æ•° å¦‚æœæœ‰å‚æ•°ï¼Œå‡½æ•°ä¼šä¾æ¬¡å—åˆ°å¤šä¸ªå‚æ•° 12345678910function tag(stringArr, ...values) &#123; // ...&#125;let a = 5;let b = 10;tag`Hello $&#123;a + b&#125; world $&#123;a + b&#125;`;//ç­‰åŒäºtag(['Hello ', ' world ', ''], 15, 50); ä½œç”¨ è¿‡æ»¤ HTML å­—ç¬¦ä¸²ï¼Œé˜²æ­¢ç”¨æˆ·è¾“å…¥æ¶æ„å†…å®¹ å¤šè¯­è¨€è½¬æ¢ åµŒå…¥å…¶ä»–è¯­è¨€ æ¨¡ç‰ˆå¤„ç†å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆæ¨¡ç‰ˆå­—ç¬¦ä¸²æ•°ç»„ï¼‰ï¼Œè¿˜æœ‰ä¸€ä¸ª raw å±æ€§ï¼Œä¿å­˜çš„æ˜¯è½¬ä¹‰åçš„åŸå­—ç¬¦ä¸² æ¨¡æ¿å­—ç¬¦ä¸²çš„é™åˆ¶ æ ‡ç­¾æ¨¡æ¿å¯ä»¥å†…åµŒåˆ«çš„è¯­è¨€ï¼Œé»˜è®¤å°†å­—ç¬¦ä¸²è½¬ä¹‰ï¼Œå¯¼è‡´æŠ¥é”™ ES2018 æ”¾æ¾äº†å¯¹æ ‡ç­¾æ¨¡ç‰ˆé‡Œé¢å­—ç¬¦ä¸²è½¬ä¹‰çš„é™åˆ¶ é‡åˆ°ä¸åˆæ³•çš„å­—ç¬¦ä¸²è½¬ä¹‰ï¼Œè¿”å› undefined raw å±æ€§ä¸Šä»å¯ä»¥å¾—åˆ°åŸå§‹å­—ç¬¦ä¸² ä¸æ˜¯æ ‡ç­¾æ¨¡ç‰ˆä»ç„¶ä¼šæŠ¥é”™ å­—ç¬¦ä¸²çš„æ–°å¢æ–¹æ³•String.fromCodePoint() ES5 æä¾› String.fromCharCode() æ–¹æ³•ä» Unicode ç ç‚¹è¿”å›å¯¹åº”å­—ç¬¦ï¼Œä¸èƒ½è¯†åˆ«å¤§äº 0xFFFF çš„å­—ç¬¦ ES6 æä¾› String.fromCodePoint() å¯è¯†åˆ«å¤§äº 0xFFFF çš„å­—ç¬¦ å¤šä¸ªå‚æ•°ä¼šè¢«åˆå¹¶æˆä¸€ä¸ªå­—ç¬¦ä¸²è¿”å› fromCodePoint æ–¹æ³•å®šä¹‰åœ¨ String å¯¹è±¡ä¸Š codePointAt æ–¹æ³•å®šä¹‰åœ¨å­—ç¬¦ä¸²çš„å®ä¾‹å¯¹è±¡ä¸Š String.raw() æ›¿æ¢æ‰€æœ‰å˜é‡ï¼Œå¹¶å¯¹æ–œæ è¿›è¡Œè½¬ä¹‰ å®ç° 12345678910String.raw = function (strings, ...values) &#123; let output = ''; let index; for (index = 0; index &lt; values.length; index++) &#123; output += strings.raw[index] + values[index]; &#125; output += strings.raw[index] return output;&#125; å®ä¾‹æ–¹æ³•ï¼šcodePointAt() JavaScript å†…éƒ¨ï¼Œå­—ç¬¦ä»¥ UTF-16 çš„æ ¼å¼å­˜å‚¨ï¼Œæ¯ä¸ªå­—ç¬¦å›ºå®š 2 å­—èŠ‚ å¤§äº 0xFFFF çš„å­—ç¬¦éœ€è¦ 4 ä¸ªå­—èŠ‚å­˜å‚¨ï¼ŒJavaScript ä¼šè®¤ä¸ºå®ƒä»¬æ˜¯ä¸¤ä¸ªå­—ç¬¦ï¼Œå­—ç¬¦ä¸²é•¿åº¦ä¸º 2 ES5 charCodeAt() åªèƒ½ 2 ä¸ªå­—èŠ‚ 2 ä¸ªå­—èŠ‚å¤„ç† ES6 codePointAt() èƒ½å¤Ÿæ­£ç¡®å¤„ç† 4 ä¸ªå­—èŠ‚ codePointAt() è¿”å›çš„ç ç‚¹æ˜¯åè¿›åˆ¶çš„ï¼ŒtoString(16) è½¬ä¸ºåå…­è¿›åˆ¶ å®ä¾‹æ–¹æ³•ï¼šnormalize() åˆæˆç¬¦å· å®ä¾‹æ–¹æ³•ï¼šincludes(), startsWith(), endsWith() ES5 indexOf å¯ä»¥ç¡®å®šä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«åœ¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ ES6 includes(&#39;subString&#39;, n) è¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°äº†å‚æ•°å­—ç¬¦ä¸² startsWith(&#39;subString&#39;, n) è¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å¤´éƒ¨ endsWith(&#39;subString&#39;, n) è¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å°¾éƒ¨ å®ä¾‹æ–¹æ³•ï¼šrepeat(n) è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œé‡å¤ n æ¬¡ å°æ•°å–æ•´ï¼Œè´Ÿæ•°/Infinity æŠ¥é”™ å®ä¾‹æ–¹æ³•ï¼špadStart(n, â€˜stringâ€™), padEnd(n, â€˜stringâ€™) è¡¥å…¨é•¿åº¦ é•¿åº¦ n ç”¨æ¥è¡¥å…¨çš„å­—ç¬¦ä¸² string å®ä¾‹æ–¹æ³•ï¼štrimStart(), trimEnd() æ¶ˆé™¤ç©ºæ ¼ ä¸ä¿®æ”¹åŸå§‹å­—ç¬¦ å®ä¾‹æ–¹æ³•ï¼šmatchAll() matchAll()è¿”å›ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼åœ¨å½“å‰å­—ç¬¦ä¸²çš„æ‰€æœ‰åŒ¹é… è¯¦è§ 6-æ­£åˆ™çš„æ‰©å±•","categories":[],"tags":[{"name":"ECMAScript 6 å…¥é—¨","slug":"ECMAScript-6-å…¥é—¨","permalink":"http://ziiyan.github.io/tags/ECMAScript-6-%E5%85%A5%E9%97%A8/"}]},{"title":"ES6ï¼šå˜é‡çš„è§£æ„èµ‹å€¼","slug":"ES6ï¼šå˜é‡çš„è§£æ„èµ‹å€¼","date":"2020-03-15T13:28:01.000Z","updated":"2020-08-13T08:56:37.400Z","comments":true,"path":"2020/03/15/ES6ï¼šå˜é‡çš„è§£æ„èµ‹å€¼/","link":"","permalink":"http://ziiyan.github.io/2020/03/15/ES6%EF%BC%9A%E5%8F%98%E9%87%8F%E7%9A%84%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/","excerpt":"","text":"å˜é‡çš„è§£æ„èµ‹å€¼ ES6 å…è®¸æŒ‰ç…§ä¸€å®šçš„æ¨¡å¼ï¼Œä»æ•°ç»„å’Œå¯¹è±¡ä¸­æå–å€¼ï¼Œå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œè¢«ç§°ä¸ºè§£æ„ æ•°ç»„çš„è§£æ„èµ‹å€¼åŸºæœ¬ç”¨æ³•1let [a, b, c] = [1, 2, 3]; æœ¬è´¨ä¸Šï¼Œè¿™ç§å†™æ³•å±äºâ€œæ¨¡å¼åŒ¹é…â€ï¼Œåªè¦ç­‰å·ä¸¤è¾¹çš„æ¨¡å¼ç›¸åŒï¼Œå·¦è¾¹çš„å˜é‡å°±ä¼šè¢«èµ‹äºˆå¯¹åº”çš„å€¼ 12345// åµŒå¥—çš„ä¾‹å­let [head, ...detail] = [1, 2, 3, 4];// head = 1, detail = [2, 3, 4]let [x, y, ...z] = ['a'];// x = 'a', y = undefined, z = [] å¦‚æœè§£æ„ä¸æˆåŠŸï¼Œå˜é‡çš„å€¼å°±ç­‰äº undefined 12let [foo] = [];let [bar, foo] = [1]; ä¸å®Œå…¨è§£æ„ï¼ŒåªåŒ¹é…ä¸€éƒ¨åˆ† 1234let [x, y] = [1, 2, 3];// x = 1, y = 2let [a, [b], d] = [1, [2, 3], 4];// a = 1, b = 2, d = 4 å¦‚æœç­‰å·å³è¾¹ä¸æ˜¯æ•°ç»„ï¼ˆä¸¥æ ¼çš„è¯´ï¼Œä¸æ˜¯å¯éå†çš„ç»“æ„ï¼Œå‚è§ç¬¬ 17 ç«  - Iteratorï¼‰ï¼Œä¼šæŠ¥é”™ 12345678// è½¬ä¸ºå¯¹è±¡åä¸å…·å¤‡ Iterator æ¥å£let [foo] = 1;let [foo] = false;let [foo] = NaN;let [foo] = undefined;let [foo] = null;// æœ¬èº«ä¸å…·å¤‡ Iterator æ¥å£let [foo] = &#123;&#125;; åªè¦æŸç§æ•°æ®ç»“æ„å…·æœ‰ Iterator æ¥å£ï¼Œéƒ½å¯ä»¥é‡‡ç”¨æ•°ç»„å½¢å¼çš„è§£æ„èµ‹å€¼ é»˜è®¤å€¼ è§£æ„èµ‹å€¼å…è®¸æŒ‡å®šé»˜è®¤å€¼ 1234let [foo = true] = [];// foo = truelet [x, y = 'b'] = ['a'];// x = 'a', y = 'b' ES6 å†…éƒ¨ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦åˆ¤æ–­ä¸€ä¸ªä½ç½®æ˜¯å¦æœ‰å€¼ï¼Œåªæœ‰å½“ä¸€ä¸ªæ•°ç»„æˆå‘˜ä¸¥æ ¼ç­‰äº undefined é»˜è®¤å€¼æ‰ä¼šç”Ÿæ•ˆ 1234let [x = 1] = [undefined];// x = 1let [x = 1] = [null];// x = null å¦‚æœé»˜è®¤å€¼æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œåˆ™æ˜¯æƒ°æ€§æ±‚å€¼ï¼Œä¹Ÿå°±æ˜¯åªæœ‰åœ¨ç”¨åˆ°çš„æ—¶å€™æ‰ä¼šæ±‚å€¼ã€‚ 12345678910111213141516function f() &#123; console.log('aaa');&#125;let [x = f()] = [1];// x = 1, å‡½æ•° f ä¸ä¼šæ‰§è¡Œ// ç­‰ä»·äºlet x;if ([1][0] === undefined) &#123; x = f();&#125; else &#123; x = [1][0];&#125;// [1] æ˜¯åªå«å…ƒç´  1 çš„æ•°ç»„// [1][0] è¡¨ç¤ºå–è¯¥æ•°ç»„ç¬¬ä¸€ä½ï¼Œä¹Ÿå°±æ˜¯å…ƒç´  1// let array = [1];// let x = array[0]; é»˜è®¤å€¼å¯ä»¥å¼•ç”¨è§£æ„èµ‹å€¼çš„å…¶ä»–å˜é‡ï¼Œä½†è¯¥å˜é‡å¿…é¡»å·²ç»å£°æ˜ 1234let [x = 1, y = x] = [];// x = 1, y = 1let [x = y, y = 1] = [];// æŠ¥é”™ å¯¹è±¡çš„è§£æ„èµ‹å€¼åŸºæœ¬ç”¨æ³•12let &#123; foo, bar &#125; = &#123; foo: 'aaa', bar: 'bbb' &#125;;// foo = 'aaa', bar = 'bbb' æ•°ç»„çš„å…ƒç´ æ˜¯æŒ‰æ¬¡åºæ’åˆ—çš„ï¼Œå˜é‡çš„å–å€¼ç”±ä½ç½®å†³å®š å¯¹è±¡çš„å±æ€§æ²¡æœ‰æ¬¡åºï¼Œå˜é‡å¿…é¡»ä¸å±æ€§åŒåæ‰èƒ½èµ‹å€¼ 12let &#123; baz &#125; = &#123; foo: 'aaa', bar: 'bbb' &#125;;// baz = undefined å¯¹è±¡çš„è§£æ„èµ‹å€¼å¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†ç°æœ‰å¯¹è±¡çš„æ–¹æ³•èµ‹å€¼åˆ°æŸä¸ªå˜é‡ 123let &#123; log, sin, cos &#125; = Math;const &#123; log &#125; = console;log('hello'); å¦‚æœå˜é‡åä¸å±æ€§åä¸ä¸€è‡´ï¼Œå†™æ³•å¦‚ä¸‹ 123456let &#123; foo: baz &#125; = &#123; foo: 'aaa', bar: 'bbb'&#125;;// baz = 'aaa'let obj = &#123; first: 'hello', last = 'world' &#125;;let &#123; first: f, last: l &#125; = obj// f = 'hello', l = 'world' è¯´æ˜å¯¹è±¡çš„è§£æ„èµ‹å€¼æ˜¯ä¸‹é¢å½¢å¼çš„ç®€å†™ï¼ˆå‚è§ç¬¬ 10 ç«  - å¯¹è±¡çš„æ‰©å±•ï¼‰ 1let &#123; foo: foo, bar: bar &#125; = &#123; foo: 'aaa', bar: 'bbb' &#125;; ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹è±¡çš„è§£æ„èµ‹å€¼çš„å†…éƒ¨æœºåˆ¶ï¼Œæ˜¯å…ˆæ‰¾åˆ°åŒåå±æ€§ï¼Œç„¶åå†èµ‹å€¼ç»™å¯¹åº”å˜é‡ çœŸæ­£è¢«èµ‹å€¼çš„æ˜¯åè€…ï¼Œè€Œä¸æ˜¯å‰è€… å‰è€…æ˜¯åŒ¹é…çš„æ¨¡å¼ï¼Œåè€…æ‰æ˜¯å˜é‡ åµŒå¥— 12345678910111213const node = &#123; loc: &#123; start: &#123; line: 1, column: 5 &#125; &#125;&#125;;let &#123; loc, loc: &#123; start &#125;, loc: &#123; start: &#123; line &#125;&#125; &#125; = node;// line = 1// start = Object &#123;line: 1, column: 5&#125;// loc = Object &#123; start: Object &#125; å¯¹è±¡çš„è§£æ„èµ‹å€¼å¯ä»¥å–åˆ°ç»§æ‰¿çš„å±æ€§ 123456const obj1 = &#123;&#125;;const obj2 = &#123; foo: 'bar' &#125;;Object.setPrototypeOf(obj1, obj2);const &#123; foo &#125; = obj1;// foo = 'bar' é»˜è®¤å€¼ ç”Ÿæ•ˆæ¡ä»¶æ˜¯å¯¹è±¡çš„å±æ€§å€¼ä¸¥æ ¼ç­‰äº undefined æ³¨æ„ç‚¹ å¦‚æœè¦å°†ä¸€ä¸ªå·²ç»å£°æ˜çš„å˜é‡ç”¨äºè§£æ„èµ‹å€¼ 123456789// é”™è¯¯çš„å†™æ³•let x;&#123;x&#125; = &#123;x: 1&#125;;// js å¼•æ“ä¼šå°† &#123;x&#125; ç†è§£ä¸ºä¸€ä¸ªä»£ç å—ï¼Œä»è€Œå‘ç”Ÿè¯­æ³•é”™è¯¯// æ­£ç¡®çš„å†™æ³•let x;(&#123;x&#125; = &#123;x: 1&#125;);// æ”¾åœ¨åœ†æ‹¬å·é‡Œå³å¯æ­£ç¡®æ‰§è¡Œ è§£æ„èµ‹å€¼å…è®¸ç­‰å·å·¦è¾¹çš„æ¨¡å¼ä¸­ä¸æ”¾ä»»ä½•å˜é‡å 123(&#123;&#125; = [true, false]);(&#123;&#125; = 'abc');(&#123;&#125; = []); ç”±äºæ•°ç»„æœ¬è´¨æ˜¯ç‰¹æ®Šçš„å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥å¯¹æ•°ç»„è¿›è¡Œå¯¹è±¡å±æ€§çš„è§£æ„ 123let arr = [1, 2, 3];let &#123;0: first, [arr.length = 1]: last&#125; = arr;// first = 1, last = 3 å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼ å­—ç¬¦ä¸²åœ¨è§£æ„èµ‹å€¼æ—¶è¢«è½¬æ¢æˆä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ 12345const [a, b, c, d, e] = 'hello';// a = 'h', b = 'e', C = 'c', d = 'l', e = 'o'let &#123; length: len &#125; = 'hello';// len = 5 æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼ æ•°å€¼å’Œå¸ƒå°”å€¼åœ¨è§£æ„èµ‹å€¼æ—¶è¢«è½¬ä¸ºå¯¹è±¡ 12345let &#123; toString: s &#125; = 123;// s === Number.prototype.toString =&gt; truelet &#123; toString: s &#125; = true;// s === Boolean.prototype.toString =&gt; true æ•°ç»„å’Œå¸ƒå°”å€¼çš„åŒ…è£…å¯¹è±¡éƒ½æœ‰ toString å±æ€§ï¼Œå› æ­¤å˜é‡ s éƒ½èƒ½å–åˆ°å€¼ è§£æ„èµ‹å€¼çš„è§„åˆ™ï¼šåªè¦ç­‰å·å³è¾¹çš„å€¼ä¸æ˜¯å¯¹è±¡æˆ–æ•°ç»„ï¼Œå°±å…ˆå°†å…¶è½¬ä¸ºå¯¹è±¡ ç”±äº undefined å’Œ null æ— æ³•è½¬ä¸ºå¯¹è±¡ï¼Œæ‰€ä»¥å®ƒä»¬æ— æ³•è¿›è¡Œè§£æ„èµ‹å€¼ï¼Œä¼šæŠ¥é”™ ##å‡½æ•°å‚æ•°çš„è§£æ„èµ‹å€¼ 12345678910111213141516171819202122232425function add([x, y]) &#123; return x + y;&#125;add([1, 2]);// 3[[1, 2], [3, 4]].map(([a, b]) =&gt; a + b);// [3, 7]function move(&#123;x = 0, y = 0&#125; = &#123;&#125;) &#123; return [x, y];&#125;move(&#123;x: 3, y: 8&#125;);// [3, 8]move(&#123;&#125;);// [0, 0]move();// [0, 0]function move(&#123;x, y&#125; = &#123; x: 0, y: 0 &#125;) &#123; return [x, y];&#125;move(&#123;x: 3, y: 8&#125;); // [3, 8]move(&#123;&#125;); // [undefined, undefined]move(); // [0, 0] åœ†æ‹¬å·é—®é¢˜ å¯¹äºç¼–è¯‘å™¨æ¥è¯´ï¼Œä¸€ä¸ªå¼å­åˆ°åº•æ˜¯æ¨¡å¼è¿˜æ˜¯è¡¨è¾¾å¼ï¼Œåªæœ‰åœ¨è§£æåˆ°ï¼ˆæˆ–è§£æä¸åˆ°ï¼‰ç­‰å·æ‰èƒ½çŸ¥é“ å¦‚æœæ¨¡å¼ä¸­å‡ºç°åœ†æ‹¬å·æ€ä¹ˆå¤„ç†ï¼Ÿ åªè¦æœ‰å¯èƒ½å¯¼è‡´è§£æ„çš„æ­§ä¹‰ï¼Œå°±ä¸å¾—ä½¿ç”¨åœ†æ‹¬å· å°½é‡ä¸è¦åœ¨æ¨¡å¼ä¸­æ”¾ç½®åœ†æ‹¬å· ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ å˜é‡å£°æ˜è¯­å¥ å‡½æ•°å‚æ•° èµ‹å€¼è¯­å¥çš„æ¨¡å¼ å¯ä»¥ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ èµ‹å€¼è¯­å¥çš„éæ¨¡å¼éƒ¨åˆ† ç”¨é€” äº¤æ¢å˜é‡çš„å€¼ 1234let x = 1;let y = 2;[x, y] = [y, x]; ä»å‡½æ•°è¿”å›å¤šä¸ªå€¼ å‡½æ•°å‚æ•°çš„å®šä¹‰ æå– JSON æ•°æ® å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ éå† Map è§£æ„ 123456789101112131415con s t map = new Map();map.set('first', 'hello');map.set('second', 'world');for (let [key, value] of map) &#123; console.log(key + ' is ' + value);&#125;for (let [key] of map) &#123; // ...&#125;for (let [, value] of map) &#123; // ...&#125; è¾“å…¥æ¨¡å—çš„æŒ‡å®šæ–¹æ³• 1const &#123; SourceMapCounsumer, SourceNode &#125; = require(\"source-map\");","categories":[],"tags":[{"name":"ECMAScript 6 å…¥é—¨","slug":"ECMAScript-6-å…¥é—¨","permalink":"http://ziiyan.github.io/tags/ECMAScript-6-%E5%85%A5%E9%97%A8/"}]},{"title":"ES6ï¼šlet å’Œ const å‘½ä»¤","slug":"ES6ï¼šlet-å’Œ-const-å‘½ä»¤","date":"2020-03-15T10:18:51.000Z","updated":"2020-08-13T08:57:06.772Z","comments":true,"path":"2020/03/15/ES6ï¼šlet-å’Œ-const-å‘½ä»¤/","link":"","permalink":"http://ziiyan.github.io/2020/03/15/ES6%EF%BC%9Alet-%E5%92%8C-const-%E5%91%BD%E4%BB%A4/","excerpt":"","text":"let å’Œ const å‘½ä»¤let å‘½ä»¤åŸºæœ¬ç”¨æ³• let å£°æ˜çš„å˜é‡å€¼åœ¨ let å‘½ä»¤ååœ¨çš„ä»£ç å—å†…æœ‰æ•ˆ 12345678var a = [];for (var i = 0; i &lt; 10; i++) &#123; a[i] = function() &#123; console.log(i); &#125;;&#125;a[6](); // 10// var å£°æ˜çš„ i åœ¨å…¨å±€æœ‰æ•ˆï¼Œæœ€ç»ˆæ‰€æœ‰çš„ i éƒ½æŒ‡å‘åŒä¸€ä¸ª iï¼Œä¹Ÿå°±æ˜¯æœ€åä¸€è½®å¾ªç¯æ—¶ i çš„å€¼ 1234567var a = [];for (let i = 0; i &lt; 10; i++) &#123; a[i] = function() &#123; console.log(i); &#125;;&#125;a[6](); // 6 for å¾ªç¯å˜é‡æ˜¯ä¸€ä¸ªçˆ¶ä½œç”¨åŸŸï¼Œå¾ªç¯ä½“æ˜¯ä¸€ä¸ªå­ä½œç”¨åŸŸ 1234567for (let i = 0; i &lt; 3; i++) &#123; let i = 'abc'; console.log(i);&#125;// abc// abc// abc ä¸å­˜åœ¨å˜é‡æå‡ var å£°æ˜ä¼šå‡ºç°â€å˜é‡æå‡â€ç°è±¡ï¼Œå³å˜é‡å¯ä»¥åœ¨å£°æ˜ä¹‹å‰ä½¿ç”¨ï¼Œå€¼ä¸º undefined let æ”¹å˜äº†è¯­æ³•è¡Œä¸ºï¼Œå£°æ˜ä¹‹å‰ä½¿ç”¨ä¼šæŠ¥é”™ æš‚æ—¶æ€§æ­»åŒº å—çº§ä½œç”¨åŸŸå†…å­˜åœ¨ let æˆ– const å‘½ä»¤ï¼Œå®ƒæ‰€å£°æ˜çš„å˜é‡å°±â€ç»‘å®š(binding)â€è¿™ä¸ªåŒºåŸŸï¼Œä¸å—å¤–éƒ¨å½±å“ 12345var tmp = 123;if (true) &#123; tmp = 'abc'; // ReferenceError let tmp;&#125; æš‚æ—¶æ€§æ­»åŒºçš„æœ¬è´¨ï¼šåªè¦ä¸€è¿›å…¥å½“å‰ä½œç”¨åŸŸï¼Œæ‰€è¦ä½¿ç”¨çš„å˜é‡å°±å·²ç»å­˜åœ¨äº†ï¼Œä½†æ˜¯ä¸å¯è·å–ï¼Œåªæœ‰ç­‰åˆ°å£°æ˜å˜é‡çš„é‚£ä¸€è¡Œä»£ç å‡ºç°ï¼Œæ‰å¯ä»¥è·å–å’Œä½¿ç”¨è¯¥å˜é‡ã€‚ ä¸å…è®¸é‡å¤å£°æ˜ let ä¸å…è®¸åœ¨ç›¸åŒä½œç”¨åŸŸå†…é‡å¤å£°æ˜åŒä¸€ä¸ªå˜é‡ 123456789101112131415// æŠ¥é”™function func() &#123; let a = 10; var a = 1;&#125;// æŠ¥é”™function func() &#123; var a = 10; let a = 1;&#125;// ä¸æŠ¥é”™function func() &#123; var a = 10; var a = 1;&#125; å—çº§ä½œç”¨åŸŸä¸ºä»€ä¹ˆéœ€è¦å—çº§ä½œç”¨åŸŸï¼ŸES5 åªæœ‰å…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸï¼Œå¯èƒ½ä¼šå¯¼è‡´ï¼š å†…å±‚å˜é‡å¯èƒ½ä¼šè¦†ç›–å¤–å±‚å˜é‡ ç”¨æ¥è®¡æ•°çš„å¾ªç¯å˜é‡æ³„éœ²ä¸ºå…¨å±€å˜é‡ å—çº§ä½œç”¨åŸŸä¸å‡½æ•°å£°æ˜ ES5 è§„å®šï¼Œå‡½æ•°åªèƒ½åœ¨é¡¶å±‚ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜ï¼Œä¸èƒ½åœ¨å—çº§ä½œç”¨åŸŸå£°æ˜ã€‚ ES6 æ˜ç¡®å…è®¸åœ¨å—çº§ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜å‡½æ•°ï¼Œä¸”å‡½æ•°å£°æ˜è¯­å¥çš„è¡Œä¸ºç±»ä¼¼äº letï¼Œåœ¨å—çº§ä½œç”¨åŸŸå¤–ä¸å¯å¼•ç”¨ ä½†ä¸ºäº†å…¼å®¹ï¼Œæµè§ˆå™¨åœ¨å®ç°æ—¶ï¼Œå‡½æ•°å£°æ˜çš„è¡Œä¸ºå¯ä»¥ç±»ä¼¼äº varï¼Œå³ä¼šæå‡åˆ°å…¨å±€ä½œç”¨åŸŸæˆ–å‡½æ•°ä½œç”¨åŸŸçš„å¤´éƒ¨ const å‘½ä»¤åŸºæœ¬ç”¨æ³• const å£°æ˜ä¸€ä¸ªåªè¯»çš„å¸¸é‡ï¼Œä¸€æ—¦å£°æ˜ï¼Œå¸¸é‡çš„å€¼å°±ä¸èƒ½æ”¹å˜ ç”±äºä¸èƒ½æ”¹å˜ï¼Œå£°æ˜æ—¶å°±å¿…é¡»åˆå§‹åŒ–ï¼Œå¦åˆ™æŠ¥é”™ æœ¬è´¨ csont å®é™…ä¸Šä¿è¯çš„æ˜¯å˜é‡æŒ‡å‘çš„é‚£ä¸ªå†…å­˜åœ°å€æ‰€ä¿å­˜çš„æ•°æ®ä¸å¾—æ”¹åŠ¨ å¯¹äºç®€å•ç±»å‹ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼‰çš„æ•°æ®ï¼Œå˜é‡æŒ‡å‘çš„åœ°å€ä¿å­˜å€¼ï¼Œç­‰åŒäºå¸¸é‡ å¯¹äºç¬¦åˆç±»å‹ï¼ˆå¯¹è±¡ã€æ•°ç»„ï¼‰çš„æ•°æ®ï¼Œå˜é‡æŒ‡å‘çš„åœ°å€ä¿å­˜æŒ‡é’ˆï¼ŒæŒ‡é’ˆå†æŒ‡å‘å®é™…æ•°æ®ï¼Œè¿™é‡Œåªèƒ½ä¿è¯æŒ‡é’ˆä¸å˜ï¼Œä½†ä¸èƒ½ä¿è¯å®é™…æ•°æ®ä¸å˜ å¦‚æœæƒ³å°†å¯¹è±¡å†»ç»“ï¼Œå¯ä»¥ä½¿ç”¨ Object.freeze() æ–¹æ³• ES6 å£°æ˜å˜é‡çš„å…­ç§æ–¹æ³• ES5 var function ES6 æ–°å¢ let const import class é¡¶å±‚å¯¹è±¡çš„å±æ€§ é¡¶å±‚å¯¹è±¡ æµè§ˆå™¨ï¼šwindow Nodeï¼šglobal ES5 ä¹‹ä¸­ï¼Œé¡¶å±‚å¯¹è±¡çš„å±æ€§å’Œå…¨å±€å˜é‡ç­‰ä»· ES6 è§„å®š varã€function å£°æ˜çš„å…¨å±€å˜é‡ï¼Œä¾æ—§æ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§ letã€constã€class å£°æ˜çš„å…¨å±€å˜é‡ï¼Œä¸å±äºé¡¶å±‚å¯¹è±¡çš„å±æ€§ globalThis å¯¹è±¡ é¡¶å±‚å¯¹è±¡æä¾›å…¨å±€ç¯å¢ƒï¼ˆå³å…¨å±€ä½œç”¨åŸŸï¼‰ å„ä¸ªå®ç°ä¸ä¸€è‡´ æµè§ˆå™¨ï¼šwindow æµè§ˆå™¨å’Œ Web Workerï¼šself Nodeï¼šglobal ä¸ºäº†å…¼å®¹ï¼Œä¸€èˆ¬ä½¿ç”¨ this ï¼Œä½†æœ‰é™åˆ¶ å…¨å±€ç¯å¢ƒä¸­ï¼Œthis ä¼šè¿”å›é¡¶å±‚å¯¹è±¡ã€‚ä½† Node æ¨¡å—å’Œ ES6 æ¨¡å—ä¸­ï¼Œthis è¿”å›å½“å‰æ¨¡å— å‡½æ•°é‡Œé¢çš„ thisï¼Œå¦‚æœå‡½æ•°ä¸æ˜¯ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è¿è¡Œï¼Œthis æŒ‡å‘é¡¶å±‚å¯¹è±¡ã€‚ä¸¥æ ¼æ¨¡å¼ä¸‹ undefined new Function(&#39;return this&#39;)() è¿”å›å…¨å±€å¯¹è±¡ã€‚å¦‚æœæµè§ˆå™¨ç”¨äº† CSPï¼ˆå†…å®¹å®‰å…¨ç­–ç•¥ï¼‰ï¼Œåˆ™è¯¥æ–¹æ³•æ— æ³•ä½¿ç”¨ ES2020 å¼•å…¥ globalThis ä½œä¸ºé¡¶å±‚å¯¹è±¡ï¼ŒæŒ‡å‘å…¨å±€ç¯å¢ƒä¸‹çš„ this","categories":[],"tags":[{"name":"ECMAScript 6 å…¥é—¨","slug":"ECMAScript-6-å…¥é—¨","permalink":"http://ziiyan.github.io/tags/ECMAScript-6-%E5%85%A5%E9%97%A8/"}]},{"title":"ç¬¬äºŒåäºŒç«  é«˜çº§æŠ€å·§","slug":"ç¬¬22ç« -é«˜çº§æŠ€å·§","date":"2020-03-14T09:27:55.000Z","updated":"2020-03-15T13:23:23.408Z","comments":true,"path":"2020/03/14/ç¬¬22ç« -é«˜çº§æŠ€å·§/","link":"","permalink":"http://ziiyan.github.io/2020/03/14/%E7%AC%AC22%E7%AB%A0-%E9%AB%98%E7%BA%A7%E6%8A%80%E5%B7%A7/","excerpt":"","text":"ç¬¬äºŒåäºŒç«  é«˜çº§æŠ€å·§é«˜çº§å‡½æ•°å®‰å…¨çš„ç±»å‹æ£€æµ‹Object.toString() æ–¹æ³•è¿”å›ä¸€ä¸ª [object NativeConstructorName] æ ¼å¼çš„å­—ç¬¦ä¸²ã€‚æ¯ä¸ªç±»å†…éƒ¨éƒ½æœ‰ä¸€ä¸ª [[Class]] å±æ€§ï¼ŒæŒ‡å®šäº†ä¸Šè¿°å­—ç¬¦ä¸²ä¸­çš„æ„é€ å‡½æ•°åã€‚ 12Object.prototype.toString.call(value);// \"[object Array]\" å¼€å‘äººå‘˜å®šä¹‰çš„æ„é€ å‡½æ•°è¿”å› object Objectã€‚ ä½œç”¨åŸŸå®‰å…¨çš„æ„é€ å‡½æ•° å½“ new è°ƒç”¨æ„é€ å‡½æ•°æ—¶ï¼Œæ„é€ å‡½æ•°å†…ç”¨åˆ°çš„ this å¯¹è±¡ä¼šæŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡å®ä¾‹ã€‚ å¦‚æœä¸ç”¨ newï¼Œthis ä¼šæ˜ å°„åˆ°å…¨å±€å¯¹è±¡ widow ä¸Šï¼Œå¯¼è‡´å±æ€§è¢«æ·»åŠ åˆ°å…¨å±€ã€‚ è§£å†³ï¼šæ„é€ å‡½æ•°å†…éƒ¨æ£€æŸ¥ this å¯¹è±¡æ˜¯å¦æ­£ç¡® 123456789function Person(name, age, job) &#123; if (this instanceof Person) &#123; this.name = name; this.age = age; this.job = job; &#125; else &#123; return new Person(name, age, job); &#125;&#125; æƒ°æ€§è½½å…¥å‡½æ•°å‡½æ•°æ‰§è¡Œçš„åˆ†æ”¯åªæ‰§è¡Œä¸€æ¬¡ å‡½æ•°è¢«è°ƒç”¨æ—¶å¤„ç† ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ç”¨åˆé€‚å‡½æ•°è¦†ç›–åŸæ¥çš„å‡½æ•° ä¾‹å¦‚æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒæŸåŠŸèƒ½ï¼Œæ‰§è¡Œä¸€æ¬¡å°±è¡Œ åœ¨å£°æ˜æ—¶å°±æŒ‡å®šé€‚å½“å‡½æ•° åŠ è½½æ—¶æŸå¤±æ€§èƒ½ï¼Œæ‰§è¡Œæ—¶ä¸ä¼š å‡½æ•°ç»‘å®š bind()åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥åœ¨ç‰¹å®šçš„ this ç¯å¢ƒä¸­ä»¥æŒ‡å®šå‚æ•°è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ã€‚ 12345678910111213141516171819202122232425var handler = &#123; message: \"Event handled\", handleClick: function (event) &#123; alert(this.message); &#125;&#125;;var btn = document.getElementById(\"my-btn\");EventUtil.addHandler(btn, \"click\", handler.handleClick);// ç”±äºæ²¡æœ‰ä¿å­˜ handler.handleClick() çš„æ‰§è¡Œç¯å¢ƒ// this æŒ‡å‘ DOM æŒ‰é’®è€Œé handler// æœ¬æ¥åº”è¯¥æ˜¾ç¤º â€œEvent handledâ€ï¼Œä¼šæ˜¾ç¤º undefined// ä½¿ç”¨é—­åŒ…è§£å†³ï¼šEventUtil.addHandler(btn, \"click\", function(event) &#123; handler.handleClick(event);&#125;)// bind() å¯ä»¥å°†å‡½æ•°ç»‘å®šåˆ°æŒ‡å®šç¯å¢ƒçš„å‡½æ•°function bind(fn, context) &#123; return function() &#123; return fn.apply(context, arguments); &#125;&#125;EventUtil.addHandler(btn, \"click\", bind(handler,handleClick, handler)); å‡½æ•°æŸ¯é‡ŒåŒ– ç”¨äºåˆ›å»ºå·²ç»è®¾ç½®å¥½äº†ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°çš„å‡½æ•° åŸºæœ¬æ–¹æ³•å’Œå‡½æ•°ç»‘å®šä¸€æ ·ï¼šä½¿ç”¨ä¸€ä¸ªé—­åŒ…è¿”å›ä¸€ä¸ªå‡½æ•° åŒºåˆ«åœ¨äºï¼šå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œè¿”å›çš„å‡½æ•°è¿˜éœ€è¦è®¾ç½®ä¸€äº›ä¼ å…¥çš„å‚æ•° 12345678function curry(fn, context) &#123; var args = Array.prototype.slice.call(arguments, 2); return function() &#123; var innerArgs = Array.prototype.slice.all(arguments); var finalArgs = args.concat(innerArgs); return fn.apply(context, finalArgs); &#125;;&#125; é˜²ç¯¡æ”¹å¯¹è±¡ä¸€æ—¦æŠŠå¯¹è±¡å®šä¹‰ä¸ºé˜²ç¯¡æ”¹ï¼Œå°±æ— æ³•æ’¤é”€äº† Object.preventExtensions() ä¸å¯æ‰©å±•å¯¹è±¡ æ— æ³•æ·»åŠ æ–°å±æ€§å’Œæ–¹æ³• å·²æœ‰æˆå‘˜å¯ä»¥ä¿®æ”¹/åˆ é™¤ Object.seal() å¯†å°å¯¹è±¡ ä¸å¯æ‰©å±• ä¸èƒ½åˆ é™¤ å¯ä»¥ä¿®æ”¹ Object.freeze() å†»ç»“å¯¹è±¡ ä¸å¯æ‰©å±• å¯†å° [[Writable]] è®¾ç½®ä¸º falseï¼Œè‹¥å®šä¹‰ [[Set]] å±æ€§å¯å†™ é«˜çº§å®šæ—¶å™¨ å®šæ—¶å™¨ä¸æ˜¯çº¿ç¨‹ Javascript è¿è¡Œäºå•çº¿ç¨‹ç¯å¢ƒä¸­ å®šæ—¶å™¨æ˜¯è®¡åˆ’ä»£ç åœ¨æœªæ¥çš„æŸä¸ªæ—¶é—´æ‰§è¡Œï¼Œæ‰§è¡Œæ—¶æœºä¸èƒ½ä¿è¯ å› ä¸ºåœ¨é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œä¸åŒæ—¶é—´å¯èƒ½æœ‰å…¶ä»–ä»£ç åœ¨æ§åˆ¶ Javascript è¿›ç¨‹ åœ¨é¡µé¢ä¸‹è½½å®Œåçš„ä»£ç è¿è¡Œã€äº‹ä»¶å¤„ç†ç¨‹åºã€Ajax å›è°ƒå‡½æ•°éƒ½å¿…é¡»ä½¿ç”¨åŒæ ·çš„çº¿ç¨‹æ¥æ‰§è¡Œ æµè§ˆå™¨è´Ÿè´£è¿›è¡Œæ’åºï¼ŒæŒ‡æ´¾æŸæ®µä»£ç åœ¨æŸä¸ªæ—¶é—´ç‚¹è¿è¡Œçš„ä¼˜å…ˆçº§ é™¤äº†ä¸» JavaScript æ‰§è¡Œè¿›ç¨‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªéœ€è¦åœ¨è¿›ç¨‹ä¸‹ä¸€æ¬¡ç©ºé—²æ—¶æ‰§è¡Œçš„ä»£ç é˜Ÿåˆ— æ²¡æœ‰ä»»ä½•ä»£ç æ˜¯ç«‹å³æ‰§è¡Œçš„ï¼Œä½†ä¸€æ—¦è¿›ç¨‹ç©ºé—²åˆ™å°½å¿«æ‰§è¡Œ å®šæ—¶å™¨æ—¶é—´è¿‡å»æ—¶ï¼Œå°†ä»£ç æ’å…¥é˜Ÿåˆ—æœ«å°¾ è‹¥é˜Ÿåˆ—ä¸ç©ºï¼Œåˆ™ä»éœ€ç­‰å¾… è‹¥ä¸» JavaScript æ‰§è¡Œè¿›ç¨‹æ­£åœ¨æ‰§è¡Œï¼Œä¹Ÿä»éœ€ç­‰å¾… é‡å¤çš„å®šæ—¶å™¨å½“ä½¿ç”¨ setInterval() ä»…å½“æ²¡æœ‰è¯¥å®šæ—¶å™¨çš„ä»»ä½•å…¶ä»–ä»£ç å®ä¾‹æ—¶ï¼Œæ‰å°†å®šæ—¶å™¨ä»£ç æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ æŸäº›é—´éš”ä¼šè¢«è·³è¿‡ å¤šä¸ªå®šæ—¶å™¨çš„ä»£ç æ‰§è¡Œä¹‹é—´çš„é—´éš”å¯èƒ½ä¼šæ¯”é¢„æœŸå° è§£å†³ï¼šé“¾å¼ setTimeout() 1234setTimeout(function()&#123; // â€¦â€¦ setTimeout(arguments.callee, interval);&#125;, interval); Yielding Processeså¦‚æœä»£ç è¿è¡Œè¶…è¿‡ç‰¹å®šçš„æ—¶é—´æˆ–è€…ç‰¹å®šè¯­å¥æ•°é‡å°±ä¸ä¼šè®©å®ƒç»§ç»­æ‰§è¡Œ å±•å¼€å¾ªç¯å‰ï¼Œæ€è€ƒï¼š è¯¥å¤„ç†æ˜¯å¦å¿…é¡»åŒæ­¥å®Œæˆï¼Ÿ æ•°æ®æ˜¯å¦å¿…é¡»æŒ‰é¡ºåºå®Œæˆï¼Ÿ å¦‚æœç­”æ¡ˆéƒ½ä¸ºå¦ï¼Œå¯ä»¥ä½¿ç”¨æ•°ç»„åˆ†å—æŠ€æœ¯ ä¸ºè¦å¤„ç†çš„é¡¹ç›®åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ï¼Œä½¿ç”¨å®šæ—¶å™¨å–å‡ºä¸‹ä¸€ä¸ªè¦å¤„ç†çš„é¡¹ç›®ï¼Œå†è®¾ç½®å¦ä¸€ä¸ªå®šæ—¶å™¨ 123456789function chunk(array, process, context) &#123; setTimeout(function() &#123; var item = array.shift(); process.call(context, item); if (array.length &gt; 0) &#123; setTimeout(arguments.callee, 100); &#125; &#125;, 100);&#125; å‡½æ•°èŠ‚æµ throttle DOM æ“ä½œæ¯”é DOM äº¤äº’éœ€è¦æ›´å¤šçš„å†…å­˜å’Œ CPU æ—¶é—´ è¿ç»­å°è¯•è¿›è¡Œè¿‡å¤šçš„ DOM ç›¸å…³æ“ä½œå¯èƒ½ä¼šå¯¼è‡´æµè§ˆå™¨æŒ‚èµ·ï¼Œç”šè‡³å´©æºƒã€‚ä¾‹å¦‚ onresize è°ƒæ•´æµè§ˆå™¨å¤§å° é˜²æ­¢è¿ç»­è§¦å‘ï¼Œä½¿ç”¨å®šæ—¶å™¨è¿›è¡ŒèŠ‚æµ åŸºæœ¬æ€æƒ³ æŸäº›ä»£ç ä¸å¯ä»¥åœ¨æ²¡æœ‰é—´æ–­çš„æƒ…å†µè¿ç»­é‡å¤æ‰§è¡Œ ç¬¬ä¸€æ¬¡è°ƒç”¨å‡½æ•°æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨ï¼Œåœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”ä¹‹åè¿è¡Œä»£ç  ç¬¬äºŒæ¬¡è°ƒç”¨å‡½æ•°æ—¶ï¼Œæ¸…é™¤å‰ä¸€æ¬¡çš„å®šæ—¶å™¨ï¼Œå¹¶è®¾ç½®å¦ä¸€ä¸ª å¦‚æœå‰ä¸€æ¬¡çš„å®šæ—¶å™¨å·²ç»æ‰§è¡Œï¼Œè¿™ä¸ªæ“ä½œæ— æ„ä¹‰ å¦‚æœå‰ä¸€æ¬¡çš„å®šæ—¶å™¨è¿˜æœªæ‰§è¡Œï¼Œå°±æ˜¯æ›¿æ¢æ–°å®šæ—¶å™¨ ç›®çš„æ˜¯åªæœ‰åœ¨æ‰§è¡Œå‡½æ•°çš„è¯·æ±‚åœæ­¢äº†ä¸€æ®µæ—¶é—´ä¹‹åæ‰æ‰§è¡Œ 1234567891011121314151617var processor = &#123; timeoutId: null, // å®é™…è¿›è¡Œå¤„ç†çš„æ–¹æ³• performPorcessing: function () &#123; // â€¦â€¦ &#125;, // åˆå§‹å¤„ç†è°ƒç”¨çš„æ–¹æ³• process: function () &#123; clearTimeout(this.timeoutId); var that = this; this.timeoutId = setTimeout(function() &#123; that.performProcessing(); &#125;, 100); &#125;&#125;;// å°è¯•å¼€å§‹æ‰§è¡Œprocessor.process(); ç®€åŒ–çš„ throttle()å‡½æ•° 123456function throttle(method, context) &#123; clearTimeout(method.tId); method.tId = setTimeout(function() &#123; method.call(context); &#125;, 100);&#125; è‡ªå®šä¹‰äº‹ä»¶ äº‹ä»¶æ˜¯ Javascript ä¸æµè§ˆå™¨äº¤äº’çš„ä¸»è¦é€”å¾„ äº‹ä»¶æ˜¯è§‚å¯Ÿè€…æ¨¡å¼ï¼Œä¸€ç§åˆ›å»ºæ¾æ•£è€¦åˆä»£ç çš„æŠ€æœ¯ è§‚å¯Ÿè€…æ¨¡å¼æœ‰ä¸¤ç±»å¯¹è±¡ç»„æˆ ä¸»ä½“ å‘å¸ƒäº‹ä»¶ ä¸çŸ¥é“è§‚å¯Ÿè€…çš„å­˜åœ¨ï¼Œç‹¬ç«‹è¿è¡Œ è§‚å¯Ÿè€… é€šè¿‡è®¢é˜…äº‹ä»¶æ¥è§‚å¯Ÿä¸»ä½“ çŸ¥é“ä¸»ä½“å¹¶èƒ½æ³¨å†Œäº‹ä»¶çš„å›è°ƒå‡½æ•°ï¼ˆäº‹ä»¶å¤„ç†ç¨‹åºï¼‰ æ‹–æ”¾ åˆ›å»ºä¸€ä¸ªç»å¯¹å®šä½çš„å…ƒç´ ï¼Œä½¿å…¶å¯ä»¥ç”¨é¼ æ ‡ç§»åŠ¨","categories":[],"tags":[{"name":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","slug":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","permalink":"http://ziiyan.github.io/tags/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}]},{"title":"ç¬¬äºŒåä¸‰ç«  ç¦»çº¿åº”ç”¨ä¸å®¢æˆ·ç«¯å­˜å‚¨","slug":"ç¬¬23ç« -ç¦»çº¿åº”ç”¨ä¸å®¢æˆ·ç«¯å­˜å‚¨","date":"2020-03-14T09:27:55.000Z","updated":"2020-03-15T13:23:34.568Z","comments":true,"path":"2020/03/14/ç¬¬23ç« -ç¦»çº¿åº”ç”¨ä¸å®¢æˆ·ç«¯å­˜å‚¨/","link":"","permalink":"http://ziiyan.github.io/2020/03/14/%E7%AC%AC23%E7%AB%A0-%E7%A6%BB%E7%BA%BF%E5%BA%94%E7%94%A8%E4%B8%8E%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AD%98%E5%82%A8/","excerpt":"","text":"ç¬¬äºŒåä¸‰ç«  ç¦»çº¿åº”ç”¨ä¸å®¢æˆ·ç«¯å­˜å‚¨ç¦»çº¿ Web åº”ç”¨ï¼šè®¾å¤‡ä¸èƒ½ä¸Šç½‘çš„æƒ…å†µä¸‹ä»ç„¶å¯ä»¥è¿è¡Œçš„åº”ç”¨ ç¦»çº¿æ£€æµ‹ navigator.onLine å±æ€§ åº”ç”¨ç¼“å­˜ åº”ç”¨ç¼“å­˜ appache ä»æµè§ˆå™¨çš„ç¼“å­˜ä¸­åˆ†å‡ºä¸€å—ç¼“å­˜åŒº ä½¿ç”¨ä¸€ä¸ªæè¿°æ–‡ä»¶(manifest file)ï¼Œåˆ—å‡ºè¦ä¸‹è½½å’Œç¼“å­˜çš„èµ„æº å°†æè¿°æ–‡ä»¶ä¸é¡µé¢å…³è”èµ·æ¥ï¼Œå¯ä»¥åœ¨ html ä¸­çš„ manifest å±æ€§æŒ‡å®šæ–‡ä»¶è·¯å¾„ applicationCache å¯¹è±¡ æ•°æ®å­˜å‚¨HTTP Cookie è¦æ±‚æœåŠ¡å™¨å¯¹ä»»æ„ HTTP è¯·æ±‚å‘é€ Set-Cookie HTTP ä½œä¸ºå“åº”çš„ä¸€éƒ¨åˆ†ï¼Œå…¶ä¸­åŒ…å«ä¼šè¯ä¿¡æ¯ å¦‚ï¼š HTTP/1.1 200 OK Content-type: text / html Set-Cookie: name = value Other-header: other-header-value é™åˆ¶ Cookie åœ¨æ€§è´¨ä¸Šæ˜¯ç»‘å®šåœ¨ç‰¹å®šçš„åŸŸåä¸‹çš„ å½“è®¾å®šäº†ä¸€ä¸ª cookie åï¼Œå†ç»™åˆ›å»ºå®ƒçš„åŸŸåå‘é€è¯·æ±‚æ—¶ï¼Œéƒ½ä¼šåŒ…å«è¿™ä¸ª cookie ç¡®ä¿ cookie ä¸­çš„ä¿¡æ¯åªèƒ½è®©æ‰¹å‡†çš„æ¥å—è€…è®¿é—®ï¼Œè€Œæ— æ³•è¢«å…¶ä»–åŸŸè®¿é—® æ„æˆ åç§°ï¼šä¸åŒºåˆ†å¤§å°å†™ï¼ˆå®è·µæœ€å¥½åŒºåˆ†ï¼‰ï¼Œç»è¿‡ URL ç¼–ç  å€¼ï¼šURL ç¼–ç  åŸŸï¼šæœ‰æ•ˆåŸŸ è·¯å¾„ï¼šå¯¹äºæŒ‡å®šçš„è·¯å¾„ï¼Œåº”è¯¥å‘æœåŠ¡å™¨å‘é€ cookie è‹¥æŒ‡å®š http://www.wrox.com/books/ï¼Œå°±ä¸ä¼šç»™ http://www.wrox.com å‘é€ cookie å¤±æ•ˆæ—¶é—´ï¼šcookie ä½•æ—¶åº”è¯¥è¢«åˆ é™¤çš„æ—¶é—´æˆ³ å®‰å…¨æ ‡å¿—ï¼šæŒ‡å®šåä¹‹å SSL è¿æ¥æ—¶æ‰å‘é€åˆ°æœåŠ¡å™¨ JS ä¸­çš„ cookie BOM çš„ document.cookie å±æ€§ å­ cookie å­˜æ”¾åœ¨å•ä¸ª cookie ä¸­çš„æ›´å°æ®µçš„æ•°æ® ä½¿ç”¨ cookie å€¼æ¥å­˜å‚¨å¤šä¸ªåç§°å€¼å¯¹ å¦‚ name=name1=value1&amp;name2=value2&amp;name3=value3&amp;name4=value4&amp;name5=value5 æŸ¥è¯¢å­—ç¬¦ä¸²çš„æ ¼å¼è¿›è¡Œæ ¼å¼åŒ– æ‰€æœ‰çš„ cookie éƒ½ä¼šç”±æµè§ˆå™¨ä½œä¸ºè¯·æ±‚å¤´å‘é€ï¼Œæ‰€ä»¥åœ¨ cookie ä¸­å­˜å‚¨å¤§é‡ä¿¡æ¯ä¼šå½±å“åˆ°ç‰¹å®šåŸŸçš„è¯·æ±‚æ€§èƒ½ Web å­˜å‚¨æœºåˆ¶ Web Storage çš„ä¸¤ä¸ªä¸»è¦ç›®æ ‡ æä¾›ä¸€ç§åœ¨ cookie ä¹‹å¤–å­˜å‚¨ä¼šè¯æ•°æ®çš„é€”å¾„ æä¾›ä¸€ç§å­˜å‚¨å¤§é‡å¯ä»¥è·¨ä¼šè¯å­˜åœ¨çš„æ•°æ®çš„æœºåˆ¶ Storage ç±»å‹ åªèƒ½å­˜å‚¨å­—ç¬¦ä¸² æä¾›æœ€å¤§çš„å­˜å‚¨ç©ºé—´ clear() getItem(name) key(index) removeItem(name) setItem(name, value) sessionStorage å¯¹è±¡ Storage çš„ä¸€ä¸ªå®ä¾‹ å­˜å‚¨ç‰¹å®šäºæŸä¸ªä¼šè¯çš„æ•°æ®ï¼Œåªä¿æŒåˆ°æµè§ˆå™¨å…³é—­ å¦‚æœæµè§ˆå™¨æ”¯æŒï¼Œå´©æºƒé‡å¯å¯ä»¥ç»§ç»­ä½¿ç”¨ å¯ä»¥è·¨è¶Šé¡µé¢åˆ·æ–°è€Œå­˜åœ¨ å­˜å‚¨åœ¨ sessionStorage çš„æ•°æ®åªèƒ½ç”±æœ€åˆç»™å¯¹è±¡å­˜å‚¨æ•°æ®çš„é¡µé¢è®¿é—®åˆ°ï¼Œæ‰€ä»¥å¯¹å¤šé¡µé¢åº”ç”¨æœ‰é™åˆ¶ globalStorage å¯¹è±¡ ä¸æ˜¯ Storage å®ä¾‹ï¼ŒglobalStorage[â€œxxx.comâ€] æ‰æ˜¯ Storage çš„å®ä¾‹ è·¨è¶Šä¼šè¯å­˜å‚¨æ•°æ®ï¼Œæœ‰ç‰¹å®šçš„è®¿é—®é™åˆ¶ å¦‚æœä¸åˆ é™¤ï¼Œæˆ–è€…ç”¨æˆ·æœªæ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼Œå­˜å‚¨åœ¨ globalStorage å±æ€§ä¸­çš„æ•°æ®ä¼šä¸€ç›´ä¿ç•™åœ¨ç£ç›˜ä¸Š åˆåœ¨å®¢æˆ·ç«¯å­˜å‚¨æ–‡æ¡£æˆ–è€…é•¿æœŸä¿å­˜ç”¨æˆ·åå¥½è®¾ç½® localStorage å¯¹è±¡ Storage å®ä¾‹ï¼Œç”¨æ³•ä¸ sessionStorage ç›¸åŒ å–ä»£ globalStorageï¼Œä¸ç”¨è®¾ç½®è§„åˆ™ åŒåŸŸåã€åŒåè®®ã€åŒç«¯å£ ä¿ç•™åˆ°é€šè¿‡ JavaScript åˆ é™¤æˆ–è€…æ˜¯ç”¨æˆ·æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ storage äº‹ä»¶ ä¿®æ”¹ Storage å¯¹è±¡ä¼šåœ¨æ–‡æ¡£ä¸Šè§¦å‘ storage äº‹ä»¶ IndexedDB æµè§ˆå™¨ä¸­ä¿å­˜ç»“æ„åŒ–æ•°æ®çš„ä¸€ç§æ•°æ®åº“ æ›¿ä»£è¢«åºŸå¼ƒçš„ Web SQL Database API åˆ›å»ºä¸€å¥— APIï¼Œæ–¹ä¾¿ä¿å­˜å’Œè¯»å– JavaScript å¯¹è±¡ï¼ŒåŒæ—¶è¿˜æ”¯æŒæŸ¥è¯¢åŠæœç´¢ å¼‚æ­¥ åšä¸ºå…¨å±€å¯¹è±¡ windows.indexedDBï¼Œå…·ä½“åç§°æ ¹æ®æµè§ˆå™¨ä¸åŒ æ•°æ®åº“ ç”¨å¯¹è±¡ä¿å­˜æ•°æ®ï¼Œè€Œä¸æ˜¯ç”¨è¡¨æ¥ä¿å­˜ ä¸€ä¸ª IndexedDB æ•°æ®åº“ï¼Œå°±æ˜¯ä¸€ç»„ä½äºç›¸åŒå‘½åç©ºé—´ä¸‹çš„å¯¹è±¡çš„é›†åˆ indexDB.open() åˆ›å»º/æ‰“å¼€ è¿”å› IDBRequest å¯¹è±¡ onerror onsuccess å¯¹è±¡å­˜å‚¨ç©ºé—´ å¯ä»¥æŠŠè¿™é‡Œçš„å¯¹è±¡å­˜å‚¨ç©ºé—´(object storge)æƒ³è±¡æˆè¡¨ï¼ŒæŠŠå…¶ä¸­ä¿å­˜çš„å¯¹è±¡æƒ³è±¡æˆè¡¨ä¸­çš„è®°å½• add() put() äº‹åŠ¡ è¯»å–æˆ–ä¿®æ”¹æ•°æ®éƒ½è¦é€šè¿‡äº‹åŠ¡æ¥ç»„ç»‡æ‰€æœ‰æ“ä½œ ä½¿ç”¨äº‹åŠ¡å¯ä»¥ç›´æ¥é€šè¿‡å·²çŸ¥çš„é”®æ£€ç´¢å•ä¸ªå¯¹è±¡ ä½¿ç”¨æ¸¸æ ‡æŸ¥è¯¢ éœ€è¦æ£€ç´¢å¤šä¸ªå¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œéœ€è¦åœ¨äº‹åŠ¡å†… éƒ¨åˆ›å»ºæ¸¸æ ‡ ä¸ä¼ ç»Ÿæ•°æ®åº“æŸ¥è¯¢ä¸åŒ æ¸¸æ ‡ä¸æå‰æ”¶é›†ç»“æœ æ¸¸æ ‡æŒ‡é’ˆä¼šå…ˆæŒ‡å‘ç»“æœä¸­çš„ç¬¬ä¸€é¡¹ï¼Œåœ¨æ¥åˆ°æŸ¥æ‰¾ä¸‹ä¸€é¡¹çš„æŒ‡ä»¤æ—¶æŒ‡å‘ä¸‹ä¸€é¡¹ é”®èŒƒå›´è®¾å®šæ¸¸æ ‡æ–¹å‘","categories":[],"tags":[{"name":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","slug":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","permalink":"http://ziiyan.github.io/tags/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}]},{"title":"ç¬¬äºŒåä¸€ç«  Ajaxä¸Comet","slug":"ç¬¬21ç« -Ajaxä¸Comet","date":"2020-03-12T16:20:44.000Z","updated":"2020-03-12T17:37:40.044Z","comments":true,"path":"2020/03/13/ç¬¬21ç« -Ajaxä¸Comet/","link":"","permalink":"http://ziiyan.github.io/2020/03/13/%E7%AC%AC21%E7%AB%A0-Ajax%E4%B8%8EComet/","excerpt":"","text":"AJAX - Asynchronous JavaScript + XML å‘æœåŠ¡å™¨è¯·æ±‚é¢å¤–çš„æ•°æ®è€Œæ— é¡»å¸è½½é¡µé¢ æ ¸å¿ƒæ˜¯ XMLHttpRequest å¯¹è±¡ï¼Œç®€ç§° XHR ä½¿ç”¨ XHR å¯¹è±¡å–å¾—æ–°æ•°æ®ï¼Œé€šè¿‡ DOM å°†æ–°æ•°æ®æ’å…¥é¡µé¢ XMLHttpRequest å¯¹è±¡1var xhr = new XMLHttpRequest(); XHRçš„ç”¨æ³• open(è¯·æ±‚ç±»å‹, URL, æ˜¯å¦å¼‚æ­¥) get / post ç›¸å¯¹äºå½“å‰é¡µé¢ / ç»å¯¹è·¯å¾„ Boolean send(è¯·æ±‚ä¸»ä½“) æ— å†…å®¹åˆ™ä¼ å…¥ null æ”¶åˆ°å“åº”åï¼Œè‡ªåŠ¨å¡«å…… XHR å¯¹è±¡çš„å±æ€§ responseText åšä¸ºå“åº”ä¸»ä½“ responseXML â€œtext/xmlâ€ æˆ– â€œapplication/xmlâ€ status å“åº”çš„ HTTP çŠ¶æ€ 200 æˆåŠŸï¼ŒresponseText å°±ç»ª 304 èµ„æºæœªä¿®æ”¹ï¼Œå¯ä½¿ç”¨ç¼“å­˜ statusText HTTP çŠ¶æ€çš„è¯´æ˜ readyState å¼‚æ­¥è¯·æ±‚çš„æ´»åŠ¨é˜¶æ®µ 0 ä½åˆå§‹åŒ– 1 å¯åŠ¨ 2 å‘é€ 3 æ¥æ”¶ 4 å®Œæˆ å€¼æ¯æ¬¡æ”¹å˜éƒ½è§¦å‘ readystatechange äº‹ä»¶ æ”¶åˆ°å“åº”å‰è°ƒç”¨ abort() å–æ¶ˆå¼‚æ­¥è¯·æ±‚ HTTPå¤´éƒ¨ä¿¡æ¯XHR æä¾›æ“ä½œè¯·æ±‚å¤´éƒ¨å’Œå“åº”å¤´éƒ¨ä¿¡æ¯çš„æ–¹æ³• é»˜è®¤æƒ…å†µï¼Œå‘é€ XHR è¯·æ±‚çš„åŒæ—¶è¿˜ä¼šå‘é€ä»¥ä¸‹å¤´éƒ¨ä¿¡æ¯ Acceptï¼šæµè§ˆå™¨èƒ½å¤Ÿå¤„ç†çš„å†…å®¹ç±»å‹ Accept-Charsetï¼šæµè§ˆå™¨èƒ½å¤Ÿæ˜¾ç¤ºçš„å­—ç¬¦é›† Accept-Encodingï¼šæµè§ˆå™¨èƒ½å¤Ÿå¤„ç†çš„å‹ç¼©ç¼–ç  Accept-Languageï¼šæµè§ˆå™¨å½“å‰è®¾ç½®çš„è¯­è¨€ Connectionï¼šæµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´è¿æ¥çš„ç±»å‹ Cookieï¼šå½“å‰é¡µé¢è®¾ç½®çš„ä»»ä½• Cookie Hostï¼šå‘å‡ºè¯·æ±‚çš„é¡µé¢æ‰€åœ¨çš„åŸŸ Refererï¼šå‘å‡ºè¯·æ±‚çš„é¡µé¢çš„ URI User-Agentï¼šæµè§ˆå™¨çš„ç”¨æˆ·ä»£ç†å­—ç¬¦ä¸² setRequestHeader(å¤´éƒ¨å­—æ®µåç§°ï¼Œå¤´éƒ¨å­—æ®µå€¼) è®¾ç½®è‡ªå®šä¹‰çš„è¯·æ±‚å¤´éƒ¨ä¿¡æ¯ open ä¹‹å send ä¹‹å‰ getRequestHeader(å¤´éƒ¨å­—æ®µåç§°) getAllResponseHeaders() GET è¯·æ±‚æ¯ä¸ªå‚æ•°çš„åç§°å’Œå€¼å¿…é¡»ä½¿ç”¨ encodeURIComponent() ç¼–ç æ‰èƒ½æ”¾åˆ° URL æœ«å°¾ï¼Œæ‰€æœ‰å-å€¼å¯¹éƒ½ç”± &amp; åˆ†éš” POST è¯·æ±‚serialize() æ ¼å¼åŒ–æ•°æ® XMLHttpRequest 2 çº§ FormData åºåˆ—åŒ–è¡¨å• 12var data = new FormData();data.append(é”®, å€¼); è¶…æ—¶è®¾å®š timeoutå±æ€§ open ä¹‹å send ä¹‹å‰è®¾å®šï¼Œè¯·æ±‚åœ¨ç­‰å¾…å“åº”å¤šå°‘æ¯«ç§’ä¹‹ååœæ­¢ è§¦å‘ timeout äº‹ä»¶ï¼Œè°ƒç”¨ ontimeout äº‹ä»¶å¤„ç†ç¨‹åº overrideMimeType() æ–¹æ³• é‡å†™ XHR å“åº”çš„ MIME ç±»å‹ï¼Œsend ä¹‹å‰è°ƒç”¨ è¿›åº¦äº‹ä»¶ loadstartï¼šæ¥æ”¶åˆ°å“åº”æ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚æ—¶è§¦å‘ progressï¼šæ¥æ”¶å“åº”æœŸé—´ä¸æ–­åœ°è§¦å‘ errorï¼šè¯·æ±‚å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘ abortï¼šåœ¨å› ä¸ºè°ƒç”¨ abort() æ–¹æ³•è€Œç»ˆæ­¢è¿æ¥æ—¶è§¦å‘ loadï¼šåœ¨æ¥æ”¶åˆ°å®Œæ•´çš„å“åº”æ•°æ®æ—¶è§¦å‘ loadedï¼šåœ¨é€šä¿¡å®Œæˆæˆ–è€…è§¦å‘ errorã€abort æˆ– load äº‹ä»¶åè§¦å‘ è·¨èµ„æºå…±äº« CORSåŸºæœ¬æ€æƒ³ï¼šä½¿ç”¨è‡ªå®šä¹‰çš„ HTTP å¤´éƒ¨è®©æµè§ˆå™¨ä¸æœåŠ¡å™¨è¿›è¡Œæ²Ÿé€š å‘é€ï¼šOriginï¼šhttp://www... æ¥æ”¶ï¼šAccess-Control-Allow-Originï¼šhttp://www... åœ¨ XHR å¯¹è±¡çš„ open ä¸­ä¼ å…¥ç»å¯¹ URL å¯ä»¥è¯·æ±‚è·¨åŸŸï¼Œï¼šé™åˆ¶ ä¸èƒ½ä½¿ç”¨ setRequestHeader() è®¾ç½®è‡ªå®šä¹‰å¤´éƒ¨ ä¸èƒ½å‘é€å’Œæ¥æ”¶ cookie è°ƒç”¨ getAllResponseHeaders() ä¼šè¿”å›ç©ºå­—ç¬¦ä¸² Preflighted Requests é€æ˜æœåŠ¡å™¨éªŒè¯æœºåˆ¶ å‘é€ Originï¼šä¸ç®€å•çš„è¯·æ±‚ç›¸åŒ Access-Control-Request-Method:è¯·æ±‚è‡ªèº«ä½¿ç”¨çš„æ–¹æ³• Access-Control-Request-Headers:(å¯é€‰)è‡ªå®šä¹‰çš„å¤´éƒ¨ä¿¡æ¯ï¼Œå¤šä¸ªå¤´éƒ¨ä»¥é€—å·åˆ†éš” æ¥æ”¶ Access-Control-Allow-Originï¼šä¸ç®€å•çš„è¯·æ±‚ç›¸åŒ Access-Control-Allow-Methodsï¼šå…è®¸çš„æ–¹æ³•ï¼Œå¤šä¸ªæ–¹æ³•ä»¥é€—å·åˆ†éš” Access-Control-Allow-Headersï¼šå…è®¸çš„å¤´éƒ¨ï¼Œå¤šä¸ªå¤´éƒ¨ä»¥é€—å·åˆ†éš” Access-Control-Max-Ageï¼šåº”è¯¥å°†è¿™ä¸ª Preflight è¯·æ±‚ç¼“å­˜å¤šé•¿æ—¶é—´(ä»¥ç§’è¡¨ç¤º) å¸¦å‡­æ®çš„è¯·æ±‚ é»˜è®¤è·¨æºè¯·æ±‚ä¸æä¾›å‡­æ®ï¼ˆcookieã€HTTP è®¤è¯åŠå®¢æˆ·ç«¯ SSL è¯æ˜ï¼‰ å°† withCredentials å±æ€§è®¾ç½®ä¸º true å¯ä»¥æŒ‡å®šæŸä¸ªè¯·æ±‚åº”è¯¥å‘é€å‡­æ® å“åº”ï¼šAccess-Control-Allow-Credentials: true è·¨æµè§ˆå™¨çš„ CROS æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒç®€å•çš„ï¼ˆé Preflight å’Œä¸å¸¦å‡­æ®çš„ï¼‰è¯·æ±‚ å…¶ä»–è·¨åŸŸæŠ€æœ¯ å›¾åƒ Ping &lt;img&gt; æ ‡ç­¾ åªèƒ½å‘é€ GET è¯·æ±‚ æ— æ³•è®¿é—®æœåŠ¡å™¨çš„å“åº”æ–‡æœ¬ JSONP - JSON with padding åŒ…å«ä¸¤éƒ¨åˆ†ï¼šå›è°ƒå‡½æ•°å’Œæ•°æ® é€šè¿‡ &lt;script&gt; å…ƒç´ ä½¿ç”¨ èƒ½ç›´æ¥è®¿é—®å“åº”æ–‡æœ¬ ä»å…¶ä»–åŸŸä¸­åŠ è½½ä»£ç æ‰§è¡Œï¼Œä¸å®‰å…¨ å¾ˆéš¾ç¡®å®š JSONP è¯·æ±‚æ˜¯å¦æˆåŠŸ Comet æœåŠ¡å™¨æ¨é€ é•¿è½®è¯¢ï¼šæµè§ˆå™¨å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¿æŒè¿æ¥ï¼Œç›´åˆ°æœ‰æ•°æ®å‘é€æ‰å‘é€æ•°æ®ã€‚æµè§ˆå™¨æ”¶åˆ°æ•°æ®åå…³é—­è¿æ¥ï¼Œå†é‡æ–°å‘èµ·æ–°è¯·æ±‚ HTTP æµï¼šæµè§ˆå™¨å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¿æŒè¿æ¥ï¼Œå‘¨æœŸæ€§åœ°å‘æµè§ˆå™¨å‘é€æ•°æ® SSE æœåŠ¡å™¨å‘é€äº‹ä»¶ å›´ç»•åªè¯» Comet äº¤äº’æ¨å‡ºçš„ API æˆ–è€…æ¨¡å¼ Web Socket å•ç‹¬çš„æŒä¹…è¿æ¥ä¸Šæä¾›å…¨åŒå·¥ã€åŒå‘é€šä¿¡ SSE ä¸ Web Socket Web Socket éœ€è¦æœåŠ¡å™¨æ”¯æŒï¼ŒåŒå‘é€šä¿¡ SSE ä¸éœ€è¦æœåŠ¡å™¨æ”¯æŒï¼Œä¸€èˆ¬å•å‘ï¼Œç»“åˆ XHR å¯ä»¥åŒå‘ å®‰å…¨ è¦æ±‚ä»¥ SSL è¿æ¥æ¥è®¿é—®å¯ä»¥é€šè¿‡ XHR è¯·æ±‚çš„èµ„æº è¦æ±‚æ¯ä¸€æ¬¡è¯·æ±‚éƒ½è¦é™„å¸¦ç»è¿‡å“åº”ç®—æ³•è®¡ç®—å¾—åˆ°çš„éªŒè¯ç  ä»¥ä¸‹æªæ–½å¯¹é˜²èŒƒ CSRFï¼ˆCross-Saite Request Forgeryï¼‰æ”»å‡»ä¸èµ·ä½œç”¨ è¦æ±‚å‘é€ POST è€Œä¸æ˜¯ GET â€”â€” å®¹æ˜“æ”¹å˜ æ£€æŸ¥æ¥æº URL ä»¥ç¡®å®š æ˜¯å¦å¯ä¿¡ â€”â€” å®¹æ˜“ä¼ªé€  åŸºäº cookie ä¿¡æ¯è¿›è¡ŒéªŒè¯ â€”â€”å®¹æ˜“ä¼ªé€ ","categories":[],"tags":[{"name":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","slug":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","permalink":"http://ziiyan.github.io/tags/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}]},{"title":"ç¬¬äºŒåç«  JSON","slug":"ç¬¬20ç« -JSON","date":"2020-03-11T16:11:48.000Z","updated":"2020-03-11T16:46:22.699Z","comments":true,"path":"2020/03/12/ç¬¬20ç« -JSON/","link":"","permalink":"http://ziiyan.github.io/2020/03/12/%E7%AC%AC20%E7%AB%A0-JSON/","excerpt":"","text":"JSON æ˜¯ä¸€ç§æ•°æ®æ ¼å¼ï¼Œä¸æ˜¯ç¼–ç¨‹è¯­è¨€ è¯­æ³• ç®€å•å€¼ å­—ç¬¦ä¸² æ•°ç»„ å¸ƒå°”å€¼ null å¤æ‚æ•°æ®ç±»å‹ å¯¹è±¡ æ— åºçš„é”®å€¼å¯¹ æ•°ç»„ æœ‰åºçš„å€¼çš„åˆ—è¡¨ å¯ä»¥é€šè¿‡æ•°å€¼ç´¢å¼•è®¿é—® ç®€å•å€¼JSON å­—ç¬¦ä¸²å¿…é¡»ä½¿ç”¨åŒå¼•å·ï¼ŒJavaScript å­—ç¬¦ä¸²å¯ä»¥å•å¼•å· 1\"Hello world!\" å¯¹è±¡123&#123; \"å±æ€§\": \"å€¼\"&#125; å±æ€§å¿…é¡»åŠ åŒå¼•å· å€¼å¯ä»¥æ˜¯ç®€å•å€¼/å¤æ‚ç±»å‹ æ•°ç»„1[25, \"hi\", true] } è§£æä¸åºåˆ—åŒ–JSON å¯¹è±¡ stringify() js å¯¹è±¡åºåˆ—åŒ–ä¸º JSON å­—ç¬¦ä¸² å‡½æ•°åŠåŸå‹æˆå‘˜ä¼šè¢«å¿½ç•¥ å€¼ä¸º undefined çš„å±æ€§ä¹Ÿä¼šè¢«è·³è¿‡ parse() JSON å­—ç¬¦ä¸²è§£æä¸º js å€¼ åºåˆ—åŒ–é€‰é¡¹ JSON.stringify() å‚æ•° è¿‡æ»¤å™¨ æ•°ç»„ å‡½æ•° replacer é€‰é¡¹ æ˜¯å¦åœ¨ JSON å­—ç¬¦ä¸²ä¸­ä¿ç•™ç¼©è¿› è¿‡æ»¤ç»“æœ å¦‚æœè¿‡æ»¤å™¨å‚æ•°æ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆ stringily() çš„ç»“æœä¸­å°†åªåŒ…å«æ•°ç»„ä¸­åˆ—å‡ºçš„å±æ€§ å¦‚æœæ˜¯å‡½æ•°ï¼šè¯¥å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼ˆå±æ€§åï¼Œå±æ€§å€¼ï¼‰ï¼Œæ ¹æ®å±æ€§åè¿›è¡Œè‡ªå®šä¹‰åºåˆ—åŒ– 12345678910111213141516171819var book = &#123; \"title\": \"Professional JavaScript\", \"authors\": [ \"Nicholas C. Zakas\" ], edition: 3, year: 2011&#125;; // js å¯¹è±¡var jsonText = JSON.stringify(book, function(key, value) &#123; switch(key)&#123; case \"authors\": return value.join(\",\") case \"year\": return 5000; case \"edition\": return undefined; default: return value; &#125;&#125;);// &#123;\"title\":\"Professional JavaScript\",\"authors\":\"Nicholas C. Zakas\",\"year\":5000&#125; å­—ç¬¦ä¸²ç¼©è¿› æ•°å­—ï¼šç©ºæ ¼æ•°ï¼Œæœ€å¤§ç¼©è¿›ç©ºæ ¼æ•° 10 å­—ç¬¦ä¸²ï¼šç¼©è¿›å­—ç¬¦ï¼Œä¸æ˜¯ç”¨ç©ºæ ¼ï¼Œæœ€é•¿10 toJSON() æ–¹æ³•Date å¯¹è±¡è‡ªå¸¦ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰ åšä¸ºå‡½æ•°è¿‡æ»¤å™¨çš„è¡¥å…… stringify() æ‰§è¡Œé¡ºåº å¦‚æœå­˜åœ¨ toJSON() èƒ½å–å¾—æœ‰æ•ˆå€¼å°±è°ƒç”¨ å¦åˆ™è¿”å›å¯¹è±¡æœ¬èº« å¦‚æœæä¾›äº†è¿‡æ»¤å™¨ï¼ˆç¬¬2ä¸ªå‚æ•°ï¼‰ åº”ç”¨è¿‡æ»¤å™¨ï¼Œä¼ å…¥çš„å€¼æ˜¯ 1 è¿”å›çš„å€¼ å¯¹ 2 è¿”å›çš„æ¯ä¸ªå€¼è¿›è¡Œç›¸åº”çš„åºåˆ—åŒ– å¦‚æœæä¾›ç¬¬ 3 ä¸ªå‚æ•°ï¼Œæ‰§è¡Œç›¸åº”çš„æ ¼å¼åŒ– è§£æé€‰é¡¹ JSON.parse() å‚æ•° è¿˜åŸå‡½æ•° reviver åœ¨æ¯ä¸ªé”®å€¼å¯¹ä¸Šè°ƒç”¨ æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼ˆå±æ€§å³é”®ï¼Œå€¼ï¼‰ è¿”å› undefined è¡¨ç¤ºåˆ é™¤ç›¸åº”çš„é”®","categories":[],"tags":[{"name":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","slug":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","permalink":"http://ziiyan.github.io/tags/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}]},{"title":"ç¬¬åä¸ƒç«  é”™è¯¯å¤„ç†ä¸è°ƒè¯•","slug":"ç¬¬17ç« -é”™è¯¯å¤„ç†ä¸è°ƒè¯•","date":"2020-03-09T16:10:00.000Z","updated":"2020-03-09T16:57:53.341Z","comments":true,"path":"2020/03/10/ç¬¬17ç« -é”™è¯¯å¤„ç†ä¸è°ƒè¯•/","link":"","permalink":"http://ziiyan.github.io/2020/03/10/%E7%AC%AC17%E7%AB%A0-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E4%B8%8E%E8%B0%83%E8%AF%95/","excerpt":"","text":"é”™è¯¯å¤„ç†try-catch è¯­å¥1234567try &#123; // å¯èƒ½ä¼šå¯¼è‡´é”™è¯¯çš„ä»£ç &#125; catch(error) &#123; // åœ¨é”™è¯¯å‘ç”Ÿæ—¶æ€ä¹ˆå¤„ç† console.log(error.message) // æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒ message å±æ€§&#125; finally å­å¥ æ— è®º try æˆ– catchï¼Œéƒ½ä¼šæ‰§è¡Œ finally å¦‚æœ try æˆ– catch ä¸­æœ‰ returnï¼Œä¼šè¢«å¿½ç•¥ å› ä¸ºä¸€å®šè¦æ‰§è¡Œ finally é”™è¯¯ç±»å‹ Error åŸºç±»å‹ï¼Œå…¶å®ƒéƒ½ç»§æ‰¿è¿™ä¸ª ä¸»è¦ç”¨äºè‡ªå®šä¹‰ EvalError æ²¡æœ‰æŠŠ eval() å½“æˆå‡½æ•°è°ƒç”¨ï¼ŒæŠ›å‡ºå¼‚å¸¸ eval() å‡½æ•°åœ¨ç¬¬äº”ç«  RangeError æ•°å€¼è¶…å‡ºå“åº”èŒƒå›´ ReferenceError æ‰¾ä¸åˆ°å¯¹è±¡ SyntaxError ä¼ å…¥è¯­æ³•é”™è¯¯çš„ JavaScript ç»™ eval() TypeError å˜é‡ä¸­ä¿å­˜ç€æ„å¤–çš„ç±»å‹ è®¿é—®ä¸å­˜åœ¨çš„æ–¹æ³• æ‰§è¡Œç‰¹å®šäºç±»å‹çš„æ“ä½œæ—¶ï¼Œå˜é‡ç±»å‹ä¸ç¬¦åˆè¦æ±‚ URIError encodeURI()ã€decodeURI() æ—¶ URI æ ¼å¼ä¸æ­£ç¡® æŠ›å‡ºé”™è¯¯throw æ“ä½œç¬¦ æ•è·é”™è¯¯çš„ç›®çš„åœ¨äºé¿å…æµè§ˆå™¨ä»¥é»˜è®¤æ–¹å¼å¤„ç†å®ƒä»¬ æŠ›å‡ºé”™è¯¯çš„ç›®çš„åœ¨äºæä¾›é”™è¯¯å‘ç”Ÿå…·ä½“åŸå› çš„æ¶ˆæ¯ é”™è¯¯ï¼ˆerrorï¼‰äº‹ä»¶æ²¡æœ‰é€šè¿‡ try-catch å¤„ç†çš„é”™è¯¯ä¼šè§¦å‘ window å¯¹è±¡çš„ error äº‹ä»¶ å¸¸è§çš„é”™è¯¯ç±»å‹ ç±»å‹è½¬æ¢é”™è¯¯ === !== if for while æ•°æ®ç±»å‹é”™è¯¯ typeof instanceof é€šä¿¡é”™è¯¯ encodeURIComponent() è°ƒè¯•æŠ€æœ¯ error(message) info(message) log(message) warn(message) æŠ›å‡ºé”™è¯¯ throw assert(æ¡ä»¶, å¦‚æœæ¡ä»¶ä¸ä¸º true æŠ›å‡ºçš„é”™è¯¯) å¯ä»¥ä»£æ›¿ if è¯­å¥","categories":[],"tags":[{"name":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","slug":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","permalink":"http://ziiyan.github.io/tags/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}]},{"title":"ç¬¬åå››ç«  è¡¨å•è„šæœ¬","slug":"ç¬¬14ç« -è¡¨å•è„šæœ¬","date":"2020-03-07T06:05:31.000Z","updated":"2020-03-15T13:22:39.406Z","comments":true,"path":"2020/03/07/ç¬¬14ç« -è¡¨å•è„šæœ¬/","link":"","permalink":"http://ziiyan.github.io/2020/03/07/%E7%AC%AC14%E7%AB%A0-%E8%A1%A8%E5%8D%95%E8%84%9A%E6%9C%AC/","excerpt":"","text":"ç¬¬åå››ç«  è¡¨å•è„šæœ¬è¡¨å•çš„åŸºæœ¬çŸ¥è¯†HTML ä¸­ï¼Œ&lt;form&gt; å…ƒç´  Javascript ä¸­ï¼ŒHTMLFormElementç±»å‹ï¼Œç»§æ‰¿ HTMLElement acceptCharset æœåŠ¡å™¨èƒ½å¤Ÿå¤„ç†çš„å­—ç¬¦é›† accept-charset action æ¥å—è¯·æ±‚çš„ URL action elements è¡¨å•ä¸­æ‰€æœ‰æ§ä»¶é›†åˆ HTMLCollection enctype è¯·æ±‚çš„ç¼–ç ç±»å‹ enctype length è¡¨å•ä¸­æ§ä»¶çš„æ•°é‡ method è¦å‘é€çš„HTTPè¯·æ±‚ç±»å‹ get/post method name è¡¨å•åç§° name reset() å°†æ‰€æœ‰è¡¨å•åŸŸé‡ç½®ä¸ºé»˜è®¤å€¼ submit() æäº¤è¡¨å• target ç”¨äºå‘é€å’Œæ¥å—å“åº”çª—å£çš„åç§° target æäº¤è¡¨å• &lt;input&gt; å’Œ &lt;button&gt; éƒ½å¯ä»¥å®šä¹‰æäº¤æŒ‰é’®ï¼Œtype = submit å³å¯ æäº¤è¡¨å•æ—¶ï¼Œæµè§ˆå™¨å°†è¯·æ±‚å‘é€ç»™æœåŠ¡å™¨ä¹‹å‰è§¦å‘ submit äº‹ä»¶ï¼Œè¿™æ ·å°±æœ‰æœºä¼šéªŒè¯è¡¨å•æ•°æ®ã€‚ æäº¤è¡¨å•æœ€å¤§çš„é—®é¢˜æ˜¯é‡å¤æäº¤è¡¨å• ç¬¬ä¸€æ¬¡æäº¤åç¦ç”¨æŒ‰é’® åˆ©ç”¨ onsubmit äº‹ä»¶å¤„ç†ç¨‹åº å–æ¶ˆåç»­çš„è¡¨å•æäº¤æ“ä½œ é‡ç½®è¡¨å• &lt;input&gt; æˆ– &lt;button&gt; ä¸­ type = resetï¼Œå•å‡»å³å¯é‡ç½® è¡¨å•å­—æ®µæ¯ä¸ªè¡¨å•éƒ½æœ‰ elements å±æ€§ï¼Œå†…å®¹æ˜¯æ‰€æœ‰è¡¨å•å…ƒç´ çš„é›†åˆã€‚é›†åˆæ˜¯ä¸€ä¸ªæœ‰åºåˆ—è¡¨ï¼ŒåŒ…å«è¡¨å•ä¸­æ‰€æœ‰å­—æ®µã€‚ å…±æœ‰çš„è¡¨å•å­—æ®µå±æ€§ disabled form name readOnly tabIndex type value å…±æœ‰çš„è¡¨å•å­—æ®µæ–¹æ³• focus() blur() autofocus é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨è·å¾—ç„¦ç‚¹ å…±æœ‰çš„è¡¨å•å­—æ®µäº‹ä»¶ blur change focus blur å’Œ change å…ˆåé¡ºåºåœ¨å„æµè§ˆå™¨ä¸­ä¸åŒ æ–‡æœ¬æ¡†è„šæœ¬&lt;input&gt;ã€&lt;textarea&gt; å¤„ç†æ–‡æœ¬æ¡†æ—¶æœ€å¥½ä¸è¦ä½¿ç”¨ DOM æ–¹æ³•ï¼ˆsetAttributeï¼‰ é€‰æ‹©æ–‡æœ¬select() æ–¹æ³•è·å¾—ç„¦ç‚¹æ—¶é€‰æ‹©å…¶æ‰€æœ‰æ–‡æœ¬ é€‰æ‹©äº‹ä»¶ å–å¾—é€‰æ‹©çš„æ–‡æœ¬ selectionStart æ•°å€¼ï¼Œå¼€å¤´ä½ç½® selectionEnd æ•°å€¼ï¼Œç»“å°¾ä½ç½® é€‰æ‹©éƒ¨åˆ†æ–‡æœ¬ setSelectionRange() è¿‡æ»¤è¾“å…¥ å±è”½å­—ç¬¦ æ“ä½œå‰ªè´´æ¿ å‰ªè´´æ¿äº‹ä»¶ beforecopy copy beforecut cut beforepaste paste clipboardData å¯¹è±¡ getData() setData() clearData() è‡ªåŠ¨åˆ‡æ¢ç„¦ç‚¹tabForward() HTML5 çº¦æŸéªŒè¯ API å¿…å¡«å­—æ®µ required å±æ€§ å…¶å®ƒè¾“å…¥ç±»å‹ email url æ•°å€¼èŒƒå›´ min max è¾“å…¥æ¨¡å¼ pattern æ£€æµ‹æœ‰æ•ˆæ€§ checkValidity() validity ç¦ç”¨éªŒè¯ novalidate é€‰æ‹©æ¡†è„šæœ¬&lt;select&gt;ã€&lt;option&gt; add(newOption, relOption) multiple options æ§ä»¶ä¸­æ‰€æœ‰ &lt;option&gt; å…ƒç´ çš„ HTMLCollectionï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ HTMLOptionElement å¯¹è±¡ index label selected text value remove(index) selectedIndex size è¡¨å•åºåˆ—åŒ– è¡¨å•æäº¤æœŸé—´ï¼Œæµè§ˆå™¨æ€æ ·å°†æ•°æ®å‘é€ç»™æœåŠ¡å™¨ï¼Ÿ å¯¹è¡¨å•å­—æ®µçš„åç§°å’Œå€¼è¿›è¡Œ URL ç¼–ç ï¼Œä½¿ç”¨ &amp; åˆ†éš” ä¸å‘é€ç¦ç”¨çš„è¡¨å•å­—æ®µ åªå‘é€å‹¾é€‰çš„å¤é€‰æ¡†å’Œå•é€‰æŒ‰é’® ä¸å‘é€ type ä¸º reset å’Œ button çš„æŒ‰é’® å¤šé€‰é€‰æ‹©æ¡†ä¸­çš„æ¯ä¸ªé€‰ä¸­çš„å€¼å•ç‹¬ä¸€ä¸ªæ¡ç›® åœ¨å•å‡»æäº¤æŒ‰é’®æäº¤è¡¨å•çš„æƒ…å†µä¸‹ï¼Œä¹Ÿä¼šå‘é€æäº¤æŒ‰é’®ï¼›å¦åˆ™ï¼Œä¸å‘é€æäº¤æŒ‰é’®ã€‚ &lt;select&gt; å…ƒç´ çš„å€¼ï¼Œå°±æ˜¯é€‰ä¸­çš„ &lt;option&gt; å…ƒç´ çš„ value ç‰¹æ€§çš„å€¼ å¯Œæ–‡æœ¬ç¼–è¾‘WYSIWYGï¼ˆWhat You See Is What You Getï¼‰ åœ¨é¡µé¢ä¸­åµŒå…¥ä¸€ä¸ªåŒ…å«ç©º HTML é¡µé¢çš„ iframe é€šè¿‡è®¾ç½® designMode å±æ€§ï¼Œå¯ä»¥ç¼–è¾‘ï¼Œç¼–è¾‘çš„å¯¹è±¡æ˜¯è¯¥é¡µé¢ body å…ƒç´ çš„ HTML ä»£ç ","categories":[],"tags":[{"name":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","slug":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","permalink":"http://ziiyan.github.io/tags/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}]},{"title":"ç¬¬åå…­ç«  HTMl5 è„šæœ¬ç¼–ç¨‹","slug":"ç¬¬16ç« -HTMl5è„šæœ¬ç¼–ç¨‹","date":"2020-03-07T06:05:31.000Z","updated":"2020-03-15T13:22:52.227Z","comments":true,"path":"2020/03/07/ç¬¬16ç« -HTMl5è„šæœ¬ç¼–ç¨‹/","link":"","permalink":"http://ziiyan.github.io/2020/03/07/%E7%AC%AC16%E7%AB%A0-HTMl5%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/","excerpt":"","text":"ç¬¬åå…­ç«  HTML5 è„šæœ¬ç¼–ç¨‹è·¨æ–‡æ¡£æ¶ˆæ¯ä¼ é€’ XDMæ¥è‡ªä¸åŒåŸŸçš„é¡µé¢é—´ä¼ é€’æ¶ˆæ¯ postMessage(æ¶ˆæ¯ï¼ŒåŸŸ) å‘é€ã€æ¶ˆæ¯ã€‘ç»™ã€åŸŸã€‘ä¸­çš„ &lt;iframe&gt; å…ƒç´  æ¥æ”¶åˆ° XDM æ¶ˆæ¯æ—¶ï¼Œä¼šè§¦å‘ window å¯¹è±¡çš„ message äº‹ä»¶ï¼Œå¼‚æ­¥ï¼Œæœ‰å»¶è¿Ÿ onmessage data origin source åŸç”Ÿæ‹–æ”¾æ‹–æ”¾äº‹ä»¶ dragstart æŒ‰ä¸‹é¼ æ ‡è§¦å‘ drag æ‹–åŠ¨æœŸé—´æŒç»­è§¦å‘ dragend æ‹–åŠ¨åœæ­¢æ—¶è§¦å‘ï¼Œæ— è®ºæ”¾ç½®ç›®æ ‡æ˜¯å¦æœ‰æ•ˆ å½“è¢«æ‹–åŠ¨åˆ°ä¸€ä¸ªæœ‰æ•ˆçš„æ”¾ç½®ç›®æ ‡ä¸Š dragenter æ‹–åŠ¨åˆ°æ”¾ç½®ç›®æ ‡ä¸Š dragover æ”¾ç½®ç›®æ ‡èŒƒå›´å†…ç§»åŠ¨æŒç»­è§¦å‘ dragleave æ‹–å‡ºæ”¾ç½®ç›®æ ‡èŒƒå›´ æˆ– drop æ”¾åˆ°æ”¾ç½®ç›®æ ‡ä¸­ è‡ªå®šä¹‰æ”¾ç½®ç›®æ ‡å…ƒç´ é»˜è®¤ä¸å…è®¸æ”¾ç½®ï¼Œä¿®æ”¹ä¸ºå¯æ”¾ç½®ï¼š 123456789var droptarget = document.getElementById(\"droptarget\");EventUtil.addHandler(droptarget, \"dragover\", function(event) &#123; EventUtil.preventDefault(event);&#125;);EventUtil.addHandler(droptarget, \"dragenter\", function(event) &#123; EventUtil.preventDefault(event);&#125;) dataTransfet å¯¹è±¡ç”¨äºä»è¢«æ‹–åŠ¨å…ƒç´ å‘æ”¾ç½®ç›®æ ‡ä¼ é€’å­—ç¬¦ä¸²æ ¼å¼çš„æ•°æ® getData() setData() ä¿å­˜åœ¨ dataTransfer å¯¹è±¡ä¸­çš„æ•°æ®åªèƒ½åœ¨ drop äº‹ä»¶ä¸­è¢«è¯»å– dropEffect è¢«æ‹–åŠ¨å…ƒç´ èƒ½æ‰§è¡Œçš„æ”¾ç½®è¡Œä¸º none move copy link effectAllowed å…è®¸æ‹–åŠ¨å…ƒç´ çš„å“ªç§ dropEffect uninitialized none copy link move copyLink copyMove linkMove all å¯æ‹–åŠ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå›¾åƒã€é“¾æ¥ã€æ–‡æœ¬å¯æ‹–åŠ¨ å…¶å®ƒå…ƒç´ å¯ä»¥æ‰‹åŠ¨è®¾ç½® draggable å±æ€§ä¸º ture åª’ä½“å…ƒç´ &lt;audio&gt;ã€&lt;video&gt; å¿…é¡» src æŒ‡å‘è¦åŠ è½½çš„åª’ä½“ å±æ€§è¡¨ç¤ºåª’ä½“çš„å½“å‰çŠ¶æ€ äº‹ä»¶è§¦å‘äº‹ä»¶ï¼Œç›‘å¬å±æ€§å˜åŒ–ï¼Œå¯èƒ½æ˜¯æ’­æ”¾ç»“æœï¼Œä¹Ÿå¯èƒ½æ˜¯æ“ä½œç»“æœ å†å²çŠ¶æ€ç®¡ç†history å¯¹è±¡","categories":[],"tags":[{"name":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","slug":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","permalink":"http://ziiyan.github.io/tags/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}]},{"title":"ç¬¬åä¸‰ç«  äº‹ä»¶","slug":"ç¬¬13ç« -äº‹ä»¶","date":"2020-03-04T16:52:46.000Z","updated":"2020-03-04T16:53:27.439Z","comments":true,"path":"2020/03/05/ç¬¬13ç« -äº‹ä»¶/","link":"","permalink":"http://ziiyan.github.io/2020/03/05/%E7%AC%AC13%E7%AB%A0-%E4%BA%8B%E4%BB%B6/","excerpt":"","text":"ç¬¬åä¸‰ç«  äº‹ä»¶js å’Œ html ä¹‹é—´çš„äº¤äº’æ˜¯é€šè¿‡äº‹ä»¶å®ç°çš„ï¼Œäº‹ä»¶å°±æ˜¯æ–‡æ¡£æˆ–æµè§ˆå™¨çª—å£ä¸­å‘ç”Ÿçš„ä¸€äº›ç‰¹å®šçš„äº¤äº’ç¬é—´ã€‚å¯ä»¥ä½¿ç”¨ä¾¦å¬å™¨æ¥é¢„å®šäº‹ä»¶ï¼Œä»¥ä¾¿äº‹ä»¶å‘ç”Ÿæ—¶æ‰§è¡Œç›¸åº”çš„ä»£ç ã€‚è¿™ç§åœ¨ä¼ ç»Ÿè½¯ä»¶å·¥ç¨‹ä¸­è¢«ç§°ä¸ºè§‚å¯Ÿå‘˜æ¨¡å¼çš„æ¨¡å‹ï¼Œæ”¯æŒ js å’Œ html+css ä¹‹é—´çš„æ¾æ•£è€¦åˆã€‚ äº‹ä»¶æµäº‹ä»¶æµæè¿°çš„æ˜¯ä»é¡µé¢ä¸­æ¥æ”¶äº‹ä»¶çš„é¡ºåº äº‹ä»¶å†’æ³¡æŒ‰ç…§ DOM æ ‘é€çº§å‘ä¸Šï¼Œåœ¨æ¯ä¸€çº§èŠ‚ç‚¹ä¸Šéƒ½ä¼šå‘ç”Ÿï¼Œç›´åˆ° document äº‹ä»¶æ•è·é¡ºåºä¸äº‹ä»¶å†’æ³¡ç›¸å DOM äº‹ä»¶æµâ€œDOM2 çº§äº‹ä»¶â€è§„å®šçš„äº‹ä»¶æµåŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µï¼š äº‹ä»¶æ•è·é˜¶æ®µ Document åˆ° ç›®æ ‡å…ƒç´ çš„ä¸Šä¸€çº§ å¤„äºç›®æ ‡é˜¶æ®µ äº‹ä»¶åœ¨ç›®æ ‡å…ƒç´ ä¸Šå‘ç”Ÿï¼Œäº‹ä»¶å¤„ç†è¢«çœ‹æˆå†’æ³¡çš„ä¸€éƒ¨åˆ† äº‹ä»¶å†’æ³¡é˜¶æ®µ ç›®æ ‡å…ƒç´  åˆ° Document DOM2 è§„å®šæ•è·é˜¶æ®µä¸è®¾è®¡ç›®æ ‡ï¼Œä½†æµè§ˆå™¨å®ç°æ—¶éƒ½ä¼šå‡ºå‘äº‹ä»¶å¯¹è±¡ä¸Šçš„äº‹ä»¶ äº‹ä»¶å¤„ç†ç¨‹åº äº‹ä»¶å°±æ˜¯æŸç§åŠ¨ä½œï¼Œå¦‚ clickã€loadã€mouseovre äº‹ä»¶å¤„ç†ç¨‹åºï¼ˆäº‹ä»¶ä¾¦å¬å™¨ï¼‰å°±æ˜¯å“åº”äº‹ä»¶çš„å‡½æ•°ï¼Œä»¥ on å¼€å¤´ï¼Œonclickã€onload ç­‰ HTML äº‹ä»¶å¤„ç†ç¨‹åº1234&lt;input onclick=\"showMessage()\"&gt;&lt;script&gt; function showMessage() &#123;â€¦â€¦&#125;&lt;/script&gt; å¦‚æœç”¨æˆ·åœ¨é¡µé¢è§£æäº‹ä»¶å¤„ç†ç¨‹åºä¹‹å‰ç‚¹å‡»å…ƒç´ ï¼Œä¼šå¼•å‘é”™è¯¯ æ‰©å±•ä½œç”¨åŸŸé“¾åœ¨ä¸åŒæµè§ˆå™¨ä¸­ä¼šå¯¼è‡´ä¸åŒç»“æœ HTML ä¸ JavaScript ä»£ç ç´§å¯†è€¦åˆ DOM0 çº§äº‹ä»¶å¤„ç†ç¨‹åºå°†ä¸€ä¸ªå‡½æ•°èµ‹å€¼ç»™äº‹ä»¶å¤„ç†ç¨‹åºå±æ€§ 12var btn = document.getElementById(\"myBtn\");btn.onclick = function () &#123;â€¦â€¦&#125; ä»£ç è¿è¡Œä¹‹å‰ä¸ä¼šæŒ‡å®šäº‹ä»¶å¤„ç†ç¨‹åºï¼Œå¯èƒ½å¯¼è‡´ç‚¹å‡»æ— æ•ˆ äº‹ä»¶å¤„ç†ç¨‹åºæ˜¯åœ¨å…ƒç´ çš„ä½œç”¨åŸŸä¸­è¿è¡Œçš„ï¼Œthis å¼•ç”¨å½“å‰å…ƒç´  null å³åˆ é™¤ DOM2 çº§äº‹ä»¶å¤„ç†ç¨‹åº addEventListener(a, b, c) removeEventListener(a, b, c) a è¦å¤„ç†çš„äº‹ä»¶å b ä½œä¸ºäº‹ä»¶å¤„ç†ç¨‹åºçš„å‡½æ•° c ä¸€ä¸ªå¸ƒå°”å€¼ true æ•è·é˜¶æ®µè°ƒç”¨äº‹ä»¶å¤„ç†ç¨‹åº false å†’æ³¡é˜¶æ®µè°ƒç”¨äº‹ä»¶å¤„ç†ç¨‹åº â˜‘ï¸12var btn = document.getElementById(\"myBtn\");btn.addEventListener(\"click\", function() &#123;&#125;, false&#125; äº‹ä»¶å¤„ç†ç¨‹åºæ˜¯åœ¨å…ƒç´ çš„ä½œç”¨åŸŸä¸­è¿è¡Œçš„ï¼Œthis å¼•ç”¨å½“å‰å…ƒç´  å­˜åœ¨å¤šä¸ªäº‹ä»¶å¤„ç†ç¨‹åºä¼šæŒ‰ç…§æ·»åŠ é¡ºåºè§¦å‘ addEventListener()æ·»åŠ çš„äº‹ä»¶å¤„ç†ç¨‹åºåªèƒ½ä½¿ç”¨ removeEventListener()æ¥ç§»é™¤ addEventListener() æ·»åŠ çš„åŒ¿åå‡½æ•°æ— æ³•ç§»é™¤ IE äº‹ä»¶å¤„ç†ç¨‹åº attachEvent(a, b) detachEvent(a, b) a äº‹ä»¶å¤„ç†ç¨‹åºåç§° b äº‹ä»¶å¤„ç†ç¨‹åºå‡½æ•° åªæ”¯æŒå†’æ³¡ äº‹ä»¶å¤„ç†ç¨‹åºçš„ä½œç”¨åŸŸæ˜¯å…¨å±€ å­˜åœ¨å¤šä¸ªäº‹ä»¶å¤„ç†ç¨‹åºä¼šæŒ‰ç…§æ·»åŠ é¡ºåºç›¸åçš„é¡ºåºè§¦å‘ è·¨æµè§ˆå™¨çš„äº‹ä»¶å¤„ç†ç¨‹åºå…³æ³¨å†’æ³¡é˜¶æ®µ addHandler(a, b, c) EventUtil(a, b, c) a è¦æ“ä½œçš„å…ƒç´  b äº‹ä»¶åç§° c äº‹ä»¶å¤„ç†ç¨‹åº äº‹ä»¶å¯¹è±¡åœ¨è§¦å‘ DOM ä¸Šçš„æŸä¸ªäº‹ä»¶æ—¶ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªäº‹ä»¶å¯¹è±¡ eventï¼Œè¿™ä¸ªå¯¹è±¡ä¸­åŒ…å«ç€æ‰€æœ‰ä¸æ—¶é—´æœ‰å…³çš„ä¿¡æ¯ DOM ä¸­çš„äº‹ä»¶å¯¹è±¡å…¼å®¹ DOM çš„æµè§ˆå™¨ä¼šå°†ä¸€ä¸ª event å¯¹è±¡ä¼ å…¥åˆ°äº‹ä»¶å¤„ç†ç¨‹åºä¸­ event.preventDefault() é˜»æ­¢ç‰¹å®šäº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼Œå¦‚é“¾æ¥åˆ°é»˜è®¤è¡Œä¸ºæ˜¯å¯¼èˆªåˆ° href event.stopPropagation() åœæ­¢äº‹ä»¶åœ¨ DOM å±‚æ¬¡ä¸­çš„ä¼ æ’­ï¼ˆæ•è·æˆ–å†’æ³¡ï¼‰ event.eventPhase ç¡®å®šäº‹ä»¶å½“å‰æ­£ä½äºäº‹ä»¶æµçš„å“ªä¸ªé˜¶æ®µ æ•è· 1 å¤„äºç›®æ ‡ 2 å†’æ³¡ 3 äº‹ä»¶å¤„ç†å™¨æ‰§è¡ŒæœŸé—´ event å¯¹è±¡æ‰ä¼šå­˜åœ¨ï¼Œæ‰§è¡Œå®Œå°±é”€æ¯ IE ä¸­çš„äº‹ä»¶å¯¹è±¡è·¨æµè§ˆå™¨çš„äº‹ä»¶å¯¹è±¡äº‹ä»¶ç±»å‹UIäº‹ä»¶ä¸ä¸€å®šä¸ç”¨æˆ·æ“ä½œæœ‰å…³ load å½“é¡µé¢å®Œå…¨åŠ è½½ååœ¨ window ä¸Šè§¦å‘ï¼Œå½“å›¾åƒåŠ è½½å®Œæ¯•æ—¶åœ¨å…ƒç´ ä¸Šé¢è§¦å‘ unload å½“é¡µé¢å®Œå…¨å¸è½½ååœ¨ window ä¸Šè§¦å‘ï¼ˆé¡µé¢åˆ‡æ¢æ—¶ï¼‰ resize æµè§ˆå™¨çª—å£è°ƒæ•´å¤§å°æ—¶ window ä¸Šè§¦å‘ï¼Œé€šè¿‡ js æˆ– body å…ƒç´ ä¸­ onresize æŒ‡å®šäº‹ä»¶å¤„ç†ç¨‹åº scroll window å¯¹è±¡ä¸Šå‘ç”Ÿï¼Œè¡¨ç¤ºé¡µé¢ä¸­ç›¸åº”å…ƒç´ çš„å˜åŒ– ç„¦ç‚¹äº‹ä»¶è·å¾—æˆ–å¤±å»ç„¦ç‚¹æ—¶è§¦å‘ document.hasFocus() document.activeElement blur å…ƒç´ å¤±å»ç„¦ç‚¹æ—¶è§¦å‘ï¼Œä¸å†’æ³¡ focus è·å¾—ç„¦ç‚¹æ—¶è§¦å‘ï¼Œä¸å†’æ³¡ focusin è·å¾—ç„¦ç‚¹æ—¶ï¼Œå†’æ³¡ focusout å¤±å»ç„¦ç‚¹æ—¶ï¼Œå†’æ³¡ é¼ æ ‡ä¸æ»šè½®äº‹ä»¶ click å•å‡»æˆ–å›è½¦ dblclick åŒå‡» mousedown æŒ‰ä¸‹ä»»æ„é¼ æ ‡æŒ‰é’® mouseup é‡Šæ”¾é¼ æ ‡æŒ‰é’® mouseenter å…‰æ ‡ä»å¤–éƒ¨é¦–æ¬¡ç§»åŠ¨åˆ°å…ƒç´ èŒƒå›´ä¹‹å†…ï¼Œä¸å†’æ³¡ï¼Œç§»åŠ¨åˆ°åä»£å…ƒç´ ä¸Šä¸ä¼šè§¦å‘ mouseleave å…ƒç´ ä¸Šçš„å…‰æ ‡ç§»åŠ¨åˆ°å…ƒç´ èŒƒå›´ä¹‹å¤–ï¼Œä¸å†’æ³¡ï¼Œç§»åŠ¨åˆ°åä»£å…ƒç´ ä¸è§¦å‘ mousemove å…‰æ ‡åœ¨å…ƒç´ å†…éƒ¨ç§»åŠ¨æ—¶é‡å¤è§¦å‘ mouseout é¼ æ ‡ä½äºä¸€ä¸ªå…ƒç´ ä¸Šæ–¹ï¼Œç§»å…¥å¦ä¸€ä¸ªå…ƒç´ æ—¶è§¦å‘ã€‚å¦ä¸€ä¸ªå…ƒç´ å¯èƒ½æ˜¯åŸæ¥å…ƒç´ çš„å¤–éƒ¨æˆ–å­å…ƒç´  mouseover å…‰æ ‡ä½äºä¸€ä¸ªå…ƒç´ å¤–éƒ¨ï¼Œé¦–æ¬¡ç§»å…¥å¦ä¸€ä¸ªå…ƒç´ è¾¹ç•Œä¹‹å†… å®¢æˆ·åŒºåæ ‡ä½ç½® event.clientX event.clientY é¡µé¢åæ ‡ä½ç½® event.pageX event.pageY å±å¹•åæ ‡ä½ç½® event.screenX event.screenY ä¿®æ”¹é”® click + é”®ç›˜ -&gt; å±æ€§ï¼ˆBooleanï¼‰ Shift shiftKey Ctrl ctrlKey Alt altKey Meta(Windows/Cmd) metaKey ç›¸å…³å…ƒç´  é’ˆå¯¹ moseoverã€mouseout relatedTarget å±æ€§ é¼ æ ‡æŒ‰é’® é’ˆå¯¹ mousedownã€mouseup button å±æ€§ 0 ä¸»é¼ æ ‡ 1 æ»šè½® 2 æ¬¡é¼ æ ‡ é¼ æ ‡æ»šè½®äº‹ä»¶ mousewheel å†’æ³¡ wheelDelta å±æ€§ é”®ç›˜ä¸æ–‡æœ¬äº‹ä»¶ keydown ä»»æ„é”® keypress å­—ç¬¦é”® keyup é‡Šæ”¾æ¡ˆä»¶ event.keyCode é”®ç ï¼ŒASCII å°å†™å­—æ¯ç›¸åŒ event.charCode å­—ç¬¦ç¼–ç ï¼Œé’ˆå¯¹ keypress å˜åŠ¨äº‹ä»¶ åˆ é™¤èŠ‚ç‚¹ æ’å…¥èŠ‚ç‚¹ HTML5 äº‹ä»¶ contextmenu å†’æ³¡ beforeunload DOMContentLoaded readystatechange uninitialized loading loaded interactive complete pageshow pagehide hashchange è®¾å¤‡äº‹ä»¶æ™ºèƒ½æ‰‹æœºå’Œå¹³æ¿ç”µè„‘ è§¦æ‘¸ä¸æ‰‹åŠ¿å†…å­˜å’Œæ€§èƒ½æ·»åŠ åˆ°é¡µé¢ä¸Š çš„äº‹ä»¶å¤„ç†ç¨‹åºæ•°é‡å°†ç›´æ¥å…³ç³»åˆ°é¡µé¢çš„æ•´ä½“è¿è¡Œæ€§èƒ½ å‡½æ•°å¯¹è±¡å ç”¨å†…å­˜ æŒ‡å®šäº‹ä»¶å¤„ç†ç¨‹åºå¯¼è‡´çš„ DOM è®¿é—® äº‹ä»¶å§”æ‰˜åˆ©ç”¨äº‹ä»¶å†’æ³¡ï¼ŒåªæŒ‡å®šä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åº ç§»é™¤äº‹ä»¶å¤„ç†ç¨‹åºå°†äº‹ä»¶å¤„ç†ç¨‹åºæŒ‡å®šç»™å…ƒç´ æ—¶ï¼Œè¿è¡Œä¸­çš„æµè§ˆå™¨ä»£ç ä¸æ”¯æŒé¡µé¢äº¤äº’çš„ JavaScript ä»£ç ä¹‹é—´å°± ä¼šå»ºç«‹ä¸€ä¸ªè¿æ¥ã€‚è¿æ¥è¶Šå¤šï¼Œé¡µé¢æ‰§è¡Œèµ·æ¥å°±è¶Šæ…¢ã€‚ æ¨¡æ‹Ÿäº‹ä»¶js è§¦å‘äº‹ä»¶ DOM ä¸­çš„äº‹ä»¶æ¨¡æ‹Ÿ document.createEvent() UIEvents MouseEvents MutationsEvents HTMLEvents æ¨¡æ‹Ÿé¼ æ ‡ æ¨¡æ‹Ÿé”®ç›˜ æ¨¡æ‹Ÿå…¶ä»– IE ä¸­","categories":[],"tags":[{"name":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","slug":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","permalink":"http://ziiyan.github.io/tags/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}]},{"title":"ç¬¬åç«  DOM & ç¬¬åä¸€ç«  DOM æ‰©å±• & ç¬¬åäºŒç«  DOM2 å’Œ DOM3","slug":"ç¬¬10-12ç« -DOMç›¸å…³","date":"2020-03-03T17:33:09.000Z","updated":"2020-03-15T13:21:59.338Z","comments":true,"path":"2020/03/04/ç¬¬10-12ç« -DOMç›¸å…³/","link":"","permalink":"http://ziiyan.github.io/2020/03/04/%E7%AC%AC10-12%E7%AB%A0-DOM%E7%9B%B8%E5%85%B3/","excerpt":"","text":"ç¬¬åç«  DOM é’ˆå¯¹ HTML å’Œ XML æ–‡æ¡£çš„ä¸€ä¸ª API èŠ‚ç‚¹å±‚æ¬¡ æ–‡æ¡£å…ƒç´ æ˜¯æœ€å¤–å±‚å…ƒç´ ï¼Œæ¯ä¸ªæ–‡æ¡£åªæœ‰ä¸€ä¸ªæ–‡æ¡£å…ƒç´ ï¼ŒHTML ä¸­æ˜¯ html Node ç±»å‹ js æ‰€æœ‰èŠ‚ç‚¹ç±»å‹éƒ½ç»§æ‰¿è‡ª Node ç±»å‹ nodeType å€¼ä¸º node çš„ç±»å‹å¸¸é‡ï¼ˆ12ç§ï¼‰ å…ƒç´ èŠ‚ç‚¹ Node.ELEMENT_NODE(1) æ–‡æœ¬èŠ‚ç‚¹ Node.TEXT_NODE(3) nodeName å’Œ nodeValue å±æ€§ nodeName å…ƒç´ æ ‡ç­¾å nodeValue å…ƒç´ çš„å€¼ èŠ‚ç‚¹å…³ç³» hashChildNodes() ownerDocument æŒ‡å‘æ–‡æ¡£èŠ‚ç‚¹ï¼ˆæœ€å¤–å±‚èŠ‚ç‚¹ï¼‰ æ“ä½œèŠ‚ç‚¹ appendChild(newNode) childNodes åˆ—è¡¨æœ«å°¾æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ å¦‚æœ newNode å·²ç»å­˜åœ¨ DOM æ ‘ä¸­ï¼Œä¼šç§»åŠ¨ä½ç½®ï¼Œè€Œä¸æ˜¯æ–°å»º insertBefore(NewNode, Node) å°† NewNode æ’å…¥åˆ° Node å‰é¢çš„ä½ç½® replaceChild(NewNode, Node) removeChild(Node)ä»¥ä¸Šæ–¹æ³•é€šè¿‡çˆ¶èŠ‚ç‚¹è°ƒç”¨ ä»¥ä¸‹æ–¹æ³•æ‰€æœ‰èŠ‚ç‚¹éƒ½æœ‰ cloneNode(Boolean) true æ·±å¤åˆ¶ï¼Œæ•´ä¸ªå­èŠ‚ç‚¹æ ‘ false æµ…å¤åˆ¶ï¼ŒèŠ‚ç‚¹æœ¬èº« è¿”å›çš„èŠ‚ç‚¹å±äºæ–‡æ¡£ï¼Œä½†æ²¡æœ‰çˆ¶èŠ‚ç‚¹ normalize() å¤„ç†æ–‡æ¡£èŠ‚ç‚¹ Document ç±»å‹æµè§ˆå™¨ä¸­ document å¯¹è±¡æ˜¯ HTMLDocumentï¼ˆç»§æ‰¿è‡ª Document ç±»å‹ï¼‰çš„ä¸€ä¸ªå®ä¾‹ï¼Œæ˜¯ window å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ nodeType = 9 nodeName = â€œ#documentâ€ nodeValue = null parentNode = null ownerDocument = null å­èŠ‚ç‚¹å¯èƒ½æ˜¯ä¸€ä¸ª DocumentType(æœ€å¤šä¸€ä¸ª)ã€Element(æœ€å¤šä¸€ä¸ª)ã€ProcessingInstruction æˆ– Comment æ–‡æ¡£çš„å­èŠ‚ç‚¹ document.documentElement å§‹ç»ˆæŒ‡å‘ HTML é¡µé¢ä¸­çš„ html å…ƒç´  document.body æŒ‡å‘ body å…ƒç´  document.doctype æ–‡æ¡£ä¿¡æ¯æµè§ˆå™¨ä¸“ä¾›å±æ€§ï¼Œå­˜åœ¨ HTTP å¤´éƒ¨ document.title document.URL document.domain document.referrer æŸ¥æ‰¾å…ƒç´  document.getElementById() å¤šä¸ªå…ƒç´ ç›¸åŒ id åˆ™è¿”å›ç¬¬ä¸€ä¸ª document.getElementsByTagName() è¿”å› NodeListï¼ŒHTML æ–‡æ¡£ä¸­è¿”å› HTMLCollection å¯¹è±¡ document.getElementsByName() è¿”å› HTMLCollection å¯¹è±¡ ç‰¹æ®Šé›†åˆ document.anchors document.forms document.images document.links å¸¦ href ç‰¹æ€§çš„ a å…ƒç´  æ–‡æ¡£å†™å…¥ document.write() document.writeln() document.open() æ‰“å¼€ç½‘é¡µè¾“å‡ºæµ document.close() å…³é—­ç½‘é¡µè¾“å‡ºæµ Element ç±»å‹ nodeType = 1 nodeName = å…ƒç´ çš„æ ‡ç­¾å nodeValue = null parentNode å¯èƒ½æ˜¯ Document æˆ– Element å­èŠ‚ç‚¹å¯èƒ½æ˜¯ Elementã€Textã€Commentã€ProcessingInstructionã€CDATASection æˆ– EntityReference nodeName å’Œ tagName å±æ€§éƒ½æ˜¯æ ‡ç­¾å HTML å…ƒç´ HTMLElement ç»§æ‰¿ Element å¹¶æ·»åŠ äº†ä¸€äº›å±æ€§ id title lang dir className æ“ä½œç‰¹æ€§ getAttribute(â€˜classâ€™) setAttribute(â€˜classâ€™, &#39;ft&#39;) removeAttribute(&#39;class&#39;) attributes å±æ€§attributes å±æ€§ä¸­åŒ…å«ä¸€ä¸ª NamedNodeMap å¯¹è±¡ï¼Œå…ƒç´ æ¯ä¸ªç‰¹æ€§éƒ½ç”±ä¸€ä¸ª Attr èŠ‚ç‚¹è¡¨ç¤ºï¼ŒèŠ‚ç‚¹ä¿å­˜åœ¨ NamedNodeMap å¯¹è±¡ä¸­å¯¹è±¡æ–¹æ³• getNamedItem(name) removeNamedItem(name) setNamedItem(node) item(pos) èŠ‚ç‚¹å±æ€§ nodeName nodeValue åˆ›å»ºå…ƒç´  document.createElement(æ ‡ç­¾å)åˆ›å»ºå®Œæˆåéœ€è¦è°ƒç”¨å‰é¢ä»‹ç»çš„æ–¹æ³•å°†å…¶æ·»åŠ åˆ°æ–‡æ¡£æ ‘ä¸­ Text ç±»å‹ï¼ˆå¼€å§‹å’Œç»“æŸæ ‡ç­¾ä¸­çš„æ–‡æœ¬ï¼‰ nodeType = 3 nodeName = #text nodeValue èŠ‚ç‚¹æ‰€åŒ…å«çš„æ–‡æœ¬ parentNode æ˜¯ Element æ²¡æœ‰å­èŠ‚ç‚¹ document.createTextNode() åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹ normalize() ç›¸é‚»çš„æ–‡æœ¬èŠ‚ç‚¹ä¹‹é—´ä¸å­˜åœ¨ç©ºæ ¼ï¼Œå¯ä»¥å°†æ‰€æœ‰ç›¸é‚»çš„æ–‡æœ¬èŠ‚ç‚¹æ‹¼æ¥èµ·æ¥ splitText() åˆ†å‰²æ–‡æœ¬èŠ‚ç‚¹ Comment ç±»å‹ nodeType = 8 nodeName = #comment nodeValue = æ³¨é‡Šçš„å†…å®¹ parentNode å¯èƒ½æ˜¯ Document æˆ– Element æ²¡æœ‰å­èŠ‚ç‚¹ CDATASection ç±»å‹ é’ˆå¯¹ XML æ–‡æ¡£ï¼Œè¡¨ç¤º CDATA åŒºåŸŸ æµè§ˆå™¨ä¼šè§£æä¸º Comment æˆ– Element DocumentType ç±»å‹åŒ…å« doctype æœ‰å…³çš„ä¿¡æ¯ DocumentFragment ç±»å‹Attr ç±»å‹å…ƒç´ çš„ç‰¹æ€§ï¼Œä¸æ˜¯ DOM æ–‡æ¡£æ ‘çš„ä¸€éƒ¨åˆ† DOM æ“ä½œæŠ€æœ¯åŠ¨æ€è„šæœ¬DOM æ“ä½œ script æ ‡ç­¾ åŠ¨æ€æ ·å¼DOM æ“ä½œ link æ ‡ç­¾ å’Œ style æ ‡ç­¾ æ“ä½œè¡¨æ ¼DOM æ“ä½œ table æ ‡ç­¾ ä½¿ç”¨ NodeList NodeList NamedNodeMap HTMLCollectionæ¯å½“æ–‡æ¡£ç»“æ„å‘ç”Ÿå˜åŒ–ï¼Œå®ƒä»¬éƒ½ä¼šæ›´æ–°ï¼Œä¿å­˜æœ€æ–°çš„ä¿¡æ¯ ç†è§£ DOM çš„å…³é”®ï¼Œå°±æ˜¯ç†è§£ DOM å¯¹æ€§èƒ½çš„å½±å“ã€‚DOM æ“ä½œå¾€å¾€æ˜¯ JavaScript ç¨‹åºä¸­å¼€é”€æœ€å¤§çš„ éƒ¨åˆ†ï¼Œè€Œå› è®¿é—® NodeList å¯¼è‡´çš„é—®é¢˜ä¸ºæœ€å¤šã€‚NodeList å¯¹è±¡éƒ½æ˜¯â€œåŠ¨æ€çš„â€ï¼Œè¿™å°±æ„å‘³ç€æ¯æ¬¡è®¿é—® NodeList å¯¹è±¡ï¼Œéƒ½ä¼šè¿è¡Œä¸€æ¬¡æŸ¥è¯¢ã€‚æœ‰é‰´äºæ­¤ï¼Œæœ€å¥½çš„åŠæ³•å°±æ˜¯å°½é‡å‡å°‘ DOM æ“ä½œã€‚ ç¬¬åä¸€ç«  DOM æ‰©å±•é€‰æ‹©ç¬¦ API å‚æ•°ä¸º CSS é€‰æ‹©ç¬¦ querySelector() è¿”å›å…ƒç´  querySelectorAll() è¿”å› NodeList å¿«ç…§ å…ƒç´ éå† childElementCount ä¸åŒ…æ‹¬æ–‡æœ¬èŠ‚ç‚¹å’Œæ³¨é‡Š firstElementChild lastElementChild previousElementSibling nextElementSibling HTML5ä¸ç±»ç›¸å…³çš„æ‰©å…… getElementsByClassName() classList DOMTokenList çš„å®ä¾‹ ç„¦ç‚¹ç®¡ç† activeElement å½“å‰è·å¾—ç„¦ç‚¹çš„å…ƒç´  hasFocus() æ–‡æ¡£æ˜¯å¦è·å¾—ç„¦ç‚¹ï¼ˆç”¨æˆ·æ˜¯å¦æ­£åœ¨ä¸é¡µé¢äº¤äº’ï¼‰ HTMLDocument çš„å˜åŒ– readyState å±æ€§ loading complete compatMode å…¼å®¹æ¨¡å¼ CSS1Compat æ ‡å‡†æ¨¡å¼ BackCompat æ··æ‚æ¨¡å¼ head å¼•ç”¨ head æ ‡ç­¾å…ƒç´  å­—ç¬¦é›†å±æ€§ charset é»˜è®¤ â€UTF-16â€œ defaultCharset æ ¹æ®é»˜è®¤æµè§ˆå™¨åŠæ“ä½œç³»ç»Ÿè®¾ç½® è‡ªå®šä¹‰æ•°æ®å±æ€§ æ·»åŠ å‰ç¼€ data- dataset å±æ€§è®¿é—®è‡ªå®šä¹‰å±æ€§çš„å€¼ å€¼æ˜¯ DOMStringMap çš„ä¸€ä¸ªå®ä¾‹ ä¹Ÿå°±æ˜¯ä¸€ä¸ªåå€¼å¯¹çš„æ˜ å°„ æ’å…¥æ ‡è®° innerHTML å±æ€§ outerHTML å±æ€§ insertAdjacentHTML() æ–¹æ³• params1 æ’å…¥ä½ç½® beforebegin afterbegin beforeend afterend params2 HTML æ–‡æœ¬ å†…å­˜ä¸æ€§èƒ½é—®é¢˜ scrollIntoView() æ–¹æ³•è®©å½“å‰çš„å…ƒç´ æ»šåŠ¨åˆ°æµè§ˆå™¨çª—å£çš„å¯è§†åŒºåŸŸå†… ç¬¬åäºŒç«  DOM2 å’Œ DOM3DOM1 ä¸»è¦å®šä¹‰çš„æ˜¯ HTML å’Œ XML æ–‡æ¡£çš„åº•å±‚ç»“æ„ï¼ŒDOM2 å’Œ DOM3 åˆ†ä¸ºè®¸å¤šæ¨¡å—ï¼Œåˆ†è¡¨æè¿° DOM çš„æŸä¸ªéå¸¸å…·ä½“çš„å­é›†ï¼Œç›®çš„åœ¨äºæ‰©å±• DOM API æ ·å¼å®šä¹‰æ ·å¼ &lt;link/&gt; å¤–éƒ¨æ ·å¼è¡¨ &lt;style/&gt; åµŒå…¥å¼æ ·å¼ style ç‰¹æ€§ é’ˆå¯¹ç‰¹å®šå…ƒç´ çš„æ ·å¼ è®¿é—®å…ƒç´ çš„æ ·å¼ å…ƒç´ çš„ style ç‰¹æ€§æ˜¯ CSSStyleDeclaration çš„å®ä¾‹ CSS å±æ€§çš„çŸ­çº¿è½¬ä¸ºé©¼å³°æ‰èƒ½é€šè¿‡ js è®¿é—® float æ˜¯ä¿ç•™å­—æ‰€ä»¥ è½¬ä¸º cssFloat æ“ä½œæ ·å¼è¡¨CSSStyleSheet ç±»å‹è¡¨ç¤ºçš„æ˜¯æ ·å¼è¡¨ï¼Œç»§æ‰¿è‡ª StyleSheetï¼Œåè€…å¯ä»¥ä½œä¸ºä¸€ä¸ªåŸºç¡€æ¥å£æ¥å®šä¹‰é CSS æ ·å¼è¡¨ å…ƒç´ å¤§å° åç§»é‡ å®¢æˆ·åŒºå¤§å° æ‰€æœ‰åç§»é‡ã€å®¢æˆ·åŒºå¤§å°éƒ½æ˜¯åªè¯»çš„ï¼Œæ¯æ¬¡è®¿é—®è¦é‡æ–°è®¡ç®—ã€‚é¿å…é‡å¤è®¿é—®ï¼Œæœ‰éœ€è¦å¯ä»¥ä¿å­˜ä¸‹æ¥ã€‚ æ»šåŠ¨å¤§å° ç¡®å®šå…ƒç´ å¤§å°getBoundingClientRect() è¿”å› DOMRect å¯¹è±¡ï¼ŒåŒ…å«å››ä¸ªå€¼ éå† NodeIterator TreeWalker èŒƒå›´ èŒƒå›´æ˜¯é€‰æ‹© DOM ç»“æ„ä¸­ç‰¹å®šéƒ¨åˆ†ï¼Œç„¶åå†æ‰§è¡Œç›¸åº”æ“ä½œçš„ä¸€ç§æ‰‹æ®µã€‚ ä½¿ç”¨èŒƒå›´é€‰åŒºå¯ä»¥åœ¨åˆ é™¤æ–‡æ¡£ä¸­æŸäº›éƒ¨åˆ†çš„åŒæ—¶ï¼Œä¿æŒæ–‡æ¡£ç»“æ„çš„æ ¼å¼è‰¯å¥½ï¼Œæˆ–è€…å¤åˆ¶æ–‡æ¡£ä¸­çš„ç›¸åº”éƒ¨åˆ†ã€‚","categories":[],"tags":[{"name":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","slug":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","permalink":"http://ziiyan.github.io/tags/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}]},{"title":"ç¬¬å…«ç«  BOM","slug":"ç¬¬8ç« -BOM","date":"2020-03-02T15:41:03.000Z","updated":"2020-03-15T13:20:54.606Z","comments":true,"path":"2020/03/02/ç¬¬8ç« -BOM/","link":"","permalink":"http://ziiyan.github.io/2020/03/02/%E7%AC%AC8%E7%AB%A0-BOM/","excerpt":"","text":"ç¬¬å…«ç«  BOMwindow å¯¹è±¡ BOM çš„æ ¸å¿ƒå¯¹è±¡æ˜¯ windowï¼Œè¡¨ç¤ºæµè§ˆå™¨çš„ä¸€ä¸ªå®ä¾‹å…¨å±€ä½œç”¨åŸŸ Window ä½œä¸º Global å¯¹è±¡ï¼Œæ‰€æœ‰åœ¨å…¨å±€ä½œç”¨åŸŸä¸­å£°æ˜çš„å˜é‡ã€å‡½æ•°éƒ½ä¼šå˜æˆ window å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³• å…¨å±€å˜é‡ä¸èƒ½é€šè¿‡ delete åˆ é™¤ï¼Œç›´æ¥åœ¨ window å¯¹ä¸Šå®šä¹‰çš„å±æ€§å¯ä»¥ çª—å£ä½ç½® window.screenLeft window.screenTop window.screenX window.screenY window.moveTo(x, y) window.moveBy(a, b) çª—å£å¤§å° window.innerWidth window.innerHeight window.outerWidth window.outerHeight window.resizeTo(w, h) window.resizeBy(w, h) å¯¼èˆªå’Œæ‰“å¼€çª—å£ window.open(URL, target, String, Boolean) é—´æ­‡è°ƒç”¨å’Œè¶…æ—¶è°ƒç”¨ setTimeout(function, ms) ms åæŠŠå½“å‰ä»»åŠ¡æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¦‚æœæ­¤æ—¶ä»»åŠ¡é˜Ÿåˆ—æ˜¯ç©ºçš„æ‰ä¼šç«‹å³æ‰§è¡Œ æ‰€ä»¥ä¸ä¸€å®š ms åå°±ä¼šæ‰§è¡Œ function è¿”å›ä¸€ä¸ªæ•°å€¼ ID clearTimeout(timeoutID) setInterVal(function, ms) clearInterval(timeoutID) ç³»ç»Ÿå¯¹è¯æ¡†æ ·å¼ç”±æ“ä½œç³»ç»Ÿæˆ–æµè§ˆå™¨å†³å®šæ˜¾ç¤ºè¿™äº›å¯¹è¯æ¡†çš„æ—¶å€™ä»£ç ä¼šåœæ­¢æ‰§è¡Œ alert() confirm() prompt() find() print() location å¯¹è±¡ æ—¢æ˜¯ window å¯¹è±¡çš„å±æ€§ï¼Œä¹Ÿæ˜¯ document å¯¹è±¡çš„å±æ€§ window.LOcation å’Œ document.location å¼•ç”¨çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ ä½ç½®æ“ä½œ location.assign(url) window.location = &quot;url&quot; location.href = &quot;url&quot;ä¿®æ”¹ location å…¶å®ƒå±æ€§é¡µé¢éƒ½ä¼šé‡æ–°åŠ è½½ï¼Œæµè§ˆå™¨çš„å†å²è®°å½•ä¼šç”Ÿäº§ä¸€æ¡æ–°è®°å½• replace(url) ä¸ä¼šäº§ç”Ÿæ–°è®°å½• reload() æ— å‚æ•°ï¼Œå¯èƒ½æ˜¯ç”¨ç¼“å­˜ å‚æ•° trueï¼Œå¼ºåˆ¶ä»æœåŠ¡å™¨é‡æ–°åŠ è½½ è°ƒç”¨ä¹‹åçš„ä»£ç å¯èƒ½ä¼šä¹Ÿå¯èƒ½ä¸ä¼šæ‰§è¡Œï¼Œè¿™è¦å–å†³äºç½‘ç»œå»¶è¿Ÿæˆ–ç³»ç»Ÿèµ„æºç­‰å› ç´ ã€‚æœ€å¥½å°† reload()æ”¾åœ¨ä»£ç çš„æœ€åä¸€è¡Œ screen å¯¹è±¡history å¯¹è±¡ history.go() number å‰è¿›æˆ–åé€€é¡µé¢ string è·³è½¬åˆ°å†å²è®°å½•ä¸­åŒ…å«stringæœ€è¿‘çš„ä½ç½® history.back() åé€€ history.forward() å‰è¿› history.length å†å²è®°å½•æ•°é‡","categories":[],"tags":[{"name":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","slug":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","permalink":"http://ziiyan.github.io/tags/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}]},{"title":"ç¬¬åäº”ç«  ä½¿ç”¨ Canvas ç»˜å›¾","slug":"ç¬¬15ç« -ä½¿ç”¨Canvasç»˜å›¾","date":"2020-03-02T15:05:31.000Z","updated":"2020-03-09T17:06:45.017Z","comments":true,"path":"2020/03/02/ç¬¬15ç« -ä½¿ç”¨Canvasç»˜å›¾/","link":"","permalink":"http://ziiyan.github.io/2020/03/02/%E7%AC%AC15%E7%AB%A0-%E4%BD%BF%E7%94%A8Canvas%E7%BB%98%E5%9B%BE/","excerpt":"","text":"åŸºæœ¬ç”¨æ³• è®¾ç½® width å’Œ height å±æ€§ï¼Œåˆ¶å®šç»˜å›¾åŒºåŸŸ1&lt;canvas id=\"drawing\" width=\"200\" height=\"200\"&gt;A drawing of something.&lt;/canvas&gt; å–å¾—ç»˜å›¾ä¸Šä¸‹æ–‡1234567var drawing = document.getElementById(\"drawing\");//ç¡®å®šæµè§ˆå™¨æ”¯æŒ &lt;canvas&gt; å…ƒç´ if (drawing.getContext) &#123; var context = drawing.getContext(\"2d\"); â€¦â€¦&#125; å¯¼å‡ºç»˜åˆ¶çš„å›¾åƒ1234567891011var drawing = document.getElementById(\"drawing\");if (drawing.getContext) &#123; //å–å¾—å›¾åƒçš„æ•°æ® URI var imgURI = drawing.toDataURL(\"imge/png\"); //æ˜¾ç¤ºå›¾åƒ var image = document.createElement(\"img\"); image.src = imgURI; document.body.appendChild(image);&#125; 2Dä¸Šä¸‹æ–‡ åæ ‡å¼€å§‹äºå·¦ä¸Šè§’ï¼ŒåŸç‚¹åæ ‡ (0, 0) x è¶Šå¤§é å³ï¼Œy è¶Šå¤§é ä¸‹ width å’Œ height è¡¨ç¤ºæ°´å¹³å’Œå‚ç›´ä¸¤ä¸ªæ–¹å‘ä¸Šå¯ç”¨çš„åƒç´ æ•° å¡«å……å’Œæè¾¹ fillStyle å¡«å……ï¼ˆå­—ç¬¦ä¸²ã€æ¸å˜å¯¹è±¡æˆ–æ¨¡å¼å¯¹è±¡ï¼‰ strokeStyle æè¾¹ï¼ˆå­—ç¬¦ä¸²ã€æ¸å˜å¯¹è±¡æˆ–æ¨¡å¼å¯¹è±¡ï¼‰ lineWidth çº¿æ¡å®½åº¦ï¼ˆæ•´æ•°ï¼‰ lineCap çº¿æ¡æœ«ç«¯å½¢çŠ¶ï¼ˆâ€œbuttâ€ã€â€œroundâ€ã€â€œsquareâ€ï¼‰ lineJoin çº¿æ¡ç›¸äº¤å½¢çŠ¶ï¼ˆâ€œroundâ€ã€â€œbevelâ€ã€â€œmiterâ€ï¼‰ ç»˜åˆ¶çŸ©å½¢ fillRect(x, y, w, h) strokeRect(x, y, w, h) clearRect(x, y, w, h) x: x åæ ‡ y: y åæ ‡ w: çŸ©å½¢å®½åº¦ h: çŸ©å½¢é«˜åº¦ ç»˜åˆ¶è·¯å¾„ è°ƒç”¨beginPath()è¡¨ç¤ºå¼€å§‹ç»˜åˆ¶æ–°è·¯å¾„ ç»˜åˆ¶è·¯å¾„ arc(x, y, radius, startAngle, endAngle, counterclockwise) arcTo(x1, y1, x2, y2, radius) bezierCurveTo(c1x, c1y, c2x, c2y, x, y) lineTo(x, y) moveTo(x, y) quadraticCurveTo(cx, cy, x, y) rect(x, y, width, height) ç»˜åˆ¶åˆ°ç”»å¸ƒ closePath() fill() stroke() clip() isPointInpath(x, y) ç‚¹(x, y)æ˜¯å¦åœ¨è·¯å¾„ä¸Š ç»˜åˆ¶æ–‡æœ¬ fillText(string, x, y, (å¯é€‰)font-size) strokeText(string, x, y, (å¯é€‰)font-size) font æ–‡æœ¬æ ·å¼ã€å¤§å°ã€å­—ä½“ textAlign æ–‡æœ¬å¯¹é½æ–¹å¼ textBaseline æ–‡æœ¬åŸºçº¿ measureText() ç¡®å®šæ–‡æœ¬å¤§å° å˜æ¢ rotate(angle) ç»•åŸç‚¹æ—‹è½¬å›¾åƒ scale(scaleX, scaleY) ç¼©æ”¾å›¾åƒ translate(x, y) å°†åæ ‡åŸç‚¹ç§»åŠ¨åˆ° (x, y) transform(m1_1, m1_2, m2_1, m2_2, dx, dy) ä¿®æ”¹å˜æ¢çŸ©é˜µ setTransform(m1_1, m1_2, m2_1, m2_2, dx, dy) å°†å˜æ¢çŸ©é˜µé‡ç½®ä¸ºé»˜è®¤çŠ¶æ€å†è°ƒç”¨ transform() save() ä¿å­˜ä¸Šä¸‹æ–‡çŠ¶æ€ restore() è¯»å–ä¿å­˜çš„çŠ¶æ€ ç»˜åˆ¶å›¾åƒ drawImage() è¦ç»˜åˆ¶çš„å›¾åƒ æºå›¾åƒçš„ x åæ ‡ æºå›¾åƒçš„ y åæ ‡ æºå›¾åƒçš„å®½åº¦ æºå›¾åƒçš„é«˜åº¦ ç›®æ ‡å›¾åƒçš„ x åæ ‡ ç›®æ ‡å›¾åƒçš„ y åæ ‡ ç›®æ ‡å›¾åƒçš„å®½åº¦ ç›®æ ‡å›¾åƒçš„é«˜åº¦ é˜´å½± shadowColor shadowOffsetXr shadowOffsetY shadowBlur æ¸å˜ cg = createLinearGradient() åˆ›å»ºæ–°çš„æ¸å˜ï¼Œè¿”å› CanvasGradient å¯¹è±¡ cg.addColorStop() åˆ¶å®šè‰²æ ‡ fillStyle = cg/strokeStyle = cg ç»˜åˆ¶ æ¨¡å¼ é‡å¤çš„å›¾åƒ createPattern() ä½¿ç”¨å›¾åƒæ•°æ® getImageData() åˆæˆ globalAlpha é€æ˜åº¦ globalCompositionOperation source-over(é»˜è®¤å€¼):åç»˜åˆ¶çš„å›¾å½¢ä½äºå…ˆç»˜åˆ¶çš„å›¾å½¢ä¸Šæ–¹ â€¦â€¦","categories":[],"tags":[{"name":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","slug":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","permalink":"http://ziiyan.github.io/tags/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}]},{"title":"ç¬¬ä¸ƒç«  å‡½æ•°è¡¨è¾¾å¼","slug":"ç¬¬7ç« -å‡½æ•°è¡¨è¾¾å¼","date":"2020-02-29T16:51:34.000Z","updated":"2020-03-03T17:41:19.385Z","comments":true,"path":"2020/03/01/ç¬¬7ç« -å‡½æ•°è¡¨è¾¾å¼/","link":"","permalink":"http://ziiyan.github.io/2020/03/01/%E7%AC%AC7%E7%AB%A0-%E5%87%BD%E6%95%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F/","excerpt":"","text":"å®šä¹‰å‡½æ•°çš„æ–¹å¼ å‡½æ•°å£°æ˜123456functionName(); // æ­£ç¡®function functionName() &#123; â€¦â€¦&#125;// å‡½æ•°å£°æ˜æå‡// æ‰§è¡Œä»£ç å‰ä¼šè¯»å–å‡½æ•°å£°æ˜ï¼Œæ„å‘³ç€å¯ä»¥æŠŠå‡½æ•°å£°æ˜æ”¾åœ¨è°ƒç”¨åé¢ å‡½æ•°è¡¨è¾¾å¼123456functionName(); // æŠ¥é”™var functionName = function() &#123; â€¦â€¦&#125;// æ²¡æœ‰å‡½æ•°å£°æ˜æå‡// ä½¿ç”¨å‰å¿…é¡»å…ˆèµ‹å€¼ function å…³é”®å­—åé¢æ²¡æœ‰æ ‡è¯†ç¬¦ï¼Œæ‰€ä»¥å«åŒ¿åå‡½æ•°ï¼Œä¹Ÿå«æ‹‰å§†è¾¾å‡½æ•°ã€‚ é€’å½’12345678910111213141516171819202122function factorial(num) &#123; if (num &lt;= 1) &#123; reutrn 1; &#125; else &#123; return num * factorial(num-1); &#125;&#125;var anotherFactorial = factorial;factorial = null;alert(anotherFactorial(4)); // æŠ¥é”™// å› ä¸ºè°ƒç”¨ anotherFactorial(num) æ—¶ï¼Œå‡½æ•°å†…éƒ¨ä¼šæ‰§è¡Œ factorial(num-1)ï¼Œè€Œæ­¤æ—¶ factorial å·²ç»è¢«ç½®ä¸º null// æ”¹ä¸º arguments.callee å³å¯ï¼Œå¦‚ä¸‹function factorial(num) &#123; if (num &lt;= 1) &#123; return 1; &#125; else &#123; return num * arguments.callee(num-1); &#125;&#125; é—­åŒ…é—­åŒ…æ˜¯æŒ‡(æœ‰æƒè®¿é—®[å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡]çš„)å‡½æ•°ã€‚åˆ›å»ºé—­åŒ…çš„å¸¸è§æ–¹å¼ï¼Œå°±æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨åˆ›å»ºå¦ä¸€ä¸ªå‡½æ•°ã€‚ 123456789101112131415function createComparisonFunction(propertyName) &#123; return function(object1, object2) &#123; var value1 = object1[propertyName]; var value2 = object2[propertyName]; // è¿™ä¸ªåŒ¿åå‡½æ•°çš„ä½œç”¨åŸŸé“¾ä¸­åŒ…å« createComparisonFunction() çš„ä½œç”¨åŸŸï¼Œæ‰€ä»¥è¿™ä¸¤è¡Œä»£ç å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°ä¸­çš„å˜é‡ propertyName if (value1 &lt; value2) &#123; return -1; &#125; else if (value1 &gt; value2) &#123; return 1; &#125; else &#123; return 0; &#125; &#125;&#125; å½“å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œå±€éƒ¨æ´»åŠ¨å¯¹è±¡ä¼šè¢«é”€æ¯ï¼Œå†…å­˜ä»…ä¿ç•™å…¨å±€ä½œç”¨åŸŸã€‚ä½†æ˜¯é—­åŒ…æœ‰æ‰€ä¸åŒã€‚åœ¨å¦ä¸€ä¸ªå‡½æ•°å†…éƒ¨å®šä¹‰çš„å‡½æ•°ä¼šå°†åŒ…å«å®ƒçš„å‡½æ•°ï¼ˆå³å¤–éƒ¨å‡½æ•°ï¼‰çš„æ´»åŠ¨å¯¹è±¡æ·»åŠ åˆ°å®ƒçš„ä½œç”¨åŸŸé“¾ä¸­ã€‚å› æ­¤ï¼ŒcreateComparisonFunction() å‡½æ•°å†…éƒ¨å®šä¹‰çš„åŒ¿åå‡½æ•°çš„ä½œç”¨åŸŸé“¾ä¸­ï¼Œå®é™…ä¸Šä¼šåŒ…å«å¤–éƒ¨å‡½æ•° createComparisonFunction() çš„æ´»åŠ¨å¯¹è±¡ã€‚åœ¨åŒ¿åå‡½æ•°ä» createComparisonFunction() ä¸­è¢«è¿”å›åï¼Œå®ƒçš„ä½œç”¨åŸŸé“¾è¢«åˆå§‹åŒ–ä¸º åŒ…å« createComparisonFunction() å‡½æ•°çš„æ´»åŠ¨å¯¹è±¡å’Œå…¨å±€å˜é‡å¯¹è±¡ã€‚è¿™æ ·ï¼ŒåŒ¿åå‡½æ•°å°±å¯ä»¥è®¿é—®åœ¨ createComparisonFunction() ä¸­å®šä¹‰çš„æ‰€æœ‰å˜é‡ã€‚åŒæ—¶ï¼ŒcreateComparisonFunction() çš„æ´»åŠ¨å¯¹è±¡ç”±äºè¢«åŒ¿åå‡½æ•°çš„ä½œç”¨åŸŸé“¾å¼•ç”¨ï¼Œåœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åä¸ä¼šè¢«é”€æ¯ã€‚ ç”±äºé—­åŒ…ä¼šæºå¸¦å¤–éƒ¨å‡½æ•°çš„ä½œç”¨åŸŸï¼Œå› æ­¤ä¼šæ¯”å…¶ä»–å‡½æ•°å æ›´å¤šçš„å†…å­˜ã€‚æ‰€ä»¥è¦æ…é‡ä½¿ç”¨é—­åŒ…ã€‚ é—­åŒ…ä¸å˜é‡ é—­åŒ…åªèƒ½å–å¾—åŒ…å«å‡½æ•°ä¸­æ¯ä¸ªå˜é‡çš„æœ€æ–°å€¼ å› ä¸ºæ¯ä¸ªå‡½æ•°ä½œç”¨åŸŸé“¾ä¸­éƒ½ä¿å­˜ç€å¤–éƒ¨å‡½æ•°çš„æ´»åŠ¨å¯¹è±¡ï¼Œæ˜¯å…±äº«çš„ï¼Œæœ€åæ›´æ–°çš„å†…å®¹ä¼šè¢«å¼•ç”¨ã€‚ å…³äº this å¯¹è±¡ åŒ¿åå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒå…·æœ‰å…¨å±€æ€§ï¼Œthis é€šå¸¸æŒ‡å‘ windowã€‚ç”¨ call æˆ– apply æ”¹å˜åˆ¶å®šç¯å¢ƒæ—¶ä¼šæŒ‡å‘å…¶ä»–å¯¹è±¡ã€‚12345678910111213141516171819var name = \"The Window\";var object = &#123; name: \"My Object\", var that = this getNameFunc: function() &#123; return function() &#123; return this.name + \" \" that.name; &#125;; &#125; getName: function() &#123; return this.name &#125;&#125;;alert(object.getNameFunc()()); // \"The Window My Object\"alert(object.getName()); // \"My Object\" å†…å­˜æ³„æ¼ é—­åŒ…ä¼šå¼•ç”¨åŒ…å«å‡½æ•°çš„æ•´ä¸ªæ´»åŠ¨å¯¹è±¡ï¼Œå¯ä»¥æ´»åŠ¨å¯¹è±¡ä¸­çš„å˜é‡èµ‹å€¼ null è§£é™¤å¼•ç”¨ï¼Œä¿è¯å†…å­˜æ­£å¸¸å›æ”¶ã€‚ æ¨¡ä»¿å—çº§ä½œç”¨åŸŸï¼ˆï¼‰ç§æœ‰ä½œç”¨åŸŸ1234(function() &#123; // è¿™é‡Œæ˜¯å—çº§ä½œç”¨åŸŸ&#125;)();// å®šä¹‰å¹¶ç«‹å³è°ƒç”¨äº†ä¸€ä¸ªåŒ¿åå‡½æ•° 1234567891011121314// ç†è§£è¿‡ç¨‹// å®šä¹‰ä¸€ä¸ªå‡½æ•°å¹¶ç«‹å³è°ƒç”¨var someFunction = function() &#123; // è¿™é‡Œæ˜¯å—çº§ä½œç”¨åŸŸ&#125;;someFunction();// ç”¨å‡½æ•°çš„å€¼ç›´æ¥å–ä»£å‡½æ•°åfunction() &#123; // è¿™é‡Œæ˜¯å—çº§ä½œç”¨åŸŸ&#125;(); // æŠ¥é”™ï¼Œå‡½æ•°å£°æ˜åä¸èƒ½è·Ÿåœ†æ‹¬å·(function() &#123; // è¿™é‡Œæ˜¯å—çº§ä½œç”¨åŸŸ&#125;)(); // æ­£ç¡®ï¼Œå‡½æ•°è¡¨è¾¾å¼å¯ä»¥è·Ÿåœ†æ‹¬å· ç§æœ‰å˜é‡ ä¸¥æ ¼æ¥è¯´ï¼Œjs ä¸­æ²¡æœ‰ç§æœ‰æˆå‘˜çš„æ¦‚å¿µï¼Œæ‰€æœ‰çš„å¯¹è±¡å±æ€§éƒ½æ˜¯å…¬æœ‰çš„ ä¸ªäººç†è§£ï¼šoop è¯­è¨€ä¸­ç§æœ‰æˆå‘˜ä¸èƒ½è¢«å­ç±»ç»§æ‰¿ï¼Œè€Œ js ä¸­æ‰€æœ‰å¯¹è±¡å±æ€§éƒ½èƒ½è¢«ç»§æ‰¿ï¼Œå› æ­¤éƒ½æ˜¯å…¬æœ‰çš„ ä½†æœ‰ç§æœ‰å˜é‡çš„æ¦‚å¿µï¼Œä»»ä½•åœ¨å‡½æ•°ä¸­å®šä¹‰çš„å˜é‡éƒ½å¯ä»¥è®¤ä¸ºæ˜¯ç§æœ‰å˜é‡ï¼Œå› ä¸ºä¸èƒ½åœ¨å‡½æ•°çš„å¤–éƒ¨è®¿é—®è¿™äº›å˜é‡ ç§æœ‰å˜é‡åŒ…æ‹¬ å‡½æ•°çš„å‚æ•° å±€éƒ¨å˜é‡ åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å…¶ä»–å‡½æ•° ç‰¹æƒæ–¹æ³•ï¼šæœ‰æƒè®¿é—®ç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•°çš„å…¬æœ‰æ–¹æ³•12345678910111213141516// åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰ç‰¹æƒæ–¹æ³•function MyObject() &#123; // ç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•° var privateVariable = 10; function privateFunction() &#123; return false; &#125; // ç‰¹æƒæ–¹æ³• this.publicMethod = function() &#123; privateVariable++; return privateFunction(); &#125;&#125; é™æ€ç§æœ‰å˜é‡1234567891011121314151617(function() &#123; // ç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•° var privateVariable = 10; function privateFunction() &#123; return fasle; &#125; // æ„é€ å‡½æ•°ï¼ˆæ²¡æœ‰varï¼Œå…¨å±€å˜é‡ï¼‰ MyObject = function() &#123; &#125;; // å…¬æœ‰/ç‰¹æƒæ–¹æ³• MyObject.prototype.publicMethod = function() &#123; privateVariable++; return privateFunction(); &#125;;&#125;)(); æ¨¡å—æ¨¡å¼ æ¨¡å—æ¨¡å¼ï¼šä¸ºå•ä¾‹åˆ›å»ºç§æœ‰å˜é‡å’Œç‰¹æƒæ–¹æ³• å•ä¾‹ï¼šåªæœ‰ä¸€ä¸ªå®ä¾‹çš„å¯¹è±¡ 123456var singleton = &#123; name: value, method: function() &#123; â€¦â€¦ &#125;&#125;; 12345678910111213141516var singleton = function() &#123; // ç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•° var privateVariable = 10; function privateFunction() &#123; return false; &#125; // è¿”å›å•ä¾‹çš„å…¬å…±æ¥å£ return &#123; publicProperty: true, publicMethod: function() &#123; privateVariable++; return privateFunction(); &#125; &#125;&#125; å¢å¼ºçš„æ¨¡å—æ¨¡å¼123456789101112131415161718var singleton = function() &#123; //ç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•° var privateVariable = 10; function privateFunction() &#123; return false; &#125; //åˆ›å»ºå¯¹è±¡ var object = new CustomType(); //æ·»åŠ ç‰¹æƒ/å…¬æœ‰å±æ€§å’Œæ–¹æ³• object.publicProperty = true; object.publicMethod = function() &#123; privateVariable++; return privateFunction(); &#125;; //è¿”å›è¿™ä¸ªå¯¹è±¡ return object; &#125;();","categories":[],"tags":[{"name":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","slug":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","permalink":"http://ziiyan.github.io/tags/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}]},{"title":"ç¬¬å…­ç«  é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡","slug":"ç¬¬6ç« -é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡","date":"2020-02-27T17:18:54.000Z","updated":"2020-07-22T11:15:57.218Z","comments":true,"path":"2020/02/28/ç¬¬6ç« -é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡/","link":"","permalink":"http://ziiyan.github.io/2020/02/28/%E7%AC%AC6%E7%AB%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/","excerpt":"","text":"é¢å‘å¯¹è±¡è¯­è¨€çš„æ ‡å¿—æ˜¯éƒ½æœ‰ç±»çš„æ¦‚å¿µï¼Œé€šè¿‡ç±»å¯ä»¥åˆ›å»ºä»»æ„å¤šä¸ªå…·æœ‰ç›¸åŒå±æ€§å’Œæ–¹æ³•çš„å¯¹è±¡ã€‚ è€Œ ECMAScript ä¸­æ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œå› æ­¤å®ƒçš„å¯¹è±¡å’ŒåŸºäºç±»çš„è¯­è¨€ä¸­çš„å¯¹è±¡æœ‰æ‰€ä¸åŒã€‚ ECMAscript å¯¹è±¡å®šä¹‰ï¼šæ— åºå±æ€§çš„é›†åˆï¼Œå…¶å±æ€§å¯ä»¥åŒ…å«åŸºæœ¬å€¼ã€å¯¹è±¡æˆ–å‡½æ•°ã€‚ æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯åŸºäºä¸€ä¸ªå¼•ç”¨ç±»å‹åˆ›å»ºçš„ã€‚å¯ä»¥æ˜¯åŸç”Ÿç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å¼€å‘äººå‘˜å®šä¹‰çš„ç±»å‹ã€‚ ç†è§£å¯¹è±¡å±æ€§ç±»å‹å±æ€§æ•°æ® [[Configurable]]:è¡¨ç¤ºèƒ½å¦é€šè¿‡ delete åˆ é™¤å±æ€§ä»è€Œå®šä¹‰å±æ€§ï¼Œèƒ½å¦ä¿®æ”¹å±æ€§çš„ç‰¹æ€§ï¼Œæˆ–è€…èƒ½å¦æŠŠå±æ€§ä¿®æ”¹ä¸ºè®¿é—®å™¨å±æ€§ã€‚ [[Enumerable]]:è¡¨ç¤ºèƒ½å¦é€šè¿‡ for-in å¾ªç¯è¿”å›å±æ€§ã€‚ [[Writable]]:è¡¨ç¤ºèƒ½å¦ä¿®æ”¹å±æ€§çš„å€¼ã€‚ [[Value]]:åŒ…å«è®¾ä¸ªå±æ€§çš„æ•°æ®å€¼ã€‚ Object.defineProperty(å±æ€§æ‰€åœ¨å¯¹è±¡ï¼Œå±æ€§çš„åå­—ï¼Œæè¿°ç¬¦å¯¹è±¡)ï¼šä¿®æ”¹å±æ€§é»˜è®¤çš„ç‰¹æ€§ è®¿é—®å™¨å±æ€§ [[Configurable]]:è¡¨ç¤ºèƒ½å¦é€šè¿‡ delete åˆ é™¤å±æ€§ä»è€Œå®šä¹‰å±æ€§ï¼Œèƒ½å¦ä¿®æ”¹å±æ€§çš„ç‰¹æ€§ï¼Œæˆ–è€…èƒ½å¦æŠŠå±æ€§ä¿®æ”¹ä¸ºè®¿é—®å™¨å±æ€§ã€‚ [[Enumerable]]:è¡¨ç¤ºèƒ½å¦é€šè¿‡ for-in å¾ªç¯è¿”å›å±æ€§ã€‚ [[Get]]:åœ¨è¯»å–å±æ€§æ—¶è°ƒç”¨çš„å‡½æ•°ï¼Œé»˜è®¤å€¼ undefinedã€‚ [[Set]]:åœ¨å†™å…¥å±æ€§æ—¶è°ƒç”¨çš„å‡½æ•°ï¼Œé»˜è®¤å€¼ undefinedã€‚ è®¿é—®å™¨å±æ€§ä¸èƒ½ç›´æ¥å®šä¹‰ï¼Œå¿…é¡»ä½¿ç”¨Object.defineProperty()æ¥å®šä¹‰ã€‚ 1234567891011121314151617var book = &#123; _year: 2004, edition: 1&#125;;Object.defineProperty(book, \"year\", &#123; get: function() &#123; return this._year; &#125;, set: function(newValue) &#123; if (newValue &gt; 2004) &#123; this._year = newValue; this.edition += newValue - 2004; &#125; &#125; &#125;);book.year = 2005; alert(book.edition); // 2 å®šä¹‰å¤šä¸ªå±æ€§ Object.defineProperties(å¯¹è±¡ï¼Œè¦æ·»åŠ å’Œä¿®æ”¹å±æ€§) é€šè¿‡æè¿°èµ‹ä¸€æ¬¡å®šä¹‰å¤šä¸ªå±æ€§è¯»å–å±æ€§çš„ç‰¹æ€§ Object.getOwnPropertyDescriptor(å±æ€§æ‰€åœ¨çš„å¯¹è±¡ï¼Œè¦è¯»å–å…¶æè¿°ç¬¦çš„å±æ€§åç§°)è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœæ˜¯è®¿é—®å™¨å±æ€§ï¼Œè¿™ä¸ªå¯¹è±¡çš„å±æ€§æœ‰ configurableã€enumerableã€get å’Œ setï¼›å¦‚æœæ˜¯æ•°æ®å±æ€§ï¼Œè¿™ä¸ªå¯¹è±¡çš„å±æ€§æœ‰ configurableã€enumerableã€writable å’Œ valueã€‚ åˆ›å»ºå¯¹è±¡å·¥å‚æ¨¡å¼ æŠ½è±¡äº†åˆ›å»ºå…·ä½“å¯¹è±¡çš„è¿‡ç¨‹ 12345678910function createPerson (name, age, job) &#123; var o = new Object(); o.name = name; o.age = age; o.job = job; o.sayName = function() &#123; alert(this.name); &#125;; return o;&#125; æ„é€ å‡½æ•°æ¨¡å¼ å®šä¹‰åœ¨ Global å¯¹è±¡ï¼ˆæµè§ˆå™¨å³ window å¯¹è±¡ï¼‰ä¸­ 12345678function Person(name, age, job) &#123; this.name = name; this.age = age; this.job = job; this.sayName = function() &#123; alert(this.name); &#125;;&#125; new æ“ä½œç¬¦è°ƒç”¨æ„é€ å‡½æ•°æ—¶ï¼š åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ å°†æ„é€ å‡½æ•°çš„ä½œç”¨åŸŸèµ‹ç»™æ–°å¯¹è±¡ï¼ˆthis å°±æŒ‡å‘äº†è¿™ä¸ªæ–°å¯¹è±¡ï¼‰ æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç ï¼ˆä¸ºè¿™ä¸ªæ–°å¯¹è±¡æ·»åŠ å±æ€§ã€æ–¹æ³•ç­‰ï¼‰ è¿”å›æ–°å¯¹è±¡12var person = new Person(\"Greg\", 27, \"Doctor\");console.log(person.constructor == Person) // true å°†æ„é€ å‡½æ•°å½“ä½œå‡½æ•° æ„é€ å‡½æ•°ä¸å…¶ä»–å‡½æ•°å”¯ä¸€çš„åŒºåˆ«æ˜¯è°ƒç”¨æ–¹å¼ä¸åŒ12345678910// æ„é€ å‡½æ•°var person = new Person(\"Greg\", 27, \"Doctor\");person.sayName();// æ™®é€šå‡½æ•°Person(\"Greg\", 27, \"Doctor\");window.sayName();// åœ¨å¦ä¸€ä¸ªå¯¹è±¡çš„ä½œç”¨åŸŸä¸­è°ƒç”¨var o = new Object();Person.call(o, \"Greg\", 27, \"Doctor\");o.sayName(); æ„é€ å‡½æ•°çš„ç¼ºç‚¹ æ¯ä¸ªæ–¹æ³•éƒ½è¦åœ¨æ¯ä¸ªå®ä¾‹ä¸Šé‡æ–°åˆ›å»ºä¸€é ä¸åŒå®ä¾‹ä¸Šçš„åŒåå‡½æ•°æ˜¯ä¸ç›¸ç­‰çš„ 123456789function Person(name, age, job)&#123; this.name = name; this.age = age; this.job = job; this.sayName = sayName; &#125; function sayName()&#123; alert(this.name); &#125; å¦‚æœéœ€è¦å¾ˆå¤šæ–¹æ³•ï¼Œå°±éœ€è¦å®šä¹‰å¾ˆå¤šå…¨å±€å‡½æ•° åŸå‹æ¨¡å¼ æ¯ä¸ªå‡½æ•°éƒ½æœ‰ prototypeï¼ˆåŸå‹ï¼‰å±æ€§ æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ å¯¹è±¡åŒ…å«æ‰€æœ‰å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³• æ¢å¥è¯è¯´ï¼Œprototype å°±æ˜¯é€šè¿‡è°ƒç”¨æ„é€ å‡½æ•°è€Œåˆ›å»ºçš„å¯¹è±¡å®ä¾‹çš„åŸå‹å¯¹è±¡ å¥½å¤„ è®©æ‰€æœ‰å¯¹è±¡å®ä¾‹å…±äº«å®ƒæ‰€åŒ…å«çš„å±æ€§å’Œæ–¹æ³• ä¸å¿…åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰å¯¹è±¡å®ä¾‹çš„ä¿¡æ¯ï¼Œè€Œä¸”å°†è¿™äº›ä¿¡æ¯ç›´æ¥æ·»åŠ åˆ°åŸå‹å¯¹è±¡ä¸­12345678function Person() &#123;&#125;Person.prototype.name = \"Grey\";Person.prototype.age = 29;Person.prototype.job = \"Doctor\";Person.prototype.sayName = function() &#123; alert(this.name);&#125; ç†è§£åŸå‹å¯¹è±¡ åªè¦åˆ›å»ºäº†ä¸€ä¸ªæ–°å‡½æ•°ï¼Œå°±ä¼šæ ¹æ®ä¸€ç»„ç‰¹å®šçš„è§„åˆ™ä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ª prototype å±æ€§ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘å‡½æ•°çš„åŸå‹å¯¹è±¡ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰åŸå‹å¯¹è±¡ä¼šè‡ªåŠ¨è·å¾—ä¸€ä¸ª constructor(æ„é€ å‡½æ•°) å±æ€§ï¼Œè¿™ä¸ªå±æ€§åŒ…å«ä¸€ä¸ªæŒ‡å‘ prototype å±æ€§æ‰€åœ¨å‡½æ•°ï¼ˆä¹Ÿå°±æ˜¯æ„é€ å‡½æ•°ï¼‰çš„æŒ‡é’ˆ Person.prototype.constructor æŒ‡å‘ Person æ¯ä¸ªå®ä¾‹æœ‰ä¸€ä¸ª[[Prototype]]ï¼ˆ__proto__ï¼‰å±æ€§ï¼ŒæŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ isPrototypeOf()ç¡®å®šåŸå‹å…³ç³» Person.prototype.isPrototypeOf(person) Object.getPrototypeOf() è¿”å›[[Prototype]] çš„æŒ‡é’ˆ Object.getPrototypeOf(person) == Person.prototype åœ¨å®ä¾‹ä¸­ä¿®æ”¹å±æ€§å€¼ï¼Œä¼šå±è”½åŸå‹ä¸­çš„åŒåå±æ€§ delete person.name åˆ é™¤å®ä¾‹ä¸­çš„ name å±æ€§ï¼Œconsole.log(person.name) å°†è¾“å‡ºåŸå‹ä¸­çš„ name å±æ€§ Person.prototype.name hasOwnProperty() æ£€æµ‹ä¸€ä¸ªå±æ€§æ˜¯å¦åœ¨å®ä¾‹ä¸­ï¼Œfalse æ¥è‡ªåŸå‹ åŸå‹ä¸ in æ“ä½œç¬¦ å•ç‹¬ä½¿ç”¨ å±æ€§ in å®ä¾‹ æ— è®ºå±æ€§åœ¨å®ä¾‹è¿˜æ˜¯åœ¨åŸå‹ï¼Œéƒ½è¿”å› true for-in è¿”å›å¯æšä¸¾çš„ï¼ˆenumeratedï¼‰å±æ€§ æ— è®ºå±æ€§åœ¨å®ä¾‹è¿˜æ˜¯åœ¨åŸå‹ Object.keys(å¯¹è±¡) è¿”å›æ‰€æœ‰å¯æšä¸¾å±æ€§åObject.getOwnPropertyNames(å¯¹è±¡) è¿”å›æ‰€æœ‰å±æ€§å æ›´ç®€å•çš„åŸå‹è¯­æ³•1234567891011function Person() &#123;&#125;Person.prototype = &#123; name: \"Grey\", age: 29, job: \"Doctor\", sayName: function() &#123; alert(this.name); &#125;&#125;; å­—é¢é‡å½¢å¼åˆ›å»ºåŸå‹ Person.prototype.constructor ä¸å†æŒ‡å‘ Person ï¼ˆå‰é¢è¯´ï¼‰æ¯åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå°±ä¼šåŒæ—¶åˆ›å»ºå®ƒçš„ prototype å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡è‡ªåŠ¨è·å¾— constructor å±æ€§ è¿™é‡Œå®Œå…¨é‡å†™äº†é»˜è®¤çš„ prototype å¯¹è±¡ï¼Œconstructor å±æ€§æŒ‡å‘ Object æ„é€ å‡½æ•°åŸå‹çš„åŠ¨æ€æ€§ å®ä¾‹ä¸­çš„æŒ‡é’ˆä»…æŒ‡å‘åŸå‹ï¼Œè€Œä¸æŒ‡å‘æ„é€ å‡½æ•° é‡å†™åŸå‹å¯¹è±¡åˆ‡æ–­äº†ç°æœ‰åŸå‹ä¸ä¹‹å‰ä»»ä½•ä¸€ä»¶å­˜åœ¨çš„å¯¹è±¡å®ä¾‹ç›´æ¥çš„è”ç³»ï¼›å¯¹è±¡å®ä¾‹å¼•ç”¨çš„åŸå‹æ˜¯é‡å†™ä¹‹å‰çš„ åŸå‹æ¨¡å¼çš„ç¼ºç‚¹å¦‚æœåŸå‹åŒ…å«å¼•ç”¨ç±»å‹å€¼çš„å±æ€§ï¼Œç”±äºåŸå‹ä¸­çš„å€¼æ˜¯æ‰€æœ‰å®ä¾‹å¯¹è±¡å…±äº«çš„ï¼Œåœ¨ä¸€ä¸ªå®ä¾‹å¯¹è±¡ä¸­ä¿®æ”¹å¼•ç”¨ç±»å‹ï¼Œä¼šä½“ç°åœ¨åˆ«çš„å®ä¾‹å¯¹è±¡ä¸­ ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å‹å’ŒåŸå‹æ¨¡å¼ æ„é€ å‡½æ•°æ¨¡å‹ç”¨äºå®šä¹‰å®ä¾‹å±æ€§ åŸå‹æ¨¡å¼ç”¨äºå®šä¹‰æ–¹æ³•å’Œå…±äº«å±æ€§ åŠ¨æ€åŸå‹æ¨¡å¼ åœ¨æ„é€ å‡½æ•°ä¸­æ£€æŸ¥æ˜¯å¦å­˜åœ¨æŸä¸ªæ–¹æ³•ï¼Œå†å†³å®šæ˜¯å¦éœ€è¦åˆå§‹åŒ–åŸå‹ 12345678910function Person (name, age, job) &#123; this.name = name; this.age = age; this.job = job; if (typeof this.sayName != \"function\") &#123; Person.prototype.sayName = function () &#123; alert(this.name); &#125; &#125;&#125; å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼ ä¸èƒ½ç”¨ instanceof ä¸æ¨è 1234567891011121314151617181920// å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼function Person(name, age, job) &#123; var o = new Object(); o.name = name; o.age = age; o.job = job; o.sayName = function() &#123; alert(this.name); &#125;; return o;&#125;// æ„é€ å‡½æ•°æ¨¡å¼function Person(name, age, job) &#123; this.name = name; this.age = age; this.job = job; this.sayName = function() &#123; alert(this.name); &#125;;&#125; ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼ ç¨³å¦¥å¯¹è±¡ æ²¡æœ‰å…¬å…±å±æ€§ï¼Œæ–¹æ³•ä¹Ÿä¸å¼•ç”¨ this å®‰å…¨çš„ç¯å¢ƒä¸­ç¦æ­¢ä½¿ç”¨ this å’Œ new 1234567function Person(name, age, job) &#123; var o = new Object(); o.sayName = function() &#123; alert(name); &#125;; return o;&#125; åªæœ‰ sayName() èƒ½è®¿é—®æ•°æ®æˆå‘˜ ç»§æ‰¿ é¢å‘å¯¹è±¡è¯­è¨€ä¸­ æ¥å£ç»§æ‰¿ åªç»§æ‰¿æ–¹æ³•ç­¾å å®ç°ç»§æ‰¿ ç»§æ‰¿å®é™…çš„æ–¹æ³• ECMAScript ä¸­å‡½æ•°æ²¡æœ‰ç­¾åï¼Œæ— æ³•å®ç°æ¥å£ç»§æ‰¿ï¼Œæ•…åªæ”¯æŒå®ç°ç»§æ‰¿ ä¾é åŸå‹é“¾åŸå‹é“¾ åˆ©ç”¨åŸå‹è®©ä¸€ä¸ªå¼•ç”¨ç±»å‹ç»§æ‰¿å¦ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å±æ€§å’Œæ–¹æ³• æ„é€ å‡½æ•° A å’ŒåŸå‹ A éƒ½æœ‰ä¸€ä¸ªæŒ‡å‘åŸå‹å¯¹è±¡ A çš„æŒ‡é’ˆï¼Œè€ŒåŸå‹å¯¹è±¡ A æœ‰ä¸€ä¸ªæŒ‡å‘æ„é€ å‡½æ•° A çš„æŒ‡é’ˆã€‚è®©åŸå‹å¯¹è±¡ A ç­‰äºå¦ä¸€ä¸ªç±»å‹çš„å®ä¾‹ Bã€‚æ­¤æ—¶åŸå‹å¯¹è±¡ Aï¼ˆä¹Ÿå°±æ˜¯å®ä¾‹ Bï¼‰å°†åŒ…å«ä¸€ä¸ªæŒ‡å‘åŸå‹å¯¹è±¡ B çš„æŒ‡é’ˆï¼ŒåŸå‹å¯¹è±¡ B ä¸­åŒ…å«ä¸€ä¸ªæŒ‡å‘æ„é€ å‡½æ•° B çš„æŒ‡é’ˆã€‚å‡å¦‚åŸå‹ B åˆæ˜¯å¦ä¸€ä¸ªç±»å‹çš„å®ä¾‹ Cï¼Œé‚£ä¹ˆä¸Šè¿°å…³ç³»ä¾ç„¶æˆç«‹ï¼Œå¦‚æ­¤å±‚å±‚é€’è¿›ï¼Œå°±æ„æˆäº†å®ä¾‹ä¸åŸå‹çš„é“¾æ¡ã€‚è¿™å°±æ˜¯æ‰€è°“åŸå‹é“¾çš„åŸºæœ¬æ¦‚å¿µã€‚ é»˜è®¤çš„åŸå‹æ‰€æœ‰å¼•ç”¨ç±»å‹é»˜è®¤ç»§æ‰¿ Objectï¼Œåœ¨åŸå‹é“¾æœ€åéƒ½æ˜¯ Object åŸå‹å¯¹è±¡ï¼ŒåŒ…å«ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ Object æ„é€ å‡½æ•°ã€‚ ç¡®å®šåŸå‹å’Œå®ä¾‹çš„å…³ç³» å®ä¾‹ instanceof æ„é€ å‡½æ•° å®ä¾‹çš„åŸå‹é“¾ä¸­å‡ºç°è¿‡æ„é€ å‡½æ•°å°±è¿”å› true åŸå‹å¯¹è±¡.isPrototypeOf(å®ä¾‹) å®ä¾‹çš„åŸå‹é“¾ä¸­å‡ºç°è¿‡åŸå‹å¯¹è±¡å°±è¿”å› true å¯¹è±¡å­—é¢é‡åˆ›å»ºåŸå‹æ–¹æ³•ä¼šé‡å†™åŸå‹é“¾12345678910SubType.prototype = new SuperType();// å¯¼è‡´ä¸Šä¸€è¡Œä»£ç æ— æ•ˆSubType.prototype = &#123; getSubValue: function() &#123; return this.subproperty; &#125;, someOtherMethod: function() &#123; return false; &#125;&#125;; åŸå‹é“¾çš„ç¼ºç‚¹ ä¸èƒ½ç»™è¶…ç±»å‹çš„æ„é€ å‡½æ•°ä¼ é€’å‚æ•°å€Ÿç”¨æ„é€ å‡½æ•°ï¼ˆä¼ªé€ å¯¹è±¡/ç»å…¸ç»§æ‰¿ï¼‰ åœ¨å­ç±»å‹æ„é€ å‡½æ•°çš„å†…éƒ¨è°ƒç”¨è¶…ç±»å‹æ„é€ å‡½æ•°ï¼ˆåˆ©ç”¨ call æˆ– applyï¼‰1234567function SuperType(name) &#123; â€¦â€¦&#125;function SubType() &#123; // ç»§æ‰¿äº† SuperType SUperType.call(this, name);&#125; å¯ä»¥ç»™è¶…ç±»å‹çš„æ„é€ å‡½æ•°ä¼ é€’å‚æ•°ç»„åˆç»§æ‰¿ï¼ˆä¼ªç»å…¸ç»§æ‰¿ï¼‰ æœ€å¸¸ç”¨ ç»„åˆåŸå‹é“¾å’Œå€Ÿç”¨æ„é€ å‡½æ•° åŸå‹é“¾å®ç°å¯¹åŸå‹å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿ å€Ÿç”¨æ„é€ å‡½æ•°å®ç°å¯¹å®ä¾‹å±æ€§çš„ç»§æ‰¿ ç¼ºç‚¹ è°ƒç”¨ä¸¤æ¬¡è¶…ç±»å‹æ„é€ å‡½æ•° åˆ›å»ºå­ç±»å‹åŸå‹ å­ç±»å‹æ„é€ å‡½æ•°å†…éƒ¨ åŸå‹å¼ç»§æ‰¿ Object.create(ä½œä¸ºæ–°å¯¹è±¡åŸå‹çš„å¯¹è±¡ï¼Œ ä½œä¸ºæ–°å¯¹è±¡å®šä¹‰é¢å¤–å±æ€§çš„å¯¹è±¡) è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡ å¯„ç”Ÿå¼ç»§æ‰¿ åˆ›å»ºä¸€ä¸ªä»…ç”¨äºå°è£…ç»§æ‰¿è¿‡ç¨‹çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°åœ¨å†…éƒ¨ä»¥æŸç§æ–¹å¼æ¥å¢å¼ºå¯¹è±¡ï¼Œæœ€åå†åƒçœŸåœ°æ˜¯å®ƒåšäº†æ‰€æœ‰å·¥ä½œä¸€æ ·è¿”å›å¯¹è±¡å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ é€šè¿‡å€Ÿç”¨æ„é€ å‡½æ•°æ¥ç»§æ‰¿å±æ€§ é€šè¿‡åŸå‹é“¾çš„æ··æˆå½¢å¼æ¥ç»§æ‰¿æ–¹æ³•","categories":[],"tags":[{"name":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","slug":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","permalink":"http://ziiyan.github.io/tags/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}]},{"title":"é¢è¯•å‡†å¤‡-è®¡ç®—æœºç½‘ç»œ","slug":"é¢è¯•å‡†å¤‡ï¼šè®¡ç®—æœºç½‘ç»œ","date":"2019-12-14T15:01:08.000Z","updated":"2020-08-14T02:46:26.209Z","comments":true,"path":"2019/12/14/é¢è¯•å‡†å¤‡ï¼šè®¡ç®—æœºç½‘ç»œ/","link":"","permalink":"http://ziiyan.github.io/2019/12/14/%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87%EF%BC%9A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/","excerpt":"","text":"1ã€ä½“ç³»ç»“æ„ TCP/IPä½“ç³»ç»“æ„(å››å±‚) äº”å±‚ OSIçš„ä½“ç³»ç»“æ„(ä¸ƒå±‚) 4ã€åº”ç”¨å±‚ 5ã€åº”ç”¨å±‚ 7ã€åº”ç”¨å±‚ 6ã€è¡¨ç¤ºå±‚ 5ã€ä¼šè¯å±‚ 3ã€ä¼ è¾“å±‚ 4ã€ä¼ è¾“å±‚ 4ã€ä¼ è¾“å±‚ 2ã€ç½‘ç»œå±‚ 3ã€ç½‘ç»œå±‚ 3ã€ç½‘ç»œå±‚ 1ã€ç‰©ç†å±‚ 2ã€é“¾è·¯å±‚ 2ã€é“¾è·¯å±‚ 1ã€ç‰©ç†å±‚ 1ã€ç‰©ç†å±‚ 2ã€TCP2.1ã€å®šä¹‰ Transmission Control Protocolï¼Œä¼ è¾“æ§åˆ¶åè®® ä¼ è¾“å±‚ 2.2ã€ç‰¹ç‚¹ é¢å‘è¿æ¥ å…ˆå»ºç«‹è¿æ¥ã€ä¼ è¾“å®Œæˆåé‡Šæ”¾è¿æ¥ å¯é  ä¸ä¸¢å¤±ã€æ— å·®é”™ã€ä¸é‡å¤ã€æŒ‰é¡ºåºåˆ°è¾¾ é¢å‘å­—èŠ‚æµ æµï¼šæµå…¥/å‡ºè¿›ç¨‹çš„å­—ç¬¦åºåˆ— TCPä¸€æ¬¡ä¼ è¾“çš„æŠ¥æ–‡é•¿åº¦æœ‰é™åˆ¶ï¼Œå¤ªå¤§éœ€åˆ†å— æŒ‰åºåˆ°è¾¾å¯ä»¥é‡æ–°ç»„åˆ å…¨åŒå·¥é€šä¿¡ åŒæ–¹éƒ½èƒ½å‘é€æ•°æ® 2.3ã€ä¼˜ç¼ºç‚¹ å¯é  æ…¢ éœ€è¦å»ºç«‹è¿æ¥ å‘é€ç¡®è®¤åŒ… 2.4ã€åº”ç”¨åœºæ™¯ è¦æ±‚é€šä¿¡æ•°æ®å¯é  2.5ã€æŠ¥æ–‡æ®µæ ¼å¼ åºå· æœ¬æŠ¥æ–‡æ®µæ‰€å‘é€æ•°æ®çš„ç¬¬1ä¸ªå­—èŠ‚çš„åºå· ç¡®è®¤å·ï¼ˆACKï¼‰ æœŸæœ›æ”¶åˆ°å¯¹æ–¹ä¸‹ä¸ªæŠ¥æ–‡æ®µçš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå· ACK = N ï¼šN-1 éƒ½æ”¶åˆ° SYNï¼ˆåŒæ­¥ä½ï¼‰ è¿æ¥å»ºç«‹æ—¶ç”¨äºåŒæ­¥åºå· SYN = 1ã€ACK = 0ï¼šè¿æ¥è¯·æ±‚ SYN = 1ã€ACK = 1ï¼šè¿æ¥è¯·æ±‚å“åº” FINï¼ˆç»ˆæ­¢æ§åˆ¶ä½ï¼‰ é‡Šæ”¾è¿æ¥ FIN = 1ï¼šå‘é€å®Œæ¯•ï¼Œè¯·æ±‚é‡Šæ”¾è¿æ¥ 2.6ã€ä¸‰æ¬¡æ¡æ‰‹ æè¿° æŠ¥æ–‡æ®µä¿¡æ¯ çŠ¶æ€ å®¢æˆ·ç«¯å‘é€ã€è¿æ¥è¯·æ±‚ã€‘æŠ¥æ–‡æ®µ 1ã€åŒæ­¥æ ‡å¿—ä½ SYN = 1ï¼Œ2ã€éšæœºèµ·å§‹åºå· seq = xï¼Œ3ã€ä¸æºå¸¦æ•°æ®SYN = 1 çš„æŠ¥æ–‡æ®µä¸èƒ½æºå¸¦æ•°æ®ï¼Œä½†è¦æ¶ˆè€—ä¸€ä¸ªåºå· å®¢æˆ·ç«¯ã€SYN_SENDã€‘ã€åŒæ­¥å·²å‘é€ã€‘ æœåŠ¡å™¨å‘é€ã€å“åº”ç¡®è®¤ã€‘æŠ¥æ–‡æ®µ 1ã€åŒæ­¥æ ‡å¿—ä½ SYN = 1ï¼Œ2ã€ç¡®è®¤æ ‡è®°ä½ ACK = 1ï¼Œ3ã€éšæœºèµ·æ—¶åºå· seq = yï¼Œ4ã€ç¡®è®¤å·å­—æ®µ ack = x+1åŒä¸Šï¼Œä¸æºå¸¦æ•°æ® æœåŠ¡å™¨ã€SYN_RCVDã€‘ã€åŒæ­¥å·²æ¥å—ã€‘ å®¢æˆ·ç«¯å‘é€ã€è¿æ¥ç¡®è®¤ã€‘æŠ¥æ–‡æ®µ 1ã€ç¡®è®¤æ ‡è®°ä½ ACK = 1ï¼Œ2ã€åºå· seq = x+13ã€ç¡®è®¤å·å­—æ®µ ack = y+1å¯æºå¸¦æ•°æ® å®¢æˆ·ç«¯ã€æœåŠ¡å™¨ã€ESTABLISHEDã€‘ã€åˆ›å»ºã€‘ ä¸ºä»€ä¹ˆTCPå»ºç«‹è¿æ¥éœ€ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ ä¸¤æ¬¡ï¼Ÿé˜²æ­¢æœåŠ¡ç«¯ä¸å†å²è¯·æ±‚å»ºç«‹è¿æ¥ ä¸¤æ¬¡æ¡æ‰‹ å¦‚æœç½‘ç»œæ¯”è¾ƒå·®ï¼Œå‘é€æ–¹è¿ç»­å‘é€å¤šæ¬¡å»ºç«‹è¿æ¥çš„è¯·æ±‚ï¼ŒæœåŠ¡ç«¯æ— æ³•åˆ¤æ–­å½“å‰æ”¶åˆ°çš„è¯·æ±‚æ˜¯å¦å·²ç»è¿‡æœŸ ä¸‰æ¬¡æ¡æ‰‹ å¦‚æœå½“å‰è¿æ¥æ˜¯å†å²è¿æ¥ï¼Œå³ SEQ è¿‡æœŸæˆ–è€…è¶…æ—¶ï¼Œé‚£ä¹ˆå‘é€æ–¹å°±ä¼šç›´æ¥å‘é€ RST æ§åˆ¶æ¶ˆæ¯ä¸­æ­¢è¿™ä¸€æ¬¡è¿æ¥ï¼› å¦‚æœå½“å‰è¿æ¥ä¸æ˜¯å†å²è¿æ¥ï¼Œé‚£ä¹ˆå‘é€æ–¹å°±ä¼šå‘é€ ACK æ§åˆ¶æ¶ˆæ¯ï¼Œé€šä¿¡åŒæ–¹å°±ä¼šæˆåŠŸå»ºç«‹è¿æ¥ åˆå§‹åŒ–åºåˆ—å· é€šä¿¡åŒæ–¹éƒ½éœ€è¦è·å¾—ä¸€ä¸ªç”¨äºå‘é€ä¿¡æ¯çš„åˆå§‹åŒ–åºåˆ—å· å››æ¬¡ï¼Ÿå¯ä»¥ä½†æ²¡å¿…è¦ æ€»å¯ä»¥ä½¿ç”¨æ›´å¤šçš„é€šä¿¡æ¬¡æ•°äº¤æ¢ç›¸åŒçš„ä¿¡æ¯ ä¸‰æ¬¡æ˜¯æœ€å°æ¬¡æ•° 2.7ã€å››æ¬¡æŒ¥æ‰‹ æè¿° æŠ¥æ–‡æ®µä¿¡æ¯ çŠ¶æ€ å®¢æˆ·ç«¯å‘é€ã€è¿æ¥é‡Šæ”¾ã€‘æŠ¥æ–‡æ®µ 1ã€ç»ˆæ­¢æ§åˆ¶ä½ FIN = 1ï¼Œ2ã€æŠ¥æ–‡æ®µåºå·ï¼Œå‘é€æ•°æ®æœ€ååºå·+1ï¼Œseq = uï¼Œå¯æºå¸¦æ•°æ® å®¢æˆ·ç«¯ã€FIN-WAIT-1ã€‘ã€ç»ˆæ­¢ç­‰å¾…1ã€‘ æœåŠ¡å™¨å‘é€ã€è¿æ¥é‡Šæ”¾ç¡®è®¤ã€‘æŠ¥æ–‡æ®µ 1ã€ç¡®è®¤æ ‡è®°ä½ ACK = 1ï¼Œ2ã€æŠ¥æ–‡æ®µåºå·ï¼Œå‘é€æ•°æ®æœ€ååºå·+1ï¼Œseq = vï¼Œ3ã€ç¡®è®¤å·å­—æ®µ ack = u+1 æœåŠ¡å™¨ã€CLOSE-WAITã€‘ã€å…³é—­ç­‰å¾…ã€‘å®¢æˆ·ç«¯ã€FIN-WAIT-2ã€‘ã€ç»ˆæ­¢ç­‰å¾…2ã€‘å®¢æˆ·ç«¯ -&gt; æœåŠ¡å™¨ TCP æ–­å¼€ æœåŠ¡å™¨å‘é€ã€é‡Šæ”¾è¿æ¥ã€‘æŠ¥æ–‡æ®µ 1ã€ç»ˆæ­¢æ§åˆ¶ä½ FIN = 1ï¼Œ2ã€å´ä»è¡¨å§ä¸º ACK = 1ï¼Œ3ã€æŠ¥æ–‡æ®µåºå· seq = wï¼Œ4ã€é‡å¤ç¡®è®¤å·å­—æ®µ ack = u+1ï¼Œå¯æºå¸¦æ•°æ® æœåŠ¡ç«¯ã€LAST-ACKã€‘ã€æœ€åç¡®è®¤ã€‘ å®¢æˆ·ç«¯å‘é€ã€è¿æ¥é‡Šæ”¾ç¡®è®¤ã€‘ 1ã€ç¡®è®¤æ ‡è®°ä½ ACK = 1ï¼Œ2ã€æŠ¥æ–‡æ®µåºå· seq = u+1ï¼Œ3ã€ç¡®è®¤å·å­—æ®µ ack = w+1ï¼Œå¯æºå¸¦æ•°æ® å®¢æˆ·ç«¯ã€TIME-WAITã€‘ã€æ—¶é—´ç­‰å¾…ã€‘ç»è¿‡æ—¶é—´ç­‰å¾…åï¼Œå®¢æˆ·æ‰å…³é—­æœåŠ¡å™¨ã€CLOSEDã€‘ã€å…³é—­ã€‘æœåŠ¡å™¨ -&gt; å®¢æˆ·ç«¯ TCP æ–­å¼€ ä¸ºä»€ä¹ˆTCPé‡Šæ”¾è¿æ¥éœ€å››æ¬¡æŒ¥æ‰‹ï¼Ÿ ä¸ºäº†ä¿è¯é€šä¿¡åŒæ–¹éƒ½èƒ½é€šçŸ¥å¯¹æ–¹éœ€é‡Šæ”¾ &amp; æ–­å¼€è¿æ¥ å…¨åŒå·¥ï¼Œå³åŒæ–¹éƒ½å¯ä»¥å‘é€ &amp; æ¥æ”¶ä¿¡æ¯ ä¸¤æ¬¡æŒ¥æ‰‹åªèƒ½ä¿è¯å•å‘å…³é—­ ä¸ºä»€ä¹ˆå®¢æˆ·ç«¯å…³é—­è¿æ¥å‰è¦ç­‰å¾…æ—¶é—´ï¼Ÿ/ TIME-WAIT çš„ä½œç”¨ï¼Ÿ ä¸ºäº†ä¿è¯å®¢æˆ·ç«¯å‘é€çš„ã€è¿æ¥é‡Šæ”¾ç¡®è®¤ã€‘æŠ¥æ–‡èƒ½åˆ°è¾¾æœåŠ¡å™¨ 2.8ã€æ— å·®é”™ä¼ è¾“2.8.1ã€å«ä¹‰ æ— å·®é”™ï¼šå³ ä¼ è¾“ä¿¡é“ä¸å‡ºå·®é”™ å‘é€ &amp; æ¥æ”¶æ•ˆç‡åŒ¹é…ï¼šå³ æ— è®ºå‘é€æ–¹ä»¥å¤šå¿«çš„é€Ÿåº¦å‘é€æ•°æ®ï¼Œæ¥æ”¶æ–¹æ€»æ¥å¾—åŠå¤„ç†æ”¶åˆ°çš„æ•°æ® 2.8.2ã€åŸºç¡€ï¼šæ»‘åŠ¨çª—å£ å‘é€çª—å£ ä»»æ„æ—¶åˆ»ï¼Œå‘é€æ–¹ç»´æŒçš„ä¸€ç»„è¿ç»­çš„ã€å…è®¸å‘é€å¸§çš„å¸§åºå· å¯¹å‘é€æ–¹è¿›è¡Œæµé‡æ§åˆ¶ æ”¶åˆ°ç¡®è®¤å¸§ï¼Œæ»‘åŠ¨çª—å£æ»‘åŠ¨ æ¥å—çª—å£ ä»»æ„æ—¶åˆ»ï¼Œæ¥æ”¶æ–¹ç»´æŒçš„ä¸€ç»„è¿ç»­çš„ã€å…è®¸æ¥æ”¶å¸§çš„å¸§åºå· æ§åˆ¶å¯æ¥æ”¶å“ªäº›æ•°æ®å¸§ åªæœ‰å½“æ”¶åˆ°æ•°æ®å¸§åºå·è½å…¥æ¥æ”¶çª—å£ï¼Œæ¥æ”¶å¹¶æ»‘åŠ¨ï¼Œå¦åˆ™ä¸¢å¼ƒå¸§ 2.8.3ã€å®ç°æ— å·®é”™ä¼ è¾“çš„è§£å†³æ–¹æ¡ˆ[2] æ ¸å¿ƒæ€æƒ³ï¼šé‡‡ç”¨ä¸€äº›å¯é ä¼ è¾“åè®®ï¼Œä½¿å¾— å‡ºé”™é‡ä¼ ï¼šå‡ºç°å·®é”™æ—¶ï¼Œè®©å‘é€æ–¹é‡ä¼ å·®é”™æ•°æ® è‡ªåŠ¨é‡ä¼ åè®® é€Ÿåº¦åŒ¹é…ï¼šå½“æ¥æ”¶æ–¹æ¥ä¸åŠæ¥æ”¶æ”¶åˆ°çš„æ•°æ®æ—¶ï¼Œå¯é€šçŸ¥å‘é€æ–¹é™ä½å‘é€æ•°æ®çš„æ•ˆç‡ æµé‡æ§åˆ¶ æ‹¥å¡æ§åˆ¶ è‡ªåŠ¨é‡ä¼ åè®® åœç­‰å¼ï¼šå‘é€çª—å£ = 1ã€æ¥æ”¶çª—å£ = 1 åé€€Nå¸§ï¼šå‘é€çª—å£ &gt; 1ã€æ¥æ”¶çª—å£ = 1 é€‰æ‹©é‡ä¼ ï¼šå‘é€çª—å£ &gt; 1ã€æ¥æ”¶çª—å£ &gt; 1 æµé‡æ§åˆ¶ &amp; æ‹¥å¡æ§åˆ¶ æµé‡æ§åˆ¶ï¼šç‚¹å¯¹ç‚¹ æ¥æ”¶æ–¹æ ¹æ®è‡ªå·±æ¥æ”¶ç¼“å­˜çš„å¤§å°ï¼ŒåŠ¨æ€è°ƒæ•´å‘é€æ–¹çª—å£å¤§å° å‘é€æ–¹æ ¹æ®æ¥æ”¶æ–¹è¿”å›çš„ç¡®è®¤å¸§è°ƒæ•´å‘é€æ–¹çª—å£å¤§å° æ‹¥å¡æ§åˆ¶ï¼šå…¨å±€ é˜²æ­¢è¿‡å¤šçš„æ•°æ®æ³¨å…¥åˆ°ç½‘ç»œä¸­ï¼Œä½¿å¾—ç½‘ç»œä¸­çš„è·¯ç”±å™¨ &amp; é“¾è·¯è¿‡è½½ æ…¢å¼€å§‹ &amp; æ‹¥å¡é¿å… å¿«é‡ä¼  &amp; å¿«æ¢å¤ 2.9ã€ä¸ UDP çš„åŒºåˆ« TCPï¼šé¢å‘è¿æ¥ã€å¯é ã€å­—èŠ‚æµã€‚é€‚åˆæ•°æ®å¯é çš„åœºæ™¯ UDPï¼šæ— è¿æ¥ã€ä¸å¯é ã€æ•°æ®æŠ¥æ–‡æ®µã€‚é€‚åˆé€šä¿¡é€Ÿåº¦é«˜çš„åœºæ™¯ 3ã€UDP3.1ã€å®šä¹‰ User Datagram Protocolï¼Œç”¨æˆ·æ•°æ®æŠ¥åè®® ä¼ è¾“å±‚ 3.2ã€ç‰¹ç‚¹ æ— è¿æ¥ ä¸å¯é  å¯èƒ½å‡ºç°ä¸¢åŒ…ï¼Œä¸ç®¡å¯¹æ–¹æ˜¯å¦æ¥æ”¶ é¢å‘æŠ¥æ–‡ æ— é•¿åº¦é™åˆ¶ï¼Œä¸€æ¬¡æ€§å‘é€ æ— æ‹¥å¡æ§åˆ¶ 3.3ã€ä¼˜ç¼ºç‚¹ é€Ÿåº¦å¿« ä¸å¯é  3.4ã€åº”ç”¨åœºæ™¯ è¦æ±‚é€šä¿¡é€Ÿåº¦é«˜ 3.5ã€æŠ¥æ–‡æ®µæ ¼å¼ æºç«¯å£ï¼ˆå›å¤æ—¶ä½¿ç”¨ï¼‰ ç›®çš„ç«¯å£ é•¿åº¦ æ£€éªŒå’Œï¼ˆæ£€æµ‹UDPåœ¨ä¼ è¾“ä¸­æ˜¯å¦æœ‰é”™ï¼Œæœ‰é”™ä¸¢å¼ƒï¼‰ ä¼ªé¦–éƒ¨ 3.6ã€ä¸ TCP çš„åŒºåˆ« TCPï¼šé¢å‘è¿æ¥ã€å¯é ã€å­—èŠ‚æµã€‚é€‚åˆæ•°æ®å¯é çš„åœºæ™¯ UDPï¼šæ— è¿æ¥ã€ä¸å¯é ã€æ•°æ®æŠ¥æ–‡æ®µã€‚é€‚åˆé€šä¿¡é€Ÿåº¦é«˜çš„åœºæ™¯ 4ã€HTTP4.1ã€å®šä¹‰ HyperText Transfer Protocolï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®® åº”ç”¨å±‚ 4.2ã€ç‰¹ç‚¹ ä¼ è¾“æ•ˆç‡é«˜ æ— è¿æ¥ï¼šä¸éœ€è¦å»ºç«‹ HTTP è¿æ¥ æ— çŠ¶æ€ï¼šä¸ä¿å­˜å†å²&amp;çŠ¶æ€ä¿¡æ¯ ä¼ è¾“æ ¼å¼ç®€å•ï¼šè¯·æ±‚æ—¶åªéœ€æ–¹æ³•&amp;è·¯å¾„ ä¼ è¾“å¯é æ€§é«˜ åŸºäº TCP å…¶å®ƒ å…¼å®¹æ€§å¥½ï¼šæ”¯æŒ B/Sã€C/S çµæ´»æ€§é«˜ï¼šå…è®¸ä¼ è¾“ä»»æ„ç±»å‹æ•°æ®å¯¹è±¡ 4.3ã€å·¥ä½œæ–¹å¼ è¯·æ±‚ / ç›¸åº” å·¥ä½œæ–¹å¼ 4.4ã€HTTP æŠ¥æ–‡è¯¦è§£4.4.1ã€è¯·æ±‚æŠ¥æ–‡ è¯·æ±‚è¡Œ GETã€POST æ–¹æ³•çš„åŒºåˆ«ï¼Ÿ è¯­ä¹‰ï¼šGET è¯·æ±‚ï¼ŒPOST æäº¤ å‚æ•°ï¼šGET æ”¾ URL ä¸­ï¼ŒPOST æ”¾ body æµè§ˆå™¨å¯¹ URL æœ‰é™åˆ¶é•¿åº¦ï¼ŒHTTP åè®®æœªé™åˆ¶ å®‰å…¨æ€§ï¼šGET å‚æ•°å¯è§ï¼ŒPOST æ•°æ®åœ¨æµè§ˆå™¨ä¸­æ— ç¼“å­˜ è¯·æ±‚å¤´ è¯·æ±‚ä½“ 4.4.2ã€å“åº”æŠ¥æ–‡ çŠ¶æ€è¡Œ å¸¸è§çŠ¶æ€ç ï¼Ÿ 200 404 302 304 å“åº”å¤´ å“åº”ä½“ 4.5ã€é¢å¤–çŸ¥è¯†4.5.1ã€HTTP 1.1 ä¸ HTTP 1.0 çš„åŒºåˆ« http 1.1 å¼•å…¥æŒä¹…è¿æ¥ï¼Œåœ¨ä¸€ä¸ª TCP ä¸­å¯ä»¥ä¼ é€å¤šä¸ª HTTP è¯·æ±‚ &amp; å“åº” å¤šä¸ªè¯·æ±‚ &amp; å“åº”å¯ä»¥åŒæ—¶è¿›è¡Œ å¼•å…¥æ›´å¤šè¯·æ±‚å¤´ &amp; å“åº”å¤´ 4.5.2ã€HTTP ä¸ HTTPS çš„åŒºåˆ« URL åŸç† åŠŸèƒ½ æ ‡å‡†ç«¯å£ CA http:// åº”ç”¨å±‚ ä¸åŠ å¯† 80 ä¸éœ€è¦ https:// ä¼ è¾“å±‚ åŠ å¯†ï¼ˆSSLã€èº«ä»½è®¤è¯ï¼‰ 443 éœ€è¦ 4.5.3ã€HTTP å¤„ç†é•¿è¿æ¥çš„æ–¹å¼ Keep-Alive æœºåˆ¶ 5ã€å…¶å®ƒ5.1ã€æµè§ˆå™¨è¾“å…¥ URL åˆ°é¡µé¢æ˜¾ç¤ºçš„è¿‡ç¨‹ dnsè§£æ tcpè¿æ¥ httpè¯·æ±‚ æœåŠ¡å™¨å“åº” æµè§ˆå™¨æ¸²æŸ“ é¡µé¢èµ„æºåŠ è½½ å»ºç«‹è¿æ¥ åŠ è½½èµ„æº é¡µé¢èµ„æºæ¸²æŸ“ å¤„ç†HTMLæ ‡è®°ï¼Œæ„å»ºDOMæ ‘ å¤„ç†CSSæ ‡è®°ï¼Œæ„å»ºCSSOMæ ‘ å°†DOMæ ‘å’ŒCSSOMæ ‘èåˆæˆæ¸²æŸ“æ ‘ï¼ˆä¼šå¿½ç•¥ä¸éœ€è¦æ¸²æŸ“çš„domï¼‰ æ ¹æ®æ¸²æŸ“æ ‘æ¥å¸ƒå±€ï¼Œè®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„å‡ ä½•ä¿¡æ¯ åœ¨å±å¹•ä¸Šç»˜åˆ¶å„ä¸ªèŠ‚ç‚¹ ä¸­é—´é‡åˆ°å„ç§èµ„æºæ—¶ï¼Œä¼šè¿›è¡Œèµ„æºçš„ä¸‹è½½ 5.2ã€è·¨åŸŸ5.2.1ã€åŒæºç­–ç•¥ åŒæºï¼šåè®®ã€åŸŸåã€ç«¯å£å· ç›¸åŒ æµè§ˆå™¨é™åˆ¶ä»è„šæœ¬å†…å‘èµ·çš„è·¨æºHTTPè¯·æ±‚ è§£å†³æ–¹æ¡ˆ cors res.header('Access-Control-Allow-Origin', '*'); res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE'); res.header('Access-Control-Allow-Headers', '*'); éç®€å•è¯·æ±‚ä¼šå‘èµ·é¢„æ£€è¯·æ±‚ï¼ˆOPTIONSï¼‰ ç®€å•è¯·æ±‚ï¼ˆæ™®é€š HTML Form åœ¨ä¸ä¾èµ–è„šæœ¬çš„æƒ…å†µä¸‹å¯ä»¥å‘å‡ºçš„è¯·æ±‚ï¼‰ï¼š GETã€HEAD æˆ– POST åªä½¿ç”¨äº†å¦‚ä¸‹çš„å®‰å…¨é¦–éƒ¨å­—æ®µ Accept Accept-Language Content-Language Content-Type ä»…é™ä»¥ä¸‹ä¸‰ç§ text/plain multipart/form-data application/x-www-form-urlencoded ä¸ºä»€ä¹ˆè¦åŒºåˆ†ç®€å•è¯·æ±‚&amp;éç®€å•è¯·æ±‚ï¼Ÿ é¦–å…ˆæ³¨æ„åŒæºç­–ç•¥ï¼šæµè§ˆå™¨é™åˆ¶ä»è„šæœ¬å†…å‘èµ·çš„è·¨æºHTTPè¯·æ±‚ ç®€å•è¯·æ±‚æŒ‡çš„æ˜¯ï¼šæ™®é€š HTML Form åœ¨ä¸ä¾èµ–è„šæœ¬çš„æƒ…å†µä¸‹å¯ä»¥å‘å‡ºçš„è¯·æ±‚ å¯¹äºæœåŠ¡å™¨æ¥è¯´ï¼Œä¸éœ€è¦åŒºåˆ†ç®€å•è¯·æ±‚æ˜¯ Form å‘å‡ºçš„è¿˜æ˜¯ Ajax å‘å‡ºçš„ï¼Œå› ä¸ºéƒ½éœ€è¦è¿›è¡Œå¤„ç†ï¼Œæ‰€ä»¥å¯¹è¿™ç§æƒ…å†µè¿›è¡Œé¢„æ£€çš„è¯åè€Œå¤šåšäº†ä¸€æ¬¡æ— ç”¨çš„åˆ¤æ–­ã€‚Ajax è¿”å›çš„æ•°æ®ä¼šè¢«å®¢æˆ·ç«¯æ‹¦æˆªï¼ŒæœåŠ¡å™¨ä¸éœ€è¦è¿›è¡Œå¤šä½™çš„æ“ä½œã€‚ jsonp åŸç†ï¼šåˆ©ç”¨ &lt;script&gt;ã€&lt;link&gt;ã€&lt;img&gt; æ²¡æœ‰åŒæºé™åˆ¶ src å±æ€§çš„å€¼ä¸ºæ¥å£åœ°å€ å‰åç«¯çº¦å®šå¥½æ‰§è¡Œå‡½æ•°çš„åç§° callback å‰ç«¯å®šä¹‰è¯¥å‡½æ•° callback(data) { console.log(data); } åå°è¿”å›æ•°æ® res.send(&#39;callback(${JSON.stringify(data))&#39;) nginx åå‘ä»£ç† Node ä¸­é—´ä»¶ä»£ç† postMessage websocket 5.3ã€cookieã€localstroageã€sessionstroage çš„åŒºåˆ« Cookieé€‚åˆå­˜å‚¨ä¸€äº›sessionä¿¡æ¯ï¼š cookieé™åˆ¶å¤§å°ï¼Œçº¦4kå·¦å³ï¼Œä¸é€‚åˆå­˜å‚¨ä¸šåŠ¡æ•°æ®ï¼Œå°¤å…¶æ˜¯æ•°æ®é‡è¾ƒå¤§çš„å€¼ å­˜åœ¨æœ‰æ•ˆæœŸï¼Œåˆ°æœŸè‡ªåŠ¨é”€æ¯ cookieä¼šæ¯æ¬¡éšhttpè¯·æ±‚ä¸€èµ·å‘é€ï¼Œæµªè´¹å®½ cookieè®¾ç½®äº†domainå¯ä»¥åœ¨å­åŸŸå…±äº«è·¨åŸŸ å¯ä»¥ä½¿ç”¨çˆ¬è™«æŠ“å– localstroageé€‚åˆå­˜å‚¨åº”ç”¨å…±äº«çš„åœ°å€ä¿¡æ¯ç­‰ï¼š å­˜å‚¨æ•°æ®é‡å¤§ï¼Œ5Mæˆ–è€…æ›´å¤§ æœ‰æ•ˆæœŸä¸ºæ°¸ä¹… ä¸ä¼šéšhttpè¯·æ±‚ä¸€èµ·å‘é€ ä¸èƒ½è·¨åŸŸï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨postMessageå’Œiframeæ¶ˆé™¤è¿™ä¸ªå½±å“,ä¾‹å¦‚ï¼šcross-storage åœ¨æµè§ˆå™¨çš„éšç§æ¨¡å¼ä¸‹ä¸èƒ½è¯»å– ä¸èƒ½è¢«çˆ¬è™«è¯»å– sessionstroageé€‚åˆå­˜å‚¨æµè§ˆçŠ¶æ€ç­‰ï¼š å­˜å‚¨æ•°æ®é‡å¤§ï¼Œ5Mæˆ–è€…æ›´å¤§ æœ‰æ•ˆæœŸä¸ºåˆ°æµè§ˆå™¨å…³é—­ ä¸ä¼šéšhttpè¯·æ±‚ä¸€èµ·å‘é€ ä¸èƒ½è¢«çˆ¬è™«è¯»å– 5.4ã€HTTPS5.4.1ã€HTTP ä¸ºä»€ä¹ˆä¸å®‰å…¨ æ˜æ–‡ä¼ è¾“ï¼Œå†…å®¹å¯èƒ½è¢«çªƒå¬ æ— æ³•éªŒè¯æŠ¥æ–‡çš„å®Œæ•´æ€§ï¼Œå†…å®¹å¯èƒ½è¢«ç¯¡æ”¹ï¼ˆä¸­é—´äººæ”»å‡»ï¼‰ ä¸éªŒè¯å¯¹æ–¹èº«ä»½ï¼Œå¯èƒ½è¢«ä¼ªè£… 5.4.2ã€HTTPS å®ç°åŸç† HTTP å…ˆè·Ÿ SSL é€šä¿¡å†ç”± SSL è·Ÿ TCP é€šä¿¡ HTTP HTTPS HTTP HTTP SSL TCP TCP IP IP SSL æ˜¯ç‹¬ç«‹äº HTTP çš„åè®®ï¼Œæ‰€ä»¥ä¸å…‰æ˜¯ HTTP åè®®ï¼Œå…¶ä»–è¿è¡Œåœ¨åº” ç”¨å±‚çš„ SMTP å’Œ Telnet ç­‰åè®®å‡å¯é…åˆ SSL åè®®ä½¿ç”¨ã€‚å¯ä»¥è¯´ SSL æ˜¯ å½“ä»Šä¸–ç•Œä¸Šåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ç½‘ç»œå®‰å…¨æŠ€æœ¯ã€‚ åŠ å¯† æ•°æ®ä¼ è¾“é˜¶æ®µâ€”â€”å¯¹ç§°å¯†é’¥åŠ å¯† åŠ å¯†å’Œè§£å¯†é˜¶æ®µä½¿ç”¨åŒä¸€ä¸ªå¯†é’¥ è¯ä¹¦éªŒè¯é˜¶æ®µâ€”â€”éå¯¹ç§°å¯†é’¥åŠ å¯† å¯¹æ–¹å…¬é’¥åŠ å¯†ï¼Œå¯¹åº”ç§é’¥è§£å¯† æ¯”å¯¹ç§°å¯†é’¥å¤æ‚ï¼Œæ…¢ æ··åˆåŠ å¯†æœºåˆ¶ éå¯¹ç§°ç§é’¥ç”¨æ¥äº¤æ¢å…±äº«å¯†é’¥ï¼ˆå…¬é’¥åŠ å¯†ï¼‰ å¯¹ç§°å¯†é’¥ç”¨æ¥äº¤æ¢æ•°æ®ï¼ˆå…±äº«å¯†é’¥åŠ å¯†ï¼‰ è¯ä¹¦ æœåŠ¡å™¨æŠŠè‡ªå·±çš„å…¬å¼€å¯†é’¥äº¤ç»™CAï¼ˆCertificate Authorityï¼Œæ•°å­—è®¤è¯æœºæ„ï¼‰ CA ç”¨è‡ªå·±çš„ç§é’¥ç»™æœåŠ¡å™¨çš„å…¬é’¥ç­¾åï¼Œå¹¶é¢å‘å…¬é’¥è¯ä¹¦ å®¢æˆ·ç«¯æ‹¿åˆ°æœåŠ¡å™¨çš„å…¬é’¥è¯ä¹¦ï¼Œç”¨æ¤å…¥æµè§ˆå™¨çš„CAå…¬é’¥éªŒè¯è¯ä¹¦çœŸå®æ€§ï¼Œä»è€Œä¿è¯æœåŠ¡å™¨å…¬é’¥çœŸå®æ€§ å®¢æˆ·ç«¯ä½¿ç”¨æœåŠ¡å™¨çš„å…¬é’¥å¯¹æŠ¥æ–‡åŠ å¯†åå‘é€ æœåŠ¡å™¨ä½¿ç”¨è‡ªå·±çš„ç§é’¥å¯¹è±¹çº¹è§£å¯† æ•°æ®å®Œæ•´æ€§ æ•°å­—ç­¾å å‘é€æ–¹ç”¨æ‘˜è¦ç®—æ³•å¯¹æŠ¥æ–‡æå–ç”Ÿæˆæ•°å­—æ‘˜è¦ ä½¿ç”¨ç§é’¥å¯¹æ‘˜è¦è¿›è¡ŒåŠ å¯†åŠ å¯†åçš„æ‘˜è¦ä½œä¸ºæ•°å­—ç­¾åé™„åŠ åœ¨æŠ¥æ–‡ä¸Šï¼Œä¸€èµ·å‘é€ç»™æ¥æ”¶æ–¹ æ¥æ”¶æ–¹æ”¶åˆ°æŠ¥æ–‡åï¼Œä½¿ç”¨ç›¸åŒçš„æ‘˜è¦ç®—æ³•æå–å‡ºæ‘˜è¦ å†ä½¿ç”¨å…¬é’¥å¯¹æŠ¥æ–‡çš„æ•°å­—ç­¾åè¿›è¡Œè§£å¯† å¦‚æœè§£å¯†åçš„æ•°å­—ç­¾åä¸æå–å‡ºå¾—æ‘˜è¦ç›¸åŒï¼Œé‚£ä¹ˆå°±å¯ä»¥è¯æ˜æŠ¥æ–‡æ²¡è¢«ç¯¡æ”¹ï¼Œæ•°æ®æ˜¯å®Œæ•´çš„ 5.4.3ã€HTTPS å®Œæ•´æµç¨‹ è¯ä¹¦éªŒè¯é˜¶æ®µ å®¢æˆ·ç«¯å‘èµ· HTTPS è¯·æ±‚ æœåŠ¡ç«¯è¿”å› HTTPS è¯ä¹¦ å®¢æˆ·ç«¯éªŒè¯è¯ä¹¦æ˜¯å¦åˆæ³• æ•°æ®ä¼ è¾“é˜¶æ®µ å®¢æˆ·ç«¯ç”Ÿæˆå…±äº«å¯†é’¥ å…¬é’¥åŠ å¯†å…±äº«å¯†é’¥ï¼Œå‘é€ç»™æœåŠ¡ç«¯ æœåŠ¡ç«¯ç”¨ç§é’¥è§£å¯†ï¼Œè·å¾—å…±äº«å¯†é’¥ å…±äº«å¯†é’¥åŠ å¯†äº¤æ¢æ•°æ® 5.4.4ã€HTTPS ç¼ºç‚¹ é€Ÿåº¦æ…¢ CA ä»˜è´¹ Reference é¢è¯•å¸¦ä½ é£ï¼šè¿™æ˜¯ä¸€ä»½å…¨é¢çš„ è®¡ç®—æœºç½‘ç»œåŸºç¡€ æ€»ç»“æ”»ç•¥ è®¡ç®—æœºç½‘ç»œï¼šè¿™æ˜¯ä¸€ä»½å…¨é¢ &amp; è¯¦ç»† çš„TCPåè®®æ”»ç•¥ ä¸ºä»€ä¹ˆ TCP å»ºç«‹è¿æ¥éœ€è¦ä¸‰æ¬¡æ¡æ‰‹ è®¡ç®—æœºç½‘ç»œï¼šè¿™æ˜¯ä¸€ä»½å…¨é¢&amp; è¯¦ç»† HTTPçŸ¥è¯†è®²è§£ ä¹ç§è·¨åŸŸæ–¹å¼å®ç°åŸç†ï¼ˆå®Œæ•´ç‰ˆï¼‰ CORS ä¸ºä»€ä¹ˆè¦åŒºåˆ†ã€ç®€å•è¯·æ±‚ã€å’Œã€é¢„æ£€è¯·æ±‚ã€ï¼Ÿ å‰ç«¯å¿…é¡»æ‡‚çš„è®¡ç®—æœºç½‘ç»œçŸ¥è¯†â€”(è·¨åŸŸã€ä»£ç†ã€æœ¬åœ°å­˜å‚¨) [ç§ƒç ´å‰ç«¯é¢è¯•] â€”â€” HTTP &amp;&amp; HTTPS","categories":[],"tags":[{"name":"ç½‘ç»œ","slug":"ç½‘ç»œ","permalink":"http://ziiyan.github.io/tags/%E7%BD%91%E7%BB%9C/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://ziiyan.github.io/tags/%E9%9D%A2%E8%AF%95/"}]}],"categories":[],"tags":[{"name":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","slug":"JavaScripté«˜çº§ç¨‹åºè®¾è®¡","permalink":"http://ziiyan.github.io/tags/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://ziiyan.github.io/tags/%E9%9D%A2%E8%AF%95/"},{"name":"å…¶å®ƒ","slug":"å…¶å®ƒ","permalink":"http://ziiyan.github.io/tags/%E5%85%B6%E5%AE%83/"},{"name":"Vue","slug":"Vue","permalink":"http://ziiyan.github.io/tags/Vue/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://ziiyan.github.io/tags/JavaScript/"},{"name":"æµè§ˆå™¨","slug":"æµè§ˆå™¨","permalink":"http://ziiyan.github.io/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"},{"name":"React","slug":"React","permalink":"http://ziiyan.github.io/tags/React/"},{"name":"CSS","slug":"CSS","permalink":"http://ziiyan.github.io/tags/CSS/"},{"name":"æ€§èƒ½","slug":"æ€§èƒ½","permalink":"http://ziiyan.github.io/tags/%E6%80%A7%E8%83%BD/"},{"name":"ç½‘ç»œ","slug":"ç½‘ç»œ","permalink":"http://ziiyan.github.io/tags/%E7%BD%91%E7%BB%9C/"},{"name":"Webpack","slug":"Webpack","permalink":"http://ziiyan.github.io/tags/Webpack/"},{"name":"ç¿»è¯‘","slug":"ç¿»è¯‘","permalink":"http://ziiyan.github.io/tags/%E7%BF%BB%E8%AF%91/"},{"name":"ç²¾è¯»","slug":"ç²¾è¯»","permalink":"http://ziiyan.github.io/tags/%E7%B2%BE%E8%AF%BB/"},{"name":"åˆ·é¢˜","slug":"åˆ·é¢˜","permalink":"http://ziiyan.github.io/tags/%E5%88%B7%E9%A2%98/"},{"name":"HTML","slug":"HTML","permalink":"http://ziiyan.github.io/tags/HTML/"},{"name":"PWA","slug":"PWA","permalink":"http://ziiyan.github.io/tags/PWA/"},{"name":"ECMAScript 6 å…¥é—¨","slug":"ECMAScript-6-å…¥é—¨","permalink":"http://ziiyan.github.io/tags/ECMAScript-6-%E5%85%A5%E9%97%A8/"},{"name":"å·¥ä½œ","slug":"å·¥ä½œ","permalink":"http://ziiyan.github.io/tags/%E5%B7%A5%E4%BD%9C/"},{"name":"Java","slug":"Java","permalink":"http://ziiyan.github.io/tags/Java/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"http://ziiyan.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}]}