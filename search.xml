<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>38.å­—ç¬¦ä¸²çš„æ’åˆ—</title>
      <link href="/2020/05/27/59-I-%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC/"/>
      <url>/2020/05/27/59-I-%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC/</url>
      
        <content type="html"><![CDATA[<h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><p>ç»™å®šä¸€ä¸ªæ•°ç»„ nums å’Œæ»‘åŠ¨çª—å£çš„å¤§å° kï¼Œè¯·æ‰¾å‡ºæ‰€æœ‰æ»‘åŠ¨çª—å£é‡Œçš„æœ€å¤§å€¼ã€‚</p><p>æç¤ºï¼š</p><p>ä½ å¯ä»¥å‡è®¾ k æ€»æ˜¯æœ‰æ•ˆçš„ï¼Œåœ¨è¾“å…¥æ•°ç»„ä¸ä¸ºç©ºçš„æƒ…å†µä¸‹ï¼Œ1 â‰¤ k â‰¤ è¾“å…¥æ•°ç»„çš„å¤§å°ã€‚</p><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/hua-dong-chuang-kou-de-zui-da-zhi-lcof" target="_blank" rel="noopener">https://leetcode-cn.com/problems/hua-dong-chuang-kou-de-zui-da-zhi-lcof</a><br>è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p><h1 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h1><p>å†™æ³•æœ‰ç‚¹æš´åŠ›â€¦â€¦æ•ˆç‡æ¯”è¾ƒå·®</p><p><code>Array.slice(i, j)</code>æˆªå–å­æ•°ç»„ <code>Array[i~j]</code>ï¼Œ<code>Math.max(...Array)</code> å–æœ€å¤§</p><h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">nums</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">k</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> maxSlidingWindow = <span class="function"><span class="keyword">function</span>(<span class="params">nums, k</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (nums.length === <span class="number">0</span>) <span class="keyword">return</span> [];</span><br><span class="line">    <span class="keyword">let</span> ans = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt;= nums.length - k; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> tmp = nums.slice(i, i+k);</span><br><span class="line">        ans.push(<span class="built_in">Math</span>.max(...tmp));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><ul><li><p>Array.slice(i, j)</p></li><li><p>æ‰©å±•è¿ç®—ç¬¦ <code>...</code></p></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ offer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>59-II.é˜Ÿåˆ—çš„æœ€å¤§å€¼</title>
      <link href="/2020/05/27/59-II-%E9%98%9F%E5%88%97%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC/"/>
      <url>/2020/05/27/59-II-%E9%98%9F%E5%88%97%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC/</url>
      
        <content type="html"><![CDATA[<h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><p>è¯·å®šä¹‰ä¸€ä¸ªé˜Ÿåˆ—å¹¶å®ç°å‡½æ•° max_value å¾—åˆ°é˜Ÿåˆ—é‡Œçš„æœ€å¤§å€¼ï¼Œè¦æ±‚å‡½æ•°max_valueã€push_back å’Œ pop_front çš„å‡æ‘Šæ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1)ã€‚</p><p>è‹¥é˜Ÿåˆ—ä¸ºç©ºï¼Œpop_front å’Œ max_value éœ€è¦è¿”å› -1</p><p>é™åˆ¶ï¼š</p><p>1 &lt;= push_back,pop_front,max_valueçš„æ€»æ“ä½œæ•° &lt;= 10000<br>1 &lt;= value &lt;= 10^5</p><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/dui-lie-de-zui-da-zhi-lcof" target="_blank" rel="noopener">https://leetcode-cn.com/problems/dui-lie-de-zui-da-zhi-lcof</a><br>è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p><h1 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h1><p>ç»´æŠ¤ä¸€ä¸ªå•è°ƒé€’å‡çš„é˜Ÿåˆ— <code>maxx</code>ã€‚</p><p><code>value</code> å…¥é˜Ÿæ—¶ï¼Œæ£€æŸ¥ <code>maxx</code> å°¾éƒ¨ï¼Œå°äºå½“å‰ <code>value</code> çš„å…ƒç´ å…¨éƒ¨å‡ºæ ˆã€‚</p><blockquote><p>å…¥é˜Ÿ 4</p><p>queue 4</p><p>maxx 4</p><hr><p>å…¥é˜Ÿ 2</p><p>queue 4 2</p><p>maxx 4 2</p><hr><p>å…¥é˜Ÿ 3</p><p>queue 4 2 3</p><p>maxx 4 3</p><hr><p>å‡ºé˜Ÿ</p><p>queue 2 3</p><p>maxx 3</p></blockquote><p>å¯ä»¥ä¿è¯ <code>maxx</code> é˜Ÿé¦–çš„å§‹ç»ˆæ˜¯ <code>queue</code> ä¸­çš„æœ€å¤§å€¼</p><h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> MaxQueue = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.queue = [];</span><br><span class="line">    <span class="keyword">this</span>.maxx = [];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">MaxQueue.prototype.max_value = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.maxx.length) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.maxx[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">value</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;void&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">MaxQueue.prototype.push_back = <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.queue.push(value);</span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">this</span>.maxx.length &amp;&amp; <span class="keyword">this</span>.maxx[<span class="keyword">this</span>.maxx.length<span class="number">-1</span>] &lt; value) &#123;</span><br><span class="line">        <span class="keyword">this</span>.maxx.pop();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.maxx.push(value);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">MaxQueue.prototype.pop_front = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.queue.length) &#123;</span><br><span class="line">        <span class="keyword">let</span> cur = <span class="keyword">this</span>.queue.shift();</span><br><span class="line">        <span class="keyword">if</span> (cur === <span class="keyword">this</span>.maxx[<span class="number">0</span>]) &#123;</span><br><span class="line">            <span class="keyword">this</span>.maxx.shift();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cur;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your MaxQueue object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * var obj = new MaxQueue()</span></span><br><span class="line"><span class="comment"> * var param_1 = obj.max_value()</span></span><br><span class="line"><span class="comment"> * obj.push_back(value)</span></span><br><span class="line"><span class="comment"> * var param_3 = obj.pop_front()</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è”åŠ¨ <a href="https://ziiyan.github.io/2020/05/27/30-åŒ…å«minå‡½æ•°çš„æ ˆ" target="_blank" rel="noopener">åŒ…å«minå‡½æ•°çš„æ ˆ</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ offer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>30. åŒ…å«minå‡½æ•°çš„æ ˆ</title>
      <link href="/2020/05/27/30-%E5%8C%85%E5%90%ABmin%E5%87%BD%E6%95%B0%E7%9A%84%E6%A0%88/"/>
      <url>/2020/05/27/30-%E5%8C%85%E5%90%ABmin%E5%87%BD%E6%95%B0%E7%9A%84%E6%A0%88/</url>
      
        <content type="html"><![CDATA[<h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><p>å®šä¹‰æ ˆçš„æ•°æ®ç»“æ„ï¼Œè¯·åœ¨è¯¥ç±»å‹ä¸­å®ç°ä¸€ä¸ªèƒ½å¤Ÿå¾—åˆ°æ ˆçš„æœ€å°å…ƒç´ çš„ min å‡½æ•°åœ¨è¯¥æ ˆä¸­ï¼Œè°ƒç”¨ minã€push åŠ pop çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(1)ã€‚</p><p>æç¤ºï¼š</p><p>å„å‡½æ•°çš„è°ƒç”¨æ€»æ¬¡æ•°ä¸è¶…è¿‡ 20000 æ¬¡</p><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/bao-han-minhan-shu-de-zhan-lcof" target="_blank" rel="noopener">https://leetcode-cn.com/problems/bao-han-minhan-shu-de-zhan-lcof</a><br>è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p><h1 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h1><p>ç»´æŠ¤ä¸€ä¸ªå•è°ƒé€’å‡çš„æ ˆ <code>minn</code>ï¼Œä¿è¯å½“å‰ <code>stack</code> ä¸­çš„æœ€å°å€¼å§‹ç»ˆä¿æŒåœ¨ <code>minn</code> çš„æœ«å°¾ï¼ˆæ ˆé¡¶ï¼‰</p><p><code>stack</code>å‡ºæ ˆçš„æ—¶å€™æ£€æŸ¥æ˜¯å¦æ˜¯æœ€å°å€¼ï¼ˆå³ç­‰äº<code>minn</code> æ ˆé¡¶å…ƒç´ ï¼‰</p><h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * initialize your data structure here.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> MinStack = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.minn = [];</span><br><span class="line">    <span class="keyword">this</span>.stack = [];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">x</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;void&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">MinStack.prototype.push = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.stack.push(x);</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.minn.length) &#123;</span><br><span class="line">        <span class="keyword">this</span>.minn.push(x);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (x &lt;= <span class="keyword">this</span>.minn[<span class="keyword">this</span>.minn.length<span class="number">-1</span>]) &#123;</span><br><span class="line">        <span class="keyword">this</span>.minn.push(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;void&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">MinStack.prototype.pop = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> t = <span class="keyword">this</span>.stack.pop();</span><br><span class="line">    <span class="keyword">if</span> (t === <span class="keyword">this</span>.minn[<span class="keyword">this</span>.minn.length<span class="number">-1</span>]) &#123;</span><br><span class="line">        <span class="keyword">this</span>.minn.pop();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">MinStack.prototype.top = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.stack[<span class="keyword">this</span>.stack.length<span class="number">-1</span>];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">MinStack.prototype.min = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.minn[<span class="keyword">this</span>.minn.length<span class="number">-1</span>];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your MinStack object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * var obj = new MinStack()</span></span><br><span class="line"><span class="comment"> * obj.push(x)</span></span><br><span class="line"><span class="comment"> * obj.pop()</span></span><br><span class="line"><span class="comment"> * var param_3 = obj.top()</span></span><br><span class="line"><span class="comment"> * var param_4 = obj.min()</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è”åŠ¨ <a href="https://ziiyan.github.io/2020/05/27/59-é˜Ÿåˆ—çš„æœ€å¤§å€¼/" target="_blank" rel="noopener">é˜Ÿåˆ—çš„æœ€å¤§å€¼</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ offer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>09. ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—</title>
      <link href="/2020/05/27/09-%E7%94%A8%E4%B8%A4%E4%B8%AA%E6%A0%88%E5%AE%9E%E7%8E%B0%E9%98%9F%E5%88%97/"/>
      <url>/2020/05/27/09-%E7%94%A8%E4%B8%A4%E4%B8%AA%E6%A0%88%E5%AE%9E%E7%8E%B0%E9%98%9F%E5%88%97/</url>
      
        <content type="html"><![CDATA[<h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><p>ç”¨ä¸¤ä¸ªæ ˆå®ç°ä¸€ä¸ªé˜Ÿåˆ—ã€‚é˜Ÿåˆ—çš„å£°æ˜å¦‚ä¸‹ï¼Œè¯·å®ç°å®ƒçš„ä¸¤ä¸ªå‡½æ•° appendTail å’Œ deleteHead ï¼Œåˆ†åˆ«å®Œæˆåœ¨é˜Ÿåˆ—å°¾éƒ¨æ’å…¥æ•´æ•°å’Œåœ¨é˜Ÿåˆ—å¤´éƒ¨åˆ é™¤æ•´æ•°çš„åŠŸèƒ½ã€‚(è‹¥é˜Ÿåˆ—ä¸­æ²¡æœ‰å…ƒç´ ï¼ŒdeleteHead æ“ä½œè¿”å› -1 )</p><p>æç¤ºï¼š</p><p>1 &lt;= values &lt;= 10000<br>æœ€å¤šä¼šå¯¹ appendTailã€deleteHead è¿›è¡Œ 10000 æ¬¡è°ƒç”¨</p><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/yong-liang-ge-zhan-shi-xian-dui-lie-lcof" target="_blank" rel="noopener">https://leetcode-cn.com/problems/yong-liang-ge-zhan-shi-xian-dui-lie-lcof</a><br>è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p><h1 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h1><p><code>stack1</code> è´Ÿè´£å…¥é˜Ÿï¼Œä¿è¯å…¥é˜Ÿé¡ºåºã€‚è¦ä¹ˆä¸ºç©ºï¼Œè¦ä¹ˆæ˜¯æ­£ç¡®çš„é˜Ÿåˆ—é¡ºåºã€‚</p><p><code>stack2</code> è´Ÿè´£å‡ºé˜Ÿï¼Œä¿è¯å‡ºé˜Ÿé¡ºåºã€‚è¦ä¹ˆä¸ºç©ºï¼Œè¦ä¹ˆæ˜¯é€†åºçš„é˜Ÿåˆ—é¡ºåºã€‚</p><h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> CQueue = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.stack1 = [];</span><br><span class="line">    <span class="keyword">this</span>.stack2 = [];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">value</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;void&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">CQueue.prototype.appendTail = <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">this</span>.stack2.length) &#123;</span><br><span class="line">        <span class="keyword">this</span>.stack1.push(<span class="keyword">this</span>.stack2.pop())</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.stack1.push(value)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">CQueue.prototype.deleteHead = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">this</span>.stack1.length) &#123;</span><br><span class="line">        <span class="keyword">this</span>.stack2.push(<span class="keyword">this</span>.stack1.pop())</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.stack2.length ? <span class="keyword">this</span>.stack2.pop() : <span class="number">-1</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your CQueue object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * var obj = new CQueue()</span></span><br><span class="line"><span class="comment"> * obj.appendTail(value)</span></span><br><span class="line"><span class="comment"> * var param_2 = obj.deleteHead()</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><ul><li>æ°´é¢˜</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ offer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueé¢„æ¸²æŸ“å®æˆ˜-prerender-spa-plugin</title>
      <link href="/2020/05/27/Vue%E9%A2%84%E6%B8%B2%E6%9F%93%E5%AE%9E%E6%88%98/"/>
      <url>/2020/05/27/Vue%E9%A2%84%E6%B8%B2%E6%9F%93%E5%AE%9E%E6%88%98/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å®˜ç½‘éœ€è¦ SEOï¼Œçœ‹äº†ä¸‹æ–¹æ¡ˆè§‰å¾—é¢„æ¸²æŸ“æ¯”è¾ƒåˆé€‚</p><ul><li>ç•Œé¢å°‘</li><li>å¼±äº¤äº’</li></ul><h2 id="æœåŠ¡å™¨ç«¯æ¸²æŸ“-vs-é¢„æ¸²æŸ“-SSR-vs-Prerendering"><a href="#æœåŠ¡å™¨ç«¯æ¸²æŸ“-vs-é¢„æ¸²æŸ“-SSR-vs-Prerendering" class="headerlink" title="æœåŠ¡å™¨ç«¯æ¸²æŸ“ vs é¢„æ¸²æŸ“ (SSR vs Prerendering)"></a><a href="[https://ssr.vuejs.org/zh/#%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%B8%B2%E6%9F%93-vs-%E9%A2%84%E6%B8%B2%E6%9F%93-ssr-vs-prerendering](https://ssr.vuejs.org/zh/#æœåŠ¡å™¨ç«¯æ¸²æŸ“-vs-é¢„æ¸²æŸ“-ssr-vs-prerendering)">æœåŠ¡å™¨ç«¯æ¸²æŸ“ vs é¢„æ¸²æŸ“ (SSR vs Prerendering)</a></h2><blockquote><p>å¦‚æœä½ è°ƒç ”æœåŠ¡å™¨ç«¯æ¸²æŸ“ (SSR) åªæ˜¯ç”¨æ¥æ”¹å–„å°‘æ•°è¥é”€é¡µé¢ï¼ˆä¾‹å¦‚ <code>/</code>, <code>/about</code>, <code>/contact</code> ç­‰ï¼‰çš„ SEOï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦<strong>é¢„æ¸²æŸ“</strong>ã€‚æ— éœ€ä½¿ç”¨ web æœåŠ¡å™¨å®æ—¶åŠ¨æ€ç¼–è¯‘ HTMLï¼Œè€Œæ˜¯ä½¿ç”¨é¢„æ¸²æŸ“æ–¹å¼ï¼Œåœ¨æ„å»ºæ—¶ (build time) ç®€å•åœ°ç”Ÿæˆé’ˆå¯¹ç‰¹å®šè·¯ç”±çš„é™æ€ HTML æ–‡ä»¶ã€‚ä¼˜ç‚¹æ˜¯è®¾ç½®é¢„æ¸²æŸ“æ›´ç®€å•ï¼Œå¹¶å¯ä»¥å°†ä½ çš„å‰ç«¯ä½œä¸ºä¸€ä¸ªå®Œå…¨é™æ€çš„ç«™ç‚¹ã€‚</p><p>å¦‚æœä½ ä½¿ç”¨ webpackï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="https://github.com/chrisvfritz/prerender-spa-plugin" target="_blank" rel="noopener">prerender-spa-plugin</a> è½»æ¾åœ°æ·»åŠ é¢„æ¸²æŸ“ã€‚å®ƒå·²ç»è¢« Vue åº”ç”¨ç¨‹åºå¹¿æ³›æµ‹è¯• - äº‹å®ä¸Šï¼Œ<a href="https://github.com/chrisvfritz" target="_blank" rel="noopener">ä½œè€…</a>æ˜¯ Vue æ ¸å¿ƒå›¢é˜Ÿçš„æˆå‘˜ã€‚</p></blockquote><h2 id="What-is-Prerendering"><a href="#What-is-Prerendering" class="headerlink" title="What is Prerendering?"></a><a href="https://github.com/chrisvfritz/prerender-spa-plugin#what-is-prerendering" target="_blank" rel="noopener">What is Prerendering?</a></h2><blockquote><p>Recently, SSR (Server Side Rendering) has taken the JavaScript front-end world by storm. The fact that you can now render your sites and apps on the server before sending them to your clients is an absolutely <em>revolutionary</em> idea (and totally not what everyone was doing before JS client-side apps got popular in the first placeâ€¦)</p><p>However, the same criticisms that were valid for PHP, ASP, JSP, (and such) sites are valid for server-side rendering today. Itâ€™s slow, breaks fairly easily, and is difficult to implement properly.</p><p>Thing is, despite what everyone might be telling you, you probably donâ€™t <em>need</em> SSR. You can get almost all the advantages of it (without the disadvantages) by using <strong>prerendering.</strong> Prerendering is basically firing up a headless browser, loading your appâ€™s routes, and saving the results to a static HTML file. You can then serve it with whatever static-file-serving solution you were using previously. It <em>just works</em> with HTML5 navigation and the likes. No need to change your code or add server-side rendering workarounds.</p><p>In the interest of transparency, there are some use-cases where prerendering might not be a great idea.</p><ul><li><strong>Tons of routes</strong> - If your site has hundreds or thousands of routes, prerendering will be really slow. Sure you only have to do it once per update, but it could take ages. Most people donâ€™t end up with thousands of static routes, but just in-caseâ€¦</li><li><strong>Dynamic Content</strong> - If your render routes that have content thatâ€™s specific to the user viewing it or other dynamic sources, you should make sure you have placeholder components that can display until the dynamic content loads on the client-side. Otherwise it might be a tad weird.</li></ul></blockquote><h2 id="ä¸‰ç§ä¸åŒæ¸²æŸ“æ–¹å¼çš„åŒºåˆ«"><a href="#ä¸‰ç§ä¸åŒæ¸²æŸ“æ–¹å¼çš„åŒºåˆ«" class="headerlink" title="ä¸‰ç§ä¸åŒæ¸²æŸ“æ–¹å¼çš„åŒºåˆ«"></a>ä¸‰ç§ä¸åŒæ¸²æŸ“æ–¹å¼çš„åŒºåˆ«</h2><ul><li>å®¢æˆ·ç«¯æ¸²æŸ“ï¼šç”¨æˆ·è®¿é—® url -&gt; è¯·æ±‚ html æ–‡ä»¶ -&gt; åŠ è½½ css/js -&gt; å‰ç«¯åŠ¨æ€æ¸²æŸ“é¡µé¢å†…å®¹<ul><li>æ€§èƒ½æ¶ˆè€—åœ¨å®¢æˆ·ç«¯</li></ul></li><li>æœåŠ¡ç«¯æ¸²æŸ“ï¼šç”¨æˆ·è®¿é—® url -&gt; æœåŠ¡ç«¯æ ¹æ®è®¿é—®è·¯å¾„è¯·æ±‚æ‰€éœ€æ•°æ® -&gt; æ‹¼æ¥æˆ html -&gt; è¿”å›ç»™å‰ç«¯<ul><li>ç½‘ç»œä¼ è¾“æ•°æ®é‡å¤§</li></ul></li><li>é¢„æ¸²æŸ“ï¼šæ„å»ºé˜¶æ®µç”ŸæˆåŒ¹é…é¢„æ¸²æŸ“è·¯å¾„çš„ html æ–‡ä»¶ -&gt; ç”¨æˆ·è®¿é—® url -&gt; è¿”å› html ç»™å‰ç«¯<ul><li>æ„å»ºå‡ºæ¥çš„ html æ–‡ä»¶å·²ç»æœ‰é™æ€æ•°æ®ï¼Œéœ€è¦ajaxæ•°æ®çš„éƒ¨åˆ†æœªæ„å»º</li></ul></li></ul><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><blockquote><p>puppeteeræ˜¯è°·æ­Œå‡ºå“çš„ä¸€ä¸ªæ’ä»¶ï¼Œå¯ä»¥å®Œæˆå¾ˆå¤šçš„æ“ä½œï¼Œå¹¿æ³›ä½¿ç”¨åœ¨çˆ¬è™«ã€æµ‹è¯•è‡ªåŠ¨åŒ–ç­‰æµè§ˆå™¨è‡ªåŠ¨åŒ–æ–¹å‘çš„åº”ç”¨ï¼Œè€Œprerender-spa-pluginè¿™ä¸ªæ’ä»¶æ­£æ˜¯ä¾èµ–puppeteeræ“ä½œchromiumè¿™ä¸ªçœŸæ­£çš„æµè§ˆå™¨å†…æ ¸å¯¹SPAè·‘äº†ä¸€éï¼Œç”Ÿæˆä¸€ä¸ªé™æ€çš„HTMLï¼Œé‡Œé¢æ˜¯å·²ç»å¡«å¥½çš„domèŠ‚ç‚¹å’Œæ•°æ®ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ç²—æš´ï¼Œä¸ºäº†ç»™ç”¨æˆ·ç›´æ¥è¿”å›æœ‰å†…å®¹çš„xhtmlæ–‡æ¡£ï¼Œæå‰åœ¨ä¸€ä¸ªæµè§ˆå™¨é‡Œè·‘äº†ä¸€éï¼Œç”Ÿæˆäº†è·‘è¿‡jså’Œcssä¹‹åindex.html(è·Ÿè·¯ç”±)å’Œå…¶ä»–æ–‡æ¡£ã€‚è¿™æ ·çš„è¯æœ‰ä¸¤ä¸ªç¼ºé™·ï¼Œç¬¬ä¸€ä¸ªï¼šæ— æ³•å±•ç¤ºç”¨æˆ·è‡ªèº«çš„å†…å®¹ï¼Œç¬¬äºŒä¸ªï¼šä¸é€‚åˆåŠ¨æ€è·¯ç”±å¤šçš„å¤§å‹é¡¹ç›®ã€‚</p><p>ä½œè€…ï¼šmguy_1<br>é“¾æ¥ï¼š<a href="https://juejin.im/post/5c125787f265da611d668807" target="_blank" rel="noopener">https://juejin.im/post/5c125787f265da611d668807</a><br>æ¥æºï¼šæ˜é‡‘<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn install prerender-spa-plugin --save</span><br></pre></td></tr></table></figure><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// router.js</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  mode: <span class="string">'history'</span>,</span><br><span class="line">  base: process.env.BASE_URL,</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line"><span class="keyword">const</span> PrerenderSPAPlugin = <span class="built_in">require</span>(<span class="string">'prerender-spa-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> Renderer = PrerenderSPAPlugin.PuppeteerRenderer;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  configureWebpack: &#123;</span><br><span class="line">    â€¦â€¦</span><br><span class="line">    plugins: [</span><br><span class="line">      <span class="keyword">new</span> PrerenderSPAPlugin(&#123;</span><br><span class="line">    <span class="comment">// è¾“å‡ºè·¯å¾„</span></span><br><span class="line">        staticDir: path.join(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">  <span class="comment">// éœ€è¦é¢„æ¸²æŸ“çš„è·¯ç”±</span></span><br><span class="line">        routes: [<span class="string">'/'</span>]</span><br><span class="line">      &#125;)</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>é…ç½®è¿˜æ˜¯æ¯”è¾ƒç®€å•ï¼Œå‘ç‚¹æ˜¯ prerender-spa-plugin å®‰è£…è¶…çº§æ…¢ã€‚å®˜æ–¹æºå’Œæ·˜å®æºæ¢æ¥æ¢å» / ç§‘å­¦ä¸Šç½‘å¼€å¼€å…³å…³ï¼ŒæŠ˜è…¾äº†åŠå¤©æ‰ä¸‹å¥½ã€‚</p><p>éƒ½è¯´å¤§é‡è·¯ç”±ä¸é€‚åˆç”¨é¢„æ¸²æŸ“ï¼Œä½†å®é™…ä¸Šä¸»è¦æ˜¯æ„å»ºè¿‡ç¨‹æ¯”è¾ƒæ…¢ï¼Œä¼¼ä¹å¯¹ç”¨æˆ·æ¥è¯´æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>]]></content>
      
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> æµè§ˆå™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webæ€§èƒ½æƒå¨æŒ‡å—-ç½‘ç»œæŠ€æœ¯æ¦‚è§ˆ</title>
      <link href="/2020/05/27/web%E6%80%A7%E8%83%BD%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97-%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF%E6%A6%82%E8%A7%88/"/>
      <url>/2020/05/27/web%E6%80%A7%E8%83%BD%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97-%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF%E6%A6%82%E8%A7%88/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬¬1ç« -å»¶è¿Ÿä¸å¸¦å®½"><a href="#ç¬¬1ç« -å»¶è¿Ÿä¸å¸¦å®½" class="headerlink" title="ç¬¬1ç« ã€€å»¶è¿Ÿä¸å¸¦å®½"></a>ç¬¬1ç« ã€€å»¶è¿Ÿä¸å¸¦å®½</h1><ul><li>å»¶è¿Ÿ ï¼šåˆ†ç»„ä»ä¿¡æ¯æºå‘é€åˆ°ç›®çš„åœ°æ‰€éœ€çš„æ—¶é—´</li><li>å¸¦å®½ ï¼š   é€»è¾‘æˆ–ç‰©ç†é€šä¿¡è·¯å¾„æœ€å¤§çš„ååé‡</li></ul><h2 id="å»¶è¿Ÿçš„æ„æˆ"><a href="#å»¶è¿Ÿçš„æ„æˆ" class="headerlink" title="å»¶è¿Ÿçš„æ„æˆ"></a>å»¶è¿Ÿçš„æ„æˆ</h2><ul><li>å»¶è¿Ÿæ˜¯æ¶ˆæ¯ï¼ˆ messageï¼‰æˆ–åˆ†ç»„ï¼ˆpacketï¼‰ä»èµ·ç‚¹åˆ°ç»ˆç‚¹ç»å†çš„æ—¶é—´ã€‚</li></ul><h1 id="ç¬¬2ç« -TCPçš„æ„æˆ"><a href="#ç¬¬2ç« -TCPçš„æ„æˆ" class="headerlink" title="ç¬¬2ç« ã€€TCPçš„æ„æˆ"></a>ç¬¬2ç« ã€€TCPçš„æ„æˆ</h1><h1 id="ç¬¬3ç« -UDPçš„æ„æˆ"><a href="#ç¬¬3ç« -UDPçš„æ„æˆ" class="headerlink" title="ç¬¬3ç« ã€€UDPçš„æ„æˆ"></a>ç¬¬3ç« ã€€UDPçš„æ„æˆ</h1><h1 id="ç¬¬4ç« -ä¼ è¾“å±‚å®‰å…¨ï¼ˆTLSï¼‰"><a href="#ç¬¬4ç« -ä¼ è¾“å±‚å®‰å…¨ï¼ˆTLSï¼‰" class="headerlink" title="ç¬¬4ç« ã€€ä¼ è¾“å±‚å®‰å…¨ï¼ˆTLSï¼‰"></a>ç¬¬4ç« ã€€ä¼ è¾“å±‚å®‰å…¨ï¼ˆTLSï¼‰</h1>]]></content>
      
      
      
        <tags>
            
            <tag> æ€§èƒ½ </tag>
            
            <tag> ç½‘ç»œ </tag>
            
            <tag> åŸºç¡€ </tag>
            
            <tag> è¯»ä¹¦ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>38.å­—ç¬¦ä¸²çš„æ’åˆ—</title>
      <link href="/2020/05/25/38-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%8E%92%E5%88%97/"/>
      <url>/2020/05/25/38-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%8E%92%E5%88%97/</url>
      
        <content type="html"><![CDATA[<h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><p>è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰“å°å‡ºè¯¥å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„æ‰€æœ‰æ’åˆ—ã€‚</p><p>ä½ å¯ä»¥ä»¥ä»»æ„é¡ºåºè¿”å›è¿™ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œä½†é‡Œé¢ä¸èƒ½æœ‰é‡å¤å…ƒç´ ã€‚</p><p>é™åˆ¶ï¼š</p><p>1 &lt;= s çš„é•¿åº¦ &lt;= 8</p><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/zi-fu-chuan-de-pai-lie-lcof" target="_blank" rel="noopener">https://leetcode-cn.com/problems/zi-fu-chuan-de-pai-lie-lcof</a><br>è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p><h1 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h1><p>å­—ç¬¦ä¸² <code>&quot;abc&quot;</code> ï¼Œä½œä¸ºæ•°ç»„ <code>[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</code>ï¼Œå¯¹æ•°ç»„<code>[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</code> çš„å…ƒç´ è¿›è¡Œå…¨æ’åˆ—ï¼Œå»é‡ã€‚</p><p><code>vis</code> æ ‡è®°æ•°ç»„å¯¹åº”ä½ç½®æ˜¯å¦å·²ç»ä½¿ç”¨è¿‡ã€‚</p><p>é€’å½’ï¼Œæ¯æ¬¡åœ¨æ•°ç»„ä¸­é€‰æ‹©ä¸€ä¸ªæœªä½¿ç”¨çš„å­—ç¬¦æ”¾å…¥ä¸´æ—¶å­—ç¬¦ä¸²ã€‚</p><p>é€’å½’å‡ºå£ï¼šä¸´æ—¶å­—ç¬¦ä¸²é•¿åº¦ = è¾“å…¥å­—ç¬¦ä¸²é•¿åº¦ã€‚</p><p>é‡‡ç”¨ Set å»é‡ã€‚</p><h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> <span class="variable">s</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;string[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> permutation = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> len = s.length;</span><br><span class="line">    <span class="keyword">let</span> vis = <span class="keyword">new</span> <span class="built_in">Array</span>(len).fill(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">const</span> dfs = <span class="function"><span class="keyword">function</span> (<span class="params">ans, str</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (str.length === len) &#123;</span><br><span class="line">            ans.add(str);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!vis[i]) &#123;</span><br><span class="line">                vis[i] = <span class="literal">true</span>;</span><br><span class="line">                dfs(ans, str+s[i]);</span><br><span class="line">                vis[i] = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> ans = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">    dfs(ans, <span class="string">''</span>);</span><br><span class="line">    <span class="keyword">return</span> [...ans];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æ’åˆ— ğŸ”— å›æº¯</p><p>set ç”¨æ³•</p><ul><li><code>add()</code> æ·»åŠ å…ƒç´ </li><li>æ‰©å±•è¿ç®—ç¬¦ <code>...</code><ul><li>[â€¦Set] ===&gt; Array</li></ul></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å‰‘æŒ‡ offer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PWAå…¥é—¨</title>
      <link href="/2020/05/23/PWA%E5%85%A5%E9%97%A8/"/>
      <url>/2020/05/23/PWA%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="PWA-åŸºæœ¬ä»‹ç»"><a href="#PWA-åŸºæœ¬ä»‹ç»" class="headerlink" title="PWA åŸºæœ¬ä»‹ç»"></a>PWA åŸºæœ¬ä»‹ç»</h1><h2 id="PWA-æ˜¯ä»€ä¹ˆ"><a href="#PWA-æ˜¯ä»€ä¹ˆ" class="headerlink" title="PWA æ˜¯ä»€ä¹ˆ"></a>PWA æ˜¯ä»€ä¹ˆ</h2><p>Progressive Web Appï¼Œæ¸è¿›å¼ Web åº”ç”¨ï¼Œæå‡ Web App ä½“éªŒçš„æ–¹æ³•ï¼Œç»™ç”¨æˆ·åŸç”Ÿç”¨æˆ·çš„ä½“éªŒã€‚<a href="https://developer.mozilla.org/zh-CN/docs/Web/Progressive_web_apps" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/Progressive_web_apps</a></p><h2 id="PWA-çš„ä¼˜åŠ¿"><a href="#PWA-çš„ä¼˜åŠ¿" class="headerlink" title="PWA çš„ä¼˜åŠ¿"></a>PWA çš„ä¼˜åŠ¿</h2><ul><li>æ¸è¿›å¼ - é€‚ç”¨äºæ‰€æœ‰æµè§ˆå™¨ï¼Œä¸å½±å“åŸ Web App åŠŸèƒ½</li><li>æµç•… - å€ŸåŠ© Wervice Worker åœ¨ç¦»çº¿æˆ–è€…ç½‘ç»œè¾ƒå·®çš„æƒ…å†µä¸‹æ­£å¸¸è®¿é—®</li><li>å¯å®‰è£… - ç”¨æˆ·å¯ä»¥æ·»åŠ å¸¸ç”¨çš„ webapp åˆ°æ¡Œé¢ï¼Œå…å»åº”ç”¨å•†åº—ä¸‹è½½çš„éº»çƒ¦</li><li>åŸç”Ÿä½“éªŒ - å’Œ app ä¸€æ ·ï¼Œæ‹¥æœ‰é¦–å±åŠ è½½åŠ¨ç”»ï¼Œå¯ä»¥éšè—åœ°å€æ ç­‰æ²‰æµ¸å¼ä½“éªŒ</li><li>ç²˜æ€§ - é€šè¿‡æ¨é€ç¦»çº¿é€šçŸ¥ç­‰ï¼Œå¯ä»¥è®©ç”¨æˆ·å›æµ</li></ul><h1 id="PWA-æ ¸å¿ƒæŠ€æœ¯æ­ç§˜"><a href="#PWA-æ ¸å¿ƒæŠ€æœ¯æ­ç§˜" class="headerlink" title="PWA æ ¸å¿ƒæŠ€æœ¯æ­ç§˜"></a>PWA æ ¸å¿ƒæŠ€æœ¯æ­ç§˜</h1><h2 id="web-app-manifestï¼šåº”ç”¨ç¨‹åºæ¸…å•"><a href="#web-app-manifestï¼šåº”ç”¨ç¨‹åºæ¸…å•" class="headerlink" title="web app manifestï¼šåº”ç”¨ç¨‹åºæ¸…å•"></a>web app manifestï¼šåº”ç”¨ç¨‹åºæ¸…å•</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Manifest" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/Manifest</a></p><h3 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><ul><li><p>web app manifest æ˜¯ PWA æŠ€æœ¯é›†åˆçš„ä¸€éƒ¨åˆ†</p></li><li><p>web app manifest å¯ä»¥è®©ç½‘ç«™å®‰è£…åˆ°è®¾å¤‡çš„ä¸»å±å¹•ï¼Œè€Œä¸éœ€è¦ç”¨æˆ·é€šè¿‡åº”ç”¨å•†åº—è¿›è¡Œä¸‹è½½</p></li><li><p>web app manifestï¼Œåœ¨ä¸€ä¸ª <strong>JSON æ–‡æœ¬æ–‡ä»¶</strong>ä¸­æä¾›æœ‰å…³åº”ç”¨ç¨‹åºçš„ä¿¡æ¯ï¼ˆå¦‚åç§°ã€ä½œè€…ã€å›¾æ ‡å’Œæè¿°ï¼‰</p></li><li><p>ä¼ ç»Ÿçš„ web app å…¥å£ï¼š</p><ol><li><p>ç½‘å€</p></li><li><p>ä¹¦ç­¾ï¼Œæ”¶è—å¤¹</p></li><li><p>ç›´æ¥æœç´¢</p></li></ol></li><li><p>Web app manifest</p><ul><li>å¯ä»¥æ·»åŠ åˆ°æ¡Œé¢ï¼Œæœ‰å”¯ä¸€çš„å›¾æ ‡å’Œåç§°</li><li>æœ‰å¯åŠ¨æ—¶ç•Œé¢ï¼Œé¿å…ç”Ÿç¡¬çš„è¿‡æ¸¡</li><li>éšè—æµè§ˆå™¨ç›¸å…³çš„ UIï¼Œæ¯”å¦‚åœ°å€æ ç­‰</li></ul></li></ul><h3 id="ä½¿ç”¨æ­¥éª¤"><a href="#ä½¿ç”¨æ­¥éª¤" class="headerlink" title="ä½¿ç”¨æ­¥éª¤"></a>ä½¿ç”¨æ­¥éª¤</h3><ol><li><p>é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª manifes.json æ–‡ä»¶</p></li><li><p>åœ¨ index.html ä¸­å¼•å…¥ manifes.json æ–‡ä»¶</p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"manifest"</span> <span class="attr">href</span>=<span class="string">"manifest.json"</span> /&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨ manifest.json æ–‡ä»¶ä¸­æä¾›å¸¸è§çš„é…ç½®</p></li><li><p>éœ€è¦åœ¨ https åè®®æˆ– <a href="http://localhost" target="_blank" rel="noopener">http://localhost</a> ä¸‹è®¿é—®é¡¹ç›®</p></li></ol><h3 id="å¸¸è§é…ç½®"><a href="#å¸¸è§é…ç½®" class="headerlink" title="å¸¸è§é…ç½®"></a>å¸¸è§é…ç½®</h3><ul><li>name<ul><li>åº”ç”¨çš„åç§°</li><li>ç”¨æˆ·å®‰è£…æ¨ªå¹…æç¤ºçš„åç§°</li><li>å¯åŠ¨ç”»é¢ä¸­çš„æ–‡å­—</li></ul></li><li>short_name<ul><li>åº”ç”¨çš„çŸ­åç§°</li><li>ä¸»å±å¹•æ˜¾ç¤º</li></ul></li><li>start_url<ul><li>è®¾å¤‡å¯åŠ¨åº”ç”¨ç¨‹åºæ—¶åŠ è½½çš„ url</li><li>ç»å¯¹è·¯å¾„ / ç›¸å¯¹è·¯å¾„</li></ul></li><li>iconsï¼šå›¾æ ‡å¯¹è±¡æ•°ç»„<ul><li>ä¸€èˆ¬é… 144x144</li></ul></li><li>background_colorï¼šå¯åŠ¨åŠ¨ç”»çš„èƒŒæ™¯é¢œè‰²</li><li>theme_colorï¼šåº”ç”¨ç¨‹åºçš„ä¸»é¢˜é¢œè‰²</li><li>displayï¼šapp æ˜¾ç¤ºæ¨¡å¼<ul><li>fullscreen</li><li><strong>standalone</strong></li><li>minimal-ui</li></ul></li></ul><h2 id="service-worker"><a href="#service-worker" class="headerlink" title="service worker"></a>service worker</h2><ul><li>ä¸€ä¸ªæ ‡å‡†çš„ PWA ç¨‹åºï¼Œå¿…é¡»åŒ…å« 3 ä¸ªéƒ¨åˆ†<ul><li>https æœåŠ¡å™¨æˆ–è€… <a href="http://localhost" target="_blank" rel="noopener">http://localhost</a></li><li>manifest.json</li><li>service worker</li></ul></li><li>W3C ç»„ç»‡åœ¨ 14 å¹´ 5 æœˆæå‡º service worker è¿™æ ·ä¸€ä¸ª HTML5 APIï¼Œä¸»è¦ç”¨æ¥åšæŒä¹…çš„ç¦»çº¿ç¼“å­˜</li><li>å‰ç«¯æœ‰å¾ˆå¤šæ€§èƒ½ä¼˜åŒ–æ‰‹æ®µï¼ˆå¿…é¡»è”ç½‘ï¼‰<ul><li>CDN</li><li>CSS Sprite</li><li>æ–‡ä»¶çš„åˆå¹¶å‹ç¼©</li><li>å¼‚æ­¥åŠ è½½</li><li>èµ„æºç¼“å­˜</li></ul></li><li>service worker å…è®¸ web åº”ç”¨åœ¨ç½‘ç»œç¯å¢ƒæ¯”è¾ƒå·®æˆ–è€…æ˜¯ç¦»çº¿çš„ç¯å¢ƒä¸‹ä¾æ—§å¯ä»¥ä½¿ç”¨</li><li>service worker å¯ä»¥æå¤§çš„æå‡ web app çš„ç”¨æˆ·ä½“éªŒ</li><li>service worker  æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ worker çº¿ç¨‹ï¼Œç‹¬ç«‹äºå½“å‰ç½‘é¡µè¿›ç¨‹ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„ web worker</li></ul><h3 id="web-worker"><a href="#web-worker" class="headerlink" title="web worker"></a>web worker</h3><h4 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h4><ul><li>æµè§ˆå™¨ä¸­çš„ JavaScript éƒ½æ˜¯è¿è¡Œåœ¨ä¸€ä¸ªå•ä¸€ä¸»çº¿ç¨‹ä¸Šçš„ï¼Œåœ¨åŒä¸€æ—¶é—´å†…åªèƒ½åšä¸€ä»¶äº‹</li><li>éšç€ web ä¸šåŠ¡ä¸æ–­å¤æ‚ï¼Œé€æ¸åœ¨ JavaScript ä¸­åŠ äº†å¾ˆå¤šå¤æ‚è¿ç®—è¿‡ç¨‹ï¼Œå¦‚æœåœ¨ä¸»çº¿ç¨‹ä¸­è®¡ç®—ï¼Œä¼šé€ æˆæ€§èƒ½é—®é¢˜</li><li>W3c æä¾› web worker çš„ APIï¼Œweb worker è„±ç¦»åœ¨ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œå°†å¤æ‚çš„åŠŸèƒ½ç‹¬ç«‹äºä¸»çº¿ç¨‹</li><li>å®Œæˆåé€šè¿‡ postMessage æ–¹æ³•å‘Šè¯‰ä¸»çº¿ç¨‹</li><li>web worker æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿è¡Œç¯å¢ƒï¼Œä¸èƒ½æ“ä½œ DOM å’Œ BOM</li></ul><h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><ol><li>åˆ›å»º</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> worker = <span class="keyword">new</span> Worker(<span class="string">'work.js'</span>)</span><br></pre></td></tr></table></figure><ol start="2"><li><p>æ‰§è¡Œå¤æ‚è®¡ç®—</p></li><li><p>é€šçŸ¥ä¸»çº¿ç¨‹</p></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">self.postMessage(msg)</span><br></pre></td></tr></table></figure><ol start="4"><li>ä¸»çº¿ç¨‹ç›‘å¬æ¶ˆæ¯</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">worker.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">msg</span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure><h3 id="service-worker-åŸºæœ¬ä»‹ç»"><a href="#service-worker-åŸºæœ¬ä»‹ç»" class="headerlink" title="service worker åŸºæœ¬ä»‹ç»"></a>service worker åŸºæœ¬ä»‹ç»</h3><ul><li>web worker æ˜¯ä¸´æ—¶çš„ï¼Œæ— æ³•æ“ä½œç¼“å­˜ï¼Œæ— æ³•æŒä¹…å­˜å‚¨</li><li>service worker ä¸€æ—¦è¢« installï¼Œå°±æ°¸è¿œå­˜åœ¨ï¼Œé™¤éè¢«æ‰‹åŠ¨ unregister</li><li>ç”¨åˆ°çš„æ—¶å€™å¯ä»¥ç›´æ¥å”¤é†’ï¼Œä¸ç”¨çš„æ—¶å€™è‡ªåŠ¨ç¡çœ </li><li>å¯ç¼–ç¨‹æ‹¦æˆªä»£ç†è¯·æ±‚å’Œè¿”å›ï¼Œç¼“å­˜æ–‡ä»¶ï¼Œç¼“å­˜çš„æ–‡ä»¶å¯ä»¥è¢«ç½‘é¡µè¿›ç¨‹å–åˆ°ï¼ˆåŒ…æ‹¬ç½‘ç»œç¦»çº¿çŠ¶æ€ï¼‰</li><li>ç¦»çº¿å†…å®¹å¼€å‘è€…å¯æ§</li><li>å¿…é¡»åœ¨ HTTPS ç¯å¢ƒä¸‹æ‰èƒ½å·¥ä½œ</li><li>å¼‚æ­¥å®ç°ï¼Œå†…éƒ¨å¤§éƒ½æ˜¯é€šè¿‡ Promise å®ç°</li></ul><p>![image-20200524233840196](/Users/wuziyan/Library/Application Support/typora-user-images/image-20200524233840196.png)</p><h3 id="service-worker-ä½¿ç”¨æ­¥éª¤"><a href="#service-worker-ä½¿ç”¨æ­¥éª¤" class="headerlink" title="service worker ä½¿ç”¨æ­¥éª¤"></a>service worker ä½¿ç”¨æ­¥éª¤</h3><ol><li>åœ¨ window.onload ä¸­æ³¨å†Œ service workerï¼Œé˜²æ­¢ä¸å…¶ä»–èµ„æºç«äº‰</li><li>navigator å¯¹è±¡ä¸­å†…ç½®äº† serviceWorker å±æ€§</li><li>service worker åœ¨è€ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸­ä¸æ”¯æŒï¼Œéœ€è¦è¿›è¡Œæµè§ˆå™¨å…¼å®¹ if (â€˜serviceWorkerâ€™ in navigator) {}</li><li>æ³¨å†Œ service worker navigator.serviceWorker.register(â€˜./sw.jsâ€™)ï¼Œè¿”å›ä¸€ä¸ª promise å¯¹è±¡</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">'serviceWorker'</span> <span class="keyword">in</span> navigator) &#123;</span><br><span class="line">    navigator.serviceWorker</span><br><span class="line">    .register(<span class="string">'./sw.js'</span>)</span><br><span class="line">    .then(<span class="function"><span class="params">resitration</span> =&gt;</span> &#123;<span class="built_in">console</span>.log(resitration)&#125;)</span><br><span class="line">    .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="service-worker-ç”Ÿå‘½å‘¨æœŸäº‹ä»¶"><a href="#service-worker-ç”Ÿå‘½å‘¨æœŸäº‹ä»¶" class="headerlink" title="service worker ç”Ÿå‘½å‘¨æœŸäº‹ä»¶"></a>service worker ç”Ÿå‘½å‘¨æœŸäº‹ä»¶</h3><ul><li>Install äº‹ä»¶<ul><li>æ³¨å†ŒæˆåŠŸè§¦å‘</li><li>ç”¨äºç¼“å­˜èµ„æº</li></ul></li><li>activate äº‹ä»¶<ul><li>æ¿€æ´»æ—¶å€™è§¦å‘</li><li>ç”¨äºåˆ é™¤é™ˆæ—§èµ„æº</li></ul></li><li>fetch äº‹ä»¶<ul><li>å‘é€è¯·æ±‚æ—¶å€™è§¦å‘</li><li>ç”¨äºæ“ä½œç¼“å­˜æˆ–è€…è¯»å–ç½‘ç»œèµ„æº</li></ul></li></ul><hr><ul><li>sw.js æ”¹å˜ï¼Œinstall äº‹ä»¶é‡æ–°è§¦å‘</li><li>activate äº‹ä»¶åœ¨ install äº‹ä»¶åè§¦å‘<ul><li>ä½†å·²å­˜åœ¨ service worker äº†ï¼Œé‚£ä¹ˆå°±å¤„äºç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°å½“å‰ service worker ç»ˆæ­¢</li><li>å¯ä»¥é€šè¿‡ self.skipWaiting() æ–¹æ³•è·³è¿‡ç­‰å¾…ï¼Œè¿”å›ä¸€ä¸ª promise å¯¹è±¡</li><li>event.waitUnitl(promise å¯¹è±¡)<ul><li>promise å¯¹è±¡æ‰§è¡Œç»“æŸåæ‰ç»“æŸå½“å‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°</li><li>é˜²æ­¢æµè§ˆå™¨åœ¨å¼‚æ­¥æ“ä½œå‰åœæ­¢ç”Ÿå‘½å‘¨æœŸ</li></ul></li></ul></li><li>Service worker æ¿€æ´»åï¼Œä¼šåœ¨ä¸‹ä¸€æ¬¡åˆ·æ–°é¡µé¢çš„æ—¶å€™ç”Ÿæ•ˆ<ul><li>å¯ä»¥é€šè¿‡ self.clients.claim() ç«‹å³è·å–æ§åˆ¶æƒ</li></ul></li></ul><h2 id="promise"><a href="#promise" class="headerlink" title="promise"></a>promise</h2><ul><li>å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œæ¯”ä¼ ç»Ÿæ–¹æ¡ˆï¼ˆå›è°ƒå‡½æ•°å’Œäº‹ä»¶ï¼‰æ›´åˆç†</li><li>ä»¥é“¾å¼çš„æ–¹å¼è¿›è¡Œå¼‚æ­¥ç¼–ç¨‹ï¼Œè§£å†³å›è°ƒåœ°ç‹±</li><li>å¸¸ç”¨æ–¹æ³•<ul><li>Promise.resolve()</li><li>Promise.reject()</li><li>Promise.all()</li><li>Promise.race()</li></ul></li></ul><h2 id="async-await"><a href="#async-await" class="headerlink" title="async / await"></a>async / await</h2><ul><li>ä½¿å¼‚æ­¥æ“ä½œæ›´æ–¹ä¾¿</li><li>async ä¿®é¥°å‡½æ•°ï¼Œasync function fn() {}</li><li>await å‡½æ•°è¿”å›ä¸€ä¸ª promise å¯¹è±¡</li><li>await åªèƒ½å‡ºç°åœ¨ async å‡½æ•°ä¸­ï¼Œåé¢è·Ÿä¸€ä¸ª promise å¯¹è±¡ï¼Œç”¨äºè·å– promise å¯¹è±¡æˆåŠŸçš„ç»“æœ<ul><li>å¦‚æœä¸æ˜¯ promise å¯¹è±¡ï¼Œç›´æ¥è¿”å›å€¼</li></ul></li><li>await é˜»å¡ async å‡½æ•°æ‰§è¡Œ</li><li>await åé¢çš„ promise å¦‚æœæ²¡æœ‰æˆåŠŸï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œéœ€è¦ tryâ€¦catch</li></ul><h2 id="fetch-api"><a href="#fetch-api" class="headerlink" title="fetch api"></a>fetch api</h2><ul><li>fetch api æä¾›äº†ä¸€ä¸ª JavaScript æ¥å£ï¼Œç”¨äºè®¿é—®å’Œæ“çºµ HTTP ç®¡é“çš„éƒ¨åˆ†<ul><li>ä¾‹å¦‚è¯·æ±‚å’Œå“åº”</li></ul></li><li>service worker ä¸­å‘é€è¯·æ±‚åªèƒ½ç”¨ fetch api</li><li>fetch api æ˜¯åŸºäº promise å®ç°çš„</li><li>fetch(url, config) ç”¨äºå‘é€ http è¯·æ±‚ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«å“åº”ç»“æœçš„ promise å¯¹è±¡</li><li>response æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ•°æ®æµï¼Œéœ€è¦è°ƒç”¨ json() æ–¹æ³•è½¬æ¢æˆ json æ•°æ®</li><li>config å¸¸è§å‚æ•°<ul><li>bodyï¼šè®¾ç½®è¯·æ±‚ä½“</li><li>/headersï¼šè®¾ç½®è¯·æ±‚å¤´</li><li>methodï¼šè®¾ç½®è¯·æ±‚æ–¹å¼</li></ul></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> PWA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>14.Proxy</title>
      <link href="/2020/05/08/14-Proxy/"/>
      <url>/2020/05/08/14-Proxy/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><ul><li>åœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾ä¸€å±‚â€œæ‹¦æˆªâ€ï¼Œå¤–ç•Œå¯¹è¯¥å¯¹è±¡çš„è®¿é—®ï¼Œéƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆª</li><li>å› æ­¤æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™</li><li>Proxy å®é™…ä¸Šé‡è½½ï¼ˆoverloadï¼‰äº†ç‚¹è¿ç®—ç¬¦ï¼Œå³ç”¨è‡ªå·±çš„å®šä¹‰è¦†ç›–äº†è¯­è¨€çš„åŸå§‹å®šä¹‰</li></ul><h1 id="Proxy-å®ä¾‹çš„æ–¹æ³•"><a href="#Proxy-å®ä¾‹çš„æ–¹æ³•" class="headerlink" title="Proxy å®ä¾‹çš„æ–¹æ³•"></a>Proxy å®ä¾‹çš„æ–¹æ³•</h1><h1 id="Proxy-revocable"><a href="#Proxy-revocable" class="headerlink" title="Proxy.revocable()"></a>Proxy.revocable()</h1><h1 id="this-é—®é¢˜"><a href="#this-é—®é¢˜" class="headerlink" title="this é—®é¢˜"></a>this é—®é¢˜</h1><h1 id="å®ä¾‹ï¼šWeb-æœåŠ¡çš„å®¢æˆ·ç«¯"><a href="#å®ä¾‹ï¼šWeb-æœåŠ¡çš„å®¢æˆ·ç«¯" class="headerlink" title="å®ä¾‹ï¼šWeb æœåŠ¡çš„å®¢æˆ·ç«¯"></a>å®ä¾‹ï¼šWeb æœåŠ¡çš„å®¢æˆ·ç«¯</h1>]]></content>
      
      
      
        <tags>
            
            <tag> ECMAScript 6 å…¥é—¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>canvas å…¥é—¨</title>
      <link href="/2020/04/25/canvas%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83/"/>
      <url>/2020/04/25/canvas%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83/</url>
      
        <content type="html"><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>H5 æ–°å¢çš„æ ‡ç­¾ï¼Œå¯ä»¥ç”¨è„šæœ¬ï¼ˆjsï¼‰åœ¨å…¶ä¸­ç»˜åˆ¶å›¾åƒçš„ HTML å…ƒç´ ã€‚</p><h1 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h1><h2 id="å…ƒç´ "><a href="#å…ƒç´ " class="headerlink" title="å…ƒç´ "></a>å…ƒç´ </h2><p>å¯ä»¥ç”¨ css è®¾ç½®å±æ€§ï¼Œä½†æ¯”ä¾‹ä¸ä¸€è‡´ä¼šæ‰­æ›²ï¼Œå»ºè®®ç›´æ¥ç”¨ width height å±æ€§</p><p>é»˜è®¤ width 300 height 150 å•ä½ px</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span>&gt;</span>æ›¿æ¢å†…å®¹<span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸æ”¯æŒ canvas çš„æµè§ˆå™¨ä¼šæ˜¾ç¤ºæ›¿æ¢å†…å®¹ï¼Œå°¾æ ‡ç­¾ä¸å¯çœç•¥</p><h2 id="æ¸²æŸ“ä¸Šä¸‹æ–‡"><a href="#æ¸²æŸ“ä¸Šä¸‹æ–‡" class="headerlink" title="æ¸²æŸ“ä¸Šä¸‹æ–‡"></a>æ¸²æŸ“ä¸Šä¸‹æ–‡</h2><p><code>&lt;canvas&gt;</code> åˆ›å»ºä¸€ä¸ªå›ºå®šå¤§å°çš„ç”»å¸ƒï¼Œå…¬å¼€ä¸€ä¸ªæˆ–å¤šä¸ª<strong>æ¸²æŸ“ä¸Šä¸‹æ–‡</strong>ï¼ˆç”»ç¬”ï¼‰ï¼Œä½¿ç”¨<strong>æ¸²æŸ“ä¸Šä¸‹æ–‡</strong>æ¥ç»˜åˆ¶å’Œå¤„ç†è¦å±•ç¤ºçš„å†…å®¹ã€‚</p><p>ä¸»è¦ä½¿ç”¨ 2D ä¸Šä¸‹æ–‡ï¼ŒWebGL ä½¿ç”¨äº†åŸºäº OpenGL ES çš„ 3D ä¸Šä¸‹æ–‡</p><h2 id="æ£€æµ‹æ”¯æŒç‰¹æ€§"><a href="#æ£€æµ‹æ”¯æŒç‰¹æ€§" class="headerlink" title="æ£€æµ‹æ”¯æŒç‰¹æ€§"></a>æ£€æµ‹æ”¯æŒç‰¹æ€§</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'myCanvas'</span>);</span><br><span class="line"><span class="keyword">if</span> (canvas.getContext) &#123;</span><br><span class="line"><span class="keyword">var</span> ctx = canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line">  ...</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;sr</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ç»˜åˆ¶å½¢çŠ¶"><a href="#ç»˜åˆ¶å½¢çŠ¶" class="headerlink" title="ç»˜åˆ¶å½¢çŠ¶"></a>ç»˜åˆ¶å½¢çŠ¶</h1><h2 id="ç»˜åˆ¶çŸ©å½¢"><a href="#ç»˜åˆ¶çŸ©å½¢" class="headerlink" title="ç»˜åˆ¶çŸ©å½¢"></a>ç»˜åˆ¶çŸ©å½¢</h2><p>åŸç”Ÿåªæ”¯æŒçŸ©å½¢ç»˜åˆ¶ï¼Œå…¶ä»–æ‰€æœ‰å›¾å½¢éƒ½è‡³å°‘éœ€è¦ç”Ÿæˆä¸€ç§è·¯å¾„ï¼ˆpathï¼‰</p><ul><li><code>fillRect(x, y, width, height)</code> å¡«å……</li><li><code>strokeRect(x, y,width, height)</code> ç©ºå¿ƒ</li><li><code>clearRect(x, y, width, height)</code> æ¸…é™¤åŒºåŸŸ</li></ul><h2 id="ç»˜åˆ¶è·¯å¾„"><a href="#ç»˜åˆ¶è·¯å¾„" class="headerlink" title="ç»˜åˆ¶è·¯å¾„"></a>ç»˜åˆ¶è·¯å¾„</h2><p><strong>è·¯å¾„</strong>æ˜¯é€šè¿‡ä¸åŒé¢œè‰²å’Œå®½åº¦çš„çº¿æ®µæˆ–æ›²çº¿ç›¸è¿å½¢æˆçš„ä¸åŒå½¢çŠ¶çš„ç‚¹çš„é›†åˆï¼Œæ¯ä¸ªè·¯å¾„éƒ½æ˜¯é—­åˆçš„ã€‚</p><p><strong>è·¯å¾„ç»˜åˆ¶å›¾å½¢æ­¥éª¤ï¼š</strong></p><ol><li>åˆ›å»ºè·¯å¾„èµ·å§‹ç‚¹</li><li>è°ƒç”¨ç»˜åˆ¶æ–¹æ³•ç»˜åˆ¶è·¯å¾„</li><li>å°é—­è·¯å¾„</li><li>é€šè¿‡æè¾¹æˆ–å¡«å……è·¯å¾„åŒºåŸŸæ¥æ¸²æŸ“å›¾å½¢</li></ol><p><strong>ç»˜åˆ¶æ–¹æ³•ï¼š</strong></p><ul><li><code>beginPath()</code> åˆ›å»ºè·¯å¾„ï¼Œç”»ç¬”æŒ‡å‘è·¯å¾„</li><li><code>moveTo(x, y)</code> ç”»ç¬”ç§»åŠ¨åˆ°åæ ‡ï¼Œè®¾ç½®è·¯å¾„èµ·å§‹ç‚¹</li><li><code>closePath()</code> é—­åˆè·¯å¾„ï¼ˆè‡ªåŠ¨è¿æ¥ç»ˆç‚¹å’Œèµ·å§‹ç‚¹ï¼‰ï¼Œç”»ç¬”æŒ‡å‘ä¸Šä¸‹æ–‡</li><li><code>stroke()</code> çº¿æ¡</li><li><code>fill()</code> å¡«å……</li></ul><p><strong>çº¿æ®µ</strong></p><ul><li><code>lineTo(x, y)</code></li></ul><p><strong>å¼§å½¢</strong></p><ul><li><code>arc(x, y, r, startAngle, endAngle, anticlockwise)</code> (x, y) åœ†å¿ƒï¼Œr åŠå¾„ï¼ŒstartAngle å¼§åº¦åˆ° endAngle å¼§åº¦ç»“æŸï¼Œanticlockwise true é€†æ—¶é’ˆï¼Œfalseï¼ˆé»˜è®¤ï¼‰é¡ºæ—¶é’ˆ</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è§’åº¦æ¢ç®—å¼§åº¦</span></span><br><span class="line"><span class="keyword">const</span> radians = (<span class="built_in">Math</span>.PI / <span class="number">180</span>) * degrees</span><br></pre></td></tr></table></figure><ul><li><code>arcTo(x1, y1, x2, y2, radius)</code>æ ¹æ®ç»™å®šçš„æ§åˆ¶ç‚¹å’ŒåŠå¾„ç”»å¼§ï¼Œç›´çº¿è¿æ¥ä¸¤ä¸ªç‚¹</li></ul><p>ç”»ä¸€æ¡ä¸èµ·å§‹ç‚¹-&gt;(x1, y1)ï¼Œ(x1, y1)-&gt;(x2, y2) è¿™ä¸¤æ¡åˆ‡çº¿ç›¸åˆ‡çš„åœ†å¼§</p><h2 id="ç»˜åˆ¶è´å¡å°”æ›²çº¿"><a href="#ç»˜åˆ¶è´å¡å°”æ›²çº¿" class="headerlink" title="ç»˜åˆ¶è´å¡å°”æ›²çº¿"></a>ç»˜åˆ¶è´å¡å°”æ›²çº¿</h2><p><strong>äºŒæ¬¡è´å¡å°”æ›²çº¿</strong></p><ul><li><code>quadraticCurveTo(cp1x, cp1y, x, y)</code> (cp1x, cp1y) æ§åˆ¶ç‚¹ (x, y) ç»“æŸç‚¹</li></ul><p><strong>ä¸‰æ¬¡æ¬¡è´å¡å°”æ›²çº¿</strong></p><p><code>quadraticCurveTo(cp1x, cp1y, cp2x, cp2y, x, y)</code> </p><h2 id="æ·»åŠ æ ·å¼å’Œé¢œè‰²"><a href="#æ·»åŠ æ ·å¼å’Œé¢œè‰²" class="headerlink" title="æ·»åŠ æ ·å¼å’Œé¢œè‰²"></a>æ·»åŠ æ ·å¼å’Œé¢œè‰²</h2><ul><li><code>fillStyle = color</code> å¡«å……é¢œè‰²</li><li><code>strokeStyle = color</code> è½®å»“é¢œè‰²</li></ul><p>colorï¼šè¡¨ç¤º css é¢œè‰²å€¼çš„å­—ç¬¦ä¸²ã€æ¸å˜å¯¹è±¡ã€å›¾æ¡ˆå¯¹è±¡ã€‚é»˜è®¤é»‘è‰²ã€‚è®¾ç½®åä¿æŒç›´åˆ°é‡æ–°è®¾ç½®ã€‚</p><ul><li><p><code>globalAlpha = transparencyValue</code>å…¨å±€é€æ˜åº¦</p></li><li><p><code>lineWidth = 1.0</code>  çº¿å®½ï¼Œé»˜è®¤ 1.0</p></li><li><p><code>lineCap = type</code> çº¿æ¡æœ«ç«¯æ ·å¼</p><ul><li>butt æ–¹å½¢</li><li>round åœ†å½¢ </li><li>squareæ–¹å½¢ï¼Œå¤šäº†ä¸€ä¸ªé«˜åº¦æ˜¯çº¿æ®µåšåº¦ä¸€åŠçš„çŸ©å½¢</li></ul></li><li><p><code>lineJoin = type</code> åŒä¸€ä¸ª path å†…ï¼Œçº¿æ¡ä¸çº¿æ¡ä¹‹é—´æ¥åˆå¤„çš„æ ·å¼</p><ul><li>round åœ†</li><li>bevel å¹³</li><li>miter å°–ï¼ˆé»˜è®¤ï¼‰</li></ul></li><li><p>è™šçº¿</p><ul><li><code>setLineDash([å®ç°é•¿åº¦ï¼Œé—´éš™é•¿åº¦])</code></li><li><code>lineDashOffset</code> åç§»é‡</li></ul></li></ul><h1 id="ç»˜åˆ¶æ–‡æœ¬"><a href="#ç»˜åˆ¶æ–‡æœ¬" class="headerlink" title="ç»˜åˆ¶æ–‡æœ¬"></a>ç»˜åˆ¶æ–‡æœ¬</h1><ul><li><code>fillText(text, x, y [, maxWidth])</code> åœ¨ (x, y) å¡«å……æ–‡æœ¬ï¼Œæœ€å¤§å®½åº¦å¯é€‰</li><li><code>strokeText(text, x, y [, maxWidth])</code> åœ¨ (x, y) ç»˜åˆ¶è¾¹æ¡†ï¼Œæœ€å¤§å®½åº¦å¯é€‰</li></ul><p><strong>æ ·å¼</strong></p><ul><li><code>font = value</code> æ–‡æœ¬æ ·å¼ï¼ŒåŒ css font å±æ€§</li><li><code>textAlign = value</code> å¯¹é½é€‰é¡¹<ul><li>startï¼ˆé»˜è®¤ï¼‰</li><li>end</li><li>left</li><li>right</li><li>center</li></ul></li><li><code>textBaseline = value</code> åŸºçº¿å¯¹é½é€‰é¡¹<ul><li>top</li><li>hanging</li><li>middle</li><li>alphabeticï¼ˆé»˜è®¤ï¼‰</li><li>ideographic</li><li>bottom</li></ul></li><li><code>direction = value</code> æ–‡æœ¬æ–¹å‘<ul><li>ltr</li><li>trl</li><li>Inheritï¼ˆé»˜è®¤ï¼‰</li></ul></li></ul><h1 id="ç»˜åˆ¶å›¾ç‰‡"><a href="#ç»˜åˆ¶å›¾ç‰‡" class="headerlink" title="ç»˜åˆ¶å›¾ç‰‡"></a>ç»˜åˆ¶å›¾ç‰‡</h1><h2 id="ç”±é›¶å¼€å§‹åˆ›å»ºå›¾ç‰‡"><a href="#ç”±é›¶å¼€å§‹åˆ›å»ºå›¾ç‰‡" class="headerlink" title="ç”±é›¶å¼€å§‹åˆ›å»ºå›¾ç‰‡"></a>ç”±é›¶å¼€å§‹åˆ›å»ºå›¾ç‰‡</h2><ul><li><code>drawImage(img, x, y)</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> img = <span class="keyword">new</span> Image();</span><br><span class="line">img.src = <span class="string">'myImage.png'</span>;</span><br><span class="line">img.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// åŠ è½½åå†ç»˜åˆ¶</span></span><br><span class="line">  ctx.drawImage(img, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>img å¯ä»¥æ˜¯DOMå…ƒç´ </strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> img = <span class="built_in">document</span>.querySelector(<span class="string">"img"</span>);</span><br><span class="line">ctx.drawImage(img, <span class="number">0</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure><ul><li><code>drawImage(img, x, y, width, height)</code> å›¾ç‰‡ç¼©æ”¾</li><li><code>drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)</code> (sx, sy) åŸå›¾åƒä¸­çš„ç‚¹ï¼Œå‰ªè£ (sx+sWidth, sy+sHeight)ï¼›ç»˜åˆ¶åˆ°ç”»å¸ƒï¼ˆdx, dyï¼‰ä¸Š</li></ul><h1 id="çŠ¶æ€çš„ä¿å­˜å’Œæ¢å¤"><a href="#çŠ¶æ€çš„ä¿å­˜å’Œæ¢å¤" class="headerlink" title="çŠ¶æ€çš„ä¿å­˜å’Œæ¢å¤"></a>çŠ¶æ€çš„ä¿å­˜å’Œæ¢å¤</h1><ul><li><code>save()</code> å­˜å‚¨åœ¨æ ˆä¸­ï¼Œå¯ä»¥å¤šæ¬¡è°ƒç”¨ï¼Œç±»ä¼¼äº push()</li><li><code>restore()</code> æ¢å¤ï¼Œå¯ä»¥å¤šæ¬¡è°ƒç”¨ï¼Œç±»ä¼¼äº pop()</li></ul><h1 id="å˜å½¢"><a href="#å˜å½¢" class="headerlink" title="å˜å½¢"></a>å˜å½¢</h1><p>ä½¿ç”¨å‰å…ˆä¿å­˜çŠ¶æ€ä¾¿äºæ¢å¤</p><ul><li><code>translate(x, y)</code> ç§»åŠ¨åŸç‚¹åˆ°(x, y)</li><li><code>rotate(angle)</code> æ—‹è½¬åæ ‡è½´ï¼Œé¡ºæŒ‡é’ˆ</li><li><code>scale(x, y)</code> x è½´å’Œ y è½´çš„ç¼©æ”¾å› å­</li><li><code>transform(a, b, c, d, e, f)</code>  å˜å½¢çŸ©é˜µ</li></ul><h1 id="åˆæˆ"><a href="#åˆæˆ" class="headerlink" title="åˆæˆ"></a>åˆæˆ</h1><ul><li><code>globalCompositeOperation = type</code><ul><li>é»˜è®¤ï¼šæ–°å›¾åƒ+è€å›¾åƒï¼ˆæ–°å›¾åƒåœ¨è€å›¾åƒä¸Šé¢ï¼‰</li><li>source-inï¼šæ–°å›¾åƒçš„é‡å éƒ¨åˆ†</li><li>Source-outï¼šæ–°å›¾åƒçš„æ²¡é‡å éƒ¨åˆ†</li><li>source-atopï¼šè€å›¾åƒ+é‡å éƒ¨åˆ†</li><li>destination-overï¼šæ–°å›¾åƒ+è€å›¾åƒï¼ˆè€å›¾åƒåœ¨æ–°å›¾åƒä¸Šé¢ï¼‰</li><li>destination-inï¼šè€å›¾åƒçš„é‡å éƒ¨åˆ†</li><li>destination-outï¼šè€å›¾åƒçš„æ²¡é‡å éƒ¨åˆ†</li><li>destination-atopï¼šè€å›¾åƒé‡å éƒ¨åˆ†+æ–°å›¾åƒï¼ˆæ–°å›¾åƒåœ¨è€å›¾åƒä¸‹é¢ï¼‰</li><li>lighterï¼šæ–°å›¾åƒ+è€å›¾åƒï¼ˆé‡å åŒºåŸŸé¢œè‰²å åŠ ï¼‰</li><li>darkenï¼šæ–°å›¾åƒ+è€å›¾åƒï¼ˆé‡å åŒºåŸŸé¢œè‰²å–æœ€æ·±ï¼‰</li><li>lightenï¼šæ–°å›¾åƒ+è€å›¾åƒï¼ˆé‡å åŒºåŸŸé¢œè‰²å–æœ€äº®ï¼‰</li><li>xorï¼šé‡å éƒ¨åˆ†é€æ˜</li><li>copyï¼šæ–°å›¾åƒä¿ç•™ï¼Œæ¸…æ¥šå…¶ä½™éƒ¨åˆ†</li></ul></li></ul><h1 id="è£å‰ªè·¯å¾„"><a href="#è£å‰ªè·¯å¾„" class="headerlink" title="è£å‰ªè·¯å¾„"></a>è£å‰ªè·¯å¾„</h1><ul><li><code>clip()</code> é®ç½©ï¼Œåªæ˜¾ç¤ºè·¯å¾„å†…çš„åŒºåŸŸ</li></ul><h1 id="åŠ¨ç”»"><a href="#åŠ¨ç”»" class="headerlink" title="åŠ¨ç”»"></a>åŠ¨ç”»</h1><h2 id="åŸºæœ¬æ­¥éª¤"><a href="#åŸºæœ¬æ­¥éª¤" class="headerlink" title="åŸºæœ¬æ­¥éª¤"></a>åŸºæœ¬æ­¥éª¤</h2><ol><li>æ¸…ç©º canvas<ul><li>ç»˜åˆ¶æ¯ä¸€å¸§åŠ¨ç”»å‰ï¼Œè¦æ¸…ç©ºæ‰€æœ‰</li><li>clearRect()</li></ul></li><li>ä¿å­˜ canvas çŠ¶æ€</li><li>æ§åˆ¶åŠ¨ç”»å›¾å½¢<ul><li>çœŸæ­£çš„ç»˜åˆ¶åŠ¨ç”»å¸§</li></ul></li><li>æ¢å¤ canvas çŠ¶æ€</li></ol><h2 id="æ§åˆ¶åŠ¨ç”»"><a href="#æ§åˆ¶åŠ¨ç”»" class="headerlink" title="æ§åˆ¶åŠ¨ç”»"></a>æ§åˆ¶åŠ¨ç”»</h2><ul><li><code>setInterval()</code></li><li><code>setTimeout()</code></li><li><code>requestAnimationFrame()</code></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> åŠ¨ç”» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é«˜å¾·åœ°å›¾</title>
      <link href="/2020/04/22/%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE/"/>
      <url>/2020/04/22/%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>hexoä¸»é¢˜</title>
      <link href="/2020/04/10/hexo%E4%B8%BB%E9%A2%98/"/>
      <url>/2020/04/10/hexo%E4%B8%BB%E9%A2%98/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>no-referrer-when-downgrade</title>
      <link href="/2020/04/09/no-referrer-when-downgrade/"/>
      <url>/2020/04/09/no-referrer-when-downgrade/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
        <tags>
            
            <tag> ç½‘ç»œ </tag>
            
            <tag> å·¥ä½œæ—¥å¸¸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dataExploreræ‰“åŒ…ä¼˜åŒ–</title>
      <link href="/2020/04/07/dataExplorer%E6%89%93%E5%8C%85%E4%BC%98%E5%8C%96/"/>
      <url>/2020/04/07/dataExplorer%E6%89%93%E5%8C%85%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h1 id="æˆæœ"><a href="#æˆæœ" class="headerlink" title="æˆæœ"></a>æˆæœ</h1><h3 id="ä¼˜åŒ–å‰"><a href="#ä¼˜åŒ–å‰" class="headerlink" title="ä¼˜åŒ–å‰"></a>ä¼˜åŒ–å‰</h3><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200403192753922.png" alt="image-20200403192753922" style="zoom:50%;"><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200403192922295.png" alt="image-20200403192922295" style="zoom:50%;"><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200403194220981.png" alt="image-20200403194220981" style="zoom:50%;"><h3 id="ä¼˜åŒ–å"><a href="#ä¼˜åŒ–å" class="headerlink" title="ä¼˜åŒ–å"></a>ä¼˜åŒ–å</h3><h1 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h1><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack-bundle-analyzer</span><br></pre></td></tr></table></figure><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>å› ä¸ºæ˜¯ vue-cli 3.0ï¼Œæ²¡æœ‰ webpack é…ç½®æ–‡ä»¶äº†ï¼Œåœ¨æ ¹ç›®å½•ä¸‹è‡ªå·±æ‰‹åŠ¨æ–°å»º <code>vue.config.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  chainWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    config</span><br><span class="line">    .plugin(<span class="string">'webpack-bundle-analyzer'</span>)</span><br><span class="line">    .use(<span class="built_in">require</span>(<span class="string">'webpack-bundle-analyzer'</span>).BundleAnalyzerPlugin)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹"><a href="#æŸ¥çœ‹" class="headerlink" title="æŸ¥çœ‹"></a>æŸ¥çœ‹</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run server</span><br></pre></td></tr></table></figure><p>é‡æ–°å¯åŠ¨ä¹‹åè®¿é—® <a href="http://127.0.0.1:8888" target="_blank" rel="noopener">http://127.0.0.1:8888</a> å°±æ˜¯å¯è§†åŒ–çš„å›¾äº†</p><h1 id="Webpack-æ–‡ä»¶åˆ†ç¦»"><a href="#Webpack-æ–‡ä»¶åˆ†ç¦»" class="headerlink" title="Webpack æ–‡ä»¶åˆ†ç¦»"></a>Webpack æ–‡ä»¶åˆ†ç¦»</h1><p>Webpack æ–‡ä»¶åˆ†ç¦»åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯ Bundle çš„åˆ†ç¦»ï¼Œä¸€ä¸ªæ˜¯ Code ä»£ç çš„åˆ†ç¦»:</p><ul><li>Bundle splitting: å®é™…ä¸Šå°±æ˜¯åˆ›å»ºå¤šä¸ªæ›´å°çš„æ–‡ä»¶ï¼Œå¹¶è¡ŒåŠ è½½ï¼Œä»¥è·å¾—æ›´å¥½çš„ç¼“å­˜æ•ˆæœï¼›ä¸»è¦çš„ä½œç”¨å°±æ˜¯ä½¿æµè§ˆå™¨å¹¶è¡Œä¸‹è½½ï¼Œæé«˜ä¸‹è½½é€Ÿåº¦ã€‚å¹¶ä¸”è¿ç”¨æµè§ˆå™¨ç¼“å­˜ï¼Œåªæœ‰ä»£ç è¢«ä¿®æ”¹ï¼Œæ–‡ä»¶åä¸­çš„å“ˆå¸Œå€¼æ”¹å˜äº†æ‰ä¼šå»å†æ¬¡åŠ è½½ã€‚</li><li>Code splitting: åªåŠ è½½ç”¨æˆ·æœ€éœ€è¦çš„éƒ¨åˆ†ï¼Œå…¶ä½™çš„ä»£ç éƒ½éµä»æ‡’åŠ è½½çš„ç­–ç•¥ï¼›ä¸»è¦çš„ä½œç”¨å°±æ˜¯åŠ å¿«é¡µé¢åŠ è½½é€Ÿåº¦ï¼Œä¸åŠ è½½ä¸å¿…è¦åŠ è½½çš„ä¸œè¥¿ã€‚</li></ul><h2 id="Bundle-splitting"><a href="#Bundle-splitting" class="headerlink" title="Bundle splitting"></a>Bundle splitting</h2><h3 id="é…ç½®-1"><a href="#é…ç½®-1" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  chainWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    config</span><br><span class="line">    .plugin(<span class="string">'webpack-bundle-analyzer'</span>)</span><br><span class="line">    .use(<span class="built_in">require</span>(<span class="string">'webpack-bundle-analyzer'</span>).BundleAnalyzerPlugin)</span><br><span class="line">  &#125;,</span><br><span class="line">  configureWebpack: &#123;</span><br><span class="line">    optimization: &#123;</span><br><span class="line">        splitChunks: &#123;</span><br><span class="line">            chunks: <span class="string">'all'</span>,</span><br><span class="line">            maxInitialRequests: <span class="literal">Infinity</span>,</span><br><span class="line">            minSize: <span class="number">0</span>,</span><br><span class="line">            minChunks: <span class="number">1</span>,</span><br><span class="line">            cacheGroups: &#123;</span><br><span class="line">              commons: &#123;</span><br><span class="line">                test: <span class="regexp">/[\\/]node_modules[\\/]/</span>,</span><br><span class="line">                name(<span class="built_in">module</span>) &#123;</span><br><span class="line">                  <span class="keyword">const</span> packageName = <span class="built_in">module</span>.context.match(<span class="regexp">/[\\/]node_modules[\\/](.*?)([\\/]|$)/</span>)[<span class="number">1</span>];</span><br><span class="line">                  <span class="keyword">return</span> <span class="string">`modules.<span class="subst">$&#123;packageName.replace(<span class="string">'@'</span>, <span class="string">''</span>)&#125;</span>`</span>;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>é¦–å…ˆå¢åŠ  maxInitialRequests å¹¶è®¾ç½®æˆ Infinityï¼ŒæŒ‡å®šè¿™ä¸ªå…¥å£æ–‡ä»¶æœ€å¤§å¹¶è¡Œè¯·æ±‚æ•°</p><p>ç„¶åå°† minSize å’Œ minChunks åˆ†åˆ«è®¾ç½®æˆ 0 å’Œ 1ï¼Œå³ä½¿æ¨¡å—éå¸¸å°ä¹Ÿå°†å…¶æå–å‡ºæ¥ï¼Œå¹¶ä¸”è¿™ä¸ªæ¨¡å—çš„å¼•ç”¨æ¬¡æ•°åªæœ‰ 1 ä¹Ÿè¦æå–</p><p>æœ€åé…ç½®åŒ¹é…çš„ä¾èµ–ä»¥åŠåˆ†ç¦»å‡ºçš„æ–‡ä»¶åæ ¼å¼</p><p>å¦å¤–ï¼Œæˆ‘ä»¬è¿˜å°†è¿è¡Œæ—¶ä»£ç åˆ†ç¦»å‡ºæ¥ï¼Œè¿™å—ä»£ç è¿˜å¯ä»¥é…åˆ <strong>InlineManifestWebpackPlugin</strong> ç›´æ¥æ’å…¥åˆ° HTML æ–‡ä»¶ä¸­ã€‚è¿™é‡Œæˆ‘ä»¬å°†è¿™ä¸ªé…ç½®è®¾ç½®æˆ singleï¼Œå³å°†æ‰€æœ‰chunkçš„è¿è¡Œä»£ç æ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­</p></blockquote><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200407143915100.png" alt="image-20200407143915100" style="zoom:50%;"><p>ç°åœ¨å¯ä»¥çœ‹åˆ° app.js è¢«æ‹†è§£æˆå¾ˆå¤šä¸ªå•ç‹¬çš„åŒ…ï¼Œè¿™äº›åŒ…åœ¨åŠ è½½æ—¶å¯ä»¥å¹¶è¡Œä¸‹è½½ï¼Œæé«˜ä¸‹è½½é€Ÿåº¦ã€‚</p><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200407144235648.png" alt="image-20200407144235648" style="zoom:50%;"><h1 id="é€ä¸ªå‡»ç ´"><a href="#é€ä¸ªå‡»ç ´" class="headerlink" title="é€ä¸ªå‡»ç ´"></a>é€ä¸ªå‡»ç ´</h1><h2 id="Echarts"><a href="#Echarts" class="headerlink" title="Echarts"></a>Echarts</h2><p>é¡¹ç›®é‡Œç”¨åˆ°çš„åªæœ‰ bar è¿™ä¸ªå›¾å½¢ï¼Œæ‰€ä»¥æŒ‰éœ€è½½å…¥å³å¯ã€‚</p><ul><li><code>/src/plugins</code>  ä¸‹æ–°å»ºæ–‡ä»¶ <code>echarts.js</code>ï¼š</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> echarts <span class="keyword">from</span> <span class="string">'echarts/lib/echarts'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'echarts/lib/chart/bar'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'echarts/lib/component/legend'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> echarts</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨åˆ° Echarts çš„ç»„ä»¶ä¸­ï¼š</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> echarts <span class="keyword">from</span> <span class="string">'@/plugins/echarts'</span></span><br></pre></td></tr></table></figure><ul><li>2.52 M -&gt; 830.76 KB</li></ul><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200407144602273.png" alt="image-20200407144602273" style="zoom:50%;"><h2 id="monaco"><a href="#monaco" class="headerlink" title="monaco"></a>monaco</h2><p>è¿™ä¸ªæ˜¯ä»£ç ç¼–è¾‘å™¨ï¼Œç”¨åˆ°çš„åœ°æ–¹æ¯”è¾ƒå¤šï¼Œæœ¬æ¥æƒ³åƒ echarts ä¸€æ ·æŒ‰éœ€å¼•å…¥ï¼Œä½†æ˜¯å¼•å…¥å®Œä¹‹åä¾æ—§éå¸¸å¤§ï¼Œè€ƒè™‘ç”¨ CDN åŠ é€Ÿï¼Œå‚è€ƒï¼š</p><p><a href="https://github.com/microsoft/monaco-editor/blob/master/docs/integrate-amd-cross.md" target="_blank" rel="noopener">https://github.com/microsoft/monaco-editor/blob/master/docs/integrate-amd-cross.md</a></p><p><a href="https://www.cnblogs.com/XHappyness/p/9708102.html" target="_blank" rel="noopener">https://www.cnblogs.com/XHappyness/p/9708102.html</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install html-loader --save-dev</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.html</span></span><br><span class="line"></span><br><span class="line">    &lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"https://cdn.bootcss.com/monaco-editor/0.20.0/min/vs/loader.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">    &lt;script&gt;</span></span><br><span class="line"><span class="regexp">      require.config(&#123; paths: &#123; 'vs': 'https:/</span><span class="regexp">/cdn.bootcss.com/m</span>onaco-editor/<span class="number">0.20</span><span class="number">.0</span>/min/vs<span class="string">' &#125;&#125;);</span></span><br><span class="line"><span class="string">      window.MonacoEnvironment = &#123;</span></span><br><span class="line"><span class="string">        getWorkerUrl: function(workerId, label) &#123;</span></span><br><span class="line"><span class="string">          return `data:text/javascript;charset=utf-8,$&#123;encodeURIComponent(`</span></span><br><span class="line"><span class="string">            self.MonacoEnvironment = &#123;</span></span><br><span class="line"><span class="string">              baseUrl: '</span>https:<span class="comment">//cdn.bootcss.com/monaco-editor/0.20.0/min/'</span></span><br><span class="line">            &#125;;</span><br><span class="line">            importScripts(<span class="string">'https://cdn.bootcss.com/monaco-editor/0.20.0/min/vs/base/worker/workerMain.js'</span>);<span class="string">`</span></span><br><span class="line"><span class="string">          )&#125;`</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="built_in">require</span>([<span class="string">"vs/editor/editor.main"</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;);</span><br><span class="line">    &lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    Â·Â·Â·</span><br><span class="line">    chainWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">        config.module</span><br><span class="line">            .rule(<span class="string">'html'</span>)</span><br><span class="line">            .test(<span class="regexp">/\.html$/</span>)</span><br><span class="line">            .use(<span class="string">'html-loader'</span>)</span><br><span class="line">            .loader(<span class="string">'html-loader'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  Â·Â·Â·</span><br><span class="line">  configureWebpack: &#123;</span><br><span class="line">    ...</span><br><span class="line">    externals: &#123;</span><br><span class="line">      <span class="string">'monaco-editor'</span>: <span class="string">'monaco-editor'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŠ˜è…¾äº†å¤§åŠå¤©æ€»ç®—å¯ä»¥ï¼Œä½¿ç”¨çš„æ—¶å€™éœ€è¦ <code>window.monaco.editor.create(...)</code></p>]]></content>
      
      
      
        <tags>
            
            <tag> ä¼˜åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Performance Benchmarking and Optimizing Hyperledger Fabric Blockchain Platform</title>
      <link href="/2020/04/04/Performance-Benchmarking-and-Optimizing-Hyperledger-Fabric-Blockchain-Platform/"/>
      <url>/2020/04/04/Performance-Benchmarking-and-Optimizing-Hyperledger-Fabric-Blockchain-Platform/</url>
      
        <content type="html"><![CDATA[<h1 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h1><blockquote><p>The rise in popularity of permissioned blockchain platforms in recent time is significant. Hyperledger Fabric is one such permissioned blockchain platform and one of the Hyperledger projects hosted by the Linux Foundation.</p><p>The Fabric comprises of various components such as smart-contracts, endorsers, committers, validators, and orderers.</p><p>As the performance of blockchain platform is a major concern for enterprise applications, in this work, we perform a comprehensive empirical study to characterize the performance of Hyperledger Fabric and identify potential performance bottlenecks to gain a better understanding of the system.</p></blockquote><p>æœ€è¿‘ä¸€æ®µæ—¶é—´ï¼Œè®¸å¯é“¾å¹³å°çš„æµè¡Œåº¦æ˜¾ç€ä¸Šå‡ã€‚ Hyperledger Fabric æ˜¯ä¸€ç§è¿™æ ·çš„è®¸å¯é“¾å¹³å°ï¼Œä¹Ÿæ˜¯ Linux åŸºé‡‘ä¼šæ‰˜ç®¡çš„ Hyperledger é¡¹ç›®ä¹‹ä¸€ã€‚</p><p>Fabric ç”±å„ç§ç»„ä»¶ç»„æˆï¼Œä¾‹å¦‚æ™ºèƒ½åˆçº¦ï¼ŒèƒŒä¹¦èŠ‚ç‚¹ï¼Œæäº¤èŠ‚ç‚¹ï¼ŒéªŒè¯èŠ‚ç‚¹å’Œæ’åºèŠ‚ç‚¹ã€‚</p><p>ç”±äºåŒºå—é“¾å¹³å°çš„æ€§èƒ½æ˜¯ä¼ä¸šåº”ç”¨ç¨‹åºçš„ä¸»è¦å…³æ³¨ç‚¹ï¼Œå› æ­¤åœ¨è¿™é¡¹å·¥ä½œä¸­ï¼Œæˆ‘ä»¬è¿›è¡Œäº†å…¨é¢çš„å®è¯ç ”ç©¶ï¼Œä»¥è¡¨å¾ Hyperledger Fabric çš„æ€§èƒ½å¹¶ç¡®å®šæ½œåœ¨çš„æ€§èƒ½ç“¶é¢ˆï¼Œä»¥æ›´å¥½åœ°äº†è§£ç³»ç»Ÿã€‚</p><blockquote><p>We follow a two-phased approach.</p><p>In the first phase, our goal is to understand the impact of various configuration parameters such as block size, endorsement policy, channels, resource allocation, state database choice on the transaction throughput &amp; latency to provide various guidelines on configuring these parameters.</p><p>In addition, we also aim to identify performance bottlenecks and hotspots. We observed that (1) endorsement policy verification, (2) sequential policy validation of transactions in a block, and (3) state validation and commit (with CouchDB) were the three major bottlenecks.</p></blockquote><p>æˆ‘ä»¬éµå¾ªä¸¤é˜¶æ®µçš„æ–¹æ³•ã€‚</p><p>åœ¨ç¬¬ä¸€é˜¶æ®µï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯äº†è§£å„ç§é…ç½®å‚æ•°ï¼ˆä¾‹å¦‚å—å¤§å°ã€èƒŒä¹¦ç­–ç•¥ã€é€šé“ã€èµ„æºé…ç½®ã€çŠ¶æ€æ•°æ®åº“é€‰æ‹©ï¼‰å¯¹äº¤æ˜“ååé‡å’Œå»¶è¿Ÿçš„å½±å“ï¼Œä»¥æä¾›æœ‰å…³é…ç½®è¿™äº›å‚æ•°çš„å„ç§æŒ‡å¯¼ã€‚</p><p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜æ—¨åœ¨ç¡®å®šæ€§èƒ½ç“¶é¢ˆå’Œçƒ­ç‚¹ã€‚ æˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼ˆ1ï¼‰èƒŒä¹¦ç­–ç•¥éªŒè¯ï¼Œï¼ˆ2ï¼‰å—ä¸­äº¤æ˜“çš„é¡ºåºç­–ç•¥éªŒè¯ï¼Œï¼ˆ3ï¼‰çŠ¶æ€éªŒè¯å’Œæäº¤ï¼ˆä½¿ç”¨ CouchDBï¼‰æ˜¯ä¸‰ä¸ªä¸»è¦ç“¶é¢ˆã€‚</p><blockquote><p>In the second phase, we focus on optimizing Hyperledger Fabric v1.0 based on our observations.</p><p>We introduced and studied various simple optimizations such as aggressive caching for endorsement policy verification in the cryptography component (3Ã— improvement in the performance) and parallelizing endorsement policy verification (7Ã— improvement). </p><p>Further, we enhanced and measured the effect of an existing bulk read/write optimization for CouchDB during state validation &amp; commit phase (2.5Ã— improvement). </p><p>By combining all three optimizations, we improved the overall throughput by 16Ã— (i.e., from 140 tps to 2250 tps).</p></blockquote><p>åœ¨ç¬¬äºŒé˜¶æ®µï¼Œæˆ‘ä»¬å°†æ ¹æ®æˆ‘ä»¬çš„è§‚å¯Ÿä¼˜åŒ– Hyperledger Fabric v1.0ã€‚</p><p>æˆ‘ä»¬ä»‹ç»å¹¶ç ”ç©¶å„ç§ç®€å•çš„ä¼˜åŒ–æ–¹æ³•ï¼Œä¾‹å¦‚åœ¨åŠ å¯†ç»„ä»¶ä¸­è¿›è¡ŒèƒŒä¹¦ç­–ç•¥éªŒè¯çš„ä¸»åŠ¨ç¼“å­˜ï¼ˆæ€§èƒ½æé«˜äº† 3 å€ï¼‰å’Œå¹¶è¡ŒåŒ–èƒŒä¹¦ç­–ç•¥éªŒè¯ï¼ˆæé«˜ 7 å€ï¼‰ã€‚</p><p>æ­¤å¤–ï¼Œæˆ‘ä»¬åœ¨éªŒè¯å’Œæäº¤é˜¶æ®µæœŸé—´å¢å¼ºå¹¶æµ‹é‡äº†ç°æœ‰çš„é’ˆå¯¹ CouchDB æ‰¹é‡è¯»å†™ä¼˜åŒ–çš„æ•ˆæœï¼ˆæé«˜ 2.5 å€ï¼‰ã€‚</p><p>é€šè¿‡ç»“åˆè¿™ 3 ä¸ªä¼˜åŒ–ï¼Œæˆ‘ä»¬å°†æ•´ä½“ååé‡æå‡äº† 16 å€ï¼Œå³ä» 140 tps åˆ° 2250 tpsã€‚</p><h1 id="I-INTRODUCTION"><a href="#I-INTRODUCTION" class="headerlink" title="I. INTRODUCTION"></a>I. INTRODUCTION</h1><blockquote><p>Blockchain technologies initially gained popularity as they were seen as a way to get rid of the intermediary and decentralize the system. Since then, blockchain has witnessed a growing interest from different domains and use cases. A blockchain is a shared, distributed ledger that records transactions and is maintained by multiple nodes in the network where nodes do not trust each other. Each node holds the identical copy of the ledger which is usually represented as a chain of blocks, with each block being a logical sequence of transactions. Each block encloses the hash of its immediate previous block, thereby guaranteeing the immutability of ledger.</p></blockquote><p>åŒºå—é“¾æœ€åˆå¼€å§‹æµè¡Œæ˜¯å› ä¸ºå®ƒä»¬è¢«è®¤ä¸ºæ˜¯ä¸€ç§æ‘†è„±ä¸­ä»‹å’Œå»ä¸­å¿ƒåŒ–ç³»ç»Ÿçš„æ–¹å¼ã€‚ä»é‚£ä¹‹åï¼ŒåŒºå—é“¾è§è¯äº†æ¥è‡ªä¸åŒé¢†åŸŸå’Œç”¨ä¾‹æ—¥ç›Šå¢é•¿çš„å…´è¶£ã€‚</p><p>åŒºå—é“¾æ˜¯ä¸€ä¸ªå…±äº«çš„ã€åˆ†å¸ƒå¼çš„è´¦æœ¬ï¼Œå®ƒè®°å½•äº¤æ˜“å¹¶ç”±ç½‘ç»œä¸­äº’ä¸ä¿¡ä»»çš„å¤šä¸ªèŠ‚ç‚¹å…±åŒç»´æŠ¤ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½æ‹¥æœ‰è¯¥è´¦æœ¬çš„ç›¸åŒå‰¯æœ¬ï¼Œè´¦æœ¬é€šå¸¸ç”±åŒºå—é“¾è¡¨ç¤ºï¼Œæ¯ä¸ªåŒºå—éƒ½æ˜¯äº¤æ˜“çš„é€»è¾‘é¡ºåºã€‚æ¯ä¸ªäº¤æ˜“éƒ½åŒ…å«å‰ä¸€ä¸ªåŒºå—çš„å“ˆå¸Œï¼Œä»è€Œä¿è¯äº†è´¦æœ¬çš„ä¸å¯ç¯¡æ”¹ã€‚</p><blockquote><p>Blockchain is often hailed as a new breed of database systems, in essence being a distributed transaction processing system where the nodes are not trusted and the system needs to achieve Byzantine fault tolerance. Blockchain provides serializability, immutability, and cryptographic verifiability without a single point of trust unlike a database system; properties that have triggered blockchain adoption in a wide variety of industries.</p></blockquote><p>åŒºå—é“¾é€šå¸¸è¢«èª‰ä¸ºä¸€ç§æ–°å‹çš„æ•°æ®åº“ç³»ç»Ÿï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„äº¤æ˜“å¤„ç†ç³»ç»Ÿï¼Œå…¶ä¸­çš„èŠ‚ç‚¹ä¸å—ä¿¡ä»»ï¼Œå¹¶ä¸”è¿™ä¸ªç³»ç»Ÿéœ€è¦å®ç°æ‹œå åº­å®¹é”™ã€‚ä¸æ•°æ®åº“ç³»ç»Ÿä¸åŒï¼ŒåŒºå—é“¾åœ¨æ²¡æœ‰å•ä¸€ä¿¡ä»»ç‚¹çš„æƒ…å†µä¸‹æä¾›äº†å¯ä¸²è¡Œæ€§ã€ä¸å¯ç¯¡æ”¹æ€§å’ŒåŠ å¯†å¯éªŒè¯æ€§ï¼›å¼•å‘åŒºå—é“¾åœ¨ä¼—å¤šè¡Œä¸šä¸­é‡‡ç”¨çš„ç‰¹æ€§ã€‚</p><blockquote><p>A blockchain network can be either permissionless or permissioned. </p><p>In a permissionless network or public network such as Bitcoin, Ethereum, anyone can join the network to perform transactions. Due to a large number of nodes in a public network, a proof-of-work consensus approach is used to order transactions and create a block.</p><p>In a permissioned network, the identity of each participant is known and authenticated cryptographically such that blockchain can store who performed which transaction. In addition, such a network can have extensive access control mechanisms built-in to limit who can (a) read &amp; append to ledger data, (b) issue transactions, (c) administer participation in the blockchain network.</p></blockquote><p>åŒºå—é“¾ç½‘ç»œå¯ä»¥æ˜¯æœªç»è®¸å¯çš„æˆ–ç»è¿‡è®¸å¯çš„ã€‚</p><p>åœ¨æœªç»è®¸å¯çš„ç½‘ç»œæˆ–å…¬å…±ç½‘ç»œï¼ˆä¾‹å¦‚æ¯”ç‰¹å¸ã€ä»¥å¤ªåŠï¼‰ä¸­ï¼Œä»»ä½•äººéƒ½å¯ä»¥åŠ å…¥ç½‘ç»œä»¥æ‰§è¡Œäº¤æ˜“ã€‚ç”±äºå…¬å…±ç½‘ç»œä¸­æœ‰å¤§é‡èŠ‚ç‚¹ï¼Œå› æ­¤é‡‡ç”¨å·¥ä½œé‡è¯æ˜å…±è¯†ç®—æ³•æ¥å¯¹äº¤æ˜“è¿›è¡Œæ’åºå¹¶åˆ›å»ºä¸€ä¸ªåŒºå—ã€‚</p><p>åœ¨ç»è¿‡è®¸å¯çš„ç½‘ç»œä¸­ï¼Œæ¯ä¸ªå‚ä¸è€…çš„èº«ä»½éƒ½æ˜¯å·²çŸ¥çš„ï¼Œé€šè¿‡å¯†ç éªŒè¯ï¼ŒåŒºå—é“¾å¯ä»¥å­˜å‚¨è°æ‰§è¡Œäº†å“ªä¸ªäº¤æ˜“ã€‚æ­¤å¤–ï¼Œè¿™æ ·çš„ç½‘ç»œå¯ä»¥å†…ç½®å¹¿æ³›çš„ç½‘ç»œæ§åˆ¶æœºåˆ¶æ¥é™åˆ¶è°å¯ä»¥ï¼ˆaï¼‰è¯»å–å¹¶æ·»åŠ è´¦æœ¬æ•°æ®ï¼Œï¼ˆbï¼‰å‘é€äº¤æ˜“ï¼Œï¼ˆcï¼‰ç®¡ç†å‚ä¸åŒºå—é“¾ç½‘ç»œã€‚</p><blockquote><p>A permissioned network is highly suitable for enterprise applications that require authenticated participants. Each node in a permissioned network can be owned by different organizations. Further, enterprise applications need complex data models and expressibility which can be supported using smart-contracts. Enterprises find value in being able to integrate diverse systems without having to build a centralized solution and to bring a level of trust among untrusting parties or to bring in a trusted third-party. Trade Finance and Food Safety are examples of blockchain applications where participants see value in visibility advantages it offers as compared to the existing loosely coupled centralized systems.</p></blockquote><p>è®¸å¯ç½‘ç»œéå¸¸é€‚åˆéœ€è¦éªŒè¯å‚ä¸è€…èº«ä»½çš„ä¼ä¸šåº”ç”¨ç¨‹åºã€‚ è®¸å¯ç½‘ç»œä¸­çš„æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥ç”±ä¸åŒçš„ç»„ç»‡æ‹¥æœ‰ã€‚ æ­¤å¤–ï¼Œä¼ä¸šåº”ç”¨ç¨‹åºéœ€è¦å¤æ‚çš„æ•°æ®æ¨¡å‹å’Œå¯è¡¨è¾¾æ€§ï¼Œå¯ä»¥ä½¿ç”¨æ™ºèƒ½åˆçº¦æ¥æ”¯æŒå®ƒä»¬ã€‚ ä¼ä¸šå‘ç°äº†èƒ½å¤Ÿé›†æˆå„ç§ç³»ç»Ÿè€Œæ— éœ€æ„å»ºé›†ä¸­å¼è§£å†³æ–¹æ¡ˆå¹¶åœ¨éä¿¡ä»»æ–¹ä¹‹é—´å»ºç«‹ä¿¡ä»»åº¦æˆ–å¼•å…¥å—ä¿¡ä»»çš„ç¬¬ä¸‰æ–¹çš„ä»·å€¼ã€‚ è´¸æ˜“é‡‘èå’Œé£Ÿå“å®‰å…¨æ˜¯åŒºå—é“¾åº”ç”¨çš„ä¾‹å­ï¼Œä¸ç°æœ‰çš„æ¾æ•£è€¦åˆçš„é›†ä¸­å¼ç³»ç»Ÿç›¸æ¯”ï¼Œå‚ä¸è€…åœ¨å…¶å¯è§æ€§ä¼˜åŠ¿ä¸­çœ‹åˆ°äº†ä»·å€¼ã€‚</p><blockquote><p>There is a lot of concern about the performance of permissioned blockchain platforms and their ability to handle a huge volume of transactions at low latency. Another concern is the richness of language to describe the transactions. Different blockchain platforms such as Quorum, Corda address these concerns using different techniques derived from the distributed systems domain. Hyperledger Fabric is an enterprise-grade open-source permissioned blockchain platform which has a modular design and a high degree of specifiability through trust models and pluggable components. Fabric is currently being used in many different use cases such as Global Trade Digitization, SecureKey, Everledger and is the focus of our performance study.</p></blockquote><p>å¯¹äºè®¸å¯é“¾å¹³å°çš„æ€§èƒ½åŠå…¶ä»¥ä½å»¶è¿Ÿå¤„ç†å¤§é‡äº¤æ˜“çš„èƒ½åŠ›ï¼Œå­˜åœ¨å¾ˆå¤šæ‹…å¿§ã€‚ å¦ä¸€ä¸ªé—®é¢˜æ˜¯æè¿°äº¤æ˜“çš„è¯­è¨€ä¸°å¯Œã€‚ Quorumï¼ŒCorda ç­‰ä¸åŒçš„åŒºå—é“¾å¹³å°ä½¿ç”¨æºè‡ªåˆ†å¸ƒå¼ç³»ç»Ÿé¢†åŸŸçš„ä¸åŒæŠ€æœ¯æ¥è§£å†³è¿™äº›é—®é¢˜ã€‚Hyperledger Fabric æ˜¯ä¼ä¸šçº§å¼€æºè®¸å¯é“¾å¹³å°ï¼Œå…·æœ‰æ¨¡å—åŒ–è®¾è®¡ï¼Œå¹¶é€šè¿‡ä¿¡ä»»æ¨¡å‹å’Œå¯æ’æ‹”ç»„ä»¶å®ç°é«˜åº¦å¯å®šåˆ¶æ€§ã€‚ ç›®å‰ï¼ŒFabric å·²åœ¨è®¸å¤šä¸åŒçš„ç”¨ä¾‹ä¸­ä½¿ç”¨ï¼Œä¾‹å¦‚å…¨çƒè´¸æ˜“æ•°å­—åŒ–ï¼ŒSecureKeyï¼ŒEverledgerï¼Œè¿™æ˜¯æˆ‘ä»¬æ€§èƒ½ç ”ç©¶çš„é‡ç‚¹ã€‚</p><blockquote><p>Fabric consists of various components such as endorsers, ordering service, and committers. Further, it constitutes various phases in processing a transaction such as endorsement phase, ordering phase, validation and commit phase. Due to numerous components and phases, Fabric provides various configurable parameters such as block size, endorsement policy, channels, state database. Hence, one of the main challenges in setting up an efficient blockchain network is finding the right set of values for these parameters. For e.g., depending on the application and requirements, one might need to answer the following questions:</p><ul><li><p>What should be the block size to achieve a lower latency?</p></li><li><p>How many channels can be created and what should be</p><p>  the resource allocation?</p></li><li><p>What types of endorsement policy is more efficient?</p></li><li><p>How much is the performance difference between</p><p>  GoLevelDB and CocuhDB when it is used as the</p><p>  state database?</p></li></ul></blockquote><p>Fabric ç”±å„ç§ç»„ä»¶ç»„æˆï¼Œä¾‹å¦‚æ™ºèƒ½åˆçº¦ï¼ŒèƒŒä¹¦èŠ‚ç‚¹ï¼Œæäº¤èŠ‚ç‚¹ï¼ŒéªŒè¯èŠ‚ç‚¹å’Œæ’åºèŠ‚ç‚¹ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜æ„æˆäº†å¤„ç†äº¤æ˜“çš„å„ä¸ªé˜¶æ®µï¼Œä¾‹å¦‚èƒŒä¹¦é˜¶æ®µï¼Œæ’åºé˜¶æ®µï¼ŒéªŒè¯å’Œæäº¤é˜¶æ®µã€‚ç”±äºç»„ä»¶å’Œé˜¶æ®µä¼—å¤šï¼ŒFabric æä¾›äº†å„ç§å¯é…ç½®çš„å‚æ•°ï¼Œä¾‹å¦‚å—å¤§å°ï¼ŒèƒŒä¹¦ç­–ç•¥ï¼Œé€šé“ï¼ŒçŠ¶æ€æ•°æ®åº“ã€‚å› æ­¤ï¼Œå»ºç«‹æœ‰æ•ˆçš„åŒºå—é“¾ç½‘ç»œçš„ä¸»è¦æŒ‘æˆ˜ä¹‹ä¸€æ˜¯ä¸ºè¿™äº›å‚æ•°æ‰¾åˆ°æ­£ç¡®çš„å€¼é›†ã€‚ä¾‹å¦‚ï¼Œæ ¹æ®åº”ç”¨å’Œè¦æ±‚ï¼Œå¯èƒ½éœ€è¦å›ç­”ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li>è¾¾åˆ°è¾ƒä½å»¶è¿Ÿçš„å—å¤§å°åº”è¯¥æ˜¯å¤šå°‘ï¼Ÿ</li><li>å¯ä»¥åˆ›å»ºå¤šå°‘ä¸ªé€šé“ï¼Œåº”è¯¥æ€ä¹ˆåˆ†é…èµ„æºï¼Ÿ</li><li>å“ªç§ç±»å‹çš„è®¤å¯æ”¿ç­–æ›´æœ‰æ•ˆï¼Ÿ</li><li>GoLevelDB å’Œ CocuhDB ç”¨ä½œçŠ¶æ€æ•°æ®åº“æ—¶å®ƒä»¬ä¹‹é—´çš„æ€§èƒ½å·®å¼‚æœ‰å¤šå°‘ï¼Ÿ</li></ul><blockquote><p>To answer above questions and to identify the performance bottlenecks, we perform a comprehensive empirical study of Fabric v1.0 with various configurable parameters. Specifically, our three major contributions are listed below.</p><ol><li>We conducted a comprehensive empirical study of Fabric platform by varying values assigned to the five major parameters by conducting over 1000s of experiments. As a result, we provide six guidelines on configuring these parameters to attain the maximum performance.</li><li>We identified three major performance bottlenecks: (i) crypto operations, (ii) serial validation of transactions in a block, and (iii) multiple REST API calls to CouchDB.</li><li>Introduced and studied three simple optimizations to improve the overall performance by 16Ã— (i.e., from 140 tps to 2250 tps) for a single channel environment.</li></ol></blockquote><p>ä¸ºäº†å›ç­”ä¸Šè¿°é—®é¢˜å¹¶ç¡®å®šæ€§èƒ½ç“¶é¢ˆï¼Œæˆ‘ä»¬å¯¹ Fabric v1.0 çš„å„ç§å¯é…ç½®å‚æ•°çš„è¿›è¡Œäº†å…¨é¢çš„å®è¯ç ”ç©¶ã€‚ å…·ä½“æ¥è¯´ï¼Œä»¥ä¸‹æ˜¯æˆ‘ä»¬çš„ä¸‰å¤§è´¡çŒ®ã€‚</p><ol><li>æˆ‘ä»¬é€šè¿‡è¿›è¡Œ1000å¤šæ¬¡å®éªŒï¼Œé€šè¿‡æ”¹å˜åˆ†é…ç»™äº”ä¸ªä¸»è¦å‚æ•°çš„å€¼ï¼Œå¯¹Fabric å¹³å°è¿›è¡Œäº†å…¨é¢çš„å®è¯ç ”ç©¶ã€‚ æœ€ç»ˆï¼Œæˆ‘ä»¬æä¾›äº†å…­ç§æœ‰å…³é…ç½®è¿™äº›å‚æ•°çš„å‡†åˆ™ä»¥è·å¾—æœ€ä½³æ€§èƒ½ã€‚</li><li>æˆ‘ä»¬ç¡®å®šäº†ä¸‰ä¸ªä¸»è¦çš„æ€§èƒ½ç“¶é¢ˆï¼šï¼ˆiï¼‰åŠ å¯†æ“ä½œï¼Œï¼ˆiiï¼‰å—ä¸­äº¤æ˜“çš„ä¸²è¡ŒéªŒè¯ä»¥åŠï¼ˆiiiï¼‰å¯¹ CouchDB çš„å¤šä¸ª REST API è°ƒç”¨ã€‚</li><li>å¼•å…¥å¹¶ç ”ç©¶äº†ä¸‰ç§ç®€å•çš„ä¼˜åŒ–æ–¹æ³•ï¼Œé’ˆå¯¹å•ä¸ªé€šé“ç¯å¢ƒå°†æ•´ä½“æ€§èƒ½æé«˜16å€ï¼ˆå³ä» 140 tps åˆ° 2250 tpsï¼‰ã€‚</li></ol><h1 id="II-BACKGROUND-HYPERLEDGER-FABRIC-ARCHITECTURE-amp-CONFIGURATION-PARAMETERS"><a href="#II-BACKGROUND-HYPERLEDGER-FABRIC-ARCHITECTURE-amp-CONFIGURATION-PARAMETERS" class="headerlink" title="II. BACKGROUND: HYPERLEDGER FABRIC ARCHITECTURE &amp; CONFIGURATION PARAMETERS"></a>II. BACKGROUND: HYPERLEDGER FABRIC ARCHITECTURE &amp; CONFIGURATION PARAMETERS</h1><blockquote><p>The Hyperledger Fabric is an implementation of permissioned blockchain system which has many unique properties suited for enterprise-class applications. It can run arbitrary smart contracts (a.k.a chaincodes) implemented in Go/JAVA/Nodejs language. It supports an application specifiable trust model for transaction validation and a pluggable consensus protocol to name a few. A Fabric network consists of different types of entities, peer nodes, ordering service nodes and clients, belonging to different organizations. Each of these has an identity on the network which is provided by a Membership Service Provider (MSP), typically associated with an organization. All entities in the network have visibility to identities of all organizations and can verify them.</p></blockquote><p>Hyperledger Fabric æ˜¯è®¸å¯åŒºå—é“¾ç³»ç»Ÿçš„å®ç°ï¼Œå…·æœ‰è®¸å¤šé€‚åˆä¼ä¸šçº§åº”ç”¨ç¨‹åºçš„ç‹¬ç‰¹å±æ€§ã€‚ å®ƒå¯ä»¥è¿è¡Œä»¥ Go / JAVA / Nodejs è¯­è¨€å®ç°çš„ä»»æ„æ™ºèƒ½åˆçº¦ï¼ˆä¹Ÿç§°ä¸ºé“¾ç ï¼‰ã€‚ å®ƒæ”¯æŒç”¨äºäº¤æ˜“éªŒè¯çš„åº”ç”¨ç¨‹åºå¯å®šåˆ¶çš„ä¿¡ä»»æ¨¡å‹å’Œå¯æ’æ‹”çš„å…±è¯†åè®®ç­‰ã€‚ Fabric ç½‘ç»œç”±å±äºä¸åŒç»„ç»‡çš„ä¸åŒç±»å‹çš„å®ä½“ã€å¯¹ç­‰èŠ‚ç‚¹ã€æ’åºèŠ‚ç‚¹å’Œå®¢æˆ·ç«¯ç»„æˆã€‚è¿™äº›ä¸­çš„æ¯ä¸€ä¸ªåœ¨ç½‘ç»œä¸Šéƒ½æœ‰ä¸€ä¸ªèº«ä»½ï¼Œè¯¥èº«ä»½ç”±é€šå¸¸ç”±ç»„ç»‡ç›¸å…³è”çš„æˆå‘˜èµ„æ ¼æœåŠ¡æä¾›å•†ï¼ˆMSPï¼‰æä¾›ã€‚ ç½‘ç»œä¸­çš„æ‰€æœ‰å®ä½“éƒ½å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ç»„ç»‡çš„èº«ä»½ï¼Œå¹¶å¯ä»¥å¯¹å…¶è¿›è¡ŒéªŒè¯ã€‚</p><h2 id="A-Key-Components-in-Fabric"><a href="#A-Key-Components-in-Fabric" class="headerlink" title="A. Key Components in Fabric"></a>A. Key Components in Fabric</h2><h3 id="Peer"><a href="#Peer" class="headerlink" title="Peer"></a>Peer</h3><blockquote><p>A peer node executes the chaincode, which implements a user smart-contract, and maintains the ledger in a file system. The chaincode is allowed access to the shared state by well-defined ledger APIs. A peer is further segregated as an endorsing peer, one which has the chaincode logic and executes it to endorse a transaction or a committing peer, one which does not hold the chaincode logic. Irrespective of this differentiation, both types of peer maintain the ledger. Additionally, both peers maintain the current state as StateDB in a key-value store such that chaincode can query or modify the state using the database query language.</p></blockquote><p>å¯¹ç­‰èŠ‚ç‚¹æ‰§è¡Œé“¾ç ï¼ˆè¯¥é“¾ç å®ç°äº†ç”¨æˆ·æ™ºèƒ½åˆçº¦ï¼‰å¹¶åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ç»´æŠ¤è´¦æœ¬ã€‚ é“¾ç å¯ä»¥é€šè¿‡å®šä¹‰æ˜ç¡®çš„åˆ†ç±»è´¦æœ¬ API è®¿é—®å…±äº«çŠ¶æ€ã€‚ å¯¹ç­‰èŠ‚ç‚¹è¿›ä¸€æ­¥è¢«åˆ†ç±»ä¸ºèƒŒä¹¦èŠ‚ç‚¹ï¼ˆå…·æœ‰é“¾ç é€»è¾‘å’Œæ‰§è¡Œé“¾ç ä»¥èƒŒä¹¦ä¸€ä¸ªäº¤æ˜“ï¼‰æˆ–æäº¤èŠ‚ç‚¹ï¼ˆæ²¡æœ‰é“¾ç é€»è¾‘ï¼‰ã€‚ ä¸è®ºè¿™äº›åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œä¸¤ç§ç±»å‹çš„å¯¹ç­‰èŠ‚ç‚¹éƒ½å…±åŒç»´æŠ¤è´¦æœ¬ã€‚ æ­¤å¤–ï¼Œä¸¤ç§å¯¹ç­‰èŠ‚ç‚¹åœ¨é”®å€¼å­˜å‚¨ä¸­å°†å½“å‰çŠ¶æ€ä¿æŒä¸º StateDBï¼Œä»¥ä¾¿é“¾ç å¯ä»¥ä½¿ç”¨æ•°æ®åº“æŸ¥è¯¢è¯­è¨€æŸ¥è¯¢æˆ–ä¿®æ”¹çŠ¶æ€ã€‚</p><h4 id="Endorsement-Policies"><a href="#Endorsement-Policies" class="headerlink" title="Endorsement Policies"></a>Endorsement Policies</h4><blockquote><p>Chaincodes are written in generalpurpose languages that execute on untrusted peers in the network. This poses multiple problems, one of non-deterministic execution and the other of trusting the results from any given peer. The endorsement policy addresses these two concerns, by specifying as part of an endorsement policy, the set of peers that need to simulate the transaction and endorse or digitally sign the execution results. Endorsement policies are specified as boolean expressions over network principals identities. A principal here is a member of a specific organization.</p></blockquote><p>é“¾ç ç”¨é€šç”¨è¯­è¨€ç¼–å†™ï¼Œå¯åœ¨ç½‘ç»œä¸­ä¸å—ä¿¡ä»»çš„å¯¹ç­‰èŠ‚ç‚¹ä¸Šæ‰§è¡Œã€‚ è¿™å¸¦æ¥äº†å¤šä¸ªé—®é¢˜ï¼Œä¸€ä¸ªæ˜¯ä¸ç¡®å®šæ€§æ‰§è¡Œï¼Œå¦ä¸€ä¸ªæ˜¯ä¿¡ä»»æ¥è‡ªä»»æ„ç»™å®šå¯¹ç­‰èŠ‚ç‚¹çš„ç»“æœã€‚èƒŒä¹¦ç­–ç•¥é€šè¿‡æŒ‡å®šä½œä¸ºèƒŒä¹¦ç­–ç•¥çš„ä¸€éƒ¨åˆ†å¯¹ç­‰èŠ‚ç‚¹é›†åˆæ¥è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œè¿™äº›å¯¹ç­‰ç‚¹éœ€è¦æ¨¡æ‹Ÿäº¤æ˜“å¹¶èƒŒä¹¦æˆ–å¯¹æ‰§è¡Œç»“æœè¿›è¡Œæ•°å­—ç­¾åã€‚èƒŒä¹¦ç­–ç•¥è¢«æŒ‡å®šä¸ºåŸºäºç½‘ç»œä¸»ä½“èº«ä»½çš„å¸ƒå°”è¡¨è¾¾å¼ã€‚ æ­¤å¤„çš„è´Ÿè´£äººæ˜¯ç‰¹å®šç»„ç»‡çš„æˆå‘˜ã€‚</p><h4 id="System-chaincodes"><a href="#System-chaincodes" class="headerlink" title="System chaincodes"></a>System chaincodes</h4><blockquote><p>System chaincode has the same programming model as normal user chaincodes and is built into the peer executable, unlike user chaincodes. </p><p>Fabric implements various system chaincodes; </p><p>the life cycle system chaincode (LSCC)â€”to install/instantiate/update chaincodes; </p><p>the endorsement system chaincode (ESCC)â€”to endorse a transaction by digitally signing the response; </p><p>the validation system chaincode (VSCC)â€”to validate a transactionâ€™s endorsement signature set against the endorsement policy; </p><p>the configuration system chaincode (CSCC) â€“ to manage channel configurations.</p></blockquote><p>ç³»ç»Ÿé“¾ç å…·æœ‰ä¸æ™®é€šç”¨æˆ·é“¾ç ç›¸åŒçš„ç¼–ç¨‹æ¨¡å‹ï¼Œå¹¶ä¸”å†…ç½®åœ¨å¯¹ç­‰èŠ‚ç‚¹å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œè¿™ä¸ç”¨æˆ·é“¾ç ä¸åŒã€‚ </p><p>Fabric å®ç°å„ç§ç³»ç»Ÿé“¾ç ï¼› </p><p>ç”Ÿå‘½å‘¨æœŸç³»ç»Ÿé“¾ä»£ç ï¼ˆLSCCï¼‰-ç”¨æ¥å®‰è£…/å®ä¾‹åŒ–/æ›´æ–°é“¾ç ï¼› </p><p>èƒŒä¹¦ç³»ç»Ÿé“¾ç ï¼ˆESCCï¼‰-é€šè¿‡å¯¹å“åº”è¿›è¡Œæ•°å­—ç­¾åæ¥èƒŒä¹¦äº¤æ˜“ï¼› </p><p>éªŒè¯ç³»ç»Ÿé“¾ç ï¼ˆVSCCï¼‰-æ ¹æ®èƒŒä¹¦ç­–ç•¥æ¥éªŒè¯äº¤æ˜“çš„èƒŒä¹¦ç­¾åé›†ï¼› </p><p>é…ç½®ç³»ç»Ÿé“¾ç ï¼ˆCSCCï¼‰â€“ç®¡ç†é€šé“é…ç½®ã€‚</p><h4 id="Channel"><a href="#Channel" class="headerlink" title="Channel"></a>Channel</h4><blockquote><p>Fabric introduces a concept called channel as a â€œprivateâ€ subnet of communication between two or more peers to provide a level of isolation. Transactions on a channel are only seen by the peer members and participants. The immutable ledger and chaincodes are on a per-channel basis. Further, the consensus is applicable on a per-channel basis, i.e., there is no defined order for transaction across channels.</p></blockquote><p>Fabric å¼•å…¥äº†ä¸€ä¸ªç§°ä¸ºé€šé“çš„æ¦‚å¿µï¼Œä½œä¸ºä¸¤ä¸ªæˆ–å¤šä¸ªå¯¹ç­‰èŠ‚ç‚¹ä¹‹é—´çš„â€œä¸“ç”¨â€é€šä¿¡å­ç½‘ï¼Œä»¥æä¾›ä¸€å®šç¨‹åº¦çš„éš”ç¦»ã€‚ é€šé“ä¸Šçš„äº¤æ˜“ä»…ç”±å¯¹ç­‰èŠ‚ç‚¹æˆå‘˜å’Œå‚ä¸è€…å¯è§ã€‚ åœ¨æ¯ä¸ªé€šé“ä¸Šéƒ½æœ‰ä¸å˜çš„è´¦æœ¬å’Œé“¾ç ã€‚ æ­¤å¤–ï¼Œå…±è¯†é€‚ç”¨äºæ¯ä¸ªé€šé“ï¼Œå³æ²¡æœ‰å®šä¹‰çš„è·¨é€šé“çš„äº¤æ˜“é¡ºåºã€‚</p><h3 id="Ordering-Service"><a href="#Ordering-Service" class="headerlink" title="Ordering Service"></a>Ordering Service</h3><blockquote><p>An Ordering Service Node (OSN), participate in the consensus protocol and cuts block of transactions which is delivered to the peers by a gossip communication protocol. The structure of a block in Fabric v1.0 is shown in Figure2. The ordering service is modular and supports a pluggable consensus mechanism. By default, a serial ordering (i.e., consensus) is achieved using an underlying Kafka/Zookeeper cluster. OSNs publish transactions to kafka topics and leverages the ordered and immutable nature of records in kafka topic to generate a unique ordered sequence of transactions in a block. A block is cut, when either a maximum number of new transactions, since the last block cut, are added added or a configured timeout since the last block cut has occurred. When any one condition is satisfied, an OSN, publishes a time-to-cut marker and cut a block of all transactions message offsets since the last time-to-cut message offset. The block is then delivered to the peer nodes.</p><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200406145423347.png" alt="image-20200406145423347" style="zoom:50%;"></blockquote><p>æ’åºæœåŠ¡èŠ‚ç‚¹ï¼ˆOSNï¼‰å‚ä¸å…±è¯†åè®®å’Œâ€œå‰Šå‡â€äº¤æ˜“å—ï¼Œè¯¥äº¤æ˜“é€šè¿‡ Gossip é€šä¿¡åè®®ä¼ é€’ç»™å¯¹ç­‰èŠ‚ç‚¹ã€‚ Fabric v1.0 ä¸­çš„å—ç»“æ„å¦‚å›¾æ‰€ç¤ºã€‚ æ’åºæœåŠ¡æ˜¯æ¨¡å—åŒ–çš„ï¼Œå¹¶æ”¯æŒå¯æ’å…¥çš„å…±è¯†æœºåˆ¶ã€‚ é»˜è®¤ä½¿ç”¨åŸºç¡€çš„ Kafka / Zookeeper é›†ç¾¤å®ç°åºåˆ—æ’åºï¼ˆå³å…±è¯†ï¼‰ã€‚ OSN å°†äº¤æ˜“å‘å¸ƒåˆ° kafka topicï¼Œå¹¶åˆ©ç”¨ kafka topic ä¸­è®°å½•çš„æœ‰åºå’Œä¸å˜æ€§åœ¨ä¸€ä¸ªå—ä¸­ç”Ÿæˆå”¯ä¸€çš„æœ‰åºäº¤æ˜“åºåˆ—ã€‚ å½“æ·»åŠ äº†è‡ªä¸Šæ¬¡åˆ‡å—ä»¥æ¥æœ€å¤§æ•°é‡çš„æ–°äº¤æ˜“ï¼Œæˆ–è€…è‡ªä¸Šæ¬¡åˆ‡å—å‘ç”Ÿä»¥æ¥çš„é…ç½®è¶…æ—¶æ—¶ï¼Œè¯¥å—è¢«åˆ‡æ‰ã€‚å½“æ»¡è¶³ä»»ä½•ä¸€ä¸ªæ¡ä»¶æ—¶ï¼ŒOSN ä¼šå‘å¸ƒä¸€ä¸ªæˆªæ­¢æ—¶é—´æ ‡è®°ï¼Œå¹¶åˆ‡æ‰è‡ªä¸Šæ¬¡æˆªæ­¢æ—¶é—´æ¶ˆæ¯åç§»ä»¥æ¥æ‰€æœ‰äº¤æ˜“æ¶ˆæ¯åç§»ç»„æˆçš„å—ã€‚ ç„¶åå°†è¯¥å—ä¼ é€’åˆ°å¯¹ç­‰èŠ‚ç‚¹ã€‚</p><h3 id="Client"><a href="#Client" class="headerlink" title="Client"></a>Client</h3><blockquote><p>The client application is responsible for putting together a transaction proposal as shown in Figure2. </p><p>The client submits the transaction proposal to 1-or-more peers simultaneously for collecting proposal responses with endorsements to satisfy the endorsement policy. </p><p>It then broadcasts the transaction to the orderer to be included into a block and delivered to all peers for validation and commit. </p><p>In Fabric v1.0, the onus is on the client to ensure that the transaction is well-formed and satisfies the endorsement policies.</p></blockquote><p>å¦‚å›¾2æ‰€ç¤ºï¼Œå®¢æˆ·åº”ç”¨ç¨‹åºè´Ÿè´£å°†äº¤æ˜“ææ¡ˆæ±‡æ€»åœ¨ä¸€èµ·ã€‚</p><p>å®¢æˆ·å°†äº¤æ˜“ææ¡ˆåŒæ—¶æäº¤ç»™ä¸€ä¸ªæˆ–å¤šä¸ªå¯¹ç­‰èŠ‚ç‚¹ï¼Œä»¥æ”¶é›†å¸¦æœ‰èƒŒä¹¦çš„ææ¡ˆå“åº”ï¼Œä»¥æ»¡è¶³èƒŒä¹¦ç­–ç•¥ã€‚ </p><p>ç„¶åï¼Œå®ƒå°†äº¤æ˜“å¹¿æ’­ç»™æ’åºèŠ‚ç‚¹ï¼Œä¸ºäº†æ‰“åŒ…å¹¶äº¤ä»˜ç»™æ‰€æœ‰å¯¹ç­‰èŠ‚ç‚¹æ¥è¿›è¡ŒéªŒè¯å’Œæäº¤ã€‚ </p><p>åœ¨Fabric v1.0ä¸­ï¼Œå®¢æˆ·æœ‰è´£ä»»ç¡®ä¿äº¤æ˜“çš„æ ¼å¼æ­£ç¡®å¹¶æ»¡è¶³èƒŒä¹¦ç­–ç•¥ã€‚</p><h2 id="B-Transaction-Flow-in-Hyperledger-Fabric"><a href="#B-Transaction-Flow-in-Hyperledger-Fabric" class="headerlink" title="B. Transaction Flow in Hyperledger Fabric"></a>B. Transaction Flow in Hyperledger Fabric</h2><blockquote><p>Unlike other Blockchain network which employ an order-execute transaction model, the Fabric employs a simulate order-validate &amp; commit model. </p><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200406150511423.png" alt="image-20200406150511423" style="zoom:50%;"><p>Figure 1 depicts the transaction flow which involves 3 steps, </p><p>1) Endorsement Phase â€“ simulating the transaction on selective peers and collecting the state changes; </p><p>2) Ordering Phase â€“ ordering the transactions through a consensus protocol; </p><p>and 3) Validation Phase â€“ validation followed by commit to ledger. </p><p>Before transactions can be submitted on Fabric, the network needs to be bootstrapped with participating organizations, their MSPs and identities for peers. </p><p>First, a channel is created on the orderer network with respective organization MSPs. </p><p>Second, peers of each organization join the channel and initializes the ledger. </p><p>Finally, the required chaincodes are installed on the channel.</p></blockquote><p>ä¸å…¶ä»–é‡‡ç”¨é¡ºåºæ‰§è¡Œäº¤æ˜“æ¨¡å‹çš„åŒºå—é“¾ç½‘ç»œä¸åŒï¼ŒFabric é‡‡ç”¨æ¨¡æ‹Ÿé¡ºåºéªŒè¯å’Œæäº¤æ¨¡å‹ã€‚ </p><p>å›¾1æç»˜äº†æ¶‰åŠä¸‰ä¸ªæ­¥éª¤çš„äº¤æ˜“æµç¨‹ï¼š</p><p>1ï¼‰èƒŒä¹¦é˜¶æ®µâ€“åœ¨å¯é€‰æ‹©çš„å¯¹ç­‰èŠ‚ç‚¹ä¸Šæ¨¡æ‹Ÿäº¤æ˜“å¹¶æ”¶é›†çŠ¶æ€å˜åŒ–ï¼›</p><p>2ï¼‰æ’åºé˜¶æ®µâ€“é€šè¿‡å…±è¯†åè®®å¯¹äº¤æ˜“è¿›è¡Œæ’åºï¼›</p><p>3ï¼‰éªŒè¯é˜¶æ®µâ€“éªŒè¯ï¼Œç„¶åæäº¤åˆ°è´¦æœ¬ã€‚ </p><p>åœ¨å¯ä»¥åœ¨ Fabric ä¸Šæäº¤äº¤æ˜“ä¹‹å‰ï¼Œç½‘ç»œéœ€è¦ä¸å‚ä¸ç»„ç»‡ï¼ˆå®ƒä»¬çš„èµ„æ ¼æœåŠ¡æä¾›å•†ï¼‰ä¸€èµ·è‡ªä¸¾å¹¶éªŒè¯å¯¹ç­‰èŠ‚ç‚¹ã€‚ </p><p>é¦–å…ˆï¼Œåœ¨å¸¦æœ‰å„è‡ªç»„ç»‡èµ„æ ¼æœåŠ¡æä¾›å•†çš„æ’åºç½‘ç»œä¸Šåˆ›å»ºé€šé“ã€‚ </p><p>å…¶æ¬¡ï¼Œæ¯ä¸ªç»„ç»‡çš„å¯¹ç­‰èŠ‚ç‚¹åŠ å…¥é€šé“å¹¶åˆå§‹åŒ–è´¦æœ¬ã€‚ </p><p>æœ€åï¼Œæ‰€éœ€çš„é“¾ç è¢«å®‰è£…åœ¨é€šé“ä¸Šã€‚</p><h3 id="Endorsement-Phase"><a href="#Endorsement-Phase" class="headerlink" title="Endorsement Phase"></a>Endorsement Phase</h3><blockquote><p> A client application using the Fabric SDK, constructs a transaction proposal to invoke a chaincode function which in-turn will perform read and/or write operations on the ledger state. The proposal is signed with the clientâ€™s credentials and the client sends it to 1-or-more endorsing peers simultaneously. The endorsement policy for the chaincode dictates the organization peers the client needs to send the proposal to for simulation.</p></blockquote><p>å®¢æˆ·ç«¯ï¼ˆclientï¼‰ä½¿ç”¨ Fabric SDK æ„é€ äº¤æ˜“æè®®ï¼ˆtransaction proposalï¼‰ ä»¥è°ƒç”¨é“¾ç å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†ä¾æ¬¡å¯¹è´¦æœ¬çŠ¶æ€æ‰§è¡Œè¯»å–å’Œ/æˆ–å†™å…¥æ“ä½œã€‚ ææ¡ˆå·²è¢«å®¢æˆ·ç«¯çš„èµ„æ ¼è¯ä¹¦ç­¾åï¼Œä¸”å®¢æˆ·ç«¯åŒæ—¶å°†ææ¡ˆå‘é€ç»™1ä¸ªæˆ–å¤šä¸ªèƒŒä¹¦èŠ‚ç‚¹ã€‚ é“¾ç çš„èƒŒä¹¦ç­–ç•¥è§„å®šäº†å®¢æˆ·ç«¯éœ€è¦å‘é€æè®®ç»™æ¨¡æ‹Ÿçš„ç»„ç»‡å¯¹ç­‰èŠ‚ç‚¹ã€‚</p><blockquote><p>First, each endorsing peer verifies that the submitter is authorized to invoke transactions on the channel. </p><p>Second, the peer executes the chaincode, which can access the current ledger state on peer. The transaction results include response value, read-set and write-set. All reads read the current state of ledger, but all writes are intercepted and modify a private transaction workspace.</p><p> Third, the endorsing peer calls a system chaincode called ESCC which signs this transaction response with peerâ€™s identity and replies back to client with proposal response. </p><p>Finally, the client inspects the proposal response to verify that it bears the signature of the peer. The client collects enough proposal response from different peers, verifies that the endorsements are same. </p><p>Since each peer could have executed the transaction at different height in the blockchain, it is possible that the proposal response differs. In such cases, the client has to re-submit the proposal to other peers, to obtain sufficient matching responses.</p></blockquote><p>é¦–å…ˆï¼Œæ¯ä¸ªèƒŒä¹¦èŠ‚ç‚¹éƒ½ä¼šéªŒè¯æäº¤è€…æ˜¯å¦æœ‰æƒè°ƒç”¨é€šé“ä¸Šçš„äº¤æ˜“ã€‚</p><p>å…¶æ¬¡ï¼Œå¯¹ç­‰èŠ‚ç‚¹æ‰§è¡Œé“¾ç ï¼Œè¯¥é“¾ç å¯ä»¥è®¿é—®èŠ‚ç‚¹ä¸Šå½“å‰çš„è´¦æœ¬çŠ¶æ€ã€‚äº¤æ˜“ç»“æœåŒ…æ‹¬å“åº”å€¼ï¼Œè¯»é›†å’Œå†™é›†ã€‚æ‰€æœ‰è¯»å‡è¯»å–è´¦æœ¬çš„å½“å‰çŠ¶æ€ï¼Œä½†æ‰€æœ‰å†™å…¥å‡ä¼šè¢«æ‹¦æˆªå¹¶ä¿®æ”¹ç§æœ‰äº¤æ˜“å·¥ä½œåŒºã€‚</p><p>ç¬¬ä¸‰ï¼ŒèƒŒä¹¦èŠ‚ç‚¹è°ƒç”¨ä¸€ä¸ªç§°ä¸º ESCC çš„ç³»ç»Ÿé“¾ç ï¼Œè¯¥ç³»ç»Ÿé“¾ç ä»¥èŠ‚ç‚¹çš„èº«ä»½å¯¹è¯¥äº¤æ˜“å“åº”è¿›è¡Œç­¾åï¼Œå¹¶é€šè¿‡ææ¡ˆå“åº”å°†å…¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><p>æœ€åï¼Œå®¢æˆ·ç«¯æ£€æŸ¥æè®®å“åº”ä»¥éªŒè¯å®ƒæ˜¯å¦å¸¦æœ‰èŠ‚ç‚¹çš„ç­¾åã€‚å®¢æˆ·ç«¯ä»ä¸åŒçš„èŠ‚ç‚¹é‚£é‡Œæ”¶é›†åˆ°è¶³å¤Ÿå¤šçš„ææ¡ˆå“åº”ï¼ŒéªŒè¯èƒŒä¹¦æ˜¯å¦ç›¸åŒã€‚</p><p>ç”±äºæ¯ä¸ªèŠ‚ç‚¹å¯èƒ½åœ¨åŒºå—é“¾ä¸­çš„ä¸åŒé«˜åº¦å¤„æ‰§è¡Œäº¤æ˜“ï¼Œå› æ­¤ææ¡ˆå“åº”å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯å¿…é¡»å°†ææ¡ˆé‡æ–°æäº¤ç»™å…¶ä»–èŠ‚ç‚¹ï¼Œä»¥è·å¾—è¶³å¤Ÿçš„åŒ¹é…å“åº”ã€‚</p><h3 id="Ordering-Phase"><a href="#Ordering-Phase" class="headerlink" title="Ordering Phase"></a>Ordering Phase</h3><blockquote><p>The client broadcasts a well-formed transaction message to the Ordering Service. The transaction will contain the read-write sets, the endorsing peer signatures and the Channel ID. The ordering service does not need to inspect the contents of the transaction to perform its operation. It receives transactions from different clients for various channels and enqueues them on a per-channel basis. It creates blocks of transactions per channel, sign the block with its identity and delivers them to peers using gossip messaging protocol.</p></blockquote><p>å®¢æˆ·ç«¯å‘æ’åºæœåŠ¡å¹¿æ’­æ ¼å¼æ­£ç¡®çš„äº¤æ˜“æ¶ˆæ¯ã€‚ äº¤æ˜“å°†åŒ…å«è¯»å†™é›†ï¼ŒèƒŒä¹¦èŠ‚ç‚¹ç­¾åå’Œé€šé“IDã€‚ æ’åºæœåŠ¡ä¸éœ€è¦æ£€æŸ¥äº¤æ˜“çš„å†…å®¹å³å¯æ‰§è¡Œæ“ä½œã€‚ å®ƒæ¥æ”¶æ¥è‡ªä¸åŒå®¢æˆ·çš„å„ç§é€šé“çš„äº¤æ˜“ï¼Œå¹¶åœ¨æ¯ä¸ªé€šé“çš„åŸºç¡€ä¸Šæ’é˜Ÿã€‚ å®ƒåˆ›å»ºæ¯ä¸ªé€šé“çš„äº¤æ˜“å—ï¼Œç”¨å…¶èº«ä»½ç­¾åè¯¥å—ï¼Œå¹¶ä½¿ç”¨ gossip é€šä¿¡åè®®å°†å…¶â€œä¼ é€’â€ç»™èŠ‚ç‚¹ã€‚</p><h3 id="Validation-Phase"><a href="#Validation-Phase" class="headerlink" title="Validation Phase"></a>Validation Phase</h3><blockquote><p>All peers, both endorsing and committing peers on a channel receive blocks from the network. The peer first verifies the Ordererâ€™s signature on the block. Each valid block is decoded and all transactions in a block goes through VSCC validation first before performing MVCC validation.</p></blockquote><p>é€šé“ä¸Šçš„æ‰€æœ‰å¯¹ç­‰èŠ‚ç‚¹ï¼ˆèƒŒä¹¦èŠ‚ç‚¹å’Œæäº¤èŠ‚ç‚¹ï¼‰éƒ½ä»ç½‘ç»œæ¥æ”¶å—ã€‚ é¦–å…ˆï¼ŒèŠ‚ç‚¹éªŒè¯å—ä¸Šæ’åºèŠ‚ç‚¹çš„ç­¾åã€‚ åœ¨æ‰§è¡Œ MVCC éªŒè¯ä¹‹å‰ï¼Œæ¯ä¸ªæœ‰æ•ˆå—éƒ½å°†è¢«è§£ç ï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªå—ä¸­çš„æ‰€æœ‰äº¤æ˜“éƒ½å°†å…ˆé€šè¿‡ VSCC éªŒè¯ã€‚</p><h4 id="VSCC-Validation"><a href="#VSCC-Validation" class="headerlink" title="VSCC Validation"></a>VSCC Validation</h4><blockquote><p>A Validation system chaincode evaluates endorsements in the transaction against the endorsement policy specified for the chaincode. If the endorsement policy is not satisfied, then that transaction is marked invalid.</p></blockquote><p>éªŒè¯ç³»ç»Ÿé“¾ç ä¼šæ ¹æ®ä¸ºé“¾ç æŒ‡å®šçš„èƒŒä¹¦ç­–ç•¥è¯„ä¼°äº¤æ˜“ä¸­çš„èƒŒä¹¦ã€‚ å¦‚æœä¸ç¬¦åˆåˆ™è¯¥äº¤æ˜“å°†æ ‡è®°ä¸ºæ— æ•ˆã€‚</p><h4 id="MVCC-Validation"><a href="#MVCC-Validation" class="headerlink" title="MVCC Validation"></a>MVCC Validation</h4><blockquote><p>As the name implies, the Multi-Version Concurrency Control check ensures that the versions of keys read by a transaction during the endorsement phase are same as their current state in the local ledger at commit time. This is similar to a read-write conflict check done for concurrency control, and is performed sequentially on all the valid transactions in the block (as marked by VSCC validation). If the read-set versions do not match, denoting that a concurrent previous (as-in earlier in this block or before) transaction modified the data read and was since (itâ€™s endorsement) successfully committed, the transaction is marked invalid. To ensure that no phantom reads occur, for range queries, the query is re-executed and compares the hashes of results (which is also stored as part of read-set captured during endorsement).</p></blockquote><p>é¡¾åæ€ä¹‰ï¼Œâ€œå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶â€æ£€æŸ¥ç¡®ä¿äº¤æ˜“åœ¨èƒŒä¹¦é˜¶æ®µè¯»å–çš„å¯†é’¥ç‰ˆæœ¬ä¸æäº¤æ—¶æœ¬åœ°è´¦æœ¬ä¸­çš„å½“å‰çŠ¶æ€ç›¸åŒã€‚ è¿™ç±»ä¼¼äºä¸ºè¿›è¡Œå¹¶å‘æ§åˆ¶è€Œè¿›è¡Œçš„è¯»å†™å†²çªæ£€æŸ¥ï¼Œå¹¶ä¸”å¯¹å—ä¸­çš„æ‰€æœ‰æœ‰æ•ˆäº¤æ˜“æŒ‰é¡ºåºæ‰§è¡Œï¼ˆç”± VSCC éªŒè¯æ ‡è®°ï¼‰ã€‚ å¦‚æœè¯»å–çš„ç‰ˆæœ¬ä¸åŒ¹é…ï¼Œè¡¨ç¤ºå¹¶å‘çš„å…ˆå‰ï¼ˆåœ¨æ­¤å—ä¸­è¾ƒæ—©æˆ–ä¹‹å‰ï¼‰çš„äº¤æ˜“ä¿®æ”¹äº†è¯»å–çš„æ•°æ®ï¼Œå¹¶ä¸”æ˜¯ç”±äºï¼ˆèƒŒä¹¦ï¼‰æˆåŠŸæäº¤çš„ï¼Œåˆ™è¯¥äº¤æ˜“è¢«æ ‡è®°ä¸ºæ— æ•ˆã€‚ ä¸ºç¡®ä¿ä¸å‘ç”Ÿå¹»è¯»ï¼Œå¯¹äºèŒƒå›´æŸ¥è¯¢ï¼Œå°†é‡æ–°æ‰§è¡ŒæŸ¥è¯¢å¹¶æ¯”è¾ƒç»“æœçš„å“ˆå¸Œå€¼ï¼ˆä¹Ÿå°†å…¶å­˜å‚¨ä¸ºèƒŒä¹¦æœŸé—´æ•è·çš„è¯»å–é›†çš„ä¸€éƒ¨åˆ†ï¼‰ã€‚</p><h4 id="Ledger-Update-Phase"><a href="#Ledger-Update-Phase" class="headerlink" title="Ledger Update Phase"></a>Ledger Update Phase</h4><blockquote><p>As the last step of transaction processing, the ledger is updated by appending the block to the local ledger. The StateDB, which holds the current state of all keys is updated with the write-sets of valid transactions (as marked by MVCC validation). These updates to the StateDB are performed atomically for a block of transactions and applies the updates to bring the StateDB to the state after all transaction in the block have been processed.</p></blockquote><p>ä½œä¸ºäº¤æ˜“å¤„ç†çš„æœ€åä¸€æ­¥ï¼Œé€šè¿‡å°†å—æ·»åŠ åˆ°æœ¬åœ°è´¦æœ¬æ¥æ›´æ–°è´¦æœ¬ã€‚ ä½¿ç”¨æœ‰æ•ˆäº¤æ˜“çš„å†™é›†ï¼ˆç”± MVCC éªŒè¯æ ‡è®°ï¼‰æ›´æ–°ä¿å­˜æ‰€æœ‰å¯†é’¥å½“å‰çŠ¶æ€çš„ StateDBã€‚ å¯¹ StateDB çš„è¿™äº›æ›´æ–°æ˜¯é’ˆå¯¹ä¸€ä¸ªäº¤æ˜“å—è‡ªåŠ¨æ‰§è¡Œçš„ï¼Œå¹¶åœ¨å¤„ç†äº†è¯¥å—ä¸­çš„æ‰€æœ‰äº¤æ˜“ä¹‹åï¼Œåº”ç”¨æ›´æ–°ä»¥ä½¿ StateDB è¿›å…¥çŠ¶æ€ã€‚</p><h2 id="C-Configuration-Parameters"><a href="#C-Configuration-Parameters" class="headerlink" title="C. Configuration Parameters"></a>C. Configuration Parameters</h2><blockquote><p>Our goal is to study the performance of Fabric under various conditions to understand how choices of different facets of the system affect performance. However, the parameter space is wide and we limit our choices to comprehensively cover a few components and look widely at other aspects of the system so that we can identify interplay of component level choices. To this end, we choose to understand and characterize the overall performance primarily from a peerâ€™s perspective. More specifically, we keep the Orderer, Gossip (physical network) etc. static so that it does not affect our experiments and observations. Next, we describe the five parameters considered in this study and their significance.</p></blockquote><p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç ”ç©¶å„ç§æ¡ä»¶ä¸‹ Fabric çš„æ€§èƒ½ï¼Œä»¥äº†è§£ç³»ç»Ÿä¸åŒæ–¹é¢çš„é€‰æ‹©å¦‚ä½•å½±å“æ€§èƒ½ã€‚ ä½†æ˜¯ï¼Œå‚æ•°æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬å°†é€‰æ‹©èŒƒå›´é™åˆ¶ä¸ºå…¨é¢æ¶µç›–å‡ ä¸ªç»„ä»¶ï¼Œå¹¶å¹¿æ³›æŸ¥çœ‹ç³»ç»Ÿçš„å…¶ä»–æ–¹é¢ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥è¯†åˆ«ç»„ä»¶çº§åˆ«é€‰æ‹©çš„ç›¸äº’å½±å“ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬é€‰æ‹©ä¸»è¦ä»èŠ‚ç‚¹çš„è§’åº¦æ¥ç†è§£å’Œè¡¨å¾æ•´ä½“ç»©æ•ˆã€‚ æ›´å…·ä½“åœ°è¯´ï¼Œæˆ‘ä»¬å°†æ’åºèŠ‚ç‚¹ï¼ŒGossipï¼ˆç‰©ç†ç½‘ç»œï¼‰ç­‰ä¿æŒé™æ€ï¼Œä»¥å…å½±å“æˆ‘ä»¬çš„å®éªŒå’Œè§‚å¯Ÿç»“æœã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æè¿°äº†è¿™é¡¹ç ”ç©¶ä¸­è€ƒè™‘çš„äº”ä¸ªå‚æ•°åŠå…¶æ„ä¹‰ã€‚</p><h3 id="1-Block-Size"><a href="#1-Block-Size" class="headerlink" title="1) Block Size"></a>1) Block Size</h3><blockquote><p>Transactions are batched at the orderer and delivered as a block to peers using a gossip protocol. Each peer processes one block at a time. Cryptographic processing like orderer signature verification is done per-block unlike transaction endorsement signatures verification, which is pertransaction. Varying blocksize also brings in the throughputvs-latency tradeoff and for a better picture, we study it in conjunction with the transaction arrival rate.</p></blockquote><p>äº¤æ˜“åœ¨æ’åºèŠ‚ç‚¹å¤„åˆ†æ‰¹å¤„ç†ï¼Œå¹¶æ‰“åŒ…åä½¿ç”¨ gossip åè®®äº¤ä»˜ç»™å¯¹ç­‰èŠ‚ç‚¹ã€‚ æ¯ä¸ªå¯¹ç­‰èŠ‚ç‚¹ä¸€æ¬¡å¤„ç†ä¸€ä¸ªå—ã€‚ åƒæ’åºèŠ‚ç‚¹éªŒç­¾è¿™æ ·çš„åŠ å¯†å¤„ç†æ˜¯æŒ‰å—å®Œæˆçš„ï¼Œè¿™ä¸äº¤æ˜“èƒŒä¹¦éªŒç­¾ï¼ˆå³æ¯ç¬”äº¤æ˜“ï¼‰ä¸åŒã€‚ å˜åŒ–çš„å—å¤§å°è¿˜ä¼šå¸¦æ¥ååé‡ä¸å»¶è¿Ÿä¹‹é—´çš„æƒè¡¡ï¼Œä¸ºäº†æ›´å¥½åœ°äº†è§£æƒ…å†µï¼Œæˆ‘ä»¬ç»“åˆäº¤æ˜“åˆ°è¾¾ç‡å¯¹å…¶è¿›è¡Œäº†ç ”ç©¶ã€‚</p><h3 id="2-Endorsement-Policy"><a href="#2-Endorsement-Policy" class="headerlink" title="2) Endorsement Policy"></a>2) Endorsement Policy</h3><blockquote><p>An endorsement policy dictates how many executions of a transaction and signing need to happen before a transaction request can be submitted to the orderer so that the transaction can pass the VSCC validation phase at peers. The VSCC validation of a transactionâ€™ endorsements require evaluation of endorsement policy expression against the collected endorsements and checking for satisfiability, which is NP-Complete. Additionally, a check includes verifying that the identity and its signature. The complexity of the endorsement policy will affect resources and the time taken to collect and evaluate it.</p></blockquote><p>èƒŒä¹¦ç­–ç•¥æŒ‡ç¤ºåœ¨å¯ä»¥å°†äº¤æ˜“è¯·æ±‚æäº¤ç»™æ’åºèŠ‚ç‚¹ä¹‹å‰ï¼Œéœ€è¦æ‰§è¡Œå¤šå°‘äº¤æ˜“å’Œç­¾åï¼Œä»¥ä¾¿äº¤æ˜“å¯ä»¥åœ¨å¯¹ç­‰èŠ‚ç‚¹ä¸­é€šè¿‡ VSCC éªŒè¯é˜¶æ®µã€‚ VSCC å¯¹äº¤æ˜“èƒŒä¹¦çš„éªŒè¯éœ€è¦æ ¹æ®æ”¶é›†çš„èƒŒä¹¦å’Œæ£€æŸ¥å¯æ»¡è¶³æ€§æ¥è¯„ä¼°èƒŒä¹¦ç­–ç•¥è¡¨ç¤ºï¼Œå³ NP å®Œå…¨ã€‚ å¦å¤–ï¼Œæ£€æŸ¥åŒ…æ‹¬éªŒè¯èº«ä»½åŠå…¶ç­¾åã€‚ èƒŒä¹¦æ”¿ç­–çš„å¤æ‚æ€§å°†å½±å“èµ„æºä»¥åŠæ”¶é›†å’Œè¯„ä¼°å®ƒçš„æ—¶é—´ã€‚</p><h3 id="3-Channel"><a href="#3-Channel" class="headerlink" title="3) Channel"></a>3) Channel</h3><blockquote><p>Channels isolate transactions from one another. Transactions submitted to different channels are ordered, delivered and processed independent of each other, albeit on same peers. Channels bring inherent parallelism to various aspects of transaction processing in the Fabric. While number of channels to use, and what channels to transact on is determined by the application and participant combinatorics, it has significant implications on platform performance and scalability.</p></blockquote><p>é€šé“å°†äº¤æ˜“å½¼æ­¤éš”ç¦»ã€‚ æäº¤åˆ°ä¸åŒé€šé“çš„äº¤æ˜“å½¼æ­¤ç‹¬ç«‹åœ°è¿›è¡Œæ’åºï¼Œäº¤ä»˜å’Œå¤„ç†ï¼Œå°½ç®¡å®ƒä»¬åœ¨åŒä¸€å¯¹ç­‰èŠ‚ç‚¹ä¸Šã€‚ é€šé“ä¸ºç»“æ„ä¸­äº¤æ˜“å¤„ç†çš„å„ä¸ªæ–¹é¢å¸¦æ¥äº†å›ºæœ‰çš„å¹¶è¡Œæ€§ã€‚ å°½ç®¡ä½¿ç”¨çš„é€šé“æ•°é‡ä»¥åŠè¦è¿›è¡Œäº¤æ˜“çš„é€šé“ç”±åº”ç”¨ç¨‹åºå’Œå‚ä¸è€…ç»„åˆç¨‹åºç¡®å®šï¼Œä½†å®ƒå¯¹å¹³å°æ€§èƒ½å’Œå¯æ‰©å±•æ€§å…·æœ‰é‡å¤§å½±å“ã€‚</p><h3 id="4-Resource-Allocation"><a href="#4-Resource-Allocation" class="headerlink" title="4) Resource Allocation"></a>4) Resource Allocation</h3><blockquote><p>Peers run CPU-intensive signature computation and verification routines as part of system chaincodes. User chaincodes executed by endorsing peers during transaction simulation add to this mix. We vary the number of CPU cores on peer nodes to study its effect. While network characteristics are important, we assume a datacenter or high bandwidth network with very low latency for this study.</p></blockquote><p>å¯¹ç­‰èŠ‚ç‚¹ å°† CPU å¯†é›†å‹ç­¾åè®¡ç®—å’ŒéªŒè¯ä¾‹ç¨‹ä½œä¸ºç³»ç»Ÿé“¾ç çš„ä¸€éƒ¨åˆ†è¿è¡Œã€‚ åœ¨äº¤æ˜“æ¨¡æ‹Ÿè¿‡ç¨‹ä¸­é€šè¿‡èƒŒä¹¦å¯¹ç­‰èŠ‚ç‚¹æ‰§è¡Œçš„ç”¨æˆ·é“¾ç å°†æ·»åŠ åˆ°æ­¤ç»„åˆä¸­ã€‚ æˆ‘ä»¬æ”¹å˜å¯¹ç­‰èŠ‚ç‚¹ä¸Š CPU å†…æ ¸çš„æ•°é‡ä»¥ç ”ç©¶å…¶æ•ˆæœã€‚ å°½ç®¡ç½‘ç»œç‰¹æ€§å¾ˆé‡è¦ï¼Œä½†æˆ‘ä»¬å‡è®¾æ­¤ç ”ç©¶çš„æ•°æ®ä¸­å¿ƒæˆ–é«˜å¸¦å®½ç½‘ç»œå…·æœ‰æä½çš„å»¶è¿Ÿã€‚</p><h3 id="5-Ledger-Database"><a href="#5-Ledger-Database" class="headerlink" title="5) Ledger Database"></a>5) Ledger Database</h3><blockquote><p>Fabric supports two alternatives for key-value store, CouchDB and GoLevelDB to maintain the current state. Both are key-value stores, while GoLevelDB is an embedded database, CouchDB uses a client-server model (accessed using REST API over a secure HTTP) and supports document/JSON data-model.</p></blockquote><p>Fabric æ”¯æŒé”®å€¼å­˜å‚¨çš„ä¸¤ç§æ–¹æ¡ˆï¼Œå³ CouchDB å’Œ GoLevelDB ä»¥ç»´æŠ¤å½“å‰çŠ¶æ€ã€‚ ä¸¤è€…éƒ½æ˜¯é”®å€¼å­˜å‚¨ï¼Œè€Œ GoLevelDB æ˜¯åµŒå…¥å¼æ•°æ®åº“ï¼Œè€Œ CouchDB ä½¿ç”¨å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å‹ï¼ˆé€šè¿‡ REST API é€šè¿‡å®‰å…¨çš„ HTTP è®¿é—®ï¼‰ï¼Œå¹¶æ”¯æŒ æ–‡æ¡£/JSON æ•°æ®æ¨¡å‹ã€‚</p><h1 id="III-PROBLEM-STATEMENT"><a href="#III-PROBLEM-STATEMENT" class="headerlink" title="III. PROBLEM STATEMENT"></a>III. PROBLEM STATEMENT</h1><blockquote><p>The two primary goals of our work are:</p></blockquote><p>æˆ‘ä»¬å·¥ä½œçš„ä¸¤ä¸ªä¸»è¦ç›®æ ‡æ˜¯ï¼š</p><h2 id="1-Performance-Benchmarking"><a href="#1-Performance-Benchmarking" class="headerlink" title="1) Performance Benchmarking"></a>1) Performance Benchmarking</h2><blockquote><p>To conduct an in-depth study of Fabric core components and benchmark Fabric performance for common usage patterns. We aim to study the throughput and latency characteristics of the system when varying the configuration of parameters listed Â§II-C to understand the relationship between the performance metrics and parameters. Based on our observations, we aim to derive and present a few high-level guidelines, which would be valuable to developers and deployment engineers.</p></blockquote><p>å¯¹ Fabric æ ¸å¿ƒç»„ä»¶è¿›è¡Œæ·±å…¥ç ”ç©¶ï¼Œå¹¶é’ˆå¯¹å¸¸è§ä½¿ç”¨æ¨¡å¼å¯¹åŸºå‡† Fabric æ€§èƒ½è¿›è¡ŒåŸºå‡†æµ‹è¯•ã€‚ å½“æ›´æ”¹ Â§II-C ä¸­åˆ—å‡ºçš„å‚æ•°é…ç½®æ—¶ï¼Œæˆ‘ä»¬æ—¨åœ¨ç ”ç©¶ç³»ç»Ÿçš„ååé‡å’Œå»¶è¿Ÿç‰¹æ€§ï¼Œä»¥äº†è§£æ€§èƒ½æŒ‡æ ‡ä¸å‚æ•°ä¹‹é—´çš„å…³ç³»ã€‚ æ ¹æ®æˆ‘ä»¬çš„è§‚å¯Ÿï¼Œæˆ‘ä»¬æ—¨åœ¨æ¨å¯¼å¹¶æå‡ºä¸€äº›é«˜çº§æŒ‡å—ï¼Œè¿™äº›æŒ‡å—å¯¹äºå¼€å‘äººå‘˜å’Œéƒ¨ç½²å·¥ç¨‹å¸ˆè€Œè¨€éå¸¸æœ‰ä»·å€¼ã€‚</p><h2 id="2-Optimization"><a href="#2-Optimization" class="headerlink" title="2) Optimization"></a>2) Optimization</h2><blockquote><p>To identify bottlenecks using code-level instrumentation and to draw out action items to improve the overall performance of Fabric. On identifying bottlenecks, our goal is to introduce and implement optimizations to alleviate these bottlenecks.</p></blockquote><p>ä½¿ç”¨ä»£ç çº§å·¥å…·è¯†åˆ«ç“¶é¢ˆå¹¶åˆ¶å®šè¡ŒåŠ¨é¡¹ç›®ä»¥æé«˜ Fabric çš„æ•´ä½“æ€§èƒ½ã€‚ åœ¨ç¡®å®šç“¶é¢ˆæ–¹é¢ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å¼•å…¥å¹¶å®æ–½ä¼˜åŒ–æªæ–½ä»¥ç¼“è§£è¿™äº›ç“¶é¢ˆã€‚</p><h1 id="IV-EXPERIMENTAL-METHODOLOGY"><a href="#IV-EXPERIMENTAL-METHODOLOGY" class="headerlink" title="IV. EXPERIMENTAL METHODOLOGY"></a>IV. EXPERIMENTAL METHODOLOGY</h1><blockquote><p>We study the throughput and latency as the primary performance metrics for Fabric. </p><p><em>Throughput</em> is the rate at which transactions are committed to ledger. </p><p><em>Latency</em> is the time taken from application sending the transaction proposal to the transaction commit and is made up of the following latencies:</p></blockquote><p>æˆ‘ä»¬å°†ååé‡å’Œå»¶è¿Ÿä½œä¸º Fabric çš„ä¸»è¦æ€§èƒ½æŒ‡æ ‡è¿›è¡Œç ”ç©¶ã€‚</p><p>ååé‡æ˜¯å°†äº¤æ˜“æäº¤åˆ°è´¦æœ¬çš„é€Ÿç‡ã€‚</p><p>ç­‰å¾…æ—¶é—´æ˜¯æŒ‡ä»åº”ç”¨ç¨‹åºå‘é€äº¤æ˜“ææ¡ˆåˆ°æäº¤äº¤æ˜“æ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œç”±ä»¥ä¸‹ç­‰å¾…æ—¶é—´ç»„æˆï¼š</p><blockquote><ul><li><em>Endorsement latency</em> â€“ the time taken for the client to collect all proposal responses along with the endorsements.</li><li><em>Broadcast latency</em> â€“ the time delay between client submitting to orderer and orderer acknowledges the client.</li><li><em>Commit latency</em> â€“ the time taken for the peer to validate and commit the transaction.</li><li><em>Ordering latency</em> â€“ the time transaction spent on the ordering service. As the performance of ordering service is not studied in this work, we are not presenting this latency. </li></ul></blockquote><ul><li><p>èƒŒä¹¦å»¶è¿Ÿ ï¼šå®¢æˆ·ç«¯æ”¶é›†æ‰€æœ‰ææ¡ˆå›å¤ä»¥åŠèƒŒä¹¦çš„æ—¶é—´ã€‚</p></li><li><p>å¹¿æ’­å»¶è¿Ÿï¼šå®¢æˆ·ç«¯æäº¤åˆ°æ’åºèŠ‚ç‚¹å’Œæ’åºèŠ‚ç‚¹é€šçŸ¥å®¢æˆ·ç«¯çš„æ—¶é—´ã€‚</p></li><li><p>æäº¤å»¶è¿Ÿï¼šå¯¹ç­‰èŠ‚ç‚¹éªŒè¯å¹¶æäº¤äº¤æ˜“æ‰€éœ€çš„æ—¶é—´ã€‚</p></li><li><p>æ’åºå»¶è¿Ÿï¼šäº¤æ˜“èŠ±è´¹åœ¨æ’åºæœåŠ¡çš„æ—¶é—´ã€‚ç”±äºæœ¬æ–‡æœªç ”ç©¶æ’åºæœåŠ¡çš„æ€§èƒ½ï¼Œå› æ­¤æˆ‘ä»¬ä¸ä»‹ç»è¿™ç§å»¶è¿Ÿã€‚</p></li></ul><blockquote><p>Further, we define the following three latency at block level:</p><ul><li><em>VSCC validation latency</em> â€“ the time taken to validate all transactionsâ€™ endorsement signature set (in a block) against the endorsement policy.</li><li><em>MVCC validation latency</em> â€“ the time taken to validate all transactions in a block by employing multi-version concurrency control as described in Â§II-B.</li><li><em>Ledger update latency</em> â€“ the time taken to update the state database with write-set of all valid transactions in a block.</li></ul></blockquote><p>æ­¤å¤–ï¼Œæˆ‘ä»¬åœ¨å—çº§åˆ«å®šä¹‰äº†ä»¥ä¸‹ä¸‰ä¸ªå»¶è¿Ÿï¼š</p><ul><li>VSCC éªŒè¯å»¶è¿Ÿï¼šæ ¹æ®èƒŒä¹¦ç­–ç•¥éªŒè¯æ‰€æœ‰äº¤æ˜“çš„èƒŒä¹¦ç­¾åé›†ï¼ˆä»¥å—ä¸ºå•ä½ï¼‰æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚</li><li>MVCC éªŒè¯ç­‰å¾…æ—¶é—´ï¼šé€šè¿‡é‡‡ç”¨ç¬¬ II-B èŠ‚æ‰€è¿°çš„å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶æ¥éªŒè¯ä¸€ä¸ªåŒºå—ä¸­æ‰€æœ‰äº¤æ˜“æ‰€éœ€çš„æ—¶é—´ã€‚</li><li>è´¦æœ¬æ›´æ–°ç­‰å¾…æ—¶é—´ï¼šå—ä¸­æ‰€æœ‰æœ‰æ•ˆäº¤æ˜“çš„å†™é›†æ›´æ–°çŠ¶æ€æ•°æ®åº“æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚</li></ul><blockquote><p>Since one of the major goal of this work is to identify performance bottlenecks, our load generator spans multiple clients each stresses the system by continuously generating transactions instead of following a distribution model (say, Poisson). Each client also sends proposal requests in parallel and collates endorsements. The transactions are submitted asynchronously to achieve the specified rate without waiting for commits. However, the benchmark framework tracks commit using our tools named <em>fetch-block</em> to calculate throughput and latency. Further, we instrumented the Fabric source code to collect fine-grained latency such as MVCC latency and others latencies. For multi-channel experiments, all organizations and all its peers join the channel. While other combinations are possible, we believe our approach will stress test the system.</p></blockquote><p>ç”±äºè¿™é¡¹å·¥ä½œçš„ä¸»è¦ç›®æ ‡ä¹‹ä¸€æ˜¯ç¡®å®šæ€§èƒ½ç“¶é¢ˆï¼Œå› æ­¤æˆ‘ä»¬çš„è´Ÿè½½ç”Ÿæˆå™¨è·¨è¶Šå¤šä¸ªå®¢æˆ·ç«¯ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯é€šè¿‡è¿ç»­ç”Ÿæˆäº¤æ˜“è€Œä¸æ˜¯éµå¾ªåˆ†å‘æ¨¡å‹ï¼ˆä¾‹å¦‚ Poissonï¼‰æ¥ç»™ç³»ç»Ÿæ–½åŠ å‹åŠ›ã€‚ æ¯ä¸ªå®¢æˆ·è¿˜å¹¶è¡Œå‘é€ææ¡ˆè¯·æ±‚å¹¶æ”¶é›†èƒŒä¹¦ã€‚ ä¸ºäº†è¾¾åˆ°æŒ‡å®šçš„é€Ÿç‡ï¼Œäº¤æ˜“æ˜¯å¼‚æ­¥æäº¤çš„ï¼Œæ— éœ€ç­‰å¾…æäº¤ã€‚ ç„¶è€Œï¼ŒåŸºå‡†æ¡†æ¶ä½¿ç”¨åä¸º fetch-block çš„å·¥å…·æ¥è·Ÿè¸ªæäº¤ï¼Œä»¥è®¡ç®—ååé‡å’Œå»¶è¿Ÿã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬æ£€æµ‹äº† Fabric æºä»£ç ï¼Œä»¥æ”¶é›†ç»†ç²’åº¦çš„å»¶è¿Ÿï¼Œä¾‹å¦‚ MVCC å»¶è¿Ÿå’Œå…¶ä»–å»¶è¿Ÿã€‚ å¯¹äºå¤šé€šé“å®éªŒï¼Œæ‰€æœ‰ç»„ç»‡åŠå…¶æ‰€æœ‰å¯¹ç­‰èŠ‚ç‚¹éƒ½åŠ å…¥äº†é€šé“ã€‚ å°½ç®¡å…¶ä»–ç»„åˆä¹Ÿæ˜¯å¯èƒ½çš„ï¼Œä½†æˆ‘ä»¬è®¤ä¸ºæˆ‘ä»¬çš„æ–¹æ³•å°†å¯¹ç³»ç»Ÿè¿›è¡Œå‹åŠ›æµ‹è¯•ã€‚</p><h2 id="A-Setup-and-Workloads"><a href="#A-Setup-and-Workloads" class="headerlink" title="A. Setup and Workloads"></a>A. Setup and Workloads</h2><blockquote><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200406170256066.png" alt="image-20200406170256066" style="zoom:50%;"><p>Our test Fabric network consists of 4 organizations, each with 2 endorsing peers for a total of 8 peer nodes as depicted in Figure 3. There is 1 orderer node with a kafka-zookeeper cluster backing it. All nodes and kafka-zookeeper run on the x86 64 virtual machines in a IBM SoftLayer Datacenter. Each virtual machine is allocated 32 vCPUs of Intel(R) Xeon(R) CPU E5-2683 v3 @ 2.00GHz and 32 GB of memory. The three powerful client machines used to generate load was allocated with 56 vCPUs and 128 GB memory. Nodes are connected to the 3 Gbps Datacenter network.</p></blockquote><p>å¦‚å›¾3æ‰€ç¤ºï¼Œæˆ‘ä»¬çš„æµ‹è¯• Fabric ç½‘ç»œç”± 4 ä¸ªç»„ç»‡ç»„æˆï¼Œæ¯ä¸ªç»„ç»‡éƒ½æœ‰ 2 ä¸ªèƒŒä¹¦èŠ‚ç‚¹ï¼Œæ€»å…± 8 ä¸ªå¯¹ç­‰èŠ‚ç‚¹ã€‚æœ‰ 1 ä¸ªå¸¦æœ‰ kafka-zookeeper é›†ç¾¤çš„æ’åºèŠ‚ç‚¹ã€‚ æ‰€æœ‰èŠ‚ç‚¹å’Œ kafka-zookeeper åœ¨ IBM SoftLayer æ•°æ®ä¸­å¿ƒçš„ x86 64 è™šæ‹Ÿæœºä¸Šè¿è¡Œã€‚ æ¯ä¸ªè™šæ‹Ÿæœºéƒ½åˆ†é…äº† 32 ä¸ª IntelÂ®XeonÂ®CPU E5-2683 v3 vCPU @ 2.00GHz å’Œ 32 GB å†…å­˜ã€‚ ç”¨äºç”Ÿæˆè´Ÿè½½çš„ä¸‰å°å¼ºå¤§çš„å®¢æˆ·ç«¯è®¡ç®—æœºåˆ†é…äº† 56 ä¸ª vCPU å’Œ 128 GB å†…å­˜ã€‚ èŠ‚ç‚¹å·²è¿æ¥åˆ° 3 Gbps æ•°æ®ä¸­å¿ƒç½‘ç»œã€‚</p><blockquote><p>In the lack of standard benchmarks for Blockchain, we built our own benchmarks by surveying around 12 internal customer solutions built on Fabric for diverse use cases. We identified common defining patterns, data models, and requirements across the board. </p><p>One of the recurrent pattern is for each chaincode invocation to operate on exactly one asset or unit of data with the identifier being passed to it. The query logic is done by higher level application layers, often without querying blockchain data. This pattern is modelled as simple writeonly transactions (1w, 3w and 5w denoting number of keys written) in our benchmark. </p><p>Another common pattern is for a chaincode to read-and-write a small set of keys, like read a JSON document, update a field and write it back. We model these as read-writes of 1, 3 and 5 keys. As we have modeled our benchmark to imitate real world blockchain applications in production, we have not considered other macro benchmarks.</p></blockquote><p>åœ¨ç¼ºä¹åŒºå—é“¾æ ‡å‡†åŸºå‡†çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é€šè¿‡è°ƒæŸ¥åŸºäº Fabric çš„ 12 ç§å†…éƒ¨å®¢æˆ·è§£å†³æ–¹æ¡ˆçš„ä¸åŒæ¡ˆä¾‹ï¼Œå»ºç«‹äº†è‡ªå·±çš„åŸºå‡†ã€‚ æˆ‘ä»¬ç¡®å®šäº†é€šç”¨çš„å®šä¹‰æ¨¡å¼ï¼Œæ•°æ®æ¨¡å‹å’Œå…¨é¢çš„è¦æ±‚ã€‚ </p><p>å¾ªç¯æ¨¡å¼ä¹‹ä¸€æ˜¯ï¼Œæ¯æ¬¡é“¾ç è°ƒç”¨éƒ½åªå¯¹ä¸€ä¸ªèµ„äº§æˆ–æ•°æ®å•å…ƒè¿›è¡Œæ“ä½œï¼Œå¹¶å°†æ ‡è¯†ç¬¦ä¼ é€’ç»™å®ƒã€‚ æŸ¥è¯¢é€»è¾‘ç”±é«˜å±‚åº”ç”¨ç¨‹åºå±‚å®Œæˆï¼Œé€šå¸¸æ— éœ€æŸ¥è¯¢åŒºå—é“¾æ•°æ®ã€‚ åœ¨æˆ‘ä»¬çš„åŸºå‡†ä¸­ï¼Œæ­¤æ¨¡å¼è¢«å»ºæ¨¡ä¸ºç®€å•çš„åªå†™äº¤æ˜“ï¼ˆ1wï¼Œ3w å’Œ 5w è¡¨ç¤ºå†™å…¥çš„å¯†é’¥æ•°ï¼‰ã€‚ </p><p>å¦ä¸€ç§å¸¸è§æ¨¡å¼æ˜¯é“¾ç è¯»å†™å°‘é‡å¯†é’¥ï¼Œä¾‹å¦‚è¯»å– JSONæ–‡æ¡£ï¼Œæ›´æ–°å­—æ®µå¹¶å°†å…¶å†™å›ã€‚ æˆ‘ä»¬å°†è¿™äº›æ¨¡å‹å»ºæ¨¡ä¸º 1ã€3å’Œ 5 é”®çš„è¯»å†™ã€‚ ç”±äºæˆ‘ä»¬å·²ç»å»ºç«‹äº†åŸºå‡†æ¨¡å‹æ¥æ¨¡æ‹Ÿç”Ÿäº§ä¸­çš„ç°å®ä¸–ç•Œä¸­çš„åŒºå—é“¾åº”ç”¨ç¨‹åºï¼Œå› æ­¤æˆ‘ä»¬æ²¡æœ‰è€ƒè™‘å…¶ä»–å®è§‚åŸºå‡†ã€‚</p><h1 id="V-EXPERIMENTAL-RESULTS"><a href="#V-EXPERIMENTAL-RESULTS" class="headerlink" title="V. EXPERIMENTAL RESULTS"></a>V. EXPERIMENTAL RESULTS</h1><blockquote><p>In this section, we study the impact of various configurable parameters listed in Â§II-C on the performance of Hyperledger Fabric. The throughput and transaction latency presented in this section are averaged over multiple runs. In total, we conducted more than 1000s of experiments.</p></blockquote><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ç ”ç©¶ Â§II-C ä¸­åˆ—å‡ºçš„å„ç§å¯é…ç½®å‚æ•°å¯¹ Hyperledger Fabric æ€§èƒ½çš„å½±å“ã€‚ æœ¬èŠ‚ä»‹ç»çš„ååé‡å’Œäº¤æ˜“å»¶è¿Ÿæ˜¯å¤šæ¬¡è¿è¡Œçš„å¹³å‡å€¼ã€‚æˆ‘ä»¬æ€»å…±è¿›è¡Œäº† 1000 å¤šæ¬¡å®éªŒã€‚</p><h2 id="A-Impact-of-Transaction-Arrival-Rate-and-Block-Size"><a href="#A-Impact-of-Transaction-Arrival-Rate-and-Block-Size" class="headerlink" title="A. Impact of Transaction Arrival Rate and Block Size"></a>A. Impact of Transaction Arrival Rate and Block Size</h2><blockquote><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200406181747147.png" alt="image-20200406181747147" style="zoom:50%;"><p>Figure 4 plots the average throughput and latency for various block sizes over different transaction arrival rates. Table II presents various transaction arrival rates and block sizes used. For other parameters, refer to Table I.</p><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200406165940078.png" alt="image-20200406165940078" style="zoom:50%;"><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200406170227600.png" alt="image-20200406170227600" style="zoom:50%;"></blockquote><p>å›¾ 4 ç»˜åˆ¶äº†ä¸åŒäº¤æ˜“åˆ°è¾¾é€Ÿç‡ä¸‹å„ç§å—å¤§å°çš„å¹³å‡ååé‡å’Œå»¶è¿Ÿã€‚ </p><p>è¡¨ II åˆ—å‡ºäº†ä½¿ç”¨çš„å„ç§äº¤æ˜“åˆ°è¾¾ç‡å’Œå—å¤§å°ã€‚</p><p>æœ‰å…³å…¶ä»–å‚æ•°ï¼Œè¯·å‚é˜…è¡¨ Iã€‚</p><h3 id="Observation-1"><a href="#Observation-1" class="headerlink" title="Observation 1:"></a>Observation 1:</h3><blockquote><p><em>With an increase in transaction arrival rate, the throughput increased linearly as expected till it flattened out at around 140 tps, the saturation point</em> as shown in Figure 4. </p><p><em>When the arrival rate was close to or above the saturation point, the latency increased significantly (i.e., from an order of 100s of ms to 10s of seconds)</em>. This is because the number of ordered transactions waiting in the VSCC queue during validation phase grew rapidly (refer to Figure 5) which affected the commit latency. </p><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200406182608909.png" alt="image-20200406182608909" style="zoom:50%;"><p>However, with further increase in the arrival rate, we observed no impact on the endorsement and broadcast latency but commit latency. This is because VSCC utilized only a single vCPU and hence new transaction proposals utilized other vCPUs on the peer for simulation and endorsement. As a result, only the validation phase became a bottleneck. </p><p>In this experiment, the endorsement and broadcast latency was around 12 ms and 9 ms, respectively.</p></blockquote><p>å¦‚å›¾4æ‰€ç¤ºï¼Œ<em>éšç€äº¤æ˜“åˆ°è¾¾ç‡çš„å¢åŠ ï¼Œååé‡æŒ‰é¢„æœŸçº¿æ€§å¢é•¿ï¼Œç›´åˆ°è¾¾åˆ°é¥±å’Œç‚¹ 140 tpsæ—¶æ‰è¶‹äºå¹³å¦</em>ã€‚</p><p><em>å½“åˆ°è¾¾ç‡æ¥è¿‘æˆ–é«˜äºé¥±å’Œç‚¹æ—¶ï¼Œå»¶è¿Ÿæ˜¾ç€å¢åŠ ï¼ˆå³ä»100æ¯«ç§’åˆ°10ç§’çš„æ•°é‡çº§ï¼‰</em>ã€‚ è¿™æ˜¯å› ä¸ºåœ¨éªŒè¯é˜¶æ®µåœ¨ VSCC é˜Ÿåˆ—ä¸­ç­‰å¾…çš„æ’åºäº¤æ˜“æ•°é‡è¿…é€Ÿå¢é•¿ï¼ˆè¯·å‚é˜…å›¾5ï¼‰ï¼Œè¿™å½±å“äº†æäº¤å»¶è¿Ÿã€‚ </p><p>ä½†æ˜¯ï¼Œéšç€åˆ°è¾¾ç‡çš„è¿›ä¸€æ­¥æé«˜ï¼Œæˆ‘ä»¬å‘ç°å¯¹èƒŒä¹¦å’Œå¹¿æ’­å»¶è¿Ÿæ²¡æœ‰å½±å“ï¼Œä½†æ˜¯å¯¹æäº¤å»¶è¿Ÿæœ‰å½±å“ ã€‚ è¿™æ˜¯å› ä¸º VSCC ä»…ä½¿ç”¨å•ä¸ª vCPUï¼Œå› æ­¤æ–°çš„äº¤æ˜“ææ¡ˆä½¿ç”¨å¯¹ç­‰èŠ‚ç‚¹çš„å…¶ä»– vCPU è¿›è¡Œæ¨¡æ‹Ÿå’ŒèƒŒä¹¦ã€‚ ç»“æœï¼Œåªæœ‰éªŒè¯é˜¶æ®µæ‰æˆä¸ºç“¶é¢ˆã€‚ </p><p>åœ¨æ­¤å®éªŒä¸­ï¼ŒèƒŒä¹¦å’Œå¹¿æ’­å»¶è¿Ÿåˆ†åˆ«çº¦ä¸º 12 æ¯«ç§’å’Œ 9 æ¯«ç§’ã€‚</p><h3 id="Observation-2"><a href="#Observation-2" class="headerlink" title="Observation 2:"></a>Observation 2:</h3><blockquote><p><em>For an arrival rate lower than the saturation point, with an increase in the block size, the latency increased</em>. For e.g., when the arrival rate was 50 tps, with an increase in the block size from 10 to 100, the transaction latency increased 5-fold, from 242 ms to 1250 ms. </p><p>The reason is that with an increase in the block size, the block creation time at the orderer increased and hence, on average, a transaction had to wait at the orderer for a little longer. For e.g., when the transaction arrival rate was 100 tps, for the block size of 50 and 100, the block creation rate was 2 and 1 block(s) per second, respectively, causing latency to double.</p></blockquote><p><em>å¯¹äºä½äºé¥±å’Œç‚¹çš„åˆ°è¾¾ç‡ï¼Œéšç€å—å¤§å°çš„å¢åŠ ï¼Œç­‰å¾…æ—¶é—´ä¼šå¢åŠ </em>ã€‚ ä¾‹å¦‚ï¼Œå½“åˆ°è¾¾é€Ÿç‡ä¸º 50 tps æ—¶ï¼Œéšç€å—å¤§å°ä» 10 å¢åŠ åˆ° 100ï¼Œäº¤æ˜“å»¶è¿Ÿå¢åŠ äº† 5 å€ï¼Œä» 242 æ¯«ç§’å¢åŠ åˆ° 1250 æ¯«ç§’ã€‚ </p><p>åŸå› æ˜¯éšç€å—å¤§å°çš„å¢åŠ ï¼Œæ’åºèŠ‚ç‚¹çš„å—åˆ›å»ºæ—¶é—´å¢åŠ ï¼Œå› æ­¤ï¼Œå¹³å‡è€Œè¨€ï¼Œæ¯ä¸ªäº¤æ˜“å¿…é¡»åœ¨æ’åºèŠ‚ç‚¹ç­‰å¾…æ›´é•¿çš„æ—¶é—´ã€‚ ä¾‹å¦‚ï¼Œå½“äº¤æ˜“åˆ°è¾¾é€Ÿç‡ä¸º 100 tpsæ—¶ï¼Œå¯¹äº 50 å’Œ 100 çš„å—å¤§å°ï¼Œå—åˆ›å»ºé€Ÿç‡åˆ†åˆ«ä¸ºæ¯ç§’ 2 ä¸ªå’Œ æ¯ç§’ 1 ä¸ªï¼Œä»è€Œå¯¼è‡´ç­‰å¾…æ—¶é—´åŠ å€ã€‚</p><h3 id="Observation-3"><a href="#Observation-3" class="headerlink" title="Observation 3:"></a>Observation 3:</h3><blockquote><p><em>For an arrival rate greater than the saturation point, with an increase in the block size, the latency decreased.</em> For e.g., when the arrival rate was 150 tps, with an increase in block size from 10 to 200, the transaction latency decreased from 14 secs to 10 secs. </p><p>This is because the time taken to validate and commit a block of size n was always lesser than the time taken to validate and commit m blocks each of size n/m. As a result, throughput also increased by m 3.5%. </p><p>Note that the block creation rate at orderer node was always greater than the processing rate at validator irrespective of block size and arrival rate.</p></blockquote><p><em>å¯¹äºåˆ°è¾¾ç‡å¤§äºé¥±å’Œç‚¹çš„æƒ…å†µï¼Œéšç€å—å¤§å°çš„å¢åŠ ï¼Œç­‰å¾…æ—¶é—´å‡å°‘ã€‚</em>ä¾‹å¦‚ï¼Œå½“åˆ°è¾¾ç‡ä¸º 150 tps æ—¶ï¼Œå—å¤§å°ä» 10å¢åŠ åˆ° 200ï¼Œäº¤æ˜“å»¶è¿Ÿä» 14 ç§’å‡å°‘åˆ° 10 ç§’ã€‚ </p><p>è¿™æ˜¯å› ä¸ºéªŒè¯å’Œæäº¤å¤§å°ä¸º n çš„å—æ‰€éœ€çš„æ—¶é—´æ€»æ˜¯æ¯”éªŒè¯å’Œæäº¤å¤§å°ä¸º n/m çš„ m ä¸ªå—æ‰€éœ€çš„æ—¶é—´çŸ­ã€‚ ç»“æœï¼Œååé‡ä¹Ÿå¢åŠ äº† 3.5ï¼…ã€‚ </p><p>è¯·æ³¨æ„ï¼Œæ— è®ºå—å¤§å°å’Œåˆ°è¾¾é€Ÿåº¦å¦‚ä½•ï¼Œåœ¨æ’åºèŠ‚ç‚¹ä¸Šçš„å—åˆ›å»ºé€Ÿåº¦å§‹ç»ˆå¤§äºéªŒè¯èŠ‚ç‚¹çš„å¤„ç†é€Ÿåº¦ã€‚</p><h3 id="Observation-4"><a href="#Observation-4" class="headerlink" title="Observation 4:"></a>Observation 4:</h3><blockquote><p><em>For a block size, the latency increases as arrival rate increases below the block size as the threshold. The latency decreases as arrival rate increases above the block size</em>. For lower block sizes and at higher arrival rates, blocks were created faster (rather than waiting for a block timeout) which reduced the transaction waiting time at the orderer node. In contrast, for instance, when the block size was 100 and arrival rate increased from 25 to 75 tps, the latency increased from 900 ms to 1250 ms. The reason is that with the increase in rate, the number of transactions in a block increased and so did the time taken by validation and commit phase. Note that if block size limit was not reached within a second, a block was created due to a block timeout.</p></blockquote><p><em>å¯¹äºå—å¤§å°ï¼Œé˜ˆå€¼ä»¥ä¸‹å»¶è¿Ÿéšç€åˆ°è¾¾ç‡å¢åŠ è€Œå¢åŠ ã€‚ é˜ˆå€¼ä»¥ä¸Šéšç€åˆ°è¾¾é€Ÿç‡å¢åŠ è€Œå‡å°‘</em>ã€‚å¯¹äºè¾ƒå°çš„å—å¤§å°å’Œè¾ƒé«˜çš„åˆ°è¾¾ç‡ï¼Œåˆ›å»ºå—çš„é€Ÿåº¦æ›´å¿«ï¼ˆè€Œä¸æ˜¯ç­‰å¾…å—è¶…æ—¶ï¼‰ï¼Œè¿™å‡å°‘äº†æ’åºèŠ‚ç‚¹çš„äº¤æ˜“ç­‰å¾…æ—¶é—´ã€‚ ç›¸åï¼Œä¾‹å¦‚ï¼Œå½“å—å¤§å°ä¸º 100 å¹¶ä¸”åˆ°è¾¾é€Ÿç‡ä» 25 tps å¢åŠ åˆ° 75 tps æ—¶ï¼Œå»¶è¿Ÿä» 900 ms å¢åŠ åˆ° 1250 msã€‚ </p><p>åŸå› æ˜¯éšç€é€Ÿç‡çš„å¢åŠ ï¼Œä¸€ä¸ªåŒºå—ä¸­çš„äº¤æ˜“æ•°é‡å¢åŠ äº†ï¼ŒéªŒè¯å’Œæäº¤é˜¶æ®µæ‰€èŠ±è´¹çš„æ—¶é—´ä¹Ÿå¢åŠ äº†ã€‚</p><p>è¯·æ³¨æ„ï¼Œå¦‚æœåœ¨ä¸€ç§’é’Ÿå†…æœªè¾¾åˆ°å—å¤§å°é™åˆ¶ï¼Œåˆ™ç”±äºå—è¶…æ—¶è€Œåˆ›å»ºäº†ä¸€ä¸ªå—ã€‚</p><h3 id="Observation-5"><a href="#Observation-5" class="headerlink" title="Observation 5:"></a>Observation 5:</h3><blockquote><p><em>Even at the peak throughput, the resources utilization was very low</em>. With an increase in the arrival rate from 25 to 175 tps, the avg CPU utilization merely increased from 1.4% to 6.7%. The reason is that the CPU intensive task performed during VSCC validation phase of a block (i.e., verification of signatures set against endorsement policy for each transaction) processed only one transaction at a time. Due to this serial execution, only one vCPU was utilized.</p></blockquote><p><em>å³ä½¿åœ¨å³°å€¼ååé‡ä¸‹ï¼Œèµ„æºåˆ©ç”¨ç‡ä¹Ÿå¾ˆä½</em>ã€‚ éšç€åˆ°è¾¾é€Ÿåº¦ä» 25 tps å¢åŠ åˆ° 175 tpsï¼Œå¹³å‡ CPU åˆ©ç”¨ç‡ä»…ä» 1.4ï¼… å¢åŠ åˆ° 6.7ï¼…ã€‚ </p><p>åŸå› æ˜¯ï¼Œåœ¨ä¸€ä¸ªå—çš„ VSCC éªŒè¯é˜¶æ®µï¼ˆå³ï¼Œé’ˆå¯¹æ¯ä¸ªäº¤æ˜“çš„æ ¹æ®èƒŒä¹¦ç­–ç•¥è¿›è¡Œçš„éªŒç­¾ï¼‰æ‰§è¡Œçš„ CPU å¯†é›†å‹ä»»åŠ¡ä¸€æ¬¡ä»…å¤„ç†ä¸€ä¸ªäº¤æ˜“ã€‚ ç”±äºä¸²è¡Œæ‰§è¡Œï¼Œå› æ­¤ä»…ä½¿ç”¨äº†ä¸€ä¸ª vCPUã€‚</p><h3 id="Guideline-1"><a href="#Guideline-1" class="headerlink" title="Guideline 1:"></a>Guideline 1:</h3><blockquote><p>When the transaction arrival rate is expected to be lower than the saturation point, to achieve a lower transaction latency for applications, always use a lower block size. In such cases, the throughput will match the arrival rate.</p></blockquote><p>å½“é¢„è®¡äº¤æ˜“åˆ°è¾¾ç‡ä½äºé¥±å’Œç‚¹æ—¶ï¼Œè¦å®ç°è¾ƒä½çš„åº”ç”¨ç¨‹åºäº¤æ˜“å»¶è¿Ÿï¼Œè¯·å§‹ç»ˆä½¿ç”¨è¾ƒå°çš„å—å¤§å°ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œååé‡å°†ä¸åˆ°è¾¾é€Ÿç‡åŒ¹é…ã€‚</p><h3 id="Guideline-2"><a href="#Guideline-2" class="headerlink" title="Guideline 2:"></a>Guideline 2:</h3><blockquote><p>When the transaction arrival rate is expected to be high, to achieve a higher throughput and a lower transaction latency, always use a higher block size.</p></blockquote><p>å½“é¢„è®¡äº¤æ˜“åˆ°è¾¾ç‡å¾ˆé«˜æ—¶ï¼Œè¦å®ç°æ›´é«˜çš„ååé‡å’Œæ›´ä½çš„äº¤æ˜“å»¶è¿Ÿï¼Œè¯·å§‹ç»ˆä½¿ç”¨æ›´å¤§çš„å—å¤§å°ã€‚</p><h3 id="Action-Item-1"><a href="#Action-Item-1" class="headerlink" title="Action Item 1:"></a>Action Item 1:</h3><blockquote><p>CPU resources are under-utilized. A potential optimization would be to process multiple transactions at a time during the VSCC validation phase as shown in Â§VI-B.</p></blockquote><p>CPUèµ„æºåˆ©ç”¨ä¸è¶³ã€‚ æ½œåœ¨çš„ä¼˜åŒ–å°†æ˜¯åœ¨ VSCC éªŒè¯é˜¶æ®µä¸€æ¬¡å¤„ç†å¤šä¸ªäº¤æ˜“ï¼Œå¦‚ Â§VI-B æ‰€ç¤ºã€‚</p><h2 id="B-Impact-of-Endorsement-Policy"><a href="#B-Impact-of-Endorsement-Policy" class="headerlink" title="B. Impact of Endorsement Policy"></a>B. Impact of Endorsement Policy</h2><blockquote><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200406185423203.png" alt="image-20200406185423203" style="zoom:50%;"><p>Figure 6 plots the throughput and latency for various endorsement policies defined using both AND/OR and NOutOf syntax over different transaction arrival rates. </p><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200406185445094.png" alt="image-20200406185445094" style="zoom:50%;"><p>Table III presents various policies used in this study. </p><p>Note that â€˜aâ€™, â€˜bâ€™, â€˜câ€™ and â€˜dâ€™ denotes four different organizations. For other parameters, refer to Table I. </p><p>Though the syntax (AND/OR, NOutOf) used to define the four endorsement policies are different, semantically they are same. For e.g., 3rd policy listed in both syntax denotes that any three organizations endorsement is adequate to pass the VSCC validation.</p></blockquote><p>å›¾ 6 ç»˜åˆ¶äº†ä½¿ç”¨ AND / OR å’Œ NOutOf è¯­æ³•å®šä¹‰çš„å„ç§èƒŒä¹¦ç­–ç•¥åœ¨ä¸åŒäº¤æ˜“åˆ°è¾¾ç‡ä¸Šçš„ååé‡å’Œå»¶è¿Ÿã€‚</p><p>è¡¨ III åˆ—å‡ºäº†æœ¬ç ”ç©¶ä¸­ä½¿ç”¨çš„å„ç§ç­–ç•¥ã€‚</p><p>è¯·æ³¨æ„ï¼Œâ€œ aâ€ï¼Œâ€œ bâ€ï¼Œâ€œ câ€ å’Œ â€œ dâ€ è¡¨ç¤ºå››ä¸ªä¸åŒçš„ç»„ç»‡ã€‚ æœ‰å…³å…¶ä»–å‚æ•°ï¼Œè¯·å‚é˜…è¡¨ I ã€‚</p><p>å°½ç®¡ç”¨äºå®šä¹‰å››ä¸ªèƒŒä¹¦ç­–ç•¥çš„è¯­æ³•ï¼ˆAND / ORï¼ŒNOutOfï¼‰ä¸åŒï¼Œä½†ä»è¯­ä¹‰ä¸Šè®²å®ƒä»¬æ˜¯ç›¸åŒçš„ã€‚ ä¾‹å¦‚ï¼Œä¸¤ç§è¯­æ³•ä¸­åˆ—å‡ºçš„ç¬¬ä¸‰ä¸ªç­–ç•¥è¡¨ç¤ºï¼Œä»»æ„ä¸‰ä¸ªç»„ç»‡çš„è®¤å¯éƒ½è¶³ä»¥é€šè¿‡ VSCC éªŒè¯ã€‚</p><h3 id="Observation-6"><a href="#Observation-6" class="headerlink" title="Observation 6:"></a>Observation 6:</h3><blockquote><p><em>A combination of a number of sub-policies and a number of crypto signatures verification impacted the performance</em> as shown in Figure 6. The 1st and 4th AND/OR policies, having no sub-policies, performed the same as NOutOf policies due to a few signatures verification. With sub-policies, both the number of sub-policies (i.e., search space) and the number of signatures dictated the performance. For e.g., the throughput achieved with 2nd &amp; 3rd AND/OR policies was 7% &amp; 20% lesser than other policies, respectively.</p></blockquote><p>å¦‚å›¾6æ‰€ç¤ºï¼Œ<em>å­ç­–ç•¥å’ŒåŠ å¯†ç­¾åéªŒè¯çš„ç»„åˆä¼šå½±å“æ€§èƒ½</em>ã€‚ç”±äºç­¾åéªŒè¯çš„åŸå› ï¼Œæ²¡æœ‰å­ç­–ç•¥çš„ç¬¬ 1 å’Œç¬¬ 4 ä¸ª AND / OR ç­–ç•¥çš„æ‰§è¡Œæ•ˆæœä¸ NOutOf ç­–ç•¥ç›¸åŒã€‚ æœ‰å­ç­–ç•¥çš„æƒ…å†µä¸‹ï¼Œå­ç­–ç•¥çš„æ•°é‡ï¼ˆå³æœç´¢ç©ºé—´ï¼‰å’Œç­¾åçš„æ•°é‡éƒ½å†³å®šäº†æ€§èƒ½ã€‚ ä¾‹å¦‚ï¼Œä½¿ç”¨ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªAND / OR ç­–ç•¥å®ç°çš„ååé‡åˆ†åˆ«æ¯”å…¶ä»–ç­–ç•¥ä½ 7ï¼…å’Œ20ï¼…ã€‚</p><blockquote><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200406185534544.png" alt="image-20200406185534544" style="zoom:50%;"><p>Figure 7 plots the VSCC latency and the resource utilization at a peer node for various policies. With an increase in the number of signatures verification (specifically for NOutOf), the VSCC latency increased linearly from 68 ms to 137 ms. When there were sub-policies (as with 2nd and 3rd AND/OR policies), the VSCC latency increased significantly (i.e., 172 ms and 203 ms, respectively). A similar trend for resource utilization as show in Figure 7(b). </p><p>Note that the block bytes increased with increase in the number of endorsements due to the number of x.509 certificates encoded in each transaction.</p></blockquote><p>å›¾ 7 ç»˜åˆ¶äº†å„ç§ç­–ç•¥ä¸‹çš„ VSCC å»¶è¿Ÿå’Œå¯¹ç­‰èŠ‚ç‚¹ä¸Šçš„èµ„æºåˆ©ç”¨ç‡ã€‚ éšç€ç­¾åéªŒè¯æ•°é‡çš„å¢åŠ ï¼ˆç‰¹åˆ«æ˜¯å¯¹äºNOutOfï¼‰ï¼ŒVSCC å»¶è¿Ÿä» 68 ms çº¿æ€§å¢åŠ åˆ° 137 msã€‚ å½“å­˜åœ¨å­ç­–ç•¥æ—¶ï¼ˆä¸ç¬¬ 2 å’Œç¬¬ 3 AND / ORç­–ç•¥ä¸€æ ·ï¼‰ï¼ŒVSCC å»¶è¿Ÿæ˜¾ç€å¢åŠ ï¼ˆå³åˆ†åˆ«ä¸º 172 ms å’Œ 203 msï¼‰ã€‚ èµ„æºåˆ©ç”¨ç‡è¶‹åŠ¿ç±»ä¼¼ï¼Œå¦‚å›¾7ï¼ˆbï¼‰æ‰€ç¤ºã€‚ </p><p>è¯·æ³¨æ„ï¼Œç”±äºæ¯ä¸ªäº¤æ˜“ä¸­ç¼–ç çš„ x.509 è¯ä¹¦æ•°é‡å¢åŠ ï¼Œå› æ­¤å—å­—èŠ‚éšç€èƒŒä¹¦æ•°é‡çš„å¢åŠ è€Œå¢åŠ ã€‚</p><blockquote><p>There are three major CPU intensive operations during the policy validation phase (excluding the check for satisfiability) which are listed below.</p><p>1) Deserialization of identity (i.e., x.509 certificate). </p><p>2) Validation of identity with organization MSP. </p><p>3) Verification of signature on the transaction data.</p></blockquote><p>åœ¨ç­–ç•¥éªŒè¯é˜¶æ®µæœ‰3ä¸ªä¸»è¦çš„CPUå¯†é›†å‹æ“ä½œï¼ˆä¸åŒ…æ‹¬æ»¡è¶³æ€§æ£€æŸ¥ï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><p>1ï¼‰èº«ä»½çš„ååºåˆ—åŒ–ï¼ˆå³ x.509 è¯ä¹¦ï¼‰ã€‚</p><p>2ï¼‰ä¸ç»„ç»‡ MSP ä¸€èµ·éªŒè¯èº«ä»½ã€‚</p><p>3ï¼‰éªŒè¯äº¤æ˜“æ•°æ®ä¸Šçš„ç­¾åã€‚</p><blockquote><p>Hence, with an increase in the sub-policies (i.e., search space), the number of identities &amp; signatures to be validated, both CPU utilization and VSCC latency increased. It is interesting to note that the MSP identifier is not sent along with x.509 certificate. As a result, the policy evaluator has to validate each x.509 certificate with multiple organization MSPs to identify the correct one. For a 5 minutes run at an arrival rate of 150 tps, we observed 220K such validation out of which 96K validation failed that resulted in wastage of CPU and time.</p></blockquote><p>å› æ­¤ï¼Œéšç€å­ç­–ç•¥ï¼ˆå³æœç´¢ç©ºé—´ï¼‰ã€è¦éªŒè¯çš„èº«ä»½å’Œç­¾åçš„æ•°é‡çš„å¢åŠ ï¼Œ CPU åˆ©ç”¨ç‡å’Œ VSCC å»¶è¿Ÿéƒ½å¢åŠ äº†ã€‚ æœ‰è¶£çš„æ˜¯ï¼ŒMSP æ ‡è¯†ç¬¦æ²¡æœ‰ä¸ x.509 è¯ä¹¦ä¸€èµ·å‘é€ã€‚ ç»“æœï¼Œç­–ç•¥è¯„ä¼°è€…å¿…é¡»ä½¿ç”¨å¤šä¸ªç»„ç»‡ MSP éªŒè¯æ¯ä¸ª x.509 è¯ä¹¦ï¼Œä»¥è¯†åˆ«å‡ºæ­£ç¡®çš„è¯ä¹¦ã€‚ ä»¥ 150 tps çš„åˆ°è¾¾é€Ÿåº¦è¿è¡Œäº† 5 åˆ†é’Ÿï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ° 220K è¿™æ ·çš„éªŒè¯ï¼Œå…¶ä¸­ 96K éªŒè¯å¤±è´¥ï¼Œè¿™å¯¼è‡´ CPU å’Œæ—¶é—´çš„æµªè´¹ã€‚</p><h3 id="Guideline-3"><a href="#Guideline-3" class="headerlink" title="Guideline 3:"></a>Guideline 3:</h3><blockquote><p>To achieve a high performance, define policies with a fewer number of sub-policies and signatures.</p></blockquote><p>è¦è·å¾—é«˜æ€§èƒ½ï¼Œå®šä¹‰ç­–ç•¥æ—¶ä½¿ç”¨è¾ƒå°‘çš„å­ç­–ç•¥å’Œç­¾åã€‚</p><h3 id="Action-Item-2"><a href="#Action-Item-2" class="headerlink" title="Action Item 2:"></a>Action Item 2:</h3><blockquote><p>As the cryptography operations are CPU intensive, we can avoid certain routine operations by maintaining a cache of deserialized identity and their MSP information as shown in Â§VI-A. This does not introduce a security risk as identities are long-lived and separate Certificate Revocation Lists (CRLs) are maintained.</p></blockquote><p>ç”±äºåŠ å¯†æ“ä½œæ˜¯ CPU å¯†é›†å‹æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç»´æŠ¤ååºåˆ—åŒ–èº«ä»½åŠå…¶ MSP ä¿¡æ¯çš„ç¼“å­˜æ¥é¿å…æŸäº›å¸¸è§„æ“ä½œï¼Œå¦‚ç¬¬ VI-A èŠ‚æ‰€ç¤ºã€‚è¿™ä¸ä¼šå¸¦æ¥å®‰å…¨é£é™©ï¼Œå› ä¸ºèº«ä»½æ˜¯é•¿æœŸçš„ï¼Œå¹¶ä¸”ç»´æŠ¤å•ç‹¬çš„è¯ä¹¦åŠé”€åˆ—è¡¨ï¼ˆCRLï¼‰ã€‚</p><h2 id="C-Impact-of-Channels-and-Resource-Allocation"><a href="#C-Impact-of-Channels-and-Resource-Allocation" class="headerlink" title="C. Impact of Channels and Resource Allocation"></a>C. Impact of Channels and Resource Allocation</h2><blockquote><p>We categorize the arrival rate for different channel count into two categories; non-overloaded when the latency range was [0.4-1s] and overloaded when the latency range was [30-40s]. Figure 8 plots the average throughput and CPU utilization for these two categories. Table IV presents a various number of channels and transaction arrival rate used for this study. For other parameters, refer to Table I. All peers joined all the channels as described in Â§IV.</p><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200416232925323.png" alt="image-20200416232925323" style="zoom:50%;"></blockquote><p>æˆ‘ä»¬å°†ä¸åŒé€šé“æ•°çš„åˆ°è¾¾ç‡åˆ†ä¸ºä¸¤ç±»ï¼š æ—¶å»¶èŒƒå›´ä¸º[0.4-1s]æ—¶ä¸è¿‡è½½ï¼Œæ—¶å»¶èŒƒå›´ä¸º[30-40s]æ—¶è¿‡è½½ã€‚ å›¾8ç»˜åˆ¶äº†è¿™ä¸¤ç±»çš„å¹³å‡ååé‡å’ŒCPUåˆ©ç”¨ç‡ã€‚ è¡¨IVåˆ—å‡ºäº†ç”¨äºæ­¤ç ”ç©¶çš„å„ç§é€šé“å’Œäº¤æ˜“åˆ°è¾¾ç‡ã€‚ æœ‰å…³å…¶ä»–å‚æ•°ï¼Œè¯·å‚é˜…è¡¨Iã€‚æ‰€æœ‰å¯¹ç­‰æ–¹éƒ½æŒ‰ç…§Â§IVä¸­çš„è¯´æ˜åŠ å…¥äº†æ‰€æœ‰é€šé“ã€‚</p><h3 id="Observation-7"><a href="#Observation-7" class="headerlink" title="Observation 7:"></a>Observation 7:</h3><blockquote><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200406223431746.png" alt="image-20200406223431746" style="zoom:50%;"><p><em>With the increase in the number of channels, the throughput increased and latency decreased. The resource utilization such as CPU also increased</em> as shown in Figure 8. For e.g., with the increase in the number of channels from 1 to 16, the throughput increased from 140 tps to 832 tps (i.e., by 6Ã— in non-overloaded case) and to 1320 tps (i.e., 9.5Ã— in overloaded case). This is because each channel is independent of others and maintains its own chain of blocks. Hence, the validation phase and the final ledger update of multiple blocks (one per channel) executed in parallel which increased CPU utilization that resulted in higher throughput.</p></blockquote><p>å¦‚å›¾ 8 æ‰€ç¤ºï¼Œ<em>éšç€é€šé“æ•°çš„å¢åŠ ï¼Œç³»ç»Ÿçš„ååé‡å¢åŠ ï¼Œæ—¶å»¶å‡å°ã€‚CPU ç­‰èµ„æºåˆ©ç”¨ç‡ä¹Ÿå¢åŠ äº†</em>ã€‚ä¾‹å¦‚ï¼Œéšç€ä¿¡é“æ•°ç›®ä» 1 å¢åŠ åˆ° 16ï¼Œååé‡ä» 140 tps å¢åŠ åˆ° 832 tpsï¼ˆå³ï¼Œåœ¨éè¿‡è½½æƒ…å†µä¸‹å¢åŠ  6 å€ï¼‰æˆ–å¢åŠ åˆ° 1320 tpsï¼ˆå³ï¼Œåœ¨è¿‡è½½æƒ…å†µä¸‹å¢åŠ  9.5 å€ï¼‰ã€‚è¿™æ˜¯å› ä¸ºæ¯ä¸ªé€šé“éƒ½ç‹¬ç«‹äºå…¶ä»–é€šé“ï¼Œå¹¶ç»´æŠ¤è‡ªå·±çš„åŒºå—é“¾ã€‚å› æ­¤ï¼Œå¤šä¸ªå—ï¼ˆæ¯ä¸ªé€šé“ä¸€ä¸ªï¼‰çš„éªŒè¯é˜¶æ®µå’Œæœ€ç»ˆè´¦æœ¬çš„æ›´æ–°éƒ½æ˜¯å¹¶è¡Œæ‰§è¡Œï¼Œè¿™æé«˜äº† CPU åˆ©ç”¨ç‡ï¼Œä»è€Œæé«˜äº†ååé‡ã€‚</p><blockquote><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200406223953830.png" alt="image-20200406223953830" style="zoom:50%;"><p>Figure 9(a) and (b) plot the throughput, endorsement &amp; commit latency for 4 and 16 channels, respectively, over a different number of allocated vCPUs but homogeneous peers. Figure 9(c) plots the absolute (instead of average) CPU utilization across all vCPUs. Table V presents a various number of vCPUs allocated, the number of channels and transaction arrival rate used. For other parameters, refer to Table I. </p><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200408103129527.png" alt="image-20200408103129527" style="zoom:50%;"></blockquote><p>å›¾9ï¼ˆaï¼‰å’Œï¼ˆbï¼‰åˆ†åˆ«ç»˜åˆ¶äº† 4 ä¸ªå’Œ 16 ä¸ªé€šé“åœ¨åŒæ„èŠ‚ç‚¹ä½†ä¸åŒæ•°é‡çš„ vcpu åˆ†é…ä¸Šçš„ååé‡ã€èƒŒä¹¦å’Œæäº¤å»¶è¿Ÿã€‚å›¾9ï¼ˆcï¼‰æç»˜äº†æ‰€æœ‰ vcpu çš„ç»å¯¹ï¼ˆè€Œä¸æ˜¯å¹³å‡ï¼‰CPU åˆ©ç”¨ç‡ã€‚è¡¨ V æ˜¾ç¤ºäº†åˆ†é…çš„å„ç§ VCPU æ•°ã€ä½¿ç”¨çš„é€šé“æ•°å’Œäº¤æ˜“åˆ°è¾¾ç‡ã€‚å…¶å®ƒå‚æ•°è§è¡¨ Iã€‚</p><h3 id="Observation-8"><a href="#Observation-8" class="headerlink" title="Observation 8:"></a>Observation 8:</h3><blockquote><p><em>At moderate loads, when the number of vCPUs allocated were lesser than the channel count, performance degraded</em>. For e.g., When the number of vCPUs allocated were lesser than 16 for 16 channels, the throughput reduced significantly from 848 tps to 32 tps (by 26Ã—) â€“ refer to Figure 9(b). </p><p>Further, both the average endorsement and commit latency exploded (from 37 ms to 21 s, and 640 ms to 49 s, respectively) due to a lot of contention on the CPU. </p><p>Further, a significant number of requests got a timeout during the endorsement phase. Once a timeout occurs, we marked that transaction as failed. With an allocation of 2 vCPUs, a higher number of endorsement requests got a timeout as compared to 4 vCPUs. Thus, the endorsement and commit latency (of successful transactions) observed with 2 vCPUs were lesser than 4 vCPUs as shown in Figure 9(b).</p></blockquote><p><em>åœ¨ä¸­ç­‰è´Ÿè½½ä¸‹ï¼Œå½“åˆ†é…çš„ vCPU æ•°é‡å°‘äºé€šé“æ•°é‡æ—¶ï¼Œæ€§èƒ½ä¼šä¸‹é™</em>ã€‚ ä¾‹å¦‚ï¼Œå½“åˆ†é…çš„ vCPU æ•°é‡å°‘äº 16 ä¸ªé€šé“çš„ 16 ä¸ªæ—¶ï¼Œååé‡ä» 848 tps æ˜¾ç€é™ä½åˆ° 32 tpsï¼ˆé™ä½äº†26å€ï¼‰â€“å‚è§å›¾9ï¼ˆbï¼‰ã€‚ </p><p>æ­¤å¤–ï¼Œç”±äº CPU ä¸Šçš„å¤§é‡äº‰ç”¨ï¼ŒèƒŒä¹¦å’Œæäº¤çš„å¹³å‡å»¶æ—¶éƒ½çˆ†ç‚¸äº†ï¼ˆåˆ†åˆ«ä» 37 msåˆ° 21s å’Œ 640 ms åˆ° 49 sï¼‰ã€‚</p><p> æ­¤å¤–ï¼Œåœ¨èƒŒä¹¦é˜¶æ®µï¼Œå¤§é‡ç­¾åè¯·æ±‚è¶…æ—¶ã€‚ ä¸€æ—¦è¶…æ—¶ï¼Œæˆ‘ä»¬å°†è¯¥äº¤æ˜“æ ‡è®°ä¸ºå¤±è´¥ã€‚ ä¸ 4 ä¸ª vCPU ç›¸æ¯”ï¼Œåˆ†é… 2 ä¸ª vCPU ä¼šå¯¼è‡´æ›´å¤šçš„èƒŒä¹¦è¯·æ±‚è¶…æ—¶ã€‚ å› æ­¤ï¼Œå¦‚å›¾9ï¼ˆbï¼‰æ‰€ç¤ºï¼Œä½¿ç”¨ 2 ä¸ª vCPU è§‚å¯Ÿåˆ°çš„ï¼ˆæˆåŠŸäº¤æ˜“ï¼‰èƒŒä¹¦å’Œæäº¤ç­‰å¾…æ—¶é—´å°äº 4 ä¸ª vCPUã€‚</p><blockquote><p>Due to the CPU contention, the VSCC latency also increased that affected the commit latency as shown in Figure 9(c). Increasing the vCPUs allocation increased CPU utilization and consequently performance up-to a peak where vCPUs matched the number of channels. Beyond this, additionally allocated vCPUs were idle due to the single-threaded sequential VSCC validation â€“ refer to Figure 9(c).</p></blockquote><p>ç”±äº CPU äº‰ç”¨ï¼ŒVSCC å»¶è¿Ÿä¹Ÿå¢åŠ äº†ï¼Œè¿™å½±å“äº†æäº¤å»¶è¿Ÿï¼Œå¦‚å›¾9ï¼ˆcï¼‰æ‰€ç¤ºã€‚ å¢åŠ  vCPU åˆ†é…å¢åŠ äº† CPU åˆ©ç”¨ç‡ï¼Œå› æ­¤æ€§èƒ½è¾¾åˆ°äº† vCPU ä¸é€šé“æ•°åŒ¹é…çš„å³°å€¼ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œç”±äºå•çº¿ç¨‹é¡ºåº VSCC éªŒè¯ï¼Œé¢å¤–åˆ†é…çš„ vCPU å¤„äºç©ºé—²çŠ¶æ€ â€“ å‚è§å›¾9ï¼ˆcï¼‰ã€‚</p><blockquote><p>Figure 9(d) plot the throughput and latency for 16 channels in a heterogeneous setup. Table VI presents a various number of vCPUs allocated for different peers to enable heterogeneity, the number of channels, transaction complexity and transaction arrival rate used. For other parameters, refer to Table I.</p><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200408104549524.png" alt="image-20200408104549524" style="zoom:50%;"></blockquote><p>å›¾9ï¼ˆdï¼‰ç»˜åˆ¶äº†å¼‚æ„è®¾ç½®ä¸­ 16 ä¸ªé€šé“çš„ååé‡å’Œç­‰å¾…æ—¶é—´ã€‚ è¡¨ VI åˆ—å‡ºäº†åˆ†é…ç»™ä¸åŒèŠ‚ç‚¹çš„å„ç§ vCPUï¼Œä»¥å®ç°å¼‚æ„æ€§ã€é€šé“æ•°ã€äº¤æ˜“å¤æ‚æ€§å’Œæ‰€ä½¿ç”¨çš„äº¤æ˜“åˆ°è¾¾ç‡ã€‚ æœ‰å…³å…¶ä»–å‚æ•°ï¼Œè¯·å‚é˜…è¡¨ Iã€‚</p><h3 id="Observation-9"><a href="#Observation-9" class="headerlink" title="Observation 9:"></a>Observation 9:</h3><blockquote><p><em>At moderate loads, even when the number of vCPUs allocated for 2 peers out of 8 were lesser than the channel count, performance degraded</em>. For e.g., when only 2 vCPUs were allocated for 2 peers (others with 32 vCPUs), the throughput reduced from 848 tps to 417 tps (by 2Ã—) for write-only transactions and to 307 tps (by 2.7Ã—) for readwrite transactions. </p><p>The reasons for the reduction are twofold, endorsement requests timeout from less powerful peers and MVCC conflicts specifically for read/write transactions. </p><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200408104913866.png" alt="image-20200408104913866" style="zoom:50%;"><p>Figure 10(a) plots the endorsement requests timeout, valid transactions and invalid transactions due to MVCC conflicts for readwrite transactions. With an increase in the number of less powerful peers, the endorsement requests timeout increased. </p><p>Further, a higher proportion of total submitted transactions became invalid due to MVCC conflicts. The is because of the lower block commit rate at less powerful peers as compared to powerful peers. Due to the different block height at peers (refer to Figure 10(b)), there was a mismatch of keyâ€™s version in the read-set collected. As a result, MVCC conflicts occurred during the state validation which invalidated transactions.</p></blockquote><p><em>åœ¨ä¸­ç­‰è´Ÿè½½ä¸‹ï¼Œå³ä½¿ä¸º 8 ä¸ªä¸­çš„ 2 ä¸ªèŠ‚ç‚¹åˆ†é…çš„ vCPU æ•°é‡å°‘äºé€šé“æ•°ï¼Œæ€§èƒ½ä¹Ÿä¼šä¸‹é™</em>ã€‚ä¾‹å¦‚ï¼Œå½“ä»…ä¸º 2 ä¸ªå¯¹ç­‰èŠ‚ç‚¹åˆ†é… 2 ä¸ª vCPU æ—¶ï¼ˆå…¶ä»–å…·æœ‰ 32 ä¸ªvCPUï¼‰ï¼Œä»…å†™äº¤æ˜“çš„ååé‡ä» 848 tps å‡å°‘åˆ° 417 tpsï¼ˆ2å€ï¼‰ï¼Œè€Œè¯»å†™æ“ä½œå‡å°‘åˆ°307 tpsï¼ˆ2.7å€ï¼‰ã€‚</p><p>å‡å°‘çš„åŸå› æœ‰ä¸¤ä¸ªï¼šæ”¯æŒèƒ½åŠ›è¾ƒå¼±çš„èŠ‚ç‚¹èƒŒä¹¦è¯·æ±‚è¶…æ—¶ï¼Œä»¥åŠä¸“é—¨é’ˆå¯¹è¯»/å†™äº¤æ˜“çš„ MVCC å‘ç”Ÿå†²çªã€‚</p><p>å›¾10ï¼ˆaï¼‰æç»˜äº†ç”±äºè¯»å†™äº¤æ˜“çš„ MVCC å†²çªè€Œå¯¼è‡´çš„èƒŒä¹¦è¯·æ±‚è¶…æ—¶ï¼Œæœ‰æ•ˆäº¤æ˜“å’Œæ— æ•ˆäº¤æ˜“ã€‚éšç€èƒ½åŠ›è¾ƒå¼±èŠ‚ç‚¹çš„æ•°é‡å¢åŠ ï¼ŒèƒŒä¹¦è¯·æ±‚è¶…æ—¶ä¹Ÿå¢åŠ äº†ã€‚</p><p>æ­¤å¤–ï¼Œç”±äº MVCC å†²çªï¼Œæäº¤çš„äº¤æ˜“ä¸­æœ‰è¾ƒé«˜æ¯”ä¾‹å˜å¾—æ— æ•ˆã€‚è¿™æ˜¯å› ä¸ºä¸åŠŸèƒ½å¼ºå¤§çš„èŠ‚ç‚¹ç›¸æ¯”ï¼ŒåŠŸèƒ½è¾ƒå¼±çš„å¯¹ç­‰èŠ‚ç‚¹çš„å—æäº¤ç‡è¾ƒä½ã€‚ç”±äºå¯¹ç­‰èŠ‚ç‚¹çš„å—é«˜åº¦ä¸åŒï¼ˆè¯·å‚è§å›¾10ï¼ˆbï¼‰ï¼‰ï¼Œå› æ­¤æ”¶é›†çš„è¯»å–é›†ä¸­çš„å¯†é’¥ç‰ˆæœ¬ä¸åŒ¹é…ã€‚ç»“æœï¼Œåœ¨çŠ¶æ€éªŒè¯æœŸé—´å‘ç”Ÿäº† MVCC å†²çªï¼Œä½¿äº¤æ˜“æ— æ•ˆã€‚</p><blockquote><p>Though we have not studied the impact of network resources, we believe that the impact would be similar to that of CPU. This is because, with a low network bandwidth, the delay in both the block and transaction delivery would increase. Even with the heterogeneous network resources for peers, we expect the impact to be similar to the one we observed with CPU.</p></blockquote><p>å°½ç®¡æˆ‘ä»¬å°šæœªç ”ç©¶ç½‘ç»œèµ„æºçš„å½±å“ï¼Œä½†æˆ‘ä»¬è®¤ä¸ºå½±å“å°†ä¸ CPU ç›¸ä¼¼ã€‚ è¿™æ˜¯å› ä¸ºåœ¨ä½ç½‘ç»œå¸¦å®½çš„æƒ…å†µä¸‹ï¼Œå—å’Œäº¤æ˜“ä¼ é€’çš„å»¶è¿Ÿéƒ½ä¼šå¢åŠ ã€‚ å³ä½¿ä½¿ç”¨å¯¹ç­‰èŠ‚ç‚¹çš„å¼‚æ„ç½‘ç»œèµ„æºï¼Œæˆ‘ä»¬é¢„æœŸå…¶å½±å“ä¸æˆ‘ä»¬åœ¨ CPU ä¸Šè§‚å¯Ÿåˆ°çš„å½±å“ç›¸ä¼¼ã€‚</p><h3 id="Guideline-4"><a href="#Guideline-4" class="headerlink" title="Guideline 4:"></a>Guideline 4:</h3><blockquote><p>To achieve higher throughput and lower latency, it is better to allocate at least one vCPU per channel. For optimal vCPU allocation, we need to determine the expected load at each channel and allocate adequate vCPUs accordingly.</p></blockquote><p>ä¸ºäº†è·å¾—æ›´é«˜çš„ååé‡å’Œæ›´ä½çš„å»¶è¿Ÿï¼Œæœ€å¥½ä¸ºæ¯ä¸ªé€šé“åˆ†é…è‡³å°‘ä¸€ä¸ª vCPUã€‚ ä¸ºäº†è·å¾—æœ€ä½³çš„ vCPU åˆ†é…ï¼Œæˆ‘ä»¬éœ€è¦ç¡®å®šæ¯ä¸ªé€šé“çš„é¢„æœŸè´Ÿè½½ï¼Œå¹¶ç›¸åº”åœ°åˆ†é…è¶³å¤Ÿçš„ vCPUã€‚</p><h3 id="Guideline-5"><a href="#Guideline-5" class="headerlink" title="Guideline 5:"></a>Guideline 5:</h3><blockquote><p>To achieve higher throughput and lower latency, it is better to avoid heterogeneous peers as the performance would be dictated by less powerful peers.</p></blockquote><p>ä¸ºäº†è·å¾—æ›´é«˜çš„ååé‡å’Œæ›´ä½çš„å»¶è¿Ÿï¼Œæœ€å¥½é¿å…å¼‚æ„èŠ‚ç‚¹ï¼Œå› ä¸ºæ€§èƒ½å°†ç”±åŠŸèƒ½è¾ƒå¼±çš„èŠ‚ç‚¹å†³å®šã€‚</p><h3 id="Action-Item-3"><a href="#Action-Item-3" class="headerlink" title="Action Item 3:"></a>Action Item 3:</h3><blockquote><p>Processing transactions within a channel and across channels can be improved to better utilize additional CPU power as shown in Â§VI-B.</p></blockquote><p>å¦‚ Â§VI-B æ‰€ç¤ºï¼Œå¯ä»¥æ”¹è¿›é€šé“å†…å’Œé€šé“é—´çš„äº¤æ˜“å¤„ç†ï¼Œä»¥æ›´å¥½åœ°åˆ©ç”¨é¢å¤–çš„ CPU åŠŸèƒ½ã€‚</p><h2 id="D-Impact-of-Ledger-Database"><a href="#D-Impact-of-Ledger-Database" class="headerlink" title="D. Impact of Ledger Database"></a>D. Impact of Ledger Database</h2><blockquote><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200408111402250.png" alt="image-20200408111402250" style="zoom:50%;"><p>Figure 11 plots the average throughput and latency over multiple transaction arrival rates for both GoLevelDB and CouchDB with different transaction complexities. Table VII presents various databases, transaction complexity and arrival rate used. For other parameters, refer to Table I.</p><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200408111414932.png" alt="image-20200408111414932" style="zoom:50%;"></blockquote><p>å›¾ 11 ç»˜åˆ¶äº†å…·æœ‰ä¸åŒäº¤æ˜“å¤æ‚æ€§çš„ GoLevelDB å’Œ CouchDB åœ¨å¤šä¸ªäº¤æ˜“åˆ°è¾¾ç‡ä¸Šçš„å¹³å‡ååé‡å’Œå»¶è¿Ÿã€‚ è¡¨ VII åˆ—å‡ºäº†ä½¿ç”¨çš„å„ç§æ•°æ®åº“ï¼Œäº¤æ˜“å¤æ‚æ€§å’Œåˆ°è¾¾ç‡ã€‚ æœ‰å…³å…¶ä»–å‚æ•°ï¼Œè¯·å‚é˜…è¡¨ Iã€‚</p><h3 id="Observation-10"><a href="#Observation-10" class="headerlink" title="Observation 10:"></a>Observation 10:</h3><blockquote><p><em>The Fabric transaction throughput with GoLevelDB as state database was 3*Ã— *greater than CouchDB</em>. The maximum throughput achieved with GoLevelDB on a single channel was 140 tps (refer to Figure 4) while with CouchDB, it was only 50 tps (refer to Figure 11(b)). </p><p>Further, with an increase in the transaction complexity, i.e., for multiple writes, the throughput with CouchDB dropped from 50 tps to 18 tps while no such impact with GoLevelDB (refer to Figure 11(a)). The reason for significant performance differences between CouchDB and GoLevelDB is that the latter is an embedded database to peer process while former is accessed using REST APIs over a secure HTTP. As a result, the endorsement latency, VSCC latency, MVCC latency and the ledger update latency was higher with CouchDB as compared to the GoLevelDB as shown in Figure 12(a) &amp; (b). With CouchDB, the VSCC latency increased compared to the GoLevelDB as the peer accessed state database using a REST API call for every transaction to retrieve the endorsement policy of the chaincode on which the transaction was simulated. Similarly, the MVCC latency also increased with CouchDB.</p><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200408112038781.png" alt="image-20200408112038781" style="zoom:50%;"></blockquote><p><em>ä½¿ç”¨ GoLevelDB ä½œä¸ºçŠ¶æ€æ•°æ®åº“çš„ Fabric äº¤æ˜“ååé‡æ¯” CouchDB é«˜ 3 å€</em>ã€‚ä½¿ç”¨ GoLevelDB åœ¨å•ä¸ªé€šé“ä¸Šå®ç°çš„æœ€å¤§ååé‡ä¸º140 tpsï¼ˆè¯·å‚è§å›¾4ï¼‰ï¼Œè€Œå¯¹äºCouchDBï¼Œåˆ™ä»…ä¸º50 tpsï¼ˆè¯·å‚è§å›¾11ï¼ˆbï¼‰ï¼‰ã€‚</p><p>æ­¤å¤–ï¼Œéšç€äº¤æ˜“å¤æ‚åº¦çš„å¢åŠ ï¼Œå³å¯¹äºå¤šæ¬¡å†™å…¥ï¼ŒCouchDB çš„ååé‡ä» 50 tps ä¸‹é™åˆ° 18 tpsï¼Œè€Œ GoLevelDB åˆ™æ²¡æœ‰è¿™ç§å½±å“ï¼ˆè¯·å‚è§å›¾11ï¼ˆaï¼‰ï¼‰ã€‚ CouchDB å’Œ GoLevelDB ä¹‹é—´çš„æ˜¾ç€æ€§èƒ½å·®å¼‚çš„åŸå› æ˜¯ï¼Œåè€…æ˜¯èŠ‚ç‚¹è¿›ç¨‹çš„åµŒå…¥å¼æ•°æ®åº“ï¼Œè€Œå‰è€…æ˜¯é€šè¿‡ REST API é€šè¿‡å®‰å…¨ HTTP è®¿é—®çš„ã€‚ ç»“æœå¦‚å›¾12ï¼ˆaï¼‰å’Œï¼ˆbï¼‰æ‰€ç¤ºï¼Œä¸ GoLevelDB ç›¸æ¯”ï¼ŒCouchDB çš„èƒŒä¹¦ç­‰å¾…æ—¶é—´ï¼ŒVSCC ç­‰å¾…æ—¶é—´ï¼ŒMVCC ç­‰å¾…æ—¶é—´å’Œè´¦æœ¬æ›´æ–°ç­‰å¾…æ—¶é—´æ›´é«˜ã€‚ ä¸ GoLevelDB ç›¸æ¯”ï¼Œä½¿ç”¨ CouchDB æ—¶ï¼ŒVSCC å»¶è¿Ÿå¢åŠ äº†ï¼Œå› ä¸ºèŠ‚ç‚¹è®¿é—®çŠ¶æ€æ•°æ®åº“ä½¿ç”¨ REST API è°ƒç”¨æ¯ä¸ªäº¤æ˜“æ¥æ£€ç´¢åœ¨å…¶ä¸Šæ¨¡æ‹Ÿäº¤æ˜“çš„é“¾ç çš„èƒŒä¹¦ç­–ç•¥ã€‚ åŒæ ·ï¼ŒCouchDB ä¹Ÿå¢åŠ äº† MVCC å»¶è¿Ÿã€‚</p><h3 id="Observation-11"><a href="#Observation-11" class="headerlink" title="Observation 11:"></a>Observation 11:</h3><blockquote><p><em>With CouchDB, the endorsement latency and ledger update latency increased with an increase in the number of writes per transaction</em>, i.e., from 40 ms and 240 ms with one write to 800 ms and 1200 ms with three writes, respectively, as shown in Figure 12(b) even though write-only transactions do not access the database during the endorsement phase. </p><p>This is because the endorsement phase acquired a shared read lock on the whole database to provide a consistent view of data (i.e., <em>repeatable read isolation level</em>) to the chaincode. Similarly, the final ledger update phase acquired an exclusive write lock on the whole database. Hence, both the endorsement phase and final ledger update contended for this resource. Especially, the final ledger update with CouchDB was costlier as it had to perform the following three tasks for each key-value write in a transactionâ€™s write-set.</p></blockquote><p>å¦‚å›¾12ï¼ˆbï¼‰æ‰€ç¤ºï¼Œ<em>ä½¿ç”¨ CouchDB æ—¶ï¼ŒèƒŒä¹¦ç­‰å¾…æ—¶é—´å’Œè´¦æœ¬æ›´æ–°ç­‰å¾…æ—¶é—´éšç€æ¯ç¬”äº¤æ˜“çš„å†™å…¥æ¬¡æ•°çš„å¢åŠ è€Œå¢åŠ </em>ï¼Œå³ä»ä¸€æ¬¡å†™å…¥çš„ 40ms å’Œ 240ms å¢åŠ åˆ°ä¸‰æ¬¡å†™å…¥çš„ 800ms å’Œ 1200msï¼Œå³ä½¿åªå†™äº¤æ˜“åœ¨èƒŒä¹¦é˜¶æ®µä¹Ÿä¸è®¿é—®æ•°æ®åº“ã€‚ </p><p>è¿™æ˜¯å› ä¸ºèƒŒä¹¦é˜¶æ®µè·å¾—äº†æ•´ä¸ªæ•°æ®åº“çš„å…±äº«è¯»å–é”å®šï¼Œä»¥ä¾¿ä¸ºé“¾ç æä¾›ä¸€è‡´çš„æ•°æ®è§†å›¾ï¼ˆå³<em>å¯é‡å¤è¯»å–éš”ç¦»çº§åˆ«</em>ï¼‰ã€‚ åŒæ ·ï¼Œæœ€åçš„è´¦æœ¬æ›´æ–°é˜¶æ®µåœ¨æ•´ä¸ªæ•°æ®åº“ä¸Šè·å¾—äº†æ’ä»–æ€§å†™é”å®šã€‚ å› æ­¤ï¼ŒèƒŒä¹¦é˜¶æ®µå’Œæœ€ç»ˆè´¦æœ¬æ›´æ–°éƒ½ä¸ºæ­¤èµ„æºç«äº‰ã€‚ ç‰¹åˆ«æ˜¯ï¼Œä½¿ç”¨ CouchDB è¿›è¡Œçš„æœ€ç»ˆè´¦æœ¬æ›´æ–°æˆæœ¬æ›´é«˜ï¼Œå› ä¸ºå®ƒå¿…é¡»ä¸ºäº¤æ˜“çš„å†™å…¥é›†ä¸­çš„æ¯ä¸ªé”®å€¼å†™å…¥æ‰§è¡Œä»¥ä¸‹ä¸‰ä¸ªä»»åŠ¡ã€‚</p><blockquote><ol><li>Retrieve the keyâ€™s previous revision number (used for concurrency control within CouchDB) by issuing a GET request, if it exists in the database.</li><li>Construct a document for the value (could be a JSON document or binary attachment).</li><li>Update the database by submitting a PUT request.</li></ol></blockquote><ol><li>å¦‚æœæ•°æ®åº“ä¸­å­˜åœ¨ GET è¯·æ±‚ï¼Œåˆ™é€šè¿‡å‘å‡º GET è¯·æ±‚æ¥æ£€ç´¢å¯†é’¥çš„å…ˆå‰ä¿®è®¢çš„ç‰ˆæœ¬å·ï¼ˆç”¨äº CouchDB ä¸­çš„å¹¶å‘æ§åˆ¶ï¼‰ã€‚</li><li>ä¸ºè¯¥å€¼æ„é€ ä¸€ä¸ªæ–‡æ¡£ï¼ˆå¯ä»¥æ˜¯ JSON æ–‡æ¡£æˆ–äºŒè¿›åˆ¶é™„ä»¶ï¼‰ã€‚</li><li>é€šè¿‡æäº¤ PUT è¯·æ±‚æ¥æ›´æ–°æ•°æ®åº“ã€‚</li></ol><blockquote><p>As a result, with the increase in the number of writes per transaction, the ledger update latency increased (refer to Figure 12(b)). Due to the above three time consuming serial operations, we surmise that the committer held the lock on the database for a longer duration which increased endorsement latency. </p><p>To validate our hypothesis, we performed experiments by disabling the lock acquisition on the whole database during the endorsement phase and final ledger update. The side effect of such action was only providing <em>non-repeatable read isolation level</em> at that chaincode. As our transaction was only writing keys, such side effect did not affect the database consistency. Figure 12(d) shows the improvement in endorsement phase. The average endorsement latency reduced from 800 ms to 40 ms, validating our hypothesis.</p></blockquote><p>ç»“æœï¼Œéšç€æ¯ä¸ªäº¤æ˜“çš„å†™å…¥æ¬¡æ•°çš„å¢åŠ ï¼Œè´¦æœ¬æ›´æ–°ç­‰å¾…æ—¶é—´å¢åŠ äº†ï¼ˆè¯·å‚è§å›¾12ï¼ˆbï¼‰ï¼‰ã€‚ ç”±äºä¸Šè¿°ä¸‰ä¸ªè€—æ—¶çš„ä¸²è¡Œæ“ä½œï¼Œæˆ‘ä»¬æ¨æµ‹æäº¤è€…å°†é”é”å®šåœ¨æ•°æ®åº“ä¸Šçš„æ—¶é—´æ›´é•¿ï¼Œä»è€Œå¢åŠ äº†èƒŒä¹¦å»¶è¿Ÿã€‚ </p><p>ä¸ºäº†éªŒè¯æˆ‘ä»¬çš„å‡è®¾ï¼Œæˆ‘ä»¬é€šè¿‡åœ¨èƒŒä¹¦é˜¶æ®µå’Œæœ€ç»ˆè´¦æœ¬æ›´æ–°æœŸé—´ç¦ç”¨æ•´ä¸ªæ•°æ®åº“çš„é”è·å–æ¥è¿›è¡Œå®éªŒã€‚ æ­¤ç±»æ“ä½œçš„å‰¯ä½œç”¨æ˜¯åœ¨è¯¥é“¾ç ä¸Šåªæä¾›äº†â€œä¸å¯é‡å¤çš„è¯»å–éš”ç¦»çº§åˆ«â€ã€‚ ç”±äºæˆ‘ä»¬çš„äº¤æ˜“åªæ˜¯å†™å¯†é’¥ï¼Œå› æ­¤è¿™ç§å‰¯ä½œç”¨ä¸ä¼šå½±å“æ•°æ®åº“çš„ä¸€è‡´æ€§ã€‚ å›¾12ï¼ˆdï¼‰æ˜¾ç¤ºäº†èƒŒä¹¦é˜¶æ®µçš„æ”¹è¿›ã€‚ å¹³å‡èƒŒä¹¦ç­‰å¾…æ—¶é—´ä» 800ms å‡å°‘åˆ° 40msï¼ŒéªŒè¯äº†æˆ‘ä»¬çš„å‡è®¾ã€‚</p><h3 id="Observation-12"><a href="#Observation-12" class="headerlink" title="Observation 12:"></a>Observation 12:</h3><blockquote><p><em>Only with an increase in the number of reads per transaction, the MVCC latency increased</em> as shown in Figure 12(c). This is because with an increase in the number of items in the read set, the number of GET REST API calls to CouchDB increased during MVCC validation phase. With an increase in the number of writes, MVCC latency did not increase as shown in Figure 12(b) because it only checks whether any read keys has been modified.</p></blockquote><p>å¦‚å›¾12ï¼ˆcï¼‰æ‰€ç¤ºï¼Œ<em>ä»…éšç€æ¯ä¸ªäº¤æ˜“è¯»å–æ¬¡æ•°çš„å¢åŠ ï¼ŒMVCC å»¶è¿Ÿæ‰å¢åŠ </em>ã€‚ è¿™æ˜¯å› ä¸ºéšç€è¯»å–é›†ä¸­é¡¹ç›®çš„æ•°é‡å¢åŠ ï¼Œåœ¨ MVCC éªŒè¯é˜¶æ®µï¼Œå¯¹ CouchDB çš„ GET REST API è°ƒç”¨æ•°é‡ä¹Ÿå¢åŠ äº†ã€‚ éšç€å†™å…¥æ¬¡æ•°çš„å¢åŠ ï¼ŒMVCC å»¶è¿Ÿå¹¶æ²¡æœ‰å¢åŠ ï¼Œå¦‚å›¾ 12ï¼ˆbï¼‰æ‰€ç¤ºï¼Œå› ä¸ºå®ƒä»…æ£€æŸ¥æ˜¯å¦å·²ä¿®æ”¹ä»»ä½•è¯»å–å¯†é’¥ã€‚</p><h3 id="Guideline-6"><a href="#Guideline-6" class="headerlink" title="Guideline 6:"></a>Guideline 6:</h3><blockquote><p>GoLevelDB is a better performant option for state database. CouchDB is a better choice if rich-query support for read-only transactions is important. When using CouchDB, design the application and transaction to read/write a fewer number of keys to accomplish a task.</p></blockquote><p>å¯¹äºçŠ¶æ€æ•°æ®åº“ï¼ŒGoLevelDB æ˜¯æ€§èƒ½æ›´å¥½çš„é€‰é¡¹ã€‚ å¦‚æœå¯¹åªè¯»äº¤æ˜“çš„å¯ŒæŸ¥è¯¢æ”¯æŒå¾ˆé‡è¦ï¼Œåˆ™ CouchDB æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚ ä½¿ç”¨ CouchDB æ—¶ï¼Œè®¾è®¡åº”ç”¨ç¨‹åºå’Œäº¤æ˜“ä»¥è¯»å–/å†™å…¥è¾ƒå°‘æ•°é‡çš„é”®å³å¯å®Œæˆä»»åŠ¡ã€‚</p><h3 id="Action-Item-4"><a href="#Action-Item-4" class="headerlink" title="Action Item 4:"></a>Action Item 4:</h3><blockquote><p>CouchDB supports bulk read/write operations without additional transactional semantics. Using the bulk operations will reduce the lock holding duration and improve the performance as demonstrated in Â§VI-C.</p></blockquote><p>CouchDBæ”¯æŒæ‰¹é‡è¯»/å†™æ“ä½œï¼Œè€Œæ— éœ€å…¶ä»–äº¤æ˜“è¯­ä¹‰ã€‚ å¦‚ Â§VI-C æ‰€ç¤ºï¼Œä½¿ç”¨æ‰¹é‡æ“ä½œå°†å‡å°‘é”ä¿æŒæ—¶é—´å¹¶æé«˜æ€§èƒ½ã€‚</p><h3 id="Action-Item-5"><a href="#Action-Item-5" class="headerlink" title="Action Item 5:"></a>Action Item 5:</h3><blockquote><p>The usage of database such as GoLevelDB and CouchDB, without the snapshot isolation level, results in whole database lock during the endorsement and the ledger update phase. Hence, our future work is to look at ways to remove the lock and/or use a database such as PostgreSQL that supports snapshot isolation.</p></blockquote><p>åœ¨æ²¡æœ‰å¿«ç…§éš”ç¦»çº§åˆ«çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨æ•°æ®åº“ï¼ˆä¾‹å¦‚GoLevelDBå’ŒCouchDBï¼‰ä¼šåœ¨èƒŒä¹¦å’Œè´¦æœ¬æ›´æ–°é˜¶æ®µå¯¼è‡´æ•´ä¸ªæ•°æ®åº“é”å®šã€‚ å› æ­¤ï¼Œæˆ‘ä»¬çš„æœªæ¥å·¥ä½œæ˜¯ç ”ç©¶åˆ é™¤é”å’Œ/æˆ–ä½¿ç”¨æ”¯æŒå¿«ç…§éš”ç¦»çš„æ•°æ®åº“ï¼ˆä¾‹å¦‚ PostgreSQLï¼‰çš„æ–¹æ³•ã€‚</p><h2 id="E-Scalability-and-Fault-Tolerant"><a href="#E-Scalability-and-Fault-Tolerant" class="headerlink" title="E. Scalability and Fault Tolerant"></a>E. Scalability and Fault Tolerant</h2><blockquote><p>In Fabric, scalability can be measured in terms of the number of channels, number of organizations joining a channel and the number of peers per organization. From a resource consumption perspective, the endorsement policy complexity controls the scalability of network. Even with a large number of organizations or peers, if the endorsement policy requires only a few organizations signature, then the performance would be the unaffected. This is because, the transaction needs to be simulated at a fewer node in the network to collect endorsement. </p><p>Scalability could also be defined in terms of number of geographically distributed nodes and latency in block dissemination among them. Number of ordering service nodes and choice of consensus protocol used among them would also affect scalability. Though these are out of scope of this study, are important aspects of network scalability.</p></blockquote><p>åœ¨ Fabric ä¸­ï¼Œå¯æ‰©å±•æ€§å¯ä»¥æ ¹æ®é€šé“æ•°é‡ï¼ŒåŠ å…¥é€šé“çš„ç»„ç»‡æ•°é‡ä»¥åŠæ¯ä¸ªç»„ç»‡çš„å¯¹ç­‰èŠ‚ç‚¹æ¥è¡¡é‡ã€‚ ä»èµ„æºæ¶ˆè€—çš„è§’åº¦æ¥çœ‹ï¼ŒèƒŒä¹¦ç­–ç•¥çš„å¤æ‚æ€§æ§åˆ¶ç€ç½‘ç»œçš„å¯æ‰©å±•æ€§ã€‚ å³ä½¿æœ‰å¤§é‡ç»„ç»‡æˆ–èŠ‚ç‚¹ï¼Œå¦‚æœèƒŒä¹¦ç­–ç•¥ä»…éœ€è¦å‡ ä¸ªç»„ç»‡ç­¾åï¼Œé‚£ä¹ˆæ€§èƒ½å°†ä¸ä¼šå—åˆ°å½±å“ã€‚ è¿™æ˜¯å› ä¸ºï¼Œéœ€è¦åœ¨ç½‘ç»œä¸­è¾ƒå°‘çš„èŠ‚ç‚¹ä¸Šæ¨¡æ‹Ÿäº¤æ˜“æ¥æ”¶é›†èƒŒä¹¦ã€‚ </p><p>è¿˜å¯ä»¥æ ¹æ®åœ°ç†ä¸Šåˆ†æ•£çš„èŠ‚ç‚¹çš„æ•°é‡å’Œå®ƒä»¬ä¹‹é—´çš„å—åˆ†å‘ä¸­çš„ç­‰å¾…æ—¶é—´æ¥å®šä¹‰å¯æ‰©å±•æ€§ã€‚ æ’åºæœåŠ¡èŠ‚ç‚¹çš„æ•°é‡ä»¥åŠåœ¨å…¶ä¸­ä½¿ç”¨çš„å…±è¯†åè®®çš„é€‰æ‹©ä¹Ÿä¼šå½±å“å¯æ‰©å±•æ€§ã€‚ å°½ç®¡è¿™äº›è¶…å‡ºäº†æœ¬ç ”ç©¶çš„èŒƒå›´ï¼Œä½†å®ƒä»¬æ˜¯ç½‘ç»œå¯æ‰©å±•æ€§çš„é‡è¦æ–¹é¢ã€‚</p><blockquote><p>Node failures are common in a distributed system and hence, it is important to study the fault tolerant capability of Fabric. In our initial and early study, we observed that node failures do not affect the performance (during non-overloaded case) as client can collect endorsement from other available nodes. With higher loads, node rejoining after a failure and syncing up the ledger due to missing blocks was observed to have large delays. This is because though the block processing rate at the rejoined node was at the peak, other nodes continues to add new blocks at the same peak processing rate.</p></blockquote><p>èŠ‚ç‚¹æ•…éšœåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¾ˆå¸¸è§ï¼Œå› æ­¤ï¼Œç ”ç©¶ Fabric çš„å®¹é”™èƒ½åŠ›å¾ˆé‡è¦ã€‚ åœ¨æˆ‘ä»¬çš„åˆæœŸå’Œæ—©æœŸç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°èŠ‚ç‚¹æ•…éšœä¸ä¼šå½±å“æ€§èƒ½ï¼ˆåœ¨éè¿‡è½½æƒ…å†µä¸‹ï¼‰ï¼Œå› ä¸ºå®¢æˆ·ç«¯å¯ä»¥ä»å…¶ä»–å¯ç”¨èŠ‚ç‚¹æ”¶é›†è®¤å¯ã€‚ å¯¹äºæ›´é«˜çš„è´Ÿè½½ï¼Œè§‚å¯Ÿåˆ°èŠ‚ç‚¹åœ¨æ•…éšœåé‡æ–°åŠ å…¥å¹¶ç”±äºç¼ºå°‘å—è€ŒåŒæ­¥äº†è´¦æœ¬ï¼Œè¿™ä¼šäº§ç”Ÿè¾ƒå¤§çš„å»¶è¿Ÿã€‚ è¿™æ˜¯å› ä¸ºå°½ç®¡é‡æ–°åŠ å…¥çš„èŠ‚ç‚¹å¤„çš„å—å¤„ç†é€Ÿç‡å¤„äºå³°å€¼ï¼Œä½†å…¶ä»–èŠ‚ç‚¹ä»ç»§ç»­ä»¥ç›¸åŒçš„å³°å€¼å¤„ç†é€Ÿç‡æ·»åŠ æ–°å—ã€‚</p><h1 id="VI-OPTIMIZATIONS-STUDIED"><a href="#VI-OPTIMIZATIONS-STUDIED" class="headerlink" title="VI. OPTIMIZATIONS STUDIED"></a>VI. OPTIMIZATIONS STUDIED</h1><blockquote><p>In this section, we introduce three simple optimizations based on action items listed in Â§V â€“ (1) MSP cache in Â§VI-A, (2) parallel VSCC validation of a block in Â§VI-B, and (3) bulk read/write during MVCC validation &amp; commit for CouchDB in Â§VI-C. For each of these optimizations, first, we study the performance improvement individually. Then, we study the improvement by combining all the three optimizations.</p></blockquote><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†åŸºäº Â§V ä¸­åˆ—å‡ºçš„æ“ä½œé¡¹ç›®ä»‹ç»ä¸‰ç§ç®€å•çš„ä¼˜åŒ–æ–¹æ³•-ï¼ˆ1ï¼‰Â§VI-A ä¸­çš„ MSP ç¼“å­˜ï¼Œï¼ˆ2ï¼‰Â§VI-B ä¸­çš„å—çš„å¹¶è¡Œ VSCC éªŒè¯ï¼Œä»¥åŠï¼ˆ3ï¼‰Â§VI-C ä¸­çš„åœ¨ MVCC éªŒè¯å’Œæäº¤æœŸé—´å¯¹ CouchDB æ‰¹é‡è¯»/å†™ã€‚ å¯¹äºè¿™äº›ä¼˜åŒ–ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬åˆ†åˆ«ç ”ç©¶æ€§èƒ½æ”¹è¿›ã€‚ ç„¶åæˆ‘ä»¬é€šè¿‡ç»“åˆä¸‰ä¸ªä¼˜åŒ–æ¥ç ”ç©¶æ”¹è¿›ã€‚</p><h2 id="A-MSP-Cache"><a href="#A-MSP-Cache" class="headerlink" title="A. MSP Cache"></a>A. MSP Cache</h2><blockquote><p>As crypto operations are very CPU intensive, in this section, we studied the efficiency of using a cache at the following two operations in the crypto module:</p><ol><li><p>Deserialization of identity (i.e., x.509 certificate).</p></li><li><p>Validation of identity with Organizationâ€™s MSP.</p></li></ol></blockquote><p>ç”±äºåŠ å¯†æ“ä½œéå¸¸å ç”¨CPUï¼Œå› æ­¤åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ç ”ç©¶äº†åœ¨åŠ å¯†æ¨¡å—ä¸­çš„ä»¥ä¸‹ä¸¤ä¸ªæ“ä½œä¸­ä½¿ç”¨ç¼“å­˜çš„æ•ˆç‡ï¼š</p><ol><li><p>èº«ä»½ååºåˆ—åŒ–ï¼ˆå³ x.509 è¯ä¹¦ï¼‰ã€‚</p></li><li><p>ä½¿ç”¨ç»„ç»‡çš„ MSP éªŒè¯èº«ä»½ã€‚</p></li></ol><blockquote><p>To avoid deserialization of the serialized identity every time, we cached the deserialized identity using a hash map with the serialized form as key. Similarly, to avoid validating an identity with multiple MSPs every time, we used a hash map with a key as identity and value as the corresponding MSP to which the identity belongs. Further, we employed the ARC algorithm for cache replacement. During identity revocations, we invalidated cache entries appropriately.</p></blockquote><p>ä¸ºäº†é¿å…æ¯æ¬¡éƒ½å¯¹åºåˆ—åŒ–æ ‡è¯†è¿›è¡Œååºåˆ—åŒ–ï¼Œæˆ‘ä»¬ä½¿ç”¨ä»¥åºåˆ—åŒ–å½¢å¼ä½œä¸ºé”®çš„å“ˆå¸Œæ˜ å°„å¯¹ååºåˆ—åŒ–çš„æ ‡è¯†è¿›è¡Œç¼“å­˜ã€‚ åŒæ ·ï¼Œä¸ºé¿å…æ¯æ¬¡éƒ½ä½¿ç”¨å¤šä¸ª MSP éªŒè¯èº«ä»½ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå“ˆå¸Œå›¾ï¼Œå…¶ä¸­é”®ä¸ºèº«ä»½ï¼Œå€¼ä¸ºèº«ä»½æ‰€å±çš„ç›¸åº”MSPã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬é‡‡ç”¨äº† ARC ç®—æ³•æ¥æ›¿æ¢ç¼“å­˜ã€‚ åœ¨èº«ä»½åŠé”€æœŸé—´ï¼Œæˆ‘ä»¬é€‚å½“åœ°ä½¿ç¼“å­˜æ¡ç›®æ— æ•ˆã€‚</p><blockquote><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200410111743151.png" alt="image-20200410111743151" style="zoom:50%;"><p>Figure 13 plots the impact of MSP cache on the throughput and latency for AND/OR endorsement policies over different transaction arrival rates. Table III presents various policies used along with different transaction arrival rates. We draw the attention of the reader to Figure 6(b) for comparison against the no-cache behavior. On average, the throughput increased by 3Ã— due to MSP cache as compared to a vanilla peer. For e.g., when the endorsement policy required signature from two endorsers (defined using AND/OR syntax), the maximum throughput achieved without MSP cache was 160 tps while with cache, it increased to 540 tps. This is because the MSP cache reduced certain repetitive CPU intensive operations.</p></blockquote><p>å›¾ 13 ç»˜åˆ¶äº† MSP ç¼“å­˜å¯¹ä¸åŒäº¤æ˜“åˆ°è¾¾ç‡ä¸‹ AND / OR èƒŒä¹¦ç­–ç•¥çš„ååé‡å’Œå»¶è¿Ÿçš„å½±å“ã€‚ è¡¨ III åˆ—å‡ºäº†ä½¿ç”¨çš„å„ç§ç­–ç•¥ä»¥åŠä¸åŒçš„äº¤æ˜“åˆ°è¾¾ç‡ã€‚ æˆ‘ä»¬æè¯·è¯»è€…æ³¨æ„å›¾6ï¼ˆbï¼‰ï¼Œä»¥ä¸æ— ç¼“å­˜è¡Œä¸ºè¿›è¡Œæ¯”è¾ƒã€‚ å¹³å‡è€Œè¨€ï¼Œä¸æ™®é€šèŠ‚ç‚¹ç›¸æ¯”ï¼Œç”±äº MSP ç¼“å­˜ï¼Œååé‡å¢åŠ äº† 3 å€ã€‚ ä¾‹å¦‚ï¼Œå½“èƒŒä¹¦ç­–ç•¥éœ€è¦ä¸¤ä¸ªèƒŒä¹¦èŠ‚ç‚¹çš„ç­¾åï¼ˆä½¿ç”¨ AND / OR è¯­æ³•å®šä¹‰ï¼‰æ—¶ï¼Œä¸ä½¿ç”¨ MSP ç¼“å­˜æ—¶å®ç°çš„æœ€å¤§ååé‡ä¸º 160 tpsï¼Œè€Œä½¿ç”¨ç¼“å­˜æ—¶åˆ™è¾¾åˆ° 540 tpsã€‚ è¿™æ˜¯å› ä¸º MSP ç¼“å­˜å‡å°‘äº†æŸäº›é‡å¤çš„ CPU å¯†é›†å‹æ“ä½œã€‚</p><blockquote><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200410112955545.png" alt="image-20200410112955545" style="zoom:50%;"><p>Figure 14 and 15 plots the flame graph showing frequency of crypto operations and call stack depth of VSCC validation phase in a vanilla peer and a peer with MSP cache, respectively. As it can be observed, the number of crypto operations and call stack depth reduced significantly with the MSP cache.</p></blockquote><p>å›¾ 14 å’Œ 15 ç»˜åˆ¶äº†ç«ç„°å›¾ï¼Œåˆ†åˆ«æ˜¾ç¤ºäº†åŸå§‹å¯¹ç­‰èŠ‚ç‚¹å’Œå…·æœ‰ MSP ç¼“å­˜çš„å¯¹ç­‰èŠ‚ç‚¹ä¸­çš„åŠ å¯†æ“ä½œé¢‘ç‡å’Œ VSCC éªŒè¯é˜¶æ®µçš„è°ƒç”¨å †æ ˆæ·±åº¦ã€‚ å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨ MSP ç¼“å­˜ï¼ŒåŠ å¯†æ“ä½œçš„æ•°é‡å’Œè°ƒç”¨å †æ ˆçš„æ·±åº¦å¤§å¤§å‡å°‘äº†ã€‚</p><h2 id="B-Parallel-VSCC-Validation-of-a-Block"><a href="#B-Parallel-VSCC-Validation-of-a-Block" class="headerlink" title="B. Parallel VSCC Validation of a Block"></a>B. Parallel VSCC Validation of a Block</h2><blockquote><p>The VSCC validation phase validates each transaction in a block serially against the endorsement policy. As this approach under-utilized the resources, we studied the efficiency of parallel validation, i.e., validate multiple transactionsâ€™ endorsement in parallel to utilize otherwise idle CPU and improve the overall performance. To achieve this, we created a configurable number of worker threads per channel on peer startup. Each worker thread validates one transactionâ€™s endorsement signature set against its endorsement policy.</p></blockquote><p>VSCC éªŒè¯é˜¶æ®µæ ¹æ®èƒŒä¹¦ç­–ç•¥ä¾æ¬¡éªŒè¯æ¯ä¸ªäº¤æ˜“ã€‚ ç”±äºè¿™ç§æ–¹æ³•æœªå……åˆ†åˆ©ç”¨èµ„æºï¼Œå› æ­¤æˆ‘ä»¬ç ”ç©¶äº†å¹¶è¡ŒéªŒè¯çš„æ•ˆç‡ï¼Œå³å¹¶è¡ŒéªŒè¯å¤šä¸ªäº¤æ˜“çš„èƒŒä¹¦ï¼Œä»¥åˆ©ç”¨ç©ºé—²çš„ CPU å¹¶æé«˜æ•´ä½“æ€§èƒ½ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬åœ¨å¯¹ç­‰èŠ‚ç‚¹å¯åŠ¨æ—¶ä¸ºæ¯ä¸ªé€šé“åˆ›å»ºäº†å¯é…ç½®æ•°é‡çš„å·¥ä½œçº¿ç¨‹ã€‚ æ¯ä¸ªå·¥ä½œçº¿ç¨‹éƒ½ä¼šæ ¹æ®å…¶èƒŒä¹¦ç­–ç•¥éªŒè¯ä¸€ä¸ªäº¤æ˜“çš„èƒŒä¹¦ç­¾åé›†ã€‚</p><blockquote><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200410113304957.png" alt="image-20200410113304957" style="zoom:50%;"><p>Figure 16 plots the impact of parallel VSCC on the performance and resource utilization. We categorize the arrival rate for different channel count into two categories; non-overloaded case when the latency falls in [0.1-1s] and overloaded when the latency falls in [30-40s]. For each channel, we allocated worker threads equal to the block size. The throughput and resource utilization during the non-overloaded case for one channel exploded from 130 tps to 800 tps (improved by 6.3Ã—) for the block size of 30 and to 980 tps (7.5Ã—) for the block size of 300. This is due to parallel validation and hence the reduction in the VSCC latency (from 300 ms to 30 ms, i.e., by 10Ã— reduction for the block size of 30). The throughput saturated at 950 tps (for the block size of 30) &amp; 1075 tps (for the block size of 300) â€“ refer to Figure 16(a).</p></blockquote><p>å›¾ 16 ç»˜åˆ¶äº†å¹¶è¡Œ VSCC å¯¹æ€§èƒ½å’Œèµ„æºåˆ©ç”¨ç‡çš„å½±å“ã€‚ æˆ‘ä»¬å°†ä¸åŒé€šé“æ•°çš„åˆ°è¾¾ç‡åˆ†ä¸ºä¸¤ç±»ï¼š å»¶è¿Ÿå°äº[0.1-1s]æ—¶å¤„äºéè¿‡è½½æƒ…å†µï¼Œè€Œå»¶è¿Ÿå°äº[30-40s]æ—¶å¤„äºè¿‡è½½çŠ¶æ€ã€‚ å¯¹äºæ¯ä¸ªé€šé“ï¼Œæˆ‘ä»¬åˆ†é…çš„å·¥ä½œçº¿ç¨‹ç­‰äºå—å¤§å°ã€‚ ä¸€ä¸ªé€šé“åœ¨éè¿‡è½½æƒ…å†µä¸‹çš„ååé‡å’Œèµ„æºåˆ©ç”¨ç‡ä»å—å¤§å°ä¸º 30 çš„ 130 tps æ¿€å¢è‡³ 800 tpsï¼ˆæé«˜äº†6.3å€ï¼‰ï¼Œå—å¤§å°ä¸º 300 çš„ååé‡å’Œèµ„æºåˆ©ç”¨ç‡æ¿€å¢è‡³ 980 tpsï¼ˆ7.5å€ï¼‰ã€‚ ç”±äºå¹¶è¡ŒéªŒè¯ï¼Œå› æ­¤å‡å°‘äº† VSCC å»¶è¿Ÿï¼ˆä» 300 æ¯«ç§’å‡å°‘åˆ° 30 æ¯«ç§’ï¼Œå³å¯¹äº 30 çš„å—å¤§å°å‡å°‘äº† 10 å€ï¼‰ã€‚ ååé‡è¾¾åˆ° 950 tpsï¼ˆå¯¹äº 30 å—çš„å—ï¼‰å’Œ 1075 tpsï¼ˆå¯¹äº 300å—ï¼‰è¾¾åˆ°é¥±å’Œâ€“è¯·å‚è§å›¾16ï¼ˆaï¼‰ã€‚</p><blockquote><p>Similarly, the throughput and resource utilization during the overloaded case increased to 1.5Ã— for 16 channels to as much as 10Ã— for 1 channel â€“ refer to Figure 16(b). This shows that parallel VSCC validation of a block significantly increases the performance of a single channel. With an increase in the number of channels, the percentage of improvement decreased. This is because multiple channels by default result in the parallel validation of blocks (instead of transactions) and hence a few number of free vCPUs were available for parallel VSCC.</p></blockquote><p>åŒæ ·ï¼Œè¿‡è½½æƒ…å†µä¸‹ 16 é€šé“çš„ååé‡å’Œèµ„æºåˆ©ç”¨ç‡å¢åŠ  1.5 å€ï¼Œ 1 é€šé“å¢åŠ  10 å€â€“å‚è§å›¾16ï¼ˆbï¼‰ã€‚ è¿™è¡¨æ˜å—çš„å¹¶è¡Œ VSCC éªŒè¯æ˜¾ç€æé«˜äº†å•ä¸ªé€šé“çš„æ€§èƒ½ã€‚ éšç€é€šé“æ•°é‡çš„å¢åŠ ï¼Œæ”¹å–„çš„ç™¾åˆ†æ¯”é™ä½äº†ã€‚ è¿™æ˜¯å› ä¸ºé»˜è®¤æƒ…å†µä¸‹ï¼Œå¤šä¸ªé€šé“ä¼šå¯¼è‡´å—çš„å¹¶è¡ŒéªŒè¯ï¼ˆè€Œä¸æ˜¯äº¤æ˜“ï¼‰ï¼Œå› æ­¤ï¼Œæœ‰å‡ ä¸ªå¯ç”¨çš„ vCPU å¯ç”¨äºå¹¶è¡Œ VSCCã€‚</p><h2 id="C-Bulk-Read-Write-During-MVCC-Validation-amp-Commit"><a href="#C-Bulk-Read-Write-During-MVCC-Validation-amp-Commit" class="headerlink" title="C. Bulk Read/Write During MVCC Validation &amp; Commit"></a>C. Bulk Read/Write During MVCC Validation &amp; Commit</h2><blockquote><p>During the MVCC validation, with CouchDB as the state database, for each transaction in a block, for each key in the read set of the transaction, a GET REST API call to the database over a secure HTTPS retrieved the last committed version number. During the commit phase, for each valid transaction (recorded after MVCC validation) in a block, for each key in the write set of the transaction, a GET REST API call retrieved the revision numbers. Finally, for each entry in the write set, a PUT REST API call committed the document. Due to these multiple REST API calls, performance degraded significantly as demonstrated in Â§V-D.</p></blockquote><p>åœ¨ MVCC éªŒè¯æœŸé—´ï¼Œä»¥ CouchDB ä½œä¸ºçŠ¶æ€æ•°æ®åº“ï¼Œå¯¹äºå—ä¸­çš„æ¯ä¸ªäº¤æ˜“ï¼Œå¯¹äºäº¤æ˜“çš„è¯»å–é›†ä¸­çš„æ¯ä¸ªé”®ï¼Œé€šè¿‡å®‰å…¨ HTTPS å¯¹è¯¥æ•°æ®åº“çš„ GET REST API è°ƒç”¨éƒ½æ£€ç´¢åˆ°æœ€åæäº¤çš„ç‰ˆæœ¬å·ã€‚ åœ¨æäº¤é˜¶æ®µï¼Œå¯¹äºå—ä¸­çš„æ¯ä¸ªæœ‰æ•ˆäº¤æ˜“ï¼ˆåœ¨ MVCC éªŒè¯åè®°å½•ï¼‰ï¼Œå¯¹äºäº¤æ˜“çš„å†™é›†ä¸­çš„æ¯ä¸ªé”®ï¼ŒGET REST API è°ƒç”¨éƒ½ä¼šæ£€ç´¢ä¿®è®¢å·ã€‚ æœ€åï¼Œå¯¹äºå†™é›†ä¸­çš„æ¯ä¸ªæ¡ç›®ï¼Œéƒ½ä¼šé€šè¿‡ PUT REST API è°ƒç”¨æäº¤æ–‡æ¡£ã€‚ ç”±äºæœ‰å¤šä¸ª REST API è°ƒç”¨ï¼Œå› æ­¤æ€§èƒ½å¤§å¤§é™ä½ï¼Œå¦‚Â§V-Dæ‰€ç¤ºã€‚</p><blockquote><p>To cut down the number of REST API calls, CouchDB suggests using bulk operations. Hence, we used the existing BatchRetrieval API in Fabric to batch load multiple keysâ€™ version and revision number into the cache over a single GET REST API call per block. To enhance the ledger update process, we used BatchUpdate API in Fabric to commit a batch of documents using a single PUT REST API call per block. Further, we introduced a cache in VSCC to reduce the calls to CouchDB to obtain the endorsement policy of the chaincode for each transaction. In this section, we show the efficiency of these enhancements on the overall performance.</p></blockquote><p>ä¸ºäº†å‡å°‘ REST API è°ƒç”¨çš„æ•°é‡ï¼ŒCouchDB å»ºè®®ä½¿ç”¨æ‰¹é‡æ“ä½œã€‚ å› æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨ Fabric ä¸­ç°æœ‰çš„ BatchRetrieval API é€šè¿‡æ¯ä¸ªå—ä¸€æ¬¡ GET REST API è°ƒç”¨å°†å¤šä¸ªå¯†é’¥çš„ç‰ˆæœ¬å’Œä¿®è®¢å·æ‰¹é‡åŠ è½½åˆ°ç¼“å­˜ä¸­ã€‚ ä¸ºäº†å¢å¼ºè´¦æœ¬æ›´æ–°è¿‡ç¨‹ï¼Œæˆ‘ä»¬åœ¨ Fabric ä¸­ä½¿ç”¨ BatchUpdate API é€šè¿‡æ¯ä¸ªå—ä¸€ä¸ª PUT REST API è°ƒç”¨æ¥æäº¤ä¸€æ‰¹æ–‡æ¡£ã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬åœ¨ VSCC ä¸­å¼•å…¥äº†ç¼“å­˜ï¼Œä»¥å‡å°‘å¯¹ CouchDB çš„è°ƒç”¨ï¼Œä»¥è·å–æ¯ä¸ªäº¤æ˜“çš„é“¾ç çš„èƒŒä¹¦ç­–ç•¥ã€‚ åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å±•ç¤ºè¿™äº›å¢å¼ºåŠŸèƒ½å¯¹æ•´ä½“æ€§èƒ½çš„æ•ˆç‡ã€‚</p><blockquote><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200410114711286.png" alt="image-20200410114711286" style="zoom:50%;"><p>Figure 17 plots the throughput and latency when running a CouchDB as the state database with the bulk read/write optimization. For comparison against the non-bulk read/write, refer to Figure 11(b) and Figure 12. The performance increased significantly from 50 tps to 115 tps (i.e., by 2.3Ã—) for transactions with a single write. For multiple writes (3-w &amp; 5-w), the throughput increased from 26 tps to 100 tps (i.e., 3.8Ã— for 3-w), and 18 tps to 90 tps (i.e., 5Ã— for 5-w). We noticed similar improvements for read-write transactions.</p></blockquote><p>å›¾ 17 ç»˜åˆ¶äº†è¿è¡Œ CouchDB ä½œä¸ºçŠ¶æ€æ•°æ®åº“æ—¶æ‰¹é‡è¯»/å†™ä¼˜åŒ–çš„ååé‡å’Œå»¶è¿Ÿã€‚ ä¸ºäº†ä¸éæ‰¹é‡è¯»å–/å†™å…¥è¿›è¡Œæ¯”è¾ƒï¼Œè¯·å‚è€ƒå›¾11ï¼ˆbï¼‰å’Œå›¾12ã€‚å¯¹äºä¸€æ¬¡å†™å…¥çš„äº¤æ˜“ï¼Œæ€§èƒ½ä» 50 tps æ˜¾ç€æé«˜åˆ° 115 tpsï¼ˆå³ï¼Œæé«˜äº† 2.3 å€ï¼‰ã€‚ å¯¹äºå¤šæ¬¡å†™å…¥ï¼ˆ 3-w å’Œ 5-wï¼‰ï¼Œååé‡ä» 26 tps å¢åŠ åˆ° 100 tpsï¼ˆå³ 3-wä¸º3-xï¼‰ï¼Œä» 18 tps å¢åŠ åˆ° 90 tpsï¼ˆå³ 5-w ä¸º 5 å€ï¼‰ã€‚ æˆ‘ä»¬æ³¨æ„åˆ°è¯»å†™äº¤æ˜“ä¹Ÿæœ‰ç±»ä¼¼çš„æ”¹è¿›ã€‚</p><blockquote><p>Due to the bulk read/write optimization, the MVCC latency, ledger update latency and endorsement latency decreased as shown in Figure 17(c) and (d) as compared to Figure 12. The reduction in endorsement latency (by at least 3Ã—) was because of the reduction in lock holding duration by the commit phase (by at least 8Ã—). The MVCC latency for read-write transactions reduced (by at least 6Ã—) due to a bulk reading of all keys in the read set of all transactions in a block. Note that the MVCC latency increased with the increase in the number of keys read in a bulk read. The ledger update latency of a block encompassing a higher number of writeonly transactions was higher. This is because, in read-write transactions, the MVCC validation phase itself loaded the required revision numbers into the cache (as the transaction read those keys before modification) which was not the case with write-only transactions.</p></blockquote><p>ç”±äºæ‰¹é‡è¯»/å†™ä¼˜åŒ–ï¼Œå›¾17ï¼ˆcï¼‰å’Œï¼ˆdï¼‰ä¸å›¾ 12 ç›¸æ¯”ï¼ŒMVCC å»¶è¿Ÿã€è´¦æœ¬æ›´æ–°å»¶è¿Ÿå’ŒèƒŒä¹¦å»¶è¿Ÿå‡å°‘ã€‚èƒŒä¹¦å»¶è¿Ÿå‡å°‘äº†ï¼ˆè‡³å°‘3å€ï¼‰ è¿™æ˜¯å› ä¸ºæäº¤é˜¶æ®µçš„é”ä¿æŒæ—¶é—´å‡å°‘äº†ï¼ˆè‡³å°‘å‡å°‘äº†8å€ï¼‰ã€‚ ç”±äºå—ä¸­æ‰€æœ‰äº¤æ˜“çš„è¯»å–é›†ä¸­çš„æ‰€æœ‰å¯†é’¥éƒ½æ˜¯æ‰¹é‡è¯»å–ï¼Œå› æ­¤è¯»å†™äº¤æ˜“çš„ MVCC å»¶è¿Ÿå‡å°‘äº†ï¼ˆè‡³å°‘6å€ï¼‰ã€‚ æ³¨æ„ï¼ŒMVCC å»¶è¿Ÿéšç€æ‰¹é‡è¯»å–ä¸­è¯»å–çš„é”®æ•°çš„å¢åŠ è€Œå¢åŠ ã€‚ åŒ…å«æ›´å¤šåªå†™äº¤æ˜“çš„å—çš„è´¦æœ¬æ›´æ–°ç­‰å¾…æ—¶é—´æ›´é•¿ã€‚ è¿™æ˜¯å› ä¸ºï¼Œåœ¨è¯»å†™äº¤æ˜“ä¸­ï¼ŒMVCC éªŒè¯é˜¶æ®µæœ¬èº«å°†æ‰€éœ€çš„ä¿®è®¢å·åŠ è½½åˆ°ç¼“å­˜ä¸­ï¼ˆå› ä¸ºäº¤æ˜“åœ¨ä¿®æ”¹ä¹‹å‰è¯»å–äº†è¿™äº›é”®ï¼‰ï¼Œè€Œå¯¹äºåªå†™äº¤æ˜“åˆ™ä¸æ˜¯è¿™ç§æƒ…å†µã€‚</p><h2 id="D-Combinations-of-Optimizations"><a href="#D-Combinations-of-Optimizations" class="headerlink" title="D. Combinations of Optimizations"></a>D. Combinations of Optimizations</h2><blockquote><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200414002047642.png" alt="image-20200414002047642" style="zoom:50%;"><p>Figure 18 plots the performance improvement achieved with all three optimizations combined. Table IX presents the number of VSCC worker threads per channel, block sizes, and other relavant parameters used for this study.</p><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200414002126408.png" alt="image-20200414002126408" style="zoom:50%;"></blockquote><p>å›¾ 18 åˆ—å‡ºäº†ä¸‰ä¸ªä¼˜åŒ–ç›¸ç»“åˆæ‰€å®ç°çš„æ€§èƒ½æ”¹è¿›ã€‚ è¡¨ IX åˆ—å‡ºäº†ç”¨äºæ­¤ç ”ç©¶çš„æ¯ä¸ªé€šé“çš„ VSCC å·¥ä½œçº¿ç¨‹æ•°ï¼Œå—å¤§å°å’Œå…¶ä»–ç›¸å…³å‚æ•°ã€‚</p><blockquote><p>With GoLevelDB as the state database, the single channel throughput increased to 2250 tps from 140 tps (i.e., 16Ã— improvement) due to all three optimizations â€“ refer to Figure 18(a) and Figure 4. Similarly, with CouchDB as the state database, the singe channel throughput increased to 700 tps from 50 tps (i.e., 14Ã— improvement) â€“ refer to Figure 18(b) and Figure 11. With an increase in the block size, when CouchDB was the state database, we observed a lower total latency due to the reduction in the number of bulk REST API call to CouchDB (i.e, for 500 transactions, only 2 bulk REST API calls, one read call during MVCC phase and one write during commit phase, were issued when the block size was 500 as compared to 10 bulk REST API calls for a block size of 100). As a result, our guideline 1 &amp; 2 are not applicable for CouchDB with bulk read/write optimizations.</p></blockquote><p>ä½¿ç”¨ GoLevelDB ä½œä¸ºçŠ¶æ€æ•°æ®åº“ï¼Œç”±äºä¸‰ä¸ªä¼˜åŒ–ï¼Œå•é€šé“ååé‡ä» 140 tps å¢åŠ åˆ°äº† 2250 tpsï¼ˆå³æé«˜äº†16å€ï¼‰â€“å‚è§å›¾18ï¼ˆaï¼‰å’Œå›¾4ã€‚ç±»ä¼¼åœ°ï¼Œä½¿ç”¨ CouchDB ä½œä¸ºçŠ¶æ€æ•°æ®åº“ ï¼Œå•é€šé“ååé‡ä» 50 tps å¢åŠ åˆ° 700 tpsï¼ˆå³æé«˜äº†14å€ï¼‰â€“å‚è§å›¾18ï¼ˆbï¼‰å’Œå›¾11ã€‚å½“ CouchDB æ˜¯çŠ¶æ€æ•°æ®åº“æ—¶ï¼Œç”±äºå‡å°‘äº†å¯¹ CouchDB çš„æ‰¹é‡ REST API è°ƒç”¨çš„æ•°é‡è€Œå¯¼è‡´çš„æ€»å»¶è¿Ÿï¼Œéšç€å—å¤§å°çš„å¢åŠ ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°æ›´ä½çš„ååé‡ï¼ˆå¯¹äº 500 ä¸ªäº¤æ˜“ï¼Œå½“å—å¤§å°ä¸º 500 æ—¶ï¼Œä»…å‘å‡º 2 ä¸ªæ‰¹é‡ REST API è°ƒç”¨ï¼Œåœ¨MVCCé˜¶æ®µè¿›è¡Œä¸€æ¬¡è¯»è°ƒç”¨ï¼Œåœ¨æäº¤é˜¶æ®µè¿›è¡Œä¸€æ¬¡å†™æ“ä½œï¼Œè€Œå¯¹äºå—å¤§å°ä¸º 100 æ—¶è¿›è¡Œ 10 æ¬¡æ‰¹é‡ REST API è°ƒç”¨ï¼‰ ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬çš„å‡†åˆ™ 1 å’Œ 2 ä¸é€‚ç”¨äºå…·æœ‰æ‰¹é‡è¯»/å†™ä¼˜åŒ–åŠŸèƒ½çš„ CouchDBã€‚</p><blockquote><p>Further, for 8 and 16 channels, the throughput increased to 2700 tps from 1025 tps and 1321 tps, respectively as shown in Figure 19(a). With a simpler endorsement policy, i.e., 1st AND/OR policy, the single channel throughput also increased to 2700 tps (with GoLevelDB) as shown in Figure 19(b).</p><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200414003650302.png" alt="image-20200414003650302" style="zoom:50%;"></blockquote><p>æ­¤å¤–ï¼Œå¯¹äº 8 å’Œ 16 é€šé“ï¼Œååé‡åˆ†åˆ«ä» 1025 tps å’Œ 1321 tps å¢åŠ åˆ° 2700 tpsï¼Œå¦‚å›¾19ï¼ˆaï¼‰æ‰€ç¤ºã€‚ ä½¿ç”¨æ›´ç®€å•çš„èƒŒä¹¦ç­–ç•¥ï¼ˆå³ç¬¬ä¸€ä¸ª AND / OR ç­–ç•¥ï¼‰ï¼Œå•é€šé“ååé‡ä¹Ÿå¢åŠ åˆ°äº† 2700 tpsï¼ˆä½¿ç”¨ GoLevelDBï¼‰ï¼Œå¦‚å›¾19ï¼ˆbï¼‰æ‰€ç¤ºã€‚</p><blockquote><p>Even with a throughput of 2700 tps, the average CPU utilization of a peer was only 60% and the network utilization of a peer was 1680 Mbps (send) and 240 Mbps (receive). This is because the sum of MVCC latency and ledger update latency (less CPU intensive tasks) was almost same or higher than the VSCC latency (as shown in Figure 18(c) and (d)). Due to these sequential phases, vCPUs were underutilized. One potential optimization would be to pipeline the VSCC and MVCC validation phase.</p></blockquote><p>å³ä½¿ååé‡ä¸º 2700 tpsï¼Œå¯¹ç­‰èŠ‚ç‚¹çš„å¹³å‡ CPU åˆ©ç”¨ç‡ä¹Ÿä»…ä¸º 60ï¼…ï¼Œç½‘ç»œåˆ©ç”¨ç‡ä¸º1680 Mbpsï¼ˆå‘é€ï¼‰å’Œ 240 Mbpsï¼ˆæ¥æ”¶ï¼‰ã€‚ è¿™æ˜¯å› ä¸º MVCC å»¶è¿Ÿå’Œè´¦æœ¬æ›´æ–°å»¶è¿Ÿçš„æ€»å’Œï¼ˆè¾ƒå°‘çš„ CPU å¯†é›†å‹ä»»åŠ¡ï¼‰ä¸ VSCC å»¶è¿Ÿå‡ ä¹ç›¸åŒæˆ–æ›´é«˜ï¼ˆå¦‚å›¾18ï¼ˆcï¼‰å’Œï¼ˆdï¼‰æ‰€ç¤ºï¼‰ã€‚ ç”±äºè¿™äº›é¡ºåºçš„é˜¶æ®µï¼ŒvCPU æœªè¢«å……åˆ†åˆ©ç”¨ã€‚ ä¸€ç§æ½œåœ¨çš„ä¼˜åŒ–æ–¹æ³•æ˜¯ç®¡é“ VSCC å’Œ MVCC éªŒè¯é˜¶æ®µã€‚</p><h1 id="VII-RELATED-WORK"><a href="#VII-RELATED-WORK" class="headerlink" title="VII. RELATED WORK"></a>VII. RELATED WORK</h1><blockquote><p>There has been considerable interest in the scalability and performance characteristics of public blockchain networks and specifically the limiting factor of the consensus protocol and its security implications [31], [23].</p></blockquote><p>äººä»¬å¯¹å…¬å…±åŒºå—é“¾ç½‘ç»œçš„å¯æ‰©å±•æ€§å’Œæ€§èƒ½ç‰¹å¾ï¼Œç‰¹åˆ«æ˜¯å…±è¯†åè®®çš„é™åˆ¶å› ç´ åŠå…¶å®‰å…¨æ€§æœ‰ç€ç›¸å½“å¤§çš„å…´è¶£ã€‚</p><blockquote><p>Also for public blockchains, [19] have looked at quantifying throughput, latency, bootstrap time and cost per transaction for the Bitcoin network based on publicly available data.</p></blockquote><p>åŒæ ·å¯¹äºå…¬å…±åŒºå—é“¾ï¼Œ[19] å·²ç»ç ”ç©¶äº†åŸºäºå¯å…¬å¼€è·å¾—çš„æ•°æ®æ¥é‡åŒ–æ¯”ç‰¹å¸ç½‘ç»œçš„ååé‡ï¼Œç­‰å¾…æ—¶é—´ï¼Œè‡ªä¸¾æ—¶é—´å’Œæ¯ç¬”äº¤æ˜“æˆæœ¬ã€‚</p><blockquote><p>BlockBench [22] was one of the first to look at permissioned blockchain. They present a framework for comparing performance of different blockchain platforms, namely, Ethereum, Parity and Hyperledger Fabric using a set of micro and macro benchmarks. Similar to [19] they generalize consensus, data, execution and application as 4 layers of blockchain and use the benchmarks to exercise them. They measure the overall performance in terms of throughput, latency and scalability of the platforms and draw conclusions across the 3 platforms. However, they studied the performance of Fabric v0.6, with v1.0 version bringing in a complete re-design, their observations do not hold relevance and needs re-study.</p></blockquote><p>BlockBench [22] æ˜¯æœ€æ—©ç ”ç©¶è®¸å¯åŒºå—é“¾çš„äººä¹‹ä¸€ã€‚ ä»–ä»¬æå‡ºäº†ä¸€ä¸ªæ¡†æ¶ï¼Œç”¨äºä½¿ç”¨ä¸€ç»„å¾®è§‚å’Œå®è§‚åŸºå‡†æ¥æ¯”è¾ƒä¸åŒåŒºå—é“¾å¹³å°ï¼ˆä»¥å¤ªåŠï¼ŒParity å’Œ Hyperledger Fabricï¼‰çš„æ€§èƒ½ã€‚ ä¸ [19] ç›¸ä¼¼ï¼Œä»–ä»¬å°†å…±è¯†ï¼Œæ•°æ®ï¼Œæ‰§è¡Œå’Œåº”ç”¨æ¦‚æ‹¬ä¸º4å±‚åŒºå—é“¾ï¼Œå¹¶ä½¿ç”¨åŸºå‡†å¯¹å…¶è¿›è¡Œäº†å®è·µã€‚ ä»–ä»¬æ ¹æ®å¹³å°çš„ååé‡ï¼Œå»¶è¿Ÿå’Œå¯ä¼¸ç¼©æ€§æ¥è¡¡é‡æ•´ä½“æ€§èƒ½ï¼Œå¹¶åœ¨è¿™ä¸‰ä¸ªå¹³å°ä¸Šå¾—å‡ºç»“è®ºã€‚ ä½†æ˜¯ï¼Œä»–ä»¬ç ”ç©¶äº† Fabric v0.6 çš„æ€§èƒ½ï¼Œè€Œ v1.0 ç‰ˆæœ¬å¸¦æ¥äº†å®Œæ•´çš„é‡æ–°è®¾è®¡ï¼Œä»–ä»¬çš„è§‚å¯Ÿç»“æœæ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œéœ€è¦é‡æ–°ç ”ç©¶ã€‚</p><blockquote><p>[16] presents the design and the new architecture of Fabric, delving in-depth into its design considerations and modularity. It presents the performance of a single Bitcoin like crypto currency application on Fabric, called Fabcoin, which uses a customized VSCC to validate the Fabcoin specific transactions and avoid complex endorsements and channels. Further, they used CLI command to emulate clients, which is not realistic, instead of using a SDK [6], [8], [10]. Our work differs from theirs in that, we do a comprehensive study for different workloads keeping Fabricâ€™s modularity and application in multiple domains in focus.</p></blockquote><p>[16] ä»‹ç»äº† Fabric çš„è®¾è®¡å’Œæ–°æ¶æ„ï¼Œæ·±å…¥ç ”ç©¶äº†å…¶è®¾è®¡è€ƒè™‘å› ç´ å’Œæ¨¡å—åŒ–ã€‚ å®ƒå±•ç¤ºäº† Fabric ä¸Šå•ä¸ªæ¯”ç‰¹å¸ï¼ˆå¦‚åŠ å¯†è´§å¸ï¼‰åº”ç”¨ç¨‹åºçš„æ€§èƒ½ï¼Œç§°ä¸º Fabcoinï¼Œè¯¥åº”ç”¨ç¨‹åºä½¿ç”¨å®šåˆ¶çš„ VSCC æ¥éªŒè¯ Fabcoin ç‰¹å®šäº¤æ˜“å¹¶é¿å…å¤æ‚çš„è®¤å¯å’Œé€šé“ã€‚ æ­¤å¤–ï¼Œä»–ä»¬ä½¿ç”¨ CLI å‘½ä»¤æ¥æ¨¡æ‹Ÿå®¢æˆ·ç«¯ï¼Œè¿™æ˜¯ä¸ç°å®çš„ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ SDK [6]ï¼Œ[8]ï¼Œ[10]ã€‚ æˆ‘ä»¬çš„å·¥ä½œä¸ä»–ä»¬çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œæˆ‘ä»¬é’ˆå¯¹ä¸åŒçš„å·¥ä½œè´Ÿè½½è¿›è¡Œäº†å…¨é¢çš„ç ”ç©¶ï¼Œä»¥ç¡®ä¿Fabricçš„æ¨¡å—åŒ–å’Œåœ¨å¤šä¸ªé¢†åŸŸä¸­çš„åº”ç”¨ä¸ºé‡ç‚¹ã€‚</p><blockquote><p>A note to the reader, [16] used Fabric v1.1-preview release, which incorporates all our optimizations and other additional functionalities over v1.0. However, being a minor version update much of the core functionality remains the same and our observations hold true for v1.1 and future versions based on the new architecture of Fabric.</p></blockquote><p>ç»™è¯»è€…çš„è¯´æ˜ï¼Œ[16] ä½¿ç”¨ Fabric v1.1-preview ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬åˆå¹¶äº†æˆ‘ä»¬åœ¨ v1.0 ä¸Šçš„æ‰€æœ‰ä¼˜åŒ–å’Œå…¶ä»–é™„åŠ åŠŸèƒ½ã€‚ ä½†æ˜¯ï¼Œä½œä¸ºæ¬¡è¦ç‰ˆæœ¬æ›´æ–°ï¼Œå¤§éƒ¨åˆ†æ ¸å¿ƒåŠŸèƒ½ä¿æŒä¸å˜ï¼Œå¹¶ä¸”æˆ‘ä»¬çš„è§‚å¯Ÿå¯¹äºåŸºäº Fabric çš„æ–°ä½“ç³»ç»“æ„çš„ v1.1 å’Œå°†æ¥ç‰ˆæœ¬ä»ç„¶é€‚ç”¨ã€‚</p><h1 id="VIII-CONCLUSION-amp-FUTURE-WORK"><a href="#VIII-CONCLUSION-amp-FUTURE-WORK" class="headerlink" title="VIII. CONCLUSION &amp; FUTURE WORK"></a>VIII. CONCLUSION &amp; FUTURE WORK</h1><blockquote><p>In this paper, we conducted a comprehensive empirical study to understand the performance of Hyperledger Fabric, a permissioned blockchain platform, by varying values assigned to configurable parameters such as block size, endorsement policy, channels, resource allocation, and state database choices. As a result of our study, we provided six valuable guidelines on configuring these parameters and also identified three major performance bottlenecks. Hence, we introduced and studied three simple optimizations such as MSP cache, parallel VSCC validation, and bulk read/write during MVCC validation &amp; commit phase to improve the singe channel performance by 16Ã—. Further, these three optimizations have been successfully adopted in Fabric v1.1</p></blockquote><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬è¿›è¡Œäº†ä¸€é¡¹å…¨é¢çš„å®è¯ç ”ç©¶ï¼Œä»¥äº†è§£é€šè¿‡æ›´æ”¹åˆ†é…ç»™å¯é…ç½®å‚æ•°ï¼ˆä¾‹å¦‚åŒºå—å¤§å°ï¼ŒèƒŒä¹¦ç­–ç•¥ï¼Œé€šé“ï¼Œèµ„æºåˆ†é…å’ŒçŠ¶æ€æ•°æ®åº“é€‰æ‹©ï¼‰çš„å€¼æ¥äº†è§£è®¸å¯çš„åŒºå—é“¾å¹³å° Hyperledger Fabric çš„æ€§èƒ½ã€‚ ä½œä¸ºæˆ‘ä»¬ç ”ç©¶çš„ç»“æœï¼Œæˆ‘ä»¬æä¾›äº†å…­ç§æœ‰å…³é…ç½®è¿™äº›å‚æ•°çš„æœ‰ä»·å€¼çš„æŒ‡å—ï¼Œå¹¶ä¸”ç¡®å®šäº†ä¸‰ä¸ªä¸»è¦çš„æ€§èƒ½ç“¶é¢ˆã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å¼•å…¥å¹¶ç ”ç©¶äº†ä¸‰ç§ç®€å•çš„ä¼˜åŒ–æ–¹æ³•ï¼Œä¾‹å¦‚ MSP ç¼“å­˜ï¼Œå¹¶è¡Œ VSCC éªŒè¯ä»¥åŠ MVCC éªŒè¯å’Œæäº¤é˜¶æ®µæœŸé—´çš„æ‰¹é‡è¯»/å†™ï¼Œä»¥å°†å•é€šé“æ€§èƒ½æé«˜ 16 å€ã€‚ æ­¤å¤–ï¼Œè¿™ä¸‰ä¸ªä¼˜åŒ–å·²åœ¨ Fabric v1.1 ä¸­æˆåŠŸé‡‡ç”¨</p><blockquote><p>As a part of future work, we will study the scalability and fault tolerant capability of Fabric by using different blockchain topologies such as different number of organizations and different number of nodes per organization. Further, we plan to quantify the impact of various consensus algorithms and number of nodes in the ordering service on the performance of different workloads. In our study, we assumed that the network is not a bottleneck. However, in the real world setup, nodes can be geographically distributed and hence, the network might play a role. In addition, the arrival rates in real world production system would be following certain distributions. Hence, we will study the performance of Fabric in Wide Area Network (WAN) with different arrival rate distributions.</p></blockquote><p>ä½œä¸ºæœªæ¥å·¥ä½œçš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä½¿ç”¨ä¸åŒçš„åŒºå—é“¾æ‹“æ‰‘æ¥ç ” ç©¶Fabric çš„å¯æ‰©å±•æ€§å’Œå®¹é”™èƒ½åŠ›ï¼Œä¾‹å¦‚ä¸åŒçš„ç»„ç»‡æ•°é‡å’Œæ¯ä¸ªç»„ç»‡çš„èŠ‚ç‚¹æ•°é‡ã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬è®¡åˆ’é‡åŒ–è®¢è´­æœåŠ¡ä¸­å„ç§å…±è¯†ç®—æ³•å’ŒèŠ‚ç‚¹æ•°å¯¹ä¸åŒå·¥ä½œè´Ÿè½½æ€§èƒ½çš„å½±å“ã€‚ åœ¨æˆ‘ä»¬çš„ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬å‡è®¾ç½‘ç»œä¸æ˜¯ç“¶é¢ˆã€‚ ä½†æ˜¯ï¼Œåœ¨ç°å®ä¸–ç•Œä¸­ï¼ŒèŠ‚ç‚¹å¯ä»¥åœ¨åœ°ç†ä½ç½®ä¸Šåˆ†å¸ƒï¼Œå› æ­¤ç½‘ç»œå¯èƒ½ä¼šå‘æŒ¥ä½œç”¨ã€‚ å¦å¤–ï¼Œå®é™…ç”Ÿäº§ç³»ç»Ÿä¸­çš„åˆ°è¾¾ç‡å°†éµå¾ªæŸäº›åˆ†å¸ƒã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å°†ç ”ç©¶å…·æœ‰ä¸åŒåˆ°è¾¾é€Ÿç‡åˆ†å¸ƒçš„å¹¿åŸŸç½‘ï¼ˆWANï¼‰ä¸­å…‰çº¤çš„æ€§èƒ½ã€‚</p><h1 id="IX-ACKNOWLEDGEMENTS"><a href="#IX-ACKNOWLEDGEMENTS" class="headerlink" title="IX. ACKNOWLEDGEMENTS"></a>IX. ACKNOWLEDGEMENTS</h1><blockquote><p>We wish to acknowledge our following colleagues for their valuable assistance to our work. Our proposed optimizations were successfully adopted to Fabric, thanks to fabric developers who took care of submitting patches to Fabric v1.1. Angelo De Carlo (MSP Cache), Alessandro Sorniotti (Parallel Validation). Thanks to David Enyeart, Chris Elder, Manish Sethi for their proposal on Bulk Read from CouchDB. We would like to thank Yacov Manevich for his consistent help.</p></blockquote><p>æˆ‘ä»¬è°¨æ„Ÿè°¢ä»¥ä¸‹åŒäº‹ä¸ºæˆ‘ä»¬çš„å·¥ä½œæä¾›çš„å®è´µå¸®åŠ©ã€‚ æˆ‘ä»¬çš„å»ºè®®ä¼˜åŒ–å·²æˆåŠŸåœ°è¢« Fabric é‡‡çº³ï¼Œè¿™è¦å½’åŠŸäº Fabricå¼€å‘äººå‘˜è´Ÿè´£å‘ Fabric v1.1 æäº¤è¡¥ä¸ã€‚ Angelo De Carloï¼ˆMSPç¼“å­˜ï¼‰ï¼ŒAlessandro Sorniottiï¼ˆå¹¶è¡ŒéªŒè¯ï¼‰ã€‚ æ„Ÿè°¢ David Enyeartï¼ŒChris Elder å’Œ Manish Sethi æå‡ºçš„æœ‰å…³ CouchDB æ‰¹é‡è¯»å–çš„å»ºè®®ã€‚ æˆ‘ä»¬è¦æ„Ÿè°¢ Yacov Manevich çš„ä¸€è´¯å¸®åŠ©ã€‚ </p>]]></content>
      
      
      
        <tags>
            
            <tag> ç¿»è¯‘ </tag>
            
            <tag> ç²¾è¯» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é˜¿é‡ŒAEæŠ€æœ¯éƒ¨-ä¸€é¢</title>
      <link href="/2020/04/02/%E9%98%BF%E9%87%8CAE%E6%8A%80%E6%9C%AF%E9%83%A8-%E4%B8%80%E9%9D%A2/"/>
      <url>/2020/04/02/%E9%98%BF%E9%87%8CAE%E6%8A%80%E6%9C%AF%E9%83%A8-%E4%B8%80%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<p>30 åˆ†é’Ÿå‡‰ç»</p><ul><li><p>ä¸ºä»€ä¹ˆé€‰å‰ç«¯</p></li><li><p>ä½ è®¤ä¸ºå‰ç«¯éœ€è¦ä»€ä¹ˆèƒ½åŠ›</p></li><li><p>ä»‹ç»ä¸€ä¸‹é¡¹ç›®</p><ul><li>å¡ç‰‡å’Œçº¿è£…é¥°ï¼Œçº¿æ˜¯ç”¨ svg å›¾ç‰‡ï¼Œé«˜äº®ç‚¹æ²¿çº¿ç§»åŠ¨ï¼Œç”¨ kute.js åŠ¨ç”»åº“</li></ul></li><li><p>ä¸ç”¨ svg çš„è¯å¯ä»¥ç”¨ä»€ä¹ˆï¼Ÿ</p><ul><li>canvas</li></ul></li><li><p>å½“æ—¶ä¸ºä»€ä¹ˆä¸ç”¨</p><ul><li><p>ä¸ä¼šç”»â€¦â€¦</p><blockquote><p>é¡¹ç›®è¿™è¾¹åº”è¯¥æ˜¯ç»™äº†å¾ˆä¸å¥½çš„å°è±¡äº†ï¼Œæœ€åæœ‰è·Ÿæˆ‘æåˆ°æŠ€æœ¯é€‰å‹çš„é—®é¢˜</p></blockquote></li></ul></li><li><p>é¡¹ç›®åœ¨ä½ æ¥æ‰‹ä¹‹å‰å’Œä¹‹åæœ‰ä»€ä¹ˆä¸åŒå—ï¼Ÿæœ‰æ²¡æœ‰åšä»€ä¹ˆä¼˜åŒ–</p><ul><li>æ²¡æœ‰â€¦â€¦</li></ul></li><li><p>css position çš„å–å€¼</p><ul><li>static</li><li>absolute</li><li>relative</li><li>fixed</li></ul></li><li><p>static å’Œ fixed æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><ul><li>fixed æ˜¯ç›¸å¯¹äºæµè§ˆå™¨çª—å£å®šä½çš„ï¼Œstatic æˆ‘æ²¡ç”¨è¿‡ä¸æ˜¯å¤ªäº†è§£</li></ul></li><li><p>css é€‰æ‹©å™¨</p><ul><li>æƒé‡å åŠ ï¼Œimportant æœ€é«˜ï¼Œid é€‰æ‹©å™¨ç¬¬äºŒ</li></ul></li><li><p>äº‹ä»¶å†’æ³¡å’Œäº‹ä»¶æ•è·çš„åœºæ™¯</p><ul><li>å†’æ³¡æ˜¯ç‚¹å‡»çš„å…ƒç´ æ²¿ç€ DOM æ ‘ä¸€çº§çº§å‘ä¸Šç›´åˆ° Documentï¼Œæ•è·ç›¸å</li><li>åœºæ™¯æƒ³ä¸åˆ°ï¼Œä¸¾äº†ä¸€ä¸ªä¹‹å‰åšé¡¹ç›®çš„ä¾‹å­ï¼ŒcurrentTargetï¼Œonmousedown.stop</li></ul></li><li><p>é¡¹ç›®ç”¨ä»€ä¹ˆæ¡†æ¶ï¼Ÿæ‰“åŒ…åŸç†æ¸…æ¥šå—ï¼Ÿwebpack ä¹‹ç±»çš„æœ‰é…ç½®è¿‡å—</p><ul><li><p>Vue</p></li><li><p>webpack äº†è§£è¿‡ï¼Œæ ¹æ®å…¥å£å»æ‰¾ç›¸å…³ä¾èµ–ï¼Œç„¶åä¾èµ–å¯¼å…¥çš„æ—¶å€™ä¼šç”¨åˆ° loader</p></li><li><p>é…ç½®äº†ä¸€ä¸ªï¼Œå°±æ˜¯è®© .map æ–‡ä»¶ä¸æ‰“åŒ…å‡ºæ¥ï¼Œè¿™æ ·æœ€ç»ˆçš„åŒ…ä¼šå°ä¸€ç‚¹</p></li><li><blockquote><p>è¿™ä¸€å—å…¶å®æ²¡å¬å¤ªæ¸…æ¥šï¼Œç”µè¯å£°éŸ³æœ‰ç‚¹å°ï¼Œå¤§æ¦‚æ„æ€å°±æ˜¯åªæ˜¯ç”¨äº†è„šæ‰‹æ¶æä¾›çš„åŠŸèƒ½ï¼Œå†…ç½®çš„ä¸œè¥¿æ²¡æœ‰å»æ·±å…¥äº†è§£ï¼Œä¸çŸ¥é“æ•´ä¸ªæ„å»ºæµç¨‹</p><p>æ„Ÿè§‰é¢è¯•å®˜æ˜¯ç”¨ react çš„ï¼Œæˆ‘è¯´ vue ä¹‹åå°±æ²¡ä»€ä¹ˆå…´è¶£é—®äº†</p></blockquote></li></ul></li><li><p>å›¾ç‰‡æ‡’åŠ è½½æ€ä¹ˆåšçš„</p><ul><li>è¿™ä¸ªä¸æ¸…æ¥š</li></ul></li><li><p>è¯´ä¸€ä¸‹ cookie</p><ul><li>sessionStorage æ ‡ç­¾ä¹‹é—´ä¸å…±äº«ï¼Œlocalstorage æ°¸ä¹…å­˜å‚¨ï¼Œ cookie å¯ä»¥è®¾ç½®è¿‡æœŸæ—¶é—´æ‰€ä»¥é¡¹ç›®ç”¨äº† cookie</li></ul></li><li><p>è·¨åŸŸ</p><ul><li>å¹³æ—¶ä¸€èˆ¬æ˜¯ CORSï¼Œè¿˜æœ‰å°±æ˜¯ jsonpï¼Œjsonp æ˜¯åˆ©ç”¨ html æ ‡ç­¾çš„ src å±æ€§æ²¡æœ‰æµè§ˆå™¨å®‰å…¨çš„é™åˆ¶ï¼Œç”¨å›è°ƒå‡½æ•°å®ç°è·¨åŸŸ</li></ul></li><li><p>CORS æœ‰é…ç½®è¿‡å—</p><ul><li>æ²¡æœ‰ï¼Œéƒ½æ˜¯åç«¯é…çš„</li></ul></li><li><p>æœ‰æ²¡æœ‰åšè¿‡æœåŠ¡ç«¯</p><ul><li>å†™è¿‡ sdkï¼Œåº”è¯¥ä¸ç®—æœåŠ¡ç«¯å§</li></ul></li><li><p>æœ‰ä»€ä¹ˆè¡¥å……çš„å—</p><ul><li>ä¹‹å‰è°ƒ bug çš„æ—¶å€™ç”¨åˆ° setTimeout(0)ï¼Œå°±é¡ºä¾¿å­¦åˆ°äº†äº‹ä»¶å¾ªç¯æœºåˆ¶å’Œ js è¿è¡Œæœºåˆ¶ï¼Œåæ¥å›é¡¾çš„æ—¶å€™çŸ¥é“ vue é‡Œæœ‰ä¸ª nextTickï¼Œç®—æ˜¯è¯¯æ‰“è¯¯æ’å®ç°äº†</li></ul></li><li><p>nextTick å’Œ setTimeout æœ‰ä»€ä¹ˆåŒºåˆ«</p><ul><li><p>nextTick æ˜¯è®©å›è°ƒå‡½æ•°åœ¨ä¸‹ä¸€æ¬¡é¡µé¢æ¸²æŸ“ä¹‹åå†å»æ‰§è¡Œï¼ŒsetTimeout åªæ˜¯å®ç° nextTick çš„ä¸€ç§æ–¹å¼ï¼Œä¹Ÿå¯ä»¥ç”¨ Promise å®ç°ï¼Œè¿™ä¸ªä¼šåˆ¤æ–­æµè§ˆå™¨çš„æ”¯æŒæƒ…å†µ</p></li><li><blockquote><p>æˆ‘ä»¥ä¸ºè¿™è¾¹ä¼šé¡ºç€é—®ä¸€ä¸‹äº‹ä»¶å¾ªç¯æœºåˆ¶å’Œjsè¿è¡Œæœºåˆ¶ï¼Œæ²¡æƒ³åˆ°é—®äº†ä¸ª nextTick</p></blockquote></li></ul></li></ul><p>æœ€åæˆ‘æ˜¯é—®å¯¹æˆ‘ä»Šåçš„å­¦ä¹ æœ‰ä»€ä¹ˆå»ºè®®ï¼Ÿ</p><p>ç³»ç»Ÿå­¦ä¸€ä¸‹å‰ç«¯åŸºç¡€ï¼Œä¸è¦æ˜¯åšé¡¹ç›®åšåˆ°äº†æ‰å»å­¦ã€‚åœ¨åšé¡¹ç›®çš„æ—¶å€™è¦äº†è§£ä¸€ä¸‹ä¸šç•Œæ¯”è¾ƒæµè¡Œçš„åšæ³•ï¼Œå‰ç«¯æ›´æ–°æ¯”è¾ƒå¿«ï¼Œæ³¨æ„æ€§èƒ½ä¸Šçš„ä¸€äº›ä¼˜åŒ–ã€‚</p><blockquote><p>å¯èƒ½æ˜¯çœ‹æˆ‘åšäº†é¡¹ç›®å§ï¼Œå¤§å¤šæ•°é—®é¢˜éƒ½æ˜¯ä»é¡¹ç›®å…¥æ‰‹çš„ï¼Œæˆ‘é¡¹ç›®ä¹Ÿåšçš„ä¸å¤ªå¥½ï¼Œåº”è¯¥è¯´æ²¡æ•´ç†å¥½ï¼Œæ²¡è®²æ¸…æ¥šä¹Ÿæ²¡ä½“ç°æŠ€æœ¯ï¼Œè¿™ä¹Ÿå’Œæˆ‘å¹³æ—¶åšé¡¹ç›®èƒ½ç”¨å°±è¡Œçš„æƒ³æ³•æœ‰å…³ç³»ã€‚</p><p>ç¡®å®å¯¹æ—§é¡¹ç›®æ²¡æœ‰åšè¿‡ä¼˜åŒ–ï¼Œåšæ–°åŠŸèƒ½çš„æ—¶å€™æŠ€æœ¯é€‰å‹ä¹Ÿæœ‰é—®é¢˜ï¼Œå°±æ˜¯ä»–è¯´çš„é¡¹ç›®ç”¨åˆ°äº†æ‰åŒ†åŒ†å¿™å¿™å»å­¦ã€‚</p><p>å‡†å¤‡é¢è¯•çš„æ—¶å€™éƒ½æ˜¯åœ¨çœ‹ js åŸºç¡€ç›¸å…³çš„ï¼Œæ¯”è¾ƒå¥‡æ€ªçš„æ˜¯é—®äº†å¥½å¤šä¼˜åŒ–çš„ä¸œè¥¿ï¼Œjs åè€Œä¸€ç‚¹æ²¡é—®ï¼Œåé¢åˆè¯´æˆ‘åŸºç¡€ä¸å¤ªå¥½ï¼ˆè™½ç„¶ç¡®å®æ˜¯ä¸å¤ªå¥½ï¼‰ï¼Œä»¥ä¸ºä¸€é¢ä¼šé—®å¾ˆå¤šåŸºç¡€ï¼Œæ²¡æƒ³åˆ°éƒ½æ²¡æ€ä¹ˆé—®</p><p>å…¶å®é¢ç€é¢ç€å°±çŸ¥é“è‡ªå·±å‡‰äº†ï¼Œæ€»è§‰å¾—å¯¹é¢å·²ç»æ‹›å¤Ÿäº†ï¼Œä¹Ÿä¸å¤ªæœ‰å…´è¶£é—®ä¸‹å»çš„æ„Ÿè§‰</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> é¢è¯•å‡†å¤‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ·é¢ç»</title>
      <link href="/2020/04/02/%E5%88%B7%E9%9D%A2%E7%BB%8F/"/>
      <url>/2020/04/02/%E5%88%B7%E9%9D%A2%E7%BB%8F/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘æœ‰ç‚¹çœ‹ä¸è¿›å»ä¹¦ï¼Œåˆ°ç‰›å®¢æ‰¾é¢ç»ä¸Šé¢å¯¹é¢ç»å¤ä¹ </p><p>ä¸»è¦æ˜¯ä¸ºäº†ç”¨è‡ªå·±çš„è¯­è¨€ç»„ç»‡ä¸€ä¸‹ï¼Œæ€•é¢è¯•äº†ç­”ä¸ä¸Šæ¥</p><h2 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h2><ul><li>this ä½œç”¨åŸŸ<ul><li>æŒ‡å‘è¿è¡Œæ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸï¼Œä¸€èˆ¬æ˜¯è°ƒç”¨å‡½æ•°çš„å¯¹è±¡</li><li>å¦‚æœæ˜¯å…¨å±€å°±æ˜¯ Window</li><li>å¦‚æœæ˜¯è¯¥å‡½æ•°æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼ŒthisæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªæ–°çš„å¯¹è±¡</li><li>ä½¿ç”¨ callã€applyã€bind å¯ä»¥æ”¹å˜ this çš„æŒ‡å‘<ul><li>callã€apply åŒºåˆ«ï¼š<ul><li>ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯ this éœ€è¦æŒ‡å‘çš„å¯¹è±¡</li><li>call å‚æ•°ä¸€ä¸ªä¸ªä¼ </li><li>apply ä¼ æ•°ç»„</li></ul></li><li>bind åªæ˜¯ç»‘å®šä¸€ä¸‹ï¼Œä¸æ‰§è¡Œï¼Œè¦æ‰§è¡Œçš„è¯éœ€è¦å†åŠ æ‹¬å·</li><li>ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ thisï¼Œæ ¹æ®ä½œç”¨åŸŸé“¾å»æ‰¾<ul><li>å¦‚æœç®­å¤´å‡½æ•°ä½¿ç”¨ callã€applyã€bindï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¼šè¢«å¿½ç•¥</li></ul></li></ul></li></ul></li><li>ä»€ä¹ˆæ ·çš„ const å€¼å¯ä»¥æ›´æ”¹<ul><li>const åªè§„å®šäº†å˜é‡çš„å†…å®¹ä¸è¢«ä¿®æ”¹</li><li>å¦‚æœæ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆstringã€numberã€boolã€undefinedã€nullã€symbolï¼‰å°±ä¸èƒ½æ”¹ï¼Œå› ä¸ºç›´æ¥å­˜çš„æ•°æ®</li><li>å¦‚æœæ˜¯å¤æ‚æ•°æ®ç±»å‹ï¼ˆObjectï¼‰å°±å¯ä»¥æ”¹ï¼Œå› ä¸ºä¿å­˜çš„æ˜¯å˜é‡çš„åœ°å€ï¼Œåœ°å€å†æŒ‡å‘çœŸå®çš„æ•°æ®ï¼Œæ”¹å˜çœŸå®æ•°æ®çš„æƒ…å†µä¸‹ï¼Œåœ°å€ä¸ä¼šå˜</li></ul></li><li>äº‹ä»¶<ul><li>äº‹ä»¶æ•è·</li><li>å¤„äºç›®æ ‡é˜¶æ®µ</li><li>äº‹ä»¶å†’æ³¡</li></ul></li><li>Promise</li><li>å‡½æ•°çš„æŸ¯é‡ŒåŒ–<ul><li>æŠŠæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›æ¥å—ä½™ä¸‹å‚æ•°çš„æ–°å‡½æ•°</li></ul></li><li>js åŸå‹é“¾</li><li>æ·±æµ…å¤åˆ¶</li><li>é—­åŒ…<ul><li>èƒ½å¤Ÿè¯»å–å…¶ä»–å‡½æ•°å˜é‡çš„å‡½æ•°</li></ul></li><li>new ä¸€ä¸ªå¯¹è±¡çš„è¿‡ç¨‹<ul><li>åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡</li><li>å°†å¯¹è±¡çš„åŸå‹æŒ‡å‘æ„é€ å‡½æ•°</li><li>æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç </li><li>è¿”å›æ–°å¯¹è±¡</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line">obj.__proto__ = Base.prototype;</span><br><span class="line">Base.call(obj);</span><br></pre></td></tr></table></figure><h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><ul><li>æ€ä¹ˆç”¨ css ç”»ä¸€ä¸ªä¸‰è§’å½¢</li><li>ç›¸å¯¹å®šä½</li><li>ç»å¯¹å®šä½</li><li>flex-box æ€ä¹ˆç”¨</li></ul><h2 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h2><ul><li>åŒå‘ç»‘å®šåŸç†</li><li>vue-router å®ç°æ–¹å¼</li><li>vue å’Œ React çš„åŒºåˆ«</li><li>mvvm çš„è®¾è®¡æ¨¡å¼<ul><li>ViewModel åˆ†ç¦»è§†å›¾å’Œæ¨¡å‹ï¼ŒViewModel åªå…³å¿ƒæ•°æ®å’Œä¸šåŠ¡çš„å¤„ç†</li></ul></li><li>çˆ¶å­ç»„ä»¶çš„é€šä¿¡æœºåˆ¶</li><li>ç»„ä»¶åŒ–æ€æƒ³</li><li>é¡µé¢æ‡’åŠ è½½å‘å†™æ³•</li></ul><h2 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h2><ul><li>é˜Ÿåˆ—å’Œæ ˆçš„åŒºåˆ«ï¼Ÿç”¨æ ˆæ¥å®ç°é˜Ÿåˆ—<ul><li>é˜Ÿåˆ—æ˜¯å…ˆè¿›å…ˆå‡ºï¼Œç±»ä¼¼äºæ’é˜Ÿï¼›æ ˆçš„è¯æ˜¯å…ˆè¿›åå‡ºï¼Œå‡ºå…¥å£æ˜¯åŒä¸€ä¸ªï¼Œå…ˆè¿›çš„å…ƒç´ ä¼šè¢«å‹åœ¨ä¸‹é¢</li><li>å¯ä»¥ç”¨ä¸¤ä¸ªæ ˆï¼Œåœ¨å‡ºæ ˆçš„æ—¶å€™æŠŠå…ƒç´ éƒ½å…ˆæ”¾åˆ°å¦å¤–ä¸€ä¸ªæ ˆä¸­ï¼Œè¿™æ ·é¡ºåºå°±å¯¹äº†</li></ul></li></ul><h2 id="ç½‘ç»œ"><a href="#ç½‘ç»œ" class="headerlink" title="ç½‘ç»œ"></a>ç½‘ç»œ</h2><ul><li>TCPã€UDPåŒºåˆ«ï¼ŸTCPå¦‚ä½•åšåˆ°åŒå·¥å¯é ä¼ è¾“ï¼ŸTCPé˜»å¡æ§åˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ<ul><li>TCP æ˜¯é¢å‘è¿æ¥çš„ï¼Œä¼ è¾“æ¯”è¾ƒå¯é ï¼›UDP æ˜¯ä¸å¯é ä¼ è¾“ï¼Œæ¯”è¾ƒé€‚ç”¨äºå®æ—¶åº”ç”¨</li></ul></li><li>302 å’Œ 304 çš„åŒºåˆ«</li><li>http code çš„å«ä¹‰</li></ul><h2 id="æ“ä½œç³»ç»Ÿ"><a href="#æ“ä½œç³»ç»Ÿ" class="headerlink" title="æ“ä½œç³»ç»Ÿ"></a>æ“ä½œç³»ç»Ÿ</h2><ul><li>è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«</li></ul><h2 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h2><ul><li>è·¨åŸŸ</li><li>jsonp åŸç†</li><li>ç”¨æˆ·è¾“å…¥ç½‘å€ï¼Œçœ‹åˆ°é¡µé¢çš„æµç¨‹</li><li>Bootstrap æ …æ ¼ç³»ç»Ÿçš„å†™æ³•</li><li>æ€ä¹ˆä¼˜åŒ–é¡¹ç›®</li><li>å­˜å‚¨</li></ul><h2 id="æ‰‹æ’•ä»£ç "><a href="#æ‰‹æ’•ä»£ç " class="headerlink" title="æ‰‹æ’•ä»£ç "></a>æ‰‹æ’•ä»£ç </h2><ul><li>æå–urlä¸­searchéƒ¨åˆ†å‚æ•°ï¼Œ<a href="https://www.aliexpress.com/?a=1&amp;b=2" target="_blank" rel="noopener">https://www.aliexpress.com/?a=1&amp;b=2</a></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span> (<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> arr = str.split(<span class="string">'?'</span>)[<span class="number">1</span>];</span><br><span class="line">  <span class="keyword">let</span> params = arr.split(<span class="string">'&amp;'</span>);</span><br><span class="line">  <span class="keyword">let</span> ans = []</span><br><span class="line">  <span class="keyword">for</span> (item <span class="keyword">of</span> params) &#123;</span><br><span class="line">    <span class="keyword">let</span> param = item.split(<span class="string">'='</span>);</span><br><span class="line">    ans.push(&#123;<span class="attr">key</span>: param[<span class="number">0</span>], <span class="attr">value</span>: param[<span class="number">1</span>]&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å†™ä¸€ä¸ªç±»Personï¼Œ æ‹¥æœ‰å±æ€§ageå’Œnameï¼Œæ‹¥æœ‰æ–¹æ³•say(something)ï¼Œ å†å†™ä¸€ä¸ªç±»Supermanï¼Œç»§æ‰¿Personï¼Œæ‹¥æœ‰è‡ªå·±çš„å±æ€§powerï¼Œæ‹¥æœ‰è‡ªå·±çš„æ–¹æ³•fly(height)</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(age, name) &#123;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">  say(something) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(something)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Superman</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(power) &#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">    <span class="keyword">this</span>.power = power;</span><br><span class="line">  &#125;</span><br><span class="line">  fly(height) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`fly to <span class="subst">$&#123;height&#125;</span>`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Given a sorted array nums, remove the duplicates in-place such that each element appear only once and return the new length. Do not allocate extra space for another array, you must do this by modifying the input array in-place with O(1) extra memory.</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">moveDup</span>(<span class="params">params</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; params.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (params[i] === params[i<span class="number">-1</span>]) &#123;</span><br><span class="line">      params.splice(i, <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> params</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(moveDup([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>]))</span><br></pre></td></tr></table></figure><ul><li>quickSort</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickSort</span>(<span class="params">arr, left = <span class="number">0</span>, right = arr.length - <span class="number">1</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (left &gt;= right) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> priv = arr[right];</span><br><span class="line">  <span class="keyword">let</span> i = left;</span><br><span class="line">  <span class="keyword">let</span> j = right;</span><br><span class="line">  <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; j &amp;&amp; arr[i] &lt; priv) &#123;</span><br><span class="line">      i++;</span><br><span class="line">    &#125;</span><br><span class="line">    arr[j] = arr[i];</span><br><span class="line">    <span class="keyword">while</span> (j &gt; i &amp;&amp; arr[j] &gt; priv) &#123;</span><br><span class="line">      j--;</span><br><span class="line">    &#125;</span><br><span class="line">    arr[i] = arr[j];</span><br><span class="line">  &#125;</span><br><span class="line">  arr[j] = priv;</span><br><span class="line">  quickSort(arr, left, j<span class="number">-1</span>);</span><br><span class="line">  quickSort(arr, j+<span class="number">1</span>, right);</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>debounce</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn, ms</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    clearTimeout(timer);</span><br><span class="line">    timer = setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">      fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    &#125;, ms);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>throttle</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, ms</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> flag = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!flag) <span class="keyword">return</span>;</span><br><span class="line">    flag = <span class="literal">false</span>;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">      fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">      flag = <span class="literal">true</span></span><br><span class="line">    &#125;, ms)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> é¢è¯•å‡†å¤‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot</title>
      <link href="/2020/04/02/SpringBoot/"/>
      <url>/2020/04/02/SpringBoot/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring-Boot-å…¥é—¨"><a href="#Spring-Boot-å…¥é—¨" class="headerlink" title="Spring Boot å…¥é—¨"></a>Spring Boot å…¥é—¨</h1><h2 id="Srping-Boot-ç®€ä»‹"><a href="#Srping-Boot-ç®€ä»‹" class="headerlink" title="Srping Boot ç®€ä»‹"></a>Srping Boot ç®€ä»‹</h2><blockquote><p>ç®€åŒ– Spring åº”ç”¨å¼€å‘çš„ä¸€ä¸ªæ¡†æ¶ï¼›</p><p>æ•´ä¸ª Spring æŠ€æœ¯æ ˆçš„ä¸€ä¸ªå¤§é›†åˆï¼›</p><p>J2EE å¼€å‘çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼›</p></blockquote><h2 id="å¾®æœåŠ¡"><a href="#å¾®æœåŠ¡" class="headerlink" title="å¾®æœåŠ¡"></a>å¾®æœåŠ¡</h2><p>å¾®æœåŠ¡ï¼šæ¶æ„é£æ ¼ï¼ˆå¾®æœåŠ¡åŒ–ï¼‰</p><p>ä¸€ä¸ªåº”ç”¨åº”è¯¥æ˜¯ä¸€ç»„å°å‹æœåŠ¡ï¼›å¯ä»¥é€šè¿‡ HTTP çš„æ–¹å¼è¿›è¡Œäº’é€šï¼›</p><p>æ¯ä¸€ä¸ªåŠŸèƒ½å…ƒç´ æœ€ç»ˆéƒ½æ˜¯ä¸€ä¸ªå¯ç‹¬ç«‹æ›¿æ¢å’Œç‹¬ç«‹å‡çº§çš„è½¯ä»¶å•å…ƒï¼›</p><h2 id="Hello-World-æ¢ç©¶"><a href="#Hello-World-æ¢ç©¶" class="headerlink" title="Hello World æ¢ç©¶"></a>Hello World æ¢ç©¶</h2><h3 id="POMæ–‡ä»¶"><a href="#POMæ–‡ä»¶" class="headerlink" title="POMæ–‡ä»¶"></a>POMæ–‡ä»¶</h3><h4 id="çˆ¶é¡¹ç›®"><a href="#çˆ¶é¡¹ç›®" class="headerlink" title="çˆ¶é¡¹ç›®"></a>çˆ¶é¡¹ç›®</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">    &lt;parent&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;<span class="regexp">/groupId&gt;</span></span><br><span class="line"><span class="regexp">        &lt;artifactId&gt;spring-boot-starter-parent&lt;/</span>artifactId&gt;</span><br><span class="line">        &lt;version&gt;<span class="number">2.2</span><span class="number">.6</span>.RELEASE&lt;<span class="regexp">/version&gt;</span></span><br><span class="line"><span class="regexp">        &lt;relativePath/</span>&gt; &lt;!-- lookup parent <span class="keyword">from</span> repository --&gt;</span><br><span class="line">    &lt;<span class="regexp">/parent&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ å®ƒçš„çˆ¶é¡¹ç›®æ˜¯ï¼ˆcmd+é¼ æ ‡å·¦é”®ç‚¹å‡» spring-boot-starter-parent æŸ¥çœ‹ï¼‰</span></span><br><span class="line"><span class="regexp">  &lt;parent&gt;</span></span><br><span class="line"><span class="regexp">    &lt;groupId&gt;org.springframework.boot&lt;/g</span>roupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-dependencies&lt;<span class="regexp">/artifactId&gt;</span></span><br><span class="line"><span class="regexp">    &lt;version&gt;2.2.6.RELEASE&lt;/</span>version&gt;</span><br><span class="line">    &lt;relativePath&gt;../../spring-boot-dependencies&lt;<span class="regexp">/relativePath&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>parent&gt;</span><br><span class="line"><span class="comment">// çœŸæ­£ç®¡ç† Spring Boot åº”ç”¨é‡Œæ‰€æœ‰ä¾èµ–ç‰ˆæœ¬</span></span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨å™¨"><a href="#å¯åŠ¨å™¨" class="headerlink" title="å¯åŠ¨å™¨"></a>å¯åŠ¨å™¨</h4><h5 id="spring-boot-starter-web"><a href="#spring-boot-starter-web" class="headerlink" title="spring-boot-starter-web"></a>spring-boot-starter-web</h5><ul><li>spring-boot-starterï¼šSpringBoot åœºæ™¯å¯åŠ¨å™¨</li></ul><p>Spring Boot å°†æ‰€æœ‰çš„åŠŸèƒ½åœºæ™¯éƒ½æŠ½å–å‡ºæ¥ï¼Œåšæˆä¸€ä¸ªä¸ªå¯åŠ¨å™¨ï¼Œåªéœ€è¦åœ¨é¡¹ç›®å¼•å…¥è¿™äº›å¯åŠ¨å™¨ç›¸å…³åœºæ™¯éƒ½æ‰€æœ‰ä¾èµ–éƒ½ä¼šå¯¼å…¥è¿›æ¥ï¼Œè¦ä»€ä¹ˆåŠŸèƒ½å°±å¯¼å…¥ä»€ä¹ˆå¯åŠ¨å™¨</p><ul><li>spring-boot-starter-webï¼šå¸®æˆ‘ä»¬å¯¼å…¥äº† web æ¨¡å—æ­£å¸¸è¿è¡Œæ‰€ä¾èµ–çš„ç»„ä»¶</li></ul><h3 id="ä¸»ç¨‹åºç±»ï¼Œä¸»å…¥å£ç±»"><a href="#ä¸»ç¨‹åºç±»ï¼Œä¸»å…¥å£ç±»" class="headerlink" title="ä¸»ç¨‹åºç±»ï¼Œä¸»å…¥å£ç±»"></a>ä¸»ç¨‹åºç±»ï¼Œä¸»å…¥å£ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(DemoApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>@SpringBootApplicationï¼šè¯´æ˜è¿™ä¸ªç±»æ˜¯ä¸»é…ç½®ç±»ï¼Œè¿è¡Œè¯¥ç±»çš„ main æ–¹æ³•å¯åŠ¨ SpringBoot åº”ç”¨</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(</span><br><span class="line">    excludeFilters = &#123;<span class="meta">@Filter</span>(</span><br><span class="line">    type = FilterType.CUSTOM,</span><br><span class="line">    classes = &#123;TypeExcludeFilter<span class="class">.<span class="keyword">class</span>&#125;</span></span><br><span class="line"><span class="class">), @<span class="title">Filter</span>(</span></span><br><span class="line"><span class="class">    <span class="title">type</span> </span>= FilterType.CUSTOM,</span><br><span class="line">    classes = &#123;AutoConfigurationExcludeFilter<span class="class">.<span class="keyword">class</span>&#125;</span></span><br><span class="line"><span class="class">)&#125;</span></span><br><span class="line"><span class="class">)</span></span><br></pre></td></tr></table></figure><ul><li><p>@SpringBootConfigurationï¼šSpringBoot çš„é…ç½®ç±»</p><ul><li>æ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª SpringBoot çš„é…ç½®ç±»</li><li>@Configurationï¼šé…ç½®ç±»ä¸Šæ ‡æ³¨è¿™ä¸ªæ³¨è§£</li><li>@Componentï¼šè¯´æ˜è¿™ä¹Ÿæ˜¯ä¸€ä¸ªspringçš„ç»„ä»¶</li></ul></li><li><p>@EnableAutoConfigurationï¼šè‡ªåŠ¨é…ç½®</p><ul><li>@AutoConfigurationPackageï¼šè‡ªåŠ¨é…ç½®åŒ…<ul><li>@Import({Registrar.class})<ul><li>Spring çš„åº•å±‚æ³¨è§£ï¼Œç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€ä¸ªç»„ä»¶ï¼šå¯¼å…¥çš„ç»„ä»¶ç”± Registrar.class æŒ‡å®š</li><li>å°†ä¸»é…ç½®ç±»ï¼ˆ@SpringBootApplicationæ ‡æ³¨çš„ç±»ï¼‰çš„æ‰€åœ¨åŒ…ä»¥åŠä¸‹é¢æ‰€æœ‰å­åŒ…é‡Œé¢çš„æ‰€æœ‰ç»„ä»¶æ‰«æåˆ° Spring å®¹å™¨</li></ul></li></ul></li><li>@Import({AutoConfigurationImportSelector.class})ï¼šè‡ªåŠ¨é…ç½®å¯¼å…¥é€‰æ‹©<ul><li>å¯¼å…¥å“ªäº›ç»„ä»¶çš„é€‰æ‹©å™¨</li><li>å°†æ‰€æœ‰éœ€è¦å¯¼å…¥çš„ç»„ä»¶ä»¥å…¨ç±»åçš„æ–¹å¼è¿”å›ï¼›è¿™äº›ç»„ä»¶å°±ä¼šè¢«æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼›</li><li>ä¼šç»™å®¹å™¨å¯¼å…¥éå¸¸å¤šçš„è‡ªåŠ¨é…ç½®ç±»ï¼ˆxxxAutoConfigurationï¼‰ï¼›å°±æ˜¯ç»™å®¹å™¨ä¸­å¯¼å…¥è¿™ä¸ªåœºæ™¯éœ€è¦çš„æ‰€æœ‰ç»„ä»¶ï¼Œå¹¶é…ç½®å¥½è¿™äº›ç»„ä»¶ï¼›</li></ul></li></ul></li><li><p>META-INF/spring.factoriesï¼šè‡ªåŠ¨é…ç½®çš„æ ¸å¿ƒæ–‡ä»¶</p></li></ul><p>ç»“è®ºï¼šSpringboot æ‰€æœ‰è‡ªåŠ¨é…ç½®éƒ½æ˜¯åœ¨å¯åŠ¨çš„æ—¶å€™æ‰«æå¹¶åŠ è½½ <code>spring.factories</code> æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ç±»éƒ½åœ¨è¿™é‡Œé¢ï¼Œä½†ä¸ä¸€å®šç”Ÿæ•ˆï¼Œè¦åˆ¤æ–­æ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œåªè¦å¯¼å…¥äº†å¯¹åº”çš„ startï¼Œå°±æœ‰å¯¹åº”çš„å¯åŠ¨å™¨äº†ï¼Œæœ‰äº†å¯åŠ¨å™¨ï¼Œæˆ‘ä»¬è‡ªåŠ¨è£…é…å°±ä¼šç”Ÿæ•ˆï¼Œç„¶åå°±é…ç½®æˆåŠŸ</p><ol><li>springboot åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œä»ç±»è·¯å¾„ä¸‹ <code>/META-INF/spring.factories</code> è·å–æŒ‡å®šçš„å€¼</li><li>å°†è¿™äº›è‡ªåŠ¨é…ç½®çš„ç±»å¯¼å…¥å®¹å™¨ï¼Œè‡ªåŠ¨é…ç½®å°±ä¼šç”Ÿæ•ˆï¼Œå¸®æˆ‘ä»¬è¿›è¡Œè‡ªåŠ¨é…ç½®</li><li>æ•´åˆ javaEEï¼Œè§£å†³æ–¹æ¡ˆå’Œè‡ªåŠ¨é…ç½®çš„ä¸œè¥¿éƒ½åœ¨ spring-boot-autoconfigure-2.2.0.RELEASE.jar è¿™ä¸ªåŒ…ä¸‹</li><li>å®ƒä¼šæŠŠæ‰€æœ‰éœ€è¦å¯¼å…¥çš„ç»„ä»¶ï¼Œä»¥ç±»åçš„æ–¹å¼è¿”å›ï¼Œè¿™äº›ç»„ä»¶å°±ä¼šè¢«æ·»åŠ åˆ°å®¹å™¨</li><li>å®¹å™¨ä¸­ä¹Ÿä¼šå­˜åœ¨éå¸¸å¤šçš„ xxxAutoConfiguration çš„æ–‡ä»¶ï¼ˆ@Beanï¼‰ï¼Œå°±æ˜¯è¿™äº›ç±»ç»™å®¹å™¨ä¸­å¯¼å…¥äº†è¿™ä¸ªåœºæ™¯éœ€è¦çš„æ‰€æœ‰ç»„ä»¶ï¼›å¹¶è‡ªåŠ¨é…ç½®ï¼Œ@Configurationï¼ŒJavaConfig</li><li>æœ‰äº†è‡ªåŠ¨é…ç½®ç±»ï¼Œå°±å…å»äº†æ‰‹åŠ¨é…ç½®</li></ol><h2 id="ä½¿ç”¨-Spring-Initialize-å¿«é€Ÿåˆ›å»º-Spring-Boot-é¡¹ç›®"><a href="#ä½¿ç”¨-Spring-Initialize-å¿«é€Ÿåˆ›å»º-Spring-Boot-é¡¹ç›®" class="headerlink" title="ä½¿ç”¨ Spring Initialize å¿«é€Ÿåˆ›å»º Spring Boot é¡¹ç›®"></a>ä½¿ç”¨ Spring Initialize å¿«é€Ÿåˆ›å»º Spring Boot é¡¹ç›®</h2><p>é»˜è®¤ç”Ÿæˆçš„ Spring Boot é¡¹ç›®</p><ul><li>ä¸»ç¨‹åºå·²ç»ç”Ÿæˆå¥½äº†ï¼Œåªéœ€è¦ç¼–å†™è‡ªå·±çš„é€»è¾‘</li><li>resources æ–‡ä»¶å¤¹ä¸­ç›®å½•ç»“æ„<ul><li>staticï¼šä¿å­˜æ‰€æœ‰çš„é™æ€èµ„æºï¼›js css images</li><li>templatesï¼šä¿å­˜æ‰€æœ‰çš„æ¨¡ç‰ˆé¡µé¢ï¼›ï¼ˆSpring Boot é»˜è®¤ jar åŒ…ä½¿ç”¨åµŒå…¥å¼çš„ Tomcatï¼Œé»˜è®¤ä¸æ”¯æŒ JSP é¡µé¢ï¼‰ï¼›å¯ä»¥ä½¿ç”¨æ¨¡ç‰ˆå¼•æ“</li><li>application.propertiesï¼šSpringBoot åº”ç”¨çš„é…ç½®æ–‡ä»¶ï¼šå¯ä»¥ä¿®æ”¹ç«¯å£ç­‰</li></ul></li></ul><p>#é…ç½®æ–‡ä»¶</p><ul><li>application.properties<ul><li>è¯­æ³•ç»“æ„ï¼škey=value</li></ul></li><li>application.ymlï¼ˆæ¨èï¼‰<ul><li>è¯­æ³•ç»“æ„ï¼škey:ç©ºæ ¼value</li><li>Yaml å¯ä»¥ç›´æ¥ç»™å®ä½“ç±»èµ‹å€¼<ul><li>@ConfigurationProperties(prefix = â€œxxxâ€)</li></ul></li></ul></li></ul><h2 id="JSR-303-æ ¡éªŒ"><a href="#JSR-303-æ ¡éªŒ" class="headerlink" title="JSR-303 æ ¡éªŒ"></a>JSR-303 æ ¡éªŒ</h2><ul><li>@validated æ•°æ®æ ¡éªŒ</li></ul><h2 id="é…ç½®æ–‡ä»¶ä½ç½®åŠä¼˜å…ˆçº§"><a href="#é…ç½®æ–‡ä»¶ä½ç½®åŠä¼˜å…ˆçº§" class="headerlink" title="é…ç½®æ–‡ä»¶ä½ç½®åŠä¼˜å…ˆçº§"></a>é…ç½®æ–‡ä»¶ä½ç½®åŠä¼˜å…ˆçº§</h2><ol><li>file: ./config/</li><li>file: ./</li><li>classpath: /config/</li><li>classpath:/</li></ol><h2 id="è‡ªåŠ¨è£…é…åŸç†"><a href="#è‡ªåŠ¨è£…é…åŸç†" class="headerlink" title="è‡ªåŠ¨è£…é…åŸç†"></a>è‡ªåŠ¨è£…é…åŸç†</h2><ol><li>SpringBoot å¯åŠ¨ä¼šåŠ è½½å¤§é‡çš„è‡ªåŠ¨é…ç½®ç±»</li><li>çœ‹æˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½æœ‰æ²¡æœ‰åœ¨SpringBooté»˜è®¤å†™å¥½çš„è‡ªåŠ¨é…ç½®ç±»å½“ä¸­</li><li>åœ¨çœ‹è¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»ä¸­åˆ°åº•é…ç½®äº†å“ªäº›ç»„ä»¶ï¼ˆéœ€è¦çš„ç»„ä»¶æœ‰çš„è¯å°±ä¸ç”¨æ‰‹åŠ¨é…ç½®äº†ï¼‰</li><li>ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶çš„æ—¶å€™ï¼Œä¼šä» properties ç±»ä¸­å›å»æŸäº›å±æ€§ï¼Œåªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè¿™äº›å±æ€§çš„å€¼å³å¯</li></ol><ul><li><p>xxxAutoConfiguration è‡ªåŠ¨é…ç½®ç±»ï¼šç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶</p></li><li><p>xxxPropertiesï¼šå°è£…é…ç½®æ–‡ä»¶ä¸­ç›¸å…³å±æ€§</p></li></ul><h1 id="SpringBoot-Web-å¼€å‘"><a href="#SpringBoot-Web-å¼€å‘" class="headerlink" title="SpringBoot Web å¼€å‘"></a>SpringBoot Web å¼€å‘</h1><h2 id="é™æ€èµ„æº"><a href="#é™æ€èµ„æº" class="headerlink" title="é™æ€èµ„æº"></a>é™æ€èµ„æº</h2><ul><li>åœ¨ springboot ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å¤„ç†é™æ€èµ„æº<ul><li>webjars</li><li>publicã€staticã€/**ã€resources</li></ul></li><li>ä¼˜å…ˆçº§ï¼šresources &gt; static &gt; public</li></ul><h2 id="æ¨¡ç‰ˆå¼•æ“"><a href="#æ¨¡ç‰ˆå¼•æ“" class="headerlink" title="æ¨¡ç‰ˆå¼•æ“"></a>æ¨¡ç‰ˆå¼•æ“</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-spring5<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf.extras<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-extras-java8time<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>å‰åç«¯åˆ†ç¦»è¿˜æœ‰ç”¨å—è¿™ä¸ªï¼Ÿ</li></ul><h2 id="SpringMVC-é…ç½®åŸç†"><a href="#SpringMVC-é…ç½®åŸç†" class="headerlink" title="SpringMVC é…ç½®åŸç†"></a>SpringMVC é…ç½®åŸç†</h2><ul><li>åœ¨ Srpingboot ä¸­ï¼Œæœ‰éå¸¸å¤šçš„ xxxConfiguration å¸®åŠ©æˆ‘ä»¬è¿›è¡Œæ‰©å±•é…ç½®</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾è§£HTTP</title>
      <link href="/2020/04/01/%E5%9B%BE%E8%A7%A3HTTP/"/>
      <url>/2020/04/01/%E5%9B%BE%E8%A7%A3HTTP/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€ç« -äº†è§£-Web-åŠç½‘ç»œåŸºç¡€"><a href="#ç¬¬ä¸€ç« -äº†è§£-Web-åŠç½‘ç»œåŸºç¡€" class="headerlink" title="ç¬¬ä¸€ç«  äº†è§£ Web åŠç½‘ç»œåŸºç¡€"></a>ç¬¬ä¸€ç«  äº†è§£ Web åŠç½‘ç»œåŸºç¡€</h1><h2 id="ä½¿ç”¨-HTTP-åè®®è®¿é—®-Web"><a href="#ä½¿ç”¨-HTTP-åè®®è®¿é—®-Web" class="headerlink" title="ä½¿ç”¨ HTTP åè®®è®¿é—® Web"></a>ä½¿ç”¨ HTTP åè®®è®¿é—® Web</h2><p>Web æ˜¯å»ºç«‹åœ¨ HTTP åè®®ä¸Šé€šä¿¡çš„</p><h2 id="HTTP-çš„è¯ç”Ÿ"><a href="#HTTP-çš„è¯ç”Ÿ" class="headerlink" title="HTTP çš„è¯ç”Ÿ"></a>HTTP çš„è¯ç”Ÿ</h2><p>æœ€åˆè®¾æƒ³çš„åŸºæœ¬ç†å¿µæ˜¯ï¼šå€ŸåŠ©å¤šæ–‡æ¡£ä¹‹é—´ç›¸äº’å…³è”å½¢æˆçš„è¶…æ–‡æœ¬ï¼ˆHyperTextï¼‰ï¼Œè¿æˆå¯ç›¸äº’å‚é˜…çš„ WWWï¼ˆWorld Wide Webï¼Œä¸‡ç»´ç½‘ï¼‰</p><ul><li>HTMLï¼šæŠŠ SGML ä½œä¸ºé¡µé¢çš„æ–‡æœ¬æ ‡è®°è¯­è¨€</li><li>HTTPï¼šæ–‡æ¡£ä¼ é€’åè®®</li><li>URLï¼šæŒ‡å®šæ–‡æ¡£æ‰€åœ¨ä½ç½®</li></ul><p>WWW è¿™ä¸€åç§°ï¼Œæ˜¯ Web æµè§ˆå™¨å½“å¹´ç”¨æ¥æµè§ˆè¶…æ–‡æœ¬çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºæ—¶çš„åç§°ã€‚</p><p>ç°åœ¨åˆ™ç”¨æ¥è¡¨ç¤ºè¿™ä¸€ç³»åˆ—çš„é›†åˆï¼Œä¹Ÿå¯ç®€ç§°ä¸º Webã€‚</p><h2 id="ç½‘ç»œåŸºç¡€-TCP-IP"><a href="#ç½‘ç»œåŸºç¡€-TCP-IP" class="headerlink" title="ç½‘ç»œåŸºç¡€ TCP/IP"></a>ç½‘ç»œåŸºç¡€ TCP/IP</h2><p>HTTP æ˜¯ TCP/IP åè®®æ—çš„ä¸€ä¸ªå­é›†</p><table><thead><tr><th>åº”ç”¨å±‚</th><th>FTPã€DNSã€HTTP</th><th>HTTP æ•°æ®</th></tr></thead><tbody><tr><td>ä¼ è¾“å±‚</td><td>TCPã€UDP</td><td>TCPé¦–éƒ¨ï¼ˆHTTPæ•°æ®ï¼‰</td></tr><tr><td>ç½‘ç»œå±‚</td><td>IP æ•°æ®åŒ…</td><td>IPé¦–éƒ¨ï¼ˆTCPé¦–éƒ¨ï¼ˆHTTPæ•°æ®ï¼‰ï¼‰</td></tr><tr><td>é“¾è·¯å±‚</td><td>ç¡¬ä»¶</td><td>ä»¥å¤ªç½‘é¦–éƒ¨ï¼ˆIPé¦–éƒ¨ï¼ˆTCPé¦–éƒ¨ï¼ˆHTTPæ•°æ®ï¼‰ï¼‰ï¼‰</td></tr></tbody></table><h3 id="IP-åè®®ï¼ˆè´Ÿè´£ä¼ è¾“ï¼‰"><a href="#IP-åè®®ï¼ˆè´Ÿè´£ä¼ è¾“ï¼‰" class="headerlink" title="IP åè®®ï¼ˆè´Ÿè´£ä¼ è¾“ï¼‰"></a>IP åè®®ï¼ˆè´Ÿè´£ä¼ è¾“ï¼‰</h3><ul><li>ä½œç”¨ï¼šæŠŠå„ç§æ•°æ®åŒ…ä¼ é€ç»™å¯¹æ–¹</li><li>IP åœ°å€ â€”ARPåœ°å€è§£æåè®®â€”&gt; MAC åœ°å€</li><li>è·¯ç”±é€‰æ‹©</li></ul><h3 id="TCP-åè®®ï¼ˆç¡®ä¿å¯é æ€§ï¼‰"><a href="#TCP-åè®®ï¼ˆç¡®ä¿å¯é æ€§ï¼‰" class="headerlink" title="TCP åè®®ï¼ˆç¡®ä¿å¯é æ€§ï¼‰"></a>TCP åè®®ï¼ˆç¡®ä¿å¯é æ€§ï¼‰</h3><ul><li><p>ä½œç”¨ï¼šæä¾›å¯é çš„å­—èŠ‚æµæœåŠ¡</p><ul><li>å­—èŠ‚æµæœåŠ¡ï¼šä¸ºäº†æ–¹ä¾¿ä¼ è¾“ï¼Œå°†å¤§å—æ•°æ®åˆ†å‰²æˆæŠ¥æ–‡æ®µï¼ˆsegmentï¼‰ä¸ºå•ä½çš„æ•°æ®åŒ…è¿›è¡Œç®¡ç†</li><li>å¯é çš„ä¼ è¾“æœåŠ¡ï¼šèƒ½å¤Ÿç¡®è®¤æ•°æ®æœ€ç»ˆæ˜¯å¦é€è¾¾åˆ°å¯¹æ–¹</li></ul></li><li><p>ä¸‰æ¬¡æ¡æ‰‹ç­–ç•¥</p><ul><li>å‘é€ç«¯é¦–å…ˆå‘é€ä¸€ä¸ªå¸¦æœ‰ SYN æ ‡å¿—çš„æ•°æ®åŒ…ç»™å¯¹æ–¹</li><li>æ¥æ”¶ç«¯æ”¶åˆ°åï¼Œå›ä¼ ä¸€ä¸ªå¸¦æœ‰ SYN/ACK æ ‡å¿—çš„æ•°æ®åŒ…ä»¥ç¤ºä¼ è¾¾ç¡®è®¤ä¿¡æ¯</li><li>å‘é€ç«¯å†å›ä¼ ä¸€ä¸ªå¸¦ ACK æ ‡å¿—çš„æ•°æ®åŒ…</li></ul></li></ul><h3 id="DNS-æœåŠ¡ï¼ˆè´Ÿè´£åŸŸåè§£æï¼‰"><a href="#DNS-æœåŠ¡ï¼ˆè´Ÿè´£åŸŸåè§£æï¼‰" class="headerlink" title="DNS æœåŠ¡ï¼ˆè´Ÿè´£åŸŸåè§£æï¼‰"></a>DNS æœåŠ¡ï¼ˆè´Ÿè´£åŸŸåè§£æï¼‰</h3><ul><li>ä½œç”¨ï¼šåŸŸå &lt;===&gt; IP åœ°å€</li></ul><h2 id="å„ç§åè®®ä¸-HTTP-åè®®çš„å…³ç³»"><a href="#å„ç§åè®®ä¸-HTTP-åè®®çš„å…³ç³»" class="headerlink" title="å„ç§åè®®ä¸ HTTP åè®®çš„å…³ç³»"></a>å„ç§åè®®ä¸ HTTP åè®®çš„å…³ç³»</h2><ol><li>DNS è§£æåŸŸåï¼Œå¾—åˆ°å¯¹åº” IP åœ°å€</li><li>HTTP åè®®ç”Ÿæˆ HTTP è¯·æ±‚æŠ¥æ–‡</li><li>TCP å°†è¯·æ±‚æŠ¥æ–‡åˆ†å‰²æˆæŠ¥æ–‡æ®µ</li><li>IP åè®®è·¯ç”±å¯»å€ï¼Œä¸€è¾¹ä¸­è½¬ä¸€è¾¹ä¼ é€</li><li>TCP æ”¶åˆ°æŠ¥æ–‡æ®µï¼Œé‡ç»„æŠ¥æ–‡æ®µ</li><li>HTTP é˜Ÿæ”¶åˆ°çš„è¯·æ±‚è¿›è¡Œå¤„ç†</li></ol><h2 id="URI-å’Œ-URL"><a href="#URI-å’Œ-URL" class="headerlink" title="URI å’Œ URL"></a>URI å’Œ URL</h2><ul><li><p>URIï¼ˆUniform Resource Locatorï¼‰ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦</p></li><li><p>URI ç”¨å­—ç¬¦ä¸²æ ‡è¯†æŸä¸€äº’è”ç½‘èµ„æºï¼Œè€Œ URL è¡¨ç¤ºèµ„æºçš„åœ°ç‚¹ï¼ˆäº’è”ç½‘ä¸Šæ‰€å¤„çš„ä½ç½®ï¼‰ã€‚å¯è§ URL æ˜¯ URI çš„å­é›†ã€‚</p></li></ul><h1 id="ç¬¬äºŒç« -ç®€å•çš„-HTTP-åè®®"><a href="#ç¬¬äºŒç« -ç®€å•çš„-HTTP-åè®®" class="headerlink" title="ç¬¬äºŒç«  ç®€å•çš„ HTTP åè®®"></a>ç¬¬äºŒç«  ç®€å•çš„ HTTP åè®®</h1><ul><li><p>HTTP åè®®ç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¹‹é—´çš„é€šä¿¡</p></li><li><p>é€šè¿‡è¯·æ±‚å’Œç›¸åº”çš„äº¤æ¢è¾¾æˆé€šä¿¡ï¼Œå¿…é¡»å…ˆæœ‰è¯·æ±‚æ‰æœ‰å“åº”</p></li><li><p>è¯·æ±‚æŠ¥æ–‡</p><ul><li>è¯·æ±‚æ–¹æ³•</li><li>è¯·æ±‚ URI</li><li>åè®®ç‰ˆæœ¬</li><li>å¯é€‰çš„è¯·æ±‚é¦–éƒ¨å­—æ®µ</li><li>å†…å®¹å®ä½“</li></ul></li><li><p>å“åº”æŠ¥æ–‡</p><ul><li>åè®®ç‰ˆæœ¬</li><li>çŠ¶æ€ç ï¼ˆç”¨ä»¥è§£é‡ŠçŠ¶æ€ç çš„åŸå› çŸ­è¯­ï¼‰</li><li>å¯é€‰çš„å“åº”é¦–éƒ¨å­—æ®µ</li><li>å®ä½“ä¸»ä½“</li></ul></li></ul><h2 id="HTTP-æ˜¯ä¸ä¿å­˜çŠ¶æ€çš„åè®®"><a href="#HTTP-æ˜¯ä¸ä¿å­˜çŠ¶æ€çš„åè®®" class="headerlink" title="HTTP æ˜¯ä¸ä¿å­˜çŠ¶æ€çš„åè®®"></a>HTTP æ˜¯ä¸ä¿å­˜çŠ¶æ€çš„åè®®</h2><ul><li>HTTP æ˜¯æ— çŠ¶æ€åè®®ï¼Œä¸ä¿ç•™ä¹‹å‰ä¸€åˆ‡çš„è¯·æ±‚æˆ–å“åº”æŠ¥æ–‡çš„ä¿¡æ¯<ul><li>ä¸ºäº†å®ç°æœŸæœ›çš„ä¿æŒçŠ¶æ€åŠŸèƒ½ï¼Œå¼•å…¥ Cookie æŠ€æœ¯</li></ul></li></ul><h2 id="è¯·æ±‚-URI-å®šä½èµ„æº"><a href="#è¯·æ±‚-URI-å®šä½èµ„æº" class="headerlink" title="è¯·æ±‚ URI å®šä½èµ„æº"></a>è¯·æ±‚ URI å®šä½èµ„æº</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GET http:hackr.jp&#x2F;index.html HTTP&#x2F;1.1</span><br><span class="line"></span><br><span class="line">GET &#x2F;index.html HTTP&#x2F;1.1</span><br><span class="line">Host: hackr.jp</span><br></pre></td></tr></table></figure><ul><li>ä¸æ˜¯è¯·æ±‚å…·ä½“èµ„æºï¼Œè€Œæ˜¯é’ˆå¯¹æœåŠ¡å™¨ç«¯æœ¬èº«çš„è¯·æ±‚ * ä»£æ›¿ URI</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">OPTIONS * HTTP&#x2F;1.1</span><br></pre></td></tr></table></figure><h2 id="HTTP-æ–¹æ³•"><a href="#HTTP-æ–¹æ³•" class="headerlink" title="HTTP æ–¹æ³•"></a>HTTP æ–¹æ³•</h2><ul><li>GETï¼šè·å–èµ„æº<ul><li>è¯·æ±‚è®¿é—®å·²è¢« URI è¯†åˆ«çš„èµ„æºï¼Œèµ„æº<strong>ç»è¿‡æœåŠ¡å™¨è§£æ</strong>åè¿”å›</li></ul></li><li>POSTï¼šä¼ è¾“å®ä½“ä¸»ä½“</li><li>PUTï¼šä¼ è¾“æ–‡ä»¶<ul><li>è¯·æ±‚æŠ¥æ–‡ä¸»ä½“ä¸­åŒ…å«æ–‡ä»¶å†…å®¹ï¼Œä¿å­˜åˆ°è¯·æ±‚ URI æŒ‡å®šçš„ä½ç½®</li><li>PUT æ–¹æ³•è‡ªèº«ä¸å¸¦éªŒè¯æœºåˆ¶ï¼Œä»»ä½•äººéƒ½å¯ä»¥ä¸Šä¼ ï¼Œä¸ºäº†å®‰å…¨ä¸€èˆ¬éƒ½ä¸ç”¨</li></ul></li><li>HEADï¼šè·å¾—æŠ¥æ–‡é¦–éƒ¨<ul><li>ç±»ä¼¼ GETï¼Œä¸è¿”å›æŠ¥æ–‡ä¸»ä½“ï¼Œç”¨äºç¡®è®¤ URI çš„æœ‰æ•ˆæ€§åŠèµ„æºæ›´æ–°çš„æ—¥æœŸ</li></ul></li><li>DELETEï¼šåˆ é™¤æ–‡ä»¶<ul><li>æŒ‰è¯·æ±‚ URI åˆ é™¤æŒ‡å®šçš„èµ„æº</li><li>ä¸å¸¦éªŒè¯æœºåˆ¶</li></ul></li><li>OPTIONSï¼ˆ1.1ï¼‰ï¼šè¯¢é—®æ”¯æŒçš„æ–¹æ³•<ul><li>æŸ¥è¯¢é’ˆå¯¹è¯·æ±‚ URI æŒ‡å®šçš„èµ„æºæ”¯æŒçš„æ–¹æ³•</li></ul></li><li>TRACEï¼ˆ1.1ï¼‰ï¼šè¿½è¸ªè·¯å¾„<ul><li>è®© Web æœåŠ¡å‰ç«¯å°†ä¹‹å‰çš„è¯·æ±‚é€šä¿¡ç¯å›ç»™å®¢æˆ·ç«¯</li><li>ç¡®è®¤è¯·æ±‚è¿æ¥è¿‡ç¨‹ä¸­å‘ç”Ÿçš„ä¸€ç³»åˆ—æ“ä½œ</li><li>å®¹æ˜“å¼•å‘ XSTï¼ˆCross-Site Tracingï¼Œè·¨ç«™è¿½è¸ªï¼‰æ”»å‡»ï¼Œä¸å¸¸ç”¨</li></ul></li><li>CONNECTï¼ˆ1.1ï¼‰ï¼šè¦æ±‚ç”¨éš§é“åè®®è¿æ¥ä»£ç†<ul><li>SSLï¼ˆSecure Sockets Layerï¼Œå®‰å…¨å¥—é˜¶å±‚ï¼‰</li><li>TLSï¼ˆTransport Layer Securityï¼Œä¼ è¾“å±‚å®‰å…¨ï¼‰</li><li>TCP é€šä¿¡ï¼Œä½¿ç”¨ä»¥ä¸Šä¸¤ä¸ªåè®®åŠ å¯†</li></ul></li></ul><h2 id="æŒä¹…è¿æ¥èŠ‚çœé€šä¿¡é‡"><a href="#æŒä¹…è¿æ¥èŠ‚çœé€šä¿¡é‡" class="headerlink" title="æŒä¹…è¿æ¥èŠ‚çœé€šä¿¡é‡"></a>æŒä¹…è¿æ¥èŠ‚çœé€šä¿¡é‡</h2><p>HTTP/1.0 æ¯è¿›è¡Œä¸€æ¬¡ HTTP é€šä¿¡å°±è¦æ–­å¼€ä¸€æ¬¡ TCP è¿æ¥ï¼›ä¸€ä¸ªç½‘é¡µåŒ…å«å¾ˆå¤šèµ„æºï¼ŒTCP è¿æ¥å»ºç«‹å’Œæ–­å¼€ä¼šå¢åŠ é€šä¿¡é‡çš„å¼€é”€</p><h3 id="keep-alive"><a href="#keep-alive" class="headerlink" title="keep-alive"></a>keep-alive</h3><p>HTTP/1.1 ä¸­ï¼Œåªè¦ä»»æ„ä¸€ç«¯æ²¡æœ‰æ˜ç¡®æå‡ºæ–­å¼€è¿æ¥ï¼Œå°±ä¿æŒ TCP è¿æ¥çŠ¶æ€</p><h3 id="ç®¡çº¿åŒ–"><a href="#ç®¡çº¿åŒ–" class="headerlink" title="ç®¡çº¿åŒ–"></a>ç®¡çº¿åŒ–</h3><p>ä»å‰å‘é€è¯·æ±‚åéœ€ç­‰å¾…å¹¶æ”¶åˆ°å“åº”æ‰èƒ½å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚</p><p>ç®¡çº¿åŒ–æŠ€æœ¯å‡ºç°åï¼Œä¸ç”¨ç­‰å¾…å“åº”å°±å¯ä»¥ç›´æ¥å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ï¼Œå³èƒ½åšåˆ°åŒæ—¶å¹¶è¡Œå‘é€å¤šä¸ªè¯·æ±‚</p><h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><p>é€šè¿‡åœ¨è¯·æ±‚å’Œå“åº”æŠ¥æ–‡ä¸­å†™å…¥ Cookie ä¿¡æ¯æ¥æ§åˆ¶å®¢æˆ·ç«¯çš„çŠ¶æ€</p><p>Cookie ä¼šæ ¹æ®ä»æœåŠ¡å™¨ç«¯å‘é€ç«¯å“åº”æŠ¥æ–‡å†…çš„ä¸€ä¸ªå«åš Set-Cookie çš„é¦–éƒ¨å­—æ®µä¿¡æ¯ï¼Œé€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜ Cookieã€‚å½“ä¸‹æ¬¡å®¢æˆ·ç«¯å†å¾€è¯¥æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨åœ¨è¯·æ±‚æŠ¥æ–‡ä¸­åŠ å…¥ Cookie å€¼åå‘é€å‡ºå»</p><h1 id="ç¬¬ä¸‰ç« -HTTP-æŠ¥æ–‡å†…çš„-HTTP-ä¿¡æ¯"><a href="#ç¬¬ä¸‰ç« -HTTP-æŠ¥æ–‡å†…çš„-HTTP-ä¿¡æ¯" class="headerlink" title="ç¬¬ä¸‰ç«  HTTP æŠ¥æ–‡å†…çš„ HTTP ä¿¡æ¯"></a>ç¬¬ä¸‰ç«  HTTP æŠ¥æ–‡å†…çš„ HTTP ä¿¡æ¯</h1><p>HTTP æŠ¥æ–‡æœ¬èº«æ˜¯ç”±å¤šè¡Œæ•°æ®æ„æˆçš„å­—ç¬¦ä¸²æ–‡æœ¬</p><table><thead><tr><th>è¯·æ±‚æŠ¥æ–‡</th><th>å“åº”æŠ¥æ–‡</th><th></th></tr></thead><tbody><tr><td>è¯·æ±‚è¡Œ</td><td>çŠ¶æ€è¡Œ</td><td>æŠ¥</td></tr><tr><td>è¯·æ±‚é¦–éƒ¨å­—æ®µ</td><td>å“åº”é¦–éƒ¨å­—æ®µ</td><td>æ–‡</td></tr><tr><td>é€šç”¨é¦–éƒ¨å­—æ®µ</td><td>é€šç”¨é¦–éƒ¨å­—æ®µ</td><td></td></tr><tr><td>å®ä½“é¦–éƒ¨å­—æ®µ</td><td>å®ä½“é¦–éƒ¨å­—æ®µ</td><td>é¦–</td></tr><tr><td>å…¶ä»–</td><td>å…¶ä»–</td><td>éƒ¨</td></tr><tr><td>ï¼ˆç©ºè¡Œï¼‰</td><td>ï¼ˆç©ºè¡Œï¼‰</td><td></td></tr><tr><td>æŠ¥æ–‡ä¸»ä½“</td><td>æŠ¥æ–‡ä¸»ä½“</td><td></td></tr></tbody></table><h3 id="æŠ¥æ–‡ä¸»ä½“å’Œå®ä½“ä¸»ä½“çš„å·®å¼‚"><a href="#æŠ¥æ–‡ä¸»ä½“å’Œå®ä½“ä¸»ä½“çš„å·®å¼‚" class="headerlink" title="æŠ¥æ–‡ä¸»ä½“å’Œå®ä½“ä¸»ä½“çš„å·®å¼‚"></a>æŠ¥æ–‡ä¸»ä½“å’Œå®ä½“ä¸»ä½“çš„å·®å¼‚</h3><ul><li>æŠ¥æ–‡ï¼ˆmessageï¼‰ï¼šæ˜¯ HTTP é€šä¿¡ä¸­çš„åŸºæœ¬å•ä½ï¼Œç”± 8 ä½ç»„å­—èŠ‚æµç»„æˆï¼Œé€šè¿‡ HTTP é€šä¿¡ä¼ è¾“</li><li>å®ä½“ï¼ˆenentityï¼‰ï¼šä½œä¸ºè¯·æ±‚æˆ–å“åº”çš„æœ‰æ•ˆè½½è·æ•°æ®ï¼ˆè¡¥å……é¡¹ï¼‰è¢«ä¼ è¾“ï¼Œå†…å®¹ç”±å®ä½“é¦–éƒ¨å’Œå®ä½“ä¸»ä½“ç»„æˆ</li></ul><p>å®ä½“é¦–éƒ¨æ˜¯æŠ¥æ–‡é¦–éƒ¨çš„ä¸€éƒ¨åˆ†ï¼ˆçœ‹ä¸Šé¢çš„è¡¨æ ¼ï¼‰</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå®ä½“ä¸»ä½“ç­‰äºæŠ¥æ–‡ä¸»ä½“ã€‚ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†æå‡ä¼ è¾“é€Ÿç‡ï¼Œä¼šå¯¹æŠ¥æ–‡ä¸»ä½“è¿›è¡Œç¼–ç ï¼Œè¿™æ ·æŠ¥æ–‡ä¸»ä½“å°±å’Œå®ä½“ä¸»ä½“ä¸åŒäº†ã€‚</p><h3 id="å†…å®¹ç¼–ç ï¼ˆå‹ç¼©ä¼ è¾“ï¼‰"><a href="#å†…å®¹ç¼–ç ï¼ˆå‹ç¼©ä¼ è¾“ï¼‰" class="headerlink" title="å†…å®¹ç¼–ç ï¼ˆå‹ç¼©ä¼ è¾“ï¼‰"></a>å†…å®¹ç¼–ç ï¼ˆå‹ç¼©ä¼ è¾“ï¼‰</h3><ul><li><strong>å†…å®¹ç¼–ç </strong>æŒ‡æ˜åº”ç”¨åœ¨å®ä½“å†…å®¹ä¸Šçš„ç¼–ç æ ¼å¼ã€‚å®¢æˆ·ç«¯æ¥æ”¶å¹¶è´Ÿè´£è§£ç ã€‚</li><li>å¸¸ç”¨çš„å†…å®¹ç¼–ç <ul><li>gzipï¼ˆGNU zipï¼‰</li><li>compressï¼ˆUNIX ç³»ç»Ÿçš„æ ‡å‡†å‹ç¼©ï¼‰</li><li>deflateï¼ˆzlibï¼‰</li><li>identityï¼ˆä¸è¿›è¡Œç¼–ç ï¼‰</li></ul></li></ul><h3 id="åˆ†å—ä¼ è¾“ç¼–ç "><a href="#åˆ†å—ä¼ è¾“ç¼–ç " class="headerlink" title="åˆ†å—ä¼ è¾“ç¼–ç "></a>åˆ†å—ä¼ è¾“ç¼–ç </h3><p>åœ¨ HTTP é€šä¿¡è¿‡ç¨‹ä¸­ï¼Œè¯·æ±‚çš„ç¼–ç å®ä½“èµ„æºå°šæœªå…¨éƒ¨ä¼ è¾“å®Œæˆä¹‹å‰ï¼Œæµè§ˆå™¨æ— æ³•æ˜¾ç¤ºè¯·æ±‚é¡µé¢ã€‚</p><p>é€šè¿‡æŠŠæ•°æ®åˆ†å‰²æˆå¤šå—ï¼Œèƒ½å¤Ÿè®©æµè§ˆå™¨é€æ­¥æ˜¾ç¤ºé¡µé¢ã€‚</p><p>è¿™ç§æŠŠå®ä½“ä¸»ä½“åˆ†å—çš„åŠŸèƒ½ç§°ä¸º<strong>åˆ†å—ä¼ è¾“ç¼–ç </strong>ã€‚</p><h2 id="å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆï¼ˆå‘é€å¤šç§æ•°æ®ï¼‰"><a href="#å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆï¼ˆå‘é€å¤šç§æ•°æ®ï¼‰" class="headerlink" title="å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆï¼ˆå‘é€å¤šç§æ•°æ®ï¼‰"></a>å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆï¼ˆå‘é€å¤šç§æ•°æ®ï¼‰</h2><ul><li>multipart/form-dataï¼šWebè¡¨å•æ–‡ä»¶ä¸Šä¼ </li><li>multipart/byterangesï¼šçŠ¶æ€ç  206ï¼Œå“åº”æŠ¥æ–‡åŒ…å«å¤šä¸ªèŒƒå›´çš„å†…å®¹</li></ul><p>ä½¿ç”¨å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆæ—¶ï¼Œéœ€è¦åœ¨é¦–éƒ¨å­—æ®µåŠ ä¸Š Content-type</p><p>ä½¿ç”¨ boundary å­—ç¬¦ä¸²æ¥åˆ’åˆ†å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆæŒ‡æ˜çš„å„ç±»å®ä½“</p><h2 id="èŒƒå›´è¯·æ±‚ï¼ˆæ–­ç‚¹é‡ä¼ ï¼‰"><a href="#èŒƒå›´è¯·æ±‚ï¼ˆæ–­ç‚¹é‡ä¼ ï¼‰" class="headerlink" title="èŒƒå›´è¯·æ±‚ï¼ˆæ–­ç‚¹é‡ä¼ ï¼‰"></a>èŒƒå›´è¯·æ±‚ï¼ˆæ–­ç‚¹é‡ä¼ ï¼‰</h2><ul><li>ä»ä¹‹å‰ä¸‹è½½çš„ä¸­æ–­å¤„æ¢å¤ä¸‹è½½ï¼Œä»…ä¸‹è½½æŒ‡å®šçš„å®ä½“èŒƒå›´ï¼Œç§°ä¸º<strong>èŒƒå›´è¯·æ±‚</strong></li><li>é¦–éƒ¨å­—æ®µ Range æ¥æŒ‡å®šèµ„æºçš„ byte èŒƒå›´</li><li>é’ˆå¯¹èŒƒå›´è¯·æ±‚ï¼Œå“åº”ä¼šè¿”å›çŠ¶æ€ç ä¸º 206 çš„å“åº”æŠ¥æ–‡<ul><li>å¦‚æœæ˜¯å¤šé‡èŒƒå›´çš„èŒƒå›´è¯·æ±‚ï¼Œå“åº”ä¼šåœ¨é¦–éƒ¨å­—æ®µ Content-Type æ ‡æ˜ multipart/byteranges</li></ul></li><li>å¦‚æœæ— æ³•å“åº”èŒƒå›´è¯·æ±‚ï¼Œä¼šè¿”å› 200 å’Œå®Œæ•´çš„å®ä½“å†…å®¹</li></ul><h2 id="å†…å®¹åå•†"><a href="#å†…å®¹åå•†" class="headerlink" title="å†…å®¹åå•†"></a>å†…å®¹åå•†</h2><p><strong>å†…å®¹åå•†æœºåˆ¶</strong>æŒ‡å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å°±å“åº”çš„èµ„æºå†…å®¹è¿›è¡Œäº¤æ¶‰ï¼Œæä¾›æœ€åˆé€‚çš„èµ„æº</p><ul><li>åŸºå‡†ï¼šè¯­è¨€ã€å­—ç¬¦é›†ã€ç¼–ç æ–¹å¼ç­‰<ul><li>Accept</li><li>Accept-Charset</li><li>Accept-Encoding</li><li>Accept-Language</li><li>Content-Language</li></ul></li><li>å†…å®¹åå•†æŠ€æœ¯ç±»å‹<ul><li>æœåŠ¡å™¨é©±åŠ¨åå•†<ul><li>ä»¥è¯·æ±‚çš„é¦–éƒ¨å­—æ®µä¸ºå‚è€ƒï¼Œåœ¨æœåŠ¡å™¨ç«¯è‡ªåŠ¨å¤„ç†ï¼Œä¸ä¸€å®šç­›å‡ºæœ€ä¼˜å†…å®¹</li></ul></li><li>å®¢æˆ·ç«¯é©±åŠ¨åå•†<ul><li>ç”¨æˆ·ä»æµè§ˆå™¨æ˜¾ç¤ºçš„å¯é€‰é¡¹åˆ—è¡¨ä¸­æ‰‹åŠ¨é€‰æ‹©</li><li>åˆ©ç”¨ js è„šæœ¬åœ¨ Web é¡µé¢ä¸Šè¿›è¡Œé€‰æ‹©</li></ul></li><li>é€æ˜åå•†</li></ul></li></ul><h1 id="ç¬¬å››ç« -è¿”å›ç»“æœçš„-HTTP-çŠ¶æ€ç "><a href="#ç¬¬å››ç« -è¿”å›ç»“æœçš„-HTTP-çŠ¶æ€ç " class="headerlink" title="ç¬¬å››ç«  è¿”å›ç»“æœçš„ HTTP çŠ¶æ€ç "></a>ç¬¬å››ç«  è¿”å›ç»“æœçš„ HTTP çŠ¶æ€ç </h1><ul><li>çŠ¶æ€ç çš„æŒ‡è´£æ˜¯å½“å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘é€è¯·æ±‚æ—¶ï¼Œæè¿°è¿”å›çš„è¯·æ±‚ç»“æœ</li></ul><table><thead><tr><th></th><th>ç±»åˆ«</th><th>åŸå› çŸ­è¯­</th></tr></thead><tbody><tr><td>1xx</td><td>Informational</td><td>æ¥æ”¶çš„è¯·æ±‚æ­£åœ¨å¤„ç†</td></tr><tr><td>2xx</td><td>Success</td><td>è¯·æ±‚æ­£å¸¸å¤„ç†å®Œæ¯•</td></tr><tr><td>3xx</td><td>Redirection</td><td>éœ€è¦è¿›è¡Œé™„åŠ æ“ä½œä»¥å®Œæˆè¯·æ±‚</td></tr><tr><td>4xx</td><td>Client Error</td><td>æœåŠ¡å™¨æ— æ³•å¤„ç†è¯·æ±‚</td></tr><tr><td>5xx</td><td>Server Error</td><td>æœåŠ¡å™¨å¤„ç†è¯·æ±‚å‡ºé”™</td></tr></tbody></table><ul><li>2xx æˆåŠŸ<ul><li>200 OK</li><li>204 No Content</li><li>206 Partial Content</li></ul></li><li>3xx é‡å®šå‘<ul><li>301 Moved Permanently æ°¸ä¹…æ€§é‡å®šå‘ï¼Œå»ºè®®ç”¨æˆ·ä¿®æ”¹ä¹¦ç­¾</li><li>302 Found ä¸´æ—¶æ€§é‡å®šå‘ï¼Œå¸Œæœ›ç”¨æˆ·ï¼ˆæœ¬æ¬¡ï¼‰èƒ½ä½¿ç”¨æ–°çš„ URI è®¿é—®</li><li>303 See Other è¯·æ±‚å¯¹åº”çš„èµ„æºå­˜åœ¨å¦ä¸€ä¸ª URIï¼Œä¸”æ˜ç¡®ç”¨ GET è®¿é—®</li><li>304 Not Modified å®¢æˆ·ç«¯å‘é€é™„å¸¦æ¡ä»¶çš„è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ç«¯å…è®¸è¯·æ±‚è®¿é—®èµ„æº<ul><li>If-Match</li><li>If-Modified-Since</li><li>If-None-Match</li><li>If-Range</li><li>If-Unmodified-Since</li></ul></li><li>307 Temporary Redirect ä¸´æ—¶é‡å®šå‘</li></ul></li><li>4xx å®¢æˆ·ç«¯é”™è¯¯<ul><li>400 Bad Request æŠ¥æ–‡ä¸­å­˜åœ¨è¯­æ³•é”™è¯¯</li><li>401 Unauthorized å‘é€çš„è¯·æ±‚éœ€è¦æœ‰é€šè¿‡ HTTP è®¤è¯çš„è®¤è¯ä¿¡æ¯</li><li>403 Forbidden è¯¥çŠ¶æ€ç è¡¨æ˜å¯¹è¯·æ±‚èµ„æºçš„è®¿é—®å‘—æœåŠ¡å™¨æ‹’ç»äº†</li><li>404 Not Found æœåŠ¡å™¨ä¸Šæ— æ³•æ‰¾åˆ°è¯·æ±‚çš„èµ„æº</li></ul></li><li>5xx æœåŠ¡å™¨é”™è¯¯<ul><li>500 Internal Server Error æœåŠ¡å™¨ç«¯åœ¨æ‰§è¡Œè¯·æ±‚æ—¶å‘ç”Ÿäº†é”™è¯¯</li><li>503 Service Unavailable è¶…è´Ÿè½½æˆ–åœæœºç»´æŠ¤ï¼Œæ— æ³•å¤„ç†è¯·æ±‚</li></ul></li></ul><h1 id="ç¬¬äº”ç« -ä¸-HTTP-åä½œçš„-Web-æœåŠ¡å™¨"><a href="#ç¬¬äº”ç« -ä¸-HTTP-åä½œçš„-Web-æœåŠ¡å™¨" class="headerlink" title="ç¬¬äº”ç«  ä¸ HTTP åä½œçš„ Web æœåŠ¡å™¨"></a>ç¬¬äº”ç«  ä¸ HTTP åä½œçš„ Web æœåŠ¡å™¨</h1><ul><li>é€šä¿¡æ•°æ®è½¬å‘ç¨‹åº<ul><li>ä»£ç†<ul><li>è½¬å‘åŠŸèƒ½çš„åº”ç”¨ç¨‹åºï¼Œä¸æ”¹å˜ URI</li><li>å¥½å¤„<ul><li>åˆ©ç”¨ç¼“å­˜æŠ€æœ¯å‡å°‘ç½‘ç»œå¸¦å®½çš„æµé‡</li><li>ç»„ç»‡å†…éƒ¨é’ˆå¯¹ç‰¹å®šç½‘ç«™çš„è®¿é—®æ§åˆ¶</li><li>è·å–è®¿é—®æ—¥å¿—</li></ul></li><li>åˆ†ç±»<ul><li>ç¼“å­˜ä»£ç†</li><li>é€æ˜ä»£ç†ï¼šä¸å¯¹æŠ¥æ–‡åšä»»ä½•åŠ å·¥</li></ul></li></ul></li><li>ç½‘å…³<ul><li>è½¬å‘å…¶ä»–æœåŠ¡å™¨é€šä¿¡æ•°æ®çš„æœåŠ¡å™¨</li><li>å¥½å¤„<ul><li>åˆ©ç”¨ç½‘å…³å¯ä»¥ç”± HTTP è¯·æ±‚è½¬åŒ–ä¸ºå…¶ä»–åè®®é€šä¿¡</li></ul></li></ul></li><li>éš§é“<ul><li>æŒ‰è¦æ±‚å»ºç«‹ä¸€æ¡ä¸å…¶ä»–æœåŠ¡å™¨çš„é€šä¿¡çº¿è·¯ï¼Œä½¿ç”¨ SSL ç­‰åŠ å¯†æ‰‹æ®µè¿›è¡Œé€šä¿¡</li><li>ç›®çš„<ul><li>ç¡®ä¿é€šä¿¡å®‰å…¨</li></ul></li><li>éš§é“æœ¬èº«ä¸å»è§£æ HTTP è¯·æ±‚</li></ul></li></ul></li></ul><h2 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h2><ul><li>ç¼“å­˜æ˜¯æŒ‡ä»£ç†æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯æœ¬åœ°ç£ç›˜å†…ä¿å­˜çš„èµ„æºå‰¯æœ¬<ul><li>åˆ©ç”¨ç¼“å­˜å¯å‡å°‘å¯¹æºæœåŠ¡å™¨çš„è®¿é—®ï¼ŒèŠ‚çœäº†é€šä¿¡æµé‡å’Œé€šä¿¡æ—¶é—´</li></ul></li><li>ç¼“å­˜è¿‡æœŸåï¼Œä¼šå‘æºæœåŠ¡å™¨ç¡®è®¤èµ„æºçš„æœ‰æ•ˆæ€§</li><li>è‹¥ç¼“å­˜å¤±æ•ˆï¼Œæµè§ˆå™¨ä¼šå†æ¬¡è¯·æ±‚æ–°èµ„æº</li></ul><h1 id="ç¬¬å…­ç« -HTTP-é¦–éƒ¨"><a href="#ç¬¬å…­ç« -HTTP-é¦–éƒ¨" class="headerlink" title="ç¬¬å…­ç«  HTTP é¦–éƒ¨"></a>ç¬¬å…­ç«  HTTP é¦–éƒ¨</h1><h2 id="æŠ¥æ–‡é¦–éƒ¨"><a href="#æŠ¥æ–‡é¦–éƒ¨" class="headerlink" title="æŠ¥æ–‡é¦–éƒ¨"></a>æŠ¥æ–‡é¦–éƒ¨</h2><h3 id="HTTP-è¯·æ±‚æŠ¥æ–‡"><a href="#HTTP-è¯·æ±‚æŠ¥æ–‡" class="headerlink" title="HTTP è¯·æ±‚æŠ¥æ–‡"></a>HTTP è¯·æ±‚æŠ¥æ–‡</h3><ul><li>æŠ¥æ–‡é¦–éƒ¨<ul><li>è¯·æ±‚è¡Œï¼šæ–¹æ³•ã€URIã€HTTP ç‰ˆæœ¬</li><li>HTTP é¦–éƒ¨å­—æ®µ<ul><li>è¯·æ±‚é¦–éƒ¨å­—æ®µ</li><li>é€šç”¨é¦–éƒ¨å­—æ®µ</li><li>å®ä½“é¦–éƒ¨å­—æ®µ</li><li>å…¶ä»–</li></ul></li></ul></li><li>ç©ºè¡Œ</li><li>æŠ¥æ–‡ä¸»ä½“</li></ul><h3 id="HTTP-å“åº”æŠ¥æ–‡"><a href="#HTTP-å“åº”æŠ¥æ–‡" class="headerlink" title="HTTP å“åº”æŠ¥æ–‡"></a>HTTP å“åº”æŠ¥æ–‡</h3><ul><li>æŠ¥æ–‡é¦–éƒ¨<ul><li>çŠ¶æ€è¡Œï¼šHTTP ç‰ˆæœ¬ã€çŠ¶æ€ç </li><li>HTTP é¦–éƒ¨å­—æ®µ<ul><li>å“åº”é¦–éƒ¨å­—æ®µ</li><li>é€šç”¨é¦–éƒ¨å­—æ®µ</li><li>å®ä½“é¦–éƒ¨å­—æ®µ</li><li>å…¶ä»–</li></ul></li></ul></li><li>ç©ºè¡Œ</li><li>æŠ¥æ–‡ä¸»ä½“</li></ul><h2 id="HTTP-é¦–éƒ¨å­—æ®µ"><a href="#HTTP-é¦–éƒ¨å­—æ®µ" class="headerlink" title="HTTP é¦–éƒ¨å­—æ®µ"></a>HTTP é¦–éƒ¨å­—æ®µ</h2><ul><li>é¦–éƒ¨å­—æ®µåï¼šå­—æ®µå€¼</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Content-Type: text&#x2F;html</span><br></pre></td></tr></table></figure><h3 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h3><ul><li>é€šç”¨é¦–éƒ¨å­—æ®µ</li><li>è¯·æ±‚é¦–éƒ¨å­—æ®µ</li><li>å“åº”é¦–éƒ¨å­—æ®µ</li><li>å®ä½“é¦–éƒ¨å­—æ®µ</li></ul><p>é HTTP/1.1 é¦–éƒ¨å­—æ®µ</p><ul><li>Cookie</li><li>Set-Cookie</li><li>Content-Disposition</li></ul><h4 id="é€šç”¨é¦–éƒ¨å­—æ®µ"><a href="#é€šç”¨é¦–éƒ¨å­—æ®µ" class="headerlink" title="é€šç”¨é¦–éƒ¨å­—æ®µ"></a>é€šç”¨é¦–éƒ¨å­—æ®µ</h4><ul><li>Cache-Controlï¼šæ§åˆ¶ç¼“å­˜è¡Œä¸º</li><li>Connectionï¼šæ§åˆ¶ä¸å†è½¬å‘ç»™ä»£ç†çš„é¦–éƒ¨å­—æ®µï¼›ç®¡ç†æŒä¹…è¿æ¥</li><li>Dateï¼šåˆ›å»º HTTP æŠ¥æ–‡çš„æ—¥æœŸå’Œæ—¶é—´</li><li>Pragmaï¼šå‘åå…¼å®¹ï¼›è¦æ±‚æ‰€æœ‰çš„ä¸­é—´æœåŠ¡å™¨ä¸è¿”å›ç¼“å­˜çš„èµ„æº</li><li>Trailerï¼šæŠ¥æ–‡ä¸»ä½“åè®°å½•äº†å“ªäº›é¦–éƒ¨å­—æ®µ</li><li>Transfer-Encodingï¼šä¼ è¾“æ—¶çš„ç¼–ç æ–¹å¼</li><li>Upgradeï¼šæ£€æµ‹ HTTP åè®®åŠå…¶ä»–åè®®æ˜¯å¦å¯ä½¿ç”¨æ›´é«˜çš„ç‰ˆæœ¬è¿›è¡Œé€šä¿¡</li><li>Viaï¼šè¿½è¸ªä¼ è¾“è·¯å¾„</li><li>Warningï¼šç¼“å­˜ç›¸å…³é—®é¢˜çš„è­¦å‘Š</li></ul><h4 id="è¯·æ±‚é¦–éƒ¨å­—æ®µ"><a href="#è¯·æ±‚é¦–éƒ¨å­—æ®µ" class="headerlink" title="è¯·æ±‚é¦–éƒ¨å­—æ®µ"></a>è¯·æ±‚é¦–éƒ¨å­—æ®µ</h4><ul><li>Acceptï¼šç”¨æˆ·ä»£ç†æ”¯æŒçš„åª’ä½“ç±»å‹åŠä¼˜å…ˆçº§</li><li>Accept-Charsetï¼šç”¨æˆ·ä»£ç†æ”¯æŒçš„å­—ç¬¦é›†åŠä¼˜å…ˆçº§</li><li>Accept-Encodingï¼šç”¨æˆ·ä»£ç†æ”¯æŒçš„å†…å®¹ç¼–ç åŠä¼˜å…ˆçº§<ul><li>gzip</li><li>compress</li><li>deflate</li><li>identity</li></ul></li><li>Accept-Languageï¼šç”¨æˆ·ä»£ç†æ”¯æŒçš„è‡ªç„¶è¯­è¨€é›†åŠä¼˜å…ˆçº§</li><li>Authorizationï¼š</li><li>Expectï¼šæœŸæœ›å‡ºç°çš„æŸç§ç‰¹å®šè¡Œä¸º</li><li>Fromï¼šç”µå­é‚®ä»¶åœ°å€</li><li>Hostï¼šè¯·æ±‚çš„èµ„æºæ‰€å¤„çš„äº’è”ç½‘ä¸»æœºåå’Œç«¯å£å·ï¼›å¦‚æœæœªè®¾ç½®ä¸»æœºåå‘é€ç©º</li><li>If-xxxï¼šæ¡ä»¶è¯·æ±‚ï¼Œåˆ¤æ–­ä¸ºçœŸæ‰æ‰§è¡Œ<ul><li>IF-Matchï¼šå­—æ®µå€¼è·Ÿ ETag å€¼åŒ¹é…ä¸€è‡´æ—¶æ‰æ¥å—è¯·æ±‚</li><li>If-Modified-Sinceï¼šå­—æ®µå€¼ï¼ˆæ—¥æœŸï¼‰ä¹‹åèµ„æºæ›´æ–°ï¼Œæ¥å—è¯·æ±‚</li><li>If-None-Matchï¼šå­—æ®µå€¼è·Ÿ ETag å€¼ä¸ä¸€è‡´æ—¶æ‰æ¥å—è¯·æ±‚</li><li>If-Rangeï¼šå­—æ®µå€¼ï¼ˆETagæˆ–æ—¶é—´ï¼‰å’Œè¯·æ±‚èµ„æºï¼ˆETag å€¼æˆ–æ—¶é—´ï¼‰ç›¸ä¸€è‡´æ—¶ï¼Œä½œä¸ºèŒƒå›´è¯·æ±‚å¤„ç†ï¼Œå¦åˆ™è¿”å›å…¨ä½“èµ„æº</li></ul></li></ul><h4 id="å“åº”å­—æ®µé¦–éƒ¨"><a href="#å“åº”å­—æ®µé¦–éƒ¨" class="headerlink" title="å“åº”å­—æ®µé¦–éƒ¨"></a>å“åº”å­—æ®µé¦–éƒ¨</h4><ul><li>Accept-Ranges</li><li>Age</li><li>ETagï¼šå®ä½“èµ„æºçš„å”¯ä¸€æ ‡è¯†ï¼Œä¸­è‹±æ–‡æ˜¯åŒä¸€ä¸ª<ul><li>å¼º ETagï¼šç»†å¾®å˜åŒ–éƒ½ä¼šæ”¹å˜</li><li>å¼± ETagï¼šåªç”¨äºæç¤ºèµ„æºæ˜¯å¦ç›¸åŒï¼Œèµ„æºå‘ç”Ÿæ ¹æœ¬æ”¹å˜äº§ç”Ÿå·®å¼‚æ—¶æ‰æ”¹å˜ ETag å€¼</li></ul></li><li>Location</li><li>Proxy-Authenticate</li><li>Retry-After</li><li>Server</li><li>Vary</li></ul><h4 id="å®ä½“é¦–éƒ¨å­—æ®µ"><a href="#å®ä½“é¦–éƒ¨å­—æ®µ" class="headerlink" title="å®ä½“é¦–éƒ¨å­—æ®µ"></a>å®ä½“é¦–éƒ¨å­—æ®µ</h4><ul><li>Allow</li><li>Content-Encoding</li><li>Content-Language</li><li>Content-Length</li><li>Content-Location</li><li>Content-MD5</li><li>Content-Range</li><li>Content-Type</li><li>Expiresï¼šèµ„æºå¤±æ•ˆçš„æ—¥æœŸ</li><li>Last-Modifiedï¼šèµ„æºæœ€ç»ˆä¿®æ”¹çš„æ—¶é—´</li></ul><h4 id="ä¸º-CookieæœåŠ¡çš„é¦–éƒ¨å­—æ®µ"><a href="#ä¸º-CookieæœåŠ¡çš„é¦–éƒ¨å­—æ®µ" class="headerlink" title="ä¸º CookieæœåŠ¡çš„é¦–éƒ¨å­—æ®µ"></a>ä¸º CookieæœåŠ¡çš„é¦–éƒ¨å­—æ®µ</h4><table><thead><tr><th>é¦–éƒ¨å­—æ®µå</th><th>è¯´æ˜</th><th>é¦–éƒ¨ç±»å‹</th></tr></thead><tbody><tr><td>Set-Cookie</td><td>å¼€å§‹çŠ¶æ€ç®¡ç†æ‰€ä½¿ç”¨çš„ Cookie ä¿¡æ¯</td><td>å“åº”é¦–éƒ¨å­—æ®µ</td></tr><tr><td>COokie</td><td>æœåŠ¡å™¨æ¥æ”¶åˆ°çš„ Cookie ä¿¡æ¯</td><td>è¯·æ±‚é¦–éƒ¨å­—æ®µ</td></tr></tbody></table><h1 id="ç¬¬ä¸ƒç« -ç¡®ä¿-Web-å®‰å…¨çš„-HTTPS"><a href="#ç¬¬ä¸ƒç« -ç¡®ä¿-Web-å®‰å…¨çš„-HTTPS" class="headerlink" title="ç¬¬ä¸ƒç«  ç¡®ä¿ Web å®‰å…¨çš„ HTTPS"></a>ç¬¬ä¸ƒç«  ç¡®ä¿ Web å®‰å…¨çš„ HTTPS</h1><h2 id="HTTP-çš„ç¼ºç‚¹"><a href="#HTTP-çš„ç¼ºç‚¹" class="headerlink" title="HTTP çš„ç¼ºç‚¹"></a>HTTP çš„ç¼ºç‚¹</h2><ul><li>æ˜æ–‡ï¼Œå†…å®¹ä¼šè¢«çªƒå¬    </li><li>ä¸éªŒè¯èº«ä»½ï¼Œä¼šè¢«ä¼ªè£…</li><li>æ— æ³•éªŒè¯å®Œæ•´æ€§ï¼Œå¯èƒ½è¢«ç¯¡æ”¹</li></ul><p>æœªåŠ å¯†åè®®éƒ½ä¼šå­˜åœ¨è¿™ç±»é—®é¢˜</p><h4 id="æ˜æ–‡"><a href="#æ˜æ–‡" class="headerlink" title="æ˜æ–‡"></a>æ˜æ–‡</h4><ul><li>TCP/IP æ˜¯å¯èƒ½è¢«çªƒå¬çš„ç½‘ç»œ<ul><li>æŠ“åŒ…å·¥å…·</li></ul></li><li>åŠ å¯†å¤„ç†é˜²æ­¢è¢«çªƒå¬<ul><li>é€šä¿¡çš„åŠ å¯†<ul><li>SSL</li><li>TLS</li></ul></li><li>å†…å®¹çš„åŠ å¯†</li></ul></li></ul><h4 id="éªŒè¯èº«ä»½"><a href="#éªŒè¯èº«ä»½" class="headerlink" title="éªŒè¯èº«ä»½"></a>éªŒè¯èº«ä»½</h4><ul><li><p>ä»»ä½•äººéƒ½å¯ä»¥å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚éƒ½ä¼šè¿”å›å“åº”</p></li><li><p>æŸ¥æ˜å¯¹æ‰‹çš„è¯ä¹¦ï¼šSSL</p></li></ul><h4 id="å®Œæ•´æ€§"><a href="#å®Œæ•´æ€§" class="headerlink" title="å®Œæ•´æ€§"></a>å®Œæ•´æ€§</h4><ul><li>é­é‡ç¯¡æ”¹ï¼ŒMITM ä¸­é—´äººæ”»å‡»</li><li>é˜²æ­¢ç¯¡æ”¹<ul><li>MD5 å’Œ SHA-1ç­‰æ•£åˆ—å€¼æ ¡éªŒ</li><li>æ•°å­—ç­¾å</li></ul></li></ul><h2 id="HTTPS-HTTP-åŠ å¯†-è®¤è¯-å®Œæ•´æ€§ä¿æŠ¤"><a href="#HTTPS-HTTP-åŠ å¯†-è®¤è¯-å®Œæ•´æ€§ä¿æŠ¤" class="headerlink" title="HTTPS = HTTP + åŠ å¯† + è®¤è¯ + å®Œæ•´æ€§ä¿æŠ¤"></a>HTTPS = HTTP + åŠ å¯† + è®¤è¯ + å®Œæ•´æ€§ä¿æŠ¤</h2><ul><li>å…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†</li><li>å…¬é’¥åŠ å¯†ä¸å…±äº«å¯†é’¥åŠ å¯†ç›¸æ¯”ï¼Œå¤„ç†é€Ÿåº¦è¦æ…¢</li><li>HTTPS é‡‡ç”¨æ··åˆåŠ å¯†æœºåˆ¶<ul><li>ä½¿ç”¨å…¬é’¥åŠ å¯†æ–¹å¼äº¤æ¢å…±äº«å¯†é’¥</li><li>ä¹‹åçš„é€šä¿¡ä½¿ç”¨å…±äº«å¯†é’¥åŠ å¯†</li></ul></li><li>è¯ä¹¦è¯æ˜å…¬é’¥çš„æœ‰æ•ˆæ€§</li></ul><h1 id="ç¬¬å…«ç« -ç¡®è®¤è®¿é—®ç”¨æˆ·èº«ä»½çš„è®¤è¯"><a href="#ç¬¬å…«ç« -ç¡®è®¤è®¿é—®ç”¨æˆ·èº«ä»½çš„è®¤è¯" class="headerlink" title="ç¬¬å…«ç«  ç¡®è®¤è®¿é—®ç”¨æˆ·èº«ä»½çš„è®¤è¯"></a>ç¬¬å…«ç«  ç¡®è®¤è®¿é—®ç”¨æˆ·èº«ä»½çš„è®¤è¯</h1><h2 id="BASIC-è®¤è¯ï¼ˆåŸºæœ¬è®¤è¯ï¼‰"><a href="#BASIC-è®¤è¯ï¼ˆåŸºæœ¬è®¤è¯ï¼‰" class="headerlink" title="BASIC è®¤è¯ï¼ˆåŸºæœ¬è®¤è¯ï¼‰"></a>BASIC è®¤è¯ï¼ˆåŸºæœ¬è®¤è¯ï¼‰</h2><ol><li>è¯·æ±‚çš„èµ„æºéœ€è¦ BASIC è®¤è¯æ—¶ï¼ŒæœåŠ¡å™¨ä¼šéšçŠ¶æ€ç  401 Authorization Reuiredï¼Œè¿”å›å¸¦ WWW-Authenticate é¦–éƒ¨å­—æ®µçš„å“åº”ã€‚è¯¥å­—æ®µå†…åŒ…å«è®¤è¯çš„æ–¹å¼ï¼ˆBASICï¼‰åŠ Request-URI å®‰å…¨åŸŸå­—ç¬¦ä¸²ï¼ˆrealmï¼‰</li><li>æ¥æ”¶åˆ°çŠ¶æ€ç  401 çš„å®¢æˆ·ç«¯ï¼Œéœ€è¦å°†ç”¨æˆ· ID åŠå¯†ç å‘é€ç»™æœåŠ¡å™¨ã€‚å‘é€çš„å­—ç¬¦ä¸²å†…å®¹æ˜¯ç”±ç”¨æˆ· ID å’Œå¯†ç æ„æˆï¼Œä¸¤è€…ä¸­é—´ä»¥å†’å·ï¼ˆï¼šï¼‰è¿æ¥åï¼Œå†ç»è¿‡ Base64 ç¼–ç å¤„ç†ã€‚</li><li>æ”¶åˆ°åŒ…å«é¦–éƒ¨å­—æ®µ Authorization è¯·æ±‚çš„æœåŠ¡å™¨ï¼Œä¼šå¯¹è®¤è¯ä¿¡æ¯çš„æ­£ç¡®æ€§è¿›è¡ŒéªŒè¯ã€‚å¦‚éªŒè¯é€šè¿‡ï¼Œåˆ™è¿”å›ä¸€æ¡åŒ…å« Request-URI èµ„æºçš„å“åº”ã€‚</li></ol><h2 id="DIGEST-è®¤è¯ï¼ˆæ‘˜è¦è®¤è¯ï¼‰"><a href="#DIGEST-è®¤è¯ï¼ˆæ‘˜è¦è®¤è¯ï¼‰" class="headerlink" title="DIGEST è®¤è¯ï¼ˆæ‘˜è¦è®¤è¯ï¼‰"></a>DIGEST è®¤è¯ï¼ˆæ‘˜è¦è®¤è¯ï¼‰</h2><ol><li>è¯·æ±‚çš„èµ„æºéœ€è¦ DIGEST è®¤è¯æ—¶ï¼ŒæœåŠ¡å™¨ä¼šéšçŠ¶æ€ç  401 Authorization Reuiredï¼Œè¿”å›å¸¦ WWW-Authenticate é¦–éƒ¨å­—æ®µçš„å“åº”ã€‚è¯¥å­—æ®µå†…åŒ…å«è´¨é—®å“åº”æ–¹å¼è®¤è¯æ‰€éœ€çš„ä¸´æ—¶è´¨è¯¢ç ï¼ˆéšæœºæ•°ï¼Œnonceï¼‰</li><li>æ¥æ”¶åˆ°çŠ¶æ€ç  401 çš„å®¢æˆ·ç«¯ï¼Œè¿”å›çš„å“åº”ä¸­åŒ…å« DIGEST è®¤è¯å¿…é¡»çš„é¦–éƒ¨å­—æ®µ Authorization ä¿¡æ¯ï¼ŒåŒ…æ‹¬ usernameã€realmã€nonceã€uriã€response å­—æ®µã€‚<ul><li>realmã€nonce æ˜¯ä»æœåŠ¡ç«¯å¾—åˆ°</li><li>username æ˜¯ realm é™å®šèŒƒå›´å†…å¯è¿›è¡Œè®¤è¯ç­‰ç”¨æˆ·å</li><li>uri å³ Request-URI</li><li>response å­˜æ”¾ç»è¿‡ MD5 è¿ç®—åçš„å¯†ç å­—ç¬¦ä¸²ï¼Œå½¢æˆå“åº”ç </li></ul></li><li>æ”¶åˆ°åŒ…å«é¦–éƒ¨å­—æ®µ Authorization è¯·æ±‚çš„æœåŠ¡å™¨ï¼Œä¼šå¯¹è®¤è¯ä¿¡æ¯çš„æ­£ç¡®æ€§è¿›è¡ŒéªŒè¯ã€‚å¦‚éªŒè¯é€šè¿‡ï¼Œåˆ™è¿”å›ä¸€æ¡åŒ…å« Request-URI èµ„æºçš„å“åº”ã€‚</li></ol><h2 id="SSL-å®¢æˆ·ç«¯è®¤è¯"><a href="#SSL-å®¢æˆ·ç«¯è®¤è¯" class="headerlink" title="SSL å®¢æˆ·ç«¯è®¤è¯"></a>SSL å®¢æˆ·ç«¯è®¤è¯</h2><p>å®¢æˆ·ç«¯äº‹å…ˆå®‰è£…è¯ä¹¦</p><ol><li>æ¥æ”¶åˆ°éœ€è¦è®¤è¯èµ„æºçš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¼šå‘é€ Certificate Request æŠ¥æ–‡ï¼Œè¦æ±‚å®¢æˆ·ç«¯æä¾›å®¢æˆ·ç«¯è¯ä¹¦ã€‚</li><li>ç”¨æˆ·é€‰æ‹©å°†å‘é€çš„å®¢æˆ·ç«¯è¯ä¹¦åï¼Œå®¢æˆ·ç«¯ä¼šæŠŠå®¢æˆ·ç«¯è¯ä¹¦ä¿¡æ¯ä»¥ Client Certificate æŠ¥æ–‡æ–¹å¼å‘é€ç»™æœåŠ¡å™¨ã€‚</li><li>æœåŠ¡å™¨éªŒè¯å®¢æˆ·ç«¯è¯ä¹¦ï¼ŒéªŒè¯é€šè¿‡åæ–¹å¯é¢†å–è¯ä¹¦å†…å®¢æˆ·ç«¯çš„å…¬å¼€å¯†é’¥ï¼Œç„¶åå¼€å§‹ HTTPS åŠ å¯†é€šä¿¡ã€‚</li></ol><h3 id="åŒå› ç´ è®¤è¯"><a href="#åŒå› ç´ è®¤è¯" class="headerlink" title="åŒå› ç´ è®¤è¯"></a>åŒå› ç´ è®¤è¯</h3><ul><li><p>è¯ä¹¦è®¤è¯ -&gt; è®¤è¯å®¢æˆ·ç«¯è®¡ç®—æœº</p></li><li><p>è¡¨å•è®¤è¯ -&gt; è®¤è¯ç”¨æˆ·æœ¬äººçš„è¡Œä¸º</p></li></ul><h2 id="åŸºäºè¡¨å•è®¤è¯"><a href="#åŸºäºè¡¨å•è®¤è¯" class="headerlink" title="åŸºäºè¡¨å•è®¤è¯"></a>åŸºäºè¡¨å•è®¤è¯</h2><ul><li>ä¸€èˆ¬ç”¨ Cookie æ¥ç®¡ç† Session</li><li>é€šè¿‡æœåŠ¡å™¨ç«¯çš„ web åº”ç”¨ï¼Œå°†å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„ç”¨æˆ· ID å’Œå¯†ç ä¸ä¹‹å‰ç™»å½•è¿‡çš„ä¿¡æ¯åšåŒ¹é…æ¥è¿›è¡Œè®¤è¯çš„</li></ul><ol><li>å®¢æˆ·ç«¯æŠŠç”¨æˆ· ID å’Œå¯†ç ç­‰ç™»å½•ä¿¡æ¯æ”¾å…¥æŠ¥æ–‡çš„å®ä½“éƒ¨åˆ†ï¼Œé€šå¸¸æ˜¯ä»¥ POST æ–¹æ³•æŠŠè¯·æ±‚å‘é€ç»™æœåŠ¡å™¨ã€‚è€Œè¿™æ—¶ï¼Œä¼šä½¿ç”¨ HTTPS é€šä¿¡æ¥è¿›è¡Œ HTML è¡¨å•ç”»é¢çš„æ˜¾ç¤ºå’Œç”¨æˆ·è¾“å…¥æ•°æ®çš„å‘é€ã€‚</li><li>æœåŠ¡å™¨ä¼šå‘æ”¾ç”¨ä»¥è¯†åˆ«ç”¨æˆ·çš„ Session IDã€‚é€šè¿‡éªŒè¯ä»å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„ç™»å½•ä¿¡æ¯è¿›è¡Œèº«ä»½è®¤è¯ï¼Œç„¶åæŠŠç”¨æˆ·çš„è®¤è¯çŠ¶æ€ä¸ Session ID ç»‘å®šåè®°å½•åœ¨æœåŠ¡å™¨ç«¯ã€‚å‘å®¢æˆ·ç«¯è¿”å›å“åº”æ—¶ï¼Œä¼šåœ¨é¦–éƒ¨å­—æ®µ Set-Cookie å†…å†™å…¥ Session IDã€‚</li><li>å®¢æˆ·ç«¯æ¥æ”¶åˆ°ä»æœåŠ¡ç«¯å‘æ¥çš„ Session ID åï¼Œä¼šå°†å…¶ä½œä¸º Cookie ä¿å­˜åœ¨æœ¬åœ°ã€‚ä¸‹æ¬¡å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å‘é€ Cookieï¼Œæ‰€ä»¥ Session ID ä¹Ÿéšä¹‹å‘é€åˆ°æœåŠ¡å™¨ã€‚æœåŠ¡å™¨ç«¯å¯é€šè¿‡éªŒè¯æ¥æ”¶åˆ°çš„ Session ID è¯†åˆ«ç”¨æˆ·å’Œå…¶è®¤è¯çŠ¶æ€ã€‚</li></ol><h1 id="ç¬¬ä¹ç« -åŸºäº-HTTP-çš„åŠŸèƒ½è¿½åŠ åè®®"><a href="#ç¬¬ä¹ç« -åŸºäº-HTTP-çš„åŠŸèƒ½è¿½åŠ åè®®" class="headerlink" title="ç¬¬ä¹ç«  åŸºäº HTTP çš„åŠŸèƒ½è¿½åŠ åè®®"></a>ç¬¬ä¹ç«  åŸºäº HTTP çš„åŠŸèƒ½è¿½åŠ åè®®</h1><h3 id="HTTP-çš„ç“¶é¢ˆ"><a href="#HTTP-çš„ç“¶é¢ˆ" class="headerlink" title="HTTP çš„ç“¶é¢ˆ"></a>HTTP çš„ç“¶é¢ˆ</h3><ul><li>ä¸€æ¡è¿æ¥ä¸Šåªå¯å‘é€ä¸€ä¸ªè¯·æ±‚</li><li>è¯·æ±‚åªèƒ½ä»å®¢æˆ·ç«¯å¼€å§‹ï¼Œå®¢æˆ·ç«¯ä¸å¯ä»¥æ¥æ”¶å“åº”æ„å¤–çš„æŒ‡ä»¤</li><li>è¯·æ±‚/å“åº”é¦–éƒ¨æœªç»å‹ç¼©å°±å‘é€ã€‚é¦–éƒ¨ä¿¡æ¯è¶Šå¤šå»¶è¿Ÿè¶Šå¤§</li><li>å‘é€å†—é•¿çš„é¦–éƒ¨ã€‚æ¯æ¬¡äº’ç›¸å‘é€ç›¸åŒçš„é¦–éƒ¨é€ æˆçš„æµªè´¹è¾ƒå¤šã€‚</li><li>å¯ä»»æ„é€‰æ‹©æ•°æ®å‹ç¼©æ ¼å¼ã€‚éå¼ºåˆ¶å‹ç¼©å‘é€ã€‚</li></ul><h4 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h4><ul><li>Asynchronous JavaScript and XML</li><li>æœ‰æ•ˆåˆ©ç”¨ JavaScript å’Œ DOM çš„æ“ä½œï¼Œè¾¾åˆ°å±€éƒ¨ Web é¡µé¢æ›¿æ¢åŠ è½½çš„å¼‚æ­¥é€šä¿¡æ‰‹æ®µ</li><li>å’Œä»¥å‰çš„åŒæ­¥é€šä¿¡ç›¸æ¯”ï¼Œåªæ›´æ–°ä¸€éƒ¨åˆ†é¡µé¢ï¼Œ<strong>ä¼ è¾“çš„æ•°æ®é‡å‡å°‘</strong></li><li>Ajax çš„æ ¸å¿ƒæŠ€æœ¯æ˜¯åä¸º XMLHttpRequest çš„ APIï¼Œé€šè¿‡ JavaScript çš„è°ƒç”¨å°±èƒ½å’ŒæœåŠ¡å™¨è¿›è¡Œ HTTP é€šä¿¡</li></ul><h4 id="Comet"><a href="#Comet" class="headerlink" title="Comet"></a>Comet</h4><ul><li>Comet å…ˆå°†å“åº”æŒ‚èµ·ï¼Œå½“æœåŠ¡å™¨ç«¯åæ›´æ–°å†è¿”å›ã€‚æ¨¡æ‹ŸæœåŠ¡å™¨ç«¯å‘å®¢æˆ·ç«¯æ¨é€çš„åŠŸèƒ½ã€‚</li><li><strong>å†…å®¹å®æ—¶æ›´æ–°</strong>ï¼Œä¸ºäº†ç»´æŒè¿æ¥ä¼šæ¶ˆè€—æ›´å¤šçš„èµ„æº</li></ul><h2 id="SPDY"><a href="#SPDY" class="headerlink" title="SPDY"></a>SPDY</h2><ul><li>æ²¡æœ‰å®Œå…¨æ”¹å†™ HTTP åè®®</li><li>åœ¨ TCP/IP çš„åº”ç”¨å±‚ä¸ä¼ è¾“å±‚ä¹‹é—´é€šè¿‡æ–°åŠ ä¼šè¯å±‚çš„å½¢å¼è¿ä½œ</li><li>ä¸ºäº†å®‰å…¨è§„å®šä½¿ç”¨ SSL</li><li>å¥½å¤„<ul><li>å¤šè·¯å¤ç”¨æµ</li><li>èµ‹äºˆè¯·æ±‚ä¼˜å…ˆçº§</li><li>å‹ç¼© HTTP é¦–éƒ¨</li><li>æ¨é€åŠŸèƒ½</li><li>æœåŠ¡å™¨æç¤ºåŠŸèƒ½</li></ul></li><li>ç¼ºç‚¹<ul><li>å•ä¸ªåŸŸåçš„é€šä¿¡å¤šè·¯æœç”¨ï¼Œä¸€ä¸ª Web ç½‘å€ä¸Šä½¿ç”¨å¤šä¸ªåŸŸåä¸‹çš„èµ„æºï¼Œæ”¹å–„æ•ˆæœæœ‰é™</li></ul></li></ul><h2 id="WebSocket"><a href="#WebSocket" class="headerlink" title="WebSocket"></a>WebSocket</h2><ul><li>Web æµè§ˆå™¨ä¸ Web æœåŠ¡å™¨ä¹‹é—´å…¨åŒå·¥é€šä¿¡æ ‡å‡†</li><li>å»ºç«‹åœ¨ HTTP åŸºç¡€ä¸Šï¼Œå‘èµ·æ–¹ä»æ˜¯å®¢æˆ·ç«¯ï¼Œä¸€æ—¦ç¡®ç«‹ WebSocket é€šä¿¡è¿æ¥ï¼Œä¸è®ºæœåŠ¡å™¨è¿˜æ˜¯å®¢æˆ·ç«¯ï¼Œä»»æ„ä¸€æ–¹å¯ä»¥ç›´æ¥å‘å¯¹æ–¹å‘é€æŠ¥æ–‡ã€‚</li><li>ç‰¹ç‚¹<ul><li>æ¨é€åŠŸèƒ½</li><li>WebSocket é¦–éƒ¨ä¿¡æ¯å¾ˆå°ï¼Œå‡å°‘é€šä¿¡é‡</li></ul></li></ul><p>ä¸ºäº†å®ç° WebSocket é€šä¿¡ï¼Œåœ¨ HTTP è¿æ¥å»ºç«‹ä¹‹åï¼Œéœ€è¦å®Œæˆä¸€æ¬¡æ¡æ‰‹ã€‚</p><ul><li>æ¡æ‰‹Â·è¯·æ±‚<ul><li>HTTP çš„ Upgrade é¦–éƒ¨å­—æ®µï¼Œå‘ŠçŸ¥æœåŠ¡å™¨é€šä¿¡åè®®å‘ç”Ÿæ”¹å˜ï¼Œè¾¾åˆ°æ¡æ‰‹çš„ç›®çš„ã€‚</li><li>Sec-WebSocket-Key å­—æ®µå†…è®°å½•ç€æ¡æ‰‹è¿‡ç¨‹ä¸­å¿…ä¸å¯å°‘çš„é”®å€¼</li><li>Sec-WebSocket-Protocol å­—æ®µå†…è®°å½•ä½¿ç”¨çš„å­åè®®</li></ul></li><li>æ¡æ‰‹Â·å“åº”<ul><li>è¿”å›çŠ¶æ€ç  101 Switching Protocols</li><li>Sec-WebSocket-Accept å­—æ®µå€¼æ˜¯ç”±æ¡æ‰‹è¯·æ±‚ä¸­çš„ Sec-WebSocket-Key çš„è‡ªåŠ¨å€¼ç”Ÿæˆçš„</li></ul></li></ul><h2 id="HTTP-2-0"><a href="#HTTP-2-0" class="headerlink" title="HTTP/2.0"></a>HTTP/2.0</h2><ul><li>ç›®æ ‡æ˜¯æ”¹å–„ç”¨æˆ·åœ¨ä½¿ç”¨ Web æ—¶çš„é€Ÿåº¦ä½“éªŒ</li></ul><h2 id="Web-æœåŠ¡å™¨ç®¡ç†æ–‡ä»¶çš„-WebDAV"><a href="#Web-æœåŠ¡å™¨ç®¡ç†æ–‡ä»¶çš„-WebDAV" class="headerlink" title="Web æœåŠ¡å™¨ç®¡ç†æ–‡ä»¶çš„ WebDAV"></a>Web æœåŠ¡å™¨ç®¡ç†æ–‡ä»¶çš„ WebDAV</h2><ul><li>Web-based Distributed Authoring and Versioning</li><li>å¯å¯¹ Web æœåŠ¡å™¨ä¸Šçš„å†…å®¹ç›´æ¥è¿›è¡Œæ–‡ä»¶å¤åˆ¶ã€ç¼–è¾‘ç­‰æ“ä½œçš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</li></ul><h1 id="ç¬¬åç« -æ„å»º-Web-å†…å®¹çš„æŠ€æœ¯"><a href="#ç¬¬åç« -æ„å»º-Web-å†…å®¹çš„æŠ€æœ¯" class="headerlink" title="ç¬¬åç«  æ„å»º Web å†…å®¹çš„æŠ€æœ¯"></a>ç¬¬åç«  æ„å»º Web å†…å®¹çš„æŠ€æœ¯</h1><ul><li>HTMLï¼ˆHyperText Markup Languageï¼‰</li><li>CSSï¼ˆCascading Style Sheetsï¼‰</li><li>JavaScript</li><li>JSONï¼ˆJavaScript Object Notationï¼‰</li></ul><h1 id="ç¬¬åä¸€ç« -Web-çš„æ”»å‡»æŠ€æœ¯"><a href="#ç¬¬åä¸€ç« -Web-çš„æ”»å‡»æŠ€æœ¯" class="headerlink" title="ç¬¬åä¸€ç«  Web çš„æ”»å‡»æŠ€æœ¯"></a>ç¬¬åä¸€ç«  Web çš„æ”»å‡»æŠ€æœ¯</h1><ul><li>HTTP ä¸å…·å¤‡å¿…è¦çš„å®‰å…¨åŠŸèƒ½</li><li>HTTP è¯·æ±‚å¯ä»¥åœ¨å®¢æˆ·ç«¯è‡ªç”±åœ°ä¿®æ”¹<ul><li>åœ¨æŠ¥æ–‡å†…åŠ è½½æ”»å‡»ä»£ç <ul><li>URL æŸ¥è¯¢å­—æ®µæˆ–è¡¨å•ã€HTTP é¦–éƒ¨ã€Cookie ç­‰é€”å¾„</li></ul></li></ul></li></ul><h3 id="é’ˆå¯¹-Web-åº”ç”¨çš„æ”»å‡»æ¨¡å¼"><a href="#é’ˆå¯¹-Web-åº”ç”¨çš„æ”»å‡»æ¨¡å¼" class="headerlink" title="é’ˆå¯¹ Web åº”ç”¨çš„æ”»å‡»æ¨¡å¼"></a>é’ˆå¯¹ Web åº”ç”¨çš„æ”»å‡»æ¨¡å¼</h3><ul><li><p>ä»¥æœåŠ¡å™¨ä¸ºç›®æ ‡çš„ä¸»åŠ¨æ”»å‡»</p><ul><li>æŠŠæ”»å‡»ä»£ç ä¼ å…¥çš„æ”»å‡»æ¨¡å¼</li><li>ä»£è¡¨<ul><li>SQL æ³¨å…¥æ”»å‡»</li><li>OS å‘½ä»¤æ³¨å…¥æ”»å‡»</li></ul></li></ul></li><li><p>ä»¥æœåŠ¡å™¨ä¸ºç›®æ ‡çš„è¢«åŠ¨æ”»å‡»</p><ul><li><p>åˆ©ç”¨åœˆå¥—ç­–ç•¥æ‰§è¡Œæ”»å‡»ä»£ç çš„æ”»å‡»æ¨¡å¼</p><ol><li>è¯±ä½¿ç”¨æˆ·è§¦å‘å·²ç»è®¾ç½®å¥½çš„é™·é˜±ï¼Œé™·é˜±ä¼šè‡ªåŠ¨å‘é€å·²åµŒå…¥æ”»å‡»ä»£ç çš„ HTTP è¯·æ±‚</li><li>å½“ç”¨æˆ·ä¸çŸ¥ä¸è§‰ä¸­æ‹›åï¼Œç”¨æˆ·çš„æµè§ˆå™¨æˆ–é‚®ä»¶å®¢æˆ·ç«¯æ•‘æŠ¤è§¦å‘è¿™ä¸ªé™·é˜±</li><li>ä¸­æ‹›åçš„ç”¨æˆ·æµè§ˆå™¨ä¼šæŠŠå«æœ‰æ”»å‡»ä»£ç çš„ HTTP è¯·æ±‚å‘é€ç»™ä½œä¸ºæ”»å‡»ç›®æ ‡çš„ Web åº”ç”¨ï¼Œè¿è¡Œæ”»å‡»ä»£ç </li><li>æ‰§è¡Œå®Œæ”»å‡»ä»£ç ï¼Œå­˜åœ¨å®‰å…¨æ¼æ´çš„ Web åº”ç”¨ä¼šæˆä¸ºæ”»å‡»è€…çš„è·³æ¿ï¼Œå¯èƒ½å¯¼è‡´ç”¨æˆ·æ‰€æŒçš„ Cookie ç­‰ä¸ªäººä¿¡æ¯è¢«çªƒå–ï¼Œç™»å½•çŠ¶æ€ä¸­çš„ç”¨æˆ·æƒé™é­æ¶æ„æ»¥ç”¨ç­‰åæœ</li></ol></li><li><p>ä»£è¡¨</p><ul><li>XSS è·¨ç«™è„šæœ¬æ”»å‡»</li><li>è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ </li></ul></li></ul></li></ul><h3 id="å› è¾“å…¥å€¼è½¬ä¹‰ä¸å®Œå…¨å¼•å‘çš„å®‰å…¨æ¼æ´"><a href="#å› è¾“å…¥å€¼è½¬ä¹‰ä¸å®Œå…¨å¼•å‘çš„å®‰å…¨æ¼æ´" class="headerlink" title="å› è¾“å…¥å€¼è½¬ä¹‰ä¸å®Œå…¨å¼•å‘çš„å®‰å…¨æ¼æ´"></a>å› è¾“å…¥å€¼è½¬ä¹‰ä¸å®Œå…¨å¼•å‘çš„å®‰å…¨æ¼æ´</h3><ul><li>XSS è·¨ç«™è„šæœ¬æ”»å‡»<ul><li>åœ¨ html ä¸­æ³¨å…¥ js ä»£ç ä½¿å¾—ç”¨æˆ·åœ¨è¡¨å•ä¸­è¾“å…¥çš„è´¦æˆ·å¯†ç ä¼šå‘é€åˆ°æ”»å‡»è€…çš„ç½‘ç«™</li></ul></li><li>SQL æ³¨å…¥æ”»å‡»<ul><li>é’ˆå¯¹æ•°æ®åº“ï¼Œä¼ å…¥éæ³•çš„ SQL è®©æœåŠ¡å™¨æ‰§è¡Œï¼Œå¯èƒ½å¯¼è‡´éæ³•æµè§ˆå’Œç¯¡æ”¹</li></ul></li><li>OS å‘½ä»¤æ³¨å…¥æ”»å‡»<ul><li>é€šè¿‡ Web åº”ç”¨ï¼Œæ‰§è¡Œéæ³•çš„æ“ä½œç³»ç»Ÿå‘½ä»¤</li></ul></li><li>HTTP é¦–éƒ¨æ³¨å…¥æ”»å‡»<ul><li>æ”»å‡»è€…é€šè¿‡åœ¨å“åº”é¦–éƒ¨å­—æ®µå†…æ’å…¥æ¢è¡Œï¼Œæ·»åŠ ä»»æ„å“åº”é¦–éƒ¨æˆ–ä¸»ä½“çš„ä¸€ç§æ”»å‡»<ul><li>æ¯”å¦‚ Cookie ä¿¡æ¯ã€é‡å®šå‘ URL</li></ul></li></ul></li><li>ç›®å½•éå†æ”»å‡»<ul><li>å¯¹æœ¬æ— æ„å…¬å¼€çš„æ–‡ä»¶ç›®å½•ï¼Œé€šè¿‡éæ³•æˆªæ–­å…¶ç›®å½•è·¯å¾„åï¼Œè¾¾æˆè®¿é—®ç›®çš„</li></ul></li><li>è¿œç¨‹æ–‡ä»¶åŒ…å«æ¼æ´<ul><li>å½“éƒ¨åˆ†è„šæœ¬å†…å®¹éœ€è¦ä»å…¶ä»–æ–‡ä»¶è¯»å…¥æ—¶ï¼Œæ”»å‡»è€…åˆ©ç”¨æŒ‡å®šå¤–éƒ¨æœåŠ¡å™¨çš„ URL å……å½“ä»¥æ¥æ–‡ä»¶ï¼Œè®©è„šæœ¬è¯»å–ä¹‹åï¼Œå°±å¯ä»¥è¿è¡Œä»»æ„è„šæœ¬çš„ä¸€ç§æ”»å‡»</li></ul></li></ul><h3 id="å› è®¾ç½®æˆ–è®¾è®¡ä¸Šçš„ç¼ºé™·å¼•å‘çš„å®‰å…¨æ¼æ´"><a href="#å› è®¾ç½®æˆ–è®¾è®¡ä¸Šçš„ç¼ºé™·å¼•å‘çš„å®‰å…¨æ¼æ´" class="headerlink" title="å› è®¾ç½®æˆ–è®¾è®¡ä¸Šçš„ç¼ºé™·å¼•å‘çš„å®‰å…¨æ¼æ´"></a>å› è®¾ç½®æˆ–è®¾è®¡ä¸Šçš„ç¼ºé™·å¼•å‘çš„å®‰å…¨æ¼æ´</h3><ul><li>å¼ºåˆ¶æµè§ˆ</li><li>ä¸æ­£ç¡®çš„é”™è¯¯æ¶ˆæ¯å¤„ç†</li><li>å¼€æ”¾é‡å®šå‘</li></ul><h3 id="å› ä¼šè¯ç®¡ç†ç–å¿½å¼•å‘çš„å®‰å…¨æ¼æ´"><a href="#å› ä¼šè¯ç®¡ç†ç–å¿½å¼•å‘çš„å®‰å…¨æ¼æ´" class="headerlink" title="å› ä¼šè¯ç®¡ç†ç–å¿½å¼•å‘çš„å®‰å…¨æ¼æ´"></a>å› ä¼šè¯ç®¡ç†ç–å¿½å¼•å‘çš„å®‰å…¨æ¼æ´</h3><ul><li>ä¼šè¯åŠ«æŒ<ul><li>æ”»å‡»è€…é€šè¿‡æŸç§æ‰‹æ®µæ‹¿åˆ°ç”¨æˆ·çš„ä¼šè¯ IDï¼Œå¹¶éæ³•ä½¿ç”¨æ­¤ä¼šè¯ ID ä¼ªè£…æˆç”¨æˆ·</li></ul></li><li>ä¼šè¯å›ºå®šæ”»å‡»</li><li>è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ <ul><li>æ”»å‡»è€…é€šè¿‡è®¾ç½®å¥½çš„é™·é˜±</li></ul></li></ul><h3 id="å…¶ä»–å®‰å…¨æ¼æ´"><a href="#å…¶ä»–å®‰å…¨æ¼æ´" class="headerlink" title="å…¶ä»–å®‰å…¨æ¼æ´"></a>å…¶ä»–å®‰å…¨æ¼æ´</h3><ul><li>å¯†ç ç ´è§£</li><li>ç‚¹å‡»åŠ«æŒ<ul><li>åˆ©ç”¨é€æ˜æŒ‰é’®è¦†ç›–åœ¨ Web é¡µé¢ä¸Šï¼Œè®©ç”¨æˆ·ç‚¹å‡»ï¼Œåˆç§°ç•Œé¢ä¼ªè£…</li></ul></li><li>DoS æ”»å‡»<ul><li>è®©è¿è¡Œä¸­çš„æœåŠ¡å‘ˆåœæ­¢çŠ¶æ€çš„æ”»å‡»</li></ul></li><li>åé—¨ç¨‹åº</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ’åº</title>
      <link href="/2020/03/30/%E6%8E%92%E5%BA%8F/"/>
      <url>/2020/03/30/%E6%8E%92%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="å¿«æ’"><a href="#å¿«æ’" class="headerlink" title="å¿«æ’"></a>å¿«æ’</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickSort</span> (<span class="params">arr, left = <span class="number">0</span>, right = arr.length <span class="number">-1</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (left &gt;= right) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> i = left;</span><br><span class="line">  <span class="keyword">let</span> j = right;</span><br><span class="line">  <span class="keyword">const</span> baseVal = arr[j];</span><br><span class="line">  <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; j &amp;&amp; arr[i] &lt;= baseVal) &#123;</span><br><span class="line">      i++;</span><br><span class="line">    &#125;</span><br><span class="line">    arr[j] = arr[i];</span><br><span class="line">    <span class="keyword">while</span> (j &gt; i &amp;&amp; arr[j] &gt;= baseVal) &#123;</span><br><span class="line">      j--;</span><br><span class="line">    &#125;</span><br><span class="line">    arr[i] = arr[j];</span><br><span class="line">  &#125;</span><br><span class="line">  arr[j] = baseVal;</span><br><span class="line">  quickSort(arr, left, j<span class="number">-1</span>);</span><br><span class="line">  quickSort(arr, j+<span class="number">1</span>, right);</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> é¢è¯•å‡†å¤‡ </tag>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSè¿è¡Œæœºåˆ¶</title>
      <link href="/2020/03/29/JS%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6/"/>
      <url>/2020/03/29/JS%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<p><a href="https://mp.weixin.qq.com/s/vIKDUrbuxVNQMi_g_fiwUA" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/vIKDUrbuxVNQMi_g_fiwUA</a></p><h2 id="åŒºåˆ†è¿›ç¨‹å’Œçº¿ç¨‹"><a href="#åŒºåˆ†è¿›ç¨‹å’Œçº¿ç¨‹" class="headerlink" title="åŒºåˆ†è¿›ç¨‹å’Œçº¿ç¨‹"></a>åŒºåˆ†è¿›ç¨‹å’Œçº¿ç¨‹</h2><ul><li>è¿›ç¨‹æ˜¯ cpu èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œçº¿ç¨‹æ˜¯ cpu è°ƒåº¦çš„æœ€å°å•ä½ã€‚</li><li>ä¸€ä¸ªè¿›ç¨‹å´©æºƒï¼Œä¸ä¼šå¯¹å…¶ä»–è¿›ç¨‹äº§ç”Ÿå½±å“ï¼›è€Œä¸€ä¸ªçº¿ç¨‹å´©æºƒï¼Œä¼šè®©åŒä¸€è¿›ç¨‹å†…çš„å…¶ä»–çº¿ç¨‹ä¹Ÿæ­»æ‰ã€‚</li><li>è¿›ç¨‹åœ¨åˆ›å»ºã€åˆ‡æ¢å’Œé”€æ¯æ—¶å¼€é”€æ¯”è¾ƒå¤§ï¼Œè€Œçº¿ç¨‹æ¯”è¾ƒå°ã€‚<ul><li>è¿›ç¨‹åˆ›å»ºçš„æ—¶å€™éœ€è¦åˆ†é…ç³»ç»Ÿèµ„æºï¼Œè€Œé”€æ¯çš„çš„æ—¶å€™éœ€è¦é‡Šæ”¾ç³»ç»Ÿèµ„æºã€‚</li></ul></li></ul><h2 id="æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„"><a href="#æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„" class="headerlink" title="æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„"></a>æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„</h2><ul><li>æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„</li><li>æµè§ˆå™¨ä¹‹æ‰€ä»¥èƒ½å¤Ÿè¿è¡Œï¼Œæ˜¯å› ä¸ºç³»ç»Ÿç»™å®ƒçš„è¿›ç¨‹åˆ†é…äº†èµ„æºï¼ˆcpuã€å†…å­˜ï¼‰</li><li>ç®€å•ç‚¹ç†è§£ï¼Œæ¯æ‰“å¼€ä¸€ä¸ªTabé¡µï¼Œå°±ç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªç‹¬ç«‹çš„æµè§ˆå™¨è¿›ç¨‹<ul><li>åœ¨è¿™é‡Œæµè§ˆå™¨åº”è¯¥ä¹Ÿæœ‰è‡ªå·±çš„ä¼˜åŒ–æœºåˆ¶ï¼Œæœ‰æ—¶å€™æ‰“å¼€å¤šä¸ªtabé¡µåï¼Œå¯ä»¥åœ¨Chromeä»»åŠ¡ç®¡ç†å™¨ä¸­çœ‹åˆ°ï¼Œæœ‰äº›è¿›ç¨‹è¢«åˆå¹¶äº†ï¼ˆæ‰€ä»¥æ¯ä¸€ä¸ªTabæ ‡ç­¾å¯¹åº”ä¸€ä¸ªè¿›ç¨‹å¹¶ä¸ä¸€å®šæ˜¯ç»å¯¹çš„ï¼‰</li></ul></li></ul><h2 id="æµè§ˆå™¨éƒ½åŒ…å«å“ªäº›è¿›ç¨‹ï¼Ÿ"><a href="#æµè§ˆå™¨éƒ½åŒ…å«å“ªäº›è¿›ç¨‹ï¼Ÿ" class="headerlink" title="æµè§ˆå™¨éƒ½åŒ…å«å“ªäº›è¿›ç¨‹ï¼Ÿ"></a>æµè§ˆå™¨éƒ½åŒ…å«å“ªäº›è¿›ç¨‹ï¼Ÿ</h2><ul><li>Browserè¿›ç¨‹ï¼šæµè§ˆå™¨çš„ä¸»è¿›ç¨‹ï¼ˆè´Ÿè´£åè°ƒã€ä¸»æ§ï¼‰ï¼Œåªæœ‰ä¸€ä¸ªã€‚ä½œç”¨æœ‰ï¼š<ul><li>è´Ÿè´£æµè§ˆå™¨ç•Œé¢æ˜¾ç¤ºï¼Œä¸ç”¨æˆ·äº¤äº’ã€‚å¦‚å‰è¿›ï¼Œåé€€ç­‰</li><li>è´Ÿè´£å„ä¸ªé¡µé¢çš„ç®¡ç†ï¼Œåˆ›å»ºå’Œé”€æ¯å…¶ä»–è¿›ç¨‹</li><li>å°†Rendererè¿›ç¨‹å¾—åˆ°çš„å†…å­˜ä¸­çš„Bitmapï¼Œç»˜åˆ¶åˆ°ç”¨æˆ·ç•Œé¢ä¸Š</li><li>ç½‘ç»œèµ„æºçš„ç®¡ç†ï¼Œä¸‹è½½ç­‰</li></ul></li><li>ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹ï¼šæ¯ç§ç±»å‹çš„æ’ä»¶å¯¹åº”ä¸€ä¸ªè¿›ç¨‹ï¼Œä»…å½“ä½¿ç”¨è¯¥æ’ä»¶æ—¶æ‰åˆ›å»º</li><li>GPUè¿›ç¨‹ï¼šæœ€å¤šä¸€ä¸ªï¼Œç”¨äº3Dç»˜åˆ¶ç­‰</li><li>æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹ï¼ˆæµè§ˆå™¨å†…æ ¸ï¼‰ï¼ˆRendererè¿›ç¨‹ï¼Œå†…éƒ¨æ˜¯å¤šçº¿ç¨‹çš„ï¼‰<ul><li>é»˜è®¤æ¯ä¸ªTabé¡µé¢ä¸€ä¸ªè¿›ç¨‹ï¼Œäº’ä¸å½±å“ã€‚ä¸»è¦ä½œç”¨ä¸º<ul><li>é¡µé¢æ¸²æŸ“ï¼Œè„šæœ¬æ‰§è¡Œï¼Œäº‹ä»¶å¤„ç†ç­‰</li></ul></li></ul></li></ul><h2 id="æµè§ˆå™¨å¤šè¿›ç¨‹çš„ä¼˜åŠ¿"><a href="#æµè§ˆå™¨å¤šè¿›ç¨‹çš„ä¼˜åŠ¿" class="headerlink" title="æµè§ˆå™¨å¤šè¿›ç¨‹çš„ä¼˜åŠ¿"></a>æµè§ˆå™¨å¤šè¿›ç¨‹çš„ä¼˜åŠ¿</h2><ul><li>é¿å…å•ä¸ªpage crashå½±å“æ•´ä¸ªæµè§ˆå™¨</li><li>é¿å…ç¬¬ä¸‰æ–¹æ’ä»¶crashå½±å“æ•´ä¸ªæµè§ˆå™¨</li><li>å¤šè¿›ç¨‹å……åˆ†åˆ©ç”¨å¤šæ ¸ä¼˜åŠ¿</li><li>æ–¹ä¾¿ä½¿ç”¨æ²™ç›’æ¨¡å‹éš”ç¦»æ’ä»¶ç­‰è¿›ç¨‹ï¼Œæé«˜æµè§ˆå™¨ç¨³å®šæ€§</li></ul><h2 id="é‡ç‚¹æ˜¯æµè§ˆå™¨å†…æ ¸ï¼ˆæ¸²æŸ“è¿›ç¨‹ï¼‰"><a href="#é‡ç‚¹æ˜¯æµè§ˆå™¨å†…æ ¸ï¼ˆæ¸²æŸ“è¿›ç¨‹ï¼‰" class="headerlink" title="é‡ç‚¹æ˜¯æµè§ˆå™¨å†…æ ¸ï¼ˆæ¸²æŸ“è¿›ç¨‹ï¼‰"></a>é‡ç‚¹æ˜¯æµè§ˆå™¨å†…æ ¸ï¼ˆæ¸²æŸ“è¿›ç¨‹ï¼‰</h2><ul><li>é¡µé¢çš„æ¸²æŸ“ï¼ŒJSçš„æ‰§è¡Œï¼Œäº‹ä»¶çš„å¾ªç¯ï¼Œéƒ½åœ¨è¿™ä¸ªæ¸²æŸ“è¿›ç¨‹å†…è¿›è¡Œ</li><li>æµè§ˆå™¨çš„æ¸²æŸ“è¿›ç¨‹æ˜¯å¤šçº¿ç¨‹çš„<ul><li>GUIæ¸²æŸ“çº¿ç¨‹<ul><li>è´Ÿè´£æ¸²æŸ“æµè§ˆå™¨ç•Œé¢ï¼Œè§£æHTMLï¼ŒCSSï¼Œæ„å»ºDOMæ ‘å’ŒRenderObjectæ ‘ï¼Œå¸ƒå±€å’Œç»˜åˆ¶ç­‰</li><li>å½“ç•Œé¢éœ€è¦é‡ç»˜ï¼ˆRepaintï¼‰æˆ–ç”±äºæŸç§æ“ä½œå¼•å‘å›æµ(reflow)æ—¶ï¼Œè¯¥çº¿ç¨‹å°±ä¼šæ‰§è¡Œ</li><li><strong>GUIæ¸²æŸ“çº¿ç¨‹ä¸JSå¼•æ“çº¿ç¨‹æ˜¯äº’æ–¥çš„</strong>ï¼Œå½“JSå¼•æ“æ‰§è¡Œæ—¶GUIçº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼ˆç›¸å½“äºè¢«å†»ç»“äº†ï¼‰ï¼ŒGUIæ›´æ–°ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­<strong>ç­‰åˆ°JSå¼•æ“ç©ºé—²æ—¶</strong>ç«‹å³è¢«æ‰§è¡Œ</li></ul></li><li>JSå¼•æ“çº¿ç¨‹<ul><li>ä¹Ÿç§°ä¸ºJSå†…æ ¸ï¼Œè´Ÿè´£å¤„ç†Javascriptè„šæœ¬ç¨‹åºã€‚ï¼ˆä¾‹å¦‚V8å¼•æ“ï¼‰</li><li>JSå¼•æ“çº¿ç¨‹è´Ÿè´£è§£æJavascriptè„šæœ¬ï¼Œè¿è¡Œä»£ç ã€‚</li><li>JSå¼•æ“ä¸€ç›´ç­‰å¾…ç€ä»»åŠ¡é˜Ÿåˆ—ä¸­ä»»åŠ¡çš„åˆ°æ¥ï¼Œç„¶ååŠ ä»¥å¤„ç†ï¼Œä¸€ä¸ªTabé¡µï¼ˆrendererè¿›ç¨‹ï¼‰ä¸­æ— è®ºä»€ä¹ˆæ—¶å€™éƒ½åªæœ‰ä¸€ä¸ªJSçº¿ç¨‹åœ¨è¿è¡ŒJSç¨‹åº</li><li><strong>GUIæ¸²æŸ“çº¿ç¨‹ä¸JSå¼•æ“çº¿ç¨‹æ˜¯äº’æ–¥çš„</strong>ï¼Œæ‰€ä»¥å¦‚æœJSæ‰§è¡Œçš„æ—¶é—´è¿‡é•¿ï¼Œè¿™æ ·å°±ä¼šé€ æˆé¡µé¢çš„æ¸²æŸ“ä¸è¿è´¯ï¼Œå¯¼è‡´é¡µé¢æ¸²æŸ“åŠ è½½é˜»å¡</li></ul></li><li>äº‹ä»¶è§¦å‘çº¿ç¨‹<ul><li>å½’å±äºæµè§ˆå™¨è€Œä¸æ˜¯JSå¼•æ“ï¼Œç”¨æ¥æ§åˆ¶äº‹ä»¶å¾ªç¯</li><li>å½“JSå¼•æ“æ‰§è¡Œä»£ç å—å¦‚setTimeOutæ—¶ï¼ˆä¹Ÿå¯æ¥è‡ªæµè§ˆå™¨å†…æ ¸çš„å…¶ä»–çº¿ç¨‹,å¦‚é¼ æ ‡ç‚¹å‡»ã€AJAXå¼‚æ­¥è¯·æ±‚ç­‰ï¼‰ï¼Œä¼šå°†å¯¹åº”ä»»åŠ¡æ·»åŠ åˆ°äº‹ä»¶çº¿ç¨‹ä¸­</li><li>å½“å¯¹åº”çš„äº‹ä»¶ç¬¦åˆè§¦å‘æ¡ä»¶è¢«è§¦å‘æ—¶ï¼Œè¯¥çº¿ç¨‹ä¼šæŠŠäº‹ä»¶æ·»åŠ åˆ°å¾…å¤„ç†é˜Ÿåˆ—çš„é˜Ÿå°¾ï¼Œç­‰å¾…JSå¼•æ“çš„å¤„ç†</li><li>ç”±äºJSçš„å•çº¿ç¨‹å…³ç³»ï¼Œæ‰€ä»¥è¿™äº›å¾…å¤„ç†é˜Ÿåˆ—ä¸­çš„äº‹ä»¶éƒ½å¾—æ’é˜Ÿç­‰å¾…JSå¼•æ“å¤„ç†ï¼ˆå½“JSå¼•æ“ç©ºé—²æ—¶æ‰ä¼šå»æ‰§è¡Œï¼‰</li></ul></li><li>å®šæ—¶è§¦å‘å™¨çº¿ç¨‹<ul><li>ä¼ è¯´ä¸­çš„setIntervalä¸setTimeoutæ‰€åœ¨çº¿ç¨‹</li><li>æµè§ˆå™¨å®šæ—¶è®¡æ•°å™¨å¹¶ä¸æ˜¯ç”±JavaScriptå¼•æ“è®¡æ•°çš„,ï¼ˆå› ä¸ºJavaScriptå¼•æ“æ˜¯å•çº¿ç¨‹çš„, å¦‚æœå¤„äºé˜»å¡çº¿ç¨‹çŠ¶æ€å°±ä¼šå½±å“è®°è®¡æ—¶çš„å‡†ç¡®ï¼‰</li><li>å› æ­¤é€šè¿‡å•ç‹¬çº¿ç¨‹æ¥è®¡æ—¶å¹¶è§¦å‘å®šæ—¶ï¼ˆè®¡æ—¶å®Œæ¯•åï¼Œæ·»åŠ åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…JSå¼•æ“ç©ºé—²åæ‰§è¡Œï¼‰</li><li>æ³¨æ„ï¼ŒW3Cåœ¨HTMLæ ‡å‡†ä¸­è§„å®šï¼Œè§„å®šè¦æ±‚setTimeoutä¸­ä½äº4msçš„æ—¶é—´é—´éš”ç®—ä¸º4msã€‚</li></ul></li><li>å¼‚æ­¥ http è¯·æ±‚çº¿ç¨‹<ul><li>åœ¨XMLHttpRequeståœ¨è¿æ¥åæ˜¯é€šè¿‡æµè§ˆå™¨æ–°å¼€ä¸€ä¸ªçº¿ç¨‹è¯·æ±‚</li><li>å°†æ£€æµ‹åˆ°çŠ¶æ€å˜æ›´æ—¶ï¼Œå¦‚æœè®¾ç½®æœ‰å›è°ƒå‡½æ•°ï¼Œå¼‚æ­¥çº¿ç¨‹å°±<strong>äº§ç”ŸçŠ¶æ€å˜æ›´äº‹ä»¶</strong>ï¼Œå°†è¿™ä¸ªå›è°ƒå†æ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ã€‚å†ç”±JavaScriptå¼•æ“æ‰§è¡Œã€‚</li></ul></li></ul></li></ul><h2 id="Browserè¿›ç¨‹å’Œæµè§ˆå™¨å†…æ ¸ï¼ˆRendererè¿›ç¨‹ï¼‰çš„é€šä¿¡è¿‡ç¨‹"><a href="#Browserè¿›ç¨‹å’Œæµè§ˆå™¨å†…æ ¸ï¼ˆRendererè¿›ç¨‹ï¼‰çš„é€šä¿¡è¿‡ç¨‹" class="headerlink" title="Browserè¿›ç¨‹å’Œæµè§ˆå™¨å†…æ ¸ï¼ˆRendererè¿›ç¨‹ï¼‰çš„é€šä¿¡è¿‡ç¨‹"></a>Browserè¿›ç¨‹å’Œæµè§ˆå™¨å†…æ ¸ï¼ˆRendererè¿›ç¨‹ï¼‰çš„é€šä¿¡è¿‡ç¨‹</h2><ul><li>Browserè¿›ç¨‹æ”¶åˆ°ç”¨æˆ·è¯·æ±‚ï¼Œé¦–å…ˆéœ€è¦è·å–é¡µé¢å†…å®¹ï¼ˆè­¬å¦‚é€šè¿‡ç½‘ç»œä¸‹è½½èµ„æºï¼‰ï¼Œéšåå°†è¯¥ä»»åŠ¡é€šè¿‡RendererHostæ¥å£ä¼ é€’ç»™Renderè¿›ç¨‹</li><li>Rendererè¿›ç¨‹çš„Rendereræ¥å£æ”¶åˆ°æ¶ˆæ¯ï¼Œç®€å•è§£é‡Šåï¼Œäº¤ç»™æ¸²æŸ“çº¿ç¨‹ï¼Œç„¶åå¼€å§‹æ¸²æŸ“</li><li>æ¸²æŸ“çº¿ç¨‹æ¥æ”¶è¯·æ±‚ï¼ŒåŠ è½½ç½‘é¡µå¹¶æ¸²æŸ“ç½‘é¡µï¼Œè¿™å…¶ä¸­å¯èƒ½éœ€è¦Browserè¿›ç¨‹è·å–èµ„æºå’Œéœ€è¦GPUè¿›ç¨‹æ¥å¸®åŠ©æ¸²æŸ“</li><li>å½“ç„¶å¯èƒ½ä¼šæœ‰JSçº¿ç¨‹æ“ä½œDOMï¼ˆè¿™æ ·å¯èƒ½ä¼šé€ æˆå›æµå¹¶é‡ç»˜ï¼‰</li><li>æœ€åRenderè¿›ç¨‹å°†ç»“æœä¼ é€’ç»™Browserè¿›ç¨‹</li><li>Browserè¿›ç¨‹æ¥æ”¶åˆ°ç»“æœå¹¶å°†ç»“æœç»˜åˆ¶å‡ºæ¥</li></ul><h2 id="æ¢³ç†æµè§ˆå™¨å†…æ ¸ä¸­çº¿ç¨‹ä¹‹é—´çš„å…³ç³»"><a href="#æ¢³ç†æµè§ˆå™¨å†…æ ¸ä¸­çº¿ç¨‹ä¹‹é—´çš„å…³ç³»" class="headerlink" title="æ¢³ç†æµè§ˆå™¨å†…æ ¸ä¸­çº¿ç¨‹ä¹‹é—´çš„å…³ç³»"></a>æ¢³ç†æµè§ˆå™¨å†…æ ¸ä¸­çº¿ç¨‹ä¹‹é—´çš„å…³ç³»</h2><h2 id="GUIæ¸²æŸ“çº¿ç¨‹ä¸JSå¼•æ“çº¿ç¨‹äº’æ–¥"><a href="#GUIæ¸²æŸ“çº¿ç¨‹ä¸JSå¼•æ“çº¿ç¨‹äº’æ–¥" class="headerlink" title="GUIæ¸²æŸ“çº¿ç¨‹ä¸JSå¼•æ“çº¿ç¨‹äº’æ–¥"></a>GUIæ¸²æŸ“çº¿ç¨‹ä¸JSå¼•æ“çº¿ç¨‹äº’æ–¥</h2><ul><li>ç”±äºJavaScriptæ˜¯å¯æ“çºµDOMçš„ï¼Œå¦‚æœåœ¨ä¿®æ”¹è¿™äº›å…ƒç´ å±æ€§åŒæ—¶æ¸²æŸ“ç•Œé¢ï¼ˆå³JSçº¿ç¨‹å’ŒUIçº¿ç¨‹åŒæ—¶è¿è¡Œï¼‰ï¼Œé‚£ä¹ˆæ¸²æŸ“çº¿ç¨‹å‰åè·å¾—çš„å…ƒç´ æ•°æ®å°±å¯èƒ½ä¸ä¸€è‡´äº†</li><li>å› æ­¤ä¸ºäº†é˜²æ­¢æ¸²æŸ“å‡ºç°ä¸å¯é¢„æœŸçš„ç»“æœï¼Œæµè§ˆå™¨è®¾ç½®GUIæ¸²æŸ“çº¿ç¨‹ä¸JSå¼•æ“ä¸ºäº’æ–¥çš„å…³ç³»ï¼Œå½“JSå¼•æ“æ‰§è¡Œæ—¶GUIçº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼ŒGUIæ›´æ–°åˆ™ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ç­‰åˆ°JSå¼•æ“çº¿ç¨‹ç©ºé—²æ—¶ç«‹å³è¢«æ‰§è¡Œ</li></ul><h2 id="JSé˜»å¡é¡µé¢åŠ è½½"><a href="#JSé˜»å¡é¡µé¢åŠ è½½" class="headerlink" title="JSé˜»å¡é¡µé¢åŠ è½½"></a>JSé˜»å¡é¡µé¢åŠ è½½</h2><ul><li>JSå¦‚æœæ‰§è¡Œæ—¶é—´è¿‡é•¿å°±ä¼šé˜»å¡é¡µé¢ã€‚</li><li>è­¬å¦‚ï¼Œå‡è®¾JSå¼•æ“æ­£åœ¨è¿›è¡Œå·¨é‡çš„è®¡ç®—ï¼Œæ­¤æ—¶å°±ç®—GUIæœ‰æ›´æ–°ï¼Œä¹Ÿä¼šè¢«ä¿å­˜åˆ°é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…JSå¼•æ“ç©ºé—²åæ‰§è¡Œã€‚ç„¶åï¼Œç”±äºå·¨é‡è®¡ç®—ï¼Œæ‰€ä»¥JSå¼•æ“å¾ˆå¯èƒ½å¾ˆä¹…å¾ˆä¹…åæ‰èƒ½ç©ºé—²ï¼Œè‡ªç„¶ä¼šæ„Ÿè§‰åˆ°å·¨å¡æ— æ¯”ã€‚</li><li>æ‰€ä»¥ï¼Œè¦å°½é‡é¿å…JSæ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œè¿™æ ·å°±ä¼šé€ æˆé¡µé¢çš„æ¸²æŸ“ä¸è¿è´¯ï¼Œå¯¼è‡´é¡µé¢æ¸²æŸ“åŠ è½½é˜»å¡çš„æ„Ÿè§‰ã€‚</li></ul><h2 id="WebWorkerï¼ŒJSçš„å¤šçº¿ç¨‹ï¼Ÿ"><a href="#WebWorkerï¼ŒJSçš„å¤šçº¿ç¨‹ï¼Ÿ" class="headerlink" title="WebWorkerï¼ŒJSçš„å¤šçº¿ç¨‹ï¼Ÿ"></a>WebWorkerï¼ŒJSçš„å¤šçº¿ç¨‹ï¼Ÿ</h2><ul><li>åˆ›å»ºWorkeræ—¶ï¼ŒJSå¼•æ“å‘æµè§ˆå™¨ç”³è¯·å¼€ä¸€ä¸ªå­çº¿ç¨‹ï¼ˆå­çº¿ç¨‹æ˜¯æµè§ˆå™¨å¼€çš„ï¼Œå®Œå…¨å—ä¸»çº¿ç¨‹æ§åˆ¶ï¼Œè€Œä¸”ä¸èƒ½æ“ä½œDOMï¼‰</li><li>JSå¼•æ“çº¿ç¨‹ä¸workerçº¿ç¨‹é—´é€šè¿‡ç‰¹å®šçš„æ–¹å¼é€šä¿¡ï¼ˆpostMessage APIï¼Œéœ€è¦é€šè¿‡åºåˆ—åŒ–å¯¹è±¡æ¥ä¸çº¿ç¨‹äº¤äº’ç‰¹å®šçš„æ•°æ®ï¼‰</li></ul><h2 id="WebWorkerä¸SharedWorker"><a href="#WebWorkerä¸SharedWorker" class="headerlink" title="WebWorkerä¸SharedWorker"></a>WebWorkerä¸SharedWorker</h2><ul><li>WebWorkeråªå±äºæŸä¸ªé¡µé¢ï¼Œä¸ä¼šå’Œå…¶ä»–é¡µé¢çš„Renderè¿›ç¨‹ï¼ˆæµè§ˆå™¨å†…æ ¸è¿›ç¨‹ï¼‰å…±äº«</li><li>æ‰€ä»¥Chromeåœ¨Renderè¿›ç¨‹ä¸­ï¼ˆæ¯ä¸€ä¸ªTabé¡µå°±æ˜¯ä¸€ä¸ªrenderè¿›ç¨‹ï¼‰åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥è¿è¡ŒWorkerä¸­çš„JavaScriptç¨‹åºã€‚</li><li>SharedWorkeræ˜¯æµè§ˆå™¨æ‰€æœ‰é¡µé¢å…±äº«çš„ï¼Œä¸èƒ½é‡‡ç”¨ä¸WorkeråŒæ ·çš„æ–¹å¼å®ç°ï¼Œå› ä¸ºå®ƒä¸éš¶å±äºæŸä¸ªRenderè¿›ç¨‹ï¼Œå¯ä»¥ä¸ºå¤šä¸ªRenderè¿›ç¨‹å…±äº«ä½¿ç”¨</li><li>æ‰€ä»¥Chromeæµè§ˆå™¨ä¸ºSharedWorkerå•ç‹¬åˆ›å»ºä¸€ä¸ªè¿›ç¨‹æ¥è¿è¡ŒJavaScriptç¨‹åºï¼Œåœ¨æµè§ˆå™¨ä¸­æ¯ä¸ªç›¸åŒçš„JavaScriptåªå­˜åœ¨ä¸€ä¸ªSharedWorkerè¿›ç¨‹ï¼Œä¸ç®¡å®ƒè¢«åˆ›å»ºå¤šå°‘æ¬¡</li></ul><h2 id="ç®€å•æ¢³ç†ä¸‹æµè§ˆå™¨æ¸²æŸ“æµç¨‹"><a href="#ç®€å•æ¢³ç†ä¸‹æµè§ˆå™¨æ¸²æŸ“æµç¨‹" class="headerlink" title="ç®€å•æ¢³ç†ä¸‹æµè§ˆå™¨æ¸²æŸ“æµç¨‹"></a>ç®€å•æ¢³ç†ä¸‹æµè§ˆå™¨æ¸²æŸ“æµç¨‹</h2><blockquote><p><em>æµè§ˆå™¨è¾“å…¥urlï¼Œæµè§ˆå™¨ä¸»è¿›ç¨‹æ¥ç®¡ï¼Œå¼€ä¸€ä¸ªä¸‹è½½çº¿ç¨‹ï¼Œç„¶åè¿›è¡Œhttpè¯·æ±‚ï¼ˆç•¥å»DNSæŸ¥è¯¢ï¼ŒIPå¯»å€ç­‰ç­‰æ“ä½œï¼‰ï¼Œç„¶åç­‰å¾…å“åº”ï¼Œè·å–å†…å®¹ï¼Œéšåå°†å†…å®¹é€šè¿‡RendererHostæ¥å£è½¬äº¤ç»™Rendererè¿›ç¨‹-æµè§ˆå™¨æ¸²æŸ“æµç¨‹å¼€å§‹</em></p></blockquote><p>æµè§ˆå™¨å™¨å†…æ ¸æ‹¿åˆ°å†…å®¹åï¼Œæ¸²æŸ“å¤§æ¦‚å¯ä»¥åˆ’åˆ†æˆä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ol><li>è§£æhtmlå»ºç«‹domæ ‘</li><li>è§£æcssæ„å»ºrenderæ ‘ï¼ˆå°†CSSä»£ç è§£ææˆæ ‘å½¢çš„æ•°æ®ç»“æ„ï¼Œç„¶åç»“åˆDOMåˆå¹¶æˆrenderæ ‘ï¼‰</li><li>å¸ƒå±€renderæ ‘ï¼ˆLayout/reflowï¼‰ï¼Œè´Ÿè´£å„å…ƒç´ å°ºå¯¸ã€ä½ç½®çš„è®¡ç®—</li><li>ç»˜åˆ¶renderæ ‘ï¼ˆpaintï¼‰ï¼Œç»˜åˆ¶é¡µé¢åƒç´ ä¿¡æ¯</li><li>æµè§ˆå™¨ä¼šå°†å„å±‚çš„ä¿¡æ¯å‘é€ç»™GPUï¼ŒGPUä¼šå°†å„å±‚åˆæˆï¼ˆcompositeï¼‰ï¼Œæ˜¾ç¤ºåœ¨å±å¹•ä¸Š</li></ol><p>æ¸²æŸ“å®Œæ¯•åå°±æ˜¯<code>load</code>äº‹ä»¶äº†ï¼Œä¹‹åå°±æ˜¯è‡ªå·±çš„JSé€»è¾‘å¤„ç†äº†ã€‚</p><p>![image-20200330102718586](/Users/wuziyan/Library/Application Support/typora-user-images/image-20200330102718586.png)</p><h3 id><a href="#" class="headerlink" title></a></h3><h2 id="loadäº‹ä»¶ä¸DOMContentLoadedäº‹ä»¶çš„å…ˆå"><a href="#loadäº‹ä»¶ä¸DOMContentLoadedäº‹ä»¶çš„å…ˆå" class="headerlink" title="loadäº‹ä»¶ä¸DOMContentLoadedäº‹ä»¶çš„å…ˆå"></a>loadäº‹ä»¶ä¸DOMContentLoadedäº‹ä»¶çš„å…ˆå</h2><ul><li>å½“ DOMContentLoaded äº‹ä»¶è§¦å‘æ—¶ï¼Œä»…å½“DOMåŠ è½½å®Œæˆï¼Œä¸åŒ…æ‹¬æ ·å¼è¡¨ï¼Œå›¾ç‰‡ã€‚<br>  (è­¬å¦‚å¦‚æœæœ‰asyncåŠ è½½çš„è„šæœ¬å°±ä¸ä¸€å®šå®Œæˆ)</li><li>å½“ onload äº‹ä»¶è§¦å‘æ—¶ï¼Œé¡µé¢ä¸Šæ‰€æœ‰çš„DOMï¼Œæ ·å¼è¡¨ï¼Œè„šæœ¬ï¼Œå›¾ç‰‡éƒ½å·²ç»åŠ è½½å®Œæˆäº†ã€‚ï¼ˆæ¸²æŸ“å®Œæ¯•äº†ï¼‰</li></ul><p>æ‰€ä»¥ï¼Œé¡ºåºæ˜¯ï¼š<code>DOMContentLoaded -&gt; load</code></p><h2 id="cssåŠ è½½æ˜¯å¦ä¼šé˜»å¡domæ ‘æ¸²æŸ“ï¼Ÿ"><a href="#cssåŠ è½½æ˜¯å¦ä¼šé˜»å¡domæ ‘æ¸²æŸ“ï¼Ÿ" class="headerlink" title="cssåŠ è½½æ˜¯å¦ä¼šé˜»å¡domæ ‘æ¸²æŸ“ï¼Ÿ"></a>cssåŠ è½½æ˜¯å¦ä¼šé˜»å¡domæ ‘æ¸²æŸ“ï¼Ÿ</h2><p><strong>cssæ˜¯ç”±å•ç‹¬çš„ä¸‹è½½çº¿ç¨‹å¼‚æ­¥ä¸‹è½½çš„ã€‚</strong></p><ul><li>cssåŠ è½½ä¸ä¼šé˜»å¡DOMæ ‘è§£æï¼ˆå¼‚æ­¥åŠ è½½æ—¶DOMç…§å¸¸æ„å»ºï¼‰</li><li>ä½†ä¼šé˜»å¡renderæ ‘æ¸²æŸ“ï¼ˆæ¸²æŸ“æ—¶éœ€ç­‰cssåŠ è½½å®Œæ¯•ï¼Œå› ä¸ºrenderæ ‘éœ€è¦cssä¿¡æ¯ï¼‰</li></ul><h2 id="æ™®é€šå›¾å±‚å’Œå¤åˆå›¾å±‚"><a href="#æ™®é€šå›¾å±‚å’Œå¤åˆå›¾å±‚" class="headerlink" title="æ™®é€šå›¾å±‚å’Œå¤åˆå›¾å±‚"></a>æ™®é€šå›¾å±‚å’Œå¤åˆå›¾å±‚</h2><ul><li>æµè§ˆå™¨æ¸²æŸ“çš„å›¾å±‚ä¸€èˆ¬åŒ…å«ä¸¤å¤§ç±»ï¼šæ™®é€šå›¾å±‚ä»¥åŠå¤åˆå›¾å±‚</li><li>æ™®é€šæ–‡æ¡£æµå†…å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå¤åˆå›¾å±‚ï¼ˆè¿™é‡Œç§°ä¸ºé»˜è®¤å¤åˆå±‚ï¼Œé‡Œé¢ä¸ç®¡æ·»åŠ å¤šå°‘å…ƒç´ ï¼Œå…¶å®éƒ½æ˜¯åœ¨åŒä¸€ä¸ªå¤åˆå›¾å±‚ä¸­ï¼‰</li><li>å…¶æ¬¡ï¼Œabsoluteå¸ƒå±€ï¼ˆfixedä¹Ÿä¸€æ ·ï¼‰ï¼Œè™½ç„¶å¯ä»¥è„±ç¦»æ™®é€šæ–‡æ¡£æµï¼Œä½†å®ƒä»ç„¶å±äºé»˜è®¤å¤åˆå±‚</li><li>GPUä¸­ï¼Œå„ä¸ªå¤åˆå›¾å±‚æ˜¯å•ç‹¬ç»˜åˆ¶çš„ï¼Œæ‰€ä»¥äº’ä¸å½±å“</li></ul><h3 id="å¦‚ä½•å˜æˆå¤åˆå›¾å±‚ï¼ˆç¡¬ä»¶åŠ é€Ÿï¼‰"><a href="#å¦‚ä½•å˜æˆå¤åˆå›¾å±‚ï¼ˆç¡¬ä»¶åŠ é€Ÿï¼‰" class="headerlink" title="å¦‚ä½•å˜æˆå¤åˆå›¾å±‚ï¼ˆç¡¬ä»¶åŠ é€Ÿï¼‰"></a>å¦‚ä½•å˜æˆå¤åˆå›¾å±‚ï¼ˆç¡¬ä»¶åŠ é€Ÿï¼‰</h3><p>å°†è¯¥å…ƒç´ å˜æˆä¸€ä¸ªå¤åˆå›¾å±‚ï¼Œå°±æ˜¯ä¼ è¯´ä¸­çš„ç¡¬ä»¶åŠ é€ŸæŠ€æœ¯</p><h3 id="absoluteå’Œç¡¬ä»¶åŠ é€Ÿçš„åŒºåˆ«"><a href="#absoluteå’Œç¡¬ä»¶åŠ é€Ÿçš„åŒºåˆ«" class="headerlink" title="absoluteå’Œç¡¬ä»¶åŠ é€Ÿçš„åŒºåˆ«"></a>absoluteå’Œç¡¬ä»¶åŠ é€Ÿçš„åŒºåˆ«</h3><p>å¯ä»¥çœ‹åˆ°ï¼Œabsoluteè™½ç„¶å¯ä»¥è„±ç¦»æ™®é€šæ–‡æ¡£æµï¼Œä½†æ˜¯æ— æ³•è„±ç¦»é»˜è®¤å¤åˆå±‚ã€‚<br>æ‰€ä»¥ï¼Œå°±ç®—absoluteä¸­ä¿¡æ¯æ”¹å˜æ—¶ä¸ä¼šæ”¹å˜æ™®é€šæ–‡æ¡£æµä¸­renderæ ‘ï¼Œä½†æ˜¯ï¼Œæµè§ˆå™¨æœ€ç»ˆç»˜åˆ¶æ—¶ï¼Œæ˜¯æ•´ä¸ªå¤åˆå±‚ç»˜åˆ¶çš„ï¼Œæ‰€ä»¥absoluteä¸­ä¿¡æ¯çš„æ”¹å˜ï¼Œä»ç„¶ä¼šå½±å“æ•´ä¸ªå¤åˆå±‚çš„ç»˜åˆ¶ã€‚</p><p>ï¼ˆæµè§ˆå™¨ä¼šé‡ç»˜å®ƒï¼Œå¦‚æœå¤åˆå±‚ä¸­å†…å®¹å¤šï¼Œabsoluteå¸¦æ¥çš„ç»˜åˆ¶ä¿¡æ¯å˜åŒ–è¿‡å¤§ï¼Œèµ„æºæ¶ˆè€—æ˜¯éå¸¸ä¸¥é‡çš„ï¼‰</p><p>è€Œç¡¬ä»¶åŠ é€Ÿç›´æ¥å°±æ˜¯åœ¨å¦ä¸€ä¸ªå¤åˆå±‚äº†ï¼ˆå¦èµ·ç‚‰ç¶ï¼‰ï¼Œæ‰€ä»¥å®ƒçš„ä¿¡æ¯æ”¹å˜ä¸ä¼šå½±å“é»˜è®¤å¤åˆå±‚ï¼ˆå½“ç„¶äº†ï¼Œå†…éƒ¨è‚¯å®šä¼šå½±å“å±äºè‡ªå·±çš„å¤åˆå±‚ï¼‰ï¼Œä»…ä»…æ˜¯å¼•å‘æœ€åçš„åˆæˆï¼ˆè¾“å‡ºè§†å›¾ï¼‰</p><h3 id="å¤åˆå›¾å±‚çš„ä½œç”¨ï¼Ÿ"><a href="#å¤åˆå›¾å±‚çš„ä½œç”¨ï¼Ÿ" class="headerlink" title="å¤åˆå›¾å±‚çš„ä½œç”¨ï¼Ÿ"></a>å¤åˆå›¾å±‚çš„ä½œç”¨ï¼Ÿ</h3><p>ä¸€èˆ¬ä¸€ä¸ªå…ƒç´ å¼€å¯ç¡¬ä»¶åŠ é€Ÿåä¼šå˜æˆå¤åˆå›¾å±‚ï¼Œå¯ä»¥ç‹¬ç«‹äºæ™®é€šæ–‡æ¡£æµä¸­ï¼Œæ”¹åŠ¨åå¯ä»¥é¿å…æ•´ä¸ªé¡µé¢é‡ç»˜ï¼Œæå‡æ€§èƒ½</p><p>ä½†æ˜¯å°½é‡ä¸è¦å¤§é‡ä½¿ç”¨å¤åˆå›¾å±‚ï¼Œå¦åˆ™ç”±äºèµ„æºæ¶ˆè€—è¿‡åº¦ï¼Œé¡µé¢åè€Œä¼šå˜çš„æ›´å¡</p><h2 id="ä»Event-Loopè°ˆJSçš„è¿è¡Œæœºåˆ¶"><a href="#ä»Event-Loopè°ˆJSçš„è¿è¡Œæœºåˆ¶" class="headerlink" title="ä»Event Loopè°ˆJSçš„è¿è¡Œæœºåˆ¶"></a>ä»Event Loopè°ˆJSçš„è¿è¡Œæœºåˆ¶</h2><ul><li>JSåˆ†ä¸ºåŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡</li><li>åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ª<code>æ‰§è¡Œæ ˆ</code></li><li>ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œ<strong>äº‹ä»¶è§¦å‘çº¿ç¨‹</strong>ç®¡ç†ç€ä¸€ä¸ª<code>ä»»åŠ¡é˜Ÿåˆ—</code>ï¼Œåªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æœï¼Œå°±åœ¨<code>ä»»åŠ¡é˜Ÿåˆ—</code>ä¹‹ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ã€‚</li><li>ä¸€æ—¦<code>æ‰§è¡Œæ ˆ</code>ä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼ˆæ­¤æ—¶JSå¼•æ“ç©ºé—²ï¼‰ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–<code>ä»»åŠ¡é˜Ÿåˆ—</code>ï¼Œå°†å¯è¿è¡Œçš„å¼‚æ­¥ä»»åŠ¡æ·»åŠ åˆ°å¯æ‰§è¡Œæ ˆä¸­ï¼Œå¼€å§‹æ‰§è¡Œã€‚</li></ul><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200330121739552.png" alt="image-20200330121739552" style="zoom:50%;"><h2 id="äº‹ä»¶å¾ªç¯æœºåˆ¶è¿›ä¸€æ­¥è¡¥å……"><a href="#äº‹ä»¶å¾ªç¯æœºåˆ¶è¿›ä¸€æ­¥è¡¥å……" class="headerlink" title="äº‹ä»¶å¾ªç¯æœºåˆ¶è¿›ä¸€æ­¥è¡¥å……"></a>äº‹ä»¶å¾ªç¯æœºåˆ¶è¿›ä¸€æ­¥è¡¥å……</h2><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200330121911081.png" alt="image-20200330121911081" style="zoom:50%;"><p>ä¸Šå›¾å¤§è‡´æè¿°å°±æ˜¯ï¼š</p><ul><li>ä¸»çº¿ç¨‹è¿è¡Œæ—¶ä¼šäº§ç”Ÿæ‰§è¡Œæ ˆï¼Œæ ˆä¸­çš„ä»£ç è°ƒç”¨æŸäº›apiæ—¶ï¼Œå®ƒä»¬ä¼šåœ¨äº‹ä»¶é˜Ÿåˆ—ä¸­æ·»åŠ å„ç§äº‹ä»¶ï¼ˆå½“æ»¡è¶³è§¦å‘æ¡ä»¶åï¼Œå¦‚ajaxè¯·æ±‚å®Œæ¯•ï¼‰</li><li>è€Œæ ˆä¸­çš„ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå°±ä¼šè¯»å–äº‹ä»¶é˜Ÿåˆ—ä¸­çš„äº‹ä»¶ï¼Œå»æ‰§è¡Œé‚£äº›å›è°ƒ</li><li>å¦‚æ­¤å¾ªç¯</li><li>æ³¨æ„ï¼Œæ€»æ˜¯è¦ç­‰å¾…æ ˆä¸­çš„ä»£ç æ‰§è¡Œå®Œæ¯•åæ‰ä¼šå»è¯»å–äº‹ä»¶é˜Ÿåˆ—ä¸­çš„äº‹ä»¶</li></ul><h2 id="å•ç‹¬è¯´è¯´å®šæ—¶å™¨"><a href="#å•ç‹¬è¯´è¯´å®šæ—¶å™¨" class="headerlink" title="å•ç‹¬è¯´è¯´å®šæ—¶å™¨"></a>å•ç‹¬è¯´è¯´å®šæ—¶å™¨</h2><ul><li>ä¸Šè¿°äº‹ä»¶å¾ªç¯æœºåˆ¶çš„æ ¸å¿ƒæ˜¯ï¼šJSå¼•æ“çº¿ç¨‹å’Œäº‹ä»¶è§¦å‘çº¿ç¨‹</li><li><strong>å½“ä½¿ç”¨<code>setTimeout</code>æˆ–<code>setInterval</code>æ—¶</strong>ï¼Œéœ€è¦å®šæ—¶å™¨çº¿ç¨‹è®¡æ—¶ï¼Œè®¡æ—¶å®Œæˆåå°±ä¼šå°†ç‰¹å®šçš„äº‹ä»¶æ¨å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­</li></ul><h2 id="setTimeoutè€Œä¸æ˜¯setInterval"><a href="#setTimeoutè€Œä¸æ˜¯setInterval" class="headerlink" title="setTimeoutè€Œä¸æ˜¯setInterval"></a>setTimeoutè€Œä¸æ˜¯setInterval</h2><ul><li><p>ç”¨setTimeoutæ¨¡æ‹Ÿå®šæœŸè®¡æ—¶å’Œç›´æ¥ç”¨setIntervalæ˜¯æœ‰åŒºåˆ«çš„</p></li><li><p>å› ä¸ºæ¯æ¬¡setTimeoutè®¡æ—¶åˆ°åå°±ä¼šå»æ‰§è¡Œï¼Œç„¶åæ‰§è¡Œä¸€æ®µæ—¶é—´åæ‰ä¼šç»§ç»­setTimeoutï¼Œä¸­é—´å°±å¤šäº†è¯¯å·®ï¼ˆè¯¯å·®å¤šå°‘ä¸ä»£ç æ‰§è¡Œæ—¶é—´æœ‰å…³ï¼‰</p><p>  è€ŒsetIntervalåˆ™æ˜¯æ¯æ¬¡éƒ½ç²¾ç¡®çš„éš”ä¸€æ®µæ—¶é—´æ¨å…¥ä¸€ä¸ªäº‹ä»¶<br>  ï¼ˆä½†æ˜¯ï¼Œäº‹ä»¶çš„å®é™…æ‰§è¡Œæ—¶é—´ä¸ä¸€å®šå°±å‡†ç¡®ï¼Œè¿˜æœ‰å¯èƒ½æ˜¯è¿™ä¸ªäº‹ä»¶è¿˜æ²¡æ‰§è¡Œå®Œæ¯•ï¼Œä¸‹ä¸€ä¸ªäº‹ä»¶å°±æ¥äº†ï¼‰</p><p>  è€Œä¸”setIntervalæœ‰ä¸€äº›æ¯”è¾ƒè‡´å‘½çš„é—®é¢˜å°±æ˜¯ï¼š</p><ul><li><p>ç´¯è®¡æ•ˆåº”ï¼ˆä¸Šé¢æåˆ°çš„ï¼‰ï¼Œå¦‚æœsetIntervalä»£ç åœ¨ï¼ˆsetIntervalï¼‰å†æ¬¡æ·»åŠ åˆ°é˜Ÿåˆ—ä¹‹å‰è¿˜æ²¡æœ‰å®Œæˆæ‰§è¡Œï¼Œå°±ä¼šå¯¼è‡´å®šæ—¶å™¨ä»£ç è¿ç»­è¿è¡Œå¥½å‡ æ¬¡ï¼Œè€Œä¹‹é—´æ²¡æœ‰é—´éš”ã€‚å°±ç®—æ­£å¸¸é—´éš”æ‰§è¡Œï¼Œå¤šä¸ªsetIntervalçš„ä»£ç æ‰§è¡Œæ—¶é—´å¯èƒ½ä¼šæ¯”é¢„æœŸå°ï¼ˆå› ä¸ºä»£ç æ‰§è¡Œéœ€è¦ä¸€å®šæ—¶é—´ï¼‰</p></li><li><p>è­¬å¦‚åƒiOSçš„webview,æˆ–è€…Safariç­‰æµè§ˆå™¨ä¸­éƒ½æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œ<strong>åœ¨æ»šåŠ¨çš„æ—¶å€™æ˜¯ä¸æ‰§è¡ŒJSçš„</strong>ï¼Œå¦‚æœä½¿ç”¨äº†setIntervalï¼Œä¼šå‘ç°åœ¨æ»šåŠ¨ç»“æŸåä¼šæ‰§è¡Œå¤šæ¬¡ç”±äºæ»šåŠ¨ä¸æ‰§è¡ŒJSç§¯æ”’å›è°ƒï¼Œå¦‚æœå›è°ƒæ‰§è¡Œæ—¶é—´è¿‡é•¿,å°±ä¼šéå¸¸å®¹å™¨é€ æˆå¡é¡¿é—®é¢˜å’Œä¸€äº›ä¸å¯çŸ¥çš„é”™è¯¯ï¼ˆè¿™ä¸€å—åç»­æœ‰è¡¥å……ï¼ŒsetIntervalè‡ªå¸¦çš„ä¼˜åŒ–ï¼Œä¸ä¼šé‡å¤æ·»åŠ å›è°ƒï¼‰</p></li><li><p>è€Œä¸”æŠŠæµè§ˆå™¨æœ€å°åŒ–æ˜¾ç¤ºç­‰æ“ä½œæ—¶ï¼ŒsetIntervalå¹¶ä¸æ˜¯ä¸æ‰§è¡Œç¨‹åºï¼Œå®ƒä¼šæŠŠsetIntervalçš„å›è°ƒå‡½æ•°æ”¾åœ¨é˜Ÿåˆ—ä¸­ï¼Œç­‰æµè§ˆå™¨çª—å£å†æ¬¡æ‰“å¼€æ—¶ï¼Œä¸€ç¬é—´å…¨éƒ¨æ‰§è¡Œæ—¶</p><p>æ‰€ä»¥ï¼Œé‰´äºè¿™ä¹ˆå¤šä½†é—®é¢˜ï¼Œç›®å‰ä¸€èˆ¬è®¤ä¸ºçš„æœ€ä½³æ–¹æ¡ˆæ˜¯ï¼šç”¨setTimeoutæ¨¡æ‹ŸsetIntervalï¼Œæˆ–è€…ç‰¹æ®Šåœºåˆç›´æ¥ç”¨requestAnimationFrame</p></li></ul></li></ul><h2 id="äº‹ä»¶å¾ªç¯è¿›é˜¶ï¼šmacrotaskä¸microtask"><a href="#äº‹ä»¶å¾ªç¯è¿›é˜¶ï¼šmacrotaskä¸microtask" class="headerlink" title="äº‹ä»¶å¾ªç¯è¿›é˜¶ï¼šmacrotaskä¸microtask"></a>äº‹ä»¶å¾ªç¯è¿›é˜¶ï¼šmacrotaskä¸microtask</h2><ul><li>Promiseé‡Œæœ‰äº†ä¸€ä¸ªä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼š<code>microtask</code></li><li>JSä¸­åˆ†ä¸ºä¸¤ç§ä»»åŠ¡ç±»å‹ï¼š<strong><code>macrotask</code>å’Œ<code>microtask</code></strong>ï¼Œåœ¨ECMAScriptä¸­ï¼Œmicrotaskç§°ä¸º<code>jobs</code>ï¼Œmacrotaskå¯ç§°ä¸º<code>task</code></li></ul><p>åŒºåˆ«ï¼š</p><ul><li>macrotaskï¼ˆåˆç§°ä¹‹ä¸ºå®ä»»åŠ¡ï¼‰ï¼Œå¯ä»¥ç†è§£æ˜¯æ¯æ¬¡æ‰§è¡Œæ ˆæ‰§è¡Œçš„ä»£ç å°±æ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼ˆåŒ…æ‹¬æ¯æ¬¡ä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ä¸€ä¸ªäº‹ä»¶å›è°ƒå¹¶æ”¾åˆ°æ‰§è¡Œæ ˆä¸­æ‰§è¡Œï¼‰</li><li>æ¯ä¸€ä¸ªtaskä¼šä»å¤´åˆ°å°¾å°†è¿™ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œä¸ä¼šæ‰§è¡Œå…¶å®ƒ</li><li>æµè§ˆå™¨ä¸ºäº†èƒ½å¤Ÿä½¿å¾—JSå†…éƒ¨taskä¸DOMä»»åŠ¡èƒ½å¤Ÿæœ‰åºçš„æ‰§è¡Œï¼Œä¼šåœ¨ä¸€ä¸ªtaskæ‰§è¡Œç»“æŸåï¼Œåœ¨ä¸‹ä¸€ä¸ª task æ‰§è¡Œå¼€å§‹å‰ï¼Œå¯¹é¡µé¢è¿›è¡Œé‡æ–°æ¸²æŸ“<br>  ï¼ˆ<code>task-&gt;æ¸²æŸ“-&gt;task-&gt;...</code>ï¼‰</li><li>microtaskï¼ˆåˆç§°ä¸ºå¾®ä»»åŠ¡ï¼‰ï¼Œå¯ä»¥ç†è§£æ˜¯åœ¨å½“å‰ task æ‰§è¡Œç»“æŸåç«‹å³æ‰§è¡Œçš„ä»»åŠ¡</li><li>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å½“å‰taskä»»åŠ¡åï¼Œä¸‹ä¸€ä¸ªtaskä¹‹å‰ï¼Œåœ¨æ¸²æŸ“ä¹‹å‰</li><li>æ‰€ä»¥å®ƒçš„å“åº”é€Ÿåº¦ç›¸æ¯”setTimeoutï¼ˆsetTimeoutæ˜¯taskï¼‰ä¼šæ›´å¿«ï¼Œå› ä¸ºæ— éœ€ç­‰æ¸²æŸ“</li><li>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æŸä¸€ä¸ªmacrotaskæ‰§è¡Œå®Œåï¼Œå°±ä¼šå°†åœ¨å®ƒæ‰§è¡ŒæœŸé—´äº§ç”Ÿçš„æ‰€æœ‰microtaskéƒ½æ‰§è¡Œå®Œæ¯•ï¼ˆåœ¨æ¸²æŸ“å‰ï¼‰</li></ul><p>åˆ†åˆ«ä»€ä¹ˆæ ·çš„åœºæ™¯ä¼šå½¢æˆmacrotaskå’Œmicrotaskå‘¢ï¼Ÿ</p><ul><li>macrotaskï¼šä¸»ä»£ç å—ï¼ŒsetTimeoutï¼ŒsetIntervalç­‰ï¼ˆå¯ä»¥çœ‹åˆ°ï¼Œäº‹ä»¶é˜Ÿåˆ—ä¸­çš„æ¯ä¸€ä¸ªäº‹ä»¶éƒ½æ˜¯ä¸€ä¸ªmacrotaskï¼‰</li><li>microtaskï¼šPromiseï¼Œprocess.nextTickç­‰</li></ul><p>å†æ ¹æ®çº¿ç¨‹æ¥ç†è§£ä¸‹ï¼š</p><ul><li>macrotaskä¸­çš„äº‹ä»¶éƒ½æ˜¯æ”¾åœ¨ä¸€ä¸ªäº‹ä»¶é˜Ÿåˆ—ä¸­çš„ï¼Œè€Œè¿™ä¸ªé˜Ÿåˆ—ç”±<strong>äº‹ä»¶è§¦å‘çº¿ç¨‹</strong>ç»´æŠ¤</li><li>microtaskä¸­çš„æ‰€æœ‰å¾®ä»»åŠ¡éƒ½æ˜¯æ·»åŠ åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆJob Queuesï¼‰ä¸­ï¼Œç­‰å¾…å½“å‰macrotaskæ‰§è¡Œå®Œæ¯•åæ‰§è¡Œï¼Œè€Œè¿™ä¸ªé˜Ÿåˆ—ç”±<strong>JSå¼•æ“çº¿ç¨‹ç»´æŠ¤</strong><br>  ï¼ˆè¿™ç‚¹ç”±è‡ªå·±ç†è§£+æ¨æµ‹å¾—å‡ºï¼Œå› ä¸ºå®ƒæ˜¯åœ¨ä¸»çº¿ç¨‹ä¸‹æ— ç¼æ‰§è¡Œçš„ï¼‰</li></ul><p>æ‰€ä»¥ï¼Œæ€»ç»“ä¸‹è¿è¡Œæœºåˆ¶ï¼š</p><ul><li>æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼ˆæ ˆä¸­æ²¡æœ‰å°±ä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ï¼‰</li><li>æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°å¾®ä»»åŠ¡ï¼Œå°±å°†å®ƒæ·»åŠ åˆ°å¾®ä»»åŠ¡çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­</li><li>å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œç«‹å³æ‰§è¡Œå½“å‰å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰å¾®ä»»åŠ¡ï¼ˆä¾æ¬¡æ‰§è¡Œï¼‰</li><li>å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ£€æŸ¥æ¸²æŸ“ï¼Œç„¶åGUIçº¿ç¨‹æ¥ç®¡æ¸²æŸ“</li><li>æ¸²æŸ“å®Œæ¯•åï¼ŒJSçº¿ç¨‹ç»§ç»­æ¥ç®¡ï¼Œå¼€å§‹ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼ˆä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ï¼‰</li></ul><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200330122837010.png" alt="image-20200330122837010" style="zoom:50%;">]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é˜²æŠ–&amp;èŠ‚æµ</title>
      <link href="/2020/03/28/%E9%98%B2%E6%8A%96-%E8%8A%82%E6%B5%81/"/>
      <url>/2020/03/28/%E9%98%B2%E6%8A%96-%E8%8A%82%E6%B5%81/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.cnblogs.com/Antwan-Dmy/p/10714445.html" target="_blank" rel="noopener">https://www.cnblogs.com/Antwan-Dmy/p/10714445.html</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn, ms</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    clearTimeout(timer);</span><br><span class="line">    timer = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    &#125;, ms);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, ms</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> flag = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!flag) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    flag = <span class="literal">false</span>;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">      flag = <span class="literal">true</span>;</span><br><span class="line">    &#125;, ms);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> é¢è¯•å‡†å¤‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>module</title>
      <link href="/2020/03/28/23-24-module/"/>
      <url>/2020/03/28/23-24-module/</url>
      
        <content type="html"><![CDATA[<h1 id="Module-çš„è¯­æ³•"><a href="#Module-çš„è¯­æ³•" class="headerlink" title="Module çš„è¯­æ³•"></a>Module çš„è¯­æ³•</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><ul><li>CommonJS æ¨¡å—å°±æ˜¯å¯¹è±¡ï¼Œè¾“å…¥æ—¶å¿…é¡»æŸ¥æ‰¾å¯¹è±¡å±æ€§</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// CommonJSæ¨¡å—</span></span><br><span class="line"><span class="keyword">let</span> &#123; stat, exists, readFile &#125; = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">let</span> _fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">let</span> stat = _fs.stat;</span><br><span class="line"><span class="keyword">let</span> exists = _fs.exists;</span><br><span class="line"><span class="keyword">let</span> readfile = _fs.readfile;</span><br></pre></td></tr></table></figure><blockquote><p>æ•´ä½“åŠ è½½<code>fs</code>æ¨¡å—ï¼ˆå³åŠ è½½<code>fs</code>çš„æ‰€æœ‰æ–¹æ³•ï¼‰ï¼Œç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼ˆ<code>_fs</code>ï¼‰ï¼Œç„¶åå†ä»è¿™ä¸ªå¯¹è±¡ä¸Šé¢è¯»å– 3 ä¸ªæ–¹æ³•ã€‚è¿™ç§åŠ è½½ç§°ä¸ºâ€œè¿è¡Œæ—¶åŠ è½½â€ï¼Œå› ä¸ºåªæœ‰è¿è¡Œæ—¶æ‰èƒ½å¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Œå¯¼è‡´å®Œå…¨æ²¡åŠæ³•åœ¨ç¼–è¯‘æ—¶åšâ€œé™æ€ä¼˜åŒ–â€ã€‚</p></blockquote><ul><li>ES6 æ¨¡å—ä¸æ˜¯å¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡<code>export</code>å‘½ä»¤æ˜¾å¼æŒ‡å®šè¾“å‡ºçš„ä»£ç ï¼Œå†é€šè¿‡<code>import</code>å‘½ä»¤è¾“å…¥</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES6æ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> &#123; stat, exists, readFile &#125; <span class="keyword">from</span> <span class="string">'fs'</span>;</span><br></pre></td></tr></table></figure><ul><li>ä¸Šé¢ä»£ç çš„å®è´¨æ˜¯ä»<code>fs</code>æ¨¡å—åŠ è½½ 3 ä¸ªæ–¹æ³•ï¼Œå…¶ä»–æ–¹æ³•ä¸åŠ è½½</li><li>è¿™ç§åŠ è½½ç§°ä¸ºâ€œç¼–è¯‘æ—¶åŠ è½½â€æˆ–è€…é™æ€åŠ è½½ï¼Œå³ ES6 å¯ä»¥åœ¨ç¼–è¯‘æ—¶å°±å®Œæˆæ¨¡å—åŠ è½½ï¼Œæ•ˆç‡è¦æ¯” CommonJS æ¨¡å—çš„åŠ è½½æ–¹å¼é«˜</li><li>è¿™ä¹Ÿå¯¼è‡´äº†æ²¡æ³•å¼•ç”¨ ES6 æ¨¡å—æœ¬èº«ï¼Œå› ä¸ºå®ƒä¸æ˜¯å¯¹è±¡ã€‚</li></ul><h2 id="ä¸¥æ ¼æ¨¡å¼"><a href="#ä¸¥æ ¼æ¨¡å¼" class="headerlink" title="ä¸¥æ ¼æ¨¡å¼"></a>ä¸¥æ ¼æ¨¡å¼</h2><ul><li>ES6 çš„æ¨¡å—è‡ªåŠ¨é‡‡ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œä¸ç®¡ä½ æœ‰æ²¡æœ‰åœ¨æ¨¡å—å¤´éƒ¨åŠ ä¸Š<code>&quot;use strict&quot;;</code></li><li>é™åˆ¶<ul><li>å˜é‡å¿…é¡»å£°æ˜åå†ä½¿ç”¨</li><li>å‡½æ•°çš„å‚æ•°ä¸èƒ½æœ‰åŒåå±æ€§ï¼Œå¦åˆ™æŠ¥é”™</li><li>ä¸èƒ½ä½¿ç”¨<code>with</code>è¯­å¥</li><li>ä¸èƒ½å¯¹åªè¯»å±æ€§èµ‹å€¼ï¼Œå¦åˆ™æŠ¥é”™</li><li>ä¸èƒ½ä½¿ç”¨å‰ç¼€ 0 è¡¨ç¤ºå…«è¿›åˆ¶æ•°ï¼Œå¦åˆ™æŠ¥é”™</li><li>ä¸èƒ½åˆ é™¤ä¸å¯åˆ é™¤çš„å±æ€§ï¼Œå¦åˆ™æŠ¥é”™</li><li>ä¸èƒ½åˆ é™¤å˜é‡<code>delete prop</code>ï¼Œä¼šæŠ¥é”™ï¼Œåªèƒ½åˆ é™¤å±æ€§<code>delete global[prop]</code></li><li><code>eval</code>ä¸ä¼šåœ¨å®ƒçš„å¤–å±‚ä½œç”¨åŸŸå¼•å…¥å˜é‡</li><li><code>eval</code>å’Œ<code>arguments</code>ä¸èƒ½è¢«é‡æ–°èµ‹å€¼</li><li><code>arguments</code>ä¸ä¼šè‡ªåŠ¨åæ˜ å‡½æ•°å‚æ•°çš„å˜åŒ–</li><li>ä¸èƒ½ä½¿ç”¨<code>arguments.callee</code></li><li>ä¸èƒ½ä½¿ç”¨<code>arguments.caller</code></li><li>ç¦æ­¢<code>this</code>æŒ‡å‘å…¨å±€å¯¹è±¡</li><li>ä¸èƒ½ä½¿ç”¨<code>fn.caller</code>å’Œ<code>fn.arguments</code>è·å–å‡½æ•°è°ƒç”¨çš„å †æ ˆ</li><li>å¢åŠ äº†ä¿ç•™å­—ï¼ˆæ¯”å¦‚<code>protected</code>ã€<code>static</code>å’Œ<code>interface</code>ï¼‰</li></ul></li><li>ES6 æ¨¡å—ä¹‹ä¸­ï¼Œé¡¶å±‚çš„<code>this</code>æŒ‡å‘<code>undefined</code>ï¼Œå³ä¸åº”è¯¥åœ¨é¡¶å±‚ä»£ç ä½¿ç”¨<code>this</code></li></ul><h2 id="export-å‘½ä»¤"><a href="#export-å‘½ä»¤" class="headerlink" title="export å‘½ä»¤"></a>export å‘½ä»¤</h2><ul><li>ä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶å†…éƒ¨çš„æ‰€æœ‰å˜é‡ï¼Œå¤–éƒ¨æ— æ³•è·å–</li><li>å¦‚æœå¸Œæœ›å¤–éƒ¨èƒ½å¤Ÿè¯»å–æ¨¡å—å†…éƒ¨çš„æŸä¸ªå˜é‡ï¼Œå°±å¿…é¡»ä½¿ç”¨<code>export</code>å…³é”®å­—è¾“å‡ºè¯¥å˜é‡</li><li>é€šå¸¸æƒ…å†µä¸‹ï¼Œ<code>export</code>è¾“å‡ºçš„å˜é‡å°±æ˜¯æœ¬æ¥çš„åå­—ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨<code>as</code>å…³é”®å­—é‡å‘½åã€‚é‡å‘½ååï¼Œå¯ä»¥ç”¨ä¸åŒçš„åå­—è¾“å‡ºä¸¤æ¬¡</li><li><code>export</code>è¯­å¥è¾“å‡ºçš„æ¥å£ï¼Œä¸å…¶å¯¹åº”çš„å€¼æ˜¯åŠ¨æ€ç»‘å®šå…³ç³»ï¼Œå³é€šè¿‡è¯¥æ¥å£ï¼Œå¯ä»¥å–åˆ°æ¨¡å—å†…éƒ¨å®æ—¶çš„å€¼</li></ul><blockquote><p><code>export</code>å‘½ä»¤å¯ä»¥å‡ºç°åœ¨æ¨¡å—çš„ä»»ä½•ä½ç½®ï¼Œåªè¦å¤„äºæ¨¡å—é¡¶å±‚å°±å¯ä»¥ã€‚å¦‚æœå¤„äºå—çº§ä½œç”¨åŸŸå†…ï¼Œå°±ä¼šæŠ¥é”™ï¼Œä¸‹ä¸€èŠ‚çš„<code>import</code>å‘½ä»¤ä¹Ÿæ˜¯å¦‚æ­¤ã€‚è¿™æ˜¯å› ä¸ºå¤„äºæ¡ä»¶ä»£ç å—ä¹‹ä¸­ï¼Œå°±æ²¡æ³•åšé™æ€ä¼˜åŒ–äº†ï¼Œè¿èƒŒäº† ES6 æ¨¡å—çš„è®¾è®¡åˆè¡·</p></blockquote><h2 id="import-å‘½ä»¤"><a href="#import-å‘½ä»¤" class="headerlink" title="import å‘½ä»¤"></a>import å‘½ä»¤</h2><ul><li><code>import</code>å‘½ä»¤è¦ä½¿ç”¨<code>as</code>å…³é”®å­—ï¼Œå°†è¾“å…¥çš„å˜é‡é‡å‘½å</li><li><code>import</code>å‘½ä»¤è¾“å…¥çš„å˜é‡éƒ½æ˜¯åªè¯»çš„ï¼Œå› ä¸ºå®ƒçš„æœ¬è´¨æ˜¯è¾“å…¥æ¥å£ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å…è®¸åœ¨åŠ è½½æ¨¡å—çš„è„šæœ¬é‡Œé¢ï¼Œæ”¹å†™æ¥å£</li><li>å¦‚æœæ˜¯å¯¹è±¡ï¼Œå±æ€§å¯ä¿®æ”¹ï¼Œä½†ä¸å»ºè®®è¿™æ ·åš</li><li><code>import</code>å‘½ä»¤å…·æœ‰æå‡æ•ˆæœï¼Œä¼šæå‡åˆ°æ•´ä¸ªæ¨¡å—çš„å¤´éƒ¨ï¼Œé¦–å…ˆæ‰§è¡Œ<ul><li>æœ¬è´¨æ˜¯ï¼Œ<code>import</code>å‘½ä»¤æ˜¯ç¼–è¯‘é˜¶æ®µæ‰§è¡Œçš„ï¼Œåœ¨ä»£ç è¿è¡Œä¹‹å‰</li></ul></li><li>ç”±äº<code>import</code>æ˜¯é™æ€æ‰§è¡Œï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨è¡¨è¾¾å¼å’Œå˜é‡ï¼Œè¿™äº›åªæœ‰åœ¨è¿è¡Œæ—¶æ‰èƒ½å¾—åˆ°ç»“æœçš„è¯­æ³•ç»“æ„</li></ul><h2 id="æ¨¡å—çš„æ•´ä½“åŠ è½½"><a href="#æ¨¡å—çš„æ•´ä½“åŠ è½½" class="headerlink" title="æ¨¡å—çš„æ•´ä½“åŠ è½½"></a>æ¨¡å—çš„æ•´ä½“åŠ è½½</h2><ul><li><code>import * (as xxx) from &#39;...&#39;</code></li></ul><h2 id="export-default-å‘½ä»¤"><a href="#export-default-å‘½ä»¤" class="headerlink" title="export default å‘½ä»¤"></a>export default å‘½ä»¤</h2><ul><li><code>export default xxx</code> ä¸éœ€è¦å¤§æ‹¬å·ï¼Œ<code>import xxx from &#39;...&#39;</code> ä¹Ÿä¸éœ€è¦å¤§æ‹¬å·</li></ul><blockquote><p><code>export default</code>å‘½ä»¤ç”¨äºæŒ‡å®šæ¨¡å—çš„é»˜è®¤è¾“å‡ºã€‚æ˜¾ç„¶ï¼Œä¸€ä¸ªæ¨¡å—åªèƒ½æœ‰ä¸€ä¸ªé»˜è®¤è¾“å‡ºï¼Œå› æ­¤<code>export default</code>å‘½ä»¤åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚æ‰€ä»¥ï¼Œimportå‘½ä»¤åé¢æ‰ä¸ç”¨åŠ å¤§æ‹¬å·ï¼Œå› ä¸ºåªå¯èƒ½å”¯ä¸€å¯¹åº”<code>export default</code>å‘½ä»¤</p></blockquote><ul><li>æœ¬è´¨ä¸Šï¼Œ<code>export default</code>å°±æ˜¯è¾“å‡ºä¸€ä¸ªå«åš<code>default</code>çš„å˜é‡æˆ–æ–¹æ³•ï¼Œç„¶åç³»ç»Ÿå…è®¸ä½ ä¸ºå®ƒå–ä»»æ„åå­—</li></ul><h2 id="export-ä¸-import-çš„å¤åˆå†™æ³•"><a href="#export-ä¸-import-çš„å¤åˆå†™æ³•" class="headerlink" title="export ä¸ import çš„å¤åˆå†™æ³•"></a>export ä¸ import çš„å¤åˆå†™æ³•</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123; foo, bar &#125; <span class="keyword">from</span> <span class="string">'my_module'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯ä»¥ç®€å•ç†è§£ä¸º</span></span><br><span class="line"><span class="keyword">import</span> &#123; foo, bar &#125; <span class="keyword">from</span> <span class="string">'my_module'</span>;</span><br><span class="line"><span class="keyword">export</span> &#123; foo, bar &#125;;</span><br></pre></td></tr></table></figure><ul><li>å†™æˆä¸€è¡Œä»¥åï¼Œ<code>foo</code>å’Œ<code>bar</code>å®é™…ä¸Šå¹¶æ²¡æœ‰è¢«å¯¼å…¥å½“å‰æ¨¡å—ï¼Œåªæ˜¯ç›¸å½“äºå¯¹å¤–è½¬å‘äº†è¿™ä¸¤ä¸ªæ¥å£ï¼Œå½“å‰æ¨¡å—ä¸èƒ½ç›´æ¥ä½¿ç”¨<code>foo</code>å’Œ<code>bar</code></li></ul><h2 id="import"><a href="#import" class="headerlink" title="import()"></a>import()</h2><ul><li><code>import</code>å’Œ<code>export</code>å‘½ä»¤åªèƒ½åœ¨æ¨¡å—çš„é¡¶å±‚ï¼Œä¸èƒ½åœ¨ä»£ç å—ä¹‹ä¸­</li><li>æœ‰åˆ©äºç¼–è¯‘å™¨æé«˜æ•ˆç‡ï¼Œä½†ä¹Ÿå¯¼è‡´æ— æ³•åœ¨è¿è¡Œæ—¶åŠ è½½æ¨¡å—</li><li>ES2020 ææ¡ˆå¼•å…¥ <code>import()</code> å‡½æ•°æ”¯æŒåŠ¨æ€åŠ è½½æ¨¡å—</li></ul><h1 id="Module-çš„åŠ è½½å®ç°"><a href="#Module-çš„åŠ è½½å®ç°" class="headerlink" title="Module çš„åŠ è½½å®ç°"></a>Module çš„åŠ è½½å®ç°</h1><h2 id="æµè§ˆå™¨åŠ è½½"><a href="#æµè§ˆå™¨åŠ è½½" class="headerlink" title="æµè§ˆå™¨åŠ è½½"></a>æµè§ˆå™¨åŠ è½½</h2><h3 id="ä¼ ç»Ÿæ–¹æ³•"><a href="#ä¼ ç»Ÿæ–¹æ³•" class="headerlink" title="ä¼ ç»Ÿæ–¹æ³•"></a>ä¼ ç»Ÿæ–¹æ³•</h3><ul><li>æµè§ˆå™¨æ˜¯åŒæ­¥åŠ è½½ JavaScript è„šæœ¬ï¼Œå³æ¸²æŸ“å¼•æ“é‡åˆ°<code>&lt;script&gt;</code>æ ‡ç­¾å°±ä¼šåœä¸‹æ¥ï¼Œç­‰åˆ°æ‰§è¡Œå®Œè„šæœ¬ï¼Œå†ç»§ç»­å‘ä¸‹æ¸²æŸ“ã€‚å¦‚æœæ˜¯å¤–éƒ¨è„šæœ¬ï¼Œè¿˜å¿…é¡»åŠ å…¥è„šæœ¬ä¸‹è½½çš„æ—¶é—´</li><li>å¦‚æœè„šæœ¬ä½“ç§¯å¾ˆå¤§ï¼Œä¸‹è½½å’Œæ‰§è¡Œçš„æ—¶é—´å°±ä¼šå¾ˆé•¿ï¼Œå› æ­¤é€ æˆæµè§ˆå™¨å µå¡ï¼Œç”¨æˆ·ä¼šæ„Ÿè§‰åˆ°æµè§ˆå™¨â€œå¡æ­»â€äº†ï¼Œæ²¡æœ‰ä»»ä½•å“åº”ã€‚è¿™æ˜¾ç„¶æ˜¯å¾ˆä¸å¥½çš„ä½“éªŒï¼Œæ‰€ä»¥æµè§ˆå™¨å…è®¸è„šæœ¬å¼‚æ­¥åŠ è½½</li><li><code>&lt;script&gt;</code> æ ‡ç­¾æ‰“å¼€ defer æˆ– async å±æ€§ï¼Œè„šæœ¬å°±ä¼šå¼‚æ­¥åŠ è½½ã€‚æ¸²æŸ“å¼•æ“é‡åˆ°è¿™ä¸€è¡Œå‘½ä»¤ï¼Œå°±ä¼šå¼€å§‹ä¸‹è½½å¤–éƒ¨è„šæœ¬ï¼Œä½†ä¸ä¼šç­‰å®ƒä¸‹è½½å’Œæ‰§è¡Œï¼Œè€Œæ˜¯ç›´æ¥æ‰§è¡Œåé¢çš„å‘½ä»¤</li></ul><blockquote><p><code>defer</code>ä¸<code>async</code>çš„åŒºåˆ«æ˜¯ï¼š<code>defer</code>è¦ç­‰åˆ°æ•´ä¸ªé¡µé¢åœ¨å†…å­˜ä¸­æ­£å¸¸æ¸²æŸ“ç»“æŸï¼ˆDOM ç»“æ„å®Œå…¨ç”Ÿæˆï¼Œä»¥åŠå…¶ä»–è„šæœ¬æ‰§è¡Œå®Œæˆï¼‰ï¼Œæ‰ä¼šæ‰§è¡Œï¼›<code>async</code>ä¸€æ—¦ä¸‹è½½å®Œï¼Œæ¸²æŸ“å¼•æ“å°±ä¼šä¸­æ–­æ¸²æŸ“ï¼Œæ‰§è¡Œè¿™ä¸ªè„šæœ¬ä»¥åï¼Œå†ç»§ç»­æ¸²æŸ“ã€‚</p><p>ä¸€å¥è¯ï¼Œ<code>defer</code>æ˜¯â€œæ¸²æŸ“å®Œå†æ‰§è¡Œâ€ï¼Œ<code>async</code>æ˜¯â€œä¸‹è½½å®Œå°±æ‰§è¡Œâ€ã€‚</p><p>å¦å¤–ï¼Œå¦‚æœæœ‰å¤šä¸ª<code>defer</code>è„šæœ¬ï¼Œä¼šæŒ‰ç…§å®ƒä»¬åœ¨é¡µé¢å‡ºç°çš„é¡ºåºåŠ è½½ï¼Œè€Œå¤šä¸ª<code>async</code>è„šæœ¬æ˜¯ä¸èƒ½ä¿è¯åŠ è½½é¡ºåºçš„</p></blockquote><h3 id="åŠ è½½è§„åˆ™"><a href="#åŠ è½½è§„åˆ™" class="headerlink" title="åŠ è½½è§„åˆ™"></a>åŠ è½½è§„åˆ™</h3><ul><li>æµè§ˆå™¨åŠ è½½ ES6 æ¨¡å—ï¼Œä¹Ÿä½¿ç”¨ <code>&lt;script&gt;</code> æ ‡ç­¾ï¼Œä½†æ˜¯è¦åŠ å…¥ <code>type=&quot;module&quot;</code> å±æ€§</li><li><code>module</code> å±æ€§éƒ½æ˜¯å¼‚æ­¥åŠ è½½ï¼Œä¸ä¼šé€ æˆå µå¡æµè§ˆå™¨ï¼Œå³ç­‰åˆ°æ•´ä¸ªé¡µé¢æ¸²æŸ“å®Œï¼Œå†æ‰§è¡Œæ¨¡å—è„šæœ¬ï¼Œç­‰åŒäºæ‰“å¼€äº†``æ ‡ç­¾çš„<code>defer</code>å±æ€§</li></ul><h2 id="ES6-æ¨¡å—ä¸-CommonJS-æ¨¡å—çš„å·®å¼‚"><a href="#ES6-æ¨¡å—ä¸-CommonJS-æ¨¡å—çš„å·®å¼‚" class="headerlink" title="ES6 æ¨¡å—ä¸ CommonJS æ¨¡å—çš„å·®å¼‚"></a>ES6 æ¨¡å—ä¸ CommonJS æ¨¡å—çš„å·®å¼‚</h2><ul><li>CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„æ‹·è´ï¼ŒES6 æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨<ul><li>ä¸€æ—¦è¾“å‡ºä¸€ä¸ªå€¼ï¼Œæ¨¡å—å†…éƒ¨çš„å˜åŒ–å°±å½±å“ä¸åˆ°è¿™ä¸ªå€¼</li></ul></li><li>CommonJS æ¨¡å—æ˜¯è¿è¡Œæ—¶åŠ è½½ï¼ŒES6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£<ul><li>ç”Ÿæˆä¸€ä¸ªåªè¯»å¼•ç”¨ã€‚ç­‰åˆ°è„šæœ¬çœŸæ­£æ‰§è¡Œæ—¶ï¼Œå†æ ¹æ®è¿™ä¸ªåªè¯»å¼•ç”¨ï¼Œåˆ°è¢«åŠ è½½çš„é‚£ä¸ªæ¨¡å—é‡Œé¢å»å–å€¼</li><li>ES6 æ¨¡å—æ˜¯åŠ¨æ€å¼•ç”¨ï¼Œå¹¶ä¸”ä¸ä¼šç¼“å­˜å€¼ï¼Œæ¨¡å—é‡Œé¢çš„å˜é‡ç»‘å®šå…¶æ‰€åœ¨çš„æ¨¡å—</li></ul></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> ECMAScript 6 å…¥é—¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸå‹ &amp; åŸå‹é“¾</title>
      <link href="/2020/03/25/%E5%8E%9F%E5%9E%8B-%E5%8E%9F%E5%9E%8B%E9%93%BE/"/>
      <url>/2020/03/25/%E5%8E%9F%E5%9E%8B-%E5%8E%9F%E5%9E%8B%E9%93%BE/</url>
      
        <content type="html"><![CDATA[<p>åŸæ–‡ï¼š<a href="https://mengera88.github.io/2017/06/06/javascriptå¯¹è±¡è¯¦è§£ï¼šææ¸…æ¥šåŸå‹ä¸åŸå‹é“¾/" target="_blank" rel="noopener">https://mengera88.github.io/2017/06/06/javascript%E5%AF%B9%E8%B1%A1%E8%AF%A6%E8%A7%A3%EF%BC%9A%E6%90%9E%E6%B8%85%E6%A5%9A%E5%8E%9F%E5%9E%8B%E4%B8%8E%E5%8E%9F%E5%9E%8B%E9%93%BE/</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> é¢è¯•å‡†å¤‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Promise å­¦ä¹ ç¬”è®°</title>
      <link href="/2020/03/25/Promise/"/>
      <url>/2020/03/25/Promise/</url>
      
        <content type="html"><![CDATA[<p>åŸæ–‡ï¼š<a href="https://mengera88.github.io/2017/05/18/PromiseåŸç†è§£æ/" target="_blank" rel="noopener">https://mengera88.github.io/2017/05/18/Promise%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/</a></p><h2 id="æç®€é›å½¢"><a href="#æç®€é›å½¢" class="headerlink" title="æç®€é›å½¢"></a>æç®€é›å½¢</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Promise</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> value = <span class="literal">null</span>,</span><br><span class="line">      callbacks = [];</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">this</span>.then = <span class="function"><span class="keyword">function</span>(<span class="params">onFulfilled</span>) </span>&#123;</span><br><span class="line">    callbacks.push(onFulfilled);</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    callbacks.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">      callback(value);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  fn(resolve);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä»£ç é€»è¾‘<ol><li>è°ƒç”¨ <code>then</code> æ–¹æ³•ï¼Œå°†æƒ³è¦åœ¨ <code>Promise</code> å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶æ‰§è¡Œçš„å›è°ƒæ”¾å…¥ <code>callbacks</code> é˜Ÿåˆ—<ul><li>å°±æ˜¯æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œè§‚å¯Ÿè€…æ¨¡å¼</li></ul></li><li>åˆ›å»º <code>Promise</code> å®ä¾‹æ—¶ä¼ å…¥çš„å‡½æ•° <code>fn</code> ä¼šè¢«èµ‹äºˆä¸€ä¸ªå‡½æ•°ç±»å‹çš„å‚æ•°ï¼Œå³ <code>resolve</code><ul><li><code>resolve</code> æ¥æ”¶ä¸€ä¸ªå‚æ•° valueï¼Œä»£è¡¨å¼‚æ­¥æ“ä½œçš„è¿”å›ç»“æœ</li></ul></li><li>å½“å¼‚æ­¥æ“ä½œæ‰§è¡ŒæˆåŠŸåï¼Œç”¨æˆ·ä¼šè°ƒç”¨ <code>resolve</code> æ–¹æ³•ã€‚çœŸå®æ“ä½œæ˜¯å°† <code>callbacks</code> é˜Ÿåˆ—ä¸­çš„å›è°ƒä¸€ä¸€æ‰§è¡Œ</li></ol></li><li>ä»£ç åˆ†æ<ul><li><code>new Promise</code> æ—¶ï¼Œä¼ ç»™ <code>promise</code> çš„å‡½æ•°å‘é€å¼‚æ­¥è¯·æ±‚</li><li>æ¥ç€è°ƒç”¨ <code>promise</code> å¯¹è±¡çš„ <code>then</code> å±æ€§ï¼Œæ³¨å†Œè¯·æ±‚æˆåŠŸçš„å›è°ƒå‡½æ•°</li><li>å½“å¼‚æ­¥è¯·æ±‚å‘é€æˆåŠŸæ—¶ï¼Œè°ƒç”¨ <code>resolve(results.id)</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ‰§è¡Œ <code>then</code> æ–¹æ³•æ³¨å†Œçš„å›è°ƒæ•°ç»„</li></ul></li></ul><h3 id="æ”¯æŒé“¾å¼è°ƒç”¨"><a href="#æ”¯æŒé“¾å¼è°ƒç”¨" class="headerlink" title="æ”¯æŒé“¾å¼è°ƒç”¨"></a>æ”¯æŒé“¾å¼è°ƒç”¨</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Promise</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> value = <span class="literal">null</span>,</span><br><span class="line">      callbacks = [];</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">this</span>.then = <span class="function"><span class="keyword">function</span>(<span class="params">onFulfilled</span>) </span>&#123;</span><br><span class="line">    callbacks.push(onFulfilled);</span><br><span class="line">==&gt; <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    callbacks.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">      callback(value);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  fn(resolve);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åŠ å…¥å»¶æ—¶æ—¶æœº"><a href="#åŠ å…¥å»¶æ—¶æ—¶æœº" class="headerlink" title="åŠ å…¥å»¶æ—¶æ—¶æœº"></a>åŠ å…¥å»¶æ—¶æ—¶æœº</h3><ul><li>ä¿è¯ <code>resolve</code> æ‰§è¡Œä¹‹å‰ï¼Œ<code>then</code> æ–¹æ³•å·²ç»æ³¨å†Œå®Œæ‰€æœ‰çš„å›è°ƒ</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Promise</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> value = <span class="literal">null</span>,</span><br><span class="line">      callbacks = [];</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">this</span>.then = <span class="function"><span class="keyword">function</span>(<span class="params">onFulfilled</span>) </span>&#123;</span><br><span class="line">    callbacks.push(onFulfilled);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">==&gt; setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      callbacks.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">        callback(value);</span><br><span class="line">      &#125;);</span><br><span class="line">==&gt; &#125;, <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">  fn(resolve);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä»£ç é€»è¾‘<ul><li>åˆ©ç”¨ <code>setTimeout</code> æœºåˆ¶ï¼Œå°† <code>resolve</code> ä¸­æ‰§è¡Œå›è°ƒçš„é€»è¾‘æ”¾ç½®åˆ°ä»»åŠ¡é˜Ÿåˆ—æœ«å°¾ï¼Œä¿è¯æ‰§è¡Œ <code>resolve</code> ä¸­çš„ä»£ç æ—¶ï¼Œ<code>then</code> æ–¹æ³•çš„å›è°ƒå‡½æ•°å·²ç»æ³¨å†Œå®Œæˆ</li></ul></li><li>é—®é¢˜<ul><li>åœ¨ <code>Promise</code> å¼‚æ­¥æ“ä½œæˆåŠŸä¹‹åæ‰è°ƒç”¨ <code>then</code> æ³¨å†Œçš„å›è°ƒä¸ä¼šæ‰§è¡Œ</li></ul></li></ul><h3 id="åŠ å…¥çŠ¶æ€"><a href="#åŠ å…¥çŠ¶æ€" class="headerlink" title="åŠ å…¥çŠ¶æ€"></a>åŠ å…¥çŠ¶æ€</h3><ul><li>å³åŠ å…¥ pending -&gt; fulfilled</li><li>æˆ– pending -&gt; rejected</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Promise</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> value = <span class="literal">null</span>,</span><br><span class="line">      callbacks = [],</span><br><span class="line">==&gt;   state = <span class="string">'pending'</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">this</span>.then = <span class="function"><span class="keyword">function</span>(<span class="params">onFulfilled</span>) </span>&#123;</span><br><span class="line">==&gt; <span class="keyword">if</span> (state === <span class="string">'pending'</span>) &#123;</span><br><span class="line">      callbacks.push(onFulfilled);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">==&gt; &#125;</span><br><span class="line">==&gt; onFulfilled(value);</span><br><span class="line">==&gt; <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">newValue</span>) </span>&#123;</span><br><span class="line">==&gt; value = newValue;</span><br><span class="line">==&gt; state = <span class="string">'fulfilled'</span>;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      callbacks.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">        callback(value);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;, <span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  fn(resolve);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä»£ç é€»è¾‘<ul><li><code>resolve</code> æ‰§è¡Œæ—¶ï¼Œå°†çŠ¶æ€è®¾ç½®ä¸º <code>fultilled</code>ï¼Œä¹‹åè°ƒç”¨<code>then</code> æ·»åŠ çš„æ–°å›è°ƒéƒ½ä¼šç«‹å³æ‰§è¡Œï¼Œä¸éœ€è¦åŠ å…¥ <code>callbacks</code> é˜Ÿåˆ—</li></ul></li></ul><h3 id="é“¾å¼-Promise"><a href="#é“¾å¼-Promise" class="headerlink" title="é“¾å¼ Promise"></a>é“¾å¼ Promise</h3><ul><li>å¦‚æœ <code>then</code> å‡½æ•°é‡Œé¢æ³¨å†Œçš„ä»æ˜¯ <code>Promise</code>ï¼Œåªè¦åœ¨<code>then</code>æ–¹æ³•é‡Œé¢<code>return</code>ä¸€ä¸ª<code>promise</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Promise</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> state = <span class="string">'pending'</span>,</span><br><span class="line">      value = <span class="literal">null</span>,</span><br><span class="line">      callbacks = [];</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">this</span>.then = <span class="function"><span class="keyword">function</span>(<span class="params">onFulfilled</span>) </span>&#123;</span><br><span class="line">&gt;   <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">&gt;     handle(&#123;</span><br><span class="line">&gt;       onFulfilled: onFulfilled || <span class="literal">null</span>,</span><br><span class="line">&gt;       resolve: resolve</span><br><span class="line">&gt;     &#125;);</span><br><span class="line">&gt;   &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">&gt; <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (state === <span class="string">'pending'</span>) &#123;</span><br><span class="line">      callbacks.push(callback);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&gt;   <span class="comment">// å¦‚æœ then ä¸­æ²¡æœ‰ä¼ é€’ä»»ä½•ä¸œè¥¿</span></span><br><span class="line">&gt;   <span class="keyword">if</span> (!callback.onFultilled) &#123;</span><br><span class="line">&gt;     callback.resolve(value);</span><br><span class="line">&gt;     <span class="keyword">return</span>;</span><br><span class="line">&gt;   &#125;</span><br><span class="line">&gt;   <span class="keyword">var</span> ret = callback.onFulfilled(value);</span><br><span class="line">&gt;   callback.resolve(ret);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">newValue</span>) </span>&#123;</span><br><span class="line">&gt;   <span class="keyword">if</span> (newValue &amp;&amp; (<span class="keyword">typeof</span> newValue === <span class="string">'object'</span> || <span class="keyword">typeof</span> newValue === <span class="string">'function'</span>)) &#123;</span><br><span class="line">&gt;     <span class="keyword">var</span> then = newValue.then;</span><br><span class="line">&gt;     <span class="keyword">if</span> (<span class="keyword">typeof</span> then === <span class="string">'function'</span>) &#123;</span><br><span class="line">&gt;       then.call(newValue, resolve);</span><br><span class="line">&gt;       <span class="keyword">return</span>;</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt;   &#125;</span><br><span class="line">    value = newValue;</span><br><span class="line">    state = <span class="string">'fulfilled'</span>;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      callbacks.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">        handle(callback);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;, <span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  fn(resolve);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä»£ç é€»è¾‘<ol><li><code>then</code> æ–¹æ³•ä¸­ï¼Œåˆ›å»ºå¹¶è¿”å›äº†æ–°çš„ <code>Promise</code> å®ä¾‹<ul><li>ä¸²è¡Œ <code>Promise</code> çš„åŸºç¡€ï¼Œå¹¶ä¸”æ”¯æŒé“¾å¼è°ƒç”¨</li></ul></li><li><code>handle</code> æ–¹æ³•æ˜¯ <code>Promise</code> å†…éƒ¨çš„æ–¹æ³•ï¼Œ<code>then</code> æ–¹æ³•ä¼ å…¥çš„è¡Œå‚ <code>onFulfilled</code> ä»¥åŠåˆ›å»ºæ–° <code>Promise</code> å®ä¾‹æ—¶ä¼ å…¥çš„ <code>resolve</code> å‡è¢« <code>push</code> åˆ°å½“å‰ <code>promise</code> çš„ <code>callbacks</code> é˜Ÿåˆ—ä¸­<ul><li>è¿™æ˜¯è¡”æ¥å½“å‰ <code>Promise</code> å®ä¾‹å’Œåé‚» <code>promise</code> çš„å…³é”®</li></ul></li></ol></li></ul><h3 id="å¤±è´¥å¤„ç†"><a href="#å¤±è´¥å¤„ç†" class="headerlink" title="å¤±è´¥å¤„ç†"></a>å¤±è´¥å¤„ç†</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Promise</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> state = <span class="string">'pending'</span>,</span><br><span class="line">      value = <span class="literal">null</span>,</span><br><span class="line">      callbacks = [];</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">this</span>.then = <span class="function"><span class="keyword">function</span>(<span class="params">onFulfilled</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">      handle(&#123;</span><br><span class="line">        onFulfilled: onFulfilled || <span class="literal">null</span>,</span><br><span class="line">&gt;       onRejected: onRejected || <span class="literal">null</span>,</span><br><span class="line">        resolve: resolve,</span><br><span class="line">&gt;       reject: reject</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (state === <span class="string">'pending'</span>) &#123;</span><br><span class="line">      callbacks.push(callback);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¦‚æœ then ä¸­æ²¡æœ‰ä¼ é€’ä»»ä½•ä¸œè¥¿</span></span><br><span class="line">    <span class="keyword">if</span> (!callback.onFultilled) &#123;</span><br><span class="line">      callback.resolve(value);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&gt;   <span class="keyword">var</span> cb = state === <span class="string">'fullfilled'</span> ? callback.onFulfilled : callback.onRejected;</span><br><span class="line">&gt;   <span class="keyword">if</span> (cb === <span class="literal">null</span>) &#123;</span><br><span class="line">&gt;     cb = state === <span class="string">'fulfilled'</span> ? callback.resolve : callback.reject;</span><br><span class="line">&gt;     cb(value);</span><br><span class="line">&gt;     <span class="keyword">return</span>;</span><br><span class="line">&gt;   &#125;</span><br><span class="line">    <span class="keyword">var</span> ret = cb(value);</span><br><span class="line">    callback.resolve(ret);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">newValue</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (newValue &amp;&amp; (<span class="keyword">typeof</span> newValue === <span class="string">'object'</span> || <span class="keyword">typeof</span> newValue === <span class="string">'function'</span>)) &#123;</span><br><span class="line">      <span class="keyword">var</span> then = newValue.then;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> then === <span class="string">'function'</span>) &#123;</span><br><span class="line">        then.call(newValue, resolve);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    state = <span class="string">'fulfilled'</span>;</span><br><span class="line">    value = newValue;</span><br><span class="line">&gt;   execute();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&gt; <span class="function"><span class="keyword">function</span> <span class="title">reject</span>(<span class="params">reason</span>) </span>&#123;</span><br><span class="line">&gt;   state = <span class="string">'rejected'</span>;</span><br><span class="line">&gt;   value = reason;</span><br><span class="line">&gt;   execute();</span><br><span class="line">&gt; &#125;</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">execute</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      callbacks.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">        handle(callback);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;, <span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  fn(resolve);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æŠ½ç¦» <code>resolve</code> å’Œ <code>reject</code> å…¬å…±éƒ¨åˆ†ä½œä¸º <code>execute</code> </li></ul><h3 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Promise</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> state = <span class="string">'pending'</span>,</span><br><span class="line">      value = <span class="literal">null</span>,</span><br><span class="line">      callbacks = [];</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">this</span>.then = <span class="function"><span class="keyword">function</span>(<span class="params">onFulfilled</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">      handle(&#123;</span><br><span class="line">        onFulfilled: onFulfilled || <span class="literal">null</span>,</span><br><span class="line">        onRejected: onRejected || <span class="literal">null</span>,</span><br><span class="line">        resolve: resolve,</span><br><span class="line">        reject: reject</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (state === <span class="string">'pending'</span>) &#123;</span><br><span class="line">      callbacks.push(callback);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¦‚æœ then ä¸­æ²¡æœ‰ä¼ é€’ä»»ä½•ä¸œè¥¿</span></span><br><span class="line">    <span class="keyword">if</span> (!callback.onFultilled) &#123;</span><br><span class="line">      callback.resolve(value);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> cb = state === <span class="string">'fullfilled'</span> ? callback.onFulfilled : callback.onRejected;</span><br><span class="line">    <span class="keyword">if</span> (cb === <span class="literal">null</span>) &#123;</span><br><span class="line">      cb = state === <span class="string">'fulfilled'</span> ? callback.resolve : callback.reject;</span><br><span class="line">      cb(value);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&gt;   <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> ret = cb(value);</span><br><span class="line">      callback.resolve(ret);</span><br><span class="line">&gt;   &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">&gt;     callback.reject(e);</span><br><span class="line">&gt;   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">newValue</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (newValue &amp;&amp; (<span class="keyword">typeof</span> newValue === <span class="string">'object'</span> || <span class="keyword">typeof</span> newValue === <span class="string">'function'</span>)) &#123;</span><br><span class="line">      <span class="keyword">var</span> then = newValue.then;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> then === <span class="string">'function'</span>) &#123;</span><br><span class="line">        then.call(newValue, resolve);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    state = <span class="string">'fulfilled'</span>;</span><br><span class="line">    value = newValue;</span><br><span class="line">    execute();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">reject</span>(<span class="params">reason</span>) </span>&#123;</span><br><span class="line">    state = <span class="string">'rejected'</span>;</span><br><span class="line">    value = reason;</span><br><span class="line">    execute();</span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">execute</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      callbacks.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">        handle(callback);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;, <span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  fn(resolve);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li>promiseé‡Œé¢çš„thenå‡½æ•°ä»…ä»…æ˜¯æ³¨å†Œäº†åç»­éœ€è¦æ‰§è¡Œçš„ä»£ç </li><li>çœŸæ­£çš„æ‰§è¡Œæ˜¯åœ¨resolveæ–¹æ³•é‡Œé¢æ‰§è¡Œçš„</li></ul><blockquote><p>Promise ä¸»è¦ä½¿ç”¨äº†è®¾è®¡æ¨¡å¼ä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼š</p><ol><li>é€šè¿‡ Promise.prototype.then å’Œ Promise.prototype.catch æ–¹æ³•å°†è§‚å¯Ÿè€…æ–¹æ³•æ³¨å†Œåˆ°è¢«è§‚å¯Ÿè€… Promise å¯¹è±¡ä¸­ï¼ŒåŒæ—¶è¿”å›ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡ï¼Œä»¥ä¾¿å¯ä»¥é“¾å¼è°ƒç”¨ã€‚</li><li>è¢«è§‚å¯Ÿè€…ç®¡ç†å†…éƒ¨ pendingã€fulfilled å’Œ rejected çš„çŠ¶æ€è½¬å˜ï¼ŒåŒæ—¶é€šè¿‡æ„é€ å‡½æ•°ä¸­ä¼ é€’çš„ resolve å’Œ reject æ–¹æ³•ä»¥ä¸»åŠ¨è§¦å‘çŠ¶æ€è½¬å˜å’Œé€šçŸ¥è§‚å¯Ÿè€…ã€‚</li></ol></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> é¢è¯•å‡†å¤‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Classçš„åŸºæœ¬è¯­æ³•å’Œç»§æ‰¿</title>
      <link href="/2020/03/24/21-22-Class%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%E5%92%8C%E7%BB%A7%E6%89%BF/"/>
      <url>/2020/03/24/21-22-Class%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%E5%92%8C%E7%BB%A7%E6%89%BF/</url>
      
        <content type="html"><![CDATA[<h1 id="Class-çš„åŸºæœ¬è¯­æ³•"><a href="#Class-çš„åŸºæœ¬è¯­æ³•" class="headerlink" title="Class çš„åŸºæœ¬è¯­æ³•"></a>Class çš„åŸºæœ¬è¯­æ³•</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><h3 id="ç±»çš„ç”±æ¥"><a href="#ç±»çš„ç”±æ¥" class="headerlink" title="ç±»çš„ç”±æ¥"></a>ç±»çš„ç”±æ¥</h3><ul><li>js ä¸­ç”Ÿæˆå®ä¾‹å¯¹è±¡çš„ä¼ ç»Ÿæ–¹æ³•æ˜¯é€šè¿‡æ„é€ å‡½æ•°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Point</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.x = x;</span><br><span class="line">  <span class="keyword">this</span>.y = y;</span><br><span class="line">&#125;</span><br><span class="line">Point.prototype.toString = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'('</span> + <span class="keyword">this</span>.x + <span class="string">','</span> + <span class="keyword">this</span>.y + <span class="string">')'</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Point(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure><ul><li>Es6 ä¸ºäº†æ¥è¿‘ä¼ ç»Ÿè¯­è¨€ï¼Œå¼•å…¥äº† Classï¼Œä½œä¸ºå¯¹è±¡çš„æ¨¡ç‰ˆã€‚</li><li>é€šè¿‡ <code>class</code> å…³é”®å­—ï¼Œå¯ä»¥å®šä¹‰ç±»</li><li>Es6 çš„ <code>clss</code> çœ‹ä½œä¸€ä¸ªè¯­æ³•ç³–ï¼Œå¤§éƒ¨åˆ†åŠŸèƒ½ es5 éƒ½å¯ä»¥åšåˆ°ï¼Œåªæ˜¯è®©å†™æ³•æ›´åƒé¢å‘å¯¹è±¡ç¼–ç¨‹çš„è¯­æ³•</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(x, y) &#123;</span><br><span class="line">    <span class="keyword">this</span>.x = x;</span><br><span class="line">    <span class="keyword">this</span>.y = y;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  toString() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'('</span> + <span class="keyword">this</span>.x + <span class="string">','</span> + <span class="keyword">this</span>.y + <span class="string">')'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>ES5 çš„æ„é€ å‡½æ•° <code>Point</code>ï¼Œå¯¹åº” ES6 çš„ <code>Point</code> ç±»çš„æ„é€ æ–¹æ³• <code>constructor</code></p></li><li><p>ç±»çš„æ•°æ®ç±»å‹å°±æ˜¯å‡½æ•°ï¼Œç±»æœ¬èº«å°±æŒ‡å‘æ„é€ å‡½æ•°</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">typeof</span> Point <span class="comment">// "function"</span></span><br><span class="line">Point === Point.prototype.constructor <span class="comment">// true</span></span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æ¥ç”¨ <code>new</code> å‘½ä»¤ï¼Œè·Ÿæ„é€ å‡½æ•°ä¸€æ ·</li><li>ç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½å®šä¹‰åœ¨ç±»çš„<code>prototype</code>å±æ€§ä¸Šé¢</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">  toString() &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">  toValue() &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line">Point.prototype = &#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;&#125;,</span><br><span class="line">  toString() &#123;&#125;,</span><br><span class="line">  toValue() &#123;&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>åœ¨ç±»çš„å®ä¾‹ä¸Šè°ƒç”¨æ–¹æ³•ï¼Œå°±æ˜¯è°ƒç”¨åŸå‹ä¸Šçš„æ–¹æ³•</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> </span>&#123;&#125;</span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> B();</span><br><span class="line"></span><br><span class="line">b.constructor === B.prototype.constructor <span class="comment">// true</span></span><br></pre></td></tr></table></figure><ul><li>ç±»çš„æ–¹æ³•éƒ½æ˜¯å®šä¹‰åœ¨ <code>prototype</code> å¯¹è±¡ä¸Šé¢æ‰€ä»¥ç±»çš„æ–°æ–¹æ³•å¯ä»¥æ·»åŠ åœ¨<code>prototype</code>å¯¹è±¡ä¸Šé¢ã€‚<code>Object.assign</code>æ–¹æ³•å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä¸€æ¬¡å‘ç±»æ·»åŠ å¤šä¸ªæ–¹æ³•</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.assign(Point.prototype, &#123;</span><br><span class="line">  toString() &#123;&#125;,</span><br><span class="line">  toValue() &#123;&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li><code>prototype</code>å¯¹è±¡çš„<code>constructor</code>å±æ€§ï¼Œç›´æ¥æŒ‡å‘â€œç±»â€çš„æœ¬èº«ï¼Œè¿™ä¸ ES5 çš„è¡Œä¸ºæ˜¯ä¸€è‡´çš„</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Point.prototype.constructor === Point</span><br></pre></td></tr></table></figure><ul><li>ç±»çš„å†…éƒ¨æ‰€æœ‰å®šä¹‰çš„æ–¹æ³•ï¼Œéƒ½æ˜¯ä¸å¯æšä¸¾çš„ï¼ˆnon-enumerableï¼‰ï¼Œè¿™ä¸ ES5 çš„è¡Œä¸ºä¸ä¸€è‡´</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(x, y) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  toString() &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.keys(Point.prototype)</span><br><span class="line"><span class="comment">// []</span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyNames(Point.prototype)</span><br><span class="line"><span class="comment">// ["constructor","toString"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES5 çš„å†™æ³•å¯æšä¸¾</span></span><br><span class="line"><span class="keyword">var</span> Point = <span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Point.prototype.toString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.keys(Point.prototype)</span><br><span class="line"><span class="comment">// ["toString"]</span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyNames(Point.prototype)</span><br><span class="line"><span class="comment">// ["constructor","toString"]</span></span><br></pre></td></tr></table></figure><h3 id="constructor-æ–¹æ³•"><a href="#constructor-æ–¹æ³•" class="headerlink" title="constructor æ–¹æ³•"></a>constructor æ–¹æ³•</h3><ul><li><code>constructor</code> æ–¹æ³•éƒ½æ˜¯ç±»çš„é»˜è®¤æ–¹æ³•ï¼Œé€šè¿‡ <code>new</code> å‘½ä»¤ç”Ÿæˆå¯¹è±¡å®ä¾‹æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨è¯¥æ–¹æ³•</li><li>ä¸€ä¸ªç±»å¿…é¡»æœ‰ <code>constructor</code> æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰æ˜¾ç¤ºå®šä¹‰ï¼Œä¸€ä¸ªç©ºçš„ <code>constructor</code> æ–¹æ³•ä¼šè¢«é»˜è®¤æ·»åŠ </li><li><code>constructor</code> æ–¹æ³•é»˜è®¤è¿”å›å®ä¾‹å¯¹è±¡ï¼ˆå³ <code>this</code>ï¼‰ï¼Œå¯ä»¥æ‰‹åŠ¨æŒ‡å®šè¿”å›å¦å¤–ä¸€ä¸ªå¯¹è±¡</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Foo() <span class="keyword">instanceof</span> Foo</span><br><span class="line"><span class="comment">// false</span></span><br></pre></td></tr></table></figure><ul><li>ç±»å¿…é¡»ä½¿ç”¨<code>new</code>è°ƒç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å®ƒè·Ÿæ™®é€šæ„é€ å‡½æ•°çš„ä¸€ä¸ªä¸»è¦åŒºåˆ«ï¼Œåè€…ä¸ç”¨<code>new</code>ä¹Ÿå¯ä»¥æ‰§è¡Œ</li></ul><h3 id="ç±»çš„å®ä¾‹"><a href="#ç±»çš„å®ä¾‹" class="headerlink" title="ç±»çš„å®ä¾‹"></a>ç±»çš„å®ä¾‹</h3><ul><li>å¿…é¡»ç”¨ <code>new</code> ç”Ÿæˆ</li><li>ä¸ ES5 ä¸€æ ·ï¼Œå®ä¾‹çš„å±æ€§é™¤éæ˜¾å¼å®šä¹‰åœ¨å…¶æœ¬èº«ï¼ˆå³å®šä¹‰åœ¨<code>this</code>å¯¹è±¡ä¸Šï¼‰ï¼Œå¦åˆ™éƒ½æ˜¯å®šä¹‰åœ¨åŸå‹ä¸Šï¼ˆå³å®šä¹‰åœ¨<code>class</code>ä¸Šï¼‰</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®šä¹‰ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(x, y) &#123;</span><br><span class="line">    <span class="keyword">this</span>.x = x;</span><br><span class="line">    <span class="keyword">this</span>.y = y;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  toString() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'('</span> + <span class="keyword">this</span>.x + <span class="string">', '</span> + <span class="keyword">this</span>.y + <span class="string">')'</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> point = <span class="keyword">new</span> Point(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">point.toString() <span class="comment">// (2, 3)</span></span><br><span class="line"></span><br><span class="line">point.hasOwnProperty(<span class="string">'x'</span>) <span class="comment">// true</span></span><br><span class="line">point.hasOwnProperty(<span class="string">'y'</span>) <span class="comment">// true</span></span><br><span class="line">point.hasOwnProperty(<span class="string">'toString'</span>) <span class="comment">// false</span></span><br><span class="line">point.__proto__.hasOwnProperty(<span class="string">'toString'</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure><ul><li>ç±»çš„æ‰€æœ‰å®ä¾‹å…±äº«ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡å®ä¾‹çš„<code>__proto__</code>å±æ€§ä¸ºâ€œç±»â€æ·»åŠ æ–¹æ³•</li></ul><blockquote><p><code>__proto__</code> å¹¶ä¸æ˜¯è¯­è¨€æœ¬èº«çš„ç‰¹æ€§ï¼Œè¿™æ˜¯å„å¤§å‚å•†å…·ä½“å®ç°æ—¶æ·»åŠ çš„ç§æœ‰å±æ€§ï¼Œè™½ç„¶ç›®å‰å¾ˆå¤šç°ä»£æµè§ˆå™¨çš„ JS å¼•æ“ä¸­éƒ½æä¾›äº†è¿™ä¸ªç§æœ‰å±æ€§ï¼Œä½†ä¾æ—§ä¸å»ºè®®åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨è¯¥å±æ€§ï¼Œé¿å…å¯¹ç¯å¢ƒäº§ç”Ÿä¾èµ–ã€‚ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>Object.getPrototypeOf</code> æ–¹æ³•æ¥è·å–å®ä¾‹å¯¹è±¡çš„åŸå‹ï¼Œç„¶åå†æ¥ä¸ºåŸå‹æ·»åŠ æ–¹æ³•/å±æ€§ã€‚</p></blockquote><h3 id="getter-å’Œ-setter"><a href="#getter-å’Œ-setter" class="headerlink" title="getter å’Œ setter"></a>getter å’Œ setter</h3><ul><li>ä¸ ES5 ä¸€æ ·ï¼Œåœ¨â€œç±»â€çš„å†…éƒ¨å¯ä»¥ä½¿ç”¨<code>get</code>å’Œ<code>set</code>å…³é”®å­—ï¼Œå¯¹æŸä¸ªå±æ€§è®¾ç½®å­˜å€¼å‡½æ•°å’Œå–å€¼å‡½æ•°ï¼Œæ‹¦æˆªè¯¥å±æ€§çš„å­˜å–è¡Œä¸º</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">get</span> prop() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'getter'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">set</span> prop(value) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'setter: '</span>+value);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> inst = <span class="keyword">new</span> MyClass();</span><br><span class="line"></span><br><span class="line">inst.prop = <span class="number">123</span>;</span><br><span class="line"><span class="comment">// setter: 123</span></span><br><span class="line"></span><br><span class="line">inst.prop</span><br><span class="line"><span class="comment">// 'getter'</span></span><br></pre></td></tr></table></figure><ul><li>å­˜å€¼å‡½æ•°å’Œå–å€¼å‡½æ•°æ˜¯å®šä¹‰åœ¨å±æ€§çš„æè¿°å¯¹è±¡ä¸Šé¢ï¼Œè¿™ä¸ ES5 å®Œå…¨ä¸€è‡´</li></ul><h3 id="å±æ€§è¡¨è¾¾å¼"><a href="#å±æ€§è¡¨è¾¾å¼" class="headerlink" title="å±æ€§è¡¨è¾¾å¼"></a>å±æ€§è¡¨è¾¾å¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> methodName = <span class="string">'getArea'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(length) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  [methodName]() &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Squareç±»çš„æ–¹æ³•ågetAreaï¼Œæ˜¯ä»è¡¨è¾¾å¼å¾—åˆ°çš„</span></span><br></pre></td></tr></table></figure><h3 id="Class-è¡¨è¾¾å¼"><a href="#Class-è¡¨è¾¾å¼" class="headerlink" title="Class è¡¨è¾¾å¼"></a>Class è¡¨è¾¾å¼</h3><ul><li>ä¸å‡½æ•°ä¸€æ ·ï¼Œç±»ä¹Ÿå¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼çš„å½¢å¼å®šä¹‰</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MyClass = <span class="class"><span class="keyword">class</span> <span class="title">Me</span> </span>&#123;</span><br><span class="line">  getClassName() &#123;</span><br><span class="line">    <span class="keyword">return</span> Me.name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ç±»çš„åå­—æ˜¯Meï¼Œä½†æ˜¯Meåªåœ¨ Class çš„å†…éƒ¨å¯ç”¨ï¼ŒæŒ‡ä»£å½“å‰ç±»</span></span><br><span class="line"><span class="comment">// åœ¨ Class å¤–éƒ¨ï¼Œè¿™ä¸ªç±»åªèƒ½ç”¨ MyClass å¼•ç”¨</span></span><br><span class="line"><span class="comment">// å†…éƒ¨ä¸ç”¨ Me å¯ä»¥çœç•¥</span></span><br><span class="line"><span class="keyword">const</span> MyClass = <span class="class"><span class="keyword">class</span> </span>&#123; <span class="comment">/* ... */</span> &#125;;</span><br></pre></td></tr></table></figure><ul><li>ç«‹å³æ‰§è¡Œçš„ Class</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> <span class="class"><span class="keyword">class</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  sayName() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;(<span class="string">'å¼ ä¸‰'</span>);</span><br><span class="line"></span><br><span class="line">person.sayName(); <span class="comment">// "å¼ ä¸‰"</span></span><br></pre></td></tr></table></figure><h3 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h3><ul><li>ä¸¥æ ¼æ¨¡å¼<ul><li>ç±»å’Œæ¨¡å—çš„å†…éƒ¨ï¼Œé»˜è®¤å°±æ˜¯ä¸¥æ ¼æ¨¡å¼ï¼Œæ‰€ä»¥ä¸éœ€è¦ä½¿ç”¨<code>use strict</code>æŒ‡å®šè¿è¡Œæ¨¡å¼</li></ul></li><li>ç±»ä¸å­˜åœ¨å˜é‡æå‡</li><li>name å±æ€§çš„å€¼æ˜¯ç±»å</li><li>Generator æ–¹æ³•<ul><li>å¦‚æœæŸä¸ªæ–¹æ³•ä¹‹å‰åŠ ä¸Šæ˜Ÿå·ï¼ˆ<code>*</code>ï¼‰ï¼Œå°±è¡¨ç¤ºè¯¥æ–¹æ³•æ˜¯ä¸€ä¸ª Generator å‡½æ•°</li></ul></li><li>this<ul><li>ç±»çš„æ–¹æ³•å†…éƒ¨å¦‚æœå«æœ‰<code>this</code>ï¼Œå®ƒé»˜è®¤æŒ‡å‘ç±»çš„å®ä¾‹</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line">  printName(name = <span class="string">'there'</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.print(<span class="string">`Hello <span class="subst">$&#123;name&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  print(text) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(text);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> logger = <span class="keyword">new</span> Logger();</span><br><span class="line"><span class="keyword">const</span> &#123; printName &#125; = logger;</span><br><span class="line">printName(); <span class="comment">// TypeError: Cannot read property 'print' of undefined</span></span><br><span class="line"><span class="comment">// thisä¼šæŒ‡å‘è¯¥æ–¹æ³•è¿è¡Œæ—¶æ‰€åœ¨çš„ç¯å¢ƒï¼ˆç”±äº class å†…éƒ¨æ˜¯ä¸¥æ ¼æ¨¡å¼ï¼Œæ‰€ä»¥ this å®é™…æŒ‡å‘çš„æ˜¯undefinedï¼‰ï¼Œä»è€Œå¯¼è‡´æ‰¾ä¸åˆ°printæ–¹æ³•è€ŒæŠ¥é”™</span></span><br></pre></td></tr></table></figure><ul><li>è§£å†³åŠæ³•</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ„é€ æ–¹æ³•ä¸­ç»‘å®š`this`ï¼Œè¿™æ ·å°±ä¸ä¼šæ‰¾ä¸åˆ°`print`æ–¹æ³•äº†</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">this</span>.printName = <span class="keyword">this</span>.printName.bind(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Obj</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">this</span>.getThis = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myObj = <span class="keyword">new</span> Obj();</span><br><span class="line">myObj.getThis() === myObj <span class="comment">// true</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨Proxyï¼Œè·å–æ–¹æ³•çš„æ—¶å€™ï¼Œè‡ªåŠ¨ç»‘å®šthis</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">selfish</span> (<span class="params">target</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> cache = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line">  <span class="keyword">const</span> handler = &#123;</span><br><span class="line">    <span class="keyword">get</span> (target, key) &#123;</span><br><span class="line">      <span class="keyword">const</span> value = <span class="built_in">Reflect</span>.get(target, key);</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> value !== <span class="string">'function'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (!cache.has(value)) &#123;</span><br><span class="line">        cache.set(value, value.bind(target));</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> cache.get(value);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> proxy = <span class="keyword">new</span> <span class="built_in">Proxy</span>(target, handler);</span><br><span class="line">  <span class="keyword">return</span> proxy;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> logger = selfish(<span class="keyword">new</span> Logger());</span><br></pre></td></tr></table></figure><h2 id="é™æ€æ–¹æ³•"><a href="#é™æ€æ–¹æ³•" class="headerlink" title="é™æ€æ–¹æ³•"></a>é™æ€æ–¹æ³•</h2><ul><li>ç±»ç›¸å½“äºå®ä¾‹çš„åŸå‹ï¼Œæ‰€æœ‰åœ¨ç±»ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œéƒ½ä¼šè¢«å®ä¾‹ç»§æ‰¿</li><li>å¦‚æœåœ¨ä¸€ä¸ªæ–¹æ³•å‰åŠ ä¸Š <code>static</code> å…³é”®å­—ï¼Œè¡¨ç¤ºè¯¥æ–¹æ³•ä¸ä¼šè¢«å®ä¾‹ç»§æ‰¿ï¼Œè€Œæ˜¯é€šè¿‡ç±»æ¥è°ƒç”¨ï¼Œç§°ä¸ºâ€œé™æ€æ–¹æ³•â€</li><li>å¦‚æœé™æ€æ–¹æ³•åŒ…å«<code>this</code>å…³é”®å­—ï¼Œè¿™ä¸ª<code>this</code>æŒ‡çš„æ˜¯ç±»ï¼Œè€Œä¸æ˜¯å®ä¾‹</li><li>é™æ€æ–¹æ³•å¯ä»¥ä¸éé™æ€æ–¹æ³•é‡å</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> bar() &#123;</span><br><span class="line">    <span class="keyword">this</span>.baz();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> baz() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'hello'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  baz() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'world'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Foo.bar() <span class="comment">// hello</span></span><br></pre></td></tr></table></figure><ul><li>çˆ¶ç±»çš„é™æ€æ–¹æ³•ï¼Œå¯ä»¥è¢«å­ç±»ç»§æ‰¿</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> classMethod() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'hello'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span> <span class="keyword">extends</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Bar.classMethod() <span class="comment">// 'hello'</span></span><br></pre></td></tr></table></figure><ul><li>é™æ€æ–¹æ³•ä¹Ÿæ˜¯å¯ä»¥ä»<code>super</code>å¯¹è±¡ä¸Šè°ƒç”¨çš„</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> classMethod() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'hello'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span> <span class="keyword">extends</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> classMethod() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.classMethod() + <span class="string">', too'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Bar.classMethod() <span class="comment">// "hello, too"</span></span><br></pre></td></tr></table></figure><h2 id="å®ä¾‹å±æ€§å’Œæ–°å†™æ³•"><a href="#å®ä¾‹å±æ€§å’Œæ–°å†™æ³•" class="headerlink" title="å®ä¾‹å±æ€§å’Œæ–°å†™æ³•"></a>å®ä¾‹å±æ€§å’Œæ–°å†™æ³•</h2><ul><li>å®ä¾‹å±æ€§é™¤äº†å®šä¹‰åœ¨<code>constructor()</code>æ–¹æ³•é‡Œé¢çš„<code>this</code>ä¸Šé¢ï¼Œä¹Ÿå¯ä»¥å®šä¹‰åœ¨ç±»çš„æœ€é¡¶å±‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IncreasingCounter</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">this</span>._count = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IncreasingCounter</span> </span>&#123;</span><br><span class="line">  _count = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é™æ€å±æ€§"><a href="#é™æ€å±æ€§" class="headerlink" title="é™æ€å±æ€§"></a>é™æ€å±æ€§</h2><ul><li>é™æ€å±æ€§æŒ‡çš„æ˜¯ Class æœ¬èº«çš„å±æ€§ï¼Œå³<code>Class.propName</code>ï¼Œè€Œä¸æ˜¯å®šä¹‰åœ¨å®ä¾‹å¯¹è±¡ï¼ˆ<code>this</code>ï¼‰ä¸Šçš„å±æ€§</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è€å†™æ³•</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line">Foo.prop = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°å†™æ³•ï¼ˆææ¡ˆï¼‰</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> prop = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç§æœ‰æ–¹æ³•å’Œç§æœ‰å±æ€§"><a href="#ç§æœ‰æ–¹æ³•å’Œç§æœ‰å±æ€§" class="headerlink" title="ç§æœ‰æ–¹æ³•å’Œç§æœ‰å±æ€§"></a>ç§æœ‰æ–¹æ³•å’Œç§æœ‰å±æ€§</h2><ul><li><p>ç§æœ‰æ–¹æ³•å’Œç§æœ‰å±æ€§ï¼Œæ˜¯åªèƒ½åœ¨ç±»çš„å†…éƒ¨è®¿é—®çš„æ–¹æ³•å’Œå±æ€§ï¼Œå¤–éƒ¨ä¸èƒ½è®¿é—®</p></li><li><p>è¿™æ˜¯å¸¸è§éœ€æ±‚ï¼Œæœ‰åˆ©äºä»£ç çš„å°è£…ï¼Œä½† ES6 ä¸æä¾›ï¼Œåªèƒ½é€šè¿‡å˜é€šæ–¹æ³•æ¨¡æ‹Ÿå®ç°</p></li></ul><h3 id="ç°æœ‰çš„è§£å†³æ–¹æ¡ˆ"><a href="#ç°æœ‰çš„è§£å†³æ–¹æ¡ˆ" class="headerlink" title="ç°æœ‰çš„è§£å†³æ–¹æ¡ˆ"></a>ç°æœ‰çš„è§£å†³æ–¹æ¡ˆ</h3><ul><li>å‘½åä¸ŠåŠ ä»¥åŒºåˆ«<ul><li>ä¸ä¿é™©ï¼Œåœ¨ç±»çš„å¤–éƒ¨è¿˜æ˜¯å¯ä»¥è°ƒç”¨</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Widget</span> </span>&#123;</span><br><span class="line">  <span class="comment">// å…¬æœ‰æ–¹æ³•</span></span><br><span class="line">  foo (baz) &#123;</span><br><span class="line">    <span class="keyword">this</span>._bar(baz);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ç§æœ‰æ–¹æ³•</span></span><br><span class="line">  _bar(baz) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.snaf = baz;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å°†ç§æœ‰æ–¹æ³•ç§»å‡ºæ¨¡å—ï¼Œå› ä¸ºæ¨¡å—å†…éƒ¨çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯å¯¹å¤–å¯è§çš„</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Widget</span> </span>&#123;</span><br><span class="line">  foo (baz) &#123;</span><br><span class="line">    bar.call(<span class="keyword">this</span>, baz);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">baz</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.snaf = baz;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åˆ©ç”¨<code>Symbol</code>å€¼çš„å”¯ä¸€æ€§ï¼Œå°†ç§æœ‰æ–¹æ³•çš„åå­—å‘½åä¸ºä¸€ä¸ª<code>Symbol</code>å€¼<ul><li><code>Reflect.ownKeys()</code> å¯ä»¥æ‹¿åˆ°</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bar = <span class="built_in">Symbol</span>(<span class="string">'bar'</span>);</span><br><span class="line"><span class="keyword">const</span> snaf = <span class="built_in">Symbol</span>(<span class="string">'snaf'</span>);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">myClass</span></span>&#123;</span><br><span class="line">  <span class="comment">// å…¬æœ‰æ–¹æ³•</span></span><br><span class="line">  foo(baz) &#123;</span><br><span class="line">    <span class="keyword">this</span>[bar](baz);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ç§æœ‰æ–¹æ³•</span></span><br><span class="line">  [bar](baz) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>[snaf] = baz;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>ææ¡ˆ<ul><li>å±æ€§åä¹‹å‰ï¼Œä½¿ç”¨<code>#</code>è¡¨ç¤º</li></ul></li></ul><h2 id="new-target-å±æ€§"><a href="#new-target-å±æ€§" class="headerlink" title="new.target å±æ€§"></a>new.target å±æ€§</h2><ul><li>ç”¨åœ¨æ„é€ å‡½æ•°ä¹‹ä¸­ï¼Œè¿”å›<code>new</code>å‘½ä»¤ä½œç”¨äºçš„é‚£ä¸ªæ„é€ å‡½æ•°</li><li>å¦‚æœæ„é€ å‡½æ•°ä¸æ˜¯é€šè¿‡<code>new</code>å‘½ä»¤æˆ–<code>Reflect.construct()</code>è°ƒç”¨çš„ï¼Œ<code>new.target</code>ä¼šè¿”å›<code>undefined</code></li><li>å› æ­¤è¿™ä¸ªå±æ€§å¯ä»¥ç”¨æ¥ç¡®å®šæ„é€ å‡½æ•°æ˜¯æ€ä¹ˆè°ƒç”¨çš„</li><li>å­ç±»ç»§æ‰¿çˆ¶ç±»æ—¶ï¼Œ<code>new.target</code>ä¼šè¿”å›å­ç±»</li><li>åˆ©ç”¨è¿™ä¸ªç‰¹ç‚¹ï¼Œå¯ä»¥å†™å‡ºä¸èƒ½ç‹¬ç«‹ä½¿ç”¨ã€å¿…é¡»ç»§æ‰¿åæ‰èƒ½ä½¿ç”¨çš„ç±»</li><li>åœ¨å‡½æ•°å¤–éƒ¨ï¼Œä½¿ç”¨<code>new.target</code>ä¼šæŠ¥é”™</li></ul><h1 id="Class-çš„ç»§æ‰¿"><a href="#Class-çš„ç»§æ‰¿" class="headerlink" title="Class çš„ç»§æ‰¿"></a>Class çš„ç»§æ‰¿</h1><h2 id="ç®€ä»‹-1"><a href="#ç®€ä»‹-1" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><ul><li>é€šè¿‡<code>extends</code>å…³é”®å­—å®ç°ç»§æ‰¿</li><li>ES5 é€šè¿‡ä¿®æ”¹åŸå‹é“¾å®ç°ç»§æ‰¿</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ColorPoint</span> <span class="keyword">extends</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(x, y, color) &#123;</span><br><span class="line">    <span class="keyword">super</span>(x, y); <span class="comment">// è°ƒç”¨çˆ¶ç±»çš„constructor(x, y)</span></span><br><span class="line">    <span class="keyword">this</span>.color = color;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  toString() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.color + <span class="string">' '</span> + <span class="keyword">super</span>.toString(); <span class="comment">// è°ƒç”¨çˆ¶ç±»çš„toString()</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>super</code>å…³é”®å­—ï¼Œå®ƒåœ¨è¿™é‡Œè¡¨ç¤ºçˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œç”¨æ¥æ–°å»ºçˆ¶ç±»çš„<code>this</code>å¯¹è±¡</li></ul><blockquote><p>å­ç±»å¿…é¡»åœ¨<code>constructor</code>æ–¹æ³•ä¸­è°ƒç”¨<code>super</code>æ–¹æ³•ï¼Œå¦åˆ™æ–°å»ºå®ä¾‹æ—¶ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºå­ç±»è‡ªå·±çš„<code>this</code>å¯¹è±¡ï¼Œå¿…é¡»å…ˆé€šè¿‡çˆ¶ç±»çš„æ„é€ å‡½æ•°å®Œæˆå¡‘é€ ï¼Œå¾—åˆ°ä¸çˆ¶ç±»åŒæ ·çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ï¼Œç„¶åå†å¯¹å…¶è¿›è¡ŒåŠ å·¥ï¼ŒåŠ ä¸Šå­ç±»è‡ªå·±çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ã€‚å¦‚æœä¸è°ƒç”¨<code>super</code>æ–¹æ³•ï¼Œå­ç±»å°±å¾—ä¸åˆ°<code>this</code>å¯¹è±¡ã€‚</p></blockquote><blockquote><p>ES5 çš„ç»§æ‰¿ï¼Œå®è´¨æ˜¯å…ˆåˆ›é€ å­ç±»çš„å®ä¾‹å¯¹è±¡<code>this</code>ï¼Œç„¶åå†å°†çˆ¶ç±»çš„æ–¹æ³•æ·»åŠ åˆ°<code>this</code>ä¸Šé¢ï¼ˆ<code>Parent.apply(this)</code>ï¼‰ã€‚ES6 çš„ç»§æ‰¿æœºåˆ¶å®Œå…¨ä¸åŒï¼Œå®è´¨æ˜¯å…ˆå°†çˆ¶ç±»å®ä¾‹å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼ŒåŠ åˆ°<code>this</code>ä¸Šé¢ï¼ˆæ‰€ä»¥å¿…é¡»å…ˆè°ƒç”¨<code>super</code>æ–¹æ³•ï¼‰ï¼Œç„¶åå†ç”¨å­ç±»çš„æ„é€ å‡½æ•°ä¿®æ”¹<code>this</code>ã€‚</p></blockquote><h2 id="Object-getPrototypeOf"><a href="#Object-getPrototypeOf" class="headerlink" title="Object.getPrototypeOf()"></a>Object.getPrototypeOf()</h2><ul><li><code>Object.getPrototypeOf</code>æ–¹æ³•å¯ä»¥ç”¨æ¥ä»å­ç±»ä¸Šè·å–çˆ¶ç±»</li><li>å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•åˆ¤æ–­ï¼Œä¸€ä¸ªç±»æ˜¯å¦ç»§æ‰¿äº†å¦ä¸€ä¸ªç±»</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.getPrototypeOf(ColorPoint) === Point</span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="super-å…³é”®å­—"><a href="#super-å…³é”®å­—" class="headerlink" title="super å…³é”®å­—"></a>super å…³é”®å­—</h2><ul><li><code>super</code>ä½œä¸ºå‡½æ•°è°ƒç”¨æ—¶ï¼Œä»£è¡¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œåªèƒ½ç”¨åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­<ul><li>ES6 è¦æ±‚ï¼Œå­ç±»çš„æ„é€ å‡½æ•°å¿…é¡»æ‰§è¡Œä¸€æ¬¡<code>super</code>å‡½æ•°</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// superè™½ç„¶ä»£è¡¨äº†çˆ¶ç±»Açš„æ„é€ å‡½æ•°ï¼Œä½†æ˜¯è¿”å›çš„æ˜¯å­ç±»Bçš„å®ä¾‹</span></span><br><span class="line"><span class="comment">// å³superå†…éƒ¨çš„thisæŒ‡çš„æ˜¯Bçš„å®ä¾‹</span></span><br><span class="line"><span class="comment">// super()åœ¨è¿™é‡Œç›¸å½“äºA.prototype.constructor.call(this)ã€‚</span></span><br></pre></td></tr></table></figure><ul><li><code>super</code>ä½œä¸ºå¯¹è±¡æ—¶<ul><li>åœ¨æ™®é€šæ–¹æ³•ä¸­ï¼ŒæŒ‡å‘çˆ¶ç±»çš„åŸå‹å¯¹è±¡<ul><li>å®šä¹‰åœ¨çˆ¶ç±»å®ä¾‹ä¸Šçš„æ–¹æ³•æˆ–å±æ€§æ— æ³•é€šè¿‡ <code>super</code> è°ƒç”¨</li><li>ES6 è§„å®šï¼Œåœ¨å­ç±»æ™®é€šæ–¹æ³•ä¸­é€šè¿‡<code>super</code>è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œæ–¹æ³•å†…éƒ¨çš„<code>this</code>æŒ‡å‘å½“å‰çš„å­ç±»å®ä¾‹</li></ul></li><li>åœ¨é™æ€æ–¹æ³•ä¸­ï¼ŒæŒ‡å‘çˆ¶ç±»<ul><li>åœ¨å­ç±»çš„é™æ€æ–¹æ³•ä¸­é€šè¿‡<code>super</code>è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œæ–¹æ³•å†…éƒ¨çš„<code>this</code>æŒ‡å‘å½“å‰çš„å­ç±»ï¼Œè€Œä¸æ˜¯å­ç±»çš„å®ä¾‹</li></ul></li></ul></li><li>ä½¿ç”¨<code>super</code>çš„æ—¶å€™ï¼Œå¿…é¡»æ˜¾å¼æŒ‡å®šæ˜¯ä½œä¸ºå‡½æ•°ã€è¿˜æ˜¯ä½œä¸ºå¯¹è±¡ä½¿ç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™</li></ul><h2 id="ç±»çš„-prototype-å±æ€§å’Œ-proto-å±æ€§"><a href="#ç±»çš„-prototype-å±æ€§å’Œ-proto-å±æ€§" class="headerlink" title="ç±»çš„ prototype å±æ€§å’Œ __proto__ å±æ€§"></a>ç±»çš„ prototype å±æ€§å’Œ __proto__ å±æ€§</h2><blockquote><p>å¤§å¤šæ•°æµè§ˆå™¨çš„ ES5 å®ç°ä¹‹ä¸­ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰<code>__proto__</code>å±æ€§ï¼ŒæŒ‡å‘å¯¹åº”çš„æ„é€ å‡½æ•°çš„<code>prototype</code>å±æ€§ã€‚Class ä½œä¸ºæ„é€ å‡½æ•°çš„è¯­æ³•ç³–ï¼ŒåŒæ—¶æœ‰<code>prototype</code>å±æ€§å’Œ<code>__proto__</code>å±æ€§ï¼Œå› æ­¤åŒæ—¶å­˜åœ¨ä¸¤æ¡ç»§æ‰¿é“¾</p></blockquote><ul><li>å­ç±»çš„<code>__proto__</code>å±æ€§ï¼Œè¡¨ç¤ºæ„é€ å‡½æ•°çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±»</li><li>å­ç±»<code>prototype</code>å±æ€§çš„<code>__proto__</code>å±æ€§ï¼Œè¡¨ç¤ºæ–¹æ³•çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±»çš„<code>prototype</code>å±æ€§</li></ul><blockquote><p>ä½œä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå­ç±»ï¼ˆ<code>B</code>ï¼‰çš„åŸå‹ï¼ˆ<code>__proto__</code>å±æ€§ï¼‰æ˜¯çˆ¶ç±»ï¼ˆ<code>A</code>ï¼‰</p><p>ä½œä¸ºä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå­ç±»ï¼ˆ<code>B</code>ï¼‰çš„åŸå‹å¯¹è±¡ï¼ˆ<code>prototype</code>å±æ€§ï¼‰æ˜¯çˆ¶ç±»çš„åŸå‹å¯¹è±¡ï¼ˆ<code>prototype</code>å±æ€§ï¼‰çš„å®ä¾‹</p></blockquote><h3 id="å®ä¾‹çš„-proto-å±æ€§"><a href="#å®ä¾‹çš„-proto-å±æ€§" class="headerlink" title="å®ä¾‹çš„ __proto__ å±æ€§"></a>å®ä¾‹çš„ __proto__ å±æ€§</h3><ul><li>å­ç±»å®ä¾‹çš„ <code>__proto__</code> å±æ€§çš„<code>__proto__</code> å±æ€§ï¼ŒæŒ‡å‘çˆ¶ç±»å®ä¾‹çš„ <code>__proto__</code> å±æ€§ã€‚å­ç±»çš„åŸå‹ï¼Œæ˜¯çˆ¶ç±»çš„åŸå‹</li></ul><h2 id="åŸç”Ÿæ„é€ å‡½æ•°çš„ç»§æ‰¿"><a href="#åŸç”Ÿæ„é€ å‡½æ•°çš„ç»§æ‰¿" class="headerlink" title="åŸç”Ÿæ„é€ å‡½æ•°çš„ç»§æ‰¿"></a>åŸç”Ÿæ„é€ å‡½æ•°çš„ç»§æ‰¿</h2><ul><li>Boolean()</li><li>Number()</li><li>String()</li><li>Array()</li><li>Date()</li><li>Function()</li><li>RegExp()</li><li>Error()</li><li>Object()</li></ul><h2 id="Mixin-æ¨¡å¼çš„å®ç°"><a href="#Mixin-æ¨¡å¼çš„å®ç°" class="headerlink" title="Mixin æ¨¡å¼çš„å®ç°"></a>Mixin æ¨¡å¼çš„å®ç°</h2><ul><li>Mixin æŒ‡çš„æ˜¯å¤šä¸ªå¯¹è±¡åˆæˆä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œæ–°å¯¹è±¡å…·æœ‰å„ä¸ªç»„æˆæˆå‘˜çš„æ¥å£</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = &#123;</span><br><span class="line">  a: <span class="string">'a'</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> b = &#123;</span><br><span class="line">  b: <span class="string">'b'</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> c = &#123;...a, ...b&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> ECMAScript 6 å…¥é—¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>asyncå‡½æ•°</title>
      <link href="/2020/03/24/20-async%E5%87%BD%E6%95%B0/"/>
      <url>/2020/03/24/20-async%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="async-å‡½æ•°"><a href="#async-å‡½æ•°" class="headerlink" title="async å‡½æ•°"></a>async å‡½æ•°</h1><h2 id="å«ä¹‰"><a href="#å«ä¹‰" class="headerlink" title="å«ä¹‰"></a>å«ä¹‰</h2><ul><li><p>async ä½¿å¼‚æ­¥æ“ä½œå˜å¾—æ›´åŠ æ–¹ä¾¿ï¼ŒGenerator çš„è¯­æ³•ç³–</p></li><li><p>å°† Generator å‡½æ•°çš„æ˜Ÿå·ï¼ˆ*ï¼‰æ›¿æ¢æˆ asyncï¼Œå°† yield æ›¿æ¢æˆ await</p></li><li><p>async å¯¹ Generator å‡½æ•°çš„æ”¹è¿›ï¼š</p><ul><li>å†…ç½®æ‰§è¡Œå™¨ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œ<ul><li>Generator éœ€è¦ co æ¨¡å—æ‰èƒ½è‡ªåŠ¨æ‰§è¡Œ</li><li>æˆ–è€…è°ƒç”¨ next æ‰‹åŠ¨æ‰§è¡Œ</li></ul></li><li>æ›´å¥½çš„è¯­ä¹‰</li><li>æ›´å¹¿çš„é€‚ç”¨æ€§<ul><li>await åé¢å¯ä»¥æ˜¯ Promise å¯¹è±¡å’ŒåŸå§‹ç±»å‹çš„å€¼ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼ï¼Œä¼šè‡ªåŠ¨è½¬æˆç«‹å³ resolved çš„ Promise å¯¹è±¡ï¼‰</li></ul></li><li>è¿”å›å€¼æ˜¯ Promise</li></ul></li><li><p>async å¯ä»¥çœ‹ä½œå¤šä¸ªå¼‚æ­¥æ“ä½œï¼ŒåŒ…è£…æˆçš„ä¸€ä¸ª Promise å¯¹è±¡ï¼Œè€Œ await å‘½ä»¤å°±æ˜¯å†…éƒ¨ then å‘½ä»¤çš„è¯­æ³•ç³–</p></li></ul><h2 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h2><ul><li>async å‡½æ•°è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ <code>then</code> æ–¹æ³•æ·»åŠ å›è°ƒå‡½æ•°</li><li>å½“å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€æ—¦é‡åˆ° <code>await</code> å°±ä¼šå…ˆè¿”å›ï¼Œç­‰åˆ°å¼‚æ­¥æ“ä½œå®Œæˆï¼Œå†æ¥ç€æ‰§è¡Œå‡½æ•°ä½“å†…åé¢çš„è¯­å¥</li></ul><h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><ul><li><p>è¿”å› Promise å¯¹è±¡</p><ul><li><code>async</code> å‡½æ•°å†…éƒ¨ <code>return</code> è¯­å¥è¿”å›å€¼ï¼Œä¼šæˆä¸º <code>then</code> æ–¹æ³•å›è°ƒå‡½æ•°çš„å‚æ•°</li><li><code>async</code> å‡½æ•°å†…éƒ¨æŠ›å‡ºé”™è¯¯ï¼Œä¼šå¯¼è‡´è¿”å›çš„ Promise å¯¹è±¡å˜ä¸º <code>reject</code> çŠ¶æ€</li></ul></li><li><p>Promise å¯¹è±¡çš„çŠ¶æ€å˜åŒ–</p><ul><li><code>async</code> å‡½æ•°è¿”å›çš„ Promise å¯¹è±¡ï¼Œå¿…é¡»ç­‰åˆ°å†…éƒ¨æ‰€æœ‰ <code>await</code> å‘½ä»¤åé¢çš„ Promise å¯¹è±¡æ‰§è¡Œå®Œï¼Œæ‰ä¼šå‘ç”ŸçŠ¶æ€æ”¹å˜</li><li>é™¤é <code>return</code> æˆ–æŠ›å‡ºé”™è¯¯</li><li>ä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰ <code>async</code> å‡½æ•°å†…éƒ¨çš„å¼‚æ­¥æ“ä½œæ‰§è¡Œå®Œï¼Œæ‰ä¼šæ‰§è¡Œ <code>then</code> æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°</li></ul></li><li><p>await å‘½ä»¤</p><ul><li>å¦‚æœ await åé¢æ˜¯ä¸€ä¸ª <code>thenable</code> å¯¹è±¡ï¼ˆå®šä¹‰äº† <code>then</code> æ–¹æ³•çš„å¯¹è±¡ï¼‰ï¼Œä¼šå°†å…¶åŒç­‰äº Promise å¯¹è±¡</li><li>ä»»ä½•ä¸€ä¸ª <code>await</code> è¯­å¥åé¢çš„ Promise å¯¹è±¡å˜ä¸º <code>reject</code> çŠ¶æ€ï¼Œæ•´ä¸ª <code>async</code> å‡½æ•°éƒ½ä¼šä¸­æ–­æ‰§è¡Œ<ul><li>å¯ä»¥åœ¨ <code>async</code>  å†…éƒ¨è¿›è¡Œé”™è¯¯å¤„ç†ï¼Œcatch é”™è¯¯å°±ä¸ä¼šå½±å“åç»­æ‰§è¡Œ</li></ul></li></ul></li><li><p>æ³¨æ„ç‚¹</p><ul><li><p>æœ€å¥½æŠŠ <code>await</code> å‘½ä»¤æ”¾åœ¨ <code>try...catch</code> ä»£ç å—ä¸­</p></li><li><p>å¤šä¸ª <code>await</code> å‘½ä»¤åé¢çš„å¼‚æ­¥æ“ä½œï¼Œå¦‚æœä¸å­˜åœ¨ç»§å‘å…³ç³»ï¼Œæœ€å¥½åŒæ—¶è§¦å‘ï¼Œæ¯”è¾ƒä¸è€—æ—¶</p><ul><li><pre><code class="js"><span class="keyword">let</span> [foo, bar] = <span class="keyword">await</span> <span class="built_in">Promise</span>.all([getFoo(), getBar()]);<span class="comment">// æˆ–</span><span class="keyword">let</span> fooPromise = getFoo();<span class="keyword">let</span> barPromise = getBar();<span class="keyword">let</span> foo = <span class="keyword">await</span> fooPromise;<span class="keyword">let</span> bar = <span class="keyword">await</span> barPromise;&lt;!--ï¿¼<span class="number">0</span>--&gt;</code></pre></li></ul></li></ul></li></ul><h2 id="é¡¶å±‚-await"><a href="#é¡¶å±‚-await" class="headerlink" title="é¡¶å±‚ await"></a>é¡¶å±‚ await</h2><ul><li>è¯­æ³•ææ¡ˆ</li><li>å€Ÿç”¨ <code>await</code> è§£å†³æ¨¡å—å¼‚æ­¥åŠ è½½çš„é—®é¢˜</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> ECMAScript 6 å…¥é—¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue å¸¸è€ƒçŸ¥è¯†ç‚¹</title>
      <link href="/2020/03/24/Vue%E5%9F%BA%E7%A1%80/"/>
      <url>/2020/03/24/Vue%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="Vue-å¸¸è€ƒçŸ¥è¯†ç‚¹"><a href="#Vue-å¸¸è€ƒçŸ¥è¯†ç‚¹" class="headerlink" title="Vue å¸¸è€ƒçŸ¥è¯†ç‚¹"></a>Vue å¸¸è€ƒçŸ¥è¯†ç‚¹</h1><h2 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h2><ol><li><p><code>beforeCreate</code> ï¼šè·å–ä¸åˆ° <code>props</code> æˆ–è€… <code>data</code> ä¸­çš„æ•°æ®çš„ï¼Œå› ä¸ºè¿™äº›æ•°æ®çš„åˆå§‹åŒ–éƒ½åœ¨ <code>initState</code> ä¸­ã€‚</p></li><li><p><code>created</code> ï¼šå¯ä»¥è®¿é—®åˆ°ä¹‹å‰ä¸èƒ½è®¿é—®åˆ°çš„æ•°æ®ï¼Œä½†æ˜¯è¿™æ—¶å€™ç»„ä»¶è¿˜æ²¡è¢«æŒ‚è½½ï¼Œæ‰€ä»¥æ˜¯çœ‹ä¸åˆ°çš„ã€‚</p></li><li><p><code>beforeMount</code> ï¼šå¼€å§‹åˆ›å»º VDOMï¼Œç»„ä»¶ä¸­å¦‚æœæœ‰å­ç»„ä»¶çš„è¯ï¼Œä¼šé€’å½’æŒ‚è½½å­ç»„ä»¶</p></li><li><p><code>mounted</code> ï¼šå°† VDOM æ¸²æŸ“ä¸ºçœŸå® DOM å¹¶ä¸”æ¸²æŸ“æ•°æ®</p></li><li><p><code>beforeUpdate</code> ï¼šæ•°æ®æ›´æ–°å‰</p></li><li><p><code>updated</code>ï¼šæ•°æ®æ›´æ–°å</p></li></ol><ul><li><code>keep-alive</code> ç‹¬æœ‰çš„ç”Ÿå‘½å‘¨æœŸï¼Œåˆ†åˆ«ä¸º <code>activated</code> å’Œ <code>deactivated</code> <ul><li>ç”¨ <code>keep-alive</code> åŒ…è£¹çš„ç»„ä»¶åœ¨åˆ‡æ¢æ—¶ä¸ä¼šè¿›è¡Œé”€æ¯ï¼Œè€Œæ˜¯ç¼“å­˜åˆ°å†…å­˜ä¸­å¹¶æ‰§è¡Œ <code>deactivated</code> é’©å­å‡½æ•°ï¼Œå‘½ä¸­ç¼“å­˜æ¸²æŸ“åä¼šæ‰§è¡Œ <code>actived</code> é’©å­å‡½æ•°ã€‚</li></ul></li></ul><ol start="7"><li><code>beforeDestroy</code> ï¼šé€‚åˆç§»é™¤äº‹ä»¶ã€å®šæ—¶å™¨ç­‰ç­‰ï¼Œå¦åˆ™å¯èƒ½ä¼šå¼•èµ·å†…å­˜æ³„éœ²çš„é—®é¢˜ã€‚ç„¶åè¿›è¡Œä¸€ç³»åˆ—çš„é”€æ¯æ“ä½œï¼Œå¦‚æœæœ‰å­ç»„ä»¶çš„è¯ï¼Œä¹Ÿä¼šé€’å½’é”€æ¯å­ç»„ä»¶</li><li><code>destroyed</code>ï¼šæ‰€æœ‰å­ç»„ä»¶éƒ½é”€æ¯å®Œæ¯•åæ‰ä¼šæ‰§è¡Œ</li></ol><h2 id="ç»„ä»¶é€šä¿¡"><a href="#ç»„ä»¶é€šä¿¡" class="headerlink" title="ç»„ä»¶é€šä¿¡"></a>ç»„ä»¶é€šä¿¡</h2><h3 id="çˆ¶å­ç»„ä»¶é€šä¿¡"><a href="#çˆ¶å­ç»„ä»¶é€šä¿¡" class="headerlink" title="çˆ¶å­ç»„ä»¶é€šä¿¡"></a>çˆ¶å­ç»„ä»¶é€šä¿¡</h3><ul><li>propsã€emit</li><li>è®¿é—® <code>$parent</code> æˆ–è€… <code>$children</code> å¯¹è±¡</li></ul><h3 id="å…„å¼Ÿç»„ä»¶é€šä¿¡"><a href="#å…„å¼Ÿç»„ä»¶é€šä¿¡" class="headerlink" title="å…„å¼Ÿç»„ä»¶é€šä¿¡"></a>å…„å¼Ÿç»„ä»¶é€šä¿¡</h3><ul><li>é€šè¿‡æŸ¥æ‰¾çˆ¶ç»„ä»¶ä¸­çš„å­ç»„ä»¶å®ç°ï¼Œä¹Ÿå°±æ˜¯ <code>this.$parent.$children</code></li><li>åœ¨ <code>$children</code> ä¸­å¯ä»¥é€šè¿‡ç»„ä»¶ <code>name</code> æŸ¥è¯¢åˆ°éœ€è¦çš„ç»„ä»¶å®ä¾‹</li></ul><h3 id="è·¨å¤šå±‚çº§ç»„ä»¶é€šä¿¡"><a href="#è·¨å¤šå±‚çº§ç»„ä»¶é€šä¿¡" class="headerlink" title="è·¨å¤šå±‚çº§ç»„ä»¶é€šä¿¡"></a>è·¨å¤šå±‚çº§ç»„ä»¶é€šä¿¡</h3><h3 id="ä»»æ„ç»„ä»¶"><a href="#ä»»æ„ç»„ä»¶" class="headerlink" title="ä»»æ„ç»„ä»¶"></a>ä»»æ„ç»„ä»¶</h3><ul><li>Vuex</li></ul><h2 id="computed-å’Œ-watch-åŒºåˆ«"><a href="#computed-å’Œ-watch-åŒºåˆ«" class="headerlink" title="computed å’Œ watch åŒºåˆ«"></a>computed å’Œ watch åŒºåˆ«</h2><ul><li><p><code>computed</code> æ˜¯è®¡ç®—å±æ€§ï¼Œä¾èµ–å…¶ä»–å±æ€§è®¡ç®—å€¼ï¼Œå¹¶ä¸” <code>computed</code> çš„å€¼æœ‰ç¼“å­˜ï¼Œåªæœ‰å½“è®¡ç®—å€¼å˜åŒ–æ‰ä¼šè¿”å›å†…å®¹ã€‚</p></li><li><p><code>watch</code> ç›‘å¬åˆ°å€¼çš„å˜åŒ–å°±ä¼šæ‰§è¡Œå›è°ƒï¼Œåœ¨å›è°ƒä¸­å¯ä»¥è¿›è¡Œä¸€äº›é€»è¾‘æ“ä½œã€‚</p></li></ul><h2 id="v-show-ä¸-v-if-åŒºåˆ«"><a href="#v-show-ä¸-v-if-åŒºåˆ«" class="headerlink" title="v-show ä¸ v-if åŒºåˆ«"></a>v-show ä¸ v-if åŒºåˆ«</h2><ul><li><p><code>v-show</code> åªæ˜¯åœ¨ <code>display: none</code> å’Œ <code>display: block</code> ä¹‹é—´åˆ‡æ¢ã€‚</p><ul><li>æ— è®ºåˆå§‹æ¡ä»¶æ˜¯ä»€ä¹ˆéƒ½ä¼šè¢«æ¸²æŸ“å‡ºæ¥ï¼Œåé¢åªéœ€è¦åˆ‡æ¢ CSSï¼ŒDOM è¿˜æ˜¯ä¸€ç›´ä¿ç•™ç€çš„ã€‚</li><li>æ‰€ä»¥æ€»çš„æ¥è¯´ <code>v-show</code> åœ¨åˆå§‹æ¸²æŸ“æ—¶æœ‰æ›´é«˜çš„å¼€é”€ï¼Œä½†æ˜¯åˆ‡æ¢å¼€é”€å¾ˆå°ï¼Œæ›´é€‚åˆäºé¢‘ç¹åˆ‡æ¢çš„åœºæ™¯ã€‚</li></ul></li><li><p><code>v-if</code> çš„è¯å°±å¾—è¯´åˆ° Vue åº•å±‚çš„ç¼–è¯‘äº†ã€‚</p><ul><li>å½“å±æ€§åˆå§‹ä¸º <code>false</code> æ—¶ï¼Œç»„ä»¶å°±ä¸ä¼šè¢«æ¸²æŸ“ï¼Œç›´åˆ°æ¡ä»¶ä¸º <code>true</code>ï¼Œå¹¶ä¸”åˆ‡æ¢æ¡ä»¶æ—¶ä¼šè§¦å‘é”€æ¯/æŒ‚è½½ç»„ä»¶ï¼Œæ‰€ä»¥æ€»çš„æ¥è¯´åœ¨åˆ‡æ¢æ—¶å¼€é”€æ›´é«˜ï¼Œæ›´é€‚åˆä¸ç»å¸¸åˆ‡æ¢çš„åœºæ™¯ã€‚</li><li>å¹¶ä¸”åŸºäº <code>v-if</code> çš„è¿™ç§æƒ°æ€§æ¸²æŸ“æœºåˆ¶ï¼Œå¯ä»¥åœ¨å¿…è¦çš„æ—¶å€™æ‰å»æ¸²æŸ“ç»„ä»¶ï¼Œå‡å°‘æ•´ä¸ªé¡µé¢çš„åˆå§‹æ¸²æŸ“å¼€é”€ã€‚</li></ul></li></ul><h2 id="ç¼–è¯‘è¿‡ç¨‹"><a href="#ç¼–è¯‘è¿‡ç¨‹" class="headerlink" title="ç¼–è¯‘è¿‡ç¨‹"></a>ç¼–è¯‘è¿‡ç¨‹</h2><ul><li>é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼å°†æ¨¡ç‰ˆè§£æä¸º ASTï¼ˆAbstract Syntax Treeï¼ŒæŠ½è±¡è¯­æ³•æ ‘ï¼‰</li><li>ä¼˜åŒ– ASTï¼šå¯¹èŠ‚ç‚¹è¿›è¡Œäº†é™æ€å†…å®¹æå–ï¼Œä¹Ÿå°±æ˜¯å°†æ°¸è¿œä¸ä¼šå˜åŠ¨çš„èŠ‚ç‚¹æå–äº†å‡ºæ¥ï¼Œå®ç°å¤ç”¨ Virtual DOMï¼Œè·³è¿‡å¯¹æ¯”ç®—æ³•çš„åŠŸ</li><li>å°† AST è½¬æ¢ä¸º <code>render</code> å‡½æ•°ï¼šéå†æ•´ä¸ª ASTï¼Œæ ¹æ®ä¸åŒçš„æ¡ä»¶ç”Ÿæˆä¸åŒçš„ä»£ç </li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactå’ŒVue</title>
      <link href="/2020/03/24/React%E5%92%8CVue/"/>
      <url>/2020/03/24/React%E5%92%8CVue/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹è½¬è‡ªæ˜é‡‘å°å†Œã€Šå‰ç«¯é¢è¯•ä¹‹é“ã€‹</p><h1 id="React-å’Œ-Vue"><a href="#React-å’Œ-Vue" class="headerlink" title="React å’Œ Vue"></a>React å’Œ Vue</h1><h2 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h2><p>ä¸ç®¡æ˜¯ React è¿˜æ˜¯ Vueï¼Œå®ƒä»¬éƒ½ä¸æ˜¯ MVVM æ¡†æ¶ï¼Œåªæ˜¯å€Ÿé‰´ MVVM çš„æ€è·¯</p><ul><li>View ï¼šç”¨æˆ·çœ‹åˆ°çš„è§†å›¾</li><li>Modelï¼šæœ¬åœ°æ•°æ®å’Œæ•°æ®åº“ä¸­çš„æ•°æ®</li></ul><p>ä¼ ç»Ÿçš„ MVC æ¶æ„é€šå¸¸æ˜¯ä½¿ç”¨æ§åˆ¶å™¨æ›´æ–°æ¨¡å‹ï¼Œè§†å›¾ä»æ¨¡å‹ä¸­è·å–æ•°æ®å»æ¸²æŸ“ã€‚å½“ç”¨æˆ·æœ‰è¾“å…¥æ—¶ï¼Œä¼šé€šè¿‡æ§åˆ¶å™¨å»æ›´æ–°æ¨¡å‹ï¼Œå¹¶ä¸”é€šçŸ¥è§†å›¾è¿›è¡Œæ›´æ–°ã€‚</p><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200324175720375.png" alt="image-20200324175720375" style="zoom:50%;"><ul><li>ViewModelï¼šåªå…³å¿ƒæ•°æ®å’Œä¸šåŠ¡çš„å¤„ç†ï¼Œä¸å…³å¿ƒ View å¦‚ä½•å¤„ç†æ•°æ®</li></ul><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200324175836531.png" alt="image-20200324175836531" style="zoom:50%;"><ul><li>Binnderï¼ˆéšå¼ï¼‰ï¼šå®ç°äº† View å’Œ ViewModel çš„ç»‘å®š</li></ul><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200324180259118.png" alt="image-20200324180259118" style="zoom:50%;"><ul><li>ç²¾é«“ï¼š<strong>é€šè¿‡ ViewModel å°†è§†å›¾ä¸­çš„çŠ¶æ€å’Œç”¨æˆ·çš„è¡Œä¸ºåˆ†ç¦»å‡ºä¸€ä¸ªæŠ½è±¡</strong></li></ul><h2 id="Virtual-DOM"><a href="#Virtual-DOM" class="headerlink" title="Virtual DOM"></a>Virtual DOM</h2><h3 id="JS-æ¨¡æ‹Ÿ-DOM"><a href="#JS-æ¨¡æ‹Ÿ-DOM" class="headerlink" title="JS æ¨¡æ‹Ÿ DOM"></a>JS æ¨¡æ‹Ÿ DOM</h3><ul><li>æ“ä½œ DOM å¾ˆæ…¢ï¼Œç›¸è¾ƒäº DOM æ¥è¯´ï¼Œæ“ä½œ JS å¯¹è±¡ä¼šå¿«å¾ˆå¤šï¼Œå¯ä»¥é€šè¿‡ JS æ¥æ¨¡æ‹Ÿ DOM</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ul = &#123;</span><br><span class="line">  tag: <span class="string">'ul'</span>,</span><br><span class="line">  props: &#123;</span><br><span class="line">    class: 'list'</span><br><span class="line">  &#125;,</span><br><span class="line">  children: &#123;</span><br><span class="line">    tag: <span class="string">'li'</span>,</span><br><span class="line">    children: <span class="string">'1'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç å¯¹åº”çš„ DOM å°±æ˜¯</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">'list'</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Virtual-DOM-çš„-diff-ç®—æ³•"><a href="#Virtual-DOM-çš„-diff-ç®—æ³•" class="headerlink" title="Virtual DOM çš„ diff ç®—æ³•"></a>Virtual DOM çš„ diff ç®—æ³•</h3><ul><li>é€šè¿‡ JS æ¥æ¨¡æ‹Ÿ DOM å¹¶ä¸”æ¸²æŸ“å¯¹åº”çš„ DOM åªæ˜¯ç¬¬ä¸€æ­¥ï¼Œéš¾ç‚¹åœ¨äº<u>å¦‚ä½•åˆ¤æ–­æ–°æ—§ä¸¤ä¸ª JS å¯¹è±¡çš„<strong>æœ€å°å·®å¼‚</strong>å¹¶ä¸”å®ç°<strong>å±€éƒ¨æ›´æ–°</strong> DOMã€‚</u></li><li>Virtual DOM åªä¼šå¯¹åŒä¸€ä¸ªå±‚çº§çš„å…ƒç´ è¿›è¡Œå¯¹æ¯”<ul><li>æ·±åº¦ä¼˜å…ˆéå†ï¼Œæ¯éå†åˆ°ä¸€ä¸ªèŠ‚ç‚¹å°±æŠŠè¯¥èŠ‚ç‚¹å’Œæ–°çš„çš„æ ‘è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœæœ‰å·®å¼‚çš„è¯å°±è®°å½•åˆ°ä¸€ä¸ªå¯¹è±¡é‡Œ<ul><li>key ä½œä¸ºå”¯ä¸€è¡¨ç¤º</li></ul></li><li>å·®å¼‚ç±»å‹<ul><li>æ›¿æ¢æ‰åŸæ¥çš„èŠ‚ç‚¹</li><li>ç§»åŠ¨ã€åˆ é™¤ã€æ–°å¢å­èŠ‚ç‚¹</li><li>ä¿®æ”¹äº†èŠ‚ç‚¹çš„å±æ€§</li><li>å¯¹äºæ–‡æœ¬èŠ‚ç‚¹ï¼Œæ–‡æœ¬å†…å®¹å¯èƒ½ä¼šæ”¹å˜</li></ul></li></ul></li></ul><h3 id="æŠŠå·®å¼‚åº”ç”¨åˆ°çœŸæ­£çš„DOMæ ‘ä¸Š"><a href="#æŠŠå·®å¼‚åº”ç”¨åˆ°çœŸæ­£çš„DOMæ ‘ä¸Š" class="headerlink" title="æŠŠå·®å¼‚åº”ç”¨åˆ°çœŸæ­£çš„DOMæ ‘ä¸Š"></a>æŠŠå·®å¼‚åº”ç”¨åˆ°çœŸæ­£çš„DOMæ ‘ä¸Š</h3><ul><li>å¯¹ DOM æ ‘ä¹Ÿè¿›è¡Œæ·±åº¦ä¼˜å…ˆçš„éå†ï¼Œéå†çš„æ—¶å€™ä»ä¿å­˜å·®å¼‚çš„å¯¹è±¡ä¸­æ‰¾å‡ºå½“å‰éå†çš„èŠ‚ç‚¹å·®å¼‚ï¼Œç„¶åè¿›è¡Œ DOM æ“ä½œ</li></ul><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1\. æ„å»ºè™šæ‹ŸDOM</span></span><br><span class="line"><span class="keyword">var</span> tree = el(<span class="string">'div'</span>, &#123;<span class="string">'id'</span>: <span class="string">'container'</span>&#125;, [</span><br><span class="line">    el(<span class="string">'h1'</span>, &#123;<span class="attr">style</span>: <span class="string">'color: blue'</span>&#125;, [<span class="string">'simple virtal dom'</span>]),</span><br><span class="line">    el(<span class="string">'p'</span>, [<span class="string">'Hello, virtual-dom'</span>]),</span><br><span class="line">    el(<span class="string">'ul'</span>, [el(<span class="string">'li'</span>)])</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2\. é€šè¿‡è™šæ‹ŸDOMæ„å»ºçœŸæ­£çš„DOM</span></span><br><span class="line"><span class="keyword">var</span> root = tree.render()</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(root)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3\. ç”Ÿæˆæ–°çš„è™šæ‹ŸDOM</span></span><br><span class="line"><span class="keyword">var</span> newTree = el(<span class="string">'div'</span>, &#123;<span class="string">'id'</span>: <span class="string">'container'</span>&#125;, [</span><br><span class="line">    el(<span class="string">'h1'</span>, &#123;<span class="attr">style</span>: <span class="string">'color: red'</span>&#125;, [<span class="string">'simple virtal dom'</span>]),</span><br><span class="line">    el(<span class="string">'p'</span>, [<span class="string">'Hello, virtual-dom'</span>]),</span><br><span class="line">    el(<span class="string">'ul'</span>, [el(<span class="string">'li'</span>), el(<span class="string">'li'</span>)])</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4\. æ¯”è¾ƒä¸¤æ£µè™šæ‹ŸDOMæ ‘çš„ä¸åŒ</span></span><br><span class="line"><span class="keyword">var</span> patches = diff(tree, newTree)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5\. åœ¨çœŸæ­£çš„DOMå…ƒç´ ä¸Šåº”ç”¨å˜æ›´</span></span><br><span class="line">patch(root, patches)</span><br></pre></td></tr></table></figure><h2 id="è·¯ç”±åŸç†"><a href="#è·¯ç”±åŸç†" class="headerlink" title="è·¯ç”±åŸç†"></a>è·¯ç”±åŸç†</h2><ul><li><strong>ç›‘å¬ URL çš„å˜åŒ–</strong>ï¼Œç„¶ååŒ¹é…è·¯ç”±è§„åˆ™ï¼Œæ˜¾ç¤ºç›¸åº”çš„é¡µé¢</li></ul><h3 id="Hash-æ¨¡å¼"><a href="#Hash-æ¨¡å¼" class="headerlink" title="Hash æ¨¡å¼"></a>Hash æ¨¡å¼</h3><ul><li><code>www.test.com/#/</code> å°±æ˜¯ Hash URLï¼Œå½“ <code>#</code> åé¢çš„å“ˆå¸Œå€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¯ä»¥é€šè¿‡ <code>hashchange</code> äº‹ä»¶æ¥ç›‘å¬åˆ° URL çš„å˜åŒ–ï¼Œä»è€Œè¿›è¡Œè·³è½¬é¡µé¢ï¼Œå¹¶ä¸”æ— è®ºå“ˆå¸Œå€¼å¦‚ä½•å˜åŒ–ï¼ŒæœåŠ¡ç«¯æ¥æ”¶åˆ°çš„ URL è¯·æ±‚æ°¸è¿œæ˜¯ <code>www.test.com</code>ã€‚</li></ul><h3 id="History-æ¨¡å¼"><a href="#History-æ¨¡å¼" class="headerlink" title="History æ¨¡å¼"></a>History æ¨¡å¼</h3><ul><li>History æ¨¡å¼æ˜¯ HTML5 æ–°æ¨å‡ºçš„åŠŸèƒ½ï¼Œä¸»è¦ä½¿ç”¨ <code>history.pushState</code> å’Œ <code>history.replaceState</code> æ”¹å˜ URLã€‚</li><li>é€šè¿‡ History æ¨¡å¼æ”¹å˜ URL åŒæ ·ä¸ä¼šå¼•èµ·é¡µé¢çš„åˆ·æ–°ï¼Œåªä¼šæ›´æ–°æµè§ˆå™¨çš„å†å²è®°å½•ã€‚</li></ul><h3 id="å¯¹æ¯”"><a href="#å¯¹æ¯”" class="headerlink" title="å¯¹æ¯”"></a>å¯¹æ¯”</h3><ul><li>Hash æ¨¡å¼åªå¯ä»¥æ›´æ”¹ <code>#</code> åé¢çš„å†…å®¹ï¼ŒHistory æ¨¡å¼å¯ä»¥é€šè¿‡ API è®¾ç½®ä»»æ„çš„åŒæº URL</li><li>History æ¨¡å¼å¯ä»¥é€šè¿‡ API æ·»åŠ ä»»æ„ç±»å‹çš„æ•°æ®åˆ°å†å²è®°å½•ä¸­ï¼ŒHash æ¨¡å¼åªèƒ½æ›´æ”¹å“ˆå¸Œå€¼ï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦ä¸²</li><li>Hash æ¨¡å¼æ— éœ€åç«¯é…ç½®ï¼Œå¹¶ä¸”å…¼å®¹æ€§å¥½ã€‚History æ¨¡å¼åœ¨ç”¨æˆ·æ‰‹åŠ¨è¾“å…¥åœ°å€æˆ–è€…åˆ·æ–°é¡µé¢çš„æ—¶å€™ä¼šå‘èµ· URL è¯·æ±‚ï¼Œåç«¯éœ€è¦é…ç½® <code>index.html</code> é¡µé¢ç”¨äºåŒ¹é…ä¸åˆ°é™æ€èµ„æºçš„æ—¶å€™ã€‚</li></ul><h2 id="Vue-å’Œ-React-ä¹‹é—´çš„åŒºåˆ«"><a href="#Vue-å’Œ-React-ä¹‹é—´çš„åŒºåˆ«" class="headerlink" title="Vue å’Œ React ä¹‹é—´çš„åŒºåˆ«"></a>Vue å’Œ React ä¹‹é—´çš„åŒºåˆ«</h2><ul><li>v-model</li><li>setState</li><li>JSX</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±å…¥å“åº”å¼åŸç†</title>
      <link href="/2020/03/24/%E6%B7%B1%E5%85%A5%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86/"/>
      <url>/2020/03/24/%E6%B7%B1%E5%85%A5%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ç®€å†ä¸Šå†™äº†ç†Ÿæ‚‰ Vueï¼ˆå¹¶ä¸ï¼‰ï¼Œåªå¥½ä¸´æ—¶æŠ±ä½›è„šâ€¦â€¦</p><p><a href="https://cn.vuejs.org/v2/guide/reactivity.html" target="_blank" rel="noopener">https://cn.vuejs.org/v2/guide/reactivity.html</a></p><h1 id="æ·±å…¥å“åº”å¼åŸç†"><a href="#æ·±å…¥å“åº”å¼åŸç†" class="headerlink" title="æ·±å…¥å“åº”å¼åŸç†"></a>æ·±å…¥å“åº”å¼åŸç†</h1><blockquote><p>Vue æœ€ç‹¬ç‰¹çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œæ˜¯å…¶éä¾µå…¥æ€§çš„å“åº”å¼ç³»ç»Ÿã€‚</p><p>æ•°æ®æ¨¡å‹ä»…ä»…æ˜¯æ™®é€šçš„ JavaScript å¯¹è±¡ã€‚è€Œå½“ä½ ä¿®æ”¹å®ƒä»¬æ—¶ï¼Œè§†å›¾ä¼šè¿›è¡Œæ›´æ–°ï¼Œè¿™ä½¿å¾—çŠ¶æ€ç®¡ç†éå¸¸ç®€å•ç›´æ¥ã€‚</p><p>ä¸è¿‡ç†è§£å…¶å·¥ä½œåŸç†åŒæ ·é‡è¦ï¼Œè¿™æ ·ä½ å¯ä»¥é¿å¼€ä¸€äº›å¸¸è§çš„é—®é¢˜ã€‚</p></blockquote><h2 id="å¦‚ä½•è¿½è¸ªå˜åŒ–"><a href="#å¦‚ä½•è¿½è¸ªå˜åŒ–" class="headerlink" title="å¦‚ä½•è¿½è¸ªå˜åŒ–"></a>å¦‚ä½•è¿½è¸ªå˜åŒ–</h2><blockquote><p>å½“ä½ æŠŠä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ä¼ å…¥ Vue å®ä¾‹ä½œä¸º <code>data</code> é€‰é¡¹ï¼ŒVue å°†éå†æ­¤å¯¹è±¡æ‰€æœ‰çš„å±æ€§ï¼Œå¹¶ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" target="_blank" rel="noopener"><code>Object.defineProperty</code></a> æŠŠè¿™äº›å±æ€§å…¨éƒ¨è½¬ä¸º <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Working_with_Objects#å®šä¹‰_getters_ä¸_setters" target="_blank" rel="noopener">getter/setter</a>ã€‚</p></blockquote><p>å…ˆæ¥çœ‹çœ‹è¿™ä¸ª<code>Object.defineProperty</code>ï¼ŒæŸ¥é˜… MDNï¼š</p><blockquote><p><code>Object.defineProperty()</code> æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œå¹¶è¿”å›æ­¤å¯¹è±¡ã€‚</p><p>ç›´æ¥åœ¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener"><code>Object</code></a> æ„é€ å™¨å¯¹è±¡ä¸Šè°ƒç”¨æ­¤æ–¹æ³•ï¼Œè€Œä¸æ˜¯å®ä¾‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123; <span class="attr">a</span>:<span class="number">0</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperties(o, &#123;</span><br><span class="line">    <span class="string">"b"</span>: &#123; <span class="attr">get</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="keyword">this</span>.a + <span class="number">1</span>; &#125; &#125;,</span><br><span class="line">    <span class="string">"c"</span>: &#123; <span class="attr">set</span>: <span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123; <span class="keyword">this</span>.a = x / <span class="number">2</span>; &#125; &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">o.c = <span class="number">10</span> <span class="comment">// Runs the setter, which assigns 10 / 2 (5) to the 'a' property</span></span><br><span class="line"><span class="built_in">console</span>.log(o.b) <span class="comment">// Runs the getter, which yields a + 1 or 6</span></span><br></pre></td></tr></table></figure></blockquote><p>å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯ä¿®æ”¹ object å¯¹è±¡çš„æ–¹æ³•å˜›ï¼Œæ³¨æ„è¿™ä¸æ˜¯å®ä¾‹çš„æ–¹æ³•ï¼Œè€Œæ˜¯æ„é€ å™¨çš„ã€‚</p><blockquote><p><code>Object.defineProperty</code> æ˜¯ ES5 ä¸­ä¸€ä¸ªæ— æ³• shim çš„ç‰¹æ€§ï¼Œè¿™ä¹Ÿå°±æ˜¯ Vue ä¸æ”¯æŒ IE8 ä»¥åŠæ›´ä½ç‰ˆæœ¬æµè§ˆå™¨çš„åŸå› ã€‚</p></blockquote><p>è¿™é‡Œæ˜¯ shim æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿshim å¯ä»¥å°†æ–°çš„ API å¼•å…¥åˆ°æ—§çš„ç¯å¢ƒä¸­ï¼Œè€Œä¸”ä»…é å°±ç¯å¢ƒä¸­å·²æœ‰çš„æ‰‹æ®µå®ç°ã€‚æ‰€ä»¥è¿™é‡Œçš„æ„æ€æ˜¯è¯´ï¼Œ<code>Object.defineProperty</code>  è¿™ä¸ªæ–¹æ³•æ˜¯æ— æ³•å¼•å…¥åˆ°æ—§çš„ç¯å¢ƒçš„ï¼Œæ‰€ä»¥ä¸æ”¯æŒä½ç‰ˆæœ¬æµè§ˆå™¨ã€‚</p><blockquote><p>è¿™äº› getter/setter å¯¹ç”¨æˆ·æ¥è¯´æ˜¯ä¸å¯è§çš„ï¼Œä½†æ˜¯åœ¨å†…éƒ¨å®ƒä»¬è®© Vue èƒ½å¤Ÿè¿½è¸ªä¾èµ–ï¼Œåœ¨å±æ€§è¢«è®¿é—®å’Œä¿®æ”¹æ—¶é€šçŸ¥å˜æ›´ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ä¸åŒæµè§ˆå™¨åœ¨æ§åˆ¶å°æ‰“å°æ•°æ®å¯¹è±¡æ—¶å¯¹ getter/setter çš„æ ¼å¼åŒ–å¹¶ä¸åŒï¼Œæ‰€ä»¥å»ºè®®å®‰è£… <a href="https://github.com/vuejs/vue-devtools" target="_blank" rel="noopener">vue-devtools</a> æ¥è·å–å¯¹æ£€æŸ¥æ•°æ®æ›´åŠ å‹å¥½çš„ç”¨æˆ·ç•Œé¢ã€‚</p></blockquote><blockquote><p>æ¯ä¸ªç»„ä»¶å®ä¾‹éƒ½å¯¹åº”ä¸€ä¸ª <strong>watcher</strong> å®ä¾‹ï¼Œå®ƒä¼šåœ¨ç»„ä»¶æ¸²æŸ“çš„è¿‡ç¨‹ä¸­æŠŠâ€œæ¥è§¦â€è¿‡çš„æ•°æ®å±æ€§è®°å½•ä¸ºä¾èµ–ã€‚ä¹‹åå½“ä¾èµ–é¡¹çš„ setter è§¦å‘æ—¶ï¼Œä¼šé€šçŸ¥ watcherï¼Œä»è€Œä½¿å®ƒå…³è”çš„ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚</p><p><img src="https://cn.vuejs.org/images/data.png" alt="data"></p></blockquote><h2 id="æ£€æµ‹å˜åŒ–çš„æ³¨æ„äº‹é¡¹"><a href="#æ£€æµ‹å˜åŒ–çš„æ³¨æ„äº‹é¡¹" class="headerlink" title="æ£€æµ‹å˜åŒ–çš„æ³¨æ„äº‹é¡¹"></a>æ£€æµ‹å˜åŒ–çš„æ³¨æ„äº‹é¡¹</h2><blockquote><p>å—ç°ä»£ JavaScript çš„é™åˆ¶ (è€Œä¸” <code>Object.observe</code> ä¹Ÿå·²ç»è¢«åºŸå¼ƒ)ï¼ŒVue <strong>æ— æ³•æ£€æµ‹åˆ°å¯¹è±¡å±æ€§çš„æ·»åŠ æˆ–åˆ é™¤</strong>ã€‚ç”±äº Vue ä¼šåœ¨åˆå§‹åŒ–å®ä¾‹æ—¶å¯¹å±æ€§æ‰§è¡Œ getter/setter è½¬åŒ–ï¼Œæ‰€ä»¥å±æ€§å¿…é¡»åœ¨ <code>data</code> å¯¹è±¡ä¸Šå­˜åœ¨æ‰èƒ½è®© Vue å°†å®ƒè½¬æ¢ä¸ºå“åº”å¼çš„ã€‚</p><p>å¯¹äºå·²ç»åˆ›å»ºçš„å®ä¾‹ï¼ŒVue ä¸å…è®¸åŠ¨æ€æ·»åŠ æ ¹çº§åˆ«çš„å“åº”å¼å±æ€§ã€‚ä½†æ˜¯ï¼Œå¯ä»¥ä½¿ç”¨ <code>Vue.set(object, propertyName, value)</code> æ–¹æ³•å‘åµŒå¥—å¯¹è±¡æ·»åŠ å“åº”å¼å±æ€§ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vue.set(vm.someObject, <span class="string">'b'</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure><p>æœ‰æ—¶ä½ å¯èƒ½éœ€è¦ä¸ºå·²æœ‰å¯¹è±¡èµ‹å€¼å¤šä¸ªæ–°å±æ€§ï¼Œæ¯”å¦‚ä½¿ç”¨ <code>Object.assign()</code> æˆ– <code>_.extend()</code>ã€‚ä½†æ˜¯ï¼Œè¿™æ ·æ·»åŠ åˆ°å¯¹è±¡ä¸Šçš„æ–°å±æ€§ä¸ä¼šè§¦å‘æ›´æ–°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥ç”¨åŸå¯¹è±¡ä¸è¦æ··åˆè¿›å»çš„å¯¹è±¡çš„å±æ€§ä¸€èµ·åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.someObject = <span class="built_in">Object</span>.assign(&#123;&#125;, <span class="keyword">this</span>.someObject, &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;)</span><br></pre></td></tr></table></figure></blockquote><p><code>Object.assign()</code> æ–¹æ³•ç”¨äºå°†æ‰€æœ‰å¯æšä¸¾å±æ€§çš„å€¼ä»ä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ã€‚å®ƒå°†è¿”å›ç›®æ ‡å¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.assign(target, ...sources)</span><br></pre></td></tr></table></figure><h3 id="å£°æ˜å“åº”å¼å±æ€§"><a href="#å£°æ˜å“åº”å¼å±æ€§" class="headerlink" title="å£°æ˜å“åº”å¼å±æ€§"></a>å£°æ˜å“åº”å¼å±æ€§</h3><blockquote><p>ç”±äº Vue ä¸å…è®¸åŠ¨æ€æ·»åŠ æ ¹çº§å“åº”å¼å±æ€§ï¼Œæ‰€ä»¥ä½ å¿…é¡»åœ¨åˆå§‹åŒ–å®ä¾‹å‰å£°æ˜æ‰€æœ‰æ ¹çº§å“åº”å¼å±æ€§ï¼Œå“ªæ€•åªæ˜¯ä¸€ä¸ªç©ºå€¼ã€‚</p></blockquote><h2 id="å¼‚æ­¥æ›´æ–°é˜Ÿåˆ—"><a href="#å¼‚æ­¥æ›´æ–°é˜Ÿåˆ—" class="headerlink" title="å¼‚æ­¥æ›´æ–°é˜Ÿåˆ—"></a>å¼‚æ­¥æ›´æ–°é˜Ÿåˆ—</h2><blockquote><p>Vue åœ¨æ›´æ–° DOM æ—¶æ˜¯<strong>å¼‚æ­¥</strong>æ‰§è¡Œçš„ã€‚</p><p>åªè¦ä¾¦å¬åˆ°æ•°æ®å˜åŒ–ï¼ŒVue å°†å¼€å¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¹¶ç¼“å†²åœ¨åŒä¸€äº‹ä»¶å¾ªç¯ä¸­å‘ç”Ÿçš„æ‰€æœ‰æ•°æ®å˜æ›´ã€‚</p><p>å¦‚æœåŒä¸€ä¸ª watcher è¢«å¤šæ¬¡è§¦å‘ï¼Œåªä¼šè¢«æ¨å…¥åˆ°é˜Ÿåˆ—ä¸­ä¸€æ¬¡ã€‚</p><p>è¿™ç§åœ¨ç¼“å†²æ—¶å»é™¤é‡å¤æ•°æ®å¯¹äºé¿å…ä¸å¿…è¦çš„è®¡ç®—å’Œ DOM æ“ä½œæ˜¯éå¸¸é‡è¦çš„ã€‚</p></blockquote><p>æ„Ÿè§‰è¿™ç§å¤„ç†ç±»ä¼¼äºé˜²æŠ–ï¼Œæå‡æ€§èƒ½ã€‚</p><blockquote><p>ç„¶åï¼Œåœ¨ä¸‹ä¸€ä¸ªçš„äº‹ä»¶å¾ªç¯ â€œtickâ€ ä¸­ï¼ŒVue åˆ·æ–°é˜Ÿåˆ—å¹¶æ‰§è¡Œå®é™… (å·²å»é‡çš„) å·¥ä½œã€‚</p><p>Vue åœ¨å†…éƒ¨å¯¹å¼‚æ­¥é˜Ÿåˆ—å°è¯•ä½¿ç”¨åŸç”Ÿçš„ <code>Promise.then</code>ã€<code>MutationObserver</code> å’Œ <code>setImmediate</code>ï¼Œå¦‚æœæ‰§è¡Œç¯å¢ƒä¸æ”¯æŒï¼Œåˆ™ä¼šé‡‡ç”¨ <code>setTimeout(fn, 0)</code> ä»£æ›¿ã€‚</p></blockquote><p><code>Promise.then</code>ï¼š ES6</p><p><code>MutationObserver</code>ï¼šæ¥å£æä¾›äº†ç›‘è§†å¯¹DOMæ ‘æ‰€åšæ›´æ”¹çš„èƒ½åŠ›ã€‚å®ƒè¢«è®¾è®¡ä¸ºæ—§çš„Mutation EventsåŠŸèƒ½çš„æ›¿ä»£å“ï¼Œè¯¥åŠŸèƒ½æ˜¯DOM3 Eventsè§„èŒƒçš„ä¸€éƒ¨åˆ†ã€‚</p><p><code>setImmediate</code>ï¼šéæ ‡å‡†ã€‚</p><blockquote><p>ä¾‹å¦‚ï¼Œå½“ä½ è®¾ç½® <code>vm.someData = &#39;new value&#39;</code>ï¼Œè¯¥ç»„ä»¶ä¸ä¼šç«‹å³é‡æ–°æ¸²æŸ“ã€‚</p><p>å½“åˆ·æ–°é˜Ÿåˆ—æ—¶ï¼Œç»„ä»¶ä¼šåœ¨ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯ â€œtickâ€ ä¸­æ›´æ–°ã€‚</p><p>å¤šæ•°æƒ…å†µæˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒè¿™ä¸ªè¿‡ç¨‹ï¼Œä½†æ˜¯å¦‚æœä½ æƒ³åŸºäºæ›´æ–°åçš„ DOM çŠ¶æ€æ¥åšç‚¹ä»€ä¹ˆï¼Œè¿™å°±å¯èƒ½ä¼šæœ‰äº›æ£˜æ‰‹ã€‚</p><p>è™½ç„¶ Vue.js é€šå¸¸é¼“åŠ±å¼€å‘äººå‘˜ä½¿ç”¨â€œæ•°æ®é©±åŠ¨â€çš„æ–¹å¼æ€è€ƒï¼Œé¿å…ç›´æ¥æ¥è§¦ DOMï¼Œä½†æ˜¯æœ‰æ—¶æˆ‘ä»¬å¿…é¡»è¦è¿™ä¹ˆåšã€‚</p><p>ä¸ºäº†åœ¨æ•°æ®å˜åŒ–ä¹‹åç­‰å¾… Vue å®Œæˆæ›´æ–° DOMï¼Œå¯ä»¥åœ¨æ•°æ®å˜åŒ–ä¹‹åç«‹å³ä½¿ç”¨ <code>Vue.nextTick(callback)</code>ã€‚è¿™æ ·å›è°ƒå‡½æ•°å°†åœ¨ DOM æ›´æ–°å®Œæˆåè¢«è°ƒç”¨ã€‚</p></blockquote><h2 id="ç®€å•å®ç°"><a href="#ç®€å•å®ç°" class="headerlink" title="ç®€å•å®ç°"></a>ç®€å•å®ç°</h2><ul><li>Observeï¼Œç»™å¯¹è±¡çš„å±æ€§æ·»åŠ  setter/getter äº‹ä»¶</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = &#123; <span class="attr">name</span>: <span class="string">'aaa'</span>&#125;</span><br><span class="line">observe(data)</span><br><span class="line"><span class="keyword">let</span> name = data.name</span><br><span class="line">data.name = <span class="string">'bbb'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">observe</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­ç±»å‹</span></span><br><span class="line">  <span class="keyword">if</span> (!obj || <span class="keyword">typeof</span> obj !== <span class="string">'object'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">Object</span>.keys(obj).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">    defineReactive(obj, key, obj[key])</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">defineReactive</span>(<span class="params">obj, key, val</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// é€’å½’å­å±æ€§</span></span><br><span class="line">  observe(val)</span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(obj, key, &#123;</span><br><span class="line">    <span class="comment">// å¯æšä¸¾</span></span><br><span class="line">    enumerable: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// å¯é…ç½®</span></span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰å‡½æ•°</span></span><br><span class="line">    <span class="keyword">get</span>: function reactiveGetter() &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'get value'</span>)</span><br><span class="line">      <span class="keyword">return</span> val</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">set</span>: function reactiveSetter(newVal) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'change value'</span>)</span><br><span class="line">      val = newVal</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Depï¼Œç”¨äºè§£è€¦å±æ€§çš„ä¾èµ–æ‰‹æœºå’Œæ´¾å‘æ›´æ–°æ“ä½œ</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dep</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">this</span>.subs = []</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ·»åŠ ä¾èµ–</span></span><br><span class="line">  addSub(sub) &#123;</span><br><span class="line">    <span class="keyword">this</span>.subs.push(sub)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ›´æ–°</span></span><br><span class="line">  notify() &#123;</span><br><span class="line">    <span class="keyword">this</span>.subs.forEach(<span class="function"><span class="params">sub</span> =&gt;</span> &#123;</span><br><span class="line">      sub.update()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å…¨å±€å±æ€§ï¼Œé€šè¿‡è¯¥å±æ€§é…ç½® Watcher</span></span><br><span class="line">Dep.target = <span class="literal">null</span></span><br></pre></td></tr></table></figure><ul><li>Watcherï¼Œè§¦å‘ä¾èµ–æ”¶é›†æ—¶çš„æ“ä½œ</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Watcher</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(obj, key, cb) &#123;</span><br><span class="line">    <span class="comment">// å°† Dep.target æŒ‡å‘è‡ªå·±</span></span><br><span class="line">    <span class="comment">// ç„¶åè§¦å‘å±æ€§çš„ getter æ·»åŠ ç›‘å¬</span></span><br><span class="line">    <span class="comment">// æœ€åå°† Dep.target ç½®ç©º</span></span><br><span class="line">    Dep.target = <span class="keyword">this</span></span><br><span class="line">    <span class="keyword">this</span>.cb = cb</span><br><span class="line">    <span class="keyword">this</span>.obj = obj</span><br><span class="line">    <span class="keyword">this</span>.key = key</span><br><span class="line">    <span class="keyword">this</span>.value = obj[key]</span><br><span class="line">    Dep.target = <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">  update() &#123;</span><br><span class="line">    <span class="comment">// è·å¾—æ–°å€¼</span></span><br><span class="line">    <span class="keyword">this</span>.value = <span class="keyword">this</span>.obj[<span class="keyword">this</span>.key]</span><br><span class="line">    <span class="comment">// è°ƒç”¨ update æ–¹æ³•æ›´æ–° Dom</span></span><br><span class="line">    <span class="keyword">this</span>.cb(<span class="keyword">this</span>.value)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ”¹é€  <code>defineReactive</code>ï¼Œæ·»åŠ ä¾èµ–æ”¶é›†å’Œæ´¾å‘æ›´æ–°ç›¸å…³ä»£ç </li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">defineReactive</span>(<span class="params">obj, key, val</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// é€’å½’å­å±æ€§</span></span><br><span class="line">  observe(val)</span><br><span class="line">  <span class="keyword">let</span> dp = <span class="keyword">new</span> Dep()</span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(obj, key, &#123;</span><br><span class="line">    <span class="comment">// å¯æšä¸¾</span></span><br><span class="line">    enumerable: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// å¯é…ç½®</span></span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰å‡½æ•°</span></span><br><span class="line">    <span class="keyword">get</span>: function reactiveGetter() &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'get value'</span>)</span><br><span class="line">      <span class="keyword">if</span> (Dep.target) &#123;</span><br><span class="line">        dp.addSub(Dep.target)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> val</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">set</span>: function reactiveSetter(newVal) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'change value'</span>)</span><br><span class="line">      val = newVal</span><br><span class="line">      dp.notify()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueæ¸²æŸ“æ—¶æœº</title>
      <link href="/2020/03/24/Vue%E6%B8%B2%E6%9F%93%E6%97%B6%E6%9C%BA/"/>
      <url>/2020/03/24/Vue%E6%B8%B2%E6%9F%93%E6%97%B6%E6%9C%BA/</url>
      
        <content type="html"><![CDATA[<p>â€‹        æœ€è¿‘åœ¨æ”¹æ ·å¼æ—¶ç¢°åˆ°ä¸€ä¸ªå¾ˆç¥å¥‡çš„bugï¼šqrcode ç”Ÿæˆä¸€ä¸ªäºŒç»´ç ï¼Œç»˜åˆ¶åœ¨å¯¹åº”çš„ canvas æ ‡ç­¾ä¸­ï¼Œbug æ˜¯äºŒç»´ç ä¸æ˜¾ç¤ºã€‚ä»£ç æ€»å…±ä¸‰è¡Œï¼Œqrcode çš„å›è°ƒ error æ˜¯ç©ºçš„ï¼Œè¯´æ˜è‡³å°‘äºŒç»´ç çš„åˆ›å»ºåˆ°ç»˜åˆ¶æ˜¯æ²¡æœ‰é”™è¯¯çš„ã€‚</p><p>â€‹        æŸ¥çœ‹åˆ†æ”¯è®°å½•ï¼Œå‘ç°äº†ä¸€äº›ç›¸å…³ä¿®æ”¹ï¼šäºŒç»´ç ç æ˜¯æ”¾åœ¨ä¸€ä¸ªå¼¹çª—ä¸­çš„ï¼Œä»¥å‰çš„å¼¹çª—æ˜¯ç”¨ç»å¯¹å®šä½ç§»å‡ºå¯è§†åŒºåŸŸï¼Œå®é™…ä¸Šå¼¹çª—æ˜¯ä¸€ç›´å­˜åœ¨çš„ã€‚å› ä¸ºè®¾è®¡çš„éœ€æ±‚æ¢æˆäº† AntDï¼Œè¿™ä¸ªå¼¹çª—ä¹Ÿæ¢æˆäº† modal ç»„ä»¶ï¼Œåªæœ‰åœ¨ç‚¹å‡»ä¸ªäººä¿¡æ¯çš„æ—¶å€™æ‰æ˜¾ç¤ºã€‚</p><h2 id="Modal-ç»„ä»¶æ¸²æŸ“æ—¶æœº"><a href="#Modal-ç»„ä»¶æ¸²æŸ“æ—¶æœº" class="headerlink" title="Modal ç»„ä»¶æ¸²æŸ“æ—¶æœº"></a>Modal ç»„ä»¶æ¸²æŸ“æ—¶æœº</h2><ul><li>é¡¹ç›®é‡‡ç”¨çš„éƒ½æ˜¯åŒæ­¥å¼•å…¥çš„æ–¹å¼ï¼Œçˆ¶å­ç»„ä»¶æ¸²æŸ“é¡ºåºå¦‚ä¸‹ï¼š</li></ul><blockquote><p>åŠ è½½æ¸²æŸ“è¿‡ç¨‹</p><p>çˆ¶ beforeCreate<br>çˆ¶ created<br>çˆ¶ beforeMount<br>å­ beforeCreate<br>å­ created<br>å­ beforeMount<br>å­ mounted<br>çˆ¶ mounted</p><hr><p>æ›´æ–°è¿‡ç¨‹</p><p>çˆ¶ beforeUpdate<br>å­ beforeUpdate<br>å­ updated<br>çˆ¶ updated</p></blockquote><p>ç”Ÿå‘½å‘¨æœŸä»‹ç»ï¼š<a href="https://cn.vuejs.org/v2/api/#é€‰é¡¹-ç”Ÿå‘½å‘¨æœŸé’©å­" target="_blank" rel="noopener">https://cn.vuejs.org/v2/api/#%E9%80%89%E9%A1%B9-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90</a></p><h2 id="Bug-åˆ†ææµç¨‹"><a href="#Bug-åˆ†ææµç¨‹" class="headerlink" title="Bug åˆ†ææµç¨‹"></a>Bug åˆ†ææµç¨‹</h2><ul><li>ç°åœ¨åœ¨ mouted é‡Œé¢åŠ å…¥ç»˜åˆ¶äºŒç»´ç çš„ä»£ç </li></ul><blockquote><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200324140454111.png" alt="image-20200324140454111" style="zoom:50%;"><p>document.getElementById(â€˜canvasâ€™) è·å–åˆ°çš„å…ƒç´ ä¸ºç©º</p><p>qrcode æŠ¥é”™ï¼Œè¿™é‡Œä¸»è¦æ˜¯ç”¨æ¥ç”ŸæˆäºŒç»´ç çš„ userInfo.pri_Key è¿˜æ²¡è·å–åˆ°å€¼</p></blockquote><ul><li>åœ¨ watch é‡Œé¢åŠ å…¥ç»˜åˆ¶äºŒç»´ç çš„ä»£ç ï¼Œç›‘å¬çš„æ˜¯æ§åˆ¶å¼¹çª—æ˜¯å¦æ˜¾ç¤ºçš„å˜é‡</li></ul><blockquote><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200324141141884.png" alt="image-20200324141141884" style="zoom:50%;"><p>document.getElementById(â€˜canvasâ€™) è·å–åˆ°çš„å…ƒç´ ä¸ºç©º</p><p>userInfo.pri_Key æœ‰å€¼ï¼Œqrcode ä¸æŠ¥é”™äº†</p></blockquote><ul><li>å¾ˆæ˜¾ç„¶ï¼Œé—®é¢˜å°±åœ¨ä¸ºä»€ä¹ˆè¿™ä¸ª canvas æ ‡ç­¾ä¸€ç›´è·å–ä¸åˆ°ï¼Œé‚£ä»€ä¹ˆæ—¶å€™æ‰èƒ½è·å–åˆ°å‘¢ï¼Ÿ</li></ul><blockquote><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200324150813733.png" alt="image-20200324150813733" style="zoom:50%;"><p>Click ç‚¹å‡»æ˜¾ç¤º modalï¼Œè¦åˆ°å­ç»„ä»¶ updated æ—¶æ‰èƒ½è·å–åˆ°æ ‡ç­¾</p><p>ä¹Ÿå°±æ˜¯è¯´åœ¨ updated é‡Œé¢æ‰æ›´æ–° DOMï¼Œwatch é‡Œé¢æ˜¯ä¸æ›´æ–°çš„</p></blockquote><ul><li>å®˜ç½‘é‡Œé¢å…³äº updated çš„æè¿°</li></ul><blockquote><p>ç”±äºæ•°æ®æ›´æ”¹å¯¼è‡´çš„è™šæ‹Ÿ DOM é‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ï¼Œåœ¨è¿™ä¹‹åä¼šè°ƒç”¨è¯¥é’©å­ã€‚</p><p>å½“è¿™ä¸ªé’©å­è¢«è°ƒç”¨æ—¶ï¼Œç»„ä»¶ DOM å·²ç»æ›´æ–°ï¼Œæ‰€ä»¥ä½ ç°åœ¨å¯ä»¥æ‰§è¡Œä¾èµ–äº DOM çš„æ“ä½œã€‚ç„¶è€Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥é¿å…åœ¨æ­¤æœŸé—´æ›´æ”¹çŠ¶æ€ã€‚å¦‚æœè¦ç›¸åº”çŠ¶æ€æ”¹å˜ï¼Œé€šå¸¸æœ€å¥½ä½¿ç”¨<a href="https://cn.vuejs.org/v2/api/#computed" target="_blank" rel="noopener">è®¡ç®—å±æ€§</a>æˆ– <a href="https://cn.vuejs.org/v2/api/#watch" target="_blank" rel="noopener">watcher</a> å–è€Œä»£ä¹‹ã€‚</p></blockquote><ul><li>ä½†æˆ‘ä»¬çŸ¥é“ï¼Œwatch é‡Œ DOM è¿˜æ²¡æ›´æ–°ï¼Œæˆ‘ä»¬å¦‚ä½•åœ¨ watch é‡Œé¢ä¿®æ”¹ canvas å‘¢ï¼Ÿ</li></ul><blockquote><p>å¦‚æœä½ å¸Œæœ›ç­‰åˆ°æ•´ä¸ªè§†å›¾éƒ½é‡ç»˜å®Œæ¯•ï¼Œå¯ä»¥åœ¨ <code>updated</code> é‡Œä½¿ç”¨ <a href="https://cn.vuejs.org/v2/api/#vm-nextTick" target="_blank" rel="noopener">vm.$nextTick</a></p></blockquote><h2 id="nextTick"><a href="#nextTick" class="headerlink" title="nextTick"></a>nextTick</h2><blockquote><p>å°†å›è°ƒå»¶è¿Ÿåˆ°ä¸‹æ¬¡ DOM æ›´æ–°å¾ªç¯ä¹‹åæ‰§è¡Œã€‚åœ¨ä¿®æ”¹æ•°æ®ä¹‹åç«‹å³ä½¿ç”¨å®ƒï¼Œç„¶åç­‰å¾… DOM æ›´æ–°ã€‚</p></blockquote><ul><li><p>æ˜¾ç„¶ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„æ–¹æ³•äº†ã€‚</p><ul><li>ç­‰å¾… DOM æ›´æ–°ï¼Œå¯ä»¥å¾—åˆ° canvas æ ‡ç­¾</li><li>è°ƒç”¨ qrcode åº“åˆ›å»ºäºŒç»´ç å¹¶ä¼šç»˜åˆ¶åˆ° canvas ä¸Š</li></ul></li><li><p>å°†ç»˜åˆ¶äºŒç»´ç çš„ä»£ç å°è£…ä¸€å±‚ nextTick</p></li></ul><blockquote><img src="/Users/wuziyan/Library/Application Support/typora-user-images/image-20200324141636792.png" alt="image-20200324141636792" style="zoom:50%;"><p>document.getElementById(â€˜canvasâ€™) å¯ä»¥æ­£å¸¸è·å–åˆ°å…ƒç´ ï¼ŒäºŒç»´ç æ­£å¸¸æ˜¾ç¤º</p></blockquote><h2 id="å¼‚æ­¥æ›´æ–°é˜Ÿåˆ—"><a href="#å¼‚æ­¥æ›´æ–°é˜Ÿåˆ—" class="headerlink" title="å¼‚æ­¥æ›´æ–°é˜Ÿåˆ—"></a>å¼‚æ­¥æ›´æ–°é˜Ÿåˆ—</h2><blockquote><p>Vue åœ¨æ›´æ–° DOM æ—¶æ˜¯<strong>å¼‚æ­¥</strong>æ‰§è¡Œçš„ã€‚</p><p>åªè¦ä¾¦å¬åˆ°æ•°æ®å˜åŒ–ï¼ŒVue å°†å¼€å¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¹¶ç¼“å†²åœ¨åŒä¸€äº‹ä»¶å¾ªç¯ä¸­å‘ç”Ÿçš„æ‰€æœ‰æ•°æ®å˜æ›´ã€‚</p><p>å¦‚æœåŒä¸€ä¸ª watcher è¢«å¤šæ¬¡è§¦å‘ï¼Œåªä¼šè¢«æ¨å…¥åˆ°é˜Ÿåˆ—ä¸­ä¸€æ¬¡ã€‚</p><p>è¿™ç§åœ¨ç¼“å†²æ—¶å»é™¤é‡å¤æ•°æ®å¯¹äºé¿å…ä¸å¿…è¦çš„è®¡ç®—å’Œ DOM æ“ä½œæ˜¯éå¸¸é‡è¦çš„ã€‚</p><p>ç„¶åï¼Œåœ¨ä¸‹ä¸€ä¸ªçš„äº‹ä»¶å¾ªç¯ â€œtickâ€ ä¸­ï¼ŒVue åˆ·æ–°é˜Ÿåˆ—å¹¶æ‰§è¡Œå®é™… (å·²å»é‡çš„) å·¥ä½œã€‚</p><p>Vue åœ¨å†…éƒ¨å¯¹å¼‚æ­¥é˜Ÿåˆ—å°è¯•ä½¿ç”¨åŸç”Ÿçš„ <code>Promise.then</code>ã€<code>MutationObserver</code> å’Œ <code>setImmediate</code>ï¼Œå¦‚æœæ‰§è¡Œç¯å¢ƒä¸æ”¯æŒï¼Œåˆ™ä¼šé‡‡ç”¨ <code>setTimeout(fn, 0)</code> ä»£æ›¿ã€‚</p></blockquote><ul><li>ä¹‹å‰è¯¯æ‰“è¯¯æ’ä½¿ç”¨äº† setTimeout(fn, 0)ï¼Œå®é™…ä¸Šæ°å¥½å®ç°äº†å¼‚æ­¥é˜Ÿåˆ—</li></ul><blockquote><p>å¦‚æœä½ æƒ³åŸºäºæ›´æ–°åçš„ DOM çŠ¶æ€æ¥åšç‚¹ä»€ä¹ˆï¼Œè¿™å°±å¯èƒ½ä¼šæœ‰äº›æ£˜æ‰‹ã€‚</p><p>è™½ç„¶ Vue.js é€šå¸¸é¼“åŠ±å¼€å‘äººå‘˜ä½¿ç”¨â€œæ•°æ®é©±åŠ¨â€çš„æ–¹å¼æ€è€ƒï¼Œé¿å…ç›´æ¥æ¥è§¦ DOMï¼Œä½†æ˜¯æœ‰æ—¶æˆ‘ä»¬å¿…é¡»è¦è¿™ä¹ˆåšã€‚</p><p>ä¸ºäº†åœ¨æ•°æ®å˜åŒ–ä¹‹åç­‰å¾… Vue å®Œæˆæ›´æ–° DOMï¼Œå¯ä»¥åœ¨æ•°æ®å˜åŒ–ä¹‹åç«‹å³ä½¿ç”¨ <code>Vue.nextTick(callback)</code>ã€‚è¿™æ ·å›è°ƒå‡½æ•°å°†åœ¨ DOM æ›´æ–°å®Œæˆåè¢«è°ƒç”¨ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li>moda ç»„ä»¶åœ¨ mounted æ—¶å¹¶ä¸ä¼šæ¸²æŸ“åˆ°é¡µé¢ä¸Š</li><li>åœ¨æ§åˆ¶ modal æ˜¾ç¤ºå˜é‡ä¸º true ä¹‹åï¼Œç›´åˆ° updated é˜¶æ®µæ‰æ›´æ–° DOM</li><li>watch å½“ä¸­æœ‰å…³ DOM çš„æ“ä½œï¼Œè¦åˆ©ç”¨ nextTick å»¶è¿Ÿåˆ° DOM æ¸²æŸ“ä¹‹åæ‰§è¡Œ</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> æµè§ˆå™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0.1+0.2!==0.3</title>
      <link href="/2020/03/23/0.1+0.2!==0.3/"/>
      <url>/2020/03/23/0.1+0.2!==0.3/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>axios</title>
      <link href="/2020/03/23/axios/"/>
      <url>/2020/03/23/axios/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Iteratorå’Œfor...ofå¾ªç¯</title>
      <link href="/2020/03/22/17-Iterator%E5%92%8Cfor-of%E5%BE%AA%E7%8E%AF/"/>
      <url>/2020/03/22/17-Iterator%E5%92%8Cfor-of%E5%BE%AA%E7%8E%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="Iterator-å’Œ-forâ€¦of-å¾ªç¯"><a href="#Iterator-å’Œ-forâ€¦of-å¾ªç¯" class="headerlink" title="Iterator å’Œ forâ€¦of å¾ªç¯"></a>Iterator å’Œ forâ€¦of å¾ªç¯</h1><h2 id="Iteratorï¼ˆéå†å™¨ï¼‰çš„æ¦‚å¿µ"><a href="#Iteratorï¼ˆéå†å™¨ï¼‰çš„æ¦‚å¿µ" class="headerlink" title="Iteratorï¼ˆéå†å™¨ï¼‰çš„æ¦‚å¿µ"></a>Iteratorï¼ˆéå†å™¨ï¼‰çš„æ¦‚å¿µ</h2><ul><li><p>JS åŸæ¥è¡¨ç¤ºâ€é›†åˆâ€çš„æ˜¯æ•°ç»„ <code>Array</code> å’Œå¯¹è±¡ <code>Object</code>ï¼ŒES6 æ·»åŠ äº† <code>Map</code> å’Œ <code>Set</code></p></li><li><p>Iterator æ˜¯ä¸€ç§æ¥å£ï¼Œä»»ä½•æ•°æ®ç»“æ„åªè¦éƒ¨ç½² Iterator æ¥å£ï¼Œå°±å¯ä»¥å®Œæˆä¾¿åˆ©æ“ä½œï¼ˆå³ä¾æ¬¡å¤„ç†è¯¥æ•°æ®ç»“æ„çš„æ‰€æœ‰æˆå‘˜ï¼‰</p></li><li><p>Iterator ä½œç”¨ï¼š</p><ul><li>ä¸ºå„ç§æ•°æ®ç»“æ„æä¾›ç»Ÿä¸€çš„ã€ç®€ä¾¿çš„è®¿é—®æ¥å£</li><li>ä½¿æ•°æ®ç»“æ„çš„æˆå‘˜èƒ½å¤ŸæŒ‰æŸç§æ¬¡åºæ’åˆ—</li><li>ES6 åˆ›é€ äº†æ–°çš„éå†å‘½ä»¤ <code>for...of</code> </li></ul></li><li><p>éå†è¿‡ç¨‹</p><ul><li><p>åˆ›å»ºæŒ‡é’ˆå¯¹è±¡ï¼ŒæŒ‡å‘å½“å‰æ•°æ®ç»“æ„çš„èµ·å§‹ä½ç½®</p><ul><li><p>éå†å¯¹è±¡æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡</p></li><li><blockquote><p>js æœ‰æŒ‡é’ˆçš„æ¦‚å¿µï¼Ÿ</p></blockquote></li></ul></li><li><p>ç¬¬ä¸€æ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„ <code>next</code> æ–¹æ³•ï¼Œå¯ä»¥å°†æŒ‡é’ˆæŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬ä¸€ä¸ªæˆå‘˜</p></li><li><p>ä¸æ–­è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„ <code>next</code> æ–¹æ³•ï¼Œç›´åˆ°å®ƒæŒ‡å‘æ•°æ®ç»“æ„çš„ç»“æŸä½ç½®</p></li></ul></li><li><p>æ¯æ¬¡è°ƒç”¨ <code>next</code> è¿”å›ä¸€ä¸ªåŒ…å« <code>value</code> he <code>done</code> ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ã€‚</p><ul><li><code>value</code> å±æ€§æ˜¯å½“å‰æˆå‘˜çš„å€¼</li><li><code>done</code> å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºéå†æ˜¯å¦ç»“æŸ</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> it = makeIterator([<span class="string">'a'</span>, <span class="string">'b'</span>]);</span><br><span class="line"></span><br><span class="line">it.next();</span><br><span class="line">it.next();</span><br><span class="line">it.next();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeIterator</span>(<span class="params">array</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> nextIndex = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    next: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> nextIndex &lt; array.length ?</span><br><span class="line">        &#123;<span class="attr">value</span>: array[nextIndex++], <span class="attr">done</span>: <span class="literal">false</span>&#125; : &#123;<span class="attr">value</span>: <span class="literal">undefined</span>, <span class="attr">done</span>: <span class="literal">true</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é»˜è®¤-Iterator-æ¥å£"><a href="#é»˜è®¤-Iterator-æ¥å£" class="headerlink" title="é»˜è®¤ Iterator æ¥å£"></a>é»˜è®¤ Iterator æ¥å£</h2><ul><li>å½“ä½¿ç”¨ <code>for...of</code> å¾ªç¯éå†æŸç§æ•°æ®ç»“æ„æ—¶ï¼Œè¯¥å¾ªç¯ä¼šè‡ªåŠ¨å»å¯»æ‰¾ Iterator æ¥å£</li><li>ES6 è§„å®šï¼Œé»˜è®¤çš„ Iterator æ¥å£éƒ¨ç½²åœ¨æ•°æ®ç»“æ„çš„ <code>Symbol.iterator</code> å±æ€§ï¼Œæˆ–è€…è¯´ï¼Œä¸€ä¸ªæ•°æ®ç»“æ„åªè¦æœ‰ <code>Symbol.iterator</code> å±æ€§ï¼Œå°±è®¤ä¸ºæ˜¯å¯éå†çš„<ul><li><code>Symbol.iterator</code> å±æ€§æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå°±æ˜¯å½“å‰æ•°æ®ç»“æ„é»˜è®¤çš„éå†å™¨ç”Ÿäº§å‡½æ•°</li><li>æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªéå†å™¨</li><li>å±æ€§å <code>Symbol.iterator</code> æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¿”å› <code>Symbol</code> å¯¹è±¡çš„ <code>iterator</code> å±æ€§</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  [<span class="built_in">Symbol</span>.iterator]: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      next: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          value: <span class="number">1</span>,</span><br><span class="line">          done: <span class="literal">true</span></span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>åŸç”Ÿå…·å¤‡ Iterator æ¥å£çš„æ•°æ®ç»“æ„ï¼š<ul><li>Array</li><li>Map</li><li>Set</li><li>String</li><li>TypedArray</li><li>å‡½æ•°çš„ arguments å¯¹è±¡</li><li>NodeList å¯¹è±¡</li></ul></li></ul><blockquote><p>å¯¹è±¡ï¼ˆObjectï¼‰ä¹‹æ‰€ä»¥æ²¡æœ‰é»˜è®¤éƒ¨ç½² Iterator æ¥å£ï¼Œæ˜¯å› ä¸ºå¯¹è±¡çš„å“ªä¸ªå±æ€§å…ˆéå†ï¼Œå“ªä¸ªå±æ€§åéå†æ˜¯ä¸ç¡®å®šçš„ï¼Œéœ€è¦å¼€å‘è€…æ‰‹åŠ¨æŒ‡å®šã€‚æœ¬è´¨ä¸Šï¼Œéå†å™¨æ˜¯ä¸€ç§çº¿æ€§å¤„ç†ï¼Œå¯¹äºä»»ä½•éçº¿æ€§çš„æ•°æ®ç»“æ„ï¼Œéƒ¨ç½²éå†å™¨æ¥å£ï¼Œå°±ç­‰äºéƒ¨ç½²ä¸€ç§çº¿æ€§è½¬æ¢ã€‚ä¸è¿‡ï¼Œä¸¥æ ¼åœ°è¯´ï¼Œå¯¹è±¡éƒ¨ç½²éå†å™¨æ¥å£å¹¶ä¸æ˜¯å¾ˆå¿…è¦ï¼Œå› ä¸ºè¿™æ—¶å¯¹è±¡å®é™…ä¸Šè¢«å½“ä½œ Map ç»“æ„ä½¿ç”¨ï¼ŒES5 æ²¡æœ‰ Map ç»“æ„ï¼Œè€Œ ES6 åŸç”Ÿæä¾›äº†ã€‚</p></blockquote><h2 id="è°ƒç”¨-Iterator-æ¥å£çš„åœºåˆ"><a href="#è°ƒç”¨-Iterator-æ¥å£çš„åœºåˆ" class="headerlink" title="è°ƒç”¨ Iterator æ¥å£çš„åœºåˆ"></a>è°ƒç”¨ Iterator æ¥å£çš„åœºåˆ</h2><ul><li>æ•°ç»„å’Œ Set ç»“æ„è¿›è¡Œè§£æ„èµ‹å€¼æ—¶ï¼Œé»˜è®¤è°ƒç”¨ <code>Symbol.iterator</code> æ–¹æ³•</li><li>æ‰©å±•è¿ç®—ç¬¦ <code>...</code><ul><li>éƒ¨ç½²äº† Iterator æ¥å£çš„æ•°æ®ç»“æ„éƒ½èƒ½ç”¨æ‰©å±•è¿ç®—ç¬¦</li></ul></li><li>yield* åé¢è·Ÿçš„æ˜¯ä¸€ä¸ªå¯éå†çš„è§£æ„ï¼Œå®ƒä¼šè°ƒç”¨è¯¥ç»“æ„çš„éå†å™¨æ¥å£</li><li>æ•°ç»„çš„éå†ä¼šè°ƒç”¨éå†å™¨æ¥å£ï¼Œæ‰€ä»¥ä»»ä½•æ¥å—æ•°ç»„ä½œä¸ºå‚æ•°çš„åœºåˆï¼Œéƒ½è°ƒç”¨äº†éå†å™¨<ul><li>for â€¦ of</li><li>Array.from()</li><li>Map(), Set(), WeakMap(), WeakSet()</li><li>Promise.all()</li><li>Promise.race()</li></ul></li></ul><h2 id="Iterator-æ¥å£ä¸-Generator-å‡½æ•°"><a href="#Iterator-æ¥å£ä¸-Generator-å‡½æ•°" class="headerlink" title="Iterator æ¥å£ä¸ Generator å‡½æ•°"></a>Iterator æ¥å£ä¸ Generator å‡½æ•°</h2><ul><li><code>Symbol.iterator</code> æ–¹æ³•çš„æœ€ç®€å•å®ç°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myIterable = &#123;</span><br><span class="line">  [<span class="built_in">Symbol</span>.iterator]: <span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">[...myIterable] <span class="comment">// [1, 2, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  * [<span class="built_in">Symbol</span>.iterator]() &#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">'hello'</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">'world'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> x <span class="keyword">of</span> obj) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// "hello"</span></span><br><span class="line"><span class="comment">// "world"</span></span><br></pre></td></tr></table></figure><h2 id="forâ€¦of-å¾ªç¯"><a href="#forâ€¦of-å¾ªç¯" class="headerlink" title="forâ€¦of å¾ªç¯"></a>forâ€¦of å¾ªç¯</h2><ul><li>æ•°æ®ç»“æ„åªè¦éƒ¨ç½²äº†<code>Symbol.iterator</code>å±æ€§ï¼Œå°±è¢«è§†ä¸ºå…·æœ‰ iterator æ¥å£ï¼Œå°±å¯ä»¥ç”¨<code>for...of</code>å¾ªç¯éå†å®ƒçš„æˆå‘˜</li><li>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>for...of</code>å¾ªç¯å†…éƒ¨è°ƒç”¨çš„æ˜¯æ•°æ®ç»“æ„çš„<code>Symbol.iterator</code>æ–¹æ³•</li><li><code>for...of</code>å¾ªç¯å¯ä»¥ä½¿ç”¨çš„èŒƒå›´<ul><li>æ•°ç»„</li><li>Set </li><li>Map </li><li>æŸäº›ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡<ul><li><code>arguments</code>å¯¹è±¡</li><li>DOM NodeList å¯¹è±¡</li></ul></li><li>Generator å¯¹è±¡</li><li>å­—ç¬¦ä¸²</li></ul></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> ECMAScript 6 å…¥é—¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Setå’ŒMapæ•°æ®ç»“æ„</title>
      <link href="/2020/03/22/13-Set%E5%92%8CMap%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
      <url>/2020/03/22/13-Set%E5%92%8CMap%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<h1 id="Set-å’Œ-Map-æ•°æ®ç»“æ„"><a href="#Set-å’Œ-Map-æ•°æ®ç»“æ„" class="headerlink" title="Set å’Œ Map æ•°æ®ç»“æ„"></a>Set å’Œ Map æ•°æ®ç»“æ„</h1><h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><ul><li>ç±»ä¼¼äºæ•°ç»„ï¼Œä½†æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„<ul><li>ä¸ä¼šå‘ç”Ÿç±»å‹è½¬æ¢ï¼Œæ‰€ä»¥ 5 å’Œ â€œ5â€ ä¸åŒ</li><li>ä¸¤ä¸ª NaN æ˜¯ç›¸ç­‰çš„ï¼Œè¿™å’Œ <code>===</code> ä¸åŒ</li><li>ä¸¤ä¸ªå¯¹è±¡æ€»æ˜¯ä¸æƒ³ç­‰</li></ul></li><li><code>Set</code> æ„é€ å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–å…·æœ‰ iterable æ¥å£çš„å…¶ä»–æ•°æ®ç»“æ„ï¼‰ä½œä¸ºå‚æ•°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">[<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">2</span>].forEach(<span class="function"><span class="params">x</span> =&gt;</span> s.add(x));</span><br><span class="line"><span class="comment">// ç­‰ä»·äº</span></span><br><span class="line"><span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> s) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2 3 5 4</span></span><br></pre></td></tr></table></figure><blockquote><p>Array.from å¯ä»¥å°† Set ç»“æ„è½¬ä¸ºæ•°ç»„</p></blockquote><h3 id="Set-å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•"><a href="#Set-å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•" class="headerlink" title="Set å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•"></a>Set å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•</h3><ul><li><p>å±æ€§</p><ul><li><code>Set.prototype.constructor</code> æ„é€ å‡½æ•°</li><li><code>Set.prototype.size</code> è¿”å› <code>Set</code> å®ä¾‹çš„æˆå‘˜æ€»æ•°</li></ul></li><li><p>æ–¹æ³•</p><ul><li><p>æ“ä½œæ–¹æ³•</p><ul><li><code>Set.prototype.add(value)</code> æ·»åŠ æŸä¸ªå€¼ï¼Œè¿”å› Set ç»“æ„æœ¬èº«</li><li><code>Set.prototype.delete(value)</code> åˆ é™¤æŸä¸ªå€¼ï¼Œè¿”å›å¸ƒå°”è¡¨ç¤ºæ˜¯å¦æˆåŠŸ</li><li><code>Set.prototype.has(value)</code> è¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦ä¸º <code>Set</code> æˆå‘˜</li><li><code>Set.prototype.clear(value)</code>æ¸…ç©ºï¼Œæ²¡æœ‰è¿”å›å€¼</li></ul></li><li><p>éå†æ–¹æ³•</p><ul><li><p><code>Set.prototype.keys()</code> è¿”å›é”®åï¼Œéå†å™¨å¯¹è±¡</p></li><li><p><code>Set.prototype.values()</code> è¿”å›é”®å€¼ï¼Œéå†å™¨å¯¹è±¡</p><blockquote><p>Set ç»“æ„æ²¡æœ‰é”®åï¼Œåªæœ‰é”®å€¼ï¼ˆæˆ–è€…è¯´é”®åé”®å€¼éƒ½æ˜¯åŒä¸€ä¸ªå€¼ï¼‰ï¼Œæ‰€ä»¥ keys æ–¹æ³•å’Œ values æ–¹æ³•ä¸€æ ·</p></blockquote></li><li><p><code>Set.prototype.entries()</code> è¿”å›é”®å€¼å¯¹ï¼Œéå†å™¨å¯¹è±¡</p></li><li><p><code>Set.prototype.forEach()</code> ä½¿ç”¨å›è°ƒå‡½æ•°éå†æ¯ä¸ªæˆå‘˜</p></li></ul></li></ul></li></ul><h2 id="WeakSet"><a href="#WeakSet" class="headerlink" title="WeakSet"></a>WeakSet</h2><ul><li>ç±»ä¼¼ Set</li><li>æˆå‘˜åªèƒ½æ˜¯å¯¹è±¡<ul><li>å¼±å¼•ç”¨ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶ä¸è€ƒè™‘ WeakSet çš„å¼•ç”¨ï¼Œå¯èƒ½ä¼šéšæ—¶è¢«æ¸…ç©º</li></ul></li><li>ä¸å¯éå†</li></ul><h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><h3 id="åŸºæœ¬ç”¨æ³•-1"><a href="#åŸºæœ¬ç”¨æ³•-1" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><ul><li>ç±»ä¼¼äºå¯¹è±¡ï¼Œæ˜¯é”®å€¼å¯¹çš„é›†åˆ</li><li>å¯¹è±¡çš„é”®åªèƒ½æ˜¯å­—ç¬¦ä¸²ï¼ŒMap çš„é”®ä¸é™åˆ¶ç±»å‹</li><li><code>Map</code> æ„é€ å‡½æ•°å¯æ¥å—æ•°ç»„ï¼Œæ•°ç»„æˆå‘˜è¡¨ç¤ºä¸€ä¸ªé”®å€¼å¯¹ï¼ˆä»»ä½•å…·æœ‰ Iterator æ¥å£ï¼Œä¸”æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ªåŒå…ƒç´ çš„æ•°ç»„çš„æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚ Set å’Œ Mapï¼‰</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="string">'name'</span>, <span class="string">'zhangsan'</span>],</span><br><span class="line">  [<span class="string">'title'</span>, <span class="string">'Author'</span>]</span><br><span class="line">])</span><br><span class="line"><span class="comment">// å®é™…ä¸Šæ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">const</span> items = [</span><br><span class="line">  [<span class="string">'name'</span>, <span class="string">'zhangsan'</span>],</span><br><span class="line">  [<span class="string">'title'</span>, <span class="string">'Author'</span>]</span><br><span class="line">]</span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">items.forEach(</span><br><span class="line">([key, value]) =&gt; map.set(key, value)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li>å¤šæ¬¡èµ‹å€¼ä¸€ä¸ªé”®ï¼Œä¼šè¦†ç›–</li><li>è¯»å–ä¸€ä¸ªæœªçŸ¥çš„é”®ï¼Œè¿”å› <code>undefined</code></li><li>å¯¹äºå¯¹è±¡ï¼Œåœ°å€ç›¸åŒ Map ç»“æ„æ‰è§†ä¸ºåŒä¸€ä¸ªé”®</li><li>å¯¹äºç®€å•ç±»å‹ï¼Œå€¼ä¸¥æ ¼ç›¸ç­‰ <code>===</code> å°±æ˜¯ä¸€ä¸ªé”®</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set([<span class="string">'a'</span>], <span class="number">555</span>);</span><br><span class="line">map.get([<span class="string">'a'</span>]) <span class="comment">//undefined</span></span><br><span class="line"><span class="comment">// ['a'] æ˜¯å®ä¾‹ï¼Œè¿™é‡Œä¸¤ä¸ªå®ä¾‹ ['a'] å†…å­˜åœ°å€ä¸åŒ</span></span><br></pre></td></tr></table></figure><h3 id="å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•"><a href="#å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•" class="headerlink" title="å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•"></a>å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•</h3><ul><li>å±æ€§<ul><li><code>size</code></li></ul></li><li>æ–¹æ³•<ul><li>æ“ä½œæ–¹æ³•<ul><li><code>Map.prototype.set(key, value)</code><ul><li>è¿”å›å½“å‰ <code>Map</code> å¯¹è±¡ï¼Œå¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•</li></ul></li><li><code>Map.prototype.get(key)</code></li><li><code>Map.prototype.has(key)</code></li><li><code>Map.prototype.delete(key)</code></li><li><code>Map.prototype.clear(key)</code></li></ul></li><li>éå†æ–¹æ³•<ul><li><code>Map.prototype.keys()</code></li><li><code>Map.prototype.values()</code></li><li><code>Map.prototype.entries()</code></li><li><code>Map.prototype.forEach()</code></li></ul></li></ul></li><li>Map æœ¬èº«æ²¡æœ‰ <code>map</code> å’Œ <code>filter</code> æ–¹æ³•ï¼Œéœ€è¦ç»“åˆæ•°ç»„</li></ul><h3 id="ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢"><a href="#ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢" class="headerlink" title="ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢"></a>ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢</h3><ul><li><p>Map -&gt; æ•°ç»„</p><ul><li><code>[...map]</code></li></ul></li><li><p>æ•°ç»„ -&gt; Map</p><ul><li><code>new Map(array)</code></li></ul></li><li><p>Map -&gt; å¯¹è±¡</p></li><li><p>å¯¹è±¡ -&gt; Map</p></li><li><p>Map -&gt; JSON</p></li><li><p>JSON -&gt; Map</p></li></ul><h2 id="WeakMap"><a href="#WeakMap" class="headerlink" title="WeakMap"></a>WeakMap</h2><ul><li>ç±»ä¼¼ Map</li><li>é”®ååªèƒ½å¯¹è±¡ï¼ˆé™¤äº† nullï¼‰</li><li>æŒ‡å‘çš„å¯¹è±¡ä¸è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> ECMAScript 6 å…¥é—¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Generatorå‡½æ•°çš„è¯­æ³•</title>
      <link href="/2020/03/21/18-Generator%E5%87%BD%E6%95%B0%E7%9A%84%E8%AF%AD%E6%B3%95/"/>
      <url>/2020/03/21/18-Generator%E5%87%BD%E6%95%B0%E7%9A%84%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="Generator-å‡½æ•°çš„è¯­æ³•"><a href="#Generator-å‡½æ•°çš„è¯­æ³•" class="headerlink" title="Generator å‡½æ•°çš„è¯­æ³•"></a>Generator å‡½æ•°çš„è¯­æ³•</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><h3 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><ul><li>å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆï¼Œè¯­æ³•è¡Œä¸ºä¸ä¼ ç»Ÿå‡½æ•°å®Œå…¨ä¸åŒ</li><li>ç†è§£<ul><li>è¯­æ³•ä¸Šï¼ŒGenerator å‡½æ•°æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œå°è£…äº†å¤šä¸ªå†…éƒ¨çŠ¶æ€<ul><li>æ‰§è¡Œ Generator å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡<ul><li>éå†å™¨å¯¹è±¡å¯ä»¥ä¾æ¬¡éå† Generator å‡½æ•°å†…éƒ¨çš„æ¯ä¸€ä¸ªçŠ¶æ€</li></ul></li></ul></li><li>å½¢å¼ä¸Šï¼ŒGenerator å‡½æ•°æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°<ul><li>ä¸¤ä¸ªç‰¹å¾<ul><li><code>function</code> å…³é”®å­—ä¸å‡½æ•°åä¹‹é—´æœ‰ä¸€ä¸ªæ˜Ÿå·ï¼Œæ˜Ÿå·ä½ç½®å’Œç©ºæ ¼ä½ç½®çš„å…ˆåå…³ç³»æ²¡æœ‰è§„å®š</li><li>å‡½æ•°ä½“å†…éƒ¨ä½¿ç”¨ <code>yield</code> è¡¨è¾¾å¼ï¼Œå®šä¹‰ä¸åŒçš„å†…éƒ¨çŠ¶æ€</li></ul></li></ul></li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">helloWorldGenerator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'hello'</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'world'</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'ending'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸‰ä¸ªçŠ¶æ€</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> hw = helloWorldGenerator();</span><br><span class="line"><span class="comment">// è°ƒç”¨</span></span><br></pre></td></tr></table></figure><ul><li>è°ƒç”¨ Generator å‡½æ•°åï¼Œè¯¥å‡½æ•°å¹¶ä¸æ‰§è¡Œï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘å†…éƒ¨çŠ¶æ€çš„æŒ‡é’ˆå¯¹è±¡ï¼ˆiterator Objectï¼‰</li><li>è°ƒç”¨éå†å™¨å¯¹è±¡çš„ <code>next</code> æ–¹æ³•ï¼Œä½¿å¾—æŒ‡é’ˆç§»å‘ä¸‹ä¸€ä¸ªçŠ¶æ€<ul><li>ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡è°ƒç”¨ <code>next</code> æ–¹æ³•ï¼Œå†…éƒ¨æŒ‡é’ˆå°±ä»å‡½æ•°å¤´éƒ¨æˆ–ä¸Šä¸€æ¬¡åœä¸‹æ¥çš„åœ°æ–¹å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ª <code>yield</code> è¡¨è¾¾å¼ï¼ˆæˆ– <code>return</code> è¯­å¥ï¼‰</li><li>æ¢è¨€ä¹‹ï¼ŒGenerator å‡½æ•°æ˜¯åˆ†æ®µæ‰§è¡Œçš„ï¼Œ<code>yield</code> è¡¨è¾¾å¼æ˜¯æš‚åœæ‰§è¡Œçš„æ ‡è®°ï¼Œ<code>next</code> æ–¹æ³•æ¢å¤æ‰§è¡Œ</li></ul></li><li><code>next</code> è¿”å›ä¸€ä¸ªå¯¹è±¡<ul><li>å±æ€§ <code>value</code> æ˜¯å½“å‰ <code>yield</code> è¡¨è¾¾å¼çš„å€¼</li><li>å±æ€§ <code>done</code> è¡¨ç¤ºéå†æ˜¯å¦ç»“æŸ</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">hw.next()</span><br><span class="line"><span class="comment">// &#123; value: 'hello', done: false &#125;</span></span><br><span class="line">hw.next()</span><br><span class="line"><span class="comment">// &#123; value: 'world', done: false &#125;</span></span><br><span class="line">hw.next()</span><br><span class="line"><span class="comment">// &#123; value: 'ending', done: true &#125;</span></span><br><span class="line">hw.next()</span><br><span class="line"><span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure><h3 id="yield-è¡¨è¾¾å¼"><a href="#yield-è¡¨è¾¾å¼" class="headerlink" title="yield è¡¨è¾¾å¼"></a>yield è¡¨è¾¾å¼</h3><ul><li><code>next</code> æ–¹æ³•çš„è¿è¡Œé€»è¾‘<ul><li>é‡åˆ° <code>yield</code> è¡¨è¾¾å¼ï¼Œå°±æš‚åœæ‰§è¡Œï¼Œå¹¶å°†ç´§è·Ÿåœ¨ <code>yield</code> åé¢çš„è¡¨è¾¾å¼çš„å€¼ä½œä¸ºå¯¹è±¡çš„ <code>value</code> å±æ€§è¿”å›</li><li>ä¸‹æ¬¡è°ƒç”¨ <code>yield</code> æ—¶ï¼Œå†ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ª <code>yield</code> è¡¨è¾¾å¼</li><li>å¦‚æœæ²¡æœ‰é‡åˆ°æ–°çš„è¡¨è¾¾å¼ï¼Œå°±ä¸€ç›´è¿è¡Œåˆ° <code>return</code>ï¼Œå¹¶å°† <code>return</code> è¯­å¥åé¢çš„è¡¨è¾¾å¼çš„å€¼ä½œä¸ºå¯¹è±¡çš„ <code>value</code> å±æ€§</li><li>å¦‚æœæ²¡æœ‰<code>return</code> è¯­å¥ï¼Œåˆ™è¿”å›å¯¹è±¡çš„ <code>value</code> å±æ€§å€¼ä¸º <code>undefined</code></li></ul></li><li><code>yield</code> è¡¨è¾¾å¼åé¢çš„è¡¨è¾¾å¼ï¼Œåªæœ‰è°ƒç”¨ <code>next</code> æ–¹æ³•ã€å†…éƒ¨æŒ‡é’ˆæŒ‡å‘è¯¥è¯­å¥æ—¶æ‰ä¼šæ‰§è¡Œ<ul><li>ç»™ JavaScript æä¾›äº†æ‰‹åŠ¨<strong>æƒ°æ€§æ±‚å€¼</strong>çš„è¯­æ³•åŠŸèƒ½</li></ul></li><li>ä¸ç”¨ <code>yield</code> çš„æƒ…å†µä¸‹ï¼ŒGenerator å°±æ˜¯ä¸€ä¸ªå•çº¯çš„æš‚ç¼“æ‰§è¡Œå‡½æ•°</li><li><code>yield</code> åªèƒ½ç”¨åœ¨ Generator å‡½æ•°é‡Œé¢ï¼Œå…¶å®ƒåœ°æ–¹ä¼šæŠ¥é”™</li><li><code>yield</code> å¦‚æœç”¨åœ¨å¦ä¸€ä¸ªè¡¨è¾¾å¼ä¸­ï¼Œå¿…é¡»æ”¾åœ¨æ‹¬å·é‡Œé¢</li><li><code>yield</code> ç”¨åšå‡½æ•°å‚æ•°æˆ–æ”¾åœ¨èµ‹å€¼è¡¨è¾¾å¼å³è¾¹ï¼Œä¸ç”¨æ‹¬å·</li></ul><h2 id="next-æ–¹æ³•çš„å‚æ•°"><a href="#next-æ–¹æ³•çš„å‚æ•°" class="headerlink" title="next æ–¹æ³•çš„å‚æ•°"></a>next æ–¹æ³•çš„å‚æ•°</h2><blockquote><p>è¿™èŠ‚æ²¡çœ‹æ‡‚</p></blockquote><ul><li><code>yield</code> è¡¨è¾¾å¼æœ¬èº«æ²¡æœ‰è¿”å›å€¼ï¼Œæˆ–è€…è¯´æ€»æ˜¯è¿”å› <code>undefined</code></li><li><code>next</code> æ–¹æ³•å¯ä»¥å¸¦ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°ä¼šè¢«å½“ä½œä¸Šä¸€ä¸ª <code>yield</code> è¡¨è¾¾å¼çš„è¿”å›å€¼</li></ul><h2 id="forâ€¦of-å¾ªç¯"><a href="#forâ€¦of-å¾ªç¯" class="headerlink" title="forâ€¦of å¾ªç¯"></a>forâ€¦of å¾ªç¯</h2><ul><li><code>for...of</code> å¾ªç¯è‡ªåŠ¨éå† Generator å‡½æ•°è¿è¡Œæ—¶ç”Ÿæˆçš„ <code>Iterator</code> å¯¹è±¡ï¼Œæ­¤æ—¶ä¸éœ€è¦è°ƒç”¨ <code>next</code> æ–¹æ³•</li><li>æ–æ³¢é‚£å¥‘</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">fibonacci</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> [prev, curr] = [<span class="number">0</span>, <span class="number">1</span>];</span><br><span class="line">  <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">    <span class="keyword">yield</span> curr;</span><br><span class="line">    [prev, curr] = [curr, prev + curr];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> n <span class="keyword">of</span> fibonacci()) &#123;</span><br><span class="line">  <span class="keyword">if</span> (n &gt; <span class="number">1000</span>) <span class="keyword">break</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Generator-prototype-throw"><a href="#Generator-prototype-throw" class="headerlink" title="Generator.prototype.throw()"></a>Generator.prototype.throw()</h2><ul><li><code>throw</code> æ–¹æ³•å¯ä»¥åœ¨å‡½æ•°ä½“å¤–æŠ›å‡ºé”™è¯¯ï¼Œåœ¨å‡½æ•°ä½“å†…æ•è·<ul><li>å‰ææ˜¯å¿…é¡»è¿›è¡Œè¿‡ä¸€æ¬¡ <code>next</code> æ–¹æ³•</li><li>æ•è·åä¼šè‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡ <code>next</code> æ–¹æ³•ï¼Œä¸å½±å“ä¸‹æ¬¡éå†</li></ul></li><li>å¦‚æœ Generator å‡½æ•°å†…éƒ¨æ²¡æœ‰éƒ¨ç½² <code>try...catch</code> ä»£ç å—ï¼Œé‚£ä¹ˆé”™è¯¯ä¼šè¢«å¤–éƒ¨çš„ <code>try...catch</code> ä»£ç å—æ•è·</li><li>å¦‚æœéƒ½æ²¡æœ‰ï¼Œé‚£ä¹ˆç¨‹åºå°†æŠ¥é”™ï¼Œç›´æ¥ä¸­æ–­æ‰§è¡Œ</li></ul><h2 id="Generator-prototype-return"><a href="#Generator-prototype-return" class="headerlink" title="Generator.prototype.return()"></a>Generator.prototype.return()</h2><ul><li>è¿”å›ç»™å®šçš„å€¼ï¼Œå¹¶ç»ˆç»“éå† Generator å‡½æ•°</li></ul><h2 id="next-ã€throw-ã€return-çš„å…±åŒç‚¹"><a href="#next-ã€throw-ã€return-çš„å…±åŒç‚¹" class="headerlink" title="next()ã€throw()ã€return() çš„å…±åŒç‚¹"></a>next()ã€throw()ã€return() çš„å…±åŒç‚¹</h2><ul><li>ä½œç”¨éƒ½æ˜¯è®© Generator å‡½æ•°æ¢å¤æ‰§è¡Œï¼Œä½¿ç”¨ä¸åŒçš„è¯­å¥æ›¿æ¢ <code>yield</code> è¡¨è¾¾å¼</li><li><code>next()</code> æ˜¯å°† <code>yield</code> è¡¨è¾¾å¼æ›¿æ¢æˆä¸€ä¸ªå€¼</li><li><code>throw()</code> æ˜¯å°† <code>yield</code> è¡¨è¾¾å¼æ›¿æ¢æˆä¸€ä¸ª <code>throw</code> è¯­å¥</li><li><code>return()</code> æ˜¯å°† <code>yield</code> è¡¨è¾¾å¼æ›¿æ¢æˆä¸€ä¸ª <code>return</code> è¯­å¥</li></ul><h2 id="yield-è¡¨è¾¾å¼-1"><a href="#yield-è¡¨è¾¾å¼-1" class="headerlink" title="yield* è¡¨è¾¾å¼"></a>yield* è¡¨è¾¾å¼</h2><ul><li>åœ¨ä¸€ä¸ª Generator å‡½æ•°é‡Œé¢æ‰§è¡Œå¦ä¸€ä¸ª Generator å‡½æ•°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'a'</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'b'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'x'</span>;</span><br><span class="line">  <span class="keyword">yield</span>* foo();</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'y'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'x'</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'a'</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'b'</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'y'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'x'</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> v <span class="keyword">of</span> foo()) &#123;</span><br><span class="line">    <span class="keyword">yield</span> v;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'y'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> v <span class="keyword">of</span> bar()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(v);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// "x"</span></span><br><span class="line"><span class="comment">// "a"</span></span><br><span class="line"><span class="comment">// "b"</span></span><br><span class="line"><span class="comment">// "y"</span></span><br></pre></td></tr></table></figure><ul><li>ä»è¯­æ³•è§’åº¦çœ‹ï¼Œå¦‚æœ<code>yield</code>è¡¨è¾¾å¼åé¢è·Ÿçš„æ˜¯ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œéœ€è¦åœ¨<code>yield</code>è¡¨è¾¾å¼åé¢åŠ ä¸Šæ˜Ÿå·ï¼Œå°±ä¼šæ‰§è¡Œè¿™ä¸ªéå†å™¨</li><li>ä»»ä½•æ•°æ®ç»“æ„åªè¦æœ‰ Iterator æ¥å£ï¼Œå°±å¯ä»¥è¢«<code>yield*</code>éå†</li></ul><h2 id="ä½œä¸ºå¯¹è±¡å±æ€§çš„-Generator-å‡½æ•°"><a href="#ä½œä¸ºå¯¹è±¡å±æ€§çš„-Generator-å‡½æ•°" class="headerlink" title="ä½œä¸ºå¯¹è±¡å±æ€§çš„ Generator å‡½æ•°"></a>ä½œä¸ºå¯¹è±¡å±æ€§çš„ Generator å‡½æ•°</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  * myGeneratorMethod() &#123;</span><br><span class="line">    Â·Â·Â·</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ç­‰ä»·äº</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  myGeneratorMethod: <span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Â·Â·Â·</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> ECMAScript 6 å…¥é—¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Promiseå¯¹è±¡</title>
      <link href="/2020/03/21/16-Promise%E5%AF%B9%E8%B1%A1/"/>
      <url>/2020/03/21/16-Promise%E5%AF%B9%E8%B1%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="Promise-å¯¹è±¡"><a href="#Promise-å¯¹è±¡" class="headerlink" title="Promise å¯¹è±¡"></a>Promise å¯¹è±¡</h1><h2 id="Promise-çš„å«ä¹‰"><a href="#Promise-çš„å«ä¹‰" class="headerlink" title="Promise çš„å«ä¹‰"></a>Promise çš„å«ä¹‰</h2><ul><li>å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œæ¯”ä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆæ›´åˆç†å’Œæ›´å¼ºå¤§<ul><li>ä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆï¼šå›è°ƒå‡½æ•°å’Œäº‹ä»¶</li></ul></li><li>Promise ç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœ</li><li>ä»è¯­æ³•ä¸Šè¯´ï¼ŒPromise æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯</li><li>ç‰¹ç‚¹ï¼š<ul><li>å¯¹è±¡çŠ¶æ€ä¸å—å¤–ç•Œå½±å“<ul><li>Promise å¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæœ‰ä¸‰ç§çŠ¶æ€<ul><li>pending è¿›è¡Œä¸­</li><li>fulfilled å·²æˆåŠŸ</li><li>rejected å·²å¤±è´¥</li></ul></li><li>åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœæ‰èƒ½æ”¹å˜çŠ¶æ€</li></ul></li><li>ä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†æ”¹å˜ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥å¾—åˆ°è¿™ä¸ªç»“æœ<ul><li>çŠ¶æ€æ”¹å˜åªæœ‰ä¸¤ç§å¯èƒ½<ul><li>pending -&gt; fulfilled</li><li>pending -&gt; rejected</li></ul></li></ul></li></ul></li><li>ç¼ºç‚¹ï¼š<ul><li>æ— æ³•å–æ¶ˆã€‚ä¸€æ—¦æ–°å»ºå°±ä¼šç«‹å³æ‰§è¡Œï¼Œæ— æ³•ä¸­é€”å–æ¶ˆ</li><li>å¦‚æœä¸è®¾ç½®å›è°ƒå‡½æ•°ï¼Œå†…éƒ¨æŠ›å‡ºçš„é”™è¯¯æ— æ³•ååº”åˆ°å¤–éƒ¨</li><li>å¤„äº pending çŠ¶æ€çš„æ—¶å€™ï¼Œæ— æ³•å¾—çŸ¥è¿›åº¦</li><li>å¦‚æœäº‹ä»¶ä¸æ–­åœ°åå¤å‘ç”Ÿï¼Œ Stream æ¨¡å¼æ˜¯æ¯” Promise æ›´å¥½çš„é€‰æ‹©</li></ul></li></ul><h2 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h2><ol><li>åˆ›å»º Promise å®ä¾‹</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="comment">/* æˆåŠŸ */</span>) &#123;</span><br><span class="line">      resolve(value);<span class="comment">// å°† Promise å¯¹è±¡çš„çŠ¶æ€ pending -&gt; fulfilled</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  reject(error);<span class="comment">// å°† Promise å¯¹è±¡çš„çŠ¶æ€ pending -&gt; rejected</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ol start="2"><li>å›è°ƒå‡½æ•°</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// success</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">error</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// failure</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>è°ƒç”¨ <code>resolve</code> æˆ– <code>reject</code> å¹¶ä¸ä¼šç»ˆç»“ Promise çš„å‚æ•°å‡½æ•°çš„æ‰§è¡Œ</li><li>ç«‹å³ resolved çš„ Promise æ˜¯åœ¨æœ¬è½®äº‹ä»¶å¾ªç¯çš„æœ«å°¾æ‰§è¡Œï¼Œæ€»æ˜¯æ™šäºæœ¬è½®å¾ªç¯çš„åŒæ­¥ä»»åŠ¡</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="number">1</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(r);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 1</span></span><br></pre></td></tr></table></figure><ul><li>ä¸€èˆ¬æ¥è¯´ï¼Œ<code>resolve</code> æˆ– <code>reject</code> ä¹‹å Promise çš„ä½¿å‘½å°±å®Œæˆäº†ï¼Œåç»­æ“ä½œåº”è¯¥æ”¾åˆ° <code>then</code> é‡Œ<ul><li>æ‰€ä»¥å¯ä»¥ <code>return resolve()</code> æˆ– <code>return reject()</code> </li></ul></li></ul><h2 id="Promise-prototype-then"><a href="#Promise-prototype-then" class="headerlink" title="Promise.prototype.then()"></a>Promise.prototype.then()</h2><ul><li><code>then</code> æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä¸€ä¸ª<strong>æ–°çš„</strong> Promise å®ä¾‹ï¼Œå› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">getJSON(<span class="string">"/post/1.json"</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">post</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> getJSON(post.commentURL);</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">comments</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(...)</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(...)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>ç®­å¤´å‡½æ•°å†™æ³•</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">getJSON(<span class="string">"/post/1.json"</span>).then(</span><br><span class="line">  post =&gt; getJSON(post.commentURL);</span><br><span class="line">).then(</span><br><span class="line">comments =&gt; <span class="built_in">console</span>.log(...),</span><br><span class="line">  err =&gt; <span class="built_in">console</span>.log(...)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="Promise-prototype-catch"><a href="#Promise-prototype-catch" class="headerlink" title="Promise.prototype.catch()"></a>Promise.prototype.catch()</h2><ul><li><code>Promise.prototype.catch()</code> æ˜¯ <code>.then(null, rejection)</code> æˆ– <code>.then(undefined, rejection)</code> çš„åˆ«åï¼Œç”¨äºæŒ‡å®šå‘ç”Ÿé”™è¯¯çš„å›è°ƒå‡½æ•°<ul><li>ä¸€èˆ¬æ¥è¯´ï¼Œä¸è¦ç”¨ <code>then</code> çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œç›´æ¥ç”¨ <code>catch</code>ï¼Œå¯ä»¥æ•è·ç¬¬ä¸€ä¸ªå‚æ•°çš„æ‰§è¡Œé”™è¯¯</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">getJSON(<span class="string">'/posts.json'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">post</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;).catch (<span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å¤„ç† getJOSN å’Œ å‰ä¸€ä¸ªå›è°ƒå‡½æ•°è¿è¡Œæ—¶å‘ç”Ÿçš„é”™è¯¯</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li><code>reject</code> æ–¹æ³•çš„ä½œç”¨ç­‰äºæŠ›å‡ºé”™è¯¯<ul><li>å¦‚æœ Promise çŠ¶æ€å·²ç»å˜æˆ <code>resulved</code> å†æŠ›å‡ºé”™è¯¯æ˜¯æ— æ•ˆçš„</li></ul></li><li>Promise å¯¹è±¡çš„é”™è¯¯å…·æœ‰â€å†’æ³¡â€æ€§è´¨ï¼Œä¼šä¸€ç›´å‘åä¼ é€’ï¼ŒçŸ¥é“è¢«æ•è·ä¸ºæ­¢<ul><li>ä¹Ÿå°±æ˜¯è¯´ï¼Œé”™è¯¯æ€»æ˜¯ä¼šè¢«ä¸‹ä¸€ä¸ª <code>catch</code> è¯­å¥æ•è·</li></ul></li><li>å¦‚æœæ²¡æœ‰ä½¿ç”¨ <code>carch</code> æ–¹æ³•æŒ‡å®šé”™è¯¯å¤„ç†çš„å›è°ƒå‡½æ•°ï¼ŒPromise å¯¹è±¡æŠ›å‡ºçš„é”™è¯¯ä¸ä¼šä¼ é€’åˆ°å¤–å±‚ä»£ç </li><li>Node æœ‰ä¸€ä¸ª <code>unhandledRejection</code> äº‹ä»¶ï¼ˆè®¡åˆ’åºŸé™¤ï¼‰ï¼Œä¸“é—¨ç›‘å¬æœªæ•è·çš„ <code>reject</code> é”™è¯¯</li><li><code>catch</code> è¿”å›å€¼ä¹Ÿæ˜¯ Promise å¯¹è±¡ï¼Œè¿˜å¯ä»¥æ¥ <code>then</code> ï¼Œä¹Ÿå¯ä»¥æŠ›å‡ºé”™è¯¯è¢«ä¸‹ä¸€ä¸ª <code>catch</code> æ•è·</li></ul><h2 id="Promise-prototype-finally"><a href="#Promise-prototype-finally" class="headerlink" title="Promise.prototype.finally()"></a>Promise.prototype.finally()</h2><ul><li>æ— è®º Promise æœ€åçŠ¶æ€å¦‚ä½•ï¼Œéƒ½ä¼šæ‰§è¡Œçš„æ“ä½œï¼Œä¸æ¥æ”¶å‚æ•°</li><li>æœ¬è´¨ä¸Šæ˜¯ <code>then</code> æ–¹æ³•çš„ç‰¹ä¾‹ï¼ˆ<code>then</code> ä¸­ä¸¤ç§æƒ…å†µä»£ç ä¸€æ ·ï¼‰</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.prototype.finally = <span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> P = <span class="keyword">this</span>.constructor;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.then(</span><br><span class="line">  value =&gt; P.resolve(callback()).then(<span class="function"><span class="params">()</span> =&gt;</span> value),</span><br><span class="line">    reason =&gt; P.resolve(callback()).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123; <span class="keyword">throw</span> reason &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li><code>finally</code> æ–¹æ³•æ€»æ˜¯è¿”å›åŸæ¥çš„å€¼</li></ul><h2 id="Promise-prototype-all"><a href="#Promise-prototype-all" class="headerlink" title="Promise.prototype.all()"></a>Promise.prototype.all()</h2><ul><li>å°†å¤šä¸ª Promise å®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹<ul><li>å‚æ•°å¯ä»¥ä¸æ˜¯æ•°ç»„ï¼Œä½†å¿…é¡»å…·æœ‰ Iterator æ¥å£ï¼Œä¸”æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ Promise å®ä¾‹</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="built_in">Promise</span>.all([p1, p2, p3]);</span><br></pre></td></tr></table></figure><ul><li>p çš„çŠ¶æ€ç”± p1, p2, p3 å†³å®š<ul><li>éƒ½ä¸º <code>fulfilled</code>ï¼Œp ä¸º <code>fulfilled</code><ul><li>è¿”å›å€¼ç»„æˆæ•°ç»„ï¼Œä¼ é€’ç»™ p çš„å›è°ƒå‡½æ•°</li></ul></li><li>ä»»ä¸€ <code>rejected</code>ï¼Œp ä¸º <code>rejected</code><ul><li>ç¬¬ä¸€ä¸ªè¢« <code>reject</code> çš„å®ä¾‹çš„è¿”å›å€¼ï¼Œä¼ é€’ç»™ p çš„å›è°ƒå‡½æ•°</li><li>å¦‚æœ p1, p2, p3 è‡ªå·±å®šä¹‰äº† <code>catch</code>ï¼Œåˆ™ä¼šæ‰§è¡Œ <code>catch</code>ï¼ŒçŠ¶æ€å˜æˆ <code>catch</code> è¿”å›çš„ <code>resolve</code></li><li>å¦‚æœæ²¡å®šä¹‰ <code>catch</code> æ‰ä¼šè°ƒç”¨ <code>Promise.all()</code> çš„ <code>catch</code> æ–¹æ³•</li></ul></li></ul></li></ul><h2 id="Promise-prototype-race"><a href="#Promise-prototype-race" class="headerlink" title="Promise.prototype.race()"></a>Promise.prototype.race()</h2><ul><li>å°†å¤šä¸ª Promise å®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="built_in">Promise</span>.race([p1, p2, p3]);</span><br></pre></td></tr></table></figure><ul><li>åªè¦ p1, p2, p3 ä»»ä¸€æ”¹å˜çŠ¶æ€ï¼Œp å°±è·Ÿç€æ”¹å˜<ul><li>ç‡å…ˆæ”¹å˜çš„ Promise å®ä¾‹çš„è¿”å›å€¼ï¼Œä¼ é€’ç»™ p çš„å›è°ƒå‡½æ•°</li></ul></li></ul><h2 id="Promise-prototype-allSettled"><a href="#Promise-prototype-allSettled" class="headerlink" title="Promise.prototype.allSettled()"></a>Promise.prototype.allSettled()</h2><ul><li>æ¥å—ä¸€ç»„ Promise å®ä¾‹ä½œä¸ºå‚æ•°ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹</li><li>æ‰€æœ‰å‚æ•°å®ä¾‹éƒ½è¿”å›ç»“æœï¼ŒåŒ…è£…å®ä¾‹æ‰ä¼šç»“æŸ</li><li>è¿”å›æ–°çš„ Promise å®ä¾‹ï¼ŒçŠ¶æ€æ€»æ˜¯ <code>fulfilled</code></li><li>ç›‘å¬å‡½æ•°æ¥æ”¶åˆ°çš„å‚æ•°æ˜¯å¯¹è±¡æ•°ç»„ï¼Œæ¯ä¸ªå¯¹è±¡åˆ†åˆ«å¯¹åº” <code>allSettled</code> çš„å‚æ•°<ul><li>å¯¹è±¡å±æ€§ status, value, reason</li></ul></li></ul><h2 id="Promise-prototype-any"><a href="#Promise-prototype-any" class="headerlink" title="Promise.prototype.any()"></a>Promise.prototype.any()</h2><ul><li>æ¥å—ä¸€ç»„ Promise å®ä¾‹ä½œä¸ºå‚æ•°ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹<ul><li>ä»»ä¸€ <code>fulfilled</code> ï¼ŒåŒ…è£…å®ä¾‹å°± <code>fulfilled</code></li><li>å…¨éƒ¨ <code>rejectd</code> ï¼ŒåŒ…è£…å®ä¾‹æ‰ <code>rejectd</code></li></ul></li></ul><h2 id="Promise-prototype-resolve"><a href="#Promise-prototype-resolve" class="headerlink" title="Promise.prototype.resolve()"></a>Promise.prototype.resolve()</h2><ul><li>å°†ç°æœ‰å¯¹è±¡è½¬ä¸º Promise å¯¹è±¡</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.resolve(<span class="string">'foo'</span>)</span><br><span class="line"><span class="comment">// ç­‰ä»·äº</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> resolve(<span class="string">'foo'</span>))</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°åˆ† 4 ç§æƒ…å†µ<ul><li>Promise å®ä¾‹<ul><li>ä¸åšä»»ä½•ä¿®æ”¹</li></ul></li><li><code>thenable</code> å¯¹è±¡ï¼ˆå…·æœ‰ <code>then</code> æ–¹æ³•çš„å¯¹è±¡ï¼‰<ul><li>è½¬ä¸º Promise å¯¹è±¡ï¼Œç«‹å³æ‰§è¡Œ <code>then</code></li></ul></li><li>ä¸æ˜¯ <code>thenable</code> å¯¹è±¡ï¼ˆå…¶å®ƒå¯¹è±¡æˆ–ä¸æ˜¯å¯¹è±¡ï¼‰<ul><li>è¿”å›ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡ï¼ŒçŠ¶æ€ <code>resolved</code></li></ul></li><li>ä¸å¸¦å‚æ•°<ul><li>ç›´æ¥è¿”å›ä¸€ä¸ª <code>resolved</code> çš„Promise å¯¹è±¡</li></ul></li></ul></li><li>ç«‹å³ <code>resolve</code> çš„ Promise å¯¹è±¡ï¼Œåœ¨æœ¬è½®â€äº‹ä»¶å¾ªç¯â€çš„ç»“æŸæ—¶æ‰§è¡Œï¼Œä¸æ˜¯åœ¨ä¸‹ä¸€è½®â€äº‹ä»¶å¾ªç¯â€å¼€å§‹æ—¶</li></ul><h2 id="Promise-prototype-reject"><a href="#Promise-prototype-reject" class="headerlink" title="Promise.prototype.reject()"></a>Promise.prototype.reject()</h2><ul><li>è¿”å›ä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ï¼ŒçŠ¶æ€ä¸º <code>rejected</code></li><li>å‚æ•°ä¼šåŸå°ä¸åŠ¨ä½œä¸º <code>reject</code> ç†ç”±ï¼Œå’Œ <code>resolve</code> å¤„ç†ä¸åŒ</li></ul><h2 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h2><ul><li>åŠ è½½å›¾ç‰‡</li><li>Generator å‡½æ•°ä¸ Promise ç»“åˆ</li></ul><h2 id="Promise-try"><a href="#Promise-try" class="headerlink" title="Promise.try()"></a>Promise.try()</h2><ul><li>åŒæ­¥å‡½æ•°åŒæ­¥æ‰§è¡Œï¼Œå¼‚æ­¥å‡½æ•°å¼‚æ­¥æ‰§è¡Œ</li><li>æ¨¡æ‹Ÿ <code>try</code> ä»£ç å—</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> ECMAScript 6 å…¥é—¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Symbol</title>
      <link href="/2020/03/18/12-Symbol/"/>
      <url>/2020/03/18/12-Symbol/</url>
      
        <content type="html"><![CDATA[<h1 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><ul><li>ES5 çš„å¯¹è±¡å±æ€§åéƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå®¹æ˜“é€ æˆå±æ€§åå†²çª</li><li>åŸå§‹æ•°æ®ç±»å‹ <code>Symbol</code> è¡¨ç¤ºç‹¬ä¸€æ— äºŒçš„å€¼</li><li>é€šè¿‡ <code>Symbol</code> å‡½æ•°ç”Ÿæˆ<ul><li>ä¸èƒ½ä½¿ç”¨ <code>new</code> å‘½ä»¤</li><li>å¯ä»¥æ¥å—å‚æ•°ï¼Œä½œä¸ºå˜é‡çš„æè¿°ï¼Œç”¨æ¥åŒºåˆ†<ul><li>å¦‚æœå‚æ•°æ˜¯å¯¹è±¡ï¼Œå…ˆè°ƒç”¨è¯¥å¯¹è±¡çš„ <code>toString</code> æ–¹æ³•</li></ul></li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">typeof</span> s<span class="comment">// "symbol"</span></span><br></pre></td></tr></table></figure><ul><li><p>ç°åœ¨ï¼Œå¯¹è±¡çš„å±æ€§åå¯ä»¥æœ‰ä¸¤ç§ç±»å‹</p><ul><li>å­—ç¬¦ä¸²</li><li>Symbol ç±»å‹</li></ul></li><li><p>Symbol å€¼ä¸èƒ½ä¸å…¶ä»–ç±»å‹çš„å€¼è¿›è¡Œè¿ç®—ï¼Œä¼šæŠ¥é”™</p></li><li><p>å¯ä»¥è½¬ä¸ºå­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼(true)ï¼Œä½†ä¸èƒ½è½¬ä¸ºæ•°å€¼</p></li></ul><h2 id="Symbol-prototype-description"><a href="#Symbol-prototype-description" class="headerlink" title="Symbol.prototype.description"></a>Symbol.prototype.description</h2><ul><li>åˆ›å»º Symbol çš„æ—¶å€™ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªæè¿°</li><li>è¯»å–æè¿°éœ€è¦å°† Symbol æ˜¾å¼è½¬ä¸ºå­—ç¬¦ä¸²</li><li>ES2019 æä¾›  <code>description</code> å±æ€§ï¼Œè¿”å› Symbol æè¿°</li></ul><h2 id="ä½œä¸ºå±æ€§åçš„-Symbol"><a href="#ä½œä¸ºå±æ€§åçš„-Symbol" class="headerlink" title="ä½œä¸ºå±æ€§åçš„ Symbol"></a>ä½œä¸ºå±æ€§åçš„ Symbol</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mySymbol = <span class="built_in">Symbol</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸€ç§å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> a = &#123;&#125;;</span><br><span class="line">a[mySymbol] = <span class="string">'Hello!'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬äºŒç§å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  [mySymbol]: <span class="string">'Hello!'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸‰ç§å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> a = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(a, mySymbol, &#123; <span class="attr">value</span>: <span class="string">'Hello!'</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸Šå†™æ³•éƒ½å¾—åˆ°åŒæ ·ç»“æœ</span></span><br><span class="line">a[mySymbol] <span class="comment">// "Hello!"</span></span><br></pre></td></tr></table></figure><ul><li>Symbol å€¼ä½œä¸ºå¯¹è±¡å±æ€§åæ—¶ï¼Œä¸èƒ½ç”¨ç‚¹è¿ç®—ç¬¦ï¼Œå› ä¸ºç‚¹è¿ç®—ç¬¦åé¢æ€»æ˜¯å­—ç¬¦ä¸²<ul><li><strong>è¦æ”¾åœ¨æ–¹æ‹¬å·ä¸­å®šä¹‰</strong></li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mySymbol = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">const</span> a = &#123;&#125;;</span><br><span class="line">a.mySymbol = <span class="string">'Hello'</span>;</span><br><span class="line">a[mySymbol]<span class="comment">// undefined</span></span><br><span class="line">a[<span class="string">'mySymbol'</span>] <span class="comment">// 'Hello'</span></span><br></pre></td></tr></table></figure><ul><li>Symbol å€¼ä½œä¸ºå±æ€§åæ—¶ï¼Œè¯¥å±æ€§æ˜¯å…¬å¼€å±æ€§ï¼Œä¸æ˜¯ç§æœ‰å±æ€§</li></ul><h2 id="å®ä¾‹ï¼šæ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²"><a href="#å®ä¾‹ï¼šæ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²" class="headerlink" title="å®ä¾‹ï¼šæ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²"></a>å®ä¾‹ï¼šæ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²</h2><blockquote><p>é­”æœ¯å­—ç¬¦ä¸²æŒ‡çš„æ˜¯ï¼Œåœ¨ä»£ç ä¹‹ä¸­å¤šæ¬¡å‡ºç°ã€ä¸ä»£ç å½¢æˆå¼ºè€¦åˆçš„æŸä¸€ä¸ªå…·ä½“çš„å­—ç¬¦ä¸²æˆ–è€…æ•°å€¼ã€‚é£æ ¼è‰¯å¥½çš„ä»£ç ï¼Œåº”è¯¥å°½é‡æ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²ï¼Œæ”¹ç”±å«ä¹‰æ¸…æ™°çš„å˜é‡ä»£æ›¿ã€‚</p></blockquote><ul><li>ç­‰äºå“ªä¸ªå€¼å¹¶ä¸é‡è¦ï¼Œåªè¦ç¡®ä¿ä¸ä¼šè·Ÿå…¶ä»–å±æ€§çš„å€¼å†²çªå³å¯ï¼Œå°±å¾ˆé€‚åˆæ”¹ç”¨ Symbol å€¼</li></ul><h2 id="å±æ€§åçš„éå†"><a href="#å±æ€§åçš„éå†" class="headerlink" title="å±æ€§åçš„éå†"></a>å±æ€§åçš„éå†</h2><ul><li><p>Symbol ä½œä¸ºå±æ€§åï¼Œéå†å¯¹è±¡çš„æ—¶å€™ä¸ä¼šå‡ºç°åœ¨<code>for...in</code>ã€<code>for...of</code>å¾ªç¯ä¸­</p><ul><li>å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œä¸ºå¯¹è±¡å®šä¹‰éç§æœ‰ã€åªå¸Œæœ›å†…éƒ¨ä½¿ç”¨çš„æ–¹æ³•</li></ul></li><li><p>ä¸ä¼šè¢«<code>Object.keys()</code>ã€<code>Object.getOwnPropertyNames()</code>ã€<code>JSON.stringify()</code> è¿”å›</p></li><li><p><code>Object.getOwnPropertySymbols()</code>æ–¹æ³•ï¼Œå¯ä»¥è·å–æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰ Symbol å±æ€§å</p><ul><li>è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å½“å‰å¯¹è±¡çš„æ‰€æœ‰ç”¨ä½œå±æ€§åçš„ Symbol å€¼</li></ul></li><li><p><code>Reflect.ownKeys(object)</code>æ–¹æ³•å¯ä»¥è¿”å›æ‰€æœ‰ç±»å‹çš„é”®åï¼ŒåŒ…æ‹¬å¸¸è§„é”®åå’Œ Symbol é”®å</p></li></ul><h2 id="Symbol-for-ï¼ŒSymbol-keyFor"><a href="#Symbol-for-ï¼ŒSymbol-keyFor" class="headerlink" title="Symbol.for()ï¼ŒSymbol.keyFor()"></a>Symbol.for()ï¼ŒSymbol.keyFor()</h2><ul><li><code>Symbol.for(&#39;string&#39;)</code> æ£€æŸ¥æ˜¯å¦æœ‰ä»¥ <code>string</code> ä½œä¸ºåç§°çš„ Symbol å€¼ï¼Œæœ‰åˆ™è¿”å›ï¼Œæ²¡æœ‰åˆ™æ–°å»ºï¼Œå¹¶æ³¨å†Œåˆ°å…¨å±€</li><li><code>Symbol()</code>å†™æ³•æ²¡æœ‰ç™»è®°æœºåˆ¶</li><li><code>Symbol.keyFor(å˜é‡å)</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå·²ç™»è®°çš„ Symbol ç±»å‹å€¼çš„<code>key</code></li></ul><h2 id="å®ä¾‹ï¼šæ¨¡å—çš„-Singleton-æ¨¡å¼"><a href="#å®ä¾‹ï¼šæ¨¡å—çš„-Singleton-æ¨¡å¼" class="headerlink" title="å®ä¾‹ï¼šæ¨¡å—çš„ Singleton æ¨¡å¼"></a>å®ä¾‹ï¼šæ¨¡å—çš„ Singleton æ¨¡å¼</h2><ul><li>Singleton æ¨¡å¼ï¼ˆå•ä¾‹æ¨¡å¼ï¼‰æŒ‡çš„æ˜¯è°ƒç”¨ä¸€ä¸ªç±»ï¼Œä»»ä½•æ—¶å€™è¿”å›åˆ°éƒ½æ˜¯åŒä¸€ä¸ªå®ä¾‹</li></ul><h2 id="å†…ç½®çš„-Symbol-å€¼"><a href="#å†…ç½®çš„-Symbol-å€¼" class="headerlink" title="å†…ç½®çš„ Symbol å€¼"></a>å†…ç½®çš„ Symbol å€¼</h2><ul><li>Symbol.hasInstance<ul><li>æŒ‡å‘ä¸€ä¸ªå†…éƒ¨æ–¹æ³•</li><li>å½“å…¶ä»–å¯¹è±¡ä½¿ç”¨<code>instanceof</code>è¿ç®—ç¬¦ï¼Œä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•</li><li>æ¯”å¦‚ï¼Œ<code>foo instanceof Foo</code>åœ¨è¯­è¨€å†…éƒ¨ï¼Œå®é™…è°ƒç”¨çš„æ˜¯<code>Foo[Symbol.hasInstance](foo)</code></li></ul></li><li>Symbol.isConcatSpreadable<ul><li>ç­‰äºä¸€ä¸ªå¸ƒå°”å€¼</li><li>è¡¨ç¤ºè¯¥å¯¹è±¡ç”¨äº<code>Array.prototype.concat()</code>æ—¶ï¼Œæ˜¯å¦å¯ä»¥å±•å¼€</li></ul></li><li>Symbol.species<ul><li>æŒ‡å‘ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œåˆ›å»ºè¡ç”Ÿå¯¹è±¡æ—¶ä½¿ç”¨è¯¥å±æ€§</li></ul></li><li>Symbol.match<ul><li>æŒ‡å‘ä¸€ä¸ªå‡½æ•°</li><li>å¦‚æœè¯¥å±æ€§å­˜åœ¨ï¼Œè°ƒç”¨å®ƒå¹¶è¿”å›æ–¹æ³•çš„è¿”å›å€¼</li></ul></li><li>Symbol.replace<ul><li>æŒ‡å‘ä¸€ä¸ªæ–¹æ³•</li><li>å½“è¯¥å¯¹è±¡è¢«<code>String.prototype.replace</code>æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›è¯¥æ–¹æ³•çš„è¿”å›å€¼</li></ul></li><li>Symbol.search<ul><li>æŒ‡å‘ä¸€ä¸ªæ–¹æ³•</li><li>å½“è¯¥å¯¹è±¡è¢«<code>String.prototype.search</code>æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›è¯¥æ–¹æ³•çš„è¿”å›å€¼</li></ul></li><li>Symbol.split<ul><li>æŒ‡å‘ä¸€ä¸ªæ–¹æ³•</li><li>å½“è¯¥å¯¹è±¡è¢«<code>String.prototype.split</code>æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›è¯¥æ–¹æ³•çš„è¿”å›å€¼</li></ul></li><li>Symbol.iterator</li><li>Symbol.toPrimitive</li><li>Symbol.toStringTag</li><li>SYmbol.unscopables</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> ECMAScript 6 å…¥é—¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‡½æ•°çš„æ‰©å±•</title>
      <link href="/2020/03/18/8-%E5%87%BD%E6%95%B0%E7%9A%84%E6%89%A9%E5%B1%95/"/>
      <url>/2020/03/18/8-%E5%87%BD%E6%95%B0%E7%9A%84%E6%89%A9%E5%B1%95/</url>
      
        <content type="html"><![CDATA[<h1 id="å‡½æ•°çš„æ‰©å±•"><a href="#å‡½æ•°çš„æ‰©å±•" class="headerlink" title="å‡½æ•°çš„æ‰©å±•"></a>å‡½æ•°çš„æ‰©å±•</h1><h2 id="å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼"><a href="#å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼" class="headerlink" title="å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼"></a>å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼</h2><h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Point</span>ï¼ˆ<span class="title">x</span> = 0, <span class="title">y</span> = 0) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.x = x;</span><br><span class="line">  <span class="keyword">this</span>.y = y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°é»˜è®¤å€¼æ˜¯æƒ°æ€§æ±‚å€¼ï¼Œæ¯æ¬¡é‡æ–°è®¡ç®—</li></ul><h3 id="ä¸è§£æ„èµ‹å€¼é»˜è®¤å€¼ç»“åˆä½¿ç”¨"><a href="#ä¸è§£æ„èµ‹å€¼é»˜è®¤å€¼ç»“åˆä½¿ç”¨" class="headerlink" title="ä¸è§£æ„èµ‹å€¼é»˜è®¤å€¼ç»“åˆä½¿ç”¨"></a>ä¸è§£æ„èµ‹å€¼é»˜è®¤å€¼ç»“åˆä½¿ç”¨</h3><h3 id="å‡½æ•°çš„-length-å±æ€§"><a href="#å‡½æ•°çš„-length-å±æ€§" class="headerlink" title="å‡½æ•°çš„ length å±æ€§"></a>å‡½æ•°çš„ length å±æ€§</h3><ul><li>è¿”å›æ²¡æœ‰æŒ‡å®šé»˜è®¤å€¼çš„å‚æ•°ä¸ªæ•°</li></ul><h2 id="rest-å‚æ•°"><a href="#rest-å‚æ•°" class="headerlink" title="rest å‚æ•°"></a>rest å‚æ•°</h2><ul><li><code>...å˜é‡å</code> ä¸éœ€è¦ä½¿ç”¨ <code>arguments</code> å¯¹è±¡</li><li><code>arguments</code> æ˜¯ç±»æ•°ç»„</li><li><code>rest</code> æ˜¯çœŸçš„æ•°ç»„</li></ul><h2 id="name-å±æ€§"><a href="#name-å±æ€§" class="headerlink" title="name å±æ€§"></a>name å±æ€§</h2><ul><li>è¿”å›å‡½æ•°å</li></ul><h2 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°"></a>ç®­å¤´å‡½æ•°</h2><h3 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h3><ul><li>å‡½æ•°ä½“å†…çš„ <code>this</code> å¯¹è±¡ï¼Œæ˜¯å®šä¹‰æ—¶æ‰€åœ¨çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ—¶æ‰€åœ¨çš„å¯¹è±¡<ul><li>ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ <code>this</code> ï¼Œå¼•ç”¨å¤–å±‚çš„ <code>this</code></li></ul></li><li>ä¸å¯ä»¥å½“ä½œæ„é€ å‡½æ•°ï¼Œä¸å¯ä»¥ä½¿ç”¨ <code>new</code> å‘½ä»¤</li><li>ä¸å¯ä»¥ä½¿ç”¨ <code>arguments</code> å¯¹è±¡ï¼Œå¯ä»¥ç”¨ <code>rest</code> å‚æ•°</li><li>ä¸å¯ä»¥ä½¿ç”¨ <code>yield</code> å‘½ä»¤ï¼Œå› æ­¤ä¸èƒ½ç”¨åš Generator å‡½æ•°</li></ul><h2 id="å°¾è°ƒç”¨ä¼˜åŒ–"><a href="#å°¾è°ƒç”¨ä¼˜åŒ–" class="headerlink" title="å°¾è°ƒç”¨ä¼˜åŒ–"></a>å°¾è°ƒç”¨ä¼˜åŒ–</h2><h3 id="ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨"><a href="#ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨" class="headerlink" title="ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨"></a>ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨</h3><ul><li>æŸä¸ªå‡½æ•°çš„æœ€åä¸€æ­¥æ˜¯è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°</li></ul><h3 id="å°¾è°ƒç”¨ä¼˜åŒ–-1"><a href="#å°¾è°ƒç”¨ä¼˜åŒ–-1" class="headerlink" title="å°¾è°ƒç”¨ä¼˜åŒ–"></a>å°¾è°ƒç”¨ä¼˜åŒ–</h3><blockquote><p>å‡½æ•°è°ƒç”¨ä¼šåœ¨å†…å­˜å½¢æˆä¸€ä¸ªâ€œè°ƒç”¨è®°å½•â€ï¼Œåˆç§°â€œè°ƒç”¨å¸§â€ï¼ˆcall frameï¼‰ï¼Œä¿å­˜è°ƒç”¨ä½ç½®å’Œå†…éƒ¨å˜é‡ç­‰ä¿¡æ¯ã€‚å¦‚æœåœ¨å‡½æ•°<code>A</code>çš„å†…éƒ¨è°ƒç”¨å‡½æ•°<code>B</code>ï¼Œé‚£ä¹ˆåœ¨<code>A</code>çš„è°ƒç”¨å¸§ä¸Šæ–¹ï¼Œè¿˜ä¼šå½¢æˆä¸€ä¸ª<code>B</code>çš„è°ƒç”¨å¸§ã€‚ç­‰åˆ°<code>B</code>è¿è¡Œç»“æŸï¼Œå°†ç»“æœè¿”å›åˆ°<code>A</code>ï¼Œ<code>B</code>çš„è°ƒç”¨å¸§æ‰ä¼šæ¶ˆå¤±ã€‚å¦‚æœå‡½æ•°<code>B</code>å†…éƒ¨è¿˜è°ƒç”¨å‡½æ•°<code>C</code>ï¼Œé‚£å°±è¿˜æœ‰ä¸€ä¸ª<code>C</code>çš„è°ƒç”¨å¸§ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ‰€æœ‰çš„è°ƒç”¨å¸§ï¼Œå°±å½¢æˆä¸€ä¸ªâ€œè°ƒç”¨æ ˆâ€ï¼ˆcall stackï¼‰ã€‚</p><p>å°¾è°ƒç”¨ç”±äºæ˜¯å‡½æ•°çš„æœ€åä¸€æ­¥æ“ä½œï¼Œæ‰€ä»¥ä¸éœ€è¦ä¿ç•™å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§ï¼Œå› ä¸ºè°ƒç”¨ä½ç½®ã€å†…éƒ¨å˜é‡ç­‰ä¿¡æ¯éƒ½ä¸ä¼šå†ç”¨åˆ°äº†ï¼Œåªè¦ç›´æ¥ç”¨å†…å±‚å‡½æ•°çš„è°ƒç”¨å¸§ï¼Œå–ä»£å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§å°±å¯ä»¥äº†ã€‚</p></blockquote><ul><li>åªæœ‰ Safari æ”¯æŒ</li></ul><h3 id="å°¾é€’å½’"><a href="#å°¾é€’å½’" class="headerlink" title="å°¾é€’å½’"></a>å°¾é€’å½’</h3><ul><li>å°¾è°ƒç”¨è‡ªèº«ï¼Œå°±ç§°ä¸ºå°¾é€’å½’ã€‚</li></ul><blockquote><p>é€’å½’éå¸¸è€—è´¹å†…å­˜ï¼Œå› ä¸ºéœ€è¦åŒæ—¶ä¿å­˜æˆåƒä¸Šç™¾ä¸ªè°ƒç”¨å¸§ï¼Œå¾ˆå®¹æ˜“å‘ç”Ÿâ€œæ ˆæº¢å‡ºâ€é”™è¯¯ï¼ˆstack overflowï¼‰ã€‚ä½†å¯¹äºå°¾é€’å½’æ¥è¯´ï¼Œç”±äºåªå­˜åœ¨ä¸€ä¸ªè°ƒç”¨å¸§ï¼Œæ‰€ä»¥æ°¸è¿œä¸ä¼šå‘ç”Ÿâ€œæ ˆæº¢å‡ºâ€é”™è¯¯ã€‚</p></blockquote><ul><li>æ–æ³¢é‚£å¥‘</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Fibonacci</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> Fibonacci(n<span class="number">-1</span>) + Fibonacci(n<span class="number">-2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°¾é€’å½’</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Fibonacci2</span> (<span class="params">n, ac1 = <span class="number">1</span>, ac2 = <span class="number">1</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) <span class="keyword">return</span> ac2;</span><br><span class="line">  <span class="keyword">return</span> Fibonacci2 (n<span class="number">-1</span>, ac2, ac1 + ac2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ES6 ä¸­åªè¦ä½¿ç”¨å°¾é€’å½’ï¼Œå°±ä¸ä¼šå‘ç”Ÿæ ˆæº¢å‡ºï¼Œç›¸å¯¹èŠ‚çœå†…å­˜</li></ul><h3 id="é€’å½’å‡½æ•°çš„æ”¹å†™"><a href="#é€’å½’å‡½æ•°çš„æ”¹å†™" class="headerlink" title="é€’å½’å‡½æ•°çš„æ”¹å†™"></a>é€’å½’å‡½æ•°çš„æ”¹å†™</h3><ul><li>æŠŠæ‰€æœ‰ç”¨åˆ°çš„å†…éƒ¨å˜é‡æ”¹å†™æˆå‡½æ•°çš„å‚æ•°</li></ul><blockquote><p>å‡½æ•°å¼ç¼–ç¨‹æœ‰ä¸€ä¸ªæ¦‚å¿µï¼Œå«åšæŸ¯é‡ŒåŒ–ï¼ˆcurryingï¼‰ï¼Œæ„æ€æ˜¯å°†å¤šå‚æ•°çš„å‡½æ•°è½¬æ¢æˆå•å‚æ•°çš„å½¢å¼ã€‚</p></blockquote><h3 id="ä¸¥æ ¼æ¨¡å¼"><a href="#ä¸¥æ ¼æ¨¡å¼" class="headerlink" title="ä¸¥æ ¼æ¨¡å¼"></a>ä¸¥æ ¼æ¨¡å¼</h3><ul><li>ES6 çš„å°¾è°ƒç”¨ä¼˜åŒ–åªåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹å¼€å¯</li></ul><h2 id="å‡½æ•°å‚æ•°çš„å°¾é€—å·"><a href="#å‡½æ•°å‚æ•°çš„å°¾é€—å·" class="headerlink" title="å‡½æ•°å‚æ•°çš„å°¾é€—å·"></a>å‡½æ•°å‚æ•°çš„å°¾é€—å·</h2><ul><li>ES6 ä¸­å‡½æ•°æœ€åä¸€ä¸ªå‚æ•°åæœ‰é€—å·ä¸ä¼šæŠ¥é”™</li></ul><h2 id="Function-prototype-toString"><a href="#Function-prototype-toString" class="headerlink" title="Function.prototype.toString()"></a>Function.prototype.toString()</h2><ul><li><code>toString()</code>æ–¹æ³•è¿”å›å‡½æ•°ä»£ç æœ¬èº«ï¼Œä»¥å‰ä¼šçœç•¥æ³¨é‡Šå’Œç©ºæ ¼</li></ul><h2 id="catch-å‘½ä»¤çš„å‚æ•°çœç•¥"><a href="#catch-å‘½ä»¤çš„å‚æ•°çœç•¥" class="headerlink" title="catch å‘½ä»¤çš„å‚æ•°çœç•¥"></a>catch å‘½ä»¤çš„å‚æ•°çœç•¥</h2><ul><li>ä»¥å‰ catch å‘½ä»¤åé¢å¿…é¡»è·Ÿå‚æ•°ï¼ŒES6 å¯ä»¥çœç•¥</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> ECMAScript 6 å…¥é—¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­—ç¬¦ä¸²çš„æ‰©å±•</title>
      <link href="/2020/03/17/4-5-%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
      <url>/2020/03/17/4-5-%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
      
        <content type="html"><![CDATA[<h1 id="å­—ç¬¦ä¸²çš„æ‰©å±•"><a href="#å­—ç¬¦ä¸²çš„æ‰©å±•" class="headerlink" title="å­—ç¬¦ä¸²çš„æ‰©å±•"></a>å­—ç¬¦ä¸²çš„æ‰©å±•</h1><h2 id="å­—ç¬¦çš„-Unicode-è¡¨ç¤ºæ³•"><a href="#å­—ç¬¦çš„-Unicode-è¡¨ç¤ºæ³•" class="headerlink" title="å­—ç¬¦çš„ Unicode è¡¨ç¤ºæ³•"></a>å­—ç¬¦çš„ Unicode è¡¨ç¤ºæ³•</h2><ul><li>ES6 åŠ å¼ºäº†å¯¹ Unicode çš„æ”¯æŒï¼Œå…è®¸é‡‡ç”¨ <code>\uxxxx</code> å½¢å¼è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œ<code>xxxx</code> è¡¨ç¤ºå­—ç¬¦çš„ Unicode ç ç‚¹</li><li>é™åˆ¶ç ç‚¹åœ¨ <code>\u0000</code> ~ <code>\uFFFF</code> ä¹‹é—´çš„å­—ç¬¦ï¼Œè¶…å‡ºèŒƒå›´å¿…é¡»ç”¨ä¸¤ä¸ªåŒå­—èŠ‚çš„å½¢å¼è¡¨ç¤º</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"\uD842\uDFB7"</span></span><br><span class="line"><span class="comment">// "ğ ®·"</span></span><br><span class="line"></span><br><span class="line"><span class="string">"\u20BB7"</span></span><br><span class="line"><span class="comment">// " 7"</span></span><br><span class="line"><span class="comment">// JavaScript ä¼šç†è§£æˆ \u20BB+7</span></span><br><span class="line"><span class="comment">// \u20BB ä¸å¯æ‰“å°ï¼Œè¾“å‡ºç©ºæ ¼</span></span><br></pre></td></tr></table></figure><ul><li>åªè¦å°†ç ç‚¹æ”¾å…¥å¤§æ‹¬å·ï¼Œå°±èƒ½æ­£ç¡®è§£è¯»</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"\u&#123;20BB7&#125;"</span></span><br><span class="line"><span class="comment">// "ğ ®·"</span></span><br></pre></td></tr></table></figure><blockquote><p>å¯¹ç¼–ç ä»ç„¶æ˜¯ä¸€çªä¸é€šâ€¦â€¦</p></blockquote><h2 id="å­—ç¬¦ä¸²çš„éå†å™¨æ¥å£"><a href="#å­—ç¬¦ä¸²çš„éå†å™¨æ¥å£" class="headerlink" title="å­—ç¬¦ä¸²çš„éå†å™¨æ¥å£"></a>å­—ç¬¦ä¸²çš„éå†å™¨æ¥å£</h2><ul><li>ES6 å¯¹å­—ç¬¦ä¸²æ·»åŠ äº†éå†å™¨æ¥å£ï¼ˆè¯¦è§ã€ŠIteratorã€‹ä¸€ç« ï¼‰ï¼Œä½¿å¾—å­—ç¬¦ä¸²å¯ä»¥è¢« <code>for...of</code> å¾ªç¯ä¾¿åˆ©</li><li>é™¤äº†éå†å­—ç¬¦ä¸²ï¼Œéå†å™¨æœ€å¤§çš„ä¼˜ç‚¹æ˜¯å¯ä»¥è¯†åˆ«å¤§äº <code>0xFFFF</code> çš„ç ç‚¹</li></ul><h2 id="ç›´æ¥è¾“å…¥-U-2028-å’Œ-U-2029"><a href="#ç›´æ¥è¾“å…¥-U-2028-å’Œ-U-2029" class="headerlink" title="ç›´æ¥è¾“å…¥ U+2028 å’Œ U+2029"></a>ç›´æ¥è¾“å…¥ U+2028 å’Œ U+2029</h2><ul><li>JavaScript å­—ç¬¦ä¸²å…è®¸ç›´æ¥è¾“å…¥å­—ç¬¦ï¼Œä»¥åŠè¾“å…¥å­—ç¬¦çš„è½¬ä¹‰å½¢å¼</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'ä¸­'</span> === <span class="string">'\u4e2d'</span></span><br></pre></td></tr></table></figure><ul><li>è§„å®šä¸èƒ½åœ¨å­—ç¬¦ä¸²é‡Œç›´æ¥ä½¿ç”¨ï¼Œåªèƒ½ç”¨è½¬ä¹‰å½¢å¼<ul><li>U+005Cï¼šåæ–œæ </li><li>U+000Dï¼šå›è½¦</li><li>U+2028ï¼šè¡Œåˆ†éš”ç¬¦</li><li>U+2029ï¼šæ®µåˆ†éš”ç¬¦</li><li>U+000Aï¼šæ¢è¡Œç¬¦</li></ul></li><li>JSON å…è®¸ä½¿ç”¨ U+2028ã€U+2029<ul><li><code>JSON.parse()</code> è§£æè¿™ä¸¤ä¸ªä¼šæŠ¥é”™</li><li>ä¸ºäº†å…¼å®¹ JSONï¼ŒES2019 æ”¯æŒç›´æ¥è¾“å…¥è¿™ä¸¤ä¸ª</li></ul></li></ul><h2 id="JSON-stringify-çš„æ”¹é€ "><a href="#JSON-stringify-çš„æ”¹é€ " class="headerlink" title="JSON.stringify() çš„æ”¹é€ "></a>JSON.stringify() çš„æ”¹é€ </h2><ul><li>æ ¹æ®æ ‡å‡†ï¼ŒJSON æ•°æ®å¿…é¡»æ˜¯ UTF-8 ç¼–ç ï¼Œä½†æ˜¯ç°åœ¨çš„ <code>JSON.stringify()</code> æœ‰å¯èƒ½è¿”å›ä¸ç¬¦åˆ UTF-8 æ ‡å‡†çš„å­—ç¬¦ä¸²</li></ul><blockquote><p>UTF-8 æ ‡å‡†è§„å®šï¼Œ<code>0xD800</code> åˆ° <code>0xDFFF</code> ä¹‹é—´çš„ç ç‚¹å¿…é¡»é…å¯¹ä½¿ç”¨</p></blockquote><ul><li><code>JSON.stringify()</code> å¯èƒ½è¿”å› <code>0xD800</code> åˆ° <code>0xDFFF</code> ä¹‹é—´çš„å•ä¸ªç ç‚¹</li><li>ä¸ºäº†ç¡®ä¿è¿”å›çš„æ˜¯åˆæ³•çš„ UTF-8 å­—ç¬¦ï¼Œå¦‚æœé‡åˆ°<code>0xD800</code>åˆ°<code>0xDFFF</code>ä¹‹é—´çš„å•ä¸ªç ç‚¹ï¼Œæˆ–è€…ä¸å­˜åœ¨çš„é…å¯¹å½¢å¼ï¼Œå®ƒä¼šè¿”å›è½¬ä¹‰å­—ç¬¦ä¸²ï¼Œç•™ç»™åº”ç”¨è‡ªå·±å†³å®šä¸‹ä¸€æ­¥çš„å¤„ç†</li></ul><h2 id="æ¨¡æ¿å­—ç¬¦ä¸²"><a href="#æ¨¡æ¿å­—ç¬¦ä¸²" class="headerlink" title="æ¨¡æ¿å­—ç¬¦ä¸²"></a>æ¨¡æ¿å­—ç¬¦ä¸²</h2><ul><li>å¢å¼ºç‰ˆçš„å­—ç¬¦ä¸²ï¼Œç”¨åå¼•å·ï¼ˆ`ï¼‰æ ‡è¯†</li><li>å¯ä»¥å½“ä½œæ™®é€šå­—ç¬¦ä¸²ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰å¤šè¡Œå­—ç¬¦ä¸²ï¼Œæˆ–è€…åœ¨å­—ç¬¦ä¸²ä¸­åµŒå…¥ <code>${å˜é‡}</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">"Bob"</span>, time = <span class="string">"today"</span>;</span><br><span class="line"><span class="string">`Hello <span class="subst">$&#123;name&#125;</span>, how are you <span class="subst">$&#123;time&#125;</span>?`</span></span><br></pre></td></tr></table></figure><ul><li>åå¼•å·éœ€è¦åæ–œæ è½¬ä¹‰</li><li>ä¿ç•™ç©ºæ ¼å’Œç¼©è¿›ï¼Œå¯ä»¥ç”¨ <code>trim()</code> æ–¹æ³•æ¶ˆé™¤</li><li>å¦‚æœå˜é‡çš„å€¼ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œå°†æŒ‰ç…§ä¸€èˆ¬çš„è§„åˆ™è½¬ä¸ºå­—ç¬¦ä¸²<ul><li>æ¯”å¦‚ï¼Œå¤§æ‹¬å·ä¸­æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°†é»˜è®¤è°ƒç”¨å¯¹è±¡çš„<code>toString</code>æ–¹æ³•</li></ul></li></ul><h2 id="æ ‡ç­¾æ¨¡æ¿"><a href="#æ ‡ç­¾æ¨¡æ¿" class="headerlink" title="æ ‡ç­¾æ¨¡æ¿"></a>æ ‡ç­¾æ¨¡æ¿</h2><ul><li>æ¨¡ç‰ˆå­—ç¬¦ä¸²è·Ÿåœ¨ä¸€ä¸ªå‡½æ•°ååé¢ï¼Œè¯¥å‡½æ•°å°†è¢«è°ƒç”¨æ¥å¤„ç†è¿™ä¸ªæ¨¡ç‰ˆå­—ç¬¦ä¸²</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alert<span class="string">`hello`</span></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line">alert([<span class="string">'hello'</span>])</span><br></pre></td></tr></table></figure><ul><li>æ ‡ç­¾æ¨¡ç‰ˆå…¶å®ä¸æ˜¯æ¨¡ç‰ˆï¼Œè€Œæ˜¯å‡½æ•°è°ƒç”¨çš„ä¸€ç§ç‰¹æ®Šå½¢å¼<ul><li>â€œæ ‡ç­¾â€ æŒ‡çš„æ˜¯å‡½æ•°ï¼Œè·Ÿåœ¨åé¢çš„æ¨¡ç‰ˆå­—ç¬¦ä¸²æ˜¯å‚æ•°</li></ul></li><li>å¦‚æœæœ‰å‚æ•°ï¼Œå‡½æ•°ä¼šä¾æ¬¡å—åˆ°å¤šä¸ªå‚æ•°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tag</span>(<span class="params">stringArr, ...values</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">tag<span class="string">`Hello <span class="subst">$&#123;a + b&#125;</span> world <span class="subst">$&#123;a + b&#125;</span>`</span>;</span><br><span class="line"><span class="comment">//ç­‰åŒäº</span></span><br><span class="line">tag([<span class="string">'Hello '</span>, <span class="string">' world '</span>, <span class="string">''</span>], <span class="number">15</span>, <span class="number">50</span>);</span><br></pre></td></tr></table></figure><ul><li>ä½œç”¨<ul><li>è¿‡æ»¤ HTML å­—ç¬¦ä¸²ï¼Œé˜²æ­¢ç”¨æˆ·è¾“å…¥æ¶æ„å†…å®¹</li><li>å¤šè¯­è¨€è½¬æ¢</li><li>åµŒå…¥å…¶ä»–è¯­è¨€</li></ul></li><li>æ¨¡ç‰ˆå¤„ç†å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆæ¨¡ç‰ˆå­—ç¬¦ä¸²æ•°ç»„ï¼‰ï¼Œè¿˜æœ‰ä¸€ä¸ª <code>raw</code> å±æ€§ï¼Œä¿å­˜çš„æ˜¯<strong>è½¬ä¹‰</strong>åçš„åŸå­—ç¬¦ä¸²</li></ul><h2 id="æ¨¡æ¿å­—ç¬¦ä¸²çš„é™åˆ¶"><a href="#æ¨¡æ¿å­—ç¬¦ä¸²çš„é™åˆ¶" class="headerlink" title="æ¨¡æ¿å­—ç¬¦ä¸²çš„é™åˆ¶"></a>æ¨¡æ¿å­—ç¬¦ä¸²çš„é™åˆ¶</h2><ul><li>æ ‡ç­¾æ¨¡æ¿å¯ä»¥å†…åµŒåˆ«çš„è¯­è¨€ï¼Œé»˜è®¤å°†å­—ç¬¦ä¸²è½¬ä¹‰ï¼Œå¯¼è‡´æŠ¥é”™</li><li>ES2018 æ”¾æ¾äº†å¯¹<u>æ ‡ç­¾æ¨¡ç‰ˆ</u>é‡Œé¢å­—ç¬¦ä¸²è½¬ä¹‰çš„é™åˆ¶<ul><li>é‡åˆ°ä¸åˆæ³•çš„å­—ç¬¦ä¸²è½¬ä¹‰ï¼Œè¿”å› <code>undefined</code></li><li><code>raw</code> å±æ€§ä¸Šä»å¯ä»¥å¾—åˆ°åŸå§‹å­—ç¬¦ä¸²</li></ul></li><li>ä¸æ˜¯æ ‡ç­¾æ¨¡ç‰ˆä»ç„¶ä¼šæŠ¥é”™</li></ul><h1 id="å­—ç¬¦ä¸²çš„æ–°å¢æ–¹æ³•"><a href="#å­—ç¬¦ä¸²çš„æ–°å¢æ–¹æ³•" class="headerlink" title="å­—ç¬¦ä¸²çš„æ–°å¢æ–¹æ³•"></a>å­—ç¬¦ä¸²çš„æ–°å¢æ–¹æ³•</h1><h2 id="String-fromCodePoint"><a href="#String-fromCodePoint" class="headerlink" title="String.fromCodePoint()"></a>String.fromCodePoint()</h2><ul><li>ES5 æä¾› <code>String.fromCharCode()</code> æ–¹æ³•ä» Unicode ç ç‚¹è¿”å›å¯¹åº”å­—ç¬¦ï¼Œä¸èƒ½è¯†åˆ«å¤§äº <code>0xFFFF</code> çš„å­—ç¬¦</li><li>ES6 æä¾› <code>String.fromCodePoint()</code> å¯è¯†åˆ«å¤§äº <code>0xFFFF</code> çš„å­—ç¬¦<ul><li>å¤šä¸ªå‚æ•°ä¼šè¢«åˆå¹¶æˆä¸€ä¸ªå­—ç¬¦ä¸²è¿”å›</li></ul></li><li><code>fromCodePoint</code> æ–¹æ³•å®šä¹‰åœ¨ <code>String</code> å¯¹è±¡ä¸Š</li><li><code>codePointAt</code> æ–¹æ³•å®šä¹‰åœ¨å­—ç¬¦ä¸²çš„å®ä¾‹å¯¹è±¡ä¸Š</li></ul><h2 id="String-raw"><a href="#String-raw" class="headerlink" title="String.raw()"></a>String.raw()</h2><ul><li><p>æ›¿æ¢æ‰€æœ‰å˜é‡ï¼Œå¹¶å¯¹æ–œæ è¿›è¡Œè½¬ä¹‰</p></li><li><p>å®ç°</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.raw = <span class="function"><span class="keyword">function</span> (<span class="params">strings, ...values</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> output = <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">let</span> index;</span><br><span class="line">  <span class="keyword">for</span> (index = <span class="number">0</span>; index &lt; values.length; index++) &#123;</span><br><span class="line">    output += strings.raw[index] + values[index];</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  output += strings.raw[index]</span><br><span class="line">  <span class="keyword">return</span> output;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®ä¾‹æ–¹æ³•ï¼šcodePointAt"><a href="#å®ä¾‹æ–¹æ³•ï¼šcodePointAt" class="headerlink" title="å®ä¾‹æ–¹æ³•ï¼šcodePointAt()"></a>å®ä¾‹æ–¹æ³•ï¼šcodePointAt()</h2><ul><li>JavaScript å†…éƒ¨ï¼Œå­—ç¬¦ä»¥ UTF-16 çš„æ ¼å¼å­˜å‚¨ï¼Œæ¯ä¸ªå­—ç¬¦å›ºå®š 2 å­—èŠ‚</li><li>å¤§äº <code>0xFFFF</code> çš„å­—ç¬¦éœ€è¦ 4 ä¸ªå­—èŠ‚å­˜å‚¨ï¼ŒJavaScript ä¼šè®¤ä¸ºå®ƒä»¬æ˜¯ä¸¤ä¸ªå­—ç¬¦ï¼Œå­—ç¬¦ä¸²é•¿åº¦ä¸º 2</li><li>ES5 <code>charCodeAt()</code> åªèƒ½ 2 ä¸ªå­—èŠ‚ 2 ä¸ªå­—èŠ‚å¤„ç†</li><li>ES6 <code>codePointAt()</code> èƒ½å¤Ÿæ­£ç¡®å¤„ç† 4 ä¸ªå­—èŠ‚</li><li><code>codePointAt()</code> è¿”å›çš„ç ç‚¹æ˜¯åè¿›åˆ¶çš„ï¼ŒtoString(16) è½¬ä¸ºåå…­è¿›åˆ¶</li></ul><h2 id="å®ä¾‹æ–¹æ³•ï¼šnormalize"><a href="#å®ä¾‹æ–¹æ³•ï¼šnormalize" class="headerlink" title="å®ä¾‹æ–¹æ³•ï¼šnormalize()"></a>å®ä¾‹æ–¹æ³•ï¼šnormalize()</h2><ul><li>åˆæˆç¬¦å·</li></ul><h2 id="å®ä¾‹æ–¹æ³•ï¼šincludes-startsWith-endsWith"><a href="#å®ä¾‹æ–¹æ³•ï¼šincludes-startsWith-endsWith" class="headerlink" title="å®ä¾‹æ–¹æ³•ï¼šincludes(), startsWith(), endsWith()"></a>å®ä¾‹æ–¹æ³•ï¼šincludes(), startsWith(), endsWith()</h2><ul><li>ES5 <code>indexOf</code> å¯ä»¥ç¡®å®šä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«åœ¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­</li><li>ES6<ul><li><code>includes(&#39;subString&#39;, n)</code> è¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°äº†å‚æ•°å­—ç¬¦ä¸²</li><li><code>startsWith(&#39;subString&#39;, n)</code> è¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å¤´éƒ¨</li><li><code>endsWith(&#39;subString&#39;, n)</code> è¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å°¾éƒ¨</li></ul></li></ul><h2 id="å®ä¾‹æ–¹æ³•ï¼šrepeat-n"><a href="#å®ä¾‹æ–¹æ³•ï¼šrepeat-n" class="headerlink" title="å®ä¾‹æ–¹æ³•ï¼šrepeat(n)"></a>å®ä¾‹æ–¹æ³•ï¼šrepeat(n)</h2><ul><li>è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œé‡å¤ n æ¬¡</li><li>å°æ•°å–æ•´ï¼Œè´Ÿæ•°/Infinity æŠ¥é”™</li></ul><h2 id="å®ä¾‹æ–¹æ³•ï¼špadStart-n-â€˜stringâ€™-padEnd-n-â€˜stringâ€™"><a href="#å®ä¾‹æ–¹æ³•ï¼špadStart-n-â€˜stringâ€™-padEnd-n-â€˜stringâ€™" class="headerlink" title="å®ä¾‹æ–¹æ³•ï¼špadStart(n, â€˜stringâ€™), padEnd(n, â€˜stringâ€™)"></a>å®ä¾‹æ–¹æ³•ï¼špadStart(n, â€˜stringâ€™), padEnd(n, â€˜stringâ€™)</h2><ul><li>è¡¥å…¨é•¿åº¦<ul><li>é•¿åº¦ n</li><li>ç”¨æ¥è¡¥å…¨çš„å­—ç¬¦ä¸² string</li></ul></li></ul><h2 id="å®ä¾‹æ–¹æ³•ï¼štrimStart-trimEnd"><a href="#å®ä¾‹æ–¹æ³•ï¼štrimStart-trimEnd" class="headerlink" title="å®ä¾‹æ–¹æ³•ï¼štrimStart(), trimEnd()"></a>å®ä¾‹æ–¹æ³•ï¼štrimStart(), trimEnd()</h2><ul><li>æ¶ˆé™¤ç©ºæ ¼</li><li>ä¸ä¿®æ”¹åŸå§‹å­—ç¬¦</li></ul><h2 id="å®ä¾‹æ–¹æ³•ï¼šmatchAll"><a href="#å®ä¾‹æ–¹æ³•ï¼šmatchAll" class="headerlink" title="å®ä¾‹æ–¹æ³•ï¼šmatchAll()"></a>å®ä¾‹æ–¹æ³•ï¼šmatchAll()</h2><ul><li><code>matchAll()</code>è¿”å›ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼åœ¨å½“å‰å­—ç¬¦ä¸²çš„æ‰€æœ‰åŒ¹é…</li><li>è¯¦è§ 6-æ­£åˆ™çš„æ‰©å±•</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> ECMAScript 6 å…¥é—¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å˜é‡çš„è§£æ„èµ‹å€¼</title>
      <link href="/2020/03/15/3-%E5%8F%98%E9%87%8F%E7%9A%84%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/"/>
      <url>/2020/03/15/3-%E5%8F%98%E9%87%8F%E7%9A%84%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/</url>
      
        <content type="html"><![CDATA[<h1 id="å˜é‡çš„è§£æ„èµ‹å€¼"><a href="#å˜é‡çš„è§£æ„èµ‹å€¼" class="headerlink" title="å˜é‡çš„è§£æ„èµ‹å€¼"></a>å˜é‡çš„è§£æ„èµ‹å€¼</h1><ul><li>ES6 å…è®¸æŒ‰ç…§ä¸€å®šçš„æ¨¡å¼ï¼Œä»æ•°ç»„å’Œå¯¹è±¡ä¸­æå–å€¼ï¼Œå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œè¢«ç§°ä¸ºè§£æ„</li></ul><h2 id="æ•°ç»„çš„è§£æ„èµ‹å€¼"><a href="#æ•°ç»„çš„è§£æ„èµ‹å€¼" class="headerlink" title="æ•°ç»„çš„è§£æ„èµ‹å€¼"></a>æ•°ç»„çš„è§£æ„èµ‹å€¼</h2><h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a, b, c] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br></pre></td></tr></table></figure><ul><li>æœ¬è´¨ä¸Šï¼Œè¿™ç§å†™æ³•å±äºâ€œæ¨¡å¼åŒ¹é…â€ï¼Œåªè¦ç­‰å·ä¸¤è¾¹çš„æ¨¡å¼ç›¸åŒï¼Œå·¦è¾¹çš„å˜é‡å°±ä¼šè¢«èµ‹äºˆå¯¹åº”çš„å€¼</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åµŒå¥—çš„ä¾‹å­</span></span><br><span class="line"><span class="keyword">let</span> [head, ...detail] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="comment">// head = 1, detail = [2, 3, 4]</span></span><br><span class="line"><span class="keyword">let</span> [x, y, ...z] = [<span class="string">'a'</span>];</span><br><span class="line"><span class="comment">// x = 'a', y = undefined, z = []</span></span><br></pre></td></tr></table></figure><ul><li>å¦‚æœè§£æ„ä¸æˆåŠŸï¼Œå˜é‡çš„å€¼å°±ç­‰äº <code>undefined</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [foo] = [];</span><br><span class="line"><span class="keyword">let</span> [bar, foo] = [<span class="number">1</span>];</span><br></pre></td></tr></table></figure><ul><li>ä¸å®Œå…¨è§£æ„ï¼ŒåªåŒ¹é…ä¸€éƒ¨åˆ†</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [x, y] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="comment">// x = 1, y = 2</span></span><br><span class="line"><span class="keyword">let</span> [a, [b], d] = [<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>];</span><br><span class="line"><span class="comment">// a = 1, b = 2, d = 4</span></span><br></pre></td></tr></table></figure><ul><li>å¦‚æœç­‰å·å³è¾¹ä¸æ˜¯æ•°ç»„ï¼ˆä¸¥æ ¼çš„è¯´ï¼Œä¸æ˜¯å¯éå†çš„ç»“æ„ï¼Œå‚è§ç¬¬ 17 ç«  - Iteratorï¼‰ï¼Œä¼šæŠ¥é”™</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è½¬ä¸ºå¯¹è±¡åä¸å…·å¤‡ Iterator æ¥å£</span></span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="literal">NaN</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="literal">null</span>;</span><br><span class="line"><span class="comment">// æœ¬èº«ä¸å…·å¤‡ Iterator æ¥å£</span></span><br><span class="line"><span class="keyword">let</span> [foo] = &#123;&#125;;</span><br></pre></td></tr></table></figure><ul><li>åªè¦æŸç§æ•°æ®ç»“æ„å…·æœ‰ Iterator æ¥å£ï¼Œéƒ½å¯ä»¥é‡‡ç”¨æ•°ç»„å½¢å¼çš„è§£æ„èµ‹å€¼</li></ul><h3 id="é»˜è®¤å€¼"><a href="#é»˜è®¤å€¼" class="headerlink" title="é»˜è®¤å€¼"></a>é»˜è®¤å€¼</h3><ul><li>è§£æ„èµ‹å€¼å…è®¸æŒ‡å®šé»˜è®¤å€¼</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [foo = <span class="literal">true</span>] = [];</span><br><span class="line"><span class="comment">// foo = true</span></span><br><span class="line"><span class="keyword">let</span> [x, y = <span class="string">'b'</span>] = [<span class="string">'a'</span>];</span><br><span class="line"><span class="comment">// x = 'a', y = 'b'</span></span><br></pre></td></tr></table></figure><ul><li>ES6 å†…éƒ¨ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦åˆ¤æ–­ä¸€ä¸ªä½ç½®æ˜¯å¦æœ‰å€¼ï¼Œåªæœ‰å½“ä¸€ä¸ªæ•°ç»„æˆå‘˜ä¸¥æ ¼ç­‰äº <code>undefined</code> é»˜è®¤å€¼æ‰ä¼šç”Ÿæ•ˆ</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>] = [<span class="literal">undefined</span>];</span><br><span class="line"><span class="comment">// x = 1</span></span><br><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>] = [<span class="literal">null</span>];</span><br><span class="line"><span class="comment">// x = null</span></span><br></pre></td></tr></table></figure><ul><li>å¦‚æœé»˜è®¤å€¼æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œåˆ™æ˜¯æƒ°æ€§æ±‚å€¼ï¼Œä¹Ÿå°±æ˜¯åªæœ‰åœ¨ç”¨åˆ°çš„æ—¶å€™æ‰ä¼šæ±‚å€¼ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'aaa'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> [x = f()] = [<span class="number">1</span>];</span><br><span class="line"><span class="comment">// x = 1, å‡½æ•° f ä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line"><span class="comment">// ç­‰ä»·äº</span></span><br><span class="line"><span class="keyword">let</span> x;</span><br><span class="line"><span class="keyword">if</span> ([<span class="number">1</span>][<span class="number">0</span>] === <span class="literal">undefined</span>) &#123;</span><br><span class="line">  x = f();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  x = [<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// [1] æ˜¯åªå«å…ƒç´  1 çš„æ•°ç»„</span></span><br><span class="line"><span class="comment">// [1][0] è¡¨ç¤ºå–è¯¥æ•°ç»„ç¬¬ä¸€ä½ï¼Œä¹Ÿå°±æ˜¯å…ƒç´  1</span></span><br><span class="line"><span class="comment">// let array = [1];</span></span><br><span class="line"><span class="comment">// let x = array[0];</span></span><br></pre></td></tr></table></figure><ul><li>é»˜è®¤å€¼å¯ä»¥å¼•ç”¨è§£æ„èµ‹å€¼çš„å…¶ä»–å˜é‡ï¼Œä½†è¯¥å˜é‡å¿…é¡»å·²ç»å£°æ˜</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>, y = x] = [];</span><br><span class="line"><span class="comment">// x = 1, y = 1</span></span><br><span class="line"><span class="keyword">let</span> [x = y, y = <span class="number">1</span>] = [];</span><br><span class="line"><span class="comment">// æŠ¥é”™</span></span><br></pre></td></tr></table></figure><h2 id="å¯¹è±¡çš„è§£æ„èµ‹å€¼"><a href="#å¯¹è±¡çš„è§£æ„èµ‹å€¼" class="headerlink" title="å¯¹è±¡çš„è§£æ„èµ‹å€¼"></a>å¯¹è±¡çš„è§£æ„èµ‹å€¼</h2><h3 id="åŸºæœ¬ç”¨æ³•-1"><a href="#åŸºæœ¬ç”¨æ³•-1" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; foo, bar &#125; = &#123; <span class="attr">foo</span>: <span class="string">'aaa'</span>, <span class="attr">bar</span>: <span class="string">'bbb'</span> &#125;;</span><br><span class="line"><span class="comment">// foo = 'aaa', bar = 'bbb'</span></span><br></pre></td></tr></table></figure><ul><li>æ•°ç»„çš„å…ƒç´ æ˜¯æŒ‰æ¬¡åºæ’åˆ—çš„ï¼Œå˜é‡çš„å–å€¼ç”±ä½ç½®å†³å®š</li><li>å¯¹è±¡çš„å±æ€§æ²¡æœ‰æ¬¡åºï¼Œå˜é‡å¿…é¡»ä¸å±æ€§åŒåæ‰èƒ½èµ‹å€¼</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; baz &#125; = &#123; <span class="attr">foo</span>: <span class="string">'aaa'</span>, <span class="attr">bar</span>: <span class="string">'bbb'</span> &#125;;</span><br><span class="line"><span class="comment">// baz = undefined</span></span><br></pre></td></tr></table></figure><ul><li>å¯¹è±¡çš„è§£æ„èµ‹å€¼å¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†ç°æœ‰å¯¹è±¡çš„æ–¹æ³•èµ‹å€¼åˆ°æŸä¸ªå˜é‡</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; log, sin, cos &#125; = <span class="built_in">Math</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; log &#125; = <span class="built_in">console</span>;</span><br><span class="line">log(<span class="string">'hello'</span>);</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœå˜é‡åä¸å±æ€§åä¸ä¸€è‡´ï¼Œå†™æ³•å¦‚ä¸‹</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; <span class="attr">foo</span>: baz &#125; = &#123; <span class="attr">foo</span>: <span class="string">'aaa'</span>, <span class="attr">bar</span>: <span class="string">'bbb'</span>&#125;;</span><br><span class="line"><span class="comment">// baz = 'aaa'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">first</span>: <span class="string">'hello'</span>, last = <span class="string">'world'</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">first</span>: f, <span class="attr">last</span>: l &#125; = obj</span><br><span class="line"><span class="comment">// f = 'hello', l = 'world'</span></span><br></pre></td></tr></table></figure><blockquote><p>è¯´æ˜å¯¹è±¡çš„è§£æ„èµ‹å€¼æ˜¯ä¸‹é¢å½¢å¼çš„ç®€å†™ï¼ˆå‚è§ç¬¬ 10 ç«  - å¯¹è±¡çš„æ‰©å±•ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; <span class="attr">foo</span>: foo, <span class="attr">bar</span>: bar &#125; = &#123; <span class="attr">foo</span>: <span class="string">'aaa'</span>, <span class="attr">bar</span>: <span class="string">'bbb'</span> &#125;;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹è±¡çš„è§£æ„èµ‹å€¼çš„å†…éƒ¨æœºåˆ¶ï¼Œæ˜¯å…ˆæ‰¾åˆ°åŒåå±æ€§ï¼Œç„¶åå†èµ‹å€¼ç»™å¯¹åº”å˜é‡</p><p>çœŸæ­£è¢«èµ‹å€¼çš„æ˜¯åè€…ï¼Œè€Œä¸æ˜¯å‰è€…</p><p>å‰è€…æ˜¯åŒ¹é…çš„æ¨¡å¼ï¼Œåè€…æ‰æ˜¯å˜é‡</p></blockquote><ul><li>åµŒå¥—</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> node = &#123;</span><br><span class="line">  loc: &#123;</span><br><span class="line">    start: &#123;</span><br><span class="line">      line: <span class="number">1</span>,</span><br><span class="line">      column: <span class="number">5</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; loc, <span class="attr">loc</span>: &#123; start &#125;, <span class="attr">loc</span>: &#123; <span class="attr">start</span>: &#123; line &#125;&#125; &#125; = node;</span><br><span class="line"><span class="comment">// line = 1</span></span><br><span class="line"><span class="comment">// start = Object &#123;line: 1, column: 5&#125;</span></span><br><span class="line"><span class="comment">// loc = Object &#123; start: Object &#125;</span></span><br></pre></td></tr></table></figure><ul><li>å¯¹è±¡çš„è§£æ„èµ‹å€¼å¯ä»¥å–åˆ°ç»§æ‰¿çš„å±æ€§</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj1 = &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; <span class="attr">foo</span>: <span class="string">'bar'</span> &#125;;</span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(obj1, obj2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; foo &#125; = obj1;</span><br><span class="line"><span class="comment">// foo = 'bar'</span></span><br></pre></td></tr></table></figure><h3 id="é»˜è®¤å€¼-1"><a href="#é»˜è®¤å€¼-1" class="headerlink" title="é»˜è®¤å€¼"></a>é»˜è®¤å€¼</h3><ul><li>ç”Ÿæ•ˆæ¡ä»¶æ˜¯å¯¹è±¡çš„å±æ€§å€¼ä¸¥æ ¼ç­‰äº <code>undefined</code></li></ul><h3 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h3><ul><li>å¦‚æœè¦å°†ä¸€ä¸ªå·²ç»å£°æ˜çš„å˜é‡ç”¨äºè§£æ„èµ‹å€¼</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> x;</span><br><span class="line">&#123;x&#125; = &#123;<span class="attr">x</span>: <span class="number">1</span>&#125;;</span><br><span class="line"><span class="comment">// js å¼•æ“ä¼šå°† &#123;x&#125; ç†è§£ä¸ºä¸€ä¸ªä»£ç å—ï¼Œä»è€Œå‘ç”Ÿè¯­æ³•é”™è¯¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£ç¡®çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">let</span> x;</span><br><span class="line">(&#123;x&#125; = &#123;<span class="attr">x</span>: <span class="number">1</span>&#125;);</span><br><span class="line"><span class="comment">// æ”¾åœ¨åœ†æ‹¬å·é‡Œå³å¯æ­£ç¡®æ‰§è¡Œ</span></span><br></pre></td></tr></table></figure><ul><li>è§£æ„èµ‹å€¼å…è®¸ç­‰å·å·¦è¾¹çš„æ¨¡å¼ä¸­ä¸æ”¾ä»»ä½•å˜é‡å</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(&#123;&#125; = [<span class="literal">true</span>, <span class="literal">false</span>]);</span><br><span class="line">(&#123;&#125; = <span class="string">'abc'</span>);</span><br><span class="line">(&#123;&#125; = []);</span><br></pre></td></tr></table></figure><ul><li>ç”±äºæ•°ç»„æœ¬è´¨æ˜¯ç‰¹æ®Šçš„å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥å¯¹æ•°ç»„è¿›è¡Œå¯¹è±¡å±æ€§çš„è§£æ„</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> &#123;<span class="number">0</span>: first, [arr.length = <span class="number">1</span>]: last&#125; = arr;</span><br><span class="line"><span class="comment">// first = 1, last = 3</span></span><br></pre></td></tr></table></figure><h2 id="å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼"><a href="#å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼" class="headerlink" title="å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼"></a>å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼</h2><ul><li>å­—ç¬¦ä¸²åœ¨è§£æ„èµ‹å€¼æ—¶è¢«è½¬æ¢æˆä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [a, b, c, d, e] = <span class="string">'hello'</span>;</span><br><span class="line"><span class="comment">// a = 'h', b = 'e', C = 'c', d = 'l', e = 'o'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">length</span>: len &#125; = <span class="string">'hello'</span>;</span><br><span class="line"><span class="comment">// len = 5</span></span><br></pre></td></tr></table></figure><h2 id="æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼"><a href="#æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼" class="headerlink" title="æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼"></a>æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼</h2><ul><li>æ•°å€¼å’Œå¸ƒå°”å€¼åœ¨è§£æ„èµ‹å€¼æ—¶è¢«è½¬ä¸ºå¯¹è±¡</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; <span class="attr">toString</span>: s &#125; = <span class="number">123</span>;</span><br><span class="line"><span class="comment">// s === Number.prototype.toString =&gt; true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">toString</span>: s &#125; = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// s === Boolean.prototype.toString =&gt; true</span></span><br></pre></td></tr></table></figure><ul><li>æ•°ç»„å’Œå¸ƒå°”å€¼çš„åŒ…è£…å¯¹è±¡éƒ½æœ‰ <code>toString</code> å±æ€§ï¼Œå› æ­¤å˜é‡ <code>s</code> éƒ½èƒ½å–åˆ°å€¼</li><li>è§£æ„èµ‹å€¼çš„è§„åˆ™ï¼šåªè¦ç­‰å·å³è¾¹çš„å€¼ä¸æ˜¯å¯¹è±¡æˆ–æ•°ç»„ï¼Œå°±å…ˆå°†å…¶è½¬ä¸ºå¯¹è±¡</li><li>ç”±äº <code>undefined</code> å’Œ <code>null</code> æ— æ³•è½¬ä¸ºå¯¹è±¡ï¼Œæ‰€ä»¥å®ƒä»¬æ— æ³•è¿›è¡Œè§£æ„èµ‹å€¼ï¼Œä¼šæŠ¥é”™</li></ul><p>##å‡½æ•°å‚æ•°çš„è§£æ„èµ‹å€¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">[x, y]</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line">add([<span class="number">1</span>, <span class="number">2</span>]);</span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line">[[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]].map(<span class="function">(<span class="params">[a, b]</span>) =&gt;</span> a + b);</span><br><span class="line"><span class="comment">// [3, 7]</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">move</span>(<span class="params">&#123;x = <span class="number">0</span>, y = <span class="number">0</span>&#125; = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [x, y];</span><br><span class="line">&#125;</span><br><span class="line">move(&#123;<span class="attr">x</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">8</span>&#125;);</span><br><span class="line"><span class="comment">// [3, 8]</span></span><br><span class="line">move(&#123;&#125;);</span><br><span class="line"><span class="comment">// [0, 0]</span></span><br><span class="line">move();</span><br><span class="line"><span class="comment">// [0, 0]</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">move</span>(<span class="params">&#123;x, y&#125; = &#123; x: <span class="number">0</span>, y: <span class="number">0</span> &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [x, y];</span><br><span class="line">&#125;</span><br><span class="line">move(&#123;<span class="attr">x</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">8</span>&#125;); <span class="comment">// [3, 8]</span></span><br><span class="line">move(&#123;&#125;); <span class="comment">// [undefined, undefined]</span></span><br><span class="line">move(); <span class="comment">// [0, 0]</span></span><br></pre></td></tr></table></figure><h2 id="åœ†æ‹¬å·é—®é¢˜"><a href="#åœ†æ‹¬å·é—®é¢˜" class="headerlink" title="åœ†æ‹¬å·é—®é¢˜"></a>åœ†æ‹¬å·é—®é¢˜</h2><ul><li>å¯¹äºç¼–è¯‘å™¨æ¥è¯´ï¼Œä¸€ä¸ªå¼å­åˆ°åº•æ˜¯æ¨¡å¼è¿˜æ˜¯è¡¨è¾¾å¼ï¼Œåªæœ‰åœ¨è§£æåˆ°ï¼ˆæˆ–è§£æä¸åˆ°ï¼‰ç­‰å·æ‰èƒ½çŸ¥é“</li><li>å¦‚æœæ¨¡å¼ä¸­å‡ºç°åœ†æ‹¬å·æ€ä¹ˆå¤„ç†ï¼Ÿ<ul><li>åªè¦æœ‰å¯èƒ½å¯¼è‡´è§£æ„çš„æ­§ä¹‰ï¼Œå°±ä¸å¾—ä½¿ç”¨åœ†æ‹¬å·</li><li>å°½é‡ä¸è¦åœ¨æ¨¡å¼ä¸­æ”¾ç½®åœ†æ‹¬å·</li></ul></li></ul><h3 id="ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ"><a href="#ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ" class="headerlink" title="ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ"></a>ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ</h3><ul><li>å˜é‡å£°æ˜è¯­å¥</li><li>å‡½æ•°å‚æ•°</li><li>èµ‹å€¼è¯­å¥çš„æ¨¡å¼</li></ul><h3 id="å¯ä»¥ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ"><a href="#å¯ä»¥ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ" class="headerlink" title="å¯ä»¥ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ"></a>å¯ä»¥ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ</h3><ul><li>èµ‹å€¼è¯­å¥çš„éæ¨¡å¼éƒ¨åˆ†</li></ul><h2 id="ç”¨é€”"><a href="#ç”¨é€”" class="headerlink" title="ç”¨é€”"></a>ç”¨é€”</h2><ul><li>äº¤æ¢å˜é‡çš„å€¼</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> y = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">[x, y] = [y, x];</span><br></pre></td></tr></table></figure><ul><li><p>ä»å‡½æ•°è¿”å›å¤šä¸ªå€¼</p></li><li><p>å‡½æ•°å‚æ•°çš„å®šä¹‰</p></li><li><p>æå– JSON æ•°æ®</p></li><li><p>å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼</p></li><li><p>éå† Map è§£æ„</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">con s t map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">'first'</span>, <span class="string">'hello'</span>);</span><br><span class="line">map.set(<span class="string">'second'</span>, <span class="string">'world'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key + <span class="string">' is '</span> + value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key] <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [, value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è¾“å…¥æ¨¡å—çš„æŒ‡å®šæ–¹æ³•</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; SourceMapCounsumer, SourceNode &#125; = <span class="built_in">require</span>(<span class="string">"source-map"</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> ECMAScript 6 å…¥é—¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>let å’Œ const å‘½ä»¤</title>
      <link href="/2020/03/15/2-let-%E5%92%8C-const-%E5%91%BD%E4%BB%A4/"/>
      <url>/2020/03/15/2-let-%E5%92%8C-const-%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="let-å’Œ-const-å‘½ä»¤"><a href="#let-å’Œ-const-å‘½ä»¤" class="headerlink" title="let å’Œ const å‘½ä»¤"></a>let å’Œ const å‘½ä»¤</h1><h2 id="let-å‘½ä»¤"><a href="#let-å‘½ä»¤" class="headerlink" title="let å‘½ä»¤"></a>let å‘½ä»¤</h2><h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><ul><li>let å£°æ˜çš„å˜é‡å€¼åœ¨ let å‘½ä»¤ååœ¨çš„ä»£ç å—å†…æœ‰æ•ˆ</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  a[i] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line">a[<span class="number">6</span>](); <span class="comment">// 10</span></span><br><span class="line"><span class="comment">// var å£°æ˜çš„ i åœ¨å…¨å±€æœ‰æ•ˆï¼Œæœ€ç»ˆæ‰€æœ‰çš„ i éƒ½æŒ‡å‘åŒä¸€ä¸ª iï¼Œä¹Ÿå°±æ˜¯æœ€åä¸€è½®å¾ªç¯æ—¶ i çš„å€¼</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  a[i] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line">a[<span class="number">6</span>](); <span class="comment">// 6</span></span><br></pre></td></tr></table></figure><ul><li>for å¾ªç¯å˜é‡æ˜¯ä¸€ä¸ªçˆ¶ä½œç”¨åŸŸï¼Œå¾ªç¯ä½“æ˜¯ä¸€ä¸ªå­ä½œç”¨åŸŸ</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">let</span> i = <span class="string">'abc'</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// abc</span></span><br><span class="line"><span class="comment">// abc</span></span><br><span class="line"><span class="comment">// abc</span></span><br></pre></td></tr></table></figure><h3 id="ä¸å­˜åœ¨å˜é‡æå‡"><a href="#ä¸å­˜åœ¨å˜é‡æå‡" class="headerlink" title="ä¸å­˜åœ¨å˜é‡æå‡"></a>ä¸å­˜åœ¨å˜é‡æå‡</h3><ul><li><code>var</code> å£°æ˜ä¼šå‡ºç°â€å˜é‡æå‡â€ç°è±¡ï¼Œå³å˜é‡å¯ä»¥åœ¨å£°æ˜ä¹‹å‰ä½¿ç”¨ï¼Œå€¼ä¸º <code>undefined</code></li><li><code>let</code> æ”¹å˜äº†è¯­æ³•è¡Œä¸ºï¼Œå£°æ˜ä¹‹å‰ä½¿ç”¨ä¼šæŠ¥é”™</li></ul><h3 id="æš‚æ—¶æ€§æ­»åŒº"><a href="#æš‚æ—¶æ€§æ­»åŒº" class="headerlink" title="æš‚æ—¶æ€§æ­»åŒº"></a>æš‚æ—¶æ€§æ­»åŒº</h3><ul><li>å—çº§ä½œç”¨åŸŸå†…å­˜åœ¨ <code>let</code> æˆ– <code>const</code> å‘½ä»¤ï¼Œå®ƒæ‰€å£°æ˜çš„å˜é‡å°±â€ç»‘å®š(binding)â€è¿™ä¸ªåŒºåŸŸï¼Œä¸å—å¤–éƒ¨å½±å“</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tmp = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  tmp = <span class="string">'abc'</span>;<span class="comment">// ReferenceError</span></span><br><span class="line">  <span class="keyword">let</span> tmp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æš‚æ—¶æ€§æ­»åŒºçš„æœ¬è´¨ï¼šåªè¦ä¸€è¿›å…¥å½“å‰ä½œç”¨åŸŸï¼Œæ‰€è¦ä½¿ç”¨çš„å˜é‡å°±å·²ç»å­˜åœ¨äº†ï¼Œä½†æ˜¯ä¸å¯è·å–ï¼Œåªæœ‰ç­‰åˆ°å£°æ˜å˜é‡çš„é‚£ä¸€è¡Œä»£ç å‡ºç°ï¼Œæ‰å¯ä»¥è·å–å’Œä½¿ç”¨è¯¥å˜é‡ã€‚</li></ul><h3 id="ä¸å…è®¸é‡å¤å£°æ˜"><a href="#ä¸å…è®¸é‡å¤å£°æ˜" class="headerlink" title="ä¸å…è®¸é‡å¤å£°æ˜"></a>ä¸å…è®¸é‡å¤å£°æ˜</h3><ul><li><code>let</code> ä¸å…è®¸åœ¨ç›¸åŒä½œç”¨åŸŸå†…é‡å¤å£°æ˜åŒä¸€ä¸ªå˜é‡</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŠ¥é”™</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">10</span>;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æŠ¥é”™</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸æŠ¥é”™</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å—çº§ä½œç”¨åŸŸ"><a href="#å—çº§ä½œç”¨åŸŸ" class="headerlink" title="å—çº§ä½œç”¨åŸŸ"></a>å—çº§ä½œç”¨åŸŸ</h2><h3 id="ä¸ºä»€ä¹ˆéœ€è¦å—çº§ä½œç”¨åŸŸï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦å—çº§ä½œç”¨åŸŸï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦å—çº§ä½œç”¨åŸŸï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦å—çº§ä½œç”¨åŸŸï¼Ÿ</h3><p>ES5 åªæœ‰å…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸï¼Œå¯èƒ½ä¼šå¯¼è‡´ï¼š</p><ol><li>å†…å±‚å˜é‡å¯èƒ½ä¼šè¦†ç›–å¤–å±‚å˜é‡</li><li>ç”¨æ¥è®¡æ•°çš„å¾ªç¯å˜é‡æ³„éœ²ä¸ºå…¨å±€å˜é‡</li></ol><h3 id="å—çº§ä½œç”¨åŸŸä¸å‡½æ•°å£°æ˜"><a href="#å—çº§ä½œç”¨åŸŸä¸å‡½æ•°å£°æ˜" class="headerlink" title="å—çº§ä½œç”¨åŸŸä¸å‡½æ•°å£°æ˜"></a>å—çº§ä½œç”¨åŸŸä¸å‡½æ•°å£°æ˜</h3><ul><li>ES5 è§„å®šï¼Œå‡½æ•°åªèƒ½åœ¨é¡¶å±‚ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜ï¼Œä¸èƒ½åœ¨å—çº§ä½œç”¨åŸŸå£°æ˜ã€‚</li><li>ES6 æ˜ç¡®å…è®¸åœ¨å—çº§ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜å‡½æ•°ï¼Œä¸”å‡½æ•°å£°æ˜è¯­å¥çš„è¡Œä¸ºç±»ä¼¼äº letï¼Œåœ¨å—çº§ä½œç”¨åŸŸå¤–ä¸å¯å¼•ç”¨</li><li>ä½†ä¸ºäº†å…¼å®¹ï¼Œæµè§ˆå™¨åœ¨å®ç°æ—¶ï¼Œå‡½æ•°å£°æ˜çš„è¡Œä¸ºå¯ä»¥ç±»ä¼¼äº varï¼Œå³ä¼šæå‡åˆ°å…¨å±€ä½œç”¨åŸŸæˆ–å‡½æ•°ä½œç”¨åŸŸçš„å¤´éƒ¨</li></ul><h2 id="const-å‘½ä»¤"><a href="#const-å‘½ä»¤" class="headerlink" title="const å‘½ä»¤"></a>const å‘½ä»¤</h2><h3 id="åŸºæœ¬ç”¨æ³•-1"><a href="#åŸºæœ¬ç”¨æ³•-1" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><ul><li><code>const</code> å£°æ˜ä¸€ä¸ªåªè¯»çš„å¸¸é‡ï¼Œä¸€æ—¦å£°æ˜ï¼Œå¸¸é‡çš„å€¼å°±ä¸èƒ½æ”¹å˜</li><li>ç”±äºä¸èƒ½æ”¹å˜ï¼Œå£°æ˜æ—¶å°±å¿…é¡»åˆå§‹åŒ–ï¼Œå¦åˆ™æŠ¥é”™</li></ul><h3 id="æœ¬è´¨"><a href="#æœ¬è´¨" class="headerlink" title="æœ¬è´¨"></a>æœ¬è´¨</h3><ul><li><code>csont</code> å®é™…ä¸Šä¿è¯çš„æ˜¯å˜é‡æŒ‡å‘çš„é‚£ä¸ªå†…å­˜åœ°å€æ‰€ä¿å­˜çš„æ•°æ®ä¸å¾—æ”¹åŠ¨<ul><li>å¯¹äºç®€å•ç±»å‹ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼‰çš„æ•°æ®ï¼Œå˜é‡æŒ‡å‘çš„åœ°å€ä¿å­˜å€¼ï¼Œç­‰åŒäºå¸¸é‡</li><li>å¯¹äºç¬¦åˆç±»å‹ï¼ˆå¯¹è±¡ã€æ•°ç»„ï¼‰çš„æ•°æ®ï¼Œå˜é‡æŒ‡å‘çš„åœ°å€ä¿å­˜æŒ‡é’ˆï¼ŒæŒ‡é’ˆå†æŒ‡å‘å®é™…æ•°æ®ï¼Œè¿™é‡Œåªèƒ½ä¿è¯æŒ‡é’ˆä¸å˜ï¼Œä½†ä¸èƒ½ä¿è¯å®é™…æ•°æ®ä¸å˜<ul><li>å¦‚æœæƒ³å°†å¯¹è±¡å†»ç»“ï¼Œå¯ä»¥ä½¿ç”¨ <code>Object.freeze()</code> æ–¹æ³•</li></ul></li></ul></li></ul><h3 id="ES6-å£°æ˜å˜é‡çš„å…­ç§æ–¹æ³•"><a href="#ES6-å£°æ˜å˜é‡çš„å…­ç§æ–¹æ³•" class="headerlink" title="ES6 å£°æ˜å˜é‡çš„å…­ç§æ–¹æ³•"></a>ES6 å£°æ˜å˜é‡çš„å…­ç§æ–¹æ³•</h3><ul><li>ES5<ul><li>var</li><li>function</li></ul></li></ul><hr><ul><li>ES6 æ–°å¢<ul><li>let</li><li>const</li><li>import</li><li>class</li></ul></li></ul><h2 id="é¡¶å±‚å¯¹è±¡çš„å±æ€§"><a href="#é¡¶å±‚å¯¹è±¡çš„å±æ€§" class="headerlink" title="é¡¶å±‚å¯¹è±¡çš„å±æ€§"></a>é¡¶å±‚å¯¹è±¡çš„å±æ€§</h2><ul><li>é¡¶å±‚å¯¹è±¡<ul><li>æµè§ˆå™¨ï¼šwindow</li><li>Nodeï¼šglobal</li></ul></li><li>ES5 ä¹‹ä¸­ï¼Œé¡¶å±‚å¯¹è±¡çš„å±æ€§å’Œå…¨å±€å˜é‡ç­‰ä»·</li><li>ES6 è§„å®š<ul><li>varã€function å£°æ˜çš„å…¨å±€å˜é‡ï¼Œä¾æ—§æ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§</li><li>letã€constã€class å£°æ˜çš„å…¨å±€å˜é‡ï¼Œä¸å±äºé¡¶å±‚å¯¹è±¡çš„å±æ€§</li></ul></li></ul><h2 id="globalThis-å¯¹è±¡"><a href="#globalThis-å¯¹è±¡" class="headerlink" title="globalThis å¯¹è±¡"></a>globalThis å¯¹è±¡</h2><ul><li>é¡¶å±‚å¯¹è±¡æä¾›å…¨å±€ç¯å¢ƒï¼ˆå³å…¨å±€ä½œç”¨åŸŸï¼‰</li><li>å„ä¸ªå®ç°ä¸ä¸€è‡´<ul><li>æµè§ˆå™¨ï¼š<code>window</code></li><li>æµè§ˆå™¨å’Œ Web Workerï¼š<code>self</code></li><li>Nodeï¼š<code>global</code></li></ul></li><li>ä¸ºäº†å…¼å®¹ï¼Œä¸€èˆ¬ä½¿ç”¨ <code>this</code> ï¼Œä½†æœ‰é™åˆ¶<ul><li>å…¨å±€ç¯å¢ƒä¸­ï¼Œ<code>this</code> ä¼šè¿”å›é¡¶å±‚å¯¹è±¡ã€‚ä½† Node æ¨¡å—å’Œ ES6 æ¨¡å—ä¸­ï¼Œ<code>this</code> è¿”å›å½“å‰æ¨¡å—</li><li>å‡½æ•°é‡Œé¢çš„ <code>this</code>ï¼Œå¦‚æœå‡½æ•°ä¸æ˜¯ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è¿è¡Œï¼Œ<code>this</code> æŒ‡å‘é¡¶å±‚å¯¹è±¡ã€‚ä¸¥æ ¼æ¨¡å¼ä¸‹ <code>undefined</code></li><li><code>new Function(&#39;return this&#39;)()</code> è¿”å›å…¨å±€å¯¹è±¡ã€‚å¦‚æœæµè§ˆå™¨ç”¨äº† CSPï¼ˆå†…å®¹å®‰å…¨ç­–ç•¥ï¼‰ï¼Œåˆ™è¯¥æ–¹æ³•æ— æ³•ä½¿ç”¨</li></ul></li><li>ES2020 å¼•å…¥ <code>globalThis</code> ä½œä¸ºé¡¶å±‚å¯¹è±¡ï¼ŒæŒ‡å‘å…¨å±€ç¯å¢ƒä¸‹çš„ <code>this</code></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> ECMAScript 6 å…¥é—¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬äºŒåä¸‰ç«  ç¦»çº¿åº”ç”¨ä¸å®¢æˆ·ç«¯å­˜å‚¨</title>
      <link href="/2020/03/14/%E7%AC%AC23%E7%AB%A0-%E7%A6%BB%E7%BA%BF%E5%BA%94%E7%94%A8%E4%B8%8E%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AD%98%E5%82%A8/"/>
      <url>/2020/03/14/%E7%AC%AC23%E7%AB%A0-%E7%A6%BB%E7%BA%BF%E5%BA%94%E7%94%A8%E4%B8%8E%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AD%98%E5%82%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬¬äºŒåä¸‰ç« -ç¦»çº¿åº”ç”¨ä¸å®¢æˆ·ç«¯å­˜å‚¨"><a href="#ç¬¬äºŒåä¸‰ç« -ç¦»çº¿åº”ç”¨ä¸å®¢æˆ·ç«¯å­˜å‚¨" class="headerlink" title="ç¬¬äºŒåä¸‰ç«  ç¦»çº¿åº”ç”¨ä¸å®¢æˆ·ç«¯å­˜å‚¨"></a>ç¬¬äºŒåä¸‰ç«  ç¦»çº¿åº”ç”¨ä¸å®¢æˆ·ç«¯å­˜å‚¨</h1><p>ç¦»çº¿ Web åº”ç”¨ï¼šè®¾å¤‡ä¸èƒ½ä¸Šç½‘çš„æƒ…å†µä¸‹ä»ç„¶å¯ä»¥è¿è¡Œçš„åº”ç”¨</p><h2 id="ç¦»çº¿æ£€æµ‹"><a href="#ç¦»çº¿æ£€æµ‹" class="headerlink" title="ç¦»çº¿æ£€æµ‹"></a>ç¦»çº¿æ£€æµ‹</h2><ul><li><code>navigator.onLine</code> å±æ€§</li></ul><ul><li>åº”ç”¨ç¼“å­˜</li></ul><h2 id="åº”ç”¨ç¼“å­˜"><a href="#åº”ç”¨ç¼“å­˜" class="headerlink" title="åº”ç”¨ç¼“å­˜"></a>åº”ç”¨ç¼“å­˜</h2><ul><li>appache ä»æµè§ˆå™¨çš„ç¼“å­˜ä¸­åˆ†å‡ºä¸€å—ç¼“å­˜åŒº<ul><li>ä½¿ç”¨ä¸€ä¸ª<strong>æè¿°æ–‡ä»¶(manifest file)</strong>ï¼Œåˆ—å‡ºè¦ä¸‹è½½å’Œç¼“å­˜çš„èµ„æº</li><li>å°†æè¿°æ–‡ä»¶ä¸é¡µé¢å…³è”èµ·æ¥ï¼Œå¯ä»¥åœ¨ <code>html</code> ä¸­çš„ <code>manifest</code> å±æ€§æŒ‡å®šæ–‡ä»¶è·¯å¾„</li></ul></li><li>applicationCache å¯¹è±¡</li></ul><h2 id="æ•°æ®å­˜å‚¨"><a href="#æ•°æ®å­˜å‚¨" class="headerlink" title="æ•°æ®å­˜å‚¨"></a>æ•°æ®å­˜å‚¨</h2><h3 id="HTTP-Cookie"><a href="#HTTP-Cookie" class="headerlink" title="HTTP Cookie"></a>HTTP Cookie</h3><ul><li>è¦æ±‚æœåŠ¡å™¨å¯¹ä»»æ„ HTTP è¯·æ±‚å‘é€ Set-Cookie HTTP ä½œä¸ºå“åº”çš„ä¸€éƒ¨åˆ†ï¼Œå…¶ä¸­åŒ…å«ä¼šè¯ä¿¡æ¯</li></ul><blockquote><p>å¦‚ï¼š</p><p>HTTP/1.1 200 OK</p><p>Content-type: text / html</p><p>Set-Cookie: name = value</p><p>Other-header: other-header-value</p></blockquote><ul><li><p>é™åˆ¶</p><ul><li>Cookie åœ¨æ€§è´¨ä¸Šæ˜¯ç»‘å®šåœ¨ç‰¹å®šçš„åŸŸåä¸‹çš„</li><li>å½“è®¾å®šäº†ä¸€ä¸ª cookie åï¼Œå†ç»™åˆ›å»ºå®ƒçš„åŸŸåå‘é€è¯·æ±‚æ—¶ï¼Œéƒ½ä¼šåŒ…å«è¿™ä¸ª cookie</li><li>ç¡®ä¿ cookie ä¸­çš„ä¿¡æ¯åªèƒ½è®©æ‰¹å‡†çš„æ¥å—è€…è®¿é—®ï¼Œè€Œæ— æ³•è¢«å…¶ä»–åŸŸè®¿é—®</li></ul></li><li><p>æ„æˆ</p><ul><li>åç§°ï¼šä¸åŒºåˆ†å¤§å°å†™ï¼ˆå®è·µæœ€å¥½åŒºåˆ†ï¼‰ï¼Œç»è¿‡ URL ç¼–ç </li><li>å€¼ï¼šURL ç¼–ç </li><li>åŸŸï¼šæœ‰æ•ˆåŸŸ</li><li>è·¯å¾„ï¼šå¯¹äºæŒ‡å®šçš„è·¯å¾„ï¼Œåº”è¯¥å‘æœåŠ¡å™¨å‘é€ cookie<ul><li>è‹¥æŒ‡å®š <a href="http://www.wrox.com/books/ï¼Œå°±ä¸ä¼šç»™" target="_blank" rel="noopener">http://www.wrox.com/books/ï¼Œå°±ä¸ä¼šç»™</a> <a href="http://www.wrox.com" target="_blank" rel="noopener">http://www.wrox.com</a> å‘é€ cookie</li></ul></li><li>å¤±æ•ˆæ—¶é—´ï¼šcookie ä½•æ—¶åº”è¯¥è¢«åˆ é™¤çš„æ—¶é—´æˆ³</li><li>å®‰å…¨æ ‡å¿—ï¼šæŒ‡å®šåä¹‹å SSL è¿æ¥æ—¶æ‰å‘é€åˆ°æœåŠ¡å™¨</li></ul></li><li><p>JS ä¸­çš„ cookie</p><ul><li>BOM çš„ document.cookie å±æ€§</li></ul></li><li><p>å­ cookie</p><ul><li><p>å­˜æ”¾åœ¨å•ä¸ª cookie ä¸­çš„æ›´å°æ®µçš„æ•°æ®</p></li><li><p>ä½¿ç”¨ cookie å€¼æ¥å­˜å‚¨å¤šä¸ªåç§°å€¼å¯¹</p></li><li><blockquote><p>å¦‚ name=name1=value1&amp;name2=value2&amp;name3=value3&amp;name4=value4&amp;name5=value5</p></blockquote></li><li><p>æŸ¥è¯¢å­—ç¬¦ä¸²çš„æ ¼å¼è¿›è¡Œæ ¼å¼åŒ–</p></li></ul></li></ul><blockquote><p>æ‰€æœ‰çš„ cookie éƒ½ä¼šç”±æµè§ˆå™¨ä½œä¸ºè¯·æ±‚å¤´å‘é€ï¼Œæ‰€ä»¥åœ¨ cookie ä¸­å­˜å‚¨å¤§é‡ä¿¡æ¯ä¼šå½±å“åˆ°ç‰¹å®šåŸŸçš„è¯·æ±‚æ€§èƒ½</p></blockquote><h3 id="Web-å­˜å‚¨æœºåˆ¶"><a href="#Web-å­˜å‚¨æœºåˆ¶" class="headerlink" title="Web å­˜å‚¨æœºåˆ¶"></a>Web å­˜å‚¨æœºåˆ¶</h3><ul><li>Web Storage çš„ä¸¤ä¸ªä¸»è¦ç›®æ ‡<ul><li>æä¾›ä¸€ç§åœ¨ cookie ä¹‹å¤–å­˜å‚¨ä¼šè¯æ•°æ®çš„é€”å¾„</li><li>æä¾›ä¸€ç§å­˜å‚¨å¤§é‡å¯ä»¥è·¨ä¼šè¯å­˜åœ¨çš„æ•°æ®çš„æœºåˆ¶</li></ul></li></ul><h5 id="Storage-ç±»å‹"><a href="#Storage-ç±»å‹" class="headerlink" title="Storage ç±»å‹"></a>Storage ç±»å‹</h5><ul><li>åªèƒ½å­˜å‚¨å­—ç¬¦ä¸²</li><li>æä¾›æœ€å¤§çš„å­˜å‚¨ç©ºé—´</li><li><code>clear()</code></li><li><code>getItem(name)</code></li><li><code>key(index)</code></li><li><code>removeItem(name)</code></li><li><code>setItem(name, value)</code></li></ul><h5 id="sessionStorage-å¯¹è±¡"><a href="#sessionStorage-å¯¹è±¡" class="headerlink" title="sessionStorage å¯¹è±¡"></a>sessionStorage å¯¹è±¡</h5><ul><li>Storage çš„ä¸€ä¸ªå®ä¾‹</li><li>å­˜å‚¨ç‰¹å®šäºæŸä¸ªä¼šè¯çš„æ•°æ®ï¼Œåªä¿æŒåˆ°æµè§ˆå™¨å…³é—­<ul><li>å¦‚æœæµè§ˆå™¨æ”¯æŒï¼Œå´©æºƒé‡å¯å¯ä»¥ç»§ç»­ä½¿ç”¨</li></ul></li><li>å¯ä»¥è·¨è¶Šé¡µé¢åˆ·æ–°è€Œå­˜åœ¨</li><li>å­˜å‚¨åœ¨ sessionStorage çš„æ•°æ®åªèƒ½ç”±æœ€åˆç»™å¯¹è±¡å­˜å‚¨æ•°æ®çš„é¡µé¢è®¿é—®åˆ°ï¼Œæ‰€ä»¥å¯¹å¤šé¡µé¢åº”ç”¨æœ‰é™åˆ¶</li></ul><h5 id="globalStorage-å¯¹è±¡"><a href="#globalStorage-å¯¹è±¡" class="headerlink" title="globalStorage å¯¹è±¡"></a>globalStorage å¯¹è±¡</h5><ul><li>ä¸æ˜¯ Storage å®ä¾‹ï¼ŒglobalStorage[â€œxxx.comâ€] æ‰æ˜¯ Storage çš„å®ä¾‹</li><li>è·¨è¶Šä¼šè¯å­˜å‚¨æ•°æ®ï¼Œæœ‰ç‰¹å®šçš„è®¿é—®é™åˆ¶</li><li>å¦‚æœä¸åˆ é™¤ï¼Œæˆ–è€…ç”¨æˆ·æœªæ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼Œå­˜å‚¨åœ¨ globalStorage å±æ€§ä¸­çš„æ•°æ®ä¼šä¸€ç›´ä¿ç•™åœ¨ç£ç›˜ä¸Š</li><li>åˆåœ¨å®¢æˆ·ç«¯å­˜å‚¨æ–‡æ¡£æˆ–è€…é•¿æœŸä¿å­˜ç”¨æˆ·åå¥½è®¾ç½®</li></ul><h5 id="localStorage-å¯¹è±¡"><a href="#localStorage-å¯¹è±¡" class="headerlink" title="localStorage å¯¹è±¡"></a>localStorage å¯¹è±¡</h5><ul><li>Storage å®ä¾‹ï¼Œç”¨æ³•ä¸ sessionStorage ç›¸åŒ</li><li>å–ä»£ globalStorageï¼Œä¸ç”¨è®¾ç½®è§„åˆ™</li><li>åŒåŸŸåã€åŒåè®®ã€åŒç«¯å£</li><li>ä¿ç•™åˆ°é€šè¿‡ JavaScript åˆ é™¤æˆ–è€…æ˜¯ç”¨æˆ·æ¸…é™¤æµè§ˆå™¨ç¼“å­˜</li></ul><h5 id="storage-äº‹ä»¶"><a href="#storage-äº‹ä»¶" class="headerlink" title="storage äº‹ä»¶"></a>storage äº‹ä»¶</h5><ul><li>ä¿®æ”¹ Storage å¯¹è±¡ä¼šåœ¨æ–‡æ¡£ä¸Šè§¦å‘ storage äº‹ä»¶</li></ul><h3 id="IndexedDB"><a href="#IndexedDB" class="headerlink" title="IndexedDB"></a>IndexedDB</h3><ul><li>æµè§ˆå™¨ä¸­ä¿å­˜ç»“æ„åŒ–æ•°æ®çš„ä¸€ç§æ•°æ®åº“</li><li>æ›¿ä»£è¢«åºŸå¼ƒçš„ Web SQL Database API</li><li>åˆ›å»ºä¸€å¥— APIï¼Œæ–¹ä¾¿ä¿å­˜å’Œè¯»å– JavaScript å¯¹è±¡ï¼ŒåŒæ—¶è¿˜æ”¯æŒæŸ¥è¯¢åŠæœç´¢</li><li>å¼‚æ­¥</li><li>åšä¸ºå…¨å±€å¯¹è±¡ windows.indexedDBï¼Œå…·ä½“åç§°æ ¹æ®æµè§ˆå™¨ä¸åŒ</li></ul><h5 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h5><ul><li>ç”¨å¯¹è±¡ä¿å­˜æ•°æ®ï¼Œè€Œä¸æ˜¯ç”¨è¡¨æ¥ä¿å­˜</li><li>ä¸€ä¸ª IndexedDB æ•°æ®åº“ï¼Œå°±æ˜¯ä¸€ç»„ä½äºç›¸åŒå‘½åç©ºé—´ä¸‹çš„å¯¹è±¡çš„é›†åˆ</li><li>indexDB.open() åˆ›å»º/æ‰“å¼€</li><li>è¿”å› IDBRequest å¯¹è±¡<ul><li>onerror</li><li>onsuccess</li></ul></li></ul><h5 id="å¯¹è±¡å­˜å‚¨ç©ºé—´"><a href="#å¯¹è±¡å­˜å‚¨ç©ºé—´" class="headerlink" title="å¯¹è±¡å­˜å‚¨ç©ºé—´"></a>å¯¹è±¡å­˜å‚¨ç©ºé—´</h5><ul><li>å¯ä»¥æŠŠè¿™é‡Œçš„å¯¹è±¡å­˜å‚¨ç©ºé—´(object storge)æƒ³è±¡æˆè¡¨ï¼ŒæŠŠå…¶ä¸­ä¿å­˜çš„å¯¹è±¡æƒ³è±¡æˆè¡¨ä¸­çš„è®°å½•</li><li><code>add()</code></li><li><code>put()</code></li></ul><h5 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h5><ul><li>è¯»å–æˆ–ä¿®æ”¹æ•°æ®éƒ½è¦é€šè¿‡äº‹åŠ¡æ¥ç»„ç»‡æ‰€æœ‰æ“ä½œ</li><li>ä½¿ç”¨äº‹åŠ¡å¯ä»¥ç›´æ¥é€šè¿‡å·²çŸ¥çš„é”®æ£€ç´¢å•ä¸ªå¯¹è±¡</li></ul><h5 id="ä½¿ç”¨æ¸¸æ ‡æŸ¥è¯¢"><a href="#ä½¿ç”¨æ¸¸æ ‡æŸ¥è¯¢" class="headerlink" title="ä½¿ç”¨æ¸¸æ ‡æŸ¥è¯¢"></a>ä½¿ç”¨æ¸¸æ ‡æŸ¥è¯¢</h5><ul><li>éœ€è¦æ£€ç´¢å¤šä¸ªå¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œéœ€è¦åœ¨äº‹åŠ¡å†… éƒ¨åˆ›å»ºæ¸¸æ ‡</li><li>ä¸ä¼ ç»Ÿæ•°æ®åº“æŸ¥è¯¢ä¸åŒ<ul><li>æ¸¸æ ‡ä¸æå‰æ”¶é›†ç»“æœ</li><li>æ¸¸æ ‡æŒ‡é’ˆä¼šå…ˆæŒ‡å‘ç»“æœä¸­çš„ç¬¬ä¸€é¡¹ï¼Œåœ¨æ¥åˆ°æŸ¥æ‰¾ä¸‹ä¸€é¡¹çš„æŒ‡ä»¤æ—¶æŒ‡å‘ä¸‹ä¸€é¡¹</li></ul></li></ul><h5 id="é”®èŒƒå›´"><a href="#é”®èŒƒå›´" class="headerlink" title="é”®èŒƒå›´"></a>é”®èŒƒå›´</h5><h5 id="è®¾å®šæ¸¸æ ‡æ–¹å‘"><a href="#è®¾å®šæ¸¸æ ‡æ–¹å‘" class="headerlink" title="è®¾å®šæ¸¸æ ‡æ–¹å‘"></a>è®¾å®šæ¸¸æ ‡æ–¹å‘</h5>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScripté«˜çº§ç¨‹åºè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬äºŒåäºŒç«  é«˜çº§æŠ€å·§</title>
      <link href="/2020/03/14/%E7%AC%AC22%E7%AB%A0-%E9%AB%98%E7%BA%A7%E6%8A%80%E5%B7%A7/"/>
      <url>/2020/03/14/%E7%AC%AC22%E7%AB%A0-%E9%AB%98%E7%BA%A7%E6%8A%80%E5%B7%A7/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬¬äºŒåäºŒç« -é«˜çº§æŠ€å·§"><a href="#ç¬¬äºŒåäºŒç« -é«˜çº§æŠ€å·§" class="headerlink" title="ç¬¬äºŒåäºŒç«  é«˜çº§æŠ€å·§"></a>ç¬¬äºŒåäºŒç«  é«˜çº§æŠ€å·§</h1><h2 id="é«˜çº§å‡½æ•°"><a href="#é«˜çº§å‡½æ•°" class="headerlink" title="é«˜çº§å‡½æ•°"></a>é«˜çº§å‡½æ•°</h2><h3 id="å®‰å…¨çš„ç±»å‹æ£€æµ‹"><a href="#å®‰å…¨çš„ç±»å‹æ£€æµ‹" class="headerlink" title="å®‰å…¨çš„ç±»å‹æ£€æµ‹"></a>å®‰å…¨çš„ç±»å‹æ£€æµ‹</h3><p><code>Object.toString()</code> æ–¹æ³•è¿”å›ä¸€ä¸ª <code>[object NativeConstructorName]</code> æ ¼å¼çš„å­—ç¬¦ä¸²ã€‚æ¯ä¸ªç±»å†…éƒ¨éƒ½æœ‰ä¸€ä¸ª <code>[[Class]]</code> å±æ€§ï¼ŒæŒ‡å®šäº†ä¸Šè¿°å­—ç¬¦ä¸²ä¸­çš„æ„é€ å‡½æ•°åã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.toString.call(value);</span><br><span class="line"><span class="comment">// "[object Array]"</span></span><br></pre></td></tr></table></figure><p>å¼€å‘äººå‘˜å®šä¹‰çš„æ„é€ å‡½æ•°è¿”å› <code>object Object</code>ã€‚</p><h3 id="ä½œç”¨åŸŸå®‰å…¨çš„æ„é€ å‡½æ•°"><a href="#ä½œç”¨åŸŸå®‰å…¨çš„æ„é€ å‡½æ•°" class="headerlink" title="ä½œç”¨åŸŸå®‰å…¨çš„æ„é€ å‡½æ•°"></a>ä½œç”¨åŸŸå®‰å…¨çš„æ„é€ å‡½æ•°</h3><ul><li><p>å½“ new è°ƒç”¨æ„é€ å‡½æ•°æ—¶ï¼Œæ„é€ å‡½æ•°å†…ç”¨åˆ°çš„ this å¯¹è±¡ä¼šæŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡å®ä¾‹ã€‚</p></li><li><p>å¦‚æœä¸ç”¨ newï¼Œthis ä¼šæ˜ å°„åˆ°å…¨å±€å¯¹è±¡ widow ä¸Šï¼Œå¯¼è‡´å±æ€§è¢«æ·»åŠ åˆ°å…¨å±€ã€‚</p></li><li><p>è§£å†³ï¼šæ„é€ å‡½æ•°å†…éƒ¨æ£€æŸ¥ this å¯¹è±¡æ˜¯å¦æ­£ç¡®</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, job</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span> <span class="keyword">instanceof</span> Person) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.job = job;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Person(name, age, job);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æƒ°æ€§è½½å…¥å‡½æ•°"><a href="#æƒ°æ€§è½½å…¥å‡½æ•°" class="headerlink" title="æƒ°æ€§è½½å…¥å‡½æ•°"></a>æƒ°æ€§è½½å…¥å‡½æ•°</h3><p>å‡½æ•°æ‰§è¡Œçš„åˆ†æ”¯åªæ‰§è¡Œä¸€æ¬¡</p><ul><li>å‡½æ•°è¢«è°ƒç”¨æ—¶å¤„ç†<ul><li>ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ç”¨åˆé€‚å‡½æ•°è¦†ç›–åŸæ¥çš„å‡½æ•°<ul><li>ä¾‹å¦‚æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒæŸåŠŸèƒ½ï¼Œæ‰§è¡Œä¸€æ¬¡å°±è¡Œ</li></ul></li><li>åœ¨å£°æ˜æ—¶å°±æŒ‡å®šé€‚å½“å‡½æ•°<ul><li>åŠ è½½æ—¶æŸå¤±æ€§èƒ½ï¼Œæ‰§è¡Œæ—¶ä¸ä¼š</li></ul></li></ul></li></ul><h3 id="å‡½æ•°ç»‘å®š-bind"><a href="#å‡½æ•°ç»‘å®š-bind" class="headerlink" title="å‡½æ•°ç»‘å®š bind()"></a>å‡½æ•°ç»‘å®š bind()</h3><p>åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥åœ¨ç‰¹å®šçš„ this ç¯å¢ƒä¸­ä»¥æŒ‡å®šå‚æ•°è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> handler = &#123;</span><br><span class="line">  message: <span class="string">"Event handled"</span>,</span><br><span class="line">  handleClick: <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"my-btn"</span>);</span><br><span class="line">EventUtil.addHandler(btn, <span class="string">"click"</span>, handler.handleClick);</span><br><span class="line"><span class="comment">// ç”±äºæ²¡æœ‰ä¿å­˜ handler.handleClick() çš„æ‰§è¡Œç¯å¢ƒ</span></span><br><span class="line"><span class="comment">// this æŒ‡å‘ DOM æŒ‰é’®è€Œé handler</span></span><br><span class="line"><span class="comment">// æœ¬æ¥åº”è¯¥æ˜¾ç¤º â€œEvent handledâ€ï¼Œä¼šæ˜¾ç¤º undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨é—­åŒ…è§£å†³ï¼š</span></span><br><span class="line">EventUtil.addHandler(btn, <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  handler.handleClick(event);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// bind() å¯ä»¥å°†å‡½æ•°ç»‘å®šåˆ°æŒ‡å®šç¯å¢ƒçš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bind</span>(<span class="params">fn, context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> fn.apply(context, <span class="built_in">arguments</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">EventUtil.addHandler(btn, <span class="string">"click"</span>, bind(handler,handleClick, handler));</span><br></pre></td></tr></table></figure><h3 id="å‡½æ•°æŸ¯é‡ŒåŒ–"><a href="#å‡½æ•°æŸ¯é‡ŒåŒ–" class="headerlink" title="å‡½æ•°æŸ¯é‡ŒåŒ–"></a>å‡½æ•°æŸ¯é‡ŒåŒ–</h3><ul><li>ç”¨äºåˆ›å»ºå·²ç»è®¾ç½®å¥½äº†ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°çš„å‡½æ•°</li><li>åŸºæœ¬æ–¹æ³•å’Œå‡½æ•°ç»‘å®šä¸€æ ·ï¼šä½¿ç”¨ä¸€ä¸ªé—­åŒ…è¿”å›ä¸€ä¸ªå‡½æ•°</li><li>åŒºåˆ«åœ¨äºï¼šå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œè¿”å›çš„å‡½æ•°è¿˜éœ€è¦è®¾ç½®ä¸€äº›ä¼ å…¥çš„å‚æ•°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">curry</span>(<span class="params">fn, context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">2</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> innerArgs = <span class="built_in">Array</span>.prototype.slice.all(<span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">var</span> finalArgs = args.concat(innerArgs);</span><br><span class="line">    <span class="keyword">return</span> fn.apply(context, finalArgs);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é˜²ç¯¡æ”¹å¯¹è±¡"><a href="#é˜²ç¯¡æ”¹å¯¹è±¡" class="headerlink" title="é˜²ç¯¡æ”¹å¯¹è±¡"></a>é˜²ç¯¡æ”¹å¯¹è±¡</h2><p>ä¸€æ—¦æŠŠå¯¹è±¡å®šä¹‰ä¸ºé˜²ç¯¡æ”¹ï¼Œå°±æ— æ³•æ’¤é”€äº†</p><ul><li><code>Object.preventExtensions()</code> ä¸å¯æ‰©å±•å¯¹è±¡<ul><li>æ— æ³•æ·»åŠ æ–°å±æ€§å’Œæ–¹æ³•</li><li>å·²æœ‰æˆå‘˜å¯ä»¥ä¿®æ”¹/åˆ é™¤</li></ul></li><li><code>Object.seal()</code> å¯†å°å¯¹è±¡<ul><li>ä¸å¯æ‰©å±•</li><li>ä¸èƒ½åˆ é™¤</li><li>å¯ä»¥ä¿®æ”¹</li></ul></li><li><code>Object.freeze()</code> å†»ç»“å¯¹è±¡<ul><li>ä¸å¯æ‰©å±•</li><li>å¯†å°</li><li><code>[[Writable]]</code> è®¾ç½®ä¸º falseï¼Œè‹¥å®šä¹‰ <code>[[Set]]</code> å±æ€§å¯å†™</li></ul></li></ul><h2 id="é«˜çº§å®šæ—¶å™¨"><a href="#é«˜çº§å®šæ—¶å™¨" class="headerlink" title="é«˜çº§å®šæ—¶å™¨"></a>é«˜çº§å®šæ—¶å™¨</h2><ul><li><p>å®šæ—¶å™¨ä¸æ˜¯çº¿ç¨‹</p></li><li><p>Javascript è¿è¡Œäºå•çº¿ç¨‹ç¯å¢ƒä¸­</p></li><li><p>å®šæ—¶å™¨æ˜¯è®¡åˆ’ä»£ç åœ¨æœªæ¥çš„æŸä¸ªæ—¶é—´æ‰§è¡Œï¼Œæ‰§è¡Œæ—¶æœºä¸èƒ½ä¿è¯</p></li><li><p>å› ä¸ºåœ¨é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œä¸åŒæ—¶é—´å¯èƒ½æœ‰å…¶ä»–ä»£ç åœ¨æ§åˆ¶ Javascript è¿›ç¨‹</p></li><li><p>åœ¨é¡µé¢ä¸‹è½½å®Œåçš„ä»£ç è¿è¡Œã€äº‹ä»¶å¤„ç†ç¨‹åºã€Ajax å›è°ƒå‡½æ•°éƒ½å¿…é¡»ä½¿ç”¨åŒæ ·çš„çº¿ç¨‹æ¥æ‰§è¡Œ</p></li><li><p>æµè§ˆå™¨è´Ÿè´£è¿›è¡Œæ’åºï¼ŒæŒ‡æ´¾æŸæ®µä»£ç åœ¨æŸä¸ªæ—¶é—´ç‚¹è¿è¡Œçš„ä¼˜å…ˆçº§</p></li><li><p>é™¤äº†ä¸» JavaScript æ‰§è¡Œè¿›ç¨‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªéœ€è¦åœ¨è¿›ç¨‹ä¸‹ä¸€æ¬¡ç©ºé—²æ—¶æ‰§è¡Œçš„ä»£ç é˜Ÿåˆ—</p></li><li><p>æ²¡æœ‰ä»»ä½•ä»£ç æ˜¯ç«‹å³æ‰§è¡Œçš„ï¼Œä½†ä¸€æ—¦è¿›ç¨‹ç©ºé—²åˆ™å°½å¿«æ‰§è¡Œ</p></li><li><p>å®šæ—¶å™¨æ—¶é—´è¿‡å»æ—¶ï¼Œå°†ä»£ç æ’å…¥é˜Ÿåˆ—æœ«å°¾</p><ul><li>è‹¥é˜Ÿåˆ—ä¸ç©ºï¼Œåˆ™ä»éœ€ç­‰å¾…</li><li>è‹¥ä¸» JavaScript æ‰§è¡Œè¿›ç¨‹æ­£åœ¨æ‰§è¡Œï¼Œä¹Ÿä»éœ€ç­‰å¾…</li></ul></li></ul><h3 id="é‡å¤çš„å®šæ—¶å™¨"><a href="#é‡å¤çš„å®šæ—¶å™¨" class="headerlink" title="é‡å¤çš„å®šæ—¶å™¨"></a>é‡å¤çš„å®šæ—¶å™¨</h3><p>å½“ä½¿ç”¨ <code>setInterval()</code> ä»…å½“æ²¡æœ‰è¯¥å®šæ—¶å™¨çš„ä»»ä½•å…¶ä»–ä»£ç å®ä¾‹æ—¶ï¼Œæ‰å°†å®šæ—¶å™¨ä»£ç æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­</p><ul><li>æŸäº›é—´éš”ä¼šè¢«è·³è¿‡</li><li>å¤šä¸ªå®šæ—¶å™¨çš„ä»£ç æ‰§è¡Œä¹‹é—´çš„é—´éš”å¯èƒ½ä¼šæ¯”é¢„æœŸå°</li></ul><p>è§£å†³ï¼šé“¾å¼ <code>setTimeout()</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// â€¦â€¦</span></span><br><span class="line">  setTimeout(<span class="built_in">arguments</span>.callee, interval);</span><br><span class="line">&#125;, interval);</span><br></pre></td></tr></table></figure><h3 id="Yielding-Processes"><a href="#Yielding-Processes" class="headerlink" title="Yielding Processes"></a>Yielding Processes</h3><p>å¦‚æœä»£ç è¿è¡Œè¶…è¿‡ç‰¹å®šçš„æ—¶é—´æˆ–è€…ç‰¹å®šè¯­å¥æ•°é‡å°±ä¸ä¼šè®©å®ƒç»§ç»­æ‰§è¡Œ</p><p>å±•å¼€å¾ªç¯å‰ï¼Œæ€è€ƒï¼š</p><ul><li>è¯¥å¤„ç†æ˜¯å¦å¿…é¡»åŒæ­¥å®Œæˆï¼Ÿ</li><li>æ•°æ®æ˜¯å¦å¿…é¡»æŒ‰é¡ºåºå®Œæˆï¼Ÿ</li></ul><p>å¦‚æœç­”æ¡ˆéƒ½ä¸ºå¦ï¼Œå¯ä»¥ä½¿ç”¨<strong>æ•°ç»„åˆ†å—</strong>æŠ€æœ¯</p><ul><li>ä¸ºè¦å¤„ç†çš„é¡¹ç›®åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ï¼Œä½¿ç”¨å®šæ—¶å™¨å–å‡ºä¸‹ä¸€ä¸ªè¦å¤„ç†çš„é¡¹ç›®ï¼Œå†è®¾ç½®å¦ä¸€ä¸ªå®šæ—¶å™¨</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">chunk</span>(<span class="params">array, process, context</span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> item = array.shift();</span><br><span class="line">    process.call(context, item);</span><br><span class="line">    <span class="keyword">if</span> (array.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      setTimeout(<span class="built_in">arguments</span>.callee, <span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‡½æ•°èŠ‚æµ-throttle"><a href="#å‡½æ•°èŠ‚æµ-throttle" class="headerlink" title="å‡½æ•°èŠ‚æµ throttle"></a>å‡½æ•°èŠ‚æµ throttle</h3><ul><li><p>DOM æ“ä½œæ¯”é DOM äº¤äº’éœ€è¦æ›´å¤šçš„å†…å­˜å’Œ CPU æ—¶é—´</p></li><li><p>è¿ç»­å°è¯•è¿›è¡Œè¿‡å¤šçš„ DOM ç›¸å…³æ“ä½œå¯èƒ½ä¼šå¯¼è‡´æµè§ˆå™¨æŒ‚èµ·ï¼Œç”šè‡³å´©æºƒã€‚ä¾‹å¦‚ onresize è°ƒæ•´æµè§ˆå™¨å¤§å°</p></li><li><p>é˜²æ­¢è¿ç»­è§¦å‘ï¼Œä½¿ç”¨å®šæ—¶å™¨è¿›è¡Œ<strong>èŠ‚æµ</strong></p></li><li><p>åŸºæœ¬æ€æƒ³</p><ul><li>æŸäº›ä»£ç ä¸å¯ä»¥åœ¨æ²¡æœ‰é—´æ–­çš„æƒ…å†µè¿ç»­é‡å¤æ‰§è¡Œ</li><li>ç¬¬ä¸€æ¬¡è°ƒç”¨å‡½æ•°æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨ï¼Œåœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”ä¹‹åè¿è¡Œä»£ç </li><li>ç¬¬äºŒæ¬¡è°ƒç”¨å‡½æ•°æ—¶ï¼Œæ¸…é™¤å‰ä¸€æ¬¡çš„å®šæ—¶å™¨ï¼Œå¹¶è®¾ç½®å¦ä¸€ä¸ª<ul><li>å¦‚æœå‰ä¸€æ¬¡çš„å®šæ—¶å™¨å·²ç»æ‰§è¡Œï¼Œè¿™ä¸ªæ“ä½œæ— æ„ä¹‰</li><li>å¦‚æœå‰ä¸€æ¬¡çš„å®šæ—¶å™¨è¿˜æœªæ‰§è¡Œï¼Œå°±æ˜¯æ›¿æ¢æ–°å®šæ—¶å™¨</li></ul></li><li>ç›®çš„æ˜¯åªæœ‰åœ¨æ‰§è¡Œå‡½æ•°çš„è¯·æ±‚åœæ­¢äº†ä¸€æ®µæ—¶é—´ä¹‹åæ‰æ‰§è¡Œ</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> processor = &#123;</span><br><span class="line">  timeoutId: <span class="literal">null</span>,</span><br><span class="line">  <span class="comment">// å®é™…è¿›è¡Œå¤„ç†çš„æ–¹æ³•</span></span><br><span class="line">  performPorcessing: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// â€¦â€¦</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// åˆå§‹å¤„ç†è°ƒç”¨çš„æ–¹æ³•</span></span><br><span class="line">  process: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    clearTimeout(<span class="keyword">this</span>.timeoutId);</span><br><span class="line">    <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">this</span>.timeoutId = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      that.performProcessing();</span><br><span class="line">    &#125;, <span class="number">100</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// å°è¯•å¼€å§‹æ‰§è¡Œ</span></span><br><span class="line">processor.process();</span><br></pre></td></tr></table></figure><p>ç®€åŒ–çš„ <code>throttle()</code>å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">method, context</span>) </span>&#123;</span><br><span class="line">  clearTimeout(method.tId);</span><br><span class="line">  method.tId = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    method.call(context);</span><br><span class="line">  &#125;, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è‡ªå®šä¹‰äº‹ä»¶"><a href="#è‡ªå®šä¹‰äº‹ä»¶" class="headerlink" title="è‡ªå®šä¹‰äº‹ä»¶"></a>è‡ªå®šä¹‰äº‹ä»¶</h2><ul><li><p>äº‹ä»¶æ˜¯ Javascript ä¸æµè§ˆå™¨äº¤äº’çš„ä¸»è¦é€”å¾„</p></li><li><p>äº‹ä»¶æ˜¯è§‚å¯Ÿè€…æ¨¡å¼ï¼Œä¸€ç§åˆ›å»ºæ¾æ•£è€¦åˆä»£ç çš„æŠ€æœ¯</p></li><li><p>è§‚å¯Ÿè€…æ¨¡å¼æœ‰ä¸¤ç±»å¯¹è±¡ç»„æˆ</p><ul><li>ä¸»ä½“<ul><li>å‘å¸ƒäº‹ä»¶</li><li>ä¸çŸ¥é“è§‚å¯Ÿè€…çš„å­˜åœ¨ï¼Œç‹¬ç«‹è¿è¡Œ</li></ul></li><li>è§‚å¯Ÿè€…<ul><li>é€šè¿‡è®¢é˜…äº‹ä»¶æ¥è§‚å¯Ÿä¸»ä½“</li><li>çŸ¥é“ä¸»ä½“å¹¶èƒ½æ³¨å†Œäº‹ä»¶çš„å›è°ƒå‡½æ•°ï¼ˆäº‹ä»¶å¤„ç†ç¨‹åºï¼‰</li></ul></li></ul></li></ul><h2 id="æ‹–æ”¾"><a href="#æ‹–æ”¾" class="headerlink" title="æ‹–æ”¾"></a>æ‹–æ”¾</h2><ul><li>åˆ›å»ºä¸€ä¸ªç»å¯¹å®šä½çš„å…ƒç´ ï¼Œä½¿å…¶å¯ä»¥ç”¨é¼ æ ‡ç§»åŠ¨</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScripté«˜çº§ç¨‹åºè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬äºŒåä¸€ç«  Ajaxä¸Comet</title>
      <link href="/2020/03/13/%E7%AC%AC21%E7%AB%A0-Ajax%E4%B8%8EComet/"/>
      <url>/2020/03/13/%E7%AC%AC21%E7%AB%A0-Ajax%E4%B8%8EComet/</url>
      
        <content type="html"><![CDATA[<p>AJAX - Asynchronous JavaScript + XML</p><p>å‘æœåŠ¡å™¨è¯·æ±‚é¢å¤–çš„æ•°æ®è€Œæ— é¡»å¸è½½é¡µé¢</p><p>æ ¸å¿ƒæ˜¯ XMLHttpRequest å¯¹è±¡ï¼Œç®€ç§° XHR</p><p>ä½¿ç”¨ XHR å¯¹è±¡å–å¾—æ–°æ•°æ®ï¼Œé€šè¿‡ DOM å°†æ–°æ•°æ®æ’å…¥é¡µé¢</p><h2 id="XMLHttpRequest-å¯¹è±¡"><a href="#XMLHttpRequest-å¯¹è±¡" class="headerlink" title="XMLHttpRequest å¯¹è±¡"></a>XMLHttpRequest å¯¹è±¡</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br></pre></td></tr></table></figure><h3 id="XHRçš„ç”¨æ³•"><a href="#XHRçš„ç”¨æ³•" class="headerlink" title="XHRçš„ç”¨æ³•"></a>XHRçš„ç”¨æ³•</h3><ol><li><code>open(è¯·æ±‚ç±»å‹, URL, æ˜¯å¦å¼‚æ­¥)</code><ul><li>get / post</li><li>ç›¸å¯¹äºå½“å‰é¡µé¢ / ç»å¯¹è·¯å¾„</li><li>Boolean</li></ul></li><li><code>send(è¯·æ±‚ä¸»ä½“)</code><ul><li>æ— å†…å®¹åˆ™ä¼ å…¥ null</li></ul></li><li>æ”¶åˆ°å“åº”åï¼Œè‡ªåŠ¨å¡«å…… XHR å¯¹è±¡çš„å±æ€§<ul><li><code>responseText</code> åšä¸ºå“åº”ä¸»ä½“</li><li><code>responseXML</code> â€œtext/xmlâ€ æˆ– â€œapplication/xmlâ€</li><li><code>status</code> å“åº”çš„ HTTP çŠ¶æ€<ul><li>200 æˆåŠŸï¼ŒresponseText å°±ç»ª </li><li>304 èµ„æºæœªä¿®æ”¹ï¼Œå¯ä½¿ç”¨ç¼“å­˜</li></ul></li><li><code>statusText</code> HTTP çŠ¶æ€çš„è¯´æ˜</li><li><code>readyState</code> å¼‚æ­¥è¯·æ±‚çš„æ´»åŠ¨é˜¶æ®µ<ul><li>0 ä½åˆå§‹åŒ–</li><li>1 å¯åŠ¨</li><li>2 å‘é€</li><li>3 æ¥æ”¶</li><li>4 å®Œæˆ</li><li>å€¼æ¯æ¬¡æ”¹å˜éƒ½è§¦å‘ <code>readystatechange</code> äº‹ä»¶</li></ul></li><li>æ”¶åˆ°å“åº”å‰è°ƒç”¨ <code>abort()</code> å–æ¶ˆå¼‚æ­¥è¯·æ±‚</li></ul></li></ol><h3 id="HTTPå¤´éƒ¨ä¿¡æ¯"><a href="#HTTPå¤´éƒ¨ä¿¡æ¯" class="headerlink" title="HTTPå¤´éƒ¨ä¿¡æ¯"></a>HTTPå¤´éƒ¨ä¿¡æ¯</h3><p>XHR æä¾›æ“ä½œè¯·æ±‚å¤´éƒ¨å’Œå“åº”å¤´éƒ¨ä¿¡æ¯çš„æ–¹æ³•</p><p>é»˜è®¤æƒ…å†µï¼Œå‘é€ XHR è¯·æ±‚çš„åŒæ—¶è¿˜ä¼šå‘é€ä»¥ä¸‹å¤´éƒ¨ä¿¡æ¯</p><ul><li>Acceptï¼šæµè§ˆå™¨èƒ½å¤Ÿå¤„ç†çš„å†…å®¹ç±»å‹</li><li>Accept-Charsetï¼šæµè§ˆå™¨èƒ½å¤Ÿæ˜¾ç¤ºçš„å­—ç¬¦é›†</li><li>Accept-Encodingï¼šæµè§ˆå™¨èƒ½å¤Ÿå¤„ç†çš„å‹ç¼©ç¼–ç </li><li>Accept-Languageï¼šæµè§ˆå™¨å½“å‰è®¾ç½®çš„è¯­è¨€</li><li>Connectionï¼šæµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´è¿æ¥çš„ç±»å‹</li><li>Cookieï¼šå½“å‰é¡µé¢è®¾ç½®çš„ä»»ä½• Cookie</li><li>Hostï¼šå‘å‡ºè¯·æ±‚çš„é¡µé¢æ‰€åœ¨çš„åŸŸ</li><li>Refererï¼šå‘å‡ºè¯·æ±‚çš„é¡µé¢çš„ URI</li><li>User-Agentï¼šæµè§ˆå™¨çš„ç”¨æˆ·ä»£ç†å­—ç¬¦ä¸²</li></ul><ul><li><p><code>setRequestHeader(å¤´éƒ¨å­—æ®µåç§°ï¼Œå¤´éƒ¨å­—æ®µå€¼)</code> </p><ul><li>è®¾ç½®è‡ªå®šä¹‰çš„è¯·æ±‚å¤´éƒ¨ä¿¡æ¯</li><li>open ä¹‹å send ä¹‹å‰</li></ul></li><li><p><code>getRequestHeader(å¤´éƒ¨å­—æ®µåç§°)</code></p></li><li><p><code>getAllResponseHeaders()</code></p></li></ul><h3 id="GET-è¯·æ±‚"><a href="#GET-è¯·æ±‚" class="headerlink" title="GET è¯·æ±‚"></a>GET è¯·æ±‚</h3><p>æ¯ä¸ªå‚æ•°çš„åç§°å’Œå€¼å¿…é¡»ä½¿ç”¨ <code>encodeURIComponent()</code> ç¼–ç æ‰èƒ½æ”¾åˆ° URL æœ«å°¾ï¼Œæ‰€æœ‰å-å€¼å¯¹éƒ½ç”± &amp; åˆ†éš”</p><h3 id="POST-è¯·æ±‚"><a href="#POST-è¯·æ±‚" class="headerlink" title="POST è¯·æ±‚"></a>POST è¯·æ±‚</h3><p><code>serialize()</code> æ ¼å¼åŒ–æ•°æ®</p><h2 id="XMLHttpRequest-2-çº§"><a href="#XMLHttpRequest-2-çº§" class="headerlink" title="XMLHttpRequest 2 çº§"></a>XMLHttpRequest 2 çº§</h2><ul><li>FormData åºåˆ—åŒ–è¡¨å•</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = <span class="keyword">new</span> FormData();</span><br><span class="line">data.append(é”®, å€¼);</span><br></pre></td></tr></table></figure><ul><li>è¶…æ—¶è®¾å®š <code>timeout</code>å±æ€§</li></ul><p>open ä¹‹å send ä¹‹å‰è®¾å®šï¼Œè¯·æ±‚åœ¨ç­‰å¾…å“åº”å¤šå°‘æ¯«ç§’ä¹‹ååœæ­¢</p><p>è§¦å‘ timeout äº‹ä»¶ï¼Œè°ƒç”¨ ontimeout äº‹ä»¶å¤„ç†ç¨‹åº</p><ul><li><code>overrideMimeType()</code> æ–¹æ³•</li></ul><p>é‡å†™ XHR å“åº”çš„ MIME ç±»å‹ï¼Œsend ä¹‹å‰è°ƒç”¨</p><h2 id="è¿›åº¦äº‹ä»¶"><a href="#è¿›åº¦äº‹ä»¶" class="headerlink" title="è¿›åº¦äº‹ä»¶"></a>è¿›åº¦äº‹ä»¶</h2><ul><li>loadstartï¼šæ¥æ”¶åˆ°å“åº”æ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚æ—¶è§¦å‘</li><li>progressï¼šæ¥æ”¶å“åº”æœŸé—´ä¸æ–­åœ°è§¦å‘</li><li>errorï¼šè¯·æ±‚å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘</li><li>abortï¼šåœ¨å› ä¸ºè°ƒç”¨ abort() æ–¹æ³•è€Œç»ˆæ­¢è¿æ¥æ—¶è§¦å‘</li><li>loadï¼šåœ¨æ¥æ”¶åˆ°å®Œæ•´çš„å“åº”æ•°æ®æ—¶è§¦å‘</li><li>loadedï¼šåœ¨é€šä¿¡å®Œæˆæˆ–è€…è§¦å‘ errorã€abort æˆ– load äº‹ä»¶åè§¦å‘</li></ul><h2 id="è·¨èµ„æºå…±äº«-CORS"><a href="#è·¨èµ„æºå…±äº«-CORS" class="headerlink" title="è·¨èµ„æºå…±äº« CORS"></a>è·¨èµ„æºå…±äº« CORS</h2><p>åŸºæœ¬æ€æƒ³ï¼šä½¿ç”¨è‡ªå®šä¹‰çš„ HTTP å¤´éƒ¨è®©æµè§ˆå™¨ä¸æœåŠ¡å™¨è¿›è¡Œæ²Ÿé€š</p><p>å‘é€ï¼š<code>Originï¼šhttp://www...</code></p><p>æ¥æ”¶ï¼š<code>Access-Control-Allow-Originï¼šhttp://www...</code></p><ul><li><p>åœ¨ XHR å¯¹è±¡çš„ open ä¸­ä¼ å…¥ç»å¯¹ URL å¯ä»¥è¯·æ±‚è·¨åŸŸï¼Œï¼šé™åˆ¶</p><ul><li>ä¸èƒ½ä½¿ç”¨ setRequestHeader() è®¾ç½®è‡ªå®šä¹‰å¤´éƒ¨</li><li>ä¸èƒ½å‘é€å’Œæ¥æ”¶ cookie</li><li>è°ƒç”¨ getAllResponseHeaders() ä¼šè¿”å›ç©ºå­—ç¬¦ä¸²</li></ul></li><li><p>Preflighted Requests é€æ˜æœåŠ¡å™¨éªŒè¯æœºåˆ¶</p><ul><li>å‘é€<ul><li>Originï¼šä¸ç®€å•çš„è¯·æ±‚ç›¸åŒ</li><li>Access-Control-Request-Method:è¯·æ±‚è‡ªèº«ä½¿ç”¨çš„æ–¹æ³•</li><li>Access-Control-Request-Headers:(å¯é€‰)è‡ªå®šä¹‰çš„å¤´éƒ¨ä¿¡æ¯ï¼Œå¤šä¸ªå¤´éƒ¨ä»¥é€—å·åˆ†éš”</li></ul></li><li>æ¥æ”¶<ul><li>Access-Control-Allow-Originï¼šä¸ç®€å•çš„è¯·æ±‚ç›¸åŒ</li><li>Access-Control-Allow-Methodsï¼šå…è®¸çš„æ–¹æ³•ï¼Œå¤šä¸ªæ–¹æ³•ä»¥é€—å·åˆ†éš”</li><li>Access-Control-Allow-Headersï¼šå…è®¸çš„å¤´éƒ¨ï¼Œå¤šä¸ªå¤´éƒ¨ä»¥é€—å·åˆ†éš”</li><li>Access-Control-Max-Ageï¼šåº”è¯¥å°†è¿™ä¸ª Preflight è¯·æ±‚ç¼“å­˜å¤šé•¿æ—¶é—´(ä»¥ç§’è¡¨ç¤º)</li></ul></li></ul></li><li><p>å¸¦å‡­æ®çš„è¯·æ±‚</p><ul><li>é»˜è®¤è·¨æºè¯·æ±‚ä¸æä¾›å‡­æ®ï¼ˆcookieã€HTTP è®¤è¯åŠå®¢æˆ·ç«¯ SSL è¯æ˜ï¼‰</li><li>å°† withCredentials å±æ€§è®¾ç½®ä¸º true å¯ä»¥æŒ‡å®šæŸä¸ªè¯·æ±‚åº”è¯¥å‘é€å‡­æ®</li><li>å“åº”ï¼š<code>Access-Control-Allow-Credentials: true</code></li></ul></li><li><p>è·¨æµè§ˆå™¨çš„ CROS</p><ul><li>æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒç®€å•çš„ï¼ˆé Preflight å’Œä¸å¸¦å‡­æ®çš„ï¼‰è¯·æ±‚</li></ul></li></ul><h2 id="å…¶ä»–è·¨åŸŸæŠ€æœ¯"><a href="#å…¶ä»–è·¨åŸŸæŠ€æœ¯" class="headerlink" title="å…¶ä»–è·¨åŸŸæŠ€æœ¯"></a>å…¶ä»–è·¨åŸŸæŠ€æœ¯</h2><ul><li>å›¾åƒ Ping<ul><li><code>&lt;img&gt;</code> æ ‡ç­¾</li><li>åªèƒ½å‘é€ GET è¯·æ±‚</li><li>æ— æ³•è®¿é—®æœåŠ¡å™¨çš„å“åº”æ–‡æœ¬</li></ul></li><li>JSONP - JSON with padding<ul><li>åŒ…å«ä¸¤éƒ¨åˆ†ï¼šå›è°ƒå‡½æ•°å’Œæ•°æ®</li><li>é€šè¿‡ <code>&lt;script&gt;</code> å…ƒç´ ä½¿ç”¨</li><li>èƒ½ç›´æ¥è®¿é—®å“åº”æ–‡æœ¬</li><li>ä»å…¶ä»–åŸŸä¸­åŠ è½½ä»£ç æ‰§è¡Œï¼Œä¸å®‰å…¨</li><li>å¾ˆéš¾ç¡®å®š JSONP è¯·æ±‚æ˜¯å¦æˆåŠŸ</li></ul></li><li>Comet æœåŠ¡å™¨æ¨é€<ul><li>é•¿è½®è¯¢ï¼šæµè§ˆå™¨å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¿æŒè¿æ¥ï¼Œç›´åˆ°æœ‰æ•°æ®å‘é€æ‰å‘é€æ•°æ®ã€‚æµè§ˆå™¨æ”¶åˆ°æ•°æ®åå…³é—­è¿æ¥ï¼Œå†é‡æ–°å‘èµ·æ–°è¯·æ±‚</li><li>HTTP æµï¼šæµè§ˆå™¨å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¿æŒè¿æ¥ï¼Œå‘¨æœŸæ€§åœ°å‘æµè§ˆå™¨å‘é€æ•°æ®</li></ul></li><li>SSE æœåŠ¡å™¨å‘é€äº‹ä»¶<ul><li>å›´ç»•åªè¯» Comet äº¤äº’æ¨å‡ºçš„ API æˆ–è€…æ¨¡å¼</li></ul></li><li>Web Socket<ul><li>å•ç‹¬çš„æŒä¹…è¿æ¥ä¸Šæä¾›å…¨åŒå·¥ã€åŒå‘é€šä¿¡</li></ul></li><li>SSE ä¸ Web Socket<ul><li>Web Socket éœ€è¦æœåŠ¡å™¨æ”¯æŒï¼ŒåŒå‘é€šä¿¡</li><li>SSE ä¸éœ€è¦æœåŠ¡å™¨æ”¯æŒï¼Œä¸€èˆ¬å•å‘ï¼Œç»“åˆ XHR å¯ä»¥åŒå‘</li></ul></li></ul><h2 id="å®‰å…¨"><a href="#å®‰å…¨" class="headerlink" title="å®‰å…¨"></a>å®‰å…¨</h2><ul><li>è¦æ±‚ä»¥ SSL è¿æ¥æ¥è®¿é—®å¯ä»¥é€šè¿‡ XHR è¯·æ±‚çš„èµ„æº</li><li>è¦æ±‚æ¯ä¸€æ¬¡è¯·æ±‚éƒ½è¦é™„å¸¦ç»è¿‡å“åº”ç®—æ³•è®¡ç®—å¾—åˆ°çš„éªŒè¯ç </li></ul><p>ä»¥ä¸‹æªæ–½å¯¹é˜²èŒƒ CSRFï¼ˆCross-Saite Request Forgeryï¼‰æ”»å‡»ä¸èµ·ä½œç”¨</p><ul><li>è¦æ±‚å‘é€ POST è€Œä¸æ˜¯ GET â€”â€” å®¹æ˜“æ”¹å˜</li><li>æ£€æŸ¥æ¥æº URL ä»¥ç¡®å®š æ˜¯å¦å¯ä¿¡ â€”â€” å®¹æ˜“ä¼ªé€ </li><li>åŸºäº cookie ä¿¡æ¯è¿›è¡ŒéªŒè¯ â€”â€”å®¹æ˜“ä¼ªé€ </li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScripté«˜çº§ç¨‹åºè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬äºŒåç«  JSON</title>
      <link href="/2020/03/12/%E7%AC%AC20%E7%AB%A0-JSON/"/>
      <url>/2020/03/12/%E7%AC%AC20%E7%AB%A0-JSON/</url>
      
        <content type="html"><![CDATA[<p><strong>JSON æ˜¯ä¸€ç§æ•°æ®æ ¼å¼ï¼Œä¸æ˜¯ç¼–ç¨‹è¯­è¨€</strong></p><h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><ul><li>ç®€å•å€¼<ul><li>å­—ç¬¦ä¸²</li><li>æ•°ç»„</li><li>å¸ƒå°”å€¼</li><li>null</li></ul></li><li>å¤æ‚æ•°æ®ç±»å‹<ul><li>å¯¹è±¡<ul><li>æ— åºçš„é”®å€¼å¯¹</li></ul></li><li>æ•°ç»„<ul><li>æœ‰åºçš„å€¼çš„åˆ—è¡¨</li><li>å¯ä»¥é€šè¿‡æ•°å€¼ç´¢å¼•è®¿é—®</li></ul></li></ul></li></ul><h3 id="ç®€å•å€¼"><a href="#ç®€å•å€¼" class="headerlink" title="ç®€å•å€¼"></a>ç®€å•å€¼</h3><p>JSON å­—ç¬¦ä¸²å¿…é¡»ä½¿ç”¨åŒå¼•å·ï¼ŒJavaScript å­—ç¬¦ä¸²å¯ä»¥å•å¼•å·</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"Hello world!"</span></span><br></pre></td></tr></table></figure><h3 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"å±æ€§"</span>: <span class="string">"å€¼"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å±æ€§å¿…é¡»åŠ åŒå¼•å·</li><li>å€¼å¯ä»¥æ˜¯ç®€å•å€¼/å¤æ‚ç±»å‹</li></ul><h3 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">25</span>, <span class="string">"hi"</span>, <span class="literal">true</span>]</span><br></pre></td></tr></table></figure><p>}</p><h2 id="è§£æä¸åºåˆ—åŒ–"><a href="#è§£æä¸åºåˆ—åŒ–" class="headerlink" title="è§£æä¸åºåˆ—åŒ–"></a>è§£æä¸åºåˆ—åŒ–</h2><h3 id="JSON-å¯¹è±¡"><a href="#JSON-å¯¹è±¡" class="headerlink" title="JSON å¯¹è±¡"></a>JSON å¯¹è±¡</h3><ul><li><code>stringify()</code> js å¯¹è±¡åºåˆ—åŒ–ä¸º JSON å­—ç¬¦ä¸²<ul><li>å‡½æ•°åŠåŸå‹æˆå‘˜ä¼šè¢«å¿½ç•¥</li><li>å€¼ä¸º undefined çš„å±æ€§ä¹Ÿä¼šè¢«è·³è¿‡</li></ul></li><li><code>parse()</code> JSON å­—ç¬¦ä¸²è§£æä¸º js å€¼</li></ul><h3 id="åºåˆ—åŒ–é€‰é¡¹"><a href="#åºåˆ—åŒ–é€‰é¡¹" class="headerlink" title="åºåˆ—åŒ–é€‰é¡¹"></a>åºåˆ—åŒ–é€‰é¡¹</h3><ul><li><code>JSON.stringify()</code> å‚æ•°<ul><li>è¿‡æ»¤å™¨<ul><li>æ•°ç»„</li><li>å‡½æ•° replacer</li></ul></li><li>é€‰é¡¹<ul><li>æ˜¯å¦åœ¨ JSON å­—ç¬¦ä¸²ä¸­ä¿ç•™ç¼©è¿›</li></ul></li></ul></li></ul><h5 id="è¿‡æ»¤ç»“æœ"><a href="#è¿‡æ»¤ç»“æœ" class="headerlink" title="è¿‡æ»¤ç»“æœ"></a>è¿‡æ»¤ç»“æœ</h5><ul><li><p>å¦‚æœè¿‡æ»¤å™¨å‚æ•°æ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆ stringily() çš„ç»“æœä¸­å°†åªåŒ…å«æ•°ç»„ä¸­åˆ—å‡ºçš„å±æ€§</p></li><li><p>å¦‚æœæ˜¯å‡½æ•°ï¼šè¯¥å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼ˆå±æ€§åï¼Œå±æ€§å€¼ï¼‰ï¼Œæ ¹æ®å±æ€§åè¿›è¡Œè‡ªå®šä¹‰åºåˆ—åŒ–</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> book = &#123;</span><br><span class="line">  <span class="string">"title"</span>: <span class="string">"Professional JavaScript"</span>,</span><br><span class="line">  <span class="string">"authors"</span>: [</span><br><span class="line">    <span class="string">"Nicholas C. Zakas"</span></span><br><span class="line">  ],</span><br><span class="line">  edition: <span class="number">3</span>,</span><br><span class="line">  year: <span class="number">2011</span></span><br><span class="line">&#125;;<span class="comment">// js å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> jsonText = <span class="built_in">JSON</span>.stringify(book, <span class="function"><span class="keyword">function</span>(<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span>(key)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"authors"</span>: <span class="keyword">return</span> value.join(<span class="string">","</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"year"</span>: <span class="keyword">return</span> <span class="number">5000</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"edition"</span>: <span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line">    <span class="keyword">default</span>: <span class="keyword">return</span> value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#123;"title":"Professional JavaScript","authors":"Nicholas C. Zakas","year":5000&#125;</span></span><br></pre></td></tr></table></figure><h5 id="å­—ç¬¦ä¸²ç¼©è¿›"><a href="#å­—ç¬¦ä¸²ç¼©è¿›" class="headerlink" title="å­—ç¬¦ä¸²ç¼©è¿›"></a>å­—ç¬¦ä¸²ç¼©è¿›</h5><ul><li>æ•°å­—ï¼šç©ºæ ¼æ•°ï¼Œæœ€å¤§ç¼©è¿›ç©ºæ ¼æ•° 10</li><li>å­—ç¬¦ä¸²ï¼šç¼©è¿›å­—ç¬¦ï¼Œä¸æ˜¯ç”¨ç©ºæ ¼ï¼Œæœ€é•¿10</li></ul><h5 id="toJSON-æ–¹æ³•"><a href="#toJSON-æ–¹æ³•" class="headerlink" title="toJSON() æ–¹æ³•"></a>toJSON() æ–¹æ³•</h5><p>Date å¯¹è±¡è‡ªå¸¦ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰</p><p>åšä¸ºå‡½æ•°è¿‡æ»¤å™¨çš„è¡¥å……</p><blockquote><p> stringify() æ‰§è¡Œé¡ºåº</p><ol><li>å¦‚æœå­˜åœ¨ toJSON() <ul><li>èƒ½å–å¾—æœ‰æ•ˆå€¼å°±è°ƒç”¨</li><li>å¦åˆ™è¿”å›å¯¹è±¡æœ¬èº«</li></ul></li><li>å¦‚æœæä¾›äº†è¿‡æ»¤å™¨ï¼ˆç¬¬2ä¸ªå‚æ•°ï¼‰<ul><li>åº”ç”¨è¿‡æ»¤å™¨ï¼Œä¼ å…¥çš„å€¼æ˜¯ 1 è¿”å›çš„å€¼</li></ul></li><li>å¯¹ 2 è¿”å›çš„æ¯ä¸ªå€¼è¿›è¡Œç›¸åº”çš„åºåˆ—åŒ–</li><li>å¦‚æœæä¾›ç¬¬ 3 ä¸ªå‚æ•°ï¼Œæ‰§è¡Œç›¸åº”çš„æ ¼å¼åŒ–</li></ol></blockquote><h3 id="è§£æé€‰é¡¹"><a href="#è§£æé€‰é¡¹" class="headerlink" title="è§£æé€‰é¡¹"></a>è§£æé€‰é¡¹</h3><ul><li><code>JSON.parse()</code> å‚æ•°<ul><li>è¿˜åŸå‡½æ•° reviver<ul><li>åœ¨æ¯ä¸ªé”®å€¼å¯¹ä¸Šè°ƒç”¨</li><li>æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼ˆå±æ€§å³é”®ï¼Œå€¼ï¼‰</li><li>è¿”å› undefined è¡¨ç¤ºåˆ é™¤ç›¸åº”çš„é”®</li></ul></li></ul></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScripté«˜çº§ç¨‹åºè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬åä¸ƒç«  é”™è¯¯å¤„ç†ä¸è°ƒè¯•</title>
      <link href="/2020/03/10/%E7%AC%AC17%E7%AB%A0-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E4%B8%8E%E8%B0%83%E8%AF%95/"/>
      <url>/2020/03/10/%E7%AC%AC17%E7%AB%A0-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E4%B8%8E%E8%B0%83%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<h2 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h2><h3 id="try-catch-è¯­å¥"><a href="#try-catch-è¯­å¥" class="headerlink" title="try-catch è¯­å¥"></a>try-catch è¯­å¥</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="comment">// å¯èƒ½ä¼šå¯¼è‡´é”™è¯¯çš„ä»£ç </span></span><br><span class="line">&#125; <span class="keyword">catch</span>(error) &#123;</span><br><span class="line">  <span class="comment">// åœ¨é”™è¯¯å‘ç”Ÿæ—¶æ€ä¹ˆå¤„ç†</span></span><br><span class="line">  <span class="built_in">console</span>.log(error.message)</span><br><span class="line">  <span class="comment">// æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒ message å±æ€§</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>finally å­å¥<ul><li>æ— è®º try æˆ– catchï¼Œéƒ½ä¼šæ‰§è¡Œ finally</li><li>å¦‚æœ try æˆ– catch ä¸­æœ‰ returnï¼Œä¼šè¢«å¿½ç•¥<ul><li>å› ä¸ºä¸€å®šè¦æ‰§è¡Œ finally</li></ul></li></ul></li><li>é”™è¯¯ç±»å‹<ul><li>Error<ul><li>åŸºç±»å‹ï¼Œå…¶å®ƒéƒ½ç»§æ‰¿è¿™ä¸ª</li><li>ä¸»è¦ç”¨äºè‡ªå®šä¹‰</li></ul></li><li>EvalError<ul><li>æ²¡æœ‰æŠŠ eval() å½“æˆå‡½æ•°è°ƒç”¨ï¼ŒæŠ›å‡ºå¼‚å¸¸<ul><li>eval() å‡½æ•°åœ¨ç¬¬äº”ç« </li></ul></li></ul></li><li>RangeError<ul><li>æ•°å€¼è¶…å‡ºå“åº”èŒƒå›´</li></ul></li><li>ReferenceError<ul><li>æ‰¾ä¸åˆ°å¯¹è±¡</li></ul></li><li>SyntaxError<ul><li>ä¼ å…¥è¯­æ³•é”™è¯¯çš„ JavaScript ç»™ eval()</li></ul></li><li>TypeError<ul><li>å˜é‡ä¸­ä¿å­˜ç€æ„å¤–çš„ç±»å‹</li><li>è®¿é—®ä¸å­˜åœ¨çš„æ–¹æ³•</li><li>æ‰§è¡Œç‰¹å®šäºç±»å‹çš„æ“ä½œæ—¶ï¼Œå˜é‡ç±»å‹ä¸ç¬¦åˆè¦æ±‚</li></ul></li><li>URIError<ul><li>encodeURI()ã€decodeURI() æ—¶ URI æ ¼å¼ä¸æ­£ç¡®</li></ul></li></ul></li></ul><h3 id="æŠ›å‡ºé”™è¯¯"><a href="#æŠ›å‡ºé”™è¯¯" class="headerlink" title="æŠ›å‡ºé”™è¯¯"></a>æŠ›å‡ºé”™è¯¯</h3><p><code>throw</code> æ“ä½œç¬¦</p><blockquote><p>æ•è·é”™è¯¯çš„ç›®çš„åœ¨äºé¿å…æµè§ˆå™¨ä»¥é»˜è®¤æ–¹å¼å¤„ç†å®ƒä»¬</p><p>æŠ›å‡ºé”™è¯¯çš„ç›®çš„åœ¨äºæä¾›é”™è¯¯å‘ç”Ÿå…·ä½“åŸå› çš„æ¶ˆæ¯</p></blockquote><h3 id="é”™è¯¯ï¼ˆerrorï¼‰äº‹ä»¶"><a href="#é”™è¯¯ï¼ˆerrorï¼‰äº‹ä»¶" class="headerlink" title="é”™è¯¯ï¼ˆerrorï¼‰äº‹ä»¶"></a>é”™è¯¯ï¼ˆerrorï¼‰äº‹ä»¶</h3><p>æ²¡æœ‰é€šè¿‡ try-catch å¤„ç†çš„é”™è¯¯ä¼šè§¦å‘ window å¯¹è±¡çš„ error äº‹ä»¶</p><h3 id="å¸¸è§çš„é”™è¯¯ç±»å‹"><a href="#å¸¸è§çš„é”™è¯¯ç±»å‹" class="headerlink" title="å¸¸è§çš„é”™è¯¯ç±»å‹"></a>å¸¸è§çš„é”™è¯¯ç±»å‹</h3><ul><li>ç±»å‹è½¬æ¢é”™è¯¯<ul><li><code>===</code>  <code>!==</code></li><li><code>if</code> <code>for</code> <code>while</code></li></ul></li><li>æ•°æ®ç±»å‹é”™è¯¯<ul><li><code>typeof</code></li><li><code>instanceof</code></li></ul></li><li>é€šä¿¡é”™è¯¯<ul><li><code>encodeURIComponent()</code></li></ul></li></ul><h2 id="è°ƒè¯•æŠ€æœ¯"><a href="#è°ƒè¯•æŠ€æœ¯" class="headerlink" title="è°ƒè¯•æŠ€æœ¯"></a>è°ƒè¯•æŠ€æœ¯</h2><ul><li><code>error(message)</code></li><li><code>info(message)</code></li><li><code>log(message)</code></li><li><code>warn(message)</code></li></ul><h3 id="æŠ›å‡ºé”™è¯¯-1"><a href="#æŠ›å‡ºé”™è¯¯-1" class="headerlink" title="æŠ›å‡ºé”™è¯¯"></a>æŠ›å‡ºé”™è¯¯</h3><ul><li><code>throw</code></li><li><code>assert(æ¡ä»¶, å¦‚æœæ¡ä»¶ä¸ä¸º true æŠ›å‡ºçš„é”™è¯¯)</code> å¯ä»¥ä»£æ›¿ if è¯­å¥</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScripté«˜çº§ç¨‹åºè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬åå››ç«  è¡¨å•è„šæœ¬</title>
      <link href="/2020/03/07/%E7%AC%AC14%E7%AB%A0-%E8%A1%A8%E5%8D%95%E8%84%9A%E6%9C%AC/"/>
      <url>/2020/03/07/%E7%AC%AC14%E7%AB%A0-%E8%A1%A8%E5%8D%95%E8%84%9A%E6%9C%AC/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬¬åå››ç« -è¡¨å•è„šæœ¬"><a href="#ç¬¬åå››ç« -è¡¨å•è„šæœ¬" class="headerlink" title="ç¬¬åå››ç«  è¡¨å•è„šæœ¬"></a>ç¬¬åå››ç«  è¡¨å•è„šæœ¬</h1><h2 id="è¡¨å•çš„åŸºæœ¬çŸ¥è¯†"><a href="#è¡¨å•çš„åŸºæœ¬çŸ¥è¯†" class="headerlink" title="è¡¨å•çš„åŸºæœ¬çŸ¥è¯†"></a>è¡¨å•çš„åŸºæœ¬çŸ¥è¯†</h2><p>HTML ä¸­ï¼Œ<code>&lt;form&gt;</code> å…ƒç´ </p><p>Javascript ä¸­ï¼Œ<code>HTMLFormElement</code>ç±»å‹ï¼Œç»§æ‰¿ <code>HTMLElement</code></p><ul><li><code>acceptCharset</code> æœåŠ¡å™¨èƒ½å¤Ÿå¤„ç†çš„å­—ç¬¦é›† <code>accept-charset</code></li><li><code>action</code> æ¥å—è¯·æ±‚çš„ URL <code>action</code></li><li><code>elements</code> è¡¨å•ä¸­æ‰€æœ‰æ§ä»¶é›†åˆ <code>HTMLCollection</code></li><li><code>enctype</code> è¯·æ±‚çš„ç¼–ç ç±»å‹ <code>enctype</code></li><li><code>length</code> è¡¨å•ä¸­æ§ä»¶çš„æ•°é‡</li><li><code>method</code> è¦å‘é€çš„HTTPè¯·æ±‚ç±»å‹ get/post <code>method</code></li><li><code>name</code> è¡¨å•åç§° <code>name</code></li><li><code>reset()</code> å°†æ‰€æœ‰è¡¨å•åŸŸé‡ç½®ä¸ºé»˜è®¤å€¼</li><li><code>submit()</code> æäº¤è¡¨å•</li><li><code>target</code> ç”¨äºå‘é€å’Œæ¥å—å“åº”çª—å£çš„åç§° <code>target</code></li></ul><h3 id="æäº¤è¡¨å•"><a href="#æäº¤è¡¨å•" class="headerlink" title="æäº¤è¡¨å•"></a>æäº¤è¡¨å•</h3><ul><li><p><code>&lt;input&gt;</code> å’Œ <code>&lt;button&gt;</code> éƒ½å¯ä»¥å®šä¹‰æäº¤æŒ‰é’®ï¼Œ<code>type = submit</code> å³å¯</p></li><li><p>æäº¤è¡¨å•æ—¶ï¼Œæµè§ˆå™¨å°†è¯·æ±‚å‘é€ç»™æœåŠ¡å™¨ä¹‹å‰è§¦å‘ submit äº‹ä»¶ï¼Œè¿™æ ·å°±æœ‰æœºä¼šéªŒè¯è¡¨å•æ•°æ®ã€‚</p></li><li><p>æäº¤è¡¨å•æœ€å¤§çš„é—®é¢˜æ˜¯é‡å¤æäº¤è¡¨å•</p><ul><li>ç¬¬ä¸€æ¬¡æäº¤åç¦ç”¨æŒ‰é’®</li><li>åˆ©ç”¨ onsubmit äº‹ä»¶å¤„ç†ç¨‹åº å–æ¶ˆåç»­çš„è¡¨å•æäº¤æ“ä½œ</li></ul></li></ul><h3 id="é‡ç½®è¡¨å•"><a href="#é‡ç½®è¡¨å•" class="headerlink" title="é‡ç½®è¡¨å•"></a>é‡ç½®è¡¨å•</h3><ul><li><code>&lt;input&gt;</code> æˆ– <code>&lt;button&gt;</code> ä¸­ <code>type = reset</code>ï¼Œå•å‡»å³å¯é‡ç½®</li></ul><h3 id="è¡¨å•å­—æ®µ"><a href="#è¡¨å•å­—æ®µ" class="headerlink" title="è¡¨å•å­—æ®µ"></a>è¡¨å•å­—æ®µ</h3><p>æ¯ä¸ªè¡¨å•éƒ½æœ‰ <code>elements</code> å±æ€§ï¼Œå†…å®¹æ˜¯æ‰€æœ‰è¡¨å•å…ƒç´ çš„é›†åˆã€‚é›†åˆæ˜¯ä¸€ä¸ªæœ‰åºåˆ—è¡¨ï¼ŒåŒ…å«è¡¨å•ä¸­æ‰€æœ‰å­—æ®µã€‚</p><ul><li>å…±æœ‰çš„è¡¨å•å­—æ®µå±æ€§<ul><li><code>disabled</code></li><li><code>form</code></li><li><code>name</code></li><li><code>readOnly</code></li><li><code>tabIndex</code></li><li><code>type</code></li><li><code>value</code></li></ul></li><li>å…±æœ‰çš„è¡¨å•å­—æ®µæ–¹æ³•<ul><li><code>focus()</code></li><li><code>blur()</code></li><li><code>autofocus</code> é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨è·å¾—ç„¦ç‚¹</li></ul></li><li>å…±æœ‰çš„è¡¨å•å­—æ®µäº‹ä»¶<ul><li><code>blur</code></li><li><code>change</code></li><li><code>focus</code><ul><li><code>blur</code> å’Œ <code>change</code> å…ˆåé¡ºåºåœ¨å„æµè§ˆå™¨ä¸­ä¸åŒ</li></ul></li></ul></li></ul><h2 id="æ–‡æœ¬æ¡†è„šæœ¬"><a href="#æ–‡æœ¬æ¡†è„šæœ¬" class="headerlink" title="æ–‡æœ¬æ¡†è„šæœ¬"></a>æ–‡æœ¬æ¡†è„šæœ¬</h2><p><code>&lt;input&gt;</code>ã€<code>&lt;textarea&gt;</code></p><p>å¤„ç†æ–‡æœ¬æ¡†æ—¶æœ€å¥½ä¸è¦ä½¿ç”¨ DOM æ–¹æ³•ï¼ˆ<code>setAttribute</code>ï¼‰</p><h3 id="é€‰æ‹©æ–‡æœ¬"><a href="#é€‰æ‹©æ–‡æœ¬" class="headerlink" title="é€‰æ‹©æ–‡æœ¬"></a>é€‰æ‹©æ–‡æœ¬</h3><p><code>select()</code> æ–¹æ³•è·å¾—ç„¦ç‚¹æ—¶é€‰æ‹©å…¶æ‰€æœ‰æ–‡æœ¬</p><ul><li>é€‰æ‹©äº‹ä»¶</li><li>å–å¾—é€‰æ‹©çš„æ–‡æœ¬<ul><li><code>selectionStart</code> æ•°å€¼ï¼Œå¼€å¤´ä½ç½®</li><li><code>selectionEnd</code> æ•°å€¼ï¼Œç»“å°¾ä½ç½®</li></ul></li><li>é€‰æ‹©éƒ¨åˆ†æ–‡æœ¬<ul><li><code>setSelectionRange()</code></li></ul></li></ul><h3 id="è¿‡æ»¤è¾“å…¥"><a href="#è¿‡æ»¤è¾“å…¥" class="headerlink" title="è¿‡æ»¤è¾“å…¥"></a>è¿‡æ»¤è¾“å…¥</h3><ul><li><p>å±è”½å­—ç¬¦</p></li><li><p>æ“ä½œå‰ªè´´æ¿</p><ul><li><p>å‰ªè´´æ¿äº‹ä»¶</p><ul><li><code>beforecopy</code></li><li><code>copy</code></li><li><code>beforecut</code></li><li><code>cut</code></li><li><code>beforepaste</code></li><li><code>paste</code></li></ul></li><li><p>clipboardData å¯¹è±¡</p><ul><li><code>getData()</code></li><li><code>setData()</code></li><li><code>clearData()</code></li></ul></li></ul></li></ul><h3 id="è‡ªåŠ¨åˆ‡æ¢ç„¦ç‚¹"><a href="#è‡ªåŠ¨åˆ‡æ¢ç„¦ç‚¹" class="headerlink" title="è‡ªåŠ¨åˆ‡æ¢ç„¦ç‚¹"></a>è‡ªåŠ¨åˆ‡æ¢ç„¦ç‚¹</h3><p><code>tabForward()</code></p><h3 id="HTML5-çº¦æŸéªŒè¯-API"><a href="#HTML5-çº¦æŸéªŒè¯-API" class="headerlink" title="HTML5 çº¦æŸéªŒè¯ API"></a>HTML5 çº¦æŸéªŒè¯ API</h3><ul><li>å¿…å¡«å­—æ®µ <code>required</code> å±æ€§</li><li>å…¶å®ƒè¾“å…¥ç±»å‹<ul><li><code>email</code></li><li><code>url</code></li></ul></li><li>æ•°å€¼èŒƒå›´<ul><li><code>min</code></li><li><code>max</code></li></ul></li><li>è¾“å…¥æ¨¡å¼ <code>pattern</code></li><li>æ£€æµ‹æœ‰æ•ˆæ€§<ul><li><code>checkValidity()</code></li><li><code>validity</code></li></ul></li><li>ç¦ç”¨éªŒè¯ <code>novalidate</code></li></ul><h2 id="é€‰æ‹©æ¡†è„šæœ¬"><a href="#é€‰æ‹©æ¡†è„šæœ¬" class="headerlink" title="é€‰æ‹©æ¡†è„šæœ¬"></a>é€‰æ‹©æ¡†è„šæœ¬</h2><p><code>&lt;select&gt;</code>ã€<code>&lt;option&gt;</code></p><ul><li><code>add(newOption, relOption)</code></li><li><code>multiple</code></li><li><code>options</code> æ§ä»¶ä¸­æ‰€æœ‰ <code>&lt;option&gt;</code> å…ƒç´ çš„ <code>HTMLCollection</code>ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯  <code>HTMLOptionElement</code> å¯¹è±¡<ul><li><code>index</code></li><li><code>label</code></li><li><code>selected</code></li><li><code>text</code></li><li><code>value</code></li></ul></li><li><code>remove(index)</code></li><li><code>selectedIndex</code></li><li><code>size</code></li></ul><h2 id="è¡¨å•åºåˆ—åŒ–"><a href="#è¡¨å•åºåˆ—åŒ–" class="headerlink" title="è¡¨å•åºåˆ—åŒ–"></a>è¡¨å•åºåˆ—åŒ–</h2><blockquote><p> è¡¨å•æäº¤æœŸé—´ï¼Œæµè§ˆå™¨æ€æ ·å°†æ•°æ®å‘é€ç»™æœåŠ¡å™¨ï¼Ÿ</p><ul><li><p>å¯¹è¡¨å•å­—æ®µçš„åç§°å’Œå€¼è¿›è¡Œ URL ç¼–ç ï¼Œä½¿ç”¨ &amp; åˆ†éš”</p></li><li><p>ä¸å‘é€ç¦ç”¨çš„è¡¨å•å­—æ®µ</p></li><li><p>åªå‘é€å‹¾é€‰çš„å¤é€‰æ¡†å’Œå•é€‰æŒ‰é’®</p></li><li><p>ä¸å‘é€ type ä¸º reset å’Œ button çš„æŒ‰é’®</p></li><li><p>å¤šé€‰é€‰æ‹©æ¡†ä¸­çš„æ¯ä¸ªé€‰ä¸­çš„å€¼å•ç‹¬ä¸€ä¸ªæ¡ç›®</p></li><li><p>åœ¨å•å‡»æäº¤æŒ‰é’®æäº¤è¡¨å•çš„æƒ…å†µä¸‹ï¼Œä¹Ÿä¼šå‘é€æäº¤æŒ‰é’®ï¼›å¦åˆ™ï¼Œä¸å‘é€æäº¤æŒ‰é’®ã€‚</p></li><li><p>&lt;select&gt; å…ƒç´ çš„å€¼ï¼Œå°±æ˜¯é€‰ä¸­çš„ &lt;option&gt; å…ƒç´ çš„ value ç‰¹æ€§çš„å€¼</p></li></ul></blockquote><h2 id="å¯Œæ–‡æœ¬ç¼–è¾‘"><a href="#å¯Œæ–‡æœ¬ç¼–è¾‘" class="headerlink" title="å¯Œæ–‡æœ¬ç¼–è¾‘"></a>å¯Œæ–‡æœ¬ç¼–è¾‘</h2><p>WYSIWYGï¼ˆWhat You See Is What You Getï¼‰</p><p>åœ¨é¡µé¢ä¸­åµŒå…¥ä¸€ä¸ªåŒ…å«ç©º HTML é¡µé¢çš„ iframe</p><p>é€šè¿‡è®¾ç½® designMode å±æ€§ï¼Œå¯ä»¥ç¼–è¾‘ï¼Œç¼–è¾‘çš„å¯¹è±¡æ˜¯è¯¥é¡µé¢ body å…ƒç´ çš„ HTML ä»£ç </p>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScripté«˜çº§ç¨‹åºè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬åå…­ç«  HTMl5 è„šæœ¬ç¼–ç¨‹</title>
      <link href="/2020/03/07/%E7%AC%AC16%E7%AB%A0-HTMl5%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/"/>
      <url>/2020/03/07/%E7%AC%AC16%E7%AB%A0-HTMl5%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬¬åå…­ç« -HTML5-è„šæœ¬ç¼–ç¨‹"><a href="#ç¬¬åå…­ç« -HTML5-è„šæœ¬ç¼–ç¨‹" class="headerlink" title="ç¬¬åå…­ç«  HTML5 è„šæœ¬ç¼–ç¨‹"></a>ç¬¬åå…­ç«  HTML5 è„šæœ¬ç¼–ç¨‹</h1><h2 id="è·¨æ–‡æ¡£æ¶ˆæ¯ä¼ é€’-XDM"><a href="#è·¨æ–‡æ¡£æ¶ˆæ¯ä¼ é€’-XDM" class="headerlink" title="è·¨æ–‡æ¡£æ¶ˆæ¯ä¼ é€’ XDM"></a>è·¨æ–‡æ¡£æ¶ˆæ¯ä¼ é€’ XDM</h2><p>æ¥è‡ªä¸åŒåŸŸçš„é¡µé¢é—´ä¼ é€’æ¶ˆæ¯</p><ul><li><code>postMessage(æ¶ˆæ¯ï¼ŒåŸŸ)</code> å‘é€ã€æ¶ˆæ¯ã€‘ç»™ã€åŸŸã€‘ä¸­çš„ <code>&lt;iframe&gt;</code> å…ƒç´ </li><li>æ¥æ”¶åˆ° XDM æ¶ˆæ¯æ—¶ï¼Œä¼šè§¦å‘ window å¯¹è±¡çš„ message äº‹ä»¶ï¼Œå¼‚æ­¥ï¼Œæœ‰å»¶è¿Ÿ</li><li><code>onmessage</code><ul><li><code>data</code></li><li><code>origin</code></li><li><code>source</code></li></ul></li></ul><h2 id="åŸç”Ÿæ‹–æ”¾"><a href="#åŸç”Ÿæ‹–æ”¾" class="headerlink" title="åŸç”Ÿæ‹–æ”¾"></a>åŸç”Ÿæ‹–æ”¾</h2><h3 id="æ‹–æ”¾äº‹ä»¶"><a href="#æ‹–æ”¾äº‹ä»¶" class="headerlink" title="æ‹–æ”¾äº‹ä»¶"></a>æ‹–æ”¾äº‹ä»¶</h3><ol><li><code>dragstart</code> æŒ‰ä¸‹é¼ æ ‡è§¦å‘</li><li><code>drag</code> æ‹–åŠ¨æœŸé—´æŒç»­è§¦å‘</li><li><code>dragend</code> æ‹–åŠ¨åœæ­¢æ—¶è§¦å‘ï¼Œæ— è®ºæ”¾ç½®ç›®æ ‡æ˜¯å¦æœ‰æ•ˆ</li></ol><ul><li>å½“è¢«æ‹–åŠ¨åˆ°ä¸€ä¸ªæœ‰æ•ˆçš„æ”¾ç½®ç›®æ ‡ä¸Š</li></ul><ol><li><code>dragenter</code> æ‹–åŠ¨åˆ°æ”¾ç½®ç›®æ ‡ä¸Š</li><li><code>dragover</code> æ”¾ç½®ç›®æ ‡èŒƒå›´å†…ç§»åŠ¨æŒç»­è§¦å‘</li><li><code>dragleave</code> æ‹–å‡ºæ”¾ç½®ç›®æ ‡èŒƒå›´ æˆ– <code>drop</code> æ”¾åˆ°æ”¾ç½®ç›®æ ‡ä¸­</li></ol><h3 id="è‡ªå®šä¹‰æ”¾ç½®ç›®æ ‡"><a href="#è‡ªå®šä¹‰æ”¾ç½®ç›®æ ‡" class="headerlink" title="è‡ªå®šä¹‰æ”¾ç½®ç›®æ ‡"></a>è‡ªå®šä¹‰æ”¾ç½®ç›®æ ‡</h3><p>å…ƒç´ é»˜è®¤ä¸å…è®¸æ”¾ç½®ï¼Œä¿®æ”¹ä¸ºå¯æ”¾ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> droptarget = <span class="built_in">document</span>.getElementById(<span class="string">"droptarget"</span>);</span><br><span class="line"></span><br><span class="line">EventUtil.addHandler(droptarget, <span class="string">"dragover"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  EventUtil.preventDefault(event);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">EventUtil.addHandler(droptarget, <span class="string">"dragenter"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  EventUtil.preventDefault(event);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="dataTransfet-å¯¹è±¡"><a href="#dataTransfet-å¯¹è±¡" class="headerlink" title="dataTransfet å¯¹è±¡"></a>dataTransfet å¯¹è±¡</h3><p>ç”¨äºä»è¢«æ‹–åŠ¨å…ƒç´ å‘æ”¾ç½®ç›®æ ‡ä¼ é€’å­—ç¬¦ä¸²æ ¼å¼çš„æ•°æ®</p><ul><li><code>getData()</code></li><li><code>setData()</code></li></ul><p>ä¿å­˜åœ¨ dataTransfer å¯¹è±¡ä¸­çš„æ•°æ®åªèƒ½åœ¨ drop äº‹ä»¶ä¸­è¢«è¯»å–</p><ul><li><code>dropEffect</code> è¢«æ‹–åŠ¨å…ƒç´ èƒ½æ‰§è¡Œçš„æ”¾ç½®è¡Œä¸º<ul><li>none</li><li>move</li><li>copy</li><li>link</li></ul></li><li><code>effectAllowed</code> å…è®¸æ‹–åŠ¨å…ƒç´ çš„å“ªç§ dropEffect<ul><li>uninitialized</li><li>none</li><li>copy</li><li>link</li><li>move</li><li>copyLink</li><li>copyMove</li><li>linkMove</li><li>all</li></ul></li></ul><h3 id="å¯æ‹–åŠ¨"><a href="#å¯æ‹–åŠ¨" class="headerlink" title="å¯æ‹–åŠ¨"></a>å¯æ‹–åŠ¨</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå›¾åƒã€é“¾æ¥ã€æ–‡æœ¬å¯æ‹–åŠ¨</p><p>å…¶å®ƒå…ƒç´ å¯ä»¥æ‰‹åŠ¨è®¾ç½® draggable å±æ€§ä¸º ture</p><h2 id="åª’ä½“å…ƒç´ "><a href="#åª’ä½“å…ƒç´ " class="headerlink" title="åª’ä½“å…ƒç´ "></a>åª’ä½“å…ƒç´ </h2><p><code>&lt;audio&gt;</code>ã€<code>&lt;video&gt;</code> å¿…é¡» src æŒ‡å‘è¦åŠ è½½çš„åª’ä½“</p><h3 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h3><p>è¡¨ç¤ºåª’ä½“çš„å½“å‰çŠ¶æ€</p><h3 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h3><p>è§¦å‘äº‹ä»¶ï¼Œç›‘å¬å±æ€§å˜åŒ–ï¼Œå¯èƒ½æ˜¯æ’­æ”¾ç»“æœï¼Œä¹Ÿå¯èƒ½æ˜¯æ“ä½œç»“æœ</p><h2 id="å†å²çŠ¶æ€ç®¡ç†"><a href="#å†å²çŠ¶æ€ç®¡ç†" class="headerlink" title="å†å²çŠ¶æ€ç®¡ç†"></a>å†å²çŠ¶æ€ç®¡ç†</h2><p>history å¯¹è±¡</p>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScripté«˜çº§ç¨‹åºè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬åä¸‰ç«  äº‹ä»¶</title>
      <link href="/2020/03/05/%E7%AC%AC13%E7%AB%A0-%E4%BA%8B%E4%BB%B6/"/>
      <url>/2020/03/05/%E7%AC%AC13%E7%AB%A0-%E4%BA%8B%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬¬åä¸‰ç« -äº‹ä»¶"><a href="#ç¬¬åä¸‰ç« -äº‹ä»¶" class="headerlink" title="ç¬¬åä¸‰ç«  äº‹ä»¶"></a>ç¬¬åä¸‰ç«  äº‹ä»¶</h1><p>js å’Œ html ä¹‹é—´çš„äº¤äº’æ˜¯é€šè¿‡<strong>äº‹ä»¶</strong>å®ç°çš„ï¼Œäº‹ä»¶å°±æ˜¯æ–‡æ¡£æˆ–æµè§ˆå™¨çª—å£ä¸­å‘ç”Ÿçš„ä¸€äº›ç‰¹å®šçš„äº¤äº’ç¬é—´ã€‚<br>å¯ä»¥ä½¿ç”¨<strong>ä¾¦å¬å™¨</strong>æ¥é¢„å®šäº‹ä»¶ï¼Œä»¥ä¾¿äº‹ä»¶å‘ç”Ÿæ—¶æ‰§è¡Œç›¸åº”çš„ä»£ç ã€‚<br>è¿™ç§åœ¨ä¼ ç»Ÿè½¯ä»¶å·¥ç¨‹ä¸­è¢«ç§°ä¸º<strong>è§‚å¯Ÿå‘˜æ¨¡å¼</strong>çš„æ¨¡å‹ï¼Œæ”¯æŒ js å’Œ html+css ä¹‹é—´çš„æ¾æ•£è€¦åˆã€‚</p><h2 id="äº‹ä»¶æµ"><a href="#äº‹ä»¶æµ" class="headerlink" title="äº‹ä»¶æµ"></a>äº‹ä»¶æµ</h2><p><strong>äº‹ä»¶æµ</strong>æè¿°çš„æ˜¯ä»é¡µé¢ä¸­æ¥æ”¶äº‹ä»¶çš„é¡ºåº</p><h3 id="äº‹ä»¶å†’æ³¡"><a href="#äº‹ä»¶å†’æ³¡" class="headerlink" title="äº‹ä»¶å†’æ³¡"></a>äº‹ä»¶å†’æ³¡</h3><p>æŒ‰ç…§ DOM æ ‘é€çº§å‘ä¸Šï¼Œåœ¨æ¯ä¸€çº§èŠ‚ç‚¹ä¸Šéƒ½ä¼šå‘ç”Ÿï¼Œç›´åˆ° document</p><h3 id="äº‹ä»¶æ•è·"><a href="#äº‹ä»¶æ•è·" class="headerlink" title="äº‹ä»¶æ•è·"></a>äº‹ä»¶æ•è·</h3><p>é¡ºåºä¸äº‹ä»¶å†’æ³¡ç›¸å</p><h3 id="DOM-äº‹ä»¶æµ"><a href="#DOM-äº‹ä»¶æµ" class="headerlink" title="DOM äº‹ä»¶æµ"></a>DOM äº‹ä»¶æµ</h3><p>â€œDOM2 çº§äº‹ä»¶â€è§„å®šçš„äº‹ä»¶æµåŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µï¼š</p><ul><li>äº‹ä»¶æ•è·é˜¶æ®µ<ul><li>Document åˆ° ç›®æ ‡å…ƒç´ çš„ä¸Šä¸€çº§</li></ul></li><li>å¤„äºç›®æ ‡é˜¶æ®µ<ul><li>äº‹ä»¶åœ¨ç›®æ ‡å…ƒç´ ä¸Šå‘ç”Ÿï¼Œäº‹ä»¶å¤„ç†è¢«çœ‹æˆå†’æ³¡çš„ä¸€éƒ¨åˆ†</li></ul></li><li>äº‹ä»¶å†’æ³¡é˜¶æ®µ<ul><li>ç›®æ ‡å…ƒç´  åˆ° Document<blockquote><p>DOM2 è§„å®šæ•è·é˜¶æ®µä¸è®¾è®¡ç›®æ ‡ï¼Œä½†æµè§ˆå™¨å®ç°æ—¶éƒ½ä¼šå‡ºå‘äº‹ä»¶å¯¹è±¡ä¸Šçš„äº‹ä»¶</p></blockquote></li></ul></li></ul><h2 id="äº‹ä»¶å¤„ç†ç¨‹åº"><a href="#äº‹ä»¶å¤„ç†ç¨‹åº" class="headerlink" title="äº‹ä»¶å¤„ç†ç¨‹åº"></a>äº‹ä»¶å¤„ç†ç¨‹åº</h2><ul><li><strong>äº‹ä»¶</strong>å°±æ˜¯æŸç§åŠ¨ä½œï¼Œå¦‚ clickã€loadã€mouseovre</li><li><strong>äº‹ä»¶å¤„ç†ç¨‹åºï¼ˆäº‹ä»¶ä¾¦å¬å™¨ï¼‰</strong>å°±æ˜¯å“åº”äº‹ä»¶çš„å‡½æ•°ï¼Œä»¥ on å¼€å¤´ï¼Œonclickã€onload ç­‰</li></ul><h3 id="HTML-äº‹ä»¶å¤„ç†ç¨‹åº"><a href="#HTML-äº‹ä»¶å¤„ç†ç¨‹åº" class="headerlink" title="HTML äº‹ä»¶å¤„ç†ç¨‹åº"></a>HTML äº‹ä»¶å¤„ç†ç¨‹åº</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onclick</span>=<span class="string">"showMessage()"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">showMessage</span><span class="params">()</span> </span>&#123;â€¦â€¦&#125;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>å¦‚æœç”¨æˆ·åœ¨é¡µé¢è§£æäº‹ä»¶å¤„ç†ç¨‹åºä¹‹å‰ç‚¹å‡»å…ƒç´ ï¼Œä¼šå¼•å‘é”™è¯¯</li><li>æ‰©å±•ä½œç”¨åŸŸé“¾åœ¨ä¸åŒæµè§ˆå™¨ä¸­ä¼šå¯¼è‡´ä¸åŒç»“æœ</li><li>HTML ä¸ JavaScript ä»£ç ç´§å¯†è€¦åˆ</li></ul><h3 id="DOM0-çº§äº‹ä»¶å¤„ç†ç¨‹åº"><a href="#DOM0-çº§äº‹ä»¶å¤„ç†ç¨‹åº" class="headerlink" title="DOM0 çº§äº‹ä»¶å¤„ç†ç¨‹åº"></a>DOM0 çº§äº‹ä»¶å¤„ç†ç¨‹åº</h3><p>å°†ä¸€ä¸ªå‡½æ•°èµ‹å€¼ç»™äº‹ä»¶å¤„ç†ç¨‹åºå±æ€§</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"myBtn"</span>);</span><br><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;â€¦â€¦&#125;</span><br></pre></td></tr></table></figure><ul><li>ä»£ç è¿è¡Œä¹‹å‰ä¸ä¼šæŒ‡å®šäº‹ä»¶å¤„ç†ç¨‹åºï¼Œå¯èƒ½å¯¼è‡´ç‚¹å‡»æ— æ•ˆ</li><li>äº‹ä»¶å¤„ç†ç¨‹åºæ˜¯åœ¨å…ƒç´ çš„ä½œç”¨åŸŸä¸­è¿è¡Œçš„ï¼Œthis å¼•ç”¨å½“å‰å…ƒç´ </li><li>null å³åˆ é™¤</li></ul><h3 id="DOM2-çº§äº‹ä»¶å¤„ç†ç¨‹åº"><a href="#DOM2-çº§äº‹ä»¶å¤„ç†ç¨‹åº" class="headerlink" title="DOM2 çº§äº‹ä»¶å¤„ç†ç¨‹åº"></a>DOM2 çº§äº‹ä»¶å¤„ç†ç¨‹åº</h3><ul><li><p><code>addEventListener(a, b, c)</code></p></li><li><p><code>removeEventListener(a, b, c)</code></p><ul><li>a è¦å¤„ç†çš„äº‹ä»¶å</li><li>b ä½œä¸ºäº‹ä»¶å¤„ç†ç¨‹åºçš„å‡½æ•°</li><li>c ä¸€ä¸ªå¸ƒå°”å€¼<ul><li>true æ•è·é˜¶æ®µè°ƒç”¨äº‹ä»¶å¤„ç†ç¨‹åº</li><li>false å†’æ³¡é˜¶æ®µè°ƒç”¨äº‹ä»¶å¤„ç†ç¨‹åº â˜‘ï¸<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"myBtn"</span>);</span><br><span class="line">btn.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;, <span class="literal">false</span>&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul></li><li><p>äº‹ä»¶å¤„ç†ç¨‹åºæ˜¯åœ¨å…ƒç´ çš„ä½œç”¨åŸŸä¸­è¿è¡Œçš„ï¼Œthis å¼•ç”¨å½“å‰å…ƒç´ </p></li><li><p>å­˜åœ¨å¤šä¸ªäº‹ä»¶å¤„ç†ç¨‹åºä¼šæŒ‰ç…§æ·»åŠ é¡ºåºè§¦å‘</p></li><li><p>addEventListener()æ·»åŠ çš„äº‹ä»¶å¤„ç†ç¨‹åºåªèƒ½ä½¿ç”¨ removeEventListener()æ¥ç§»é™¤</p></li><li><p>addEventListener() æ·»åŠ çš„åŒ¿åå‡½æ•°æ— æ³•ç§»é™¤</p></li></ul><h3 id="IE-äº‹ä»¶å¤„ç†ç¨‹åº"><a href="#IE-äº‹ä»¶å¤„ç†ç¨‹åº" class="headerlink" title="IE äº‹ä»¶å¤„ç†ç¨‹åº"></a>IE äº‹ä»¶å¤„ç†ç¨‹åº</h3><ul><li><p><code>attachEvent(a, b)</code></p></li><li><p><code>detachEvent(a, b)</code></p><ul><li>a äº‹ä»¶å¤„ç†ç¨‹åºåç§°</li><li>b äº‹ä»¶å¤„ç†ç¨‹åºå‡½æ•°</li></ul></li><li><p>åªæ”¯æŒå†’æ³¡</p></li><li><p>äº‹ä»¶å¤„ç†ç¨‹åºçš„ä½œç”¨åŸŸæ˜¯å…¨å±€</p></li><li><p>å­˜åœ¨å¤šä¸ªäº‹ä»¶å¤„ç†ç¨‹åºä¼šæŒ‰ç…§æ·»åŠ é¡ºåºç›¸åçš„é¡ºåºè§¦å‘</p></li></ul><h3 id="è·¨æµè§ˆå™¨çš„äº‹ä»¶å¤„ç†ç¨‹åº"><a href="#è·¨æµè§ˆå™¨çš„äº‹ä»¶å¤„ç†ç¨‹åº" class="headerlink" title="è·¨æµè§ˆå™¨çš„äº‹ä»¶å¤„ç†ç¨‹åº"></a>è·¨æµè§ˆå™¨çš„äº‹ä»¶å¤„ç†ç¨‹åº</h3><p>å…³æ³¨å†’æ³¡é˜¶æ®µ</p><ul><li><code>addHandler(a, b, c)</code></li><li><code>EventUtil(a, b, c)</code><ul><li>a è¦æ“ä½œçš„å…ƒç´ </li><li>b äº‹ä»¶åç§°</li><li>c äº‹ä»¶å¤„ç†ç¨‹åº</li></ul></li></ul><h2 id="äº‹ä»¶å¯¹è±¡"><a href="#äº‹ä»¶å¯¹è±¡" class="headerlink" title="äº‹ä»¶å¯¹è±¡"></a>äº‹ä»¶å¯¹è±¡</h2><p>åœ¨è§¦å‘ DOM ä¸Šçš„æŸä¸ªäº‹ä»¶æ—¶ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªäº‹ä»¶å¯¹è±¡ eventï¼Œè¿™ä¸ªå¯¹è±¡ä¸­åŒ…å«ç€æ‰€æœ‰ä¸æ—¶é—´æœ‰å…³çš„ä¿¡æ¯</p><h3 id="DOM-ä¸­çš„äº‹ä»¶å¯¹è±¡"><a href="#DOM-ä¸­çš„äº‹ä»¶å¯¹è±¡" class="headerlink" title="DOM ä¸­çš„äº‹ä»¶å¯¹è±¡"></a>DOM ä¸­çš„äº‹ä»¶å¯¹è±¡</h3><p>å…¼å®¹ DOM çš„æµè§ˆå™¨ä¼šå°†ä¸€ä¸ª event å¯¹è±¡ä¼ å…¥åˆ°äº‹ä»¶å¤„ç†ç¨‹åºä¸­</p><ul><li><code>event.preventDefault()</code> é˜»æ­¢ç‰¹å®šäº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼Œå¦‚é“¾æ¥åˆ°é»˜è®¤è¡Œä¸ºæ˜¯å¯¼èˆªåˆ° href</li><li><code>event.stopPropagation()</code> åœæ­¢äº‹ä»¶åœ¨ DOM å±‚æ¬¡ä¸­çš„ä¼ æ’­ï¼ˆæ•è·æˆ–å†’æ³¡ï¼‰</li><li><code>event.eventPhase</code> ç¡®å®šäº‹ä»¶å½“å‰æ­£ä½äºäº‹ä»¶æµçš„å“ªä¸ªé˜¶æ®µ<ul><li>æ•è· 1</li><li>å¤„äºç›®æ ‡ 2</li><li>å†’æ³¡ 3</li></ul></li><li>äº‹ä»¶å¤„ç†å™¨æ‰§è¡ŒæœŸé—´ event å¯¹è±¡æ‰ä¼šå­˜åœ¨ï¼Œæ‰§è¡Œå®Œå°±é”€æ¯</li></ul><h3 id="IE-ä¸­çš„äº‹ä»¶å¯¹è±¡"><a href="#IE-ä¸­çš„äº‹ä»¶å¯¹è±¡" class="headerlink" title="IE ä¸­çš„äº‹ä»¶å¯¹è±¡"></a>IE ä¸­çš„äº‹ä»¶å¯¹è±¡</h3><h3 id="è·¨æµè§ˆå™¨çš„äº‹ä»¶å¯¹è±¡"><a href="#è·¨æµè§ˆå™¨çš„äº‹ä»¶å¯¹è±¡" class="headerlink" title="è·¨æµè§ˆå™¨çš„äº‹ä»¶å¯¹è±¡"></a>è·¨æµè§ˆå™¨çš„äº‹ä»¶å¯¹è±¡</h3><h2 id="äº‹ä»¶ç±»å‹"><a href="#äº‹ä»¶ç±»å‹" class="headerlink" title="äº‹ä»¶ç±»å‹"></a>äº‹ä»¶ç±»å‹</h2><h3 id="UIäº‹ä»¶"><a href="#UIäº‹ä»¶" class="headerlink" title="UIäº‹ä»¶"></a>UIäº‹ä»¶</h3><p>ä¸ä¸€å®šä¸ç”¨æˆ·æ“ä½œæœ‰å…³</p><ul><li><code>load</code> å½“é¡µé¢å®Œå…¨åŠ è½½ååœ¨ window ä¸Šè§¦å‘ï¼Œå½“å›¾åƒåŠ è½½å®Œæ¯•æ—¶åœ¨<img>å…ƒç´ ä¸Šé¢è§¦å‘</li><li><code>unload</code> å½“é¡µé¢å®Œå…¨å¸è½½ååœ¨ window ä¸Šè§¦å‘ï¼ˆé¡µé¢åˆ‡æ¢æ—¶ï¼‰</li><li><code>resize</code> æµè§ˆå™¨çª—å£è°ƒæ•´å¤§å°æ—¶ window ä¸Šè§¦å‘ï¼Œé€šè¿‡ js æˆ– body å…ƒç´ ä¸­ onresize æŒ‡å®šäº‹ä»¶å¤„ç†ç¨‹åº</li><li><code>scroll</code> window å¯¹è±¡ä¸Šå‘ç”Ÿï¼Œè¡¨ç¤ºé¡µé¢ä¸­ç›¸åº”å…ƒç´ çš„å˜åŒ–</li></ul><h3 id="ç„¦ç‚¹äº‹ä»¶"><a href="#ç„¦ç‚¹äº‹ä»¶" class="headerlink" title="ç„¦ç‚¹äº‹ä»¶"></a>ç„¦ç‚¹äº‹ä»¶</h3><p>è·å¾—æˆ–å¤±å»ç„¦ç‚¹æ—¶è§¦å‘</p><ul><li><code>document.hasFocus()</code></li><li><code>document.activeElement</code></li></ul><hr><ul><li><code>blur</code> å…ƒç´ å¤±å»ç„¦ç‚¹æ—¶è§¦å‘ï¼Œä¸å†’æ³¡</li><li><code>focus</code> è·å¾—ç„¦ç‚¹æ—¶è§¦å‘ï¼Œä¸å†’æ³¡</li><li><code>focusin</code> è·å¾—ç„¦ç‚¹æ—¶ï¼Œå†’æ³¡</li><li><code>focusout</code> å¤±å»ç„¦ç‚¹æ—¶ï¼Œå†’æ³¡</li></ul><h3 id="é¼ æ ‡ä¸æ»šè½®äº‹ä»¶"><a href="#é¼ æ ‡ä¸æ»šè½®äº‹ä»¶" class="headerlink" title="é¼ æ ‡ä¸æ»šè½®äº‹ä»¶"></a>é¼ æ ‡ä¸æ»šè½®äº‹ä»¶</h3><ul><li><code>click</code> å•å‡»æˆ–å›è½¦</li><li><code>dblclick</code> åŒå‡»</li><li><code>mousedown</code> æŒ‰ä¸‹ä»»æ„é¼ æ ‡æŒ‰é’®</li><li><code>mouseup</code> é‡Šæ”¾é¼ æ ‡æŒ‰é’®</li><li><code>mouseenter</code> å…‰æ ‡ä»å¤–éƒ¨é¦–æ¬¡ç§»åŠ¨åˆ°å…ƒç´ èŒƒå›´ä¹‹å†…ï¼Œä¸å†’æ³¡ï¼Œç§»åŠ¨åˆ°åä»£å…ƒç´ ä¸Šä¸ä¼šè§¦å‘</li><li><code>mouseleave</code> å…ƒç´ ä¸Šçš„å…‰æ ‡ç§»åŠ¨åˆ°å…ƒç´ èŒƒå›´ä¹‹å¤–ï¼Œä¸å†’æ³¡ï¼Œç§»åŠ¨åˆ°åä»£å…ƒç´ ä¸è§¦å‘</li><li><code>mousemove</code> å…‰æ ‡åœ¨å…ƒç´ å†…éƒ¨ç§»åŠ¨æ—¶é‡å¤è§¦å‘</li><li><code>mouseout</code> é¼ æ ‡ä½äºä¸€ä¸ªå…ƒç´ ä¸Šæ–¹ï¼Œç§»å…¥å¦ä¸€ä¸ªå…ƒç´ æ—¶è§¦å‘ã€‚å¦ä¸€ä¸ªå…ƒç´ å¯èƒ½æ˜¯åŸæ¥å…ƒç´ çš„å¤–éƒ¨æˆ–å­å…ƒç´ </li><li><code>mouseover</code> å…‰æ ‡ä½äºä¸€ä¸ªå…ƒç´ å¤–éƒ¨ï¼Œé¦–æ¬¡ç§»å…¥å¦ä¸€ä¸ªå…ƒç´ è¾¹ç•Œä¹‹å†…</li></ul><hr><ul><li>å®¢æˆ·åŒºåæ ‡ä½ç½®<ul><li><code>event.clientX</code></li><li><code>event.clientY</code></li></ul></li><li>é¡µé¢åæ ‡ä½ç½®<ul><li><code>event.pageX</code></li><li><code>event.pageY</code></li></ul></li><li>å±å¹•åæ ‡ä½ç½®<ul><li><code>event.screenX</code></li><li><code>event.screenY</code></li></ul></li><li>ä¿®æ”¹é”®<ul><li>click + é”®ç›˜ -&gt; å±æ€§ï¼ˆBooleanï¼‰<ul><li>Shift <code>shiftKey</code></li><li>Ctrl <code>ctrlKey</code></li><li>Alt <code>altKey</code></li><li>Meta(Windows/Cmd) <code>metaKey</code></li></ul></li></ul></li><li>ç›¸å…³å…ƒç´ <ul><li>é’ˆå¯¹ <code>moseover</code>ã€<code>mouseout</code><ul><li><code>relatedTarget</code> å±æ€§</li></ul></li></ul></li><li>é¼ æ ‡æŒ‰é’®<ul><li>é’ˆå¯¹ <code>mousedown</code>ã€<code>mouseup</code><ul><li><code>button</code> å±æ€§<ul><li>0 ä¸»é¼ æ ‡</li><li>1 æ»šè½®</li><li>2 æ¬¡é¼ æ ‡</li></ul></li></ul></li></ul></li><li>é¼ æ ‡æ»šè½®äº‹ä»¶<ul><li><code>mousewheel</code><ul><li>å†’æ³¡</li><li><code>wheelDelta</code> å±æ€§</li></ul></li></ul></li></ul><h3 id="é”®ç›˜ä¸æ–‡æœ¬äº‹ä»¶"><a href="#é”®ç›˜ä¸æ–‡æœ¬äº‹ä»¶" class="headerlink" title="é”®ç›˜ä¸æ–‡æœ¬äº‹ä»¶"></a>é”®ç›˜ä¸æ–‡æœ¬äº‹ä»¶</h3><ul><li><code>keydown</code> ä»»æ„é”®</li><li><code>keypress</code> å­—ç¬¦é”®</li><li><code>keyup</code> é‡Šæ”¾æ¡ˆä»¶</li></ul><hr><ul><li><code>event.keyCode</code> é”®ç ï¼ŒASCII å°å†™å­—æ¯ç›¸åŒ</li><li><code>event.charCode</code> å­—ç¬¦ç¼–ç ï¼Œé’ˆå¯¹ keypress</li></ul><h3 id="å˜åŠ¨äº‹ä»¶"><a href="#å˜åŠ¨äº‹ä»¶" class="headerlink" title="å˜åŠ¨äº‹ä»¶"></a>å˜åŠ¨äº‹ä»¶</h3><ul><li>åˆ é™¤èŠ‚ç‚¹</li><li>æ’å…¥èŠ‚ç‚¹</li></ul><h3 id="HTML5-äº‹ä»¶"><a href="#HTML5-äº‹ä»¶" class="headerlink" title="HTML5 äº‹ä»¶"></a>HTML5 äº‹ä»¶</h3><ul><li><code>contextmenu</code> å†’æ³¡</li><li><code>beforeunload</code></li><li><code>DOMContentLoaded</code></li><li><code>readystatechange</code><ul><li>uninitialized</li><li>loading</li><li>loaded</li><li>interactive</li><li>complete</li></ul></li><li><code>pageshow</code> <code>pagehide</code></li><li><code>hashchange</code></li></ul><h3 id="è®¾å¤‡äº‹ä»¶"><a href="#è®¾å¤‡äº‹ä»¶" class="headerlink" title="è®¾å¤‡äº‹ä»¶"></a>è®¾å¤‡äº‹ä»¶</h3><p>æ™ºèƒ½æ‰‹æœºå’Œå¹³æ¿ç”µè„‘</p><h3 id="è§¦æ‘¸ä¸æ‰‹åŠ¿"><a href="#è§¦æ‘¸ä¸æ‰‹åŠ¿" class="headerlink" title="è§¦æ‘¸ä¸æ‰‹åŠ¿"></a>è§¦æ‘¸ä¸æ‰‹åŠ¿</h3><h2 id="å†…å­˜å’Œæ€§èƒ½"><a href="#å†…å­˜å’Œæ€§èƒ½" class="headerlink" title="å†…å­˜å’Œæ€§èƒ½"></a>å†…å­˜å’Œæ€§èƒ½</h2><p>æ·»åŠ åˆ°é¡µé¢ä¸Š çš„äº‹ä»¶å¤„ç†ç¨‹åºæ•°é‡å°†ç›´æ¥å…³ç³»åˆ°é¡µé¢çš„æ•´ä½“è¿è¡Œæ€§èƒ½</p><ul><li>å‡½æ•°å¯¹è±¡å ç”¨å†…å­˜</li><li>æŒ‡å®šäº‹ä»¶å¤„ç†ç¨‹åºå¯¼è‡´çš„ DOM è®¿é—®</li></ul><h3 id="äº‹ä»¶å§”æ‰˜"><a href="#äº‹ä»¶å§”æ‰˜" class="headerlink" title="äº‹ä»¶å§”æ‰˜"></a>äº‹ä»¶å§”æ‰˜</h3><p>åˆ©ç”¨äº‹ä»¶å†’æ³¡ï¼ŒåªæŒ‡å®šä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åº</p><h3 id="ç§»é™¤äº‹ä»¶å¤„ç†ç¨‹åº"><a href="#ç§»é™¤äº‹ä»¶å¤„ç†ç¨‹åº" class="headerlink" title="ç§»é™¤äº‹ä»¶å¤„ç†ç¨‹åº"></a>ç§»é™¤äº‹ä»¶å¤„ç†ç¨‹åº</h3><p>å°†äº‹ä»¶å¤„ç†ç¨‹åºæŒ‡å®šç»™å…ƒç´ æ—¶ï¼Œè¿è¡Œä¸­çš„æµè§ˆå™¨ä»£ç ä¸æ”¯æŒé¡µé¢äº¤äº’çš„ JavaScript ä»£ç ä¹‹é—´å°± ä¼šå»ºç«‹ä¸€ä¸ªè¿æ¥ã€‚è¿æ¥è¶Šå¤šï¼Œé¡µé¢æ‰§è¡Œèµ·æ¥å°±è¶Šæ…¢ã€‚</p><h2 id="æ¨¡æ‹Ÿäº‹ä»¶"><a href="#æ¨¡æ‹Ÿäº‹ä»¶" class="headerlink" title="æ¨¡æ‹Ÿäº‹ä»¶"></a>æ¨¡æ‹Ÿäº‹ä»¶</h2><p>js è§¦å‘äº‹ä»¶</p><h3 id="DOM-ä¸­çš„äº‹ä»¶æ¨¡æ‹Ÿ"><a href="#DOM-ä¸­çš„äº‹ä»¶æ¨¡æ‹Ÿ" class="headerlink" title="DOM ä¸­çš„äº‹ä»¶æ¨¡æ‹Ÿ"></a>DOM ä¸­çš„äº‹ä»¶æ¨¡æ‹Ÿ</h3><ul><li><p><code>document.createEvent()</code></p><ul><li>UIEvents</li><li>MouseEvents</li><li>MutationsEvents</li><li>HTMLEvents</li></ul></li><li><p>æ¨¡æ‹Ÿé¼ æ ‡</p></li><li><p>æ¨¡æ‹Ÿé”®ç›˜</p></li><li><p>æ¨¡æ‹Ÿå…¶ä»–</p></li></ul><h3 id="IE-ä¸­"><a href="#IE-ä¸­" class="headerlink" title="IE ä¸­"></a>IE ä¸­</h3>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScripté«˜çº§ç¨‹åºè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬åç«  DOM &amp; ç¬¬åä¸€ç«  DOM æ‰©å±• &amp; ç¬¬åäºŒç«  DOM2 å’Œ DOM3</title>
      <link href="/2020/03/04/%E7%AC%AC10-12%E7%AB%A0-DOM%E7%9B%B8%E5%85%B3/"/>
      <url>/2020/03/04/%E7%AC%AC10-12%E7%AB%A0-DOM%E7%9B%B8%E5%85%B3/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬¬åç« -DOM"><a href="#ç¬¬åç« -DOM" class="headerlink" title="ç¬¬åç«  DOM"></a>ç¬¬åç«  DOM</h1><ul><li>é’ˆå¯¹ HTML å’Œ XML æ–‡æ¡£çš„ä¸€ä¸ª API</li></ul><h2 id="èŠ‚ç‚¹å±‚æ¬¡"><a href="#èŠ‚ç‚¹å±‚æ¬¡" class="headerlink" title="èŠ‚ç‚¹å±‚æ¬¡"></a>èŠ‚ç‚¹å±‚æ¬¡</h2><ul><li><strong>æ–‡æ¡£å…ƒç´ </strong>æ˜¯æœ€å¤–å±‚å…ƒç´ ï¼Œæ¯ä¸ªæ–‡æ¡£åªæœ‰ä¸€ä¸ªæ–‡æ¡£å…ƒç´ ï¼ŒHTML ä¸­æ˜¯ <code>html</code></li></ul><h3 id="Node-ç±»å‹"><a href="#Node-ç±»å‹" class="headerlink" title="Node ç±»å‹"></a>Node ç±»å‹</h3><ul><li>js æ‰€æœ‰èŠ‚ç‚¹ç±»å‹éƒ½ç»§æ‰¿è‡ª Node ç±»å‹</li><li><code>nodeType</code> å€¼ä¸º node çš„ç±»å‹å¸¸é‡ï¼ˆ12ç§ï¼‰<ul><li>å…ƒç´ èŠ‚ç‚¹ Node.ELEMENT_NODE(1)</li><li>æ–‡æœ¬èŠ‚ç‚¹ Node.TEXT_NODE(3)</li></ul></li></ul><h5 id="nodeName-å’Œ-nodeValue-å±æ€§"><a href="#nodeName-å’Œ-nodeValue-å±æ€§" class="headerlink" title="nodeName å’Œ nodeValue å±æ€§"></a>nodeName å’Œ nodeValue å±æ€§</h5><ul><li><code>nodeName</code> å…ƒç´ æ ‡ç­¾å</li><li><code>nodeValue</code> å…ƒç´ çš„å€¼</li></ul><h5 id="èŠ‚ç‚¹å…³ç³»"><a href="#èŠ‚ç‚¹å…³ç³»" class="headerlink" title="èŠ‚ç‚¹å…³ç³»"></a>èŠ‚ç‚¹å…³ç³»</h5><p><img src="/.com//%E8%8A%82%E7%82%B9%E5%85%B3%E7%B3%BB.png" alt="èŠ‚ç‚¹å…³ç³».png"></p><ul><li><code>hashChildNodes()</code> </li><li><code>ownerDocument</code> æŒ‡å‘æ–‡æ¡£èŠ‚ç‚¹ï¼ˆæœ€å¤–å±‚èŠ‚ç‚¹ï¼‰</li></ul><h5 id="æ“ä½œèŠ‚ç‚¹"><a href="#æ“ä½œèŠ‚ç‚¹" class="headerlink" title="æ“ä½œèŠ‚ç‚¹"></a>æ“ä½œèŠ‚ç‚¹</h5><ul><li><code>appendChild(newNode)</code> childNodes åˆ—è¡¨æœ«å°¾æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹<ul><li>å¦‚æœ newNode å·²ç»å­˜åœ¨ DOM æ ‘ä¸­ï¼Œä¼šç§»åŠ¨ä½ç½®ï¼Œè€Œä¸æ˜¯æ–°å»º</li></ul></li><li><code>insertBefore(NewNode, Node)</code> å°† NewNode æ’å…¥åˆ° Node å‰é¢çš„ä½ç½®</li><li><code>replaceChild(NewNode, Node)</code></li><li><code>removeChild(Node)</code><br>ä»¥ä¸Šæ–¹æ³•é€šè¿‡çˆ¶èŠ‚ç‚¹è°ƒç”¨</li></ul><hr><p>ä»¥ä¸‹æ–¹æ³•æ‰€æœ‰èŠ‚ç‚¹éƒ½æœ‰</p><ul><li><code>cloneNode(Boolean)</code><ul><li>true æ·±å¤åˆ¶ï¼Œæ•´ä¸ªå­èŠ‚ç‚¹æ ‘</li><li>false æµ…å¤åˆ¶ï¼ŒèŠ‚ç‚¹æœ¬èº«</li><li>è¿”å›çš„èŠ‚ç‚¹å±äºæ–‡æ¡£ï¼Œä½†æ²¡æœ‰çˆ¶èŠ‚ç‚¹</li></ul></li><li><code>normalize()</code> å¤„ç†æ–‡æ¡£èŠ‚ç‚¹</li></ul><h3 id="Document-ç±»å‹"><a href="#Document-ç±»å‹" class="headerlink" title="Document ç±»å‹"></a>Document ç±»å‹</h3><p>æµè§ˆå™¨ä¸­ document å¯¹è±¡æ˜¯ <code>HTMLDocument</code>ï¼ˆç»§æ‰¿è‡ª Document ç±»å‹ï¼‰çš„ä¸€ä¸ªå®ä¾‹ï¼Œæ˜¯ window å¯¹è±¡çš„ä¸€ä¸ªå±æ€§</p><ul><li>nodeType = 9</li><li>nodeName = â€œ#documentâ€</li><li>nodeValue = null</li><li>parentNode = null</li><li>ownerDocument = null</li><li>å­èŠ‚ç‚¹å¯èƒ½æ˜¯ä¸€ä¸ª DocumentType(æœ€å¤šä¸€ä¸ª)ã€Element(æœ€å¤šä¸€ä¸ª)ã€ProcessingInstruction æˆ– Comment</li></ul><h5 id="æ–‡æ¡£çš„å­èŠ‚ç‚¹"><a href="#æ–‡æ¡£çš„å­èŠ‚ç‚¹" class="headerlink" title="æ–‡æ¡£çš„å­èŠ‚ç‚¹"></a>æ–‡æ¡£çš„å­èŠ‚ç‚¹</h5><ul><li><code>document.documentElement</code> å§‹ç»ˆæŒ‡å‘ HTML é¡µé¢ä¸­çš„ <code>html</code> å…ƒç´ </li><li><code>document.body</code> æŒ‡å‘ <code>body</code> å…ƒç´ </li><li><code>document.doctype</code> </li></ul><h5 id="æ–‡æ¡£ä¿¡æ¯"><a href="#æ–‡æ¡£ä¿¡æ¯" class="headerlink" title="æ–‡æ¡£ä¿¡æ¯"></a>æ–‡æ¡£ä¿¡æ¯</h5><p>æµè§ˆå™¨ä¸“ä¾›å±æ€§ï¼Œå­˜åœ¨ HTTP å¤´éƒ¨</p><ul><li><code>document.title</code></li><li><code>document.URL</code></li><li><code>document.domain</code></li><li><code>document.referrer</code></li></ul><h5 id="æŸ¥æ‰¾å…ƒç´ "><a href="#æŸ¥æ‰¾å…ƒç´ " class="headerlink" title="æŸ¥æ‰¾å…ƒç´ "></a>æŸ¥æ‰¾å…ƒç´ </h5><ul><li><code>document.getElementById()</code> å¤šä¸ªå…ƒç´ ç›¸åŒ id åˆ™è¿”å›ç¬¬ä¸€ä¸ª</li><li><code>document.getElementsByTagName()</code> è¿”å› NodeListï¼ŒHTML æ–‡æ¡£ä¸­è¿”å› <code>HTMLCollection</code> å¯¹è±¡</li><li><code>document.getElementsByName()</code> è¿”å› <code>HTMLCollection</code> å¯¹è±¡</li></ul><h5 id="ç‰¹æ®Šé›†åˆ"><a href="#ç‰¹æ®Šé›†åˆ" class="headerlink" title="ç‰¹æ®Šé›†åˆ"></a>ç‰¹æ®Šé›†åˆ</h5><ul><li><code>document.anchors</code></li><li><code>document.forms</code></li><li><code>document.images</code></li><li><code>document.links</code> å¸¦ href ç‰¹æ€§çš„ a å…ƒç´ </li></ul><h5 id="æ–‡æ¡£å†™å…¥"><a href="#æ–‡æ¡£å†™å…¥" class="headerlink" title="æ–‡æ¡£å†™å…¥"></a>æ–‡æ¡£å†™å…¥</h5><ul><li><code>document.write()</code></li><li><code>document.writeln()</code></li><li><code>document.open()</code> æ‰“å¼€ç½‘é¡µè¾“å‡ºæµ</li><li><code>document.close()</code> å…³é—­ç½‘é¡µè¾“å‡ºæµ</li></ul><h3 id="Element-ç±»å‹"><a href="#Element-ç±»å‹" class="headerlink" title="Element ç±»å‹"></a>Element ç±»å‹</h3><ul><li>nodeType = 1</li><li>nodeName = å…ƒç´ çš„æ ‡ç­¾å</li><li>nodeValue = null</li><li>parentNode å¯èƒ½æ˜¯ Document æˆ– Element</li><li>å­èŠ‚ç‚¹å¯èƒ½æ˜¯ Elementã€Textã€Commentã€ProcessingInstructionã€CDATASection æˆ– EntityReference</li></ul><p><code>nodeName</code> å’Œ <code>tagName</code> å±æ€§éƒ½æ˜¯æ ‡ç­¾å</p><h5 id="HTML-å…ƒç´ "><a href="#HTML-å…ƒç´ " class="headerlink" title="HTML å…ƒç´ "></a>HTML å…ƒç´ </h5><p>HTMLElement ç»§æ‰¿ Element å¹¶æ·»åŠ äº†ä¸€äº›å±æ€§</p><ul><li><code>id</code></li><li><code>title</code></li><li><code>lang</code></li><li><code>dir</code></li><li><code>className</code></li></ul><h5 id="æ“ä½œç‰¹æ€§"><a href="#æ“ä½œç‰¹æ€§" class="headerlink" title="æ“ä½œç‰¹æ€§"></a>æ“ä½œç‰¹æ€§</h5><ul><li><code>getAttribute(â€˜classâ€™)</code></li><li><code>setAttribute(â€˜classâ€™, &#39;ft&#39;)</code></li><li><code>removeAttribute(&#39;class&#39;)</code></li></ul><h5 id="attributes-å±æ€§"><a href="#attributes-å±æ€§" class="headerlink" title="attributes å±æ€§"></a>attributes å±æ€§</h5><p><code>attributes</code> å±æ€§ä¸­åŒ…å«ä¸€ä¸ª <code>NamedNodeMap</code> å¯¹è±¡ï¼Œå…ƒç´ æ¯ä¸ªç‰¹æ€§éƒ½ç”±ä¸€ä¸ª Attr èŠ‚ç‚¹è¡¨ç¤ºï¼ŒèŠ‚ç‚¹ä¿å­˜åœ¨ <code>NamedNodeMap</code> å¯¹è±¡ä¸­<br>å¯¹è±¡æ–¹æ³•</p><ul><li><code>getNamedItem(name)</code></li><li><code>removeNamedItem(name)</code></li><li><code>setNamedItem(node)</code></li><li><code>item(pos)</code></li></ul><p>èŠ‚ç‚¹å±æ€§</p><ul><li><code>nodeName</code></li><li><code>nodeValue</code></li></ul><h5 id="åˆ›å»ºå…ƒç´ "><a href="#åˆ›å»ºå…ƒç´ " class="headerlink" title="åˆ›å»ºå…ƒç´ "></a>åˆ›å»ºå…ƒç´ </h5><ul><li><code>document.createElement(æ ‡ç­¾å)</code><br>åˆ›å»ºå®Œæˆåéœ€è¦è°ƒç”¨å‰é¢ä»‹ç»çš„æ–¹æ³•å°†å…¶æ·»åŠ åˆ°æ–‡æ¡£æ ‘ä¸­</li></ul><h3 id="Text-ç±»å‹ï¼ˆå¼€å§‹å’Œç»“æŸæ ‡ç­¾ä¸­çš„æ–‡æœ¬ï¼‰"><a href="#Text-ç±»å‹ï¼ˆå¼€å§‹å’Œç»“æŸæ ‡ç­¾ä¸­çš„æ–‡æœ¬ï¼‰" class="headerlink" title="Text ç±»å‹ï¼ˆå¼€å§‹å’Œç»“æŸæ ‡ç­¾ä¸­çš„æ–‡æœ¬ï¼‰"></a>Text ç±»å‹ï¼ˆå¼€å§‹å’Œç»“æŸæ ‡ç­¾ä¸­çš„æ–‡æœ¬ï¼‰</h3><ul><li>nodeType = 3</li><li>nodeName = #text</li><li>nodeValue èŠ‚ç‚¹æ‰€åŒ…å«çš„æ–‡æœ¬</li><li>parentNode æ˜¯ Element</li><li>æ²¡æœ‰å­èŠ‚ç‚¹</li></ul><hr><ul><li><code>document.createTextNode()</code> åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹</li><li><code>normalize()</code> ç›¸é‚»çš„æ–‡æœ¬èŠ‚ç‚¹ä¹‹é—´ä¸å­˜åœ¨ç©ºæ ¼ï¼Œå¯ä»¥å°†æ‰€æœ‰ç›¸é‚»çš„æ–‡æœ¬èŠ‚ç‚¹æ‹¼æ¥èµ·æ¥</li><li><code>splitText()</code> åˆ†å‰²æ–‡æœ¬èŠ‚ç‚¹</li></ul><h3 id="Comment-ç±»å‹"><a href="#Comment-ç±»å‹" class="headerlink" title="Comment ç±»å‹"></a>Comment ç±»å‹</h3><ul><li>nodeType = 8</li><li>nodeName = #comment</li><li>nodeValue = æ³¨é‡Šçš„å†…å®¹</li><li>parentNode å¯èƒ½æ˜¯ Document æˆ– Element</li><li>æ²¡æœ‰å­èŠ‚ç‚¹</li></ul><h3 id="CDATASection-ç±»å‹"><a href="#CDATASection-ç±»å‹" class="headerlink" title="CDATASection ç±»å‹"></a>CDATASection ç±»å‹</h3><ul><li>é’ˆå¯¹ XML æ–‡æ¡£ï¼Œè¡¨ç¤º CDATA åŒºåŸŸ</li><li>æµè§ˆå™¨ä¼šè§£æä¸º Comment æˆ– Element</li></ul><h3 id="DocumentType-ç±»å‹"><a href="#DocumentType-ç±»å‹" class="headerlink" title="DocumentType ç±»å‹"></a>DocumentType ç±»å‹</h3><p>åŒ…å« doctype æœ‰å…³çš„ä¿¡æ¯</p><h3 id="DocumentFragment-ç±»å‹"><a href="#DocumentFragment-ç±»å‹" class="headerlink" title="DocumentFragment ç±»å‹"></a>DocumentFragment ç±»å‹</h3><h3 id="Attr-ç±»å‹"><a href="#Attr-ç±»å‹" class="headerlink" title="Attr ç±»å‹"></a>Attr ç±»å‹</h3><p>å…ƒç´ çš„ç‰¹æ€§ï¼Œä¸æ˜¯ DOM æ–‡æ¡£æ ‘çš„ä¸€éƒ¨åˆ†</p><h2 id="DOM-æ“ä½œæŠ€æœ¯"><a href="#DOM-æ“ä½œæŠ€æœ¯" class="headerlink" title="DOM æ“ä½œæŠ€æœ¯"></a>DOM æ“ä½œæŠ€æœ¯</h2><h3 id="åŠ¨æ€è„šæœ¬"><a href="#åŠ¨æ€è„šæœ¬" class="headerlink" title="åŠ¨æ€è„šæœ¬"></a>åŠ¨æ€è„šæœ¬</h3><p>DOM æ“ä½œ script æ ‡ç­¾</p><h3 id="åŠ¨æ€æ ·å¼"><a href="#åŠ¨æ€æ ·å¼" class="headerlink" title="åŠ¨æ€æ ·å¼"></a>åŠ¨æ€æ ·å¼</h3><p>DOM æ“ä½œ link æ ‡ç­¾ å’Œ style æ ‡ç­¾</p><h3 id="æ“ä½œè¡¨æ ¼"><a href="#æ“ä½œè¡¨æ ¼" class="headerlink" title="æ“ä½œè¡¨æ ¼"></a>æ“ä½œè¡¨æ ¼</h3><p>DOM æ“ä½œ table æ ‡ç­¾</p><h3 id="ä½¿ç”¨-NodeList"><a href="#ä½¿ç”¨-NodeList" class="headerlink" title="ä½¿ç”¨ NodeList"></a>ä½¿ç”¨ NodeList</h3><ul><li><code>NodeList</code></li><li><code>NamedNodeMap</code></li><li><code>HTMLCollection</code><br>æ¯å½“æ–‡æ¡£ç»“æ„å‘ç”Ÿå˜åŒ–ï¼Œå®ƒä»¬éƒ½ä¼šæ›´æ–°ï¼Œä¿å­˜æœ€æ–°çš„ä¿¡æ¯</li></ul><blockquote><p>ç†è§£ DOM çš„å…³é”®ï¼Œå°±æ˜¯ç†è§£ DOM å¯¹æ€§èƒ½çš„å½±å“ã€‚DOM æ“ä½œå¾€å¾€æ˜¯ JavaScript ç¨‹åºä¸­å¼€é”€æœ€å¤§çš„ éƒ¨åˆ†ï¼Œè€Œå› è®¿é—® NodeList å¯¼è‡´çš„é—®é¢˜ä¸ºæœ€å¤šã€‚NodeList å¯¹è±¡éƒ½æ˜¯â€œåŠ¨æ€çš„â€ï¼Œè¿™å°±æ„å‘³ç€æ¯æ¬¡è®¿é—® NodeList å¯¹è±¡ï¼Œéƒ½ä¼šè¿è¡Œä¸€æ¬¡æŸ¥è¯¢ã€‚æœ‰é‰´äºæ­¤ï¼Œæœ€å¥½çš„åŠæ³•å°±æ˜¯å°½é‡å‡å°‘ DOM æ“ä½œã€‚</p></blockquote><h1 id="ç¬¬åä¸€ç« -DOM-æ‰©å±•"><a href="#ç¬¬åä¸€ç« -DOM-æ‰©å±•" class="headerlink" title="ç¬¬åä¸€ç«  DOM æ‰©å±•"></a>ç¬¬åä¸€ç«  DOM æ‰©å±•</h1><h2 id="é€‰æ‹©ç¬¦-API"><a href="#é€‰æ‹©ç¬¦-API" class="headerlink" title="é€‰æ‹©ç¬¦ API"></a>é€‰æ‹©ç¬¦ API</h2><ul><li>å‚æ•°ä¸º CSS é€‰æ‹©ç¬¦<ul><li><code>querySelector()</code> è¿”å›å…ƒç´ </li><li><code>querySelectorAll()</code> è¿”å› NodeList å¿«ç…§</li></ul></li></ul><h2 id="å…ƒç´ éå†"><a href="#å…ƒç´ éå†" class="headerlink" title="å…ƒç´ éå†"></a>å…ƒç´ éå†</h2><ul><li><code>childElementCount</code> ä¸åŒ…æ‹¬æ–‡æœ¬èŠ‚ç‚¹å’Œæ³¨é‡Š</li><li><code>firstElementChild</code></li><li><code>lastElementChild</code></li><li><code>previousElementSibling</code></li><li><code>nextElementSibling</code></li></ul><h2 id="HTML5"><a href="#HTML5" class="headerlink" title="HTML5"></a>HTML5</h2><h3 id="ä¸ç±»ç›¸å…³çš„æ‰©å……"><a href="#ä¸ç±»ç›¸å…³çš„æ‰©å……" class="headerlink" title="ä¸ç±»ç›¸å…³çš„æ‰©å……"></a>ä¸ç±»ç›¸å…³çš„æ‰©å……</h3><ul><li><code>getElementsByClassName()</code></li><li><code>classList</code> DOMTokenList çš„å®ä¾‹</li></ul><h3 id="ç„¦ç‚¹ç®¡ç†"><a href="#ç„¦ç‚¹ç®¡ç†" class="headerlink" title="ç„¦ç‚¹ç®¡ç†"></a>ç„¦ç‚¹ç®¡ç†</h3><ul><li><code>activeElement</code> å½“å‰è·å¾—ç„¦ç‚¹çš„å…ƒç´ </li><li><code>hasFocus()</code> æ–‡æ¡£æ˜¯å¦è·å¾—ç„¦ç‚¹ï¼ˆç”¨æˆ·æ˜¯å¦æ­£åœ¨ä¸é¡µé¢äº¤äº’ï¼‰</li></ul><h3 id="HTMLDocument-çš„å˜åŒ–"><a href="#HTMLDocument-çš„å˜åŒ–" class="headerlink" title="HTMLDocument çš„å˜åŒ–"></a>HTMLDocument çš„å˜åŒ–</h3><ul><li><code>readyState</code> å±æ€§<ul><li>loading</li><li>complete</li></ul></li><li><code>compatMode</code> å…¼å®¹æ¨¡å¼<ul><li>CSS1Compat æ ‡å‡†æ¨¡å¼</li><li>BackCompat æ··æ‚æ¨¡å¼</li></ul></li><li><code>head</code> å¼•ç”¨ head æ ‡ç­¾å…ƒç´ </li></ul><h3 id="å­—ç¬¦é›†å±æ€§"><a href="#å­—ç¬¦é›†å±æ€§" class="headerlink" title="å­—ç¬¦é›†å±æ€§"></a>å­—ç¬¦é›†å±æ€§</h3><ul><li><code>charset</code> é»˜è®¤ â€UTF-16â€œ</li><li><code>defaultCharset</code> æ ¹æ®é»˜è®¤æµè§ˆå™¨åŠæ“ä½œç³»ç»Ÿè®¾ç½®</li></ul><h3 id="è‡ªå®šä¹‰æ•°æ®å±æ€§"><a href="#è‡ªå®šä¹‰æ•°æ®å±æ€§" class="headerlink" title="è‡ªå®šä¹‰æ•°æ®å±æ€§"></a>è‡ªå®šä¹‰æ•°æ®å±æ€§</h3><ul><li>æ·»åŠ å‰ç¼€ data-</li><li><code>dataset</code> å±æ€§è®¿é—®è‡ªå®šä¹‰å±æ€§çš„å€¼<ul><li>å€¼æ˜¯ DOMStringMap çš„ä¸€ä¸ªå®ä¾‹</li><li>ä¹Ÿå°±æ˜¯ä¸€ä¸ªåå€¼å¯¹çš„æ˜ å°„</li></ul></li></ul><h3 id="æ’å…¥æ ‡è®°"><a href="#æ’å…¥æ ‡è®°" class="headerlink" title="æ’å…¥æ ‡è®°"></a>æ’å…¥æ ‡è®°</h3><ul><li><code>innerHTML</code> å±æ€§</li><li><code>outerHTML</code> å±æ€§</li><li><code>insertAdjacentHTML()</code> æ–¹æ³•<ul><li>params1 æ’å…¥ä½ç½®<ul><li>beforebegin</li><li>afterbegin</li><li>beforeend</li><li>afterend</li></ul></li><li>params2 HTML æ–‡æœ¬</li></ul></li><li>å†…å­˜ä¸æ€§èƒ½é—®é¢˜</li></ul><h3 id="scrollIntoView-æ–¹æ³•"><a href="#scrollIntoView-æ–¹æ³•" class="headerlink" title="scrollIntoView() æ–¹æ³•"></a>scrollIntoView() æ–¹æ³•</h3><p>è®©å½“å‰çš„å…ƒç´ æ»šåŠ¨åˆ°æµè§ˆå™¨çª—å£çš„å¯è§†åŒºåŸŸå†…</p><h1 id="ç¬¬åäºŒç« -DOM2-å’Œ-DOM3"><a href="#ç¬¬åäºŒç« -DOM2-å’Œ-DOM3" class="headerlink" title="ç¬¬åäºŒç«  DOM2 å’Œ DOM3"></a>ç¬¬åäºŒç«  DOM2 å’Œ DOM3</h1><p>DOM1 ä¸»è¦å®šä¹‰çš„æ˜¯ HTML å’Œ XML æ–‡æ¡£çš„åº•å±‚ç»“æ„ï¼ŒDOM2 å’Œ DOM3 åˆ†ä¸ºè®¸å¤šæ¨¡å—ï¼Œåˆ†è¡¨æè¿° DOM çš„æŸä¸ªéå¸¸å…·ä½“çš„å­é›†ï¼Œç›®çš„åœ¨äºæ‰©å±• DOM API</p><h2 id="æ ·å¼"><a href="#æ ·å¼" class="headerlink" title="æ ·å¼"></a>æ ·å¼</h2><p>å®šä¹‰æ ·å¼</p><ul><li><code>&lt;link/&gt;</code> å¤–éƒ¨æ ·å¼è¡¨</li><li><code>&lt;style/&gt;</code> åµŒå…¥å¼æ ·å¼</li><li><code>style ç‰¹æ€§</code> é’ˆå¯¹ç‰¹å®šå…ƒç´ çš„æ ·å¼</li></ul><h3 id="è®¿é—®å…ƒç´ çš„æ ·å¼"><a href="#è®¿é—®å…ƒç´ çš„æ ·å¼" class="headerlink" title="è®¿é—®å…ƒç´ çš„æ ·å¼"></a>è®¿é—®å…ƒç´ çš„æ ·å¼</h3><ul><li>å…ƒç´ çš„ style ç‰¹æ€§æ˜¯ <code>CSSStyleDeclaration</code> çš„å®ä¾‹</li><li>CSS å±æ€§çš„çŸ­çº¿è½¬ä¸ºé©¼å³°æ‰èƒ½é€šè¿‡ js è®¿é—®</li><li>float æ˜¯ä¿ç•™å­—æ‰€ä»¥ è½¬ä¸º cssFloat</li></ul><h3 id="æ“ä½œæ ·å¼è¡¨"><a href="#æ“ä½œæ ·å¼è¡¨" class="headerlink" title="æ“ä½œæ ·å¼è¡¨"></a>æ“ä½œæ ·å¼è¡¨</h3><p>CSSStyleSheet ç±»å‹è¡¨ç¤ºçš„æ˜¯æ ·å¼è¡¨ï¼Œç»§æ‰¿è‡ª StyleSheetï¼Œåè€…å¯ä»¥ä½œä¸ºä¸€ä¸ªåŸºç¡€æ¥å£æ¥å®šä¹‰é CSS æ ·å¼è¡¨</p><h3 id="å…ƒç´ å¤§å°"><a href="#å…ƒç´ å¤§å°" class="headerlink" title="å…ƒç´ å¤§å°"></a>å…ƒç´ å¤§å°</h3><ul><li><p>åç§»é‡<br><img src="/.com//%E5%81%8F%E7%A7%BB%E9%87%8F.png" alt="åç§»é‡.png"></p></li><li><p>å®¢æˆ·åŒºå¤§å°<br><img src="/.com//%E5%AE%A2%E6%88%B7%E5%8C%BA%E5%A4%A7%E5%B0%8F.png" alt="å®¢æˆ·åŒºå¤§å°.png"></p></li></ul><p>æ‰€æœ‰åç§»é‡ã€å®¢æˆ·åŒºå¤§å°éƒ½æ˜¯åªè¯»çš„ï¼Œæ¯æ¬¡è®¿é—®è¦é‡æ–°è®¡ç®—ã€‚é¿å…é‡å¤è®¿é—®ï¼Œæœ‰éœ€è¦å¯ä»¥ä¿å­˜ä¸‹æ¥ã€‚</p><ul><li><p>æ»šåŠ¨å¤§å°<br><img src="/.com//%E6%BB%9A%E5%8A%A8%E5%A4%A7%E5%B0%8F.png" alt="æ»šåŠ¨å¤§å°.png"></p></li><li><p>ç¡®å®šå…ƒç´ å¤§å°<br><code>getBoundingClientRect()</code> è¿”å› DOMRect å¯¹è±¡ï¼ŒåŒ…å«å››ä¸ªå€¼<br><img src="/.com//%E7%A1%AE%E5%AE%9A%E5%85%83%E7%B4%A0%E5%A4%A7%E5%B0%8F.png" alt="ç¡®å®šå…ƒç´ å¤§å°.png"></p></li></ul><h2 id="éå†"><a href="#éå†" class="headerlink" title="éå†"></a>éå†</h2><ul><li>NodeIterator</li><li>TreeWalker</li></ul><h2 id="èŒƒå›´"><a href="#èŒƒå›´" class="headerlink" title="èŒƒå›´"></a>èŒƒå›´</h2><ul><li>èŒƒå›´æ˜¯é€‰æ‹© DOM ç»“æ„ä¸­ç‰¹å®šéƒ¨åˆ†ï¼Œç„¶åå†æ‰§è¡Œç›¸åº”æ“ä½œçš„ä¸€ç§æ‰‹æ®µã€‚</li><li>ä½¿ç”¨èŒƒå›´é€‰åŒºå¯ä»¥åœ¨åˆ é™¤æ–‡æ¡£ä¸­æŸäº›éƒ¨åˆ†çš„åŒæ—¶ï¼Œä¿æŒæ–‡æ¡£ç»“æ„çš„æ ¼å¼è‰¯å¥½ï¼Œæˆ–è€…å¤åˆ¶æ–‡æ¡£ä¸­çš„ç›¸åº”éƒ¨åˆ†ã€‚</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScripté«˜çº§ç¨‹åºè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬å…«ç«  BOM</title>
      <link href="/2020/03/02/%E7%AC%AC8%E7%AB%A0-BOM/"/>
      <url>/2020/03/02/%E7%AC%AC8%E7%AB%A0-BOM/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬¬å…«ç« -BOM"><a href="#ç¬¬å…«ç« -BOM" class="headerlink" title="ç¬¬å…«ç«  BOM"></a>ç¬¬å…«ç«  BOM</h1><h2 id="window-å¯¹è±¡"><a href="#window-å¯¹è±¡" class="headerlink" title="window å¯¹è±¡"></a>window å¯¹è±¡</h2><ul><li>BOM çš„æ ¸å¿ƒå¯¹è±¡æ˜¯ windowï¼Œè¡¨ç¤ºæµè§ˆå™¨çš„ä¸€ä¸ªå®ä¾‹<h3 id="å…¨å±€ä½œç”¨åŸŸ"><a href="#å…¨å±€ä½œç”¨åŸŸ" class="headerlink" title="å…¨å±€ä½œç”¨åŸŸ"></a>å…¨å±€ä½œç”¨åŸŸ</h3></li><li>Window ä½œä¸º Global å¯¹è±¡ï¼Œæ‰€æœ‰åœ¨å…¨å±€ä½œç”¨åŸŸä¸­å£°æ˜çš„å˜é‡ã€å‡½æ•°éƒ½ä¼šå˜æˆ window å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•</li><li>å…¨å±€å˜é‡ä¸èƒ½é€šè¿‡ delete åˆ é™¤ï¼Œç›´æ¥åœ¨ window å¯¹ä¸Šå®šä¹‰çš„å±æ€§å¯ä»¥</li></ul><h3 id="çª—å£ä½ç½®"><a href="#çª—å£ä½ç½®" class="headerlink" title="çª—å£ä½ç½®"></a>çª—å£ä½ç½®</h3><ul><li><code>window.screenLeft</code></li><li><code>window.screenTop</code></li><li><code>window.screenX</code></li><li><code>window.screenY</code></li><li><code>window.moveTo(x, y)</code></li><li><code>window.moveBy(a, b)</code></li></ul><h3 id="çª—å£å¤§å°"><a href="#çª—å£å¤§å°" class="headerlink" title="çª—å£å¤§å°"></a>çª—å£å¤§å°</h3><ul><li><code>window.innerWidth</code></li><li><code>window.innerHeight</code></li><li><code>window.outerWidth</code></li><li><code>window.outerHeight</code></li><li><code>window.resizeTo(w, h)</code></li><li><code>window.resizeBy(w, h)</code></li></ul><h3 id="å¯¼èˆªå’Œæ‰“å¼€çª—å£"><a href="#å¯¼èˆªå’Œæ‰“å¼€çª—å£" class="headerlink" title="å¯¼èˆªå’Œæ‰“å¼€çª—å£"></a>å¯¼èˆªå’Œæ‰“å¼€çª—å£</h3><ul><li><code>window.open(URL, target, String, Boolean)</code></li></ul><h3 id="é—´æ­‡è°ƒç”¨å’Œè¶…æ—¶è°ƒç”¨"><a href="#é—´æ­‡è°ƒç”¨å’Œè¶…æ—¶è°ƒç”¨" class="headerlink" title="é—´æ­‡è°ƒç”¨å’Œè¶…æ—¶è°ƒç”¨"></a>é—´æ­‡è°ƒç”¨å’Œè¶…æ—¶è°ƒç”¨</h3><ul><li><code>setTimeout(function, ms)</code><ul><li>ms åæŠŠå½“å‰ä»»åŠ¡æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¦‚æœæ­¤æ—¶ä»»åŠ¡é˜Ÿåˆ—æ˜¯ç©ºçš„æ‰ä¼šç«‹å³æ‰§è¡Œ<ul><li>æ‰€ä»¥ä¸ä¸€å®š ms åå°±ä¼šæ‰§è¡Œ function</li></ul></li><li>è¿”å›ä¸€ä¸ªæ•°å€¼ ID</li></ul></li><li><code>clearTimeout(timeoutID)</code></li><li><code>setInterVal(function, ms)</code></li><li><code>clearInterval(timeoutID)</code></li></ul><h3 id="ç³»ç»Ÿå¯¹è¯æ¡†"><a href="#ç³»ç»Ÿå¯¹è¯æ¡†" class="headerlink" title="ç³»ç»Ÿå¯¹è¯æ¡†"></a>ç³»ç»Ÿå¯¹è¯æ¡†</h3><p>æ ·å¼ç”±æ“ä½œç³»ç»Ÿæˆ–æµè§ˆå™¨å†³å®š<br>æ˜¾ç¤ºè¿™äº›å¯¹è¯æ¡†çš„æ—¶å€™ä»£ç ä¼šåœæ­¢æ‰§è¡Œ</p><ul><li><code>alert()</code></li><li><code>confirm()</code></li><li><code>prompt()</code></li><li><code>find()</code></li><li><code>print()</code></li></ul><h2 id="location-å¯¹è±¡"><a href="#location-å¯¹è±¡" class="headerlink" title="location å¯¹è±¡"></a>location å¯¹è±¡</h2><ul><li>æ—¢æ˜¯ window å¯¹è±¡çš„å±æ€§ï¼Œä¹Ÿæ˜¯ document å¯¹è±¡çš„å±æ€§</li><li>window.LOcation å’Œ document.location å¼•ç”¨çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡</li></ul><h3 id="ä½ç½®æ“ä½œ"><a href="#ä½ç½®æ“ä½œ" class="headerlink" title="ä½ç½®æ“ä½œ"></a>ä½ç½®æ“ä½œ</h3><ul><li><p><code>location.assign(url)</code></p></li><li><p><code>window.location = &quot;url&quot;</code></p></li><li><p><code>location.href = &quot;url&quot;</code><br>ä¿®æ”¹ location å…¶å®ƒå±æ€§é¡µé¢éƒ½ä¼šé‡æ–°åŠ è½½ï¼Œæµè§ˆå™¨çš„å†å²è®°å½•ä¼šç”Ÿäº§ä¸€æ¡æ–°è®°å½•</p></li><li><p><code>replace(url)</code> ä¸ä¼šäº§ç”Ÿæ–°è®°å½•</p></li><li><p><code>reload()</code> </p><ul><li>æ— å‚æ•°ï¼Œå¯èƒ½æ˜¯ç”¨ç¼“å­˜</li><li>å‚æ•° trueï¼Œå¼ºåˆ¶ä»æœåŠ¡å™¨é‡æ–°åŠ è½½</li><li>è°ƒç”¨ä¹‹åçš„ä»£ç å¯èƒ½ä¼šä¹Ÿå¯èƒ½ä¸ä¼šæ‰§è¡Œï¼Œè¿™è¦å–å†³äºç½‘ç»œå»¶è¿Ÿæˆ–ç³»ç»Ÿèµ„æºç­‰å› ç´ ã€‚æœ€å¥½å°† reload()æ”¾åœ¨ä»£ç çš„æœ€åä¸€è¡Œ</li></ul></li></ul><h2 id="screen-å¯¹è±¡"><a href="#screen-å¯¹è±¡" class="headerlink" title="screen å¯¹è±¡"></a>screen å¯¹è±¡</h2><h2 id="history-å¯¹è±¡"><a href="#history-å¯¹è±¡" class="headerlink" title="history å¯¹è±¡"></a>history å¯¹è±¡</h2><ul><li><code>history.go()</code><ul><li>number å‰è¿›æˆ–åé€€é¡µé¢</li><li>string è·³è½¬åˆ°å†å²è®°å½•ä¸­åŒ…å«stringæœ€è¿‘çš„ä½ç½®</li></ul></li><li><code>history.back()</code> åé€€</li><li><code>history.forward()</code> å‰è¿›</li><li><code>history.length</code> å†å²è®°å½•æ•°é‡</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScripté«˜çº§ç¨‹åºè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬åäº”ç«  ä½¿ç”¨ Canvas ç»˜å›¾</title>
      <link href="/2020/03/02/%E7%AC%AC15%E7%AB%A0-%E4%BD%BF%E7%94%A8Canvas%E7%BB%98%E5%9B%BE/"/>
      <url>/2020/03/02/%E7%AC%AC15%E7%AB%A0-%E4%BD%BF%E7%94%A8Canvas%E7%BB%98%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h2><ol><li>è®¾ç½® width å’Œ height å±æ€§ï¼Œåˆ¶å®šç»˜å›¾åŒºåŸŸ<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"drawing"</span> <span class="attr">width</span>=<span class="string">"200"</span> <span class="attr">height</span>=<span class="string">"200"</span>&gt;</span>A drawing of something.<span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li>å–å¾—ç»˜å›¾ä¸Šä¸‹æ–‡<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> drawing = <span class="built_in">document</span>.getElementById(<span class="string">"drawing"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¡®å®šæµè§ˆå™¨æ”¯æŒ &lt;canvas&gt; å…ƒç´ </span></span><br><span class="line"><span class="keyword">if</span> (drawing.getContext) &#123;</span><br><span class="line">    <span class="keyword">var</span> context = drawing.getContext(<span class="string">"2d"</span>);</span><br><span class="line">    â€¦â€¦</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>å¯¼å‡ºç»˜åˆ¶çš„å›¾åƒ<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> drawing = <span class="built_in">document</span>.getElementById(<span class="string">"drawing"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (drawing.getContext) &#123;</span><br><span class="line">    <span class="comment">//å–å¾—å›¾åƒçš„æ•°æ® URI</span></span><br><span class="line">    <span class="keyword">var</span> imgURI = drawing.toDataURL(<span class="string">"imge/png"</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ˜¾ç¤ºå›¾åƒ</span></span><br><span class="line">    <span class="keyword">var</span> image = <span class="built_in">document</span>.createElement(<span class="string">"img"</span>);</span><br><span class="line">    image.src = imgURI;</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(image);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="2Dä¸Šä¸‹æ–‡"><a href="#2Dä¸Šä¸‹æ–‡" class="headerlink" title="2Dä¸Šä¸‹æ–‡"></a>2Dä¸Šä¸‹æ–‡</h2><ul><li>åæ ‡å¼€å§‹äºå·¦ä¸Šè§’ï¼ŒåŸç‚¹åæ ‡ (0, 0)</li><li>x è¶Šå¤§é å³ï¼Œy è¶Šå¤§é ä¸‹</li><li>width å’Œ height è¡¨ç¤ºæ°´å¹³å’Œå‚ç›´ä¸¤ä¸ªæ–¹å‘ä¸Šå¯ç”¨çš„åƒç´ æ•°</li></ul><h3 id="å¡«å……å’Œæè¾¹"><a href="#å¡«å……å’Œæè¾¹" class="headerlink" title="å¡«å……å’Œæè¾¹"></a>å¡«å……å’Œæè¾¹</h3><ul><li><code>fillStyle</code> å¡«å……ï¼ˆå­—ç¬¦ä¸²ã€æ¸å˜å¯¹è±¡æˆ–æ¨¡å¼å¯¹è±¡ï¼‰</li><li><code>strokeStyle</code> æè¾¹ï¼ˆå­—ç¬¦ä¸²ã€æ¸å˜å¯¹è±¡æˆ–æ¨¡å¼å¯¹è±¡ï¼‰</li><li><code>lineWidth</code> çº¿æ¡å®½åº¦ï¼ˆæ•´æ•°ï¼‰</li><li><code>lineCap</code> çº¿æ¡æœ«ç«¯å½¢çŠ¶ï¼ˆâ€œbuttâ€ã€â€œroundâ€ã€â€œsquareâ€ï¼‰</li><li><code>lineJoin</code> çº¿æ¡ç›¸äº¤å½¢çŠ¶ï¼ˆâ€œroundâ€ã€â€œbevelâ€ã€â€œmiterâ€ï¼‰</li></ul><h3 id="ç»˜åˆ¶çŸ©å½¢"><a href="#ç»˜åˆ¶çŸ©å½¢" class="headerlink" title="ç»˜åˆ¶çŸ©å½¢"></a>ç»˜åˆ¶çŸ©å½¢</h3><ul><li><code>fillRect(x, y, w, h)</code></li><li><code>strokeRect(x, y, w, h)</code></li><li><code>clearRect(x, y, w, h)</code><ul><li>x: x åæ ‡</li><li>y: y åæ ‡</li><li>w: çŸ©å½¢å®½åº¦</li><li>h: çŸ©å½¢é«˜åº¦</li></ul></li></ul><h3 id="ç»˜åˆ¶è·¯å¾„"><a href="#ç»˜åˆ¶è·¯å¾„" class="headerlink" title="ç»˜åˆ¶è·¯å¾„"></a>ç»˜åˆ¶è·¯å¾„</h3><ol><li>è°ƒç”¨<code>beginPath()</code>è¡¨ç¤ºå¼€å§‹ç»˜åˆ¶æ–°è·¯å¾„</li><li>ç»˜åˆ¶è·¯å¾„<ul><li><code>arc(x, y, radius, startAngle, endAngle, counterclockwise)</code> </li><li><code>arcTo(x1, y1, x2, y2, radius)</code> </li><li><code>bezierCurveTo(c1x, c1y, c2x, c2y, x, y)</code></li><li><code>lineTo(x, y)</code></li><li><code>moveTo(x, y)</code></li><li><code>quadraticCurveTo(cx, cy, x, y)</code></li><li><code>rect(x, y, width, height)</code></li></ul></li><li>ç»˜åˆ¶åˆ°ç”»å¸ƒ<ul><li><code>closePath()</code></li><li><code>fill()</code></li><li><code>stroke()</code></li><li><code>clip()</code></li></ul></li></ol><ul><li><code>isPointInpath(x, y)</code> ç‚¹(x, y)æ˜¯å¦åœ¨è·¯å¾„ä¸Š</li></ul><h3 id="ç»˜åˆ¶æ–‡æœ¬"><a href="#ç»˜åˆ¶æ–‡æœ¬" class="headerlink" title="ç»˜åˆ¶æ–‡æœ¬"></a>ç»˜åˆ¶æ–‡æœ¬</h3><ul><li><code>fillText(string, x, y, (å¯é€‰)font-size)</code></li><li><code>strokeText(string, x, y, (å¯é€‰)font-size)</code></li></ul><hr><ul><li><code>font</code> æ–‡æœ¬æ ·å¼ã€å¤§å°ã€å­—ä½“</li><li><code>textAlign</code> æ–‡æœ¬å¯¹é½æ–¹å¼</li><li><code>textBaseline</code> æ–‡æœ¬åŸºçº¿</li></ul><hr><ul><li><code>measureText()</code> ç¡®å®šæ–‡æœ¬å¤§å°</li></ul><h3 id="å˜æ¢"><a href="#å˜æ¢" class="headerlink" title="å˜æ¢"></a>å˜æ¢</h3><ul><li><code>rotate(angle)</code> ç»•åŸç‚¹æ—‹è½¬å›¾åƒ</li><li><code>scale(scaleX, scaleY)</code> ç¼©æ”¾å›¾åƒ</li><li><code>translate(x, y)</code> å°†åæ ‡åŸç‚¹ç§»åŠ¨åˆ° (x, y)</li><li><code>transform(m1_1, m1_2, m2_1, m2_2, dx, dy)</code> ä¿®æ”¹å˜æ¢çŸ©é˜µ</li><li><code>setTransform(m1_1, m1_2, m2_1, m2_2, dx, dy)</code> å°†å˜æ¢çŸ©é˜µé‡ç½®ä¸ºé»˜è®¤çŠ¶æ€å†è°ƒç”¨ transform()</li></ul><hr><ul><li><code>save()</code> ä¿å­˜ä¸Šä¸‹æ–‡çŠ¶æ€</li><li><code>restore()</code> è¯»å–ä¿å­˜çš„çŠ¶æ€</li></ul><h3 id="ç»˜åˆ¶å›¾åƒ"><a href="#ç»˜åˆ¶å›¾åƒ" class="headerlink" title="ç»˜åˆ¶å›¾åƒ"></a>ç»˜åˆ¶å›¾åƒ</h3><ul><li><code>drawImage()</code><ul><li>è¦ç»˜åˆ¶çš„å›¾åƒ</li><li>æºå›¾åƒçš„ x åæ ‡</li><li>æºå›¾åƒçš„ y åæ ‡</li><li>æºå›¾åƒçš„å®½åº¦</li><li>æºå›¾åƒçš„é«˜åº¦</li><li>ç›®æ ‡å›¾åƒçš„ x åæ ‡</li><li>ç›®æ ‡å›¾åƒçš„ y åæ ‡</li><li>ç›®æ ‡å›¾åƒçš„å®½åº¦</li><li>ç›®æ ‡å›¾åƒçš„é«˜åº¦</li></ul></li></ul><h3 id="é˜´å½±"><a href="#é˜´å½±" class="headerlink" title="é˜´å½±"></a>é˜´å½±</h3><ul><li><code>shadowColor</code></li><li><code>shadowOffsetXr</code></li><li><code>shadowOffsetY</code></li><li><code>shadowBlur</code></li></ul><h3 id="æ¸å˜"><a href="#æ¸å˜" class="headerlink" title="æ¸å˜"></a>æ¸å˜</h3><ol><li><code>cg = createLinearGradient()</code> åˆ›å»ºæ–°çš„æ¸å˜ï¼Œè¿”å› CanvasGradient å¯¹è±¡</li><li><code>cg.addColorStop()</code> åˆ¶å®šè‰²æ ‡</li><li><code>fillStyle = cg</code>/<code>strokeStyle = cg</code> ç»˜åˆ¶</li></ol><h3 id="æ¨¡å¼"><a href="#æ¨¡å¼" class="headerlink" title="æ¨¡å¼"></a>æ¨¡å¼</h3><ul><li>é‡å¤çš„å›¾åƒ</li><li><code>createPattern()</code></li></ul><h3 id="ä½¿ç”¨å›¾åƒæ•°æ®"><a href="#ä½¿ç”¨å›¾åƒæ•°æ®" class="headerlink" title="ä½¿ç”¨å›¾åƒæ•°æ®"></a>ä½¿ç”¨å›¾åƒæ•°æ®</h3><ul><li><code>getImageData()</code></li></ul><h3 id="åˆæˆ"><a href="#åˆæˆ" class="headerlink" title="åˆæˆ"></a>åˆæˆ</h3><ul><li><code>globalAlpha</code> é€æ˜åº¦</li><li><code>globalCompositionOperation</code><ul><li>source-over(é»˜è®¤å€¼):åç»˜åˆ¶çš„å›¾å½¢ä½äºå…ˆç»˜åˆ¶çš„å›¾å½¢ä¸Šæ–¹</li><li>â€¦â€¦</li></ul></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScripté«˜çº§ç¨‹åºè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬ä¸ƒç«  å‡½æ•°è¡¨è¾¾å¼</title>
      <link href="/2020/03/01/%E7%AC%AC7%E7%AB%A0-%E5%87%BD%E6%95%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
      <url>/2020/03/01/%E7%AC%AC7%E7%AB%A0-%E5%87%BD%E6%95%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>å®šä¹‰å‡½æ•°çš„æ–¹å¼</p><ol><li>å‡½æ•°å£°æ˜<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">functionName(); <span class="comment">// æ­£ç¡®</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">functionName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    â€¦â€¦</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å‡½æ•°å£°æ˜æå‡</span></span><br><span class="line"><span class="comment">// æ‰§è¡Œä»£ç å‰ä¼šè¯»å–å‡½æ•°å£°æ˜ï¼Œæ„å‘³ç€å¯ä»¥æŠŠå‡½æ•°å£°æ˜æ”¾åœ¨è°ƒç”¨åé¢</span></span><br></pre></td></tr></table></figure></li><li>å‡½æ•°è¡¨è¾¾å¼<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">functionName(); <span class="comment">// æŠ¥é”™</span></span><br><span class="line"><span class="keyword">var</span> functionName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    â€¦â€¦</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ²¡æœ‰å‡½æ•°å£°æ˜æå‡</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨å‰å¿…é¡»å…ˆèµ‹å€¼</span></span><br></pre></td></tr></table></figure><blockquote><p>function å…³é”®å­—åé¢æ²¡æœ‰æ ‡è¯†ç¬¦ï¼Œæ‰€ä»¥å«<strong>åŒ¿åå‡½æ•°</strong>ï¼Œä¹Ÿå«<strong>æ‹‰å§†è¾¾å‡½æ•°</strong>ã€‚</p></blockquote></li></ol><h2 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (num &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        reutrn <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> num * factorial(num<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> anotherFactorial = factorial;</span><br><span class="line">factorial = <span class="literal">null</span>;</span><br><span class="line">alert(anotherFactorial(<span class="number">4</span>)); <span class="comment">// æŠ¥é”™</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å› ä¸ºè°ƒç”¨ anotherFactorial(num) æ—¶ï¼Œå‡½æ•°å†…éƒ¨ä¼šæ‰§è¡Œ factorial(num-1)ï¼Œè€Œæ­¤æ—¶ factorial å·²ç»è¢«ç½®ä¸º null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ”¹ä¸º arguments.callee å³å¯ï¼Œå¦‚ä¸‹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (num &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> num * <span class="built_in">arguments</span>.callee(num<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h2><p><strong>é—­åŒ…</strong>æ˜¯æŒ‡(æœ‰æƒè®¿é—®[å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡]çš„)å‡½æ•°ã€‚<br>åˆ›å»ºé—­åŒ…çš„å¸¸è§æ–¹å¼ï¼Œå°±æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨åˆ›å»ºå¦ä¸€ä¸ªå‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createComparisonFunction</span>(<span class="params">propertyName</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">object1, object2</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> value1 = object1[propertyName];</span><br><span class="line">        <span class="keyword">var</span> value2 = object2[propertyName];</span><br><span class="line">        <span class="comment">// è¿™ä¸ªåŒ¿åå‡½æ•°çš„ä½œç”¨åŸŸé“¾ä¸­åŒ…å« createComparisonFunction() çš„ä½œç”¨åŸŸï¼Œæ‰€ä»¥è¿™ä¸¤è¡Œä»£ç å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°ä¸­çš„å˜é‡ propertyName</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (value1 &lt; value2) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (value1 &gt; value2) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å½“å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œå±€éƒ¨æ´»åŠ¨å¯¹è±¡ä¼šè¢«é”€æ¯ï¼Œå†…å­˜ä»…ä¿ç•™å…¨å±€ä½œç”¨åŸŸã€‚ä½†æ˜¯é—­åŒ…æœ‰æ‰€ä¸åŒã€‚<br>åœ¨å¦ä¸€ä¸ªå‡½æ•°å†…éƒ¨å®šä¹‰çš„å‡½æ•°ä¼šå°†åŒ…å«å®ƒçš„å‡½æ•°ï¼ˆå³å¤–éƒ¨å‡½æ•°ï¼‰çš„æ´»åŠ¨å¯¹è±¡æ·»åŠ åˆ°å®ƒçš„ä½œç”¨åŸŸé“¾ä¸­ã€‚<br>å› æ­¤ï¼ŒcreateComparisonFunction() å‡½æ•°å†…éƒ¨å®šä¹‰çš„åŒ¿åå‡½æ•°çš„ä½œç”¨åŸŸé“¾ä¸­ï¼Œå®é™…ä¸Šä¼šåŒ…å«å¤–éƒ¨å‡½æ•° createComparisonFunction() çš„æ´»åŠ¨å¯¹è±¡ã€‚<br><img src="/.com//%E9%97%AD%E5%8C%85.png" alt="é—­åŒ….png"><br>åœ¨åŒ¿åå‡½æ•°ä» createComparisonFunction() ä¸­è¢«è¿”å›åï¼Œå®ƒçš„ä½œç”¨åŸŸé“¾è¢«åˆå§‹åŒ–ä¸º åŒ…å« createComparisonFunction() å‡½æ•°çš„æ´»åŠ¨å¯¹è±¡å’Œå…¨å±€å˜é‡å¯¹è±¡ã€‚<br>è¿™æ ·ï¼ŒåŒ¿åå‡½æ•°å°±å¯ä»¥è®¿é—®åœ¨ createComparisonFunction() ä¸­å®šä¹‰çš„æ‰€æœ‰å˜é‡ã€‚<br>åŒæ—¶ï¼ŒcreateComparisonFunction() çš„æ´»åŠ¨å¯¹è±¡ç”±äºè¢«åŒ¿åå‡½æ•°çš„ä½œç”¨åŸŸé“¾å¼•ç”¨ï¼Œåœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åä¸ä¼šè¢«é”€æ¯ã€‚</p></blockquote><p>ç”±äºé—­åŒ…ä¼šæºå¸¦å¤–éƒ¨å‡½æ•°çš„ä½œç”¨åŸŸï¼Œå› æ­¤ä¼šæ¯”å…¶ä»–å‡½æ•°å æ›´å¤šçš„å†…å­˜ã€‚æ‰€ä»¥è¦æ…é‡ä½¿ç”¨é—­åŒ…ã€‚</p><h3 id="é—­åŒ…ä¸å˜é‡"><a href="#é—­åŒ…ä¸å˜é‡" class="headerlink" title="é—­åŒ…ä¸å˜é‡"></a>é—­åŒ…ä¸å˜é‡</h3><ul><li>é—­åŒ…åªèƒ½å–å¾—åŒ…å«å‡½æ•°ä¸­æ¯ä¸ªå˜é‡çš„æœ€æ–°å€¼</li><li>å› ä¸ºæ¯ä¸ªå‡½æ•°ä½œç”¨åŸŸé“¾ä¸­éƒ½ä¿å­˜ç€å¤–éƒ¨å‡½æ•°çš„æ´»åŠ¨å¯¹è±¡ï¼Œæ˜¯å…±äº«çš„ï¼Œæœ€åæ›´æ–°çš„å†…å®¹ä¼šè¢«å¼•ç”¨ã€‚</li></ul><h3 id="å…³äº-this-å¯¹è±¡"><a href="#å…³äº-this-å¯¹è±¡" class="headerlink" title="å…³äº this å¯¹è±¡"></a>å…³äº this å¯¹è±¡</h3><ul><li>åŒ¿åå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒå…·æœ‰å…¨å±€æ€§ï¼Œthis é€šå¸¸æŒ‡å‘ windowã€‚ç”¨ call æˆ– apply æ”¹å˜åˆ¶å®šç¯å¢ƒæ—¶ä¼šæŒ‡å‘å…¶ä»–å¯¹è±¡ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"The Window"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> object = &#123;</span><br><span class="line">    name: <span class="string">"My Object"</span>,</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> that = <span class="keyword">this</span></span><br><span class="line">    getNameFunc: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.name + <span class="string">" "</span> that.name;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    getName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">alert(object.getNameFunc()());  <span class="comment">// "The Window My Object"</span></span><br><span class="line">alert(object.getName());  <span class="comment">// "My Object"</span></span><br></pre></td></tr></table></figure><h3 id="å†…å­˜æ³„æ¼"><a href="#å†…å­˜æ³„æ¼" class="headerlink" title="å†…å­˜æ³„æ¼"></a>å†…å­˜æ³„æ¼</h3></li><li>é—­åŒ…ä¼šå¼•ç”¨åŒ…å«å‡½æ•°çš„æ•´ä¸ªæ´»åŠ¨å¯¹è±¡ï¼Œå¯ä»¥æ´»åŠ¨å¯¹è±¡ä¸­çš„å˜é‡èµ‹å€¼ null è§£é™¤å¼•ç”¨ï¼Œä¿è¯å†…å­˜æ­£å¸¸å›æ”¶ã€‚</li></ul><h2 id="æ¨¡ä»¿å—çº§ä½œç”¨åŸŸï¼ˆï¼‰ç§æœ‰ä½œç”¨åŸŸ"><a href="#æ¨¡ä»¿å—çº§ä½œç”¨åŸŸï¼ˆï¼‰ç§æœ‰ä½œç”¨åŸŸ" class="headerlink" title="æ¨¡ä»¿å—çº§ä½œç”¨åŸŸï¼ˆï¼‰ç§æœ‰ä½œç”¨åŸŸ"></a>æ¨¡ä»¿å—çº§ä½œç”¨åŸŸï¼ˆï¼‰ç§æœ‰ä½œç”¨åŸŸ</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œæ˜¯å—çº§ä½œç”¨åŸŸ</span></span><br><span class="line">&#125;)();</span><br><span class="line"><span class="comment">// å®šä¹‰å¹¶ç«‹å³è°ƒç”¨äº†ä¸€ä¸ªåŒ¿åå‡½æ•°</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç†è§£è¿‡ç¨‹</span></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªå‡½æ•°å¹¶ç«‹å³è°ƒç”¨</span></span><br><span class="line"><span class="keyword">var</span> someFunction = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œæ˜¯å—çº§ä½œç”¨åŸŸ</span></span><br><span class="line">&#125;;</span><br><span class="line">someFunction();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨å‡½æ•°çš„å€¼ç›´æ¥å–ä»£å‡½æ•°å</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œæ˜¯å—çº§ä½œç”¨åŸŸ</span></span><br><span class="line">&#125;(); <span class="comment">// æŠ¥é”™ï¼Œå‡½æ•°å£°æ˜åä¸èƒ½è·Ÿåœ†æ‹¬å·</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œæ˜¯å—çº§ä½œç”¨åŸŸ</span></span><br><span class="line">&#125;)(); <span class="comment">// æ­£ç¡®ï¼Œå‡½æ•°è¡¨è¾¾å¼å¯ä»¥è·Ÿåœ†æ‹¬å·</span></span><br></pre></td></tr></table></figure><h2 id="ç§æœ‰å˜é‡"><a href="#ç§æœ‰å˜é‡" class="headerlink" title="ç§æœ‰å˜é‡"></a>ç§æœ‰å˜é‡</h2><ul><li><p>ä¸¥æ ¼æ¥è¯´ï¼Œjs ä¸­æ²¡æœ‰ç§æœ‰æˆå‘˜çš„æ¦‚å¿µï¼Œæ‰€æœ‰çš„å¯¹è±¡å±æ€§éƒ½æ˜¯å…¬æœ‰çš„</p><blockquote><p>ä¸ªäººç†è§£ï¼šoop è¯­è¨€ä¸­ç§æœ‰æˆå‘˜ä¸èƒ½è¢«å­ç±»ç»§æ‰¿ï¼Œè€Œ js ä¸­æ‰€æœ‰å¯¹è±¡å±æ€§éƒ½èƒ½è¢«ç»§æ‰¿ï¼Œå› æ­¤éƒ½æ˜¯å…¬æœ‰çš„</p></blockquote></li><li><p>ä½†æœ‰ç§æœ‰å˜é‡çš„æ¦‚å¿µï¼Œä»»ä½•åœ¨å‡½æ•°ä¸­å®šä¹‰çš„å˜é‡éƒ½å¯ä»¥è®¤ä¸ºæ˜¯ç§æœ‰å˜é‡ï¼Œå› ä¸ºä¸èƒ½åœ¨å‡½æ•°çš„å¤–éƒ¨è®¿é—®è¿™äº›å˜é‡</p></li><li><p>ç§æœ‰å˜é‡åŒ…æ‹¬</p><ul><li>å‡½æ•°çš„å‚æ•°</li><li>å±€éƒ¨å˜é‡</li><li>åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å…¶ä»–å‡½æ•°</li></ul></li></ul><h6 id="ç‰¹æƒæ–¹æ³•ï¼šæœ‰æƒè®¿é—®ç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•°çš„å…¬æœ‰æ–¹æ³•"><a href="#ç‰¹æƒæ–¹æ³•ï¼šæœ‰æƒè®¿é—®ç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•°çš„å…¬æœ‰æ–¹æ³•" class="headerlink" title="ç‰¹æƒæ–¹æ³•ï¼šæœ‰æƒè®¿é—®ç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•°çš„å…¬æœ‰æ–¹æ³•"></a>ç‰¹æƒæ–¹æ³•ï¼šæœ‰æƒè®¿é—®ç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•°çš„å…¬æœ‰æ–¹æ³•</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰ç‰¹æƒæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyObject</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•°</span></span><br><span class="line">    <span class="keyword">var</span> privateVariable = <span class="number">10</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">privateFunction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç‰¹æƒæ–¹æ³•</span></span><br><span class="line">    <span class="keyword">this</span>.publicMethod = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        privateVariable++;</span><br><span class="line">        <span class="keyword">return</span> privateFunction();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é™æ€ç§æœ‰å˜é‡"><a href="#é™æ€ç§æœ‰å˜é‡" class="headerlink" title="é™æ€ç§æœ‰å˜é‡"></a>é™æ€ç§æœ‰å˜é‡</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•°</span></span><br><span class="line">    <span class="keyword">var</span> privateVariable = <span class="number">10</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">privateFunction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> fasle;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°ï¼ˆæ²¡æœ‰varï¼Œå…¨å±€å˜é‡ï¼‰</span></span><br><span class="line">    MyObject = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å…¬æœ‰/ç‰¹æƒæ–¹æ³•</span></span><br><span class="line">    MyObject.prototype.publicMethod = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        privateVariable++;</span><br><span class="line">        <span class="keyword">return</span> privateFunction();</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><h3 id="æ¨¡å—æ¨¡å¼"><a href="#æ¨¡å—æ¨¡å¼" class="headerlink" title="æ¨¡å—æ¨¡å¼"></a>æ¨¡å—æ¨¡å¼</h3><ul><li>æ¨¡å—æ¨¡å¼ï¼šä¸ºå•ä¾‹åˆ›å»ºç§æœ‰å˜é‡å’Œç‰¹æƒæ–¹æ³•<ul><li>å•ä¾‹ï¼šåªæœ‰ä¸€ä¸ªå®ä¾‹çš„å¯¹è±¡</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> singleton = &#123;</span><br><span class="line">    name: value,</span><br><span class="line">    method: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        â€¦â€¦</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> singleton = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•°</span></span><br><span class="line">    <span class="keyword">var</span> privateVariable = <span class="number">10</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">privateFunction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è¿”å›å•ä¾‹çš„å…¬å…±æ¥å£</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        publicProperty: <span class="literal">true</span>,</span><br><span class="line">        publicMethod: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            privateVariable++;</span><br><span class="line">            <span class="keyword">return</span> privateFunction();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¢å¼ºçš„æ¨¡å—æ¨¡å¼"><a href="#å¢å¼ºçš„æ¨¡å—æ¨¡å¼" class="headerlink" title="å¢å¼ºçš„æ¨¡å—æ¨¡å¼"></a>å¢å¼ºçš„æ¨¡å—æ¨¡å¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> singleton = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">     <span class="comment">//ç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•°</span></span><br><span class="line">     <span class="keyword">var</span> privateVariable = <span class="number">10</span>; </span><br><span class="line">     <span class="function"><span class="keyword">function</span> <span class="title">privateFunction</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">         <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">     &#125;</span><br><span class="line"> </span><br><span class="line">     <span class="comment">//åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">     <span class="keyword">var</span> object = <span class="keyword">new</span> CustomType();</span><br><span class="line">     <span class="comment">//æ·»åŠ ç‰¹æƒ/å…¬æœ‰å±æ€§å’Œæ–¹æ³•</span></span><br><span class="line">     object.publicProperty = <span class="literal">true</span>; </span><br><span class="line">     object.publicMethod = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">         privateVariable++; </span><br><span class="line">         <span class="keyword">return</span> privateFunction(); </span><br><span class="line">         &#125;; </span><br><span class="line">     <span class="comment">//è¿”å›è¿™ä¸ªå¯¹è±¡</span></span><br><span class="line">     <span class="keyword">return</span> object; </span><br><span class="line">&#125;();</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScripté«˜çº§ç¨‹åºè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬å…­ç«  é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡</title>
      <link href="/2020/02/28/%E7%AC%AC6%E7%AB%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"/>
      <url>/2020/02/28/%E7%AC%AC6%E7%AB%A0-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<ul><li>é¢å‘å¯¹è±¡è¯­è¨€çš„æ ‡å¿—æ˜¯éƒ½æœ‰ç±»çš„æ¦‚å¿µï¼Œé€šè¿‡ç±»å¯ä»¥åˆ›å»ºä»»æ„å¤šä¸ªå…·æœ‰ç›¸åŒå±æ€§å’Œæ–¹æ³•çš„å¯¹è±¡ã€‚</li><li>è€Œ ECMAScript ä¸­æ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œå› æ­¤å®ƒçš„å¯¹è±¡å’ŒåŸºäºç±»çš„è¯­è¨€ä¸­çš„å¯¹è±¡æœ‰æ‰€ä¸åŒã€‚</li><li>ECMAscript å¯¹è±¡å®šä¹‰ï¼š<u>æ— åºå±æ€§çš„é›†åˆï¼Œå…¶å±æ€§å¯ä»¥åŒ…å«åŸºæœ¬å€¼ã€å¯¹è±¡æˆ–å‡½æ•°ã€‚</u></li><li>æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯åŸºäºä¸€ä¸ªå¼•ç”¨ç±»å‹åˆ›å»ºçš„ã€‚å¯ä»¥æ˜¯åŸç”Ÿç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å¼€å‘äººå‘˜å®šä¹‰çš„ç±»å‹ã€‚</li></ul><h2 id="ç†è§£å¯¹è±¡"><a href="#ç†è§£å¯¹è±¡" class="headerlink" title="ç†è§£å¯¹è±¡"></a>ç†è§£å¯¹è±¡</h2><h3 id="å±æ€§ç±»å‹"><a href="#å±æ€§ç±»å‹" class="headerlink" title="å±æ€§ç±»å‹"></a>å±æ€§ç±»å‹</h3><h5 id="å±æ€§æ•°æ®"><a href="#å±æ€§æ•°æ®" class="headerlink" title="å±æ€§æ•°æ®"></a>å±æ€§æ•°æ®</h5><ul><li><code>[[Configurable]]</code>:è¡¨ç¤ºèƒ½å¦é€šè¿‡ delete åˆ é™¤å±æ€§ä»è€Œå®šä¹‰å±æ€§ï¼Œèƒ½å¦ä¿®æ”¹å±æ€§çš„ç‰¹æ€§ï¼Œæˆ–è€…èƒ½å¦æŠŠå±æ€§ä¿®æ”¹ä¸ºè®¿é—®å™¨å±æ€§ã€‚</li><li><code>[[Enumerable]]</code>:è¡¨ç¤ºèƒ½å¦é€šè¿‡ for-in å¾ªç¯è¿”å›å±æ€§ã€‚</li><li><code>[[Writable]]</code>:è¡¨ç¤ºèƒ½å¦ä¿®æ”¹å±æ€§çš„å€¼ã€‚</li><li><code>[[Value]]</code>:åŒ…å«è®¾ä¸ªå±æ€§çš„æ•°æ®å€¼ã€‚<blockquote><p><code>Object.defineProperty(å±æ€§æ‰€åœ¨å¯¹è±¡ï¼Œå±æ€§çš„åå­—ï¼Œæè¿°ç¬¦å¯¹è±¡)</code>ï¼šä¿®æ”¹å±æ€§é»˜è®¤çš„ç‰¹æ€§</p></blockquote></li></ul><h5 id="è®¿é—®å™¨å±æ€§"><a href="#è®¿é—®å™¨å±æ€§" class="headerlink" title="è®¿é—®å™¨å±æ€§"></a>è®¿é—®å™¨å±æ€§</h5><ul><li><code>[[Configurable]]</code>:è¡¨ç¤ºèƒ½å¦é€šè¿‡ delete åˆ é™¤å±æ€§ä»è€Œå®šä¹‰å±æ€§ï¼Œèƒ½å¦ä¿®æ”¹å±æ€§çš„ç‰¹æ€§ï¼Œæˆ–è€…èƒ½å¦æŠŠå±æ€§ä¿®æ”¹ä¸ºè®¿é—®å™¨å±æ€§ã€‚</li><li><code>[[Enumerable]]</code>:è¡¨ç¤ºèƒ½å¦é€šè¿‡ for-in å¾ªç¯è¿”å›å±æ€§ã€‚</li><li><code>[[Get]]</code>:åœ¨è¯»å–å±æ€§æ—¶è°ƒç”¨çš„å‡½æ•°ï¼Œé»˜è®¤å€¼ <code>undefined</code>ã€‚</li><li><code>[[Set]]</code>:åœ¨å†™å…¥å±æ€§æ—¶è°ƒç”¨çš„å‡½æ•°ï¼Œé»˜è®¤å€¼ <code>undefined</code>ã€‚<blockquote><p>è®¿é—®å™¨å±æ€§ä¸èƒ½ç›´æ¥å®šä¹‰ï¼Œå¿…é¡»ä½¿ç”¨<code>Object.defineProperty()</code>æ¥å®šä¹‰ã€‚</p></blockquote></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> book = &#123;</span><br><span class="line">     _year: <span class="number">2004</span>,</span><br><span class="line">     edition: <span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(book, <span class="string">"year"</span>, &#123; </span><br><span class="line">     <span class="keyword">get</span>: function() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._year;</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="keyword">set</span>: function(newValue) &#123; </span><br><span class="line">     <span class="keyword">if</span> (newValue &gt; <span class="number">2004</span>) &#123; </span><br><span class="line">         <span class="keyword">this</span>._year = newValue; </span><br><span class="line">         <span class="keyword">this</span>.edition += newValue - <span class="number">2004</span>;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125; </span><br><span class="line">&#125;);</span><br><span class="line">book.year = <span class="number">2005</span>; </span><br><span class="line">alert(book.edition); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><h3 id="å®šä¹‰å¤šä¸ªå±æ€§"><a href="#å®šä¹‰å¤šä¸ªå±æ€§" class="headerlink" title="å®šä¹‰å¤šä¸ªå±æ€§"></a>å®šä¹‰å¤šä¸ªå±æ€§</h3><ul><li><code>Object.defineProperties(å¯¹è±¡ï¼Œè¦æ·»åŠ å’Œä¿®æ”¹å±æ€§)</code> é€šè¿‡æè¿°èµ‹ä¸€æ¬¡å®šä¹‰å¤šä¸ªå±æ€§<h3 id="è¯»å–å±æ€§çš„ç‰¹æ€§"><a href="#è¯»å–å±æ€§çš„ç‰¹æ€§" class="headerlink" title="è¯»å–å±æ€§çš„ç‰¹æ€§"></a>è¯»å–å±æ€§çš„ç‰¹æ€§</h3></li><li><code>Object.getOwnPropertyDescriptor(å±æ€§æ‰€åœ¨çš„å¯¹è±¡ï¼Œè¦è¯»å–å…¶æè¿°ç¬¦çš„å±æ€§åç§°)</code>è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœæ˜¯è®¿é—®å™¨å±æ€§ï¼Œè¿™ä¸ªå¯¹è±¡çš„å±æ€§æœ‰ configurableã€enumerableã€get å’Œ setï¼›å¦‚æœæ˜¯æ•°æ®å±æ€§ï¼Œè¿™ä¸ªå¯¹è±¡çš„å±æ€§æœ‰ configurableã€enumerableã€writable å’Œ valueã€‚</li></ul><h2 id="åˆ›å»ºå¯¹è±¡"><a href="#åˆ›å»ºå¯¹è±¡" class="headerlink" title="åˆ›å»ºå¯¹è±¡"></a>åˆ›å»ºå¯¹è±¡</h2><h3 id="å·¥å‚æ¨¡å¼"><a href="#å·¥å‚æ¨¡å¼" class="headerlink" title="å·¥å‚æ¨¡å¼"></a>å·¥å‚æ¨¡å¼</h3><ul><li>æŠ½è±¡äº†åˆ›å»ºå…·ä½“å¯¹è±¡çš„è¿‡ç¨‹<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createPerson</span> (<span class="params">name, age, job</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">    o.name = name;</span><br><span class="line">    o.age = age;</span><br><span class="line">    o.job = job;</span><br><span class="line">    o.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ„é€ å‡½æ•°æ¨¡å¼"><a href="#æ„é€ å‡½æ•°æ¨¡å¼" class="headerlink" title="æ„é€ å‡½æ•°æ¨¡å¼"></a>æ„é€ å‡½æ•°æ¨¡å¼</h3></li><li>å®šä¹‰åœ¨ Global å¯¹è±¡ï¼ˆæµè§ˆå™¨å³ window å¯¹è±¡ï¼‰ä¸­<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, job</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.job = job;</span><br><span class="line">    <span class="keyword">this</span>.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ol><li>åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡</li><li>å°†æ„é€ å‡½æ•°çš„ä½œç”¨åŸŸèµ‹ç»™æ–°å¯¹è±¡ï¼ˆthis å°±æŒ‡å‘äº†è¿™ä¸ªæ–°å¯¹è±¡ï¼‰</li><li>æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç </li><li>è¿”å›æ–°å¯¹è±¡<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person(<span class="string">"Greg"</span>, <span class="number">27</span>, <span class="string">"Doctor"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(person.constructor == Person) <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li></ol><h5 id="å°†æ„é€ å‡½æ•°å½“ä½œå‡½æ•°"><a href="#å°†æ„é€ å‡½æ•°å½“ä½œå‡½æ•°" class="headerlink" title="å°†æ„é€ å‡½æ•°å½“ä½œå‡½æ•°"></a>å°†æ„é€ å‡½æ•°å½“ä½œå‡½æ•°</h5><ul><li>æ„é€ å‡½æ•°ä¸å…¶ä»–å‡½æ•°å”¯ä¸€çš„åŒºåˆ«æ˜¯è°ƒç”¨æ–¹å¼ä¸åŒ<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person(<span class="string">"Greg"</span>, <span class="number">27</span>, <span class="string">"Doctor"</span>);</span><br><span class="line">person.sayName();</span><br><span class="line"><span class="comment">// æ™®é€šå‡½æ•°</span></span><br><span class="line">Person(<span class="string">"Greg"</span>, <span class="number">27</span>, <span class="string">"Doctor"</span>);</span><br><span class="line"><span class="built_in">window</span>.sayName();</span><br><span class="line"><span class="comment">// åœ¨å¦ä¸€ä¸ªå¯¹è±¡çš„ä½œç”¨åŸŸä¸­è°ƒç”¨</span></span><br><span class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">Person.call(o, <span class="string">"Greg"</span>, <span class="number">27</span>, <span class="string">"Doctor"</span>);</span><br><span class="line">o.sayName();</span><br></pre></td></tr></table></figure></li></ul><h5 id="æ„é€ å‡½æ•°çš„ç¼ºç‚¹"><a href="#æ„é€ å‡½æ•°çš„ç¼ºç‚¹" class="headerlink" title="æ„é€ å‡½æ•°çš„ç¼ºç‚¹"></a>æ„é€ å‡½æ•°çš„ç¼ºç‚¹</h5><ul><li><p>æ¯ä¸ªæ–¹æ³•éƒ½è¦åœ¨æ¯ä¸ªå®ä¾‹ä¸Šé‡æ–°åˆ›å»ºä¸€é</p></li><li><p>ä¸åŒå®ä¾‹ä¸Šçš„åŒåå‡½æ•°æ˜¯ä¸ç›¸ç­‰çš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, job</span>)</span>&#123; </span><br><span class="line"> <span class="keyword">this</span>.name = name; </span><br><span class="line"> <span class="keyword">this</span>.age = age; </span><br><span class="line"> <span class="keyword">this</span>.job = job; </span><br><span class="line"> <span class="keyword">this</span>.sayName = sayName; </span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayName</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line"> alert(<span class="keyword">this</span>.name); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœéœ€è¦å¾ˆå¤šæ–¹æ³•ï¼Œå°±éœ€è¦å®šä¹‰å¾ˆå¤šå…¨å±€å‡½æ•°</p><h3 id="åŸå‹æ¨¡å¼"><a href="#åŸå‹æ¨¡å¼" class="headerlink" title="åŸå‹æ¨¡å¼"></a>åŸå‹æ¨¡å¼</h3></li><li><p>æ¯ä¸ªå‡½æ•°éƒ½æœ‰ prototypeï¼ˆåŸå‹ï¼‰å±æ€§</p><ul><li>æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡<ul><li>å¯¹è±¡åŒ…å«æ‰€æœ‰å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•</li><li>æ¢å¥è¯è¯´ï¼Œprototype å°±æ˜¯é€šè¿‡è°ƒç”¨æ„é€ å‡½æ•°è€Œåˆ›å»ºçš„å¯¹è±¡å®ä¾‹çš„åŸå‹å¯¹è±¡</li></ul></li></ul></li><li><p>å¥½å¤„</p><ul><li>è®©æ‰€æœ‰å¯¹è±¡å®ä¾‹å…±äº«å®ƒæ‰€åŒ…å«çš„å±æ€§å’Œæ–¹æ³•</li><li>ä¸å¿…åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰å¯¹è±¡å®ä¾‹çš„ä¿¡æ¯ï¼Œè€Œä¸”å°†è¿™äº›ä¿¡æ¯ç›´æ¥æ·»åŠ åˆ°åŸå‹å¯¹è±¡ä¸­<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.name = <span class="string">"Grey"</span>;</span><br><span class="line">Person.prototype.age = <span class="number">29</span>;</span><br><span class="line">Person.prototype.job = <span class="string">"Doctor"</span>;</span><br><span class="line">Person.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ç†è§£åŸå‹å¯¹è±¡"><a href="#ç†è§£åŸå‹å¯¹è±¡" class="headerlink" title="ç†è§£åŸå‹å¯¹è±¡"></a>ç†è§£åŸå‹å¯¹è±¡</h5></li></ul></li><li><p>åªè¦åˆ›å»ºäº†ä¸€ä¸ªæ–°å‡½æ•°ï¼Œå°±ä¼šæ ¹æ®ä¸€ç»„ç‰¹å®šçš„è§„åˆ™ä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ª prototype å±æ€§ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘å‡½æ•°çš„åŸå‹å¯¹è±¡</p></li><li><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰åŸå‹å¯¹è±¡ä¼šè‡ªåŠ¨è·å¾—ä¸€ä¸ª constructor(æ„é€ å‡½æ•°) å±æ€§ï¼Œè¿™ä¸ªå±æ€§åŒ…å«ä¸€ä¸ªæŒ‡å‘ prototype å±æ€§æ‰€åœ¨å‡½æ•°ï¼ˆä¹Ÿå°±æ˜¯æ„é€ å‡½æ•°ï¼‰çš„æŒ‡é’ˆ</p></li><li><p><code>Person.prototype.constructor</code> æŒ‡å‘ <code>Person</code><br><img src="/.com//%E5%8E%9F%E5%9E%8B%E9%93%BE.png" alt="åŸå‹é“¾"></p></li><li><p>æ¯ä¸ªå®ä¾‹æœ‰ä¸€ä¸ª<code>[[Prototype]]</code>ï¼ˆ<code>__proto__</code>ï¼‰å±æ€§ï¼ŒæŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡</p></li><li><p><code>isPrototypeOf()</code>ç¡®å®šåŸå‹å…³ç³»</p><ul><li><code>Person.prototype.isPrototypeOf(person)</code></li></ul></li><li><p><code>Object.getPrototypeOf()</code> è¿”å›[[Prototype]] çš„æŒ‡é’ˆ</p><ul><li><code>Object.getPrototypeOf(person) == Person.prototype</code></li></ul></li><li><p>åœ¨å®ä¾‹ä¸­ä¿®æ”¹å±æ€§å€¼ï¼Œä¼šå±è”½åŸå‹ä¸­çš„åŒåå±æ€§</p><ul><li><code>delete person.name</code> åˆ é™¤å®ä¾‹ä¸­çš„ name å±æ€§ï¼Œ<code>console.log(person.name)</code> å°†è¾“å‡ºåŸå‹ä¸­çš„ name å±æ€§ <code>Person.prototype.name</code></li></ul></li><li><p><code>hasOwnProperty()</code> æ£€æµ‹ä¸€ä¸ªå±æ€§æ˜¯å¦åœ¨å®ä¾‹ä¸­ï¼Œfalse æ¥è‡ªåŸå‹</p></li></ul><h5 id="åŸå‹ä¸-in-æ“ä½œç¬¦"><a href="#åŸå‹ä¸-in-æ“ä½œç¬¦" class="headerlink" title="åŸå‹ä¸ in æ“ä½œç¬¦"></a>åŸå‹ä¸ in æ“ä½œç¬¦</h5><ul><li>å•ç‹¬ä½¿ç”¨<ul><li>å±æ€§ in å®ä¾‹</li><li>æ— è®ºå±æ€§åœ¨å®ä¾‹è¿˜æ˜¯åœ¨åŸå‹ï¼Œéƒ½è¿”å› true</li></ul></li><li>for-in<ul><li>è¿”å›å¯æšä¸¾çš„ï¼ˆenumeratedï¼‰å±æ€§</li><li>æ— è®ºå±æ€§åœ¨å®ä¾‹è¿˜æ˜¯åœ¨åŸå‹<blockquote><p><code>Object.keys(å¯¹è±¡)</code> è¿”å›æ‰€æœ‰å¯æšä¸¾å±æ€§å<br><code>Object.getOwnPropertyNames(å¯¹è±¡)</code> è¿”å›æ‰€æœ‰å±æ€§å</p></blockquote></li></ul></li></ul><h5 id="æ›´ç®€å•çš„åŸå‹è¯­æ³•"><a href="#æ›´ç®€å•çš„åŸå‹è¯­æ³•" class="headerlink" title="æ›´ç®€å•çš„åŸå‹è¯­æ³•"></a>æ›´ç®€å•çš„åŸå‹è¯­æ³•</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype = &#123;</span><br><span class="line">    name: <span class="string">"Grey"</span>,</span><br><span class="line">    age: <span class="number">29</span>,</span><br><span class="line">    job: <span class="string">"Doctor"</span>,</span><br><span class="line">    sayName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>å­—é¢é‡å½¢å¼åˆ›å»ºåŸå‹<ul><li><code>Person.prototype.constructor</code> ä¸å†æŒ‡å‘ Person</li><li>ï¼ˆå‰é¢è¯´ï¼‰æ¯åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå°±ä¼šåŒæ—¶åˆ›å»ºå®ƒçš„ prototype å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡è‡ªåŠ¨è·å¾— constructor å±æ€§</li><li>è¿™é‡Œå®Œå…¨é‡å†™äº†é»˜è®¤çš„ prototype å¯¹è±¡ï¼Œconstructor å±æ€§æŒ‡å‘ Object æ„é€ å‡½æ•°<h5 id="åŸå‹çš„åŠ¨æ€æ€§"><a href="#åŸå‹çš„åŠ¨æ€æ€§" class="headerlink" title="åŸå‹çš„åŠ¨æ€æ€§"></a>åŸå‹çš„åŠ¨æ€æ€§</h5></li></ul></li><li>å®ä¾‹ä¸­çš„æŒ‡é’ˆä»…æŒ‡å‘åŸå‹ï¼Œè€Œä¸æŒ‡å‘æ„é€ å‡½æ•°</li><li>é‡å†™åŸå‹å¯¹è±¡åˆ‡æ–­äº†ç°æœ‰åŸå‹ä¸ä¹‹å‰ä»»ä½•ä¸€ä»¶å­˜åœ¨çš„å¯¹è±¡å®ä¾‹ç›´æ¥çš„è”ç³»ï¼›å¯¹è±¡å®ä¾‹å¼•ç”¨çš„åŸå‹æ˜¯é‡å†™ä¹‹å‰çš„</li></ul><h5 id="åŸå‹æ¨¡å¼çš„ç¼ºç‚¹"><a href="#åŸå‹æ¨¡å¼çš„ç¼ºç‚¹" class="headerlink" title="åŸå‹æ¨¡å¼çš„ç¼ºç‚¹"></a>åŸå‹æ¨¡å¼çš„ç¼ºç‚¹</h5><p>å¦‚æœåŸå‹åŒ…å«å¼•ç”¨ç±»å‹å€¼çš„å±æ€§ï¼Œç”±äºåŸå‹ä¸­çš„å€¼æ˜¯æ‰€æœ‰å®ä¾‹å¯¹è±¡å…±äº«çš„ï¼Œåœ¨ä¸€ä¸ªå®ä¾‹å¯¹è±¡ä¸­ä¿®æ”¹å¼•ç”¨ç±»å‹ï¼Œä¼šä½“ç°åœ¨åˆ«çš„å®ä¾‹å¯¹è±¡ä¸­</p><h3 id="ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å‹å’ŒåŸå‹æ¨¡å¼"><a href="#ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å‹å’ŒåŸå‹æ¨¡å¼" class="headerlink" title="ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å‹å’ŒåŸå‹æ¨¡å¼"></a>ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å‹å’ŒåŸå‹æ¨¡å¼</h3><ul><li>æ„é€ å‡½æ•°æ¨¡å‹ç”¨äºå®šä¹‰å®ä¾‹å±æ€§</li><li>åŸå‹æ¨¡å¼ç”¨äºå®šä¹‰æ–¹æ³•å’Œå…±äº«å±æ€§</li></ul><h3 id="åŠ¨æ€åŸå‹æ¨¡å¼"><a href="#åŠ¨æ€åŸå‹æ¨¡å¼" class="headerlink" title="åŠ¨æ€åŸå‹æ¨¡å¼"></a>åŠ¨æ€åŸå‹æ¨¡å¼</h3><ul><li><p>åœ¨æ„é€ å‡½æ•°ä¸­æ£€æŸ¥æ˜¯å¦å­˜åœ¨æŸä¸ªæ–¹æ³•ï¼Œå†å†³å®šæ˜¯å¦éœ€è¦åˆå§‹åŒ–åŸå‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, age, job</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.job = job;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span>.sayName != <span class="string">"function"</span>) &#123;</span><br><span class="line">        Person.prototype.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            alert(<span class="keyword">this</span>.name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼"><a href="#å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼" class="headerlink" title="å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼"></a>å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼</h3></li><li><p>ä¸èƒ½ç”¨ instanceof</p></li><li><p>ä¸æ¨è</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, job</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">    o.name = name;</span><br><span class="line">    o.age = age;</span><br><span class="line">    o.job = job;</span><br><span class="line">    o.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ„é€ å‡½æ•°æ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, job</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.job = job;</span><br><span class="line">    <span class="keyword">this</span>.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼"><a href="#ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼" class="headerlink" title="ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼"></a>ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼</h3></li><li><p>ç¨³å¦¥å¯¹è±¡</p><ul><li>æ²¡æœ‰å…¬å…±å±æ€§ï¼Œæ–¹æ³•ä¹Ÿä¸å¼•ç”¨ this</li></ul></li><li><p>å®‰å…¨çš„ç¯å¢ƒä¸­ç¦æ­¢ä½¿ç”¨ this å’Œ new</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, job</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">    o.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(name);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åªæœ‰ sayName() èƒ½è®¿é—®æ•°æ®æˆå‘˜</p></li></ul><h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><ul><li>é¢å‘å¯¹è±¡è¯­è¨€ä¸­<ul><li>æ¥å£ç»§æ‰¿<ul><li>åªç»§æ‰¿æ–¹æ³•ç­¾å</li></ul></li><li>å®ç°ç»§æ‰¿<ul><li>ç»§æ‰¿å®é™…çš„æ–¹æ³•</li></ul></li></ul></li><li>ECMAScript ä¸­å‡½æ•°æ²¡æœ‰ç­¾åï¼Œæ— æ³•å®ç°æ¥å£ç»§æ‰¿ï¼Œæ•…åªæ”¯æŒå®ç°ç»§æ‰¿<ul><li>ä¾é åŸå‹é“¾<h3 id="åŸå‹é“¾"><a href="#åŸå‹é“¾" class="headerlink" title="åŸå‹é“¾"></a>åŸå‹é“¾</h3></li></ul></li><li>åˆ©ç”¨åŸå‹è®©ä¸€ä¸ªå¼•ç”¨ç±»å‹ç»§æ‰¿å¦ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å±æ€§å’Œæ–¹æ³•<blockquote><p>æ„é€ å‡½æ•° A å’ŒåŸå‹ A éƒ½æœ‰ä¸€ä¸ªæŒ‡å‘åŸå‹å¯¹è±¡ A çš„æŒ‡é’ˆï¼Œè€ŒåŸå‹å¯¹è±¡ A æœ‰ä¸€ä¸ªæŒ‡å‘æ„é€ å‡½æ•° A çš„æŒ‡é’ˆã€‚<br>è®©åŸå‹å¯¹è±¡ A ç­‰äºå¦ä¸€ä¸ªç±»å‹çš„å®ä¾‹ Bã€‚<br>æ­¤æ—¶åŸå‹å¯¹è±¡ Aï¼ˆä¹Ÿå°±æ˜¯å®ä¾‹ Bï¼‰å°†åŒ…å«ä¸€ä¸ªæŒ‡å‘åŸå‹å¯¹è±¡ B çš„æŒ‡é’ˆï¼ŒåŸå‹å¯¹è±¡ B ä¸­åŒ…å«ä¸€ä¸ªæŒ‡å‘æ„é€ å‡½æ•° B çš„æŒ‡é’ˆã€‚<br>å‡å¦‚åŸå‹ B åˆæ˜¯å¦ä¸€ä¸ªç±»å‹çš„å®ä¾‹ Cï¼Œé‚£ä¹ˆä¸Šè¿°å…³ç³»ä¾ç„¶æˆç«‹ï¼Œå¦‚æ­¤å±‚å±‚é€’è¿›ï¼Œå°±æ„æˆäº†å®ä¾‹ä¸åŸå‹çš„é“¾æ¡ã€‚<br>è¿™å°±æ˜¯æ‰€è°“åŸå‹é“¾çš„åŸºæœ¬æ¦‚å¿µã€‚</p></blockquote></li></ul><h5 id="é»˜è®¤çš„åŸå‹"><a href="#é»˜è®¤çš„åŸå‹" class="headerlink" title="é»˜è®¤çš„åŸå‹"></a>é»˜è®¤çš„åŸå‹</h5><p>æ‰€æœ‰å¼•ç”¨ç±»å‹é»˜è®¤ç»§æ‰¿ Objectï¼Œåœ¨åŸå‹é“¾æœ€åéƒ½æ˜¯ Object åŸå‹å¯¹è±¡ï¼ŒåŒ…å«ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ Object æ„é€ å‡½æ•°ã€‚</p><h5 id="ç¡®å®šåŸå‹å’Œå®ä¾‹çš„å…³ç³»"><a href="#ç¡®å®šåŸå‹å’Œå®ä¾‹çš„å…³ç³»" class="headerlink" title="ç¡®å®šåŸå‹å’Œå®ä¾‹çš„å…³ç³»"></a>ç¡®å®šåŸå‹å’Œå®ä¾‹çš„å…³ç³»</h5><ul><li><code>å®ä¾‹ instanceof æ„é€ å‡½æ•°</code> å®ä¾‹çš„åŸå‹é“¾ä¸­å‡ºç°è¿‡æ„é€ å‡½æ•°å°±è¿”å› true</li><li><code>åŸå‹å¯¹è±¡.isPrototypeOf(å®ä¾‹)</code> å®ä¾‹çš„åŸå‹é“¾ä¸­å‡ºç°è¿‡åŸå‹å¯¹è±¡å°±è¿”å› true</li></ul><h5 id="å¯¹è±¡å­—é¢é‡åˆ›å»ºåŸå‹æ–¹æ³•ä¼šé‡å†™åŸå‹é“¾"><a href="#å¯¹è±¡å­—é¢é‡åˆ›å»ºåŸå‹æ–¹æ³•ä¼šé‡å†™åŸå‹é“¾" class="headerlink" title="å¯¹è±¡å­—é¢é‡åˆ›å»ºåŸå‹æ–¹æ³•ä¼šé‡å†™åŸå‹é“¾"></a>å¯¹è±¡å­—é¢é‡åˆ›å»ºåŸå‹æ–¹æ³•ä¼šé‡å†™åŸå‹é“¾</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType();</span><br><span class="line"><span class="comment">// å¯¼è‡´ä¸Šä¸€è¡Œä»£ç æ— æ•ˆ</span></span><br><span class="line">SubType.prototype = &#123;</span><br><span class="line">    getSubValue: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.subproperty;</span><br><span class="line">    &#125;,</span><br><span class="line">    someOtherMethod: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h5 id="åŸå‹é“¾çš„ç¼ºç‚¹"><a href="#åŸå‹é“¾çš„ç¼ºç‚¹" class="headerlink" title="åŸå‹é“¾çš„ç¼ºç‚¹"></a>åŸå‹é“¾çš„ç¼ºç‚¹</h5><ul><li>ä¸èƒ½ç»™è¶…ç±»å‹çš„æ„é€ å‡½æ•°ä¼ é€’å‚æ•°<h3 id="å€Ÿç”¨æ„é€ å‡½æ•°ï¼ˆä¼ªé€ å¯¹è±¡-ç»å…¸ç»§æ‰¿ï¼‰"><a href="#å€Ÿç”¨æ„é€ å‡½æ•°ï¼ˆä¼ªé€ å¯¹è±¡-ç»å…¸ç»§æ‰¿ï¼‰" class="headerlink" title="å€Ÿç”¨æ„é€ å‡½æ•°ï¼ˆä¼ªé€ å¯¹è±¡/ç»å…¸ç»§æ‰¿ï¼‰"></a>å€Ÿç”¨æ„é€ å‡½æ•°ï¼ˆä¼ªé€ å¯¹è±¡/ç»å…¸ç»§æ‰¿ï¼‰</h3></li><li>åœ¨å­ç±»å‹æ„é€ å‡½æ•°çš„å†…éƒ¨è°ƒç”¨è¶…ç±»å‹æ„é€ å‡½æ•°ï¼ˆåˆ©ç”¨ call æˆ– applyï¼‰<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    â€¦â€¦</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ç»§æ‰¿äº† SuperType</span></span><br><span class="line">    SUperType.call(<span class="keyword">this</span>, name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>å¯ä»¥ç»™è¶…ç±»å‹çš„æ„é€ å‡½æ•°ä¼ é€’å‚æ•°<h3 id="ç»„åˆç»§æ‰¿ï¼ˆä¼ªç»å…¸ç»§æ‰¿ï¼‰"><a href="#ç»„åˆç»§æ‰¿ï¼ˆä¼ªç»å…¸ç»§æ‰¿ï¼‰" class="headerlink" title="ç»„åˆç»§æ‰¿ï¼ˆä¼ªç»å…¸ç»§æ‰¿ï¼‰"></a>ç»„åˆç»§æ‰¿ï¼ˆä¼ªç»å…¸ç»§æ‰¿ï¼‰</h3></li><li>æœ€å¸¸ç”¨</li><li>ç»„åˆåŸå‹é“¾å’Œå€Ÿç”¨æ„é€ å‡½æ•°</li><li>åŸå‹é“¾å®ç°å¯¹åŸå‹å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿</li><li>å€Ÿç”¨æ„é€ å‡½æ•°å®ç°å¯¹å®ä¾‹å±æ€§çš„ç»§æ‰¿</li><li>ç¼ºç‚¹<ul><li>è°ƒç”¨ä¸¤æ¬¡è¶…ç±»å‹æ„é€ å‡½æ•°<ul><li>åˆ›å»ºå­ç±»å‹åŸå‹</li><li>å­ç±»å‹æ„é€ å‡½æ•°å†…éƒ¨</li></ul></li></ul></li></ul><h3 id="åŸå‹å¼ç»§æ‰¿"><a href="#åŸå‹å¼ç»§æ‰¿" class="headerlink" title="åŸå‹å¼ç»§æ‰¿"></a>åŸå‹å¼ç»§æ‰¿</h3><ul><li><code>Object.create(ä½œä¸ºæ–°å¯¹è±¡åŸå‹çš„å¯¹è±¡ï¼Œ ä½œä¸ºæ–°å¯¹è±¡å®šä¹‰é¢å¤–å±æ€§çš„å¯¹è±¡)</code> è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡</li></ul><h3 id="å¯„ç”Ÿå¼ç»§æ‰¿"><a href="#å¯„ç”Ÿå¼ç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿå¼ç»§æ‰¿"></a>å¯„ç”Ÿå¼ç»§æ‰¿</h3><ul><li>åˆ›å»ºä¸€ä¸ªä»…ç”¨äºå°è£…ç»§æ‰¿è¿‡ç¨‹çš„å‡½æ•°ï¼Œè¯¥<br>å‡½æ•°åœ¨å†…éƒ¨ä»¥æŸç§æ–¹å¼æ¥å¢å¼ºå¯¹è±¡ï¼Œæœ€åå†åƒçœŸåœ°æ˜¯å®ƒåšäº†æ‰€æœ‰å·¥ä½œä¸€æ ·è¿”å›å¯¹è±¡<h3 id="å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿"><a href="#å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿"></a>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿</h3></li><li>é€šè¿‡å€Ÿç”¨æ„é€ å‡½æ•°æ¥ç»§æ‰¿å±æ€§</li><li>é€šè¿‡åŸå‹é“¾çš„æ··æˆå½¢å¼æ¥ç»§æ‰¿æ–¹æ³•</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScripté«˜çº§ç¨‹åºè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬äº”ç«  å¼•ç”¨ç±»å‹</title>
      <link href="/2020/02/22/%E7%AC%AC5%E7%AB%A0-%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/"/>
      <url>/2020/02/22/%E7%AC%AC5%E7%AB%A0-%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<ul><li><strong>å¼•ç”¨ç±»å‹</strong>æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨äºå°†æ•°æ®å’ŒåŠŸèƒ½ç»„ç»‡åœ¨ä¸€èµ·ã€‚</li><li>å¼•ç”¨ç±»å‹çš„å€¼ï¼ˆå¯¹è±¡ï¼‰æ˜¯å¼•ç”¨ç±»å‹çš„ä¸€ä¸ªå®ä¾‹ã€‚</li><li><u>å¼•ç”¨ç±»å‹ä¸ç±»çœ‹èµ·æ¥ç›¸ä¼¼ï¼Œä½†å¹¶ä¸ç›¸åŒã€‚</u></li><li>ECMAScript ä»æŠ€æœ¯ä¸Šè®²æ˜¯ä¸€é—¨é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œä½†ä¸å…·å¤‡ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€æ‰€æ”¯æŒçš„ç±»å’Œæ¥å£ç­‰åŸºæœ¬ç»“æ„ã€‚</li><li>å¼•ç”¨ç±»å‹ä¹Ÿè¢«ç§°ä¸º<strong>å¯¹è±¡å®šä¹‰</strong>ï¼Œæè¿°ä¸€ç±»å¯¹è±¡æ‰€å…·æœ‰çš„å±æ€§å’Œæ–¹æ³•ã€‚</li><li>ECMAScript æä¾›ç±»å¾ˆå¤šåŸç”Ÿå¼•ç”¨ç±»å‹ï¼ˆä¾‹å¦‚ Objectï¼‰</li></ul><h2 id="Object-ç±»å‹"><a href="#Object-ç±»å‹" class="headerlink" title="Object ç±»å‹"></a>Object ç±»å‹</h2><p>å¤§å¤šæ•°å¯¹è±¡éƒ½æ˜¯ Object ç±»å‹çš„å®ä¾‹</p><h6 id="åˆ›å»ºå®ä¾‹"><a href="#åˆ›å»ºå®ä¾‹" class="headerlink" title="åˆ›å»ºå®ä¾‹"></a>åˆ›å»ºå®ä¾‹</h6><ul><li>new æ“ä½œç¬¦<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">person.name = <span class="string">"Nicholas"</span>;</span><br><span class="line">person.age = <span class="number">29</span>;</span><br></pre></td></tr></table></figure></li><li>å¯¹è±¡å­—é¢é‡<ul><li>å¯¹è±¡å®šä¹‰çš„ä¸€ç§ç®€å†™å½¢å¼ï¼Œç›®çš„åœ¨äºç®€åŒ–åˆ›å»ºåŒ…å«å¤§é‡å±æ€§çš„å¯¹è±¡çš„è¿‡ç¨‹ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    name: <span class="string">"Nicholas"</span>,</span><br><span class="line">    age: <span class="number">29</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰åªåŒ…å«é»˜è®¤å±æ€§å’Œæ–¹æ³•çš„å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> person = &#123;&#125;;</span><br><span class="line"><span class="comment">// æˆ–</span></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br></pre></td></tr></table></figure><blockquote><p>é€šè¿‡å¯¹è±¡å­—é¢é‡å®šä¹‰å¯¹è±¡æ—¶ï¼Œå®é™…ä¸Šä¸ä¼šè°ƒç”¨ Object æ„é€ å‡½æ•°<br>ç–‘é—®ï¼šå¯¹è±¡å­—é¢é‡æ˜¯æ€ä¹ˆå®šä¹‰å¯¹è±¡çš„ï¼Ÿ</p></blockquote></li></ul></li></ul><h2 id="Array-ç±»å‹"><a href="#Array-ç±»å‹" class="headerlink" title="Array ç±»å‹"></a>Array ç±»å‹</h2><p>å’Œå…¶ä»–è¯­è¨€çš„åŒºåˆ«ï¼šæ¯ä¸€é¡¹å¯ä»¥ä¿å­˜ä»»ä½•ç±»å‹çš„æ•°æ®ï¼Œäº’ç›¸ä¹‹é—´ä¸å½±å“</p><h6 id="åˆ›å»ºå®ä¾‹-1"><a href="#åˆ›å»ºå®ä¾‹-1" class="headerlink" title="åˆ›å»ºå®ä¾‹"></a>åˆ›å»ºå®ä¾‹</h6><ul><li>new<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> colors = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line"><span class="keyword">var</span> colors = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">20</span>); <span class="comment">// length = 20</span></span><br><span class="line"><span class="keyword">var</span> colors = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">"Grey"</span>); <span class="comment">// length = 1</span></span><br></pre></td></tr></table></figure></li><li>çœç•¥ new<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> colors = <span class="built_in">Array</span>(<span class="number">3</span>); <span class="comment">// length = 3</span></span><br></pre></td></tr></table></figure></li><li>æ•°ç»„å­—é¢é‡<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> names = [];</span><br><span class="line"><span class="keyword">var</span> colors = [<span class="string">"red"</span>, <span class="string">"blue"</span>, <span class="string">"green"</span>];</span><br></pre></td></tr></table></figure><blockquote><p>æ•°ç»„å­—é¢é‡è¡¨ç¤ºæ³•æ—¶ä¸ä¼šè°ƒç”¨ Array æ„é€ å‡½æ•°</p></blockquote></li></ul><hr><ul><li>length å¯ä¿®æ”¹ï¼Œä¼šç§»é™¤è¶…å‡ºçš„é¡¹</li><li>å½“æŠŠä¸€ä¸ªå€¼æ”¾åœ¨è¶…å‡ºå½“å‰æ•°ç»„å¤§å°çš„ä½ç½®ä¸Šæ—¶ï¼Œä¼šé‡æ–°è®¡ç®—é•¿åº¦ï¼Œé•¿åº¦å€¼ä¸ºæœ€åä¸€é¡¹çš„ç´¢å¼• + 1<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> colors = [<span class="string">"red"</span>, <span class="string">"blue"</span>, <span class="string">"green"</span>];</span><br><span class="line"><span class="comment">// ["red", "blue", "green"]</span></span><br><span class="line">colors.length = <span class="number">2</span>;</span><br><span class="line"><span class="comment">// ["red", "blue"]</span></span><br><span class="line">colors.length = <span class="number">3</span>;</span><br><span class="line"><span class="comment">// ["red", "blue", empty]</span></span><br><span class="line"><span class="built_in">console</span>.log(colors[<span class="number">3</span>]);</span><br><span class="line"><span class="comment">// ["red", "blue", empty, "green"] length = 4</span></span><br></pre></td></tr></table></figure><h3 id="æ£€æµ‹æ•°ç»„"><a href="#æ£€æµ‹æ•°ç»„" class="headerlink" title="æ£€æµ‹æ•°ç»„"></a>æ£€æµ‹æ•°ç»„</h3><code>value instanceof Array</code> å‡å®šåªæœ‰ä¸€ä¸ªå…¨å±€æ‰§è¡Œç¯å¢ƒï¼Œå¦‚æœä»ä¸€ä¸ªæ¡†æ¶å‘å¦ä¸€ä¸ªæ¡†æ¶ä¼ å…¥æ•°ç»„ï¼Œå°±å…·æœ‰ä¸åŒçš„æ„é€ å‡½æ•°<br><code>Array.isArray()</code><h3 id="è½¬æ¢æ–¹æ³•"><a href="#è½¬æ¢æ–¹æ³•" class="headerlink" title="è½¬æ¢æ–¹æ³•"></a>è½¬æ¢æ–¹æ³•</h3></li><li><code>Array.toString()</code></li><li><code>Array.toLocaleString()</code></li><li><code>Array.valueOf()</code><h3 id="æ ˆ-é˜Ÿåˆ—æ–¹æ³•"><a href="#æ ˆ-é˜Ÿåˆ—æ–¹æ³•" class="headerlink" title="æ ˆ/é˜Ÿåˆ—æ–¹æ³•"></a>æ ˆ/é˜Ÿåˆ—æ–¹æ³•</h3></li><li><code>Array.push</code> æœ«å°¾æ·»åŠ </li><li><code>Array.pop</code> å–æœ€åä¸€é¡¹å¹¶ç§»é™¤</li><li><code>Array.shift</code> å–ç¬¬ä¸€é¡¹å¹¶ç§»é™¤</li><li><code>Array.unshift</code> å¤´éƒ¨æ·»åŠ <h3 id="é‡æ’åº"><a href="#é‡æ’åº" class="headerlink" title="é‡æ’åº"></a>é‡æ’åº</h3></li><li><code>Array.reverse()</code> åè½¬é¡ºåº</li><li><code>Array.sort()</code> å…ˆè½¬ toString()ï¼Œå­—ç¬¦ä¸²å‡åº<ul><li>sort æ¥æ”¶æ¯”è¾ƒå‡½æ•°<ul><li>params1 -&gt; params2 ===&gt; -1</li><li>params2 -&gt; params1 ===&gt; 1<h3 id="æ“ä½œæ–¹æ³•"><a href="#æ“ä½œæ–¹æ³•" class="headerlink" title="æ“ä½œæ–¹æ³•"></a>æ“ä½œæ–¹æ³•</h3></li></ul></li></ul></li><li><code>Array.concat</code></li><li><code>Array.slice(a, b)</code> [a, b)<ul><li>è´Ÿæ•°åˆ™ä»æœ«å°¾å¼€å§‹æ•°</li></ul></li><li><code>Array.splice(a, b, ...c)</code><ul><li>a ä½ç½®</li><li>b è¦åˆ é™¤çš„é¡¹æ•°</li><li>c æ’å…¥çš„å†…å®¹ï¼ˆè‹¥å¹²ï¼‰</li><li>return è¢«åˆ é™¤çš„å†…å®¹</li></ul></li></ul><h3 id="ä½ç½®æ–¹æ³•"><a href="#ä½ç½®æ–¹æ³•" class="headerlink" title="ä½ç½®æ–¹æ³•"></a>ä½ç½®æ–¹æ³•</h3><p>æŸ¥æ‰¾æ•°ç»„å†…å®¹ï¼Œ<code>===</code>ï¼Œè¿”å›ä¸‹æ ‡</p><ul><li><code>Array.indexOf()</code></li><li><code>Array.lastIndexOf()</code><h3 id="è¿­ä»£æ–¹æ³•"><a href="#è¿­ä»£æ–¹æ³•" class="headerlink" title="è¿­ä»£æ–¹æ³•"></a>è¿­ä»£æ–¹æ³•</h3></li><li>ä¸¤ä¸ªå‚æ•°<ul><li>è¦åœ¨æ¯ä¸€é¡¹ä¸Šè¿è¡Œçš„å‡½æ•°<ul><li>ä¸‰ä¸ªå‚æ•°<ul><li>æ•°ç»„é¡¹çš„å€¼</li><li>è¯¥é¡¹å†æ•°ç»„ä¸­çš„ä½ç½®</li><li>æ•°ç»„å¯¹è±¡æœ¬èº«</li></ul></li></ul></li><li>ï¼ˆå¯é€‰çš„ï¼‰è¿è¡Œè¯¥å‡½æ•°çš„ä½œç”¨åŸŸå¯¹è±¡<ul><li>å½±å“thisçš„å€¼</li></ul></li></ul></li><li><code>Array.every()</code> æ¯ä¸€é¡¹éƒ½è¿”å› trueï¼Œåˆ™è¿”å› true</li><li><code>Array.some()</code> ä»»ä¸€é¡¹è¿”å› trueï¼Œåˆ™è¿”å› true</li><li><code>Array.filter()</code> è¿”å›è¯¥å‡½æ•°è¿”å› true çš„é¡¹ç»„æˆçš„æ•°ç»„</li><li><code>Array.map()</code> è¿”å›æ¯æ¬¡å‡½æ•°è°ƒç”¨çš„ç»“æœç»„æˆçš„æ•°ç»„</li><li><code>Array.forEach()</code> æ²¡æœ‰è¿”å›å€¼ </li></ul><p>ä»¥ä¸Šæ–¹æ³•éƒ½ä¸å›ä¿®æ”¹æ•°ç»„ä¸­åŒ…å«çš„å€¼</p><h3 id="å½’å¹¶æ–¹æ³•"><a href="#å½’å¹¶æ–¹æ³•" class="headerlink" title="å½’å¹¶æ–¹æ³•"></a>å½’å¹¶æ–¹æ³•</h3><ul><li><p><code>Array.reduce()</code></p></li><li><p><code>Array.reduceRight()</code></p></li><li><p>ä¸¤ä¸ªå‚æ•°</p><ul><li>æ¯ä¸€é¡¹ä¸Šè°ƒç”¨çš„å‡½æ•°<ul><li>å››ä¸ªå‚æ•°<ul><li>å‰ä¸€ä¸ªå€¼</li><li>å½“å‰å€¼</li><li>é¡¹çš„ç´¢å¼•</li><li>æ•°ç»„å¯¹è±¡</li></ul></li></ul></li><li>ï¼ˆå¯é€‰çš„ï¼‰ä½œä¸ºå½’å¹¶åŸºç¡€çš„åˆå§‹å€¼</li></ul></li><li><p>è¿”å›å€¼ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ ç»™ä¸‹ä¸€é¡¹</p></li><li><p>ç¬¬ä¸€æ¬¡è¿­ä»£å‘ç”Ÿåœ¨ç¬¬äºŒé¡¹ä¸Šï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•°ç»„çš„ç¬¬ä¸€é¡¹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ•°ç»„çš„ç¬¬äºŒé¡¹</p></li></ul><h2 id="Date-ç±»å‹"><a href="#Date-ç±»å‹" class="headerlink" title="Date ç±»å‹"></a>Date ç±»å‹</h2><ul><li><code>Date.parse()</code> <ul><li>params: è¡¨ç¤ºæ—¥æœŸå­—ç¬¦ä¸²ï¼Œæ ¼å¼å› åœ°åŒºè€Œå¼‚</li><li>return: æ¯«ç§’</li></ul></li><li><code>Date.UTC()</code><ul><li>params: å¹´ä»½ã€æœˆä»½ï¼ˆ0å¼€å§‹ï¼‰ã€å¤©æ•°ã€å°æ—¶ã€åˆ†é’Ÿã€ç§’ã€æ¯«ç§’</li><li>return: æ¯«ç§’</li></ul></li><li><code>Date.now()</code><h3 id="ç»§æ‰¿çš„æ–¹æ³•"><a href="#ç»§æ‰¿çš„æ–¹æ³•" class="headerlink" title="ç»§æ‰¿çš„æ–¹æ³•"></a>ç»§æ‰¿çš„æ–¹æ³•</h3></li><li><code>Date.toLocaleString()</code> æ ¹æ®å½“åœ°æ—¶åŒº</li><li><code>Date.toString()</code> å¸¦æœ‰æ—¶åŒºä¿¡æ¯</li><li><code>Date.valueOf()</code> æ¯«ç§’<h3 id="æ—¥æœŸæ ¼å¼åŒ–æ–¹æ³•"><a href="#æ—¥æœŸæ ¼å¼åŒ–æ–¹æ³•" class="headerlink" title="æ—¥æœŸæ ¼å¼åŒ–æ–¹æ³•"></a>æ—¥æœŸæ ¼å¼åŒ–æ–¹æ³•</h3></li><li><code>Date.toDateString()</code></li><li><code>Date.toTimeString()</code></li><li><code>Date.toLocaleDateString()</code></li><li><code>Date.toLocaleTimeString()</code></li><li><code>Date.toUTCString()</code></li><li><code>Date.toLocaleString()</code></li></ul><p>å› æµè§ˆå™¨è€Œå¼‚</p><h2 id="RegExp-ç±»å‹"><a href="#RegExp-ç±»å‹" class="headerlink" title="RegExp ç±»å‹"></a>RegExp ç±»å‹</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> expression = <span class="regexp">/ pattern /</span> flags ;</span><br></pre></td></tr></table></figure><ul><li>pattern<ul><li>( [ { \ ^ $ | ) ? * + . ] } éœ€è¦è½¬ä¹‰</li></ul></li><li>flags<ul><li>g å…¨å±€ï¼Œé»˜è®¤åŒ¹é…ç¬¬ä¸€ä¸ªåœæ­¢</li><li>i ä¸åŒºåˆ†å¤§å°å†™</li><li>m å¤šè¡Œæ¨¡å¼<h3 id="RegExp-å®ä¾‹å±æ€§"><a href="#RegExp-å®ä¾‹å±æ€§" class="headerlink" title="RegExp å®ä¾‹å±æ€§"></a>RegExp å®ä¾‹å±æ€§</h3></li></ul></li><li><code>global</code> </li><li><code>ignoreCase</code> </li><li><code>lastIndex</code> </li><li><code>multiline</code> </li><li><code>source</code> </li></ul><h3 id="RegExp-å®ä¾‹æ–¹æ³•"><a href="#RegExp-å®ä¾‹æ–¹æ³•" class="headerlink" title="RegExp å®ä¾‹æ–¹æ³•"></a>RegExp å®ä¾‹æ–¹æ³•</h3><ul><li><code>exec</code> </li><li><code>test</code> </li><li><code>toString</code> </li><li><code>toLocaleString</code> </li><li><code>valueOf</code> </li></ul><h3 id="æ„é€ å‡½æ•°å±æ€§"><a href="#æ„é€ å‡½æ•°å±æ€§" class="headerlink" title="æ„é€ å‡½æ•°å±æ€§"></a>æ„é€ å‡½æ•°å±æ€§</h3><p>å…¶ä»–è¯­è¨€ä¸­è¢«çœ‹æˆæ˜¯<strong>é™æ€å±æ€§</strong></p><table><thead><tr><th>é•¿å±æ€§å</th><th>çŸ­å±æ€§å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>input</td><td>$_</td><td>æœ€è¿‘ä¸€æ¬¡è¦åŒ¹é…çš„å­—ç¬¦ä¸²</td></tr><tr><td>lastMatch</td><td>$&amp;</td><td>æœ€è¿‘ä¸€æ¬¡çš„åŒ¹é…é¡¹</td></tr><tr><td>lastParen</td><td>$+</td><td>æœ€è¿‘ä¸€æ¬¡åŒ¹é…çš„æ•è·ç»„</td></tr><tr><td>leftContext</td><td>$`</td><td>input å­—ç¬¦ä¸²ä¸­ lastMatch ä¹‹å‰çš„æ–‡æœ¬</td></tr><tr><td>multiline</td><td>$*</td><td>å¸ƒå°”å€¼ï¼Œæ˜¯å¦æ‰€æœ‰è¡¨è¾¾å¼éƒ½ä½¿ç”¨å¤šè¡Œæ¨¡å¼</td></tr><tr><td>rightContext</td><td>$â€™</td><td>input å­—ç¬¦ä¸²ä¸­ lastMatch ä¹‹åçš„æ–‡æœ¬</td></tr></tbody></table><h2 id="Function-ç±»å‹"><a href="#Function-ç±»å‹" class="headerlink" title="Function ç±»å‹"></a>Function ç±»å‹</h2><ul><li><p>æ¯ä¸ªå‡½æ•°éƒ½æ˜¯ Function ç±»å‹çš„å®ä¾‹ï¼Œå…·æœ‰å±æ€§å’Œæ–¹æ³•ã€‚</p></li><li><p>å‡½æ•°åæ˜¯ä¸€ä¸ªåªæƒ³å‡½æ•°å¯¹è±¡çš„æŒ‡é’ˆï¼Œä¸ä¼šä¸æŸä¸ªå‡½æ•°ç»‘å®šã€‚</p><h5 id="åˆ›å»ºå®ä¾‹-2"><a href="#åˆ›å»ºå®ä¾‹-2" class="headerlink" title="åˆ›å»ºå®ä¾‹"></a>åˆ›å»ºå®ä¾‹</h5></li><li><p>å‡½æ•°å£°æ˜</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span> (<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å‡½æ•°è¡¨è¾¾å¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sum = <span class="function"><span class="keyword">function</span>(<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>åŒºåˆ«ï¼š<br>è§£æå™¨ä¼šå…ˆè¯»å–å‡½æ•°å£°æ˜ï¼Œåœ¨æ‰§è¡Œä»»ä½•ä»£ç ä¹‹å‰å¯ç”¨ï¼ˆå‡½æ•°å£°æ˜æå‡ï¼‰<br>å‡½æ•°è¡¨è¾¾å¼è¦ç­‰è§£æå™¨æ‰§è¡Œåˆ°å®ƒæ‰€åœ¨çš„ä»£ç è¡Œæ‰ä¼šè¢«è§£é‡Šæ‰§è¡Œ</p></blockquote></li><li><p>Function æ„é€ å‡½æ•°ï¼ˆä¸æ¨èï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sum = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">"num1"</span>, <span class="string">"num2"</span>, <span class="string">"return num1 + num2"</span>);</span><br></pre></td></tr></table></figure><h3 id="æ²¡æœ‰é‡è½½"><a href="#æ²¡æœ‰é‡è½½" class="headerlink" title="æ²¡æœ‰é‡è½½"></a>æ²¡æœ‰é‡è½½</h3><p>å£°æ˜ä¸¤ä¸ªåŒåå‡½æ•°ï¼Œåé¢çš„å‡½æ•°è¦†ç›–å‰é¢çš„ï¼Œç»“åˆ â€œå‡½æ•°æ˜¯å¯¹è±¡ï¼Œå‡½æ•°åæ˜¯æŒ‡é’ˆâ€ å¾ˆå¥½ç†è§£ã€‚</p><h3 id="ä½œä¸ºå€¼çš„å‡½æ•°"><a href="#ä½œä¸ºå€¼çš„å‡½æ•°" class="headerlink" title="ä½œä¸ºå€¼çš„å‡½æ•°"></a>ä½œä¸ºå€¼çš„å‡½æ•°</h3></li><li><p>å‡½æ•°åæœ¬èº«æ˜¯å˜é‡ï¼Œå¯ä»¥ä½œä¸ºå€¼æ¥ä½¿ç”¨</p></li><li><p>å¯ä»¥ä½œä¸ºå‚æ•°ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºè¿”å›å€¼</p></li></ul><h3 id="å‡½æ•°çš„å†…éƒ¨å±æ€§"><a href="#å‡½æ•°çš„å†…éƒ¨å±æ€§" class="headerlink" title="å‡½æ•°çš„å†…éƒ¨å±æ€§"></a>å‡½æ•°çš„å†…éƒ¨å±æ€§</h3><ul><li><code>arguments</code> ç±»æ•°ç»„å¯¹è±¡<ul><li><code>callee</code> å±æ€§ï¼Œè¯¥å±æ€§æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘æ‹¥æœ‰è¿™ä¸ª arguments å¯¹è±¡çš„å‡½æ•°</li></ul></li><li><code>this</code> å¼•ç”¨çš„æ˜¯æ‰§è¡Œå‡½æ•°çš„ç¯å¢ƒå¯¹è±¡<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sindow.color = <span class="string">"red"</span>;</span><br><span class="line"><span class="keyword">var</span> o = &#123; <span class="attr">color</span>: <span class="string">"blue"</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayColor</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.color);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sayColor(); <span class="comment">// "red"</span></span><br><span class="line"></span><br><span class="line">o.sayColor = sayColor;</span><br><span class="line">o.sayColor();   <span class="comment">// "blue"</span></span><br></pre></td></tr></table></figure></li><li><code>caller</code> è°ƒç”¨å½“å‰å‡½æ•°çš„å‡½æ•°çš„å¼•ç”¨ï¼Œå…¨å±€ä¸­è°ƒç”¨å½“å‰å‡½æ•°åˆ™ null<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    inner();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inner</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(inner.caller);</span><br><span class="line">    <span class="comment">// inner.callr æŒ‡å‘ outer()</span></span><br><span class="line">    <span class="comment">// ç­‰ä»·äº arguments.callee.caller</span></span><br><span class="line">&#125;</span><br><span class="line">outer();</span><br></pre></td></tr></table></figure><h3 id="å‡½æ•°å±æ€§å’Œæ–¹æ³•"><a href="#å‡½æ•°å±æ€§å’Œæ–¹æ³•" class="headerlink" title="å‡½æ•°å±æ€§å’Œæ–¹æ³•"></a>å‡½æ•°å±æ€§å’Œæ–¹æ³•</h3></li><li><code>length</code> å‡½æ•°å¸Œæœ›æ¥æ”¶çš„å‘½åå‚æ•°çš„ä¸ªæ•°</li><li><code>prototype</code><ul><li>å¯¹å¼•ç”¨ç±»å‹è€Œè¨€ï¼Œprototype æ˜¯ä¿å­˜å®ƒä»¬æ‰€æœ‰å®ä¾‹æ–¹æ³•çš„çœŸæ­£æ‰€åœ¨ã€‚æ¢å¥è¯è¯´ï¼ŒtoString() å’Œ valueOf() ç­‰æ–¹æ³•éƒ½æ˜¯ä¿å­˜åœ¨ prototype åä¸‹ï¼Œåªæ˜¯é€šè¿‡å„è‡ªå¯¹è±¡çš„å®ä¾‹è®¿é—®ã€‚</li><li>ä¸å¯æšä¸¾ï¼Œfor-in æ— æ³•å‘ç°ã€‚</li></ul></li></ul><p>æ¯ä¸ªå‡½æ•°éƒ½åŒ…å«ä¸¤ä¸ªéç»§æ‰¿è€Œæ¥çš„æ–¹æ³•ï¼Œéƒ½æ˜¯åœ¨ç‰¹å®šçš„ä½œç”¨åŸŸä¸­è°ƒç”¨å‡½æ•°ï¼Œå®é™…ä¸Šç­‰äºè®¾ç½®å‡½æ•°ä½“å†… this å¯¹è±¡çš„å€¼ã€‚</p><ul><li><p><code>apply</code> </p><ul><li>ä¸¤ä¸ªå‚æ•°<ul><li>åœ¨å…¶ä¸­è¿è¡Œå‡½æ•°çš„ä½œç”¨åŸŸ</li><li>å‚æ•°æ•°ç»„</li></ul></li></ul></li><li><p><code>call</code> </p><ul><li>1 + n ä¸ªå‚æ•°<ul><li>åœ¨å…¶ä¸­è¿è¡Œå‡½æ•°çš„ä½œç”¨åŸŸ</li><li>ä¸€ä¸ªä¸€ä¸ªåœ°ä¼ å…¥å‚æ•°</li></ul></li></ul></li><li><p><code>bind</code> åˆ›å»ºä¸€ä¸ªå‡½æ•°çš„å®ä¾‹ï¼Œå…¶ this å€¼ä¼šè¢«ç»‘å®šåˆ°ä¼ ç»™ bind() å‡½æ•°çš„å€¼</p></li></ul><h2 id="åŸºæœ¬åŒ…è£…ç±»å‹"><a href="#åŸºæœ¬åŒ…è£…ç±»å‹" class="headerlink" title="åŸºæœ¬åŒ…è£…ç±»å‹"></a>åŸºæœ¬åŒ…è£…ç±»å‹</h2><p>ä¸ºäº†ä¾¿äºæ“ä½œåŸºæœ¬ç±»å‹å€¼ï¼ŒECMAScript æä¾› 3 ä¸ªç‰¹æ®Šçš„å¼•ç”¨ç±»å‹ï¼š<code>Boolean</code>ã€<code>Number</code>ã€<code>String</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s1 = <span class="string">"smoe.txt"</span>;</span><br><span class="line"><span class="keyword">var</span> s2 = s1.substring(<span class="number">2</span>);</span><br></pre></td></tr></table></figure><blockquote><p>åŸºæœ¬ç±»å‹ä¸æ˜¯å¯¹è±¡ï¼Œç†è®ºä¸Šä¸åº”è¯¥æœ‰æ–¹æ³•ã€‚<br>å½“ç¬¬äºŒè¡Œä»£ç è®¿é—® s1 æ—¶ï¼Œè®¿é—®è¿‡ç¨‹å¤„äºä¸€ç§è¯»å–æ¨¡å¼ï¼Œä»å†…å­˜ä¸­è¯»å–è¿™ä¸ªå­—ç¬¦ä¸²çš„å€¼ã€‚è€Œåœ¨è¯»å–æ¨¡å¼ä¸­è®¿é—®å­—ç¬¦ä¸²æ—¶ï¼Œåå°è‡ªåŠ¨å®Œæˆï¼š<br>(1) åˆ›å»º String ç±»å‹çš„ä¸€ä¸ªå®ä¾‹<br>(2) åœ¨å®ä¾‹ä¸Šè°ƒç”¨æŒ‡å®šçš„æ–¹æ³•<br>(3) é”€æ¯è¿™ä¸ªå®ä¾‹</p></blockquote><ul><li>å¼•ç”¨ç±»å‹ä¸åŸºæœ¬åŒ…è£…ç±»å‹çš„ä¸»è¦åŒºåˆ«æ˜¯å¯¹è±¡çš„ç”Ÿå­˜æœŸ<ul><li>å¼•ç”¨ç±»å‹çš„å®ä¾‹åœ¨æ‰§è¡Œæµç¦»å¼€å½“å‰ä½œç”¨åŸŸä¹‹å‰ä¸€ç›´ä¿å­˜åœ¨å†…å­˜ä¸­</li><li>åŸºæœ¬åŒ…è£…ç±»å‹åªå­˜åœ¨äºä¸€è¡Œä»£ç çš„æ‰§è¡Œç¬é—´</li></ul></li><li>å¯ä»¥æ˜¾ç¤ºçš„åˆ›å»ºåŸºæœ¬åŒ…è£…ç±»å‹çš„å¯¹è±¡ï¼Œä½†ä¼šåˆ†ä¸æ¸…è‡ªå·±åœ¨å¤„ç†åŸºæœ¬ç±»å‹è¿˜æ˜¯å¼•ç”¨ç±»å‹çš„å€¼</li><li>new è°ƒç”¨åŸºæœ¬åŒ…è£…ç±»å‹çš„æ„é€ å‡½æ•°ï¼Œå’Œè½¬å‹å‡½æ•°æ˜¯ä¸ä¸€æ ·çš„<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> value = <span class="string">"25"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> number = <span class="built_in">Number</span>(value); <span class="comment">// è½¬å‹å‡½æ•°</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> number); <span class="comment">// "number"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Number</span>(value); <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> obj);     <span class="comment">// â€œobject"</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="Boolean-ç±»å‹"><a href="#Boolean-ç±»å‹" class="headerlink" title="Boolean ç±»å‹"></a>Boolean ç±»å‹</h3><p>å¸ƒå°”è¡¨è¾¾å¼ä¸­ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½ä¼šè½¬ä¸º true</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> falseObject = <span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">false</span>);</span><br><span class="line"><span class="keyword">var</span> result = falseObject &amp;&amp; <span class="literal">true</span>;</span><br><span class="line">alert(result); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>äº§ç”Ÿè¯¯è§£ï¼Œå»ºè®®ä¸è¦ä½¿ç”¨</p><h3 id="Number-ç±»å‹"><a href="#Number-ç±»å‹" class="headerlink" title="Number ç±»å‹"></a>Number ç±»å‹</h3><ul><li><code>toString(n)</code> n è¿›åˆ¶</li><li><code>toFixed(n)</code> å››èˆäº”å…¥ n ä½å°æ•°</li><li><code>toExponential(n)</code> n ä½æ•°è¡¨ç¤ºä¸€ä¸ªæ•°å­—</li></ul><h4 id="å­—ç¬¦æ–¹æ³•"><a href="#å­—ç¬¦æ–¹æ³•" class="headerlink" title="å­—ç¬¦æ–¹æ³•"></a>å­—ç¬¦æ–¹æ³•</h4><ul><li><code>charAt</code></li><li><code>charCodeAt</code></li><li><code>æ–¹æ‹¬å·è¡¨ç¤ºæ³•[]ä¸‹æ ‡è¯»å–å­—ç¬¦</code></li></ul><h4 id="å­—ç¬¦ä¸²æ“ä½œæ–¹æ³•"><a href="#å­—ç¬¦ä¸²æ“ä½œæ–¹æ³•" class="headerlink" title="å­—ç¬¦ä¸²æ“ä½œæ–¹æ³•"></a>å­—ç¬¦ä¸²æ“ä½œæ–¹æ³•</h4><ul><li><code>concat</code> æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œå¸¸ç”¨<code>+</code></li><li><code>slice</code></li><li><code>substr</code></li><li><code>substring</code></li></ul><h4 id="å­—ç¬¦ä¸²ä½ç½®æ–¹æ³•"><a href="#å­—ç¬¦ä¸²ä½ç½®æ–¹æ³•" class="headerlink" title="å­—ç¬¦ä¸²ä½ç½®æ–¹æ³•"></a>å­—ç¬¦ä¸²ä½ç½®æ–¹æ³•</h4><ul><li><code>indexOf</code></li><li><code>lastIndexOf</code></li></ul><h4 id="trim-æ–¹æ³•"><a href="#trim-æ–¹æ³•" class="headerlink" title="trim() æ–¹æ³•"></a>trim() æ–¹æ³•</h4><p>åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²çš„å‰¯æœ¬ï¼Œåˆ é™¤å‰ç½®ä»¥åŠåç¼€çš„æ‰€æœ‰ç©ºæ ¼ï¼Œç„¶åè¿”å›ç»“æœ</p><h4 id="å­—ç¬¦ä¸²å¤§å°å†™è½¬æ¢"><a href="#å­—ç¬¦ä¸²å¤§å°å†™è½¬æ¢" class="headerlink" title="å­—ç¬¦ä¸²å¤§å°å†™è½¬æ¢"></a>å­—ç¬¦ä¸²å¤§å°å†™è½¬æ¢</h4><ul><li><code>toLowerCase</code></li><li><code>toLocaleLowerCase</code></li><li><code>toUpperCase</code></li><li><code>toLocaleUpperCase</code></li></ul><h4 id="å­—ç¬¦ä¸²çš„æ¨¡å¼åŒ¹é…æ–¹æ³•"><a href="#å­—ç¬¦ä¸²çš„æ¨¡å¼åŒ¹é…æ–¹æ³•" class="headerlink" title="å­—ç¬¦ä¸²çš„æ¨¡å¼åŒ¹é…æ–¹æ³•"></a>å­—ç¬¦ä¸²çš„æ¨¡å¼åŒ¹é…æ–¹æ³•</h4><ul><li><code>match</code><ul><li>params:æ­£åˆ™è¡¨è¾¾å¼æˆ– RegExp å¯¹è±¡</li><li>æœ¬è´¨è°ƒç”¨ RegExp çš„ exec</li></ul></li><li><code>search</code><ul><li>params:æ­£åˆ™è¡¨è¾¾å¼æˆ– RegExp å¯¹è±¡</li><li>return: ä¸‹æ ‡ï¼Œæ‰¾ä¸åˆ° -1</li></ul></li><li><code>replace</code> <ul><li>ä¸¤ä¸ªå‚æ•°ï¼Œç”¨ç¬¬äºŒä¸ªå‚æ•°æ›¿æ¢ç¬¬ä¸€ä¸ª</li><li>ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯æ­£åˆ™</li><li>ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥æ˜¯å‡½æ•°</li></ul></li><li><code>split</code> åŸºäºä¸€ä¸ªåˆ¶å®šçš„åˆ†éš”ç¬¦ï¼Œå°†ä¸€ä¸ªå­—ç¬¦ä¸²åˆ†å‰²æˆå¤šä¸ªå­å­—ç¬¦ä¸²</li></ul><h4 id="localeCompare-æ–¹æ³•"><a href="#localeCompare-æ–¹æ³•" class="headerlink" title="localeCompare() æ–¹æ³•"></a>localeCompare() æ–¹æ³•</h4><p>æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œå„åœ°åŒºå®ç°ä¸åŒ</p><h4 id="fromCharCode-æ–¹æ³•"><a href="#fromCharCode-æ–¹æ³•" class="headerlink" title="fromCharCode() æ–¹æ³•"></a>fromCharCode() æ–¹æ³•</h4><p>æ¥æ”¶ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ç¼–ç ï¼Œç„¶åè½¬æ¢æˆä¸€ä¸ªå­—ç¬¦ä¸²</p><h2 id="å•ä½“å†…ç½®å¯¹è±¡"><a href="#å•ä½“å†…ç½®å¯¹è±¡" class="headerlink" title="å•ä½“å†…ç½®å¯¹è±¡"></a>å•ä½“å†…ç½®å¯¹è±¡</h2><p>ECMA-262å¯¹<strong>å•ä½“å†…ç½®å¯¹è±¡</strong>çš„å®šä¹‰ï¼š<u>ç”± ECMAScript å®ç°æä¾›çš„ï¼Œä¸ä¾èµ–äºå®¿ä¸»ç¯å¢ƒçš„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡åœ¨ ECMAScript ç¨‹åºæ‰§è¡Œä¹‹å‰å°±å·²ç»å­˜åœ¨äº†ã€‚</u></p><p>å‰é¢å·²ç»ä»‹ç»äº†å¤§å¤šæ•°å†…ç½®å¯¹è±¡ï¼Œå¦‚ Objectã€Arrayã€String</p><h3 id="Global-å¯¹è±¡"><a href="#Global-å¯¹è±¡" class="headerlink" title="Global å¯¹è±¡"></a>Global å¯¹è±¡</h3><ul><li>ä¸å±äºä»»ä½•å…¶ä»–å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼Œæœ€ç»ˆéƒ½æ˜¯ Global å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•</li><li>äº‹å®ä¸Šï¼Œæ²¡æœ‰å…¨å±€å˜é‡æˆ–å…¨å±€å‡½æ•°ã€‚æ‰€æœ‰åœ¨å…¨å±€ä½œç”¨åŸŸä¸­å®šä¹‰çš„å±æ€§å’Œå‡½æ•°ï¼Œéƒ½æ˜¯ Global å¯¹è±¡çš„å±æ€§ã€‚å¦‚<ul><li>isNan()ã€isFinite()ã€parseint()</li><li>encodeURI() ç”¨äºæ•´ä¸ª URI<br>encodeURIEomponent() ç”¨äº URI ä¸­çš„ä¸€æ®µ<br>decodeURI()<br>decodeURIEomponent()</li><li>eval() åƒä¸€ä¸ªå®Œæ•´çš„ ECMAScript è§£æå™¨<ul><li>params: è¦æ‰§è¡Œçš„ ECMAScript å­—ç¬¦ä¸²</li></ul></li><li>Global å¯¹è±¡å±æ€§<ul><li>undefinedã€NaNã€Infinity ç­‰</li><li>Objectã€Function ç­‰</li></ul></li><li>window å¯¹è±¡<ul><li>Web æµè§ˆå™¨ä¸­ï¼ŒGlobal å¯¹è±¡æ˜¯ window å¯¹è±¡çš„ä¸€éƒ¨åˆ†</li></ul></li></ul></li></ul><h3 id="Math-å¯¹è±¡"><a href="#Math-å¯¹è±¡" class="headerlink" title="Math å¯¹è±¡"></a>Math å¯¹è±¡</h3><ul><li>Math å¯¹è±¡çš„å±æ€§<ul><li>Math.E</li><li>Math.LN10</li><li>Math.LN2</li><li>Math.LOG2E</li><li>Math.LOG10</li><li>Math.PI</li><li>Math.SQRT1_2</li><li>Math.SQRT2</li></ul></li><li>min()ã€max()</li><li>èˆå…¥æ–¹æ³•<ul><li>Math.ceil() å‘ä¸Šèˆå…¥</li><li>Math.floor() å‘ä¸‹èˆå…¥</li><li>Math.round() å››èˆäº”å…¥</li></ul></li><li>random() [0, 1) éšæœºæ•°</li><li>å…¶ä»–æ–¹æ³•<ul><li>Math.abs(num)</li><li>Math.exp(num)</li><li>Math.log(num)</li><li>Math.pow(num, power)</li><li>Math.sqrt(num)</li><li>Math.acos(x)</li><li>â€¦â€¦</li></ul></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScripté«˜çº§ç¨‹åºè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬å››ç«  å˜é‡ã€ä½œç”¨åŸŸå’Œå†…å­˜é—®é¢˜</title>
      <link href="/2020/02/17/%E7%AC%AC4%E7%AB%A0-%E5%8F%98%E9%87%8F%E3%80%81%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%92%8C%E5%86%85%E5%AD%98%E9%97%AE%E9%A2%98/"/>
      <url>/2020/02/17/%E7%AC%AC4%E7%AB%A0-%E5%8F%98%E9%87%8F%E3%80%81%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%92%8C%E5%86%85%E5%AD%98%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„å€¼"><a href="#åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„å€¼" class="headerlink" title="åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„å€¼"></a>åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„å€¼</h2><ul><li>åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆ5ï¼‰æŒ‰å€¼è®¿é—®ï¼Œå¯ä»¥æ“ä½œä¿å­˜åœ¨å˜é‡ä¸­çš„å®é™…çš„å€¼ã€‚å æ®å›ºå®šå¤§å°çš„ç©ºé—´ï¼Œè¢«ä¿å­˜åœ¨æ ˆå†…å­˜ä¸­ã€‚</li><li>å¼•ç”¨ç±»å‹ï¼ˆ1ï¼‰çš„å€¼æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­çš„å¯¹è±¡ï¼Œä¿å­˜åœ¨å †å†…å­˜ä¸­ã€‚JS ä¸èƒ½ç›´æ¥æ“ä½œå¯¹è±¡çš„å†…å­˜ç©ºé—´ï¼šå¤åˆ¶ä¿å­˜å¯¹è±¡çš„æŸä¸ªå˜é‡æ—¶ï¼Œæ“ä½œå¯¹è±¡çš„å¼•ç”¨ï¼›ä¸ºå¯¹è±¡æ·»åŠ å±æ€§æ—¶ï¼Œæ“ä½œçš„æ˜¯å®é™…çš„å¯¹è±¡ã€‚</li></ul><h3 id="å¤åˆ¶å˜é‡å€¼"><a href="#å¤åˆ¶å˜é‡å€¼" class="headerlink" title="å¤åˆ¶å˜é‡å€¼"></a>å¤åˆ¶å˜é‡å€¼</h3><ul><li>åŸºæœ¬ç±»å‹ï¼šåˆ›å»ºæ–°å€¼</li><li>å¼•ç”¨ç±»å‹ï¼šåˆ›å»ºæ–°å€¼ï¼Œå€¼æ˜¯æŒ‡é’ˆï¼Œå®é™…ä¸æ—§å€¼å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡</li></ul><h3 id="ä¼ é€’å‚æ•°"><a href="#ä¼ é€’å‚æ•°" class="headerlink" title="ä¼ é€’å‚æ•°"></a>ä¼ é€’å‚æ•°</h3><p>ECMAScript ä¸­æ‰€æœ‰å‡½æ•°çš„å‚æ•°éƒ½æ˜¯æŒ‰å€¼ä¼ é€’çš„ã€‚</p><ul><li>åŸºæœ¬ç±»å‹ï¼šè¢«ä¼ é€’çš„å€¼ä¼šè¢«å¤åˆ¶ç»™ä¸€ä¸ªå±€éƒ¨å˜é‡ã€‚</li><li>å¼•ç”¨ç±»å‹ï¼šè¢«ä¼ é€’çš„å€¼çš„<strong>åœ°å€</strong>å¤åˆ¶ç»™ä¸€ä¸ªå±€éƒ¨å˜é‡ã€‚å› æ­¤è¿™ä¸ªå±€éƒ¨å˜é‡çš„å˜åŒ–ä¼šååº”åœ¨å‡½æ•°çš„å¤–éƒ¨ã€‚<blockquote><p>è‹¥åœ¨å‡½æ•°ä½“å†…å¯¹è¿™ä¸ªå±€éƒ¨å˜é‡è¿›è¡Œé‡æ–°èµ‹å€¼ï¼Œé‚£ä¹ˆä¿å­˜çš„åœ°å€å°±æ”¹å˜äº†ï¼ŒæŒ‡å‘çš„å†…å­˜ä¹Ÿä¸å†æ˜¯è¢«ä¼ å…¥çš„å¯¹è±¡ã€‚</p></blockquote></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setName</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    obj.name = <span class="string">"Nicholas"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">setName(person);</span><br><span class="line">alert(person.name); <span class="comment">//â€œNicholasâ€</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setName</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    obj.name = <span class="string">"Nicholas"</span>;</span><br><span class="line">    obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">    obj.name = <span class="string">"Greg"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">setName(person);</span><br><span class="line">alert(person.name); <span class="comment">//â€œNicholasâ€</span></span><br></pre></td></tr></table></figure><p>åœ¨å†…éƒ¨é‡å†™ obj æ—¶ï¼Œå˜é‡å¼•ç”¨çš„å°±æ˜¯ä¸€ä¸ªå±€éƒ¨å¯¹è±¡äº†ã€‚å±€éƒ¨å¯¹è±¡åœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åç«‹å³è¢«é”€æ¯ã€‚</p><h3 id="æ£€æµ‹ç±»å‹"><a href="#æ£€æµ‹ç±»å‹" class="headerlink" title="æ£€æµ‹ç±»å‹"></a>æ£€æµ‹ç±»å‹</h3><ul><li>åŸºæœ¬ç±»å‹ï¼š<code>typeof</code></li><li>å¼•ç”¨ç±»å‹ï¼š<code>instanceof</code></li><li>æ ¹æ®<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// result = variable instanceof constructor</span></span><br><span class="line"><span class="comment">// æ ¹æ®åŸå‹é“¾æ¥è¯†åˆ«</span></span><br><span class="line">alert(person <span class="keyword">instanceof</span> <span class="built_in">Object</span>);</span><br><span class="line">alert(person <span class="keyword">instanceof</span> <span class="built_in">Array</span>);</span><br><span class="line">alert(person <span class="keyword">instanceof</span> <span class="built_in">RegExp</span>);</span><br></pre></td></tr></table></figure>æ‰€æœ‰å¼•ç”¨ç±»å‹çš„å€¼éƒ½æ˜¯ Object çš„å®ä¾‹ã€‚<code>Obj instanceof Object</code> å§‹ç»ˆè¿”å› trueï¼Œæ£€æµ‹åŸºæœ¬ç±»å‹å§‹ç»ˆ falseï¼Œå› ä¸ºåŸºæœ¬ç±»å‹ä¸æ˜¯å¯¹è±¡ã€‚</li></ul><h2 id="æ‰§è¡Œç¯å¢ƒåŠä½œç”¨åŸŸ"><a href="#æ‰§è¡Œç¯å¢ƒåŠä½œç”¨åŸŸ" class="headerlink" title="æ‰§è¡Œç¯å¢ƒåŠä½œç”¨åŸŸ"></a>æ‰§è¡Œç¯å¢ƒåŠä½œç”¨åŸŸ</h2><ul><li>æ‰§è¡Œç¯å¢ƒå®šä¹‰äº†å˜é‡æˆ–å‡½æ•°æœ‰æƒè®¿é—®çš„å…¶ä»–æ•°æ®ï¼Œå†³å®šäº†å®ƒä»¬å„è‡ªçš„è¡Œä¸ºã€‚</li><li>æ¯ä¸ªæ‰§è¡Œç¯å¢ƒéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„<strong>å˜é‡å¯¹è±¡</strong>ï¼Œç¯å¢ƒä¸­å®šä¹‰çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°éƒ½ä¿å­˜åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ã€‚</li><li><strong>å…¨å±€æ‰§è¡Œç¯å¢ƒ</strong>ï¼šæ ¹æ®å®¿ä¸»ç¯å¢ƒã€‚WEB æµè§ˆå™¨ä¸­æ˜¯ window å¯¹è±¡ã€‚</li><li><strong>æ‰§è¡Œç¯å¢ƒ</strong>ï¼Œå‡½æ•°çš„ç¯å¢ƒï¼Œä¿å­˜åœ¨æ ˆä¸­ã€‚</li><li>å½“ä»£ç åœ¨ä¸€ä¸ªç¯å¢ƒä¸­æ‰§è¡Œæ—¶ï¼Œä¼šåˆ›å»ºå˜é‡å¯¹è±¡çš„ä¸€ä¸ª<strong>ä½œç”¨åŸŸé“¾</strong>ï¼Œ<u>ä¿è¯å¯¹æ‰§è¡Œç¯å¢ƒæœ‰æƒè®¿é—®çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°çš„æœ‰åºè®¿é—®ã€‚</u><blockquote><p>ä½œç”¨åŸŸé“¾çš„å‰ç«¯ï¼Œå§‹ç»ˆæ˜¯å½“å‰æ‰§è¡Œçš„ä»£ç æ‰€åœ¨ç¯å¢ƒçš„å˜é‡å¯¹è±¡ã€‚å¦‚æœè¿™ä¸ªç¯å¢ƒæ˜¯å‡½æ•°ï¼Œåˆ™å°†å…¶<strong>æ´»åŠ¨å¯¹è±¡</strong>ä½œä¸ºå˜é‡å¯¹è±¡ã€‚æ´»åŠ¨å¯¹è±¡åœ¨æœ€å¼€å§‹æ—¶åªåŒ…å«ä¸€ä¸ªå˜é‡ï¼ˆå³argumentså¯¹è±¡ï¼Œå…¨å±€ç¯å¢ƒä¸­ä¸å­˜åœ¨ï¼‰ã€‚ä¸‹ä¸€ä¸ªå˜é‡å¯¹è±¡æ¥è‡ªåŒ…å«ï¼ˆå¤–éƒ¨ï¼‰ç¯å¢ƒâ€¦â€¦ä¸€ç›´åˆ°å…¨å±€æ‰§è¡Œç¯å¢ƒã€‚<br>æ ‡è¯†ç¬¦è§£ææ˜¯æ²¿ç€ä½œç”¨åŸŸé“¾ä¸€çº§ä¸€çº§åœ°æœç´¢æ ‡è¯†ç¬¦çš„è¿‡ç¨‹ã€‚<br>å†…éƒ¨ç¯å¢ƒå¯ä»¥é€šè¿‡ä½œç”¨åŸŸé“¾è®¿é—®æ‰€æœ‰çš„å¤–éƒ¨ç¯å¢ƒï¼Œä½†å¤–éƒ¨ç¯å¢ƒä¸èƒ½è®¿é—®å†…éƒ¨ç¯å¢ƒé‡çš„å˜é‡å’Œå‡½æ•°ã€‚</p></blockquote></li></ul><h3 id="å»¶é•¿ä½œç”¨åŸŸé“¾"><a href="#å»¶é•¿ä½œç”¨åŸŸé“¾" class="headerlink" title="å»¶é•¿ä½œç”¨åŸŸé“¾"></a>å»¶é•¿ä½œç”¨åŸŸé“¾</h3><ul><li>try-catch è¯­å¥çš„ catch å—</li><li>with è¯­å¥<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildUrl</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> qs = <span class="string">"?debug=true"</span>;</span><br><span class="line">    <span class="keyword">with</span> (location) &#123;</span><br><span class="line">        <span class="keyword">var</span> url = href + qs;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> url;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>with è¯­å¥æ¥æ”¶ location å¯¹è±¡ï¼Œå› æ­¤å…¶å˜é‡å¯¹è±¡ä¸­åŒ…å«äº† location å¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œè€Œè¿™ä¸ªå˜é‡è¢«æ·»åŠ åˆ°äº†ä½œç”¨åŸŸé“¾çš„å‰ç«¯ã€‚<blockquote><p>ç–‘é—®ï¼š<br>ä½œç”¨åŸŸé“¾ï¼šå…¨å±€æ‰§è¡Œç¯å¢ƒ-&gt;buildUrl()-&gt;with(location)<br>with ä¸­å®šä¹‰çš„å˜é‡ url ä¸ºä»€ä¹ˆèƒ½å¤Ÿåœ¨å¤–éƒ¨ç¯å¢ƒ buildUrl ä¸­è®¿é—®ï¼Ÿurlæ˜¯è¢«å®šä¹‰åœ¨å…¨å±€æ‰§è¡Œç¯å¢ƒä¸­çš„ location å˜é‡å¯¹è±¡ä¸­å—ï¼Ÿ</p><hr><p>å› ä¸ºæ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼Œå˜é‡å£°æ˜ä¼šè¢«æ·»åŠ åˆ°å½“å‰çš„æ‰§è¡Œç¯å¢ƒï¼ˆè¿™é‡Œæ˜¯buildUrlï¼ˆï¼‰ï¼‰ä¸­</p></blockquote></li></ul><h3 id="æ²¡æœ‰å—çº§ä½œç”¨åŸŸ"><a href="#æ²¡æœ‰å—çº§ä½œç”¨åŸŸ" class="headerlink" title="æ²¡æœ‰å—çº§ä½œç”¨åŸŸ"></a>æ²¡æœ‰å—çº§ä½œç”¨åŸŸ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> color = <span class="string">"blue"</span>;</span><br><span class="line">&#125;</span><br><span class="line">alert(color);</span><br></pre></td></tr></table></figure><p>js ä¸­ï¼Œif è¯­å¥ä¸­çš„å˜é‡å£°æ˜ä¼šå°†å˜é‡æ·»åŠ åˆ°å½“å‰çš„æ‰§è¡Œç¯å¢ƒï¼ˆè¿™é‡Œæ˜¯å…¨å±€ç¯å¢ƒï¼‰<br>å¦‚æœæ²¡æœ‰ç”¨ var å£°æ˜ï¼Œä¼šç›´æ¥è¢«æ·»åŠ åˆ°å…¨å±€ç¯å¢ƒã€‚</p><blockquote><p>let ä¼¼ä¹è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œæœ¬ä¹¦æ²¡æœ‰è®²åˆ°ï¼Œçœ‹å®Œ es6 å†æ¥è¡¥ã€‚</p></blockquote><h2 id="åƒåœ¾æ”¶é›†"><a href="#åƒåœ¾æ”¶é›†" class="headerlink" title="åƒåœ¾æ”¶é›†"></a>åƒåœ¾æ”¶é›†</h2><h3 id="æ ‡è®°æ¸…é™¤"><a href="#æ ‡è®°æ¸…é™¤" class="headerlink" title="æ ‡è®°æ¸…é™¤"></a>æ ‡è®°æ¸…é™¤</h3><ul><li>å½“å˜é‡è¿›å…¥ç¯å¢ƒï¼Œæ ‡è®°ä¸ºâ€œè¿›å…¥ç¯å¢ƒâ€ã€‚<ul><li>é€»è¾‘ä¸Šè®²ï¼Œæ°¸è¿œä¸èƒ½é‡Šæ”¾è¿›å…¥ç¯å¢ƒçš„å˜é‡æ‰€å ç”¨çš„å†…å­˜ã€‚</li></ul></li><li>å½“å˜é‡ç¦»å¼€ç¯å¢ƒæ—¶ï¼Œåˆ™æ ‡è®°â€œç¦»å¼€ç¯å¢ƒâ€ã€‚</li><li>å¯ä»¥ä½¿ç”¨ä»»ä½•æ–¹å¼æ¥æ ‡è®°å˜é‡ã€‚å¦‚ï¼š<ul><li>ç¿»è½¬æŸä¸ªç‰¹æ®Šçš„ä½</li><li>â€œè¿›å…¥ç¯å¢ƒâ€å˜é‡åˆ—è¡¨åŠâ€œç¦»å¼€ç¯å¢ƒâ€å˜é‡åˆ—è¡¨<blockquote><p>åƒåœ¾æ”¶é›†å™¨åœ¨è¿è¡Œçš„æ—¶å€™ä¼šç»™å­˜å‚¨åœ¨å†…å­˜ä¸­çš„æ‰€æœ‰å˜é‡éƒ½åŠ ä¸Šæ ‡è®°ï¼Œç„¶åå»æ‰ç¯å¢ƒä¸­çš„å˜é‡ä»¥åŠè¢«ç¯å¢ƒä¸­çš„å˜é‡å¼•ç”¨çš„å˜é‡çš„æ ‡è®°ã€‚åœ¨æ­¤ä¹‹åå†è¢«åŠ ä¸Šæ ‡è®°çš„å˜é‡å°†è¢«è§†ä¸ºå‡†å¤‡åˆ é™¤çš„å˜é‡ã€‚æœ€åå®Œæˆå†…å­˜æ¸…é™¤å·¥ä½œï¼Œé”€æ¯å€¼å¹¶å›æ”¶å†…å­˜ç©ºé—´ã€‚</p></blockquote></li></ul></li></ul><h3 id="å¼•ç”¨è®¡æ•°"><a href="#å¼•ç”¨è®¡æ•°" class="headerlink" title="å¼•ç”¨è®¡æ•°"></a>å¼•ç”¨è®¡æ•°</h3><p>è·Ÿè¸ªè®°å½•æ¯ä¸ªå€¼è¢«å¼•ç”¨çš„æ¬¡æ•°ï¼Œèµ‹å€¼ç»™å˜é‡åˆ™è¯¥å€¼+1ï¼Œè‹¥å˜é‡å–å¾—å¦ä¸€ä¸ªå€¼ï¼Œåˆ™è¯¥å€¼-1ã€‚</p><blockquote><p>åƒåœ¾æ”¶é›†å™¨ä¸‹æ¬¡è¿è¡Œæ—¶ï¼Œé‡Šæ”¾è®¡æ•° 0 çš„å€¼å ç”¨çš„å†…å­˜ã€‚</p></blockquote><blockquote><p>å¾ªç¯å¼•ç”¨ä¼šå¯¼è‡´å¼•ç”¨æ¬¡æ•°æ°¸è¿œä¸ä¸º 0<br>BOM å’Œ DOM ä¸­çš„å¯¹è±¡æ˜¯ä½¿ç”¨ C++ ä»¥ COMï¼ˆComponent Object Modelï¼Œç»„ä»¶å¯¹è±¡æ¨¡å‹ï¼‰å¯¹è±¡çš„å½¢å¼å®ç°çš„ï¼ŒCOM å¯¹è±¡çš„åƒåœ¾æ”¶é›†æœºåˆ¶å°±æ˜¯å¼•ç”¨è®¡æ•°ç­–ç•¥ã€‚<br>è§£å†³ï¼šæ‰‹åŠ¨æ–­å¼€å¾ªç¯å¼•ç”¨ï¼ˆèµ‹å€¼ä¸ºnullï¼‰</p></blockquote><h3 id="æ€§èƒ½é—®é¢˜"><a href="#æ€§èƒ½é—®é¢˜" class="headerlink" title="æ€§èƒ½é—®é¢˜"></a>æ€§èƒ½é—®é¢˜</h3><p>åƒåœ¾æ”¶é›†å™¨æ˜¯å‘¨æœŸè¿è¡Œçš„ï¼Œå¦‚æœä¸ºå˜é‡åˆ†é…çš„å†…å­˜æ•°é‡å¾ˆå¤§ï¼Œé‚£ä¹ˆå›æ”¶å·¥ä½œé‡ä¹Ÿç›¸å½“å¤§ï¼Œç¡®å®šæ—¶é—´é—´éš”å¾ˆé‡è¦ã€‚</p><h3 id="ç®¡ç†å†…å­˜"><a href="#ç®¡ç†å†…å­˜" class="headerlink" title="ç®¡ç†å†…å­˜"></a>ç®¡ç†å†…å­˜</h3><p>ä½¿ç”¨å…·å¤‡åƒåœ¾æ”¶é›†æœºåˆ¶çš„è¯­è¨€ç¼–å†™ç¨‹åºï¼Œä¸€èˆ¬ä¸å¿…æ“å¿ƒå†…å­˜ç®¡ç†ã€‚ä½† js æ¯”è¾ƒç‰¹æ®Šï¼Œå› ä¸ºåˆ†é…ç»™ Web æµè§ˆå™¨çš„å¯ç”¨å†…å­˜é€šå¸¸æ¯”æ¡Œé¢åº”ç”¨å°‘ã€‚<br>å°½é‡å°‘ç”¨å†…å­˜é¡µé¢ä¼šæœ‰æ›´å¥½çš„æ€§èƒ½ã€‚ä¸€æ—¦æ•°æ®ä¸å†æœ‰ç”¨ï¼Œèµ‹å€¼ null æ¥<strong>è§£é™¤å¼•ç”¨</strong>ã€‚é€‚ç”¨äºå¤§å¤šæ•°å…¨å±€å˜é‡å’Œå…¨å±€å¯¹è±¡çš„å±æ€§ï¼Œå±€éƒ¨å˜é‡ä¼šåœ¨ç¦»å¼€æ‰§è¡Œç¯å¢ƒæ—¶è‡ªåŠ¨è§£é™¤ã€‚<br>è§£é™¤å¼•ç”¨ä¸æ˜¯è‡ªåŠ¨å›æ”¶å†…å­˜ï¼Œæ˜¯è®©å€¼è„±ç¦»ç¯å¢ƒï¼Œåƒåœ¾æ”¶é›†å™¨ä¸‹æ¬¡è¿è¡Œçš„æ—¶å€™å°†å…¶å›æ”¶ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScripté«˜çº§ç¨‹åºè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬ä¸‰ç«  åŸºæœ¬æ¦‚å¿µ</title>
      <link href="/2020/02/15/%E7%AC%AC3%E7%AB%A0-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/"/>
      <url>/2020/02/15/%E7%AC%AC3%E7%AB%A0-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/</url>
      
        <content type="html"><![CDATA[<h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><p>ECMAScript æ ‡ç¤ºç¬¦é‡‡ç”¨é©¼å³°å¤§å°å†™æ ¼å¼</p><h3 id="ä¸¥æ ¼æ¨¡å¼-strict-mode"><a href="#ä¸¥æ ¼æ¨¡å¼-strict-mode" class="headerlink" title="ä¸¥æ ¼æ¨¡å¼ strict mode"></a>ä¸¥æ ¼æ¨¡å¼ strict mode</h3><p>åœ¨é¡¶éƒ¨æ·»åŠ ä»£ç  <code>&quot;use strict&quot;;</code><br>ç¼–è¯‘æŒ‡ç¤º(pragma)ï¼Œç”¨äºå‘Šè¯‰æ”¯æŒçš„ JavaScript å¼•æ“åˆ‡æ¢åˆ°ä¸¥æ ¼æ¨¡å¼ã€‚<br>å‡½æ•°ä½“ä¸­åŒ…å«æŒ‡å®šå‡½æ•°åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹æ‰§è¡Œã€‚</p><h3 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h3><p>æ¾æ•£ç±»å‹ï¼šå¯ä»¥ç”¨æ¥ä¿å­˜ä»»ä½•ç±»å‹çš„æ•°æ®ã€‚æ¯ä¸ªå˜é‡ä»…ä»…ç”¨äºä¿å­˜å€¼çš„å ä½ç¬¦ã€‚</p><h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><p>5 åŸºæœ¬æ•°æ®ç±»å‹ - <code>Undefinedã€Nullã€Booleanã€Numberã€String</code><br>1 å¤æ‚æ•°æ®ç±»å‹ - <code>Object</code><br><code>Oobject</code> æœ¬è´¨ä¸Šæ˜¯ç”±ä¸€ç»„æ— åºçš„åå€¼å¯¹ç»„æˆçš„<br>ECMAScript ä¸æ”¯æŒä»»ä½•åˆ›å»ºè‡ªå®šä¹‰ç±»å‹çš„æœºåˆ¶</p><p><code>typeof</code> æ“ä½œç¬¦ï¼Œè¿”å›å€¼ï¼ˆå‡ä¸ºå­—ç¬¦ä¸²ï¼‰<br>æœªå®šä¹‰ï¼š<code>&quot;undefined&quot;</code><br>å¸ƒå°”å€¼ï¼š<code>&quot;boolean&quot;</code><br>å­—ç¬¦ä¸²ï¼š<code>&quot;string&quot;</code><br>æ•°å€¼ï¼š<code>&quot;number&quot;</code><br>å¯¹è±¡æˆ–<code>null</code>ï¼š<code>&quot;object&quot;</code><br>å‡½æ•°ï¼š<code>&quot;function&quot;</code><br>ç‰¹æ®Šå€¼ <code>null</code> è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªç©ºçš„å¯¹è±¡å¼•ç”¨ï¼Œå› æ­¤è¿”å› <code>&quot;object&quot;</code>ã€‚<br>safari 5 å’Œ Chrome 7 åŠä¹‹å‰ç‰ˆæœ¬ <code>typeof æ­£åˆ™è¡¨è¾¾å¼</code> ä¼šè¿”å› <code>&quot;function&quot;</code>ï¼Œè€Œå…¶ä»–æµè§ˆå™¨è¿”å›<code>&quot;object&quot;</code></p><blockquote><p>ä»æŠ€æœ¯è§’åº¦è®²ï¼Œå‡½æ•°åœ¨ ECMAScript ä¸­æ˜¯å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸€ç§æ•°æ®ç±»å‹ã€‚ç„¶è€Œï¼Œå‡½æ•°ä¹Ÿç¡®å®æœ‰ä¸€äº›ç‰¹æ®Šçš„å±æ€§ï¼Œå› æ­¤é€šè¿‡ <code>typeof</code> æ“ä½œç¬¦åŒºåˆ†å‡½æ•°å’Œå…¶ä»–å¯¹è±¡æ˜¯æœ‰å¿…è¦çš„ã€‚</p></blockquote><h3 id="Undefined-ç±»å‹"><a href="#Undefined-ç±»å‹" class="headerlink" title="Undefined ç±»å‹"></a>Undefined ç±»å‹</h3><p><code>Undefined</code> ç±»å‹åªæœ‰ä¸€ä¸ªå€¼ï¼Œå³ <code>undefined</code></p><blockquote><p>å˜é‡å·²å£°æ˜ä½†æœªåˆå§‹åŒ–ï¼ˆmessageï¼‰ï¼šè¯¥å˜é‡çš„å€¼ä¸º <code>undefined</code>,<code>typeof</code> è¿”å›<code>&quot;undefined&quot;</code><br>è‹¥å˜é‡æœªå£°æ˜ï¼ˆageï¼‰ï¼šåªå¯ä»¥æ‰§è¡Œ<code>typeof</code> æ“ä½œç¬¦ï¼Œè¿”å›<code>&quot;undefined&quot;</code>ï¼Œå…¶ä»–æ“ä½œäº§ç”Ÿé”™è¯¯ã€‚</p><p> <img src="/.com//%E5%8F%98%E9%87%8F%E5%88%9D%E5%A7%8B%E5%8C%96.png" alt="å˜é‡åˆå§‹åŒ–"></p></blockquote><h3 id="Null-ç±»å‹"><a href="#Null-ç±»å‹" class="headerlink" title="Null ç±»å‹"></a>Null ç±»å‹</h3><p><code>Null</code> ç±»å‹åªæœ‰ä¸€ä¸ªå€¼ï¼Œå³ <code>null</code>ï¼Œè¡¨ç¤ºä¸€ä¸ªç©ºå¯¹è±¡æŒ‡é’ˆï¼Œå› æ­¤ <code>typeof null</code> è¿”å› <code>&quot;object&quot;</code>ã€‚<br>å¦‚æœå®šä¹‰çš„å˜é‡å‡†å¤‡ç”¨äºä¿å­˜å¯¹è±¡ï¼Œé‚£ä¹ˆæœ€å¥½åˆå§‹åŒ–ä¸º <code>null</code>ï¼Œå¯ä»¥ç›´æ¥åˆ¤æ–­æ˜¯å¦å·²ç»ä¿å­˜äº†ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (car != <span class="literal">null</span>) &#123;</span><br><span class="line">    â€¦â€¦</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®é™…ä¸Šï¼Œ<code>undefined</code> æ´¾ç”Ÿè‡ª <code>null</code>ï¼Œå› æ­¤ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alert(<span class="literal">null</span> == <span class="literal">undefined</span>); </span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure><h3 id="Boolean-ç±»å‹"><a href="#Boolean-ç±»å‹" class="headerlink" title="Boolean ç±»å‹"></a>Boolean ç±»å‹</h3><p>ECMAScript ä¸­æ‰€æœ‰ç±»å‹çš„å€¼éƒ½æœ‰ä¸è¿™ä¸¤ä¸ª Boolean å€¼ç­‰ä»·çš„å€¼ã€‚è°ƒç”¨ <code>è½¬å‹å‡½æ•° Boolean()</code> è·å¾—å¯¹åº” Boolean å€¼ã€‚</p><table><thead><tr><th>æ•°æ®ç±»å‹</th><th>true</th><th>false</th></tr></thead><tbody><tr><td>Boolean</td><td>true</td><td>false</td></tr><tr><td>String</td><td>ä»»ä½•éç©ºå­—ç¬¦ä¸²</td><td>â€œâ€ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰</td></tr><tr><td>Number</td><td>ä»»ä½•éé›¶æ•°å­—å€¼ï¼ˆåŒ…æ‹¬æ— ç©·å¤§ï¼‰</td><td>0 å’Œ NaN</td></tr><tr><td>Object</td><td>ä»»ä½•å¯¹è±¡</td><td>null</td></tr><tr><td>Undefined</td><td>N/A</td><td>undefined</td></tr><tr><td>N/Aï¼šnot applicable çš„ç¼©å†™ï¼Œä¸é€‚ç”¨</td><td></td><td></td></tr></tbody></table><h3 id="Number-ç±»å‹"><a href="#Number-ç±»å‹" class="headerlink" title="Number ç±»å‹"></a>Number ç±»å‹</h3><p>ä½¿ç”¨ <a href="https://baike.baidu.com/item/IEEE%20754/3869922?fr=aladdin" target="_blank" rel="noopener">IEEE754</a> æ ¼å¼æ¥è¡¨ç¤ºæ•´æ•°å’Œæµ®ç‚¹æ•°å€¼ï¼ˆåŒç²¾åº¦æ•°å€¼ï¼‰ã€‚<br>ä¸ºäº†æ”¯æŒå„ç§æ•°å€¼ç±»å‹ï¼ŒECMA-262å®šä¹‰äº†ä¸åŒçš„æ•°å€¼å­—é¢é‡æ ¼å¼ã€‚</p><ul><li>åè¿›åˆ¶</li><li>å…«è¿›åˆ¶ï¼ˆ0ï¼‰</li><li>åå…­è¿›åˆ¶ï¼ˆ0xï¼‰<br>åœ¨è¿›è¡Œç®—æ•°è®¡ç®—æ—¶ï¼Œéƒ½ä¼šè½¬ä¸ºåè¿›åˆ¶æ•°å€¼ã€‚<h5 id="æµ®ç‚¹æ•°å€¼"><a href="#æµ®ç‚¹æ•°å€¼" class="headerlink" title="æµ®ç‚¹æ•°å€¼"></a>æµ®ç‚¹æ•°å€¼</h5>æµ®ç‚¹æ•°å€¼éœ€è¦çš„å†…å­˜ç©ºé—´æ˜¯æ•´æ•°å€¼çš„ä¸¤å€ã€‚<br>6 ä¸ª 0 ä»¥ä¸Šï¼Œeè¡¨ç¤ºæ³•ï¼š3.125e7ã€3e-17<br>æµ®ç‚¹æ•°å€¼æœ€é«˜ç²¾åº¦ 17 ä½å°æ•°ï¼Œä½†åœ¨ç®—æ•°è®¡ç®—æ—¶ç²¾åº¦è¿œä¸å¦‚æ•´æ•°ã€‚<img src="/.com//%E7%B2%BE%E5%BA%A6.png" alt="ç²¾åº¦"><br>ï¼ˆIEEE745 æ•°å€¼çš„æµ®ç‚¹è®¡ç®—é€šç—…ï¼Œä¸æ˜¯ ECMAScript ç‹¬æœ‰ï¼‰</li></ul><h5 id="æ•°å€¼èŒƒå›´"><a href="#æ•°å€¼èŒƒå›´" class="headerlink" title="æ•°å€¼èŒƒå›´"></a>æ•°å€¼èŒƒå›´</h5><p><code>Number.MIN_VALUE</code> 5e-324<br><code>Number.MAX_VALUE</code> 1.7976931348623157e+308<br><code>Number.POSITIVE_INFINITY</code> æˆ– <code>Infinity</code> æ­£æ— ç©·<br><code>Number.NEGATIVE_INFINITY</code> æˆ– <code>-Infinity</code> è´Ÿæ— ç©·<br><code>isFinite()</code>æœ‰ç©·è¿”å› <code>true</code></p><h5 id="NaN"><a href="#NaN" class="headerlink" title="NaN"></a>NaN</h5><ul><li>ä»»ä½•æ¶‰åŠ NaN çš„æ“ä½œéƒ½ä¼šè¿”å› NaN</li><li>NaN ä¸ä»»ä½•å€¼éƒ½ä¸ç›¸ç­‰ï¼ŒåŒ…æ‹¬è‡ªå·±æœ¬èº«</li><li><code>isNaN()</code> å‡½æ•°åˆ¤æ–­å˜é‡æ˜¯å¦<strong>å¯ä»¥è½¬ä¸ºæ•°å€¼</strong></li></ul><blockquote><p>isNaN(object):<br>é¦–å…ˆè°ƒç”¨å¯¹è±¡çš„ valueOf() æ–¹æ³•ï¼Œæ£€æŸ¥è¯¥æ–¹æ³•çš„è¿”å›å€¼æ˜¯å¦å¯ä»¥è½¬æ¢ä¸ºæ•°å€¼<br>å¦‚æœä¸èƒ½ï¼ŒåŸºäºè¿™ä¸ªè¿”å›å€¼å†è°ƒç”¨ toString() æ–¹æ³•ï¼Œå†æµ‹è¯•è¿”å›å€¼ã€‚</p></blockquote><h5 id="æ•°å€¼è½¬æ¢"><a href="#æ•°å€¼è½¬æ¢" class="headerlink" title="æ•°å€¼è½¬æ¢"></a>æ•°å€¼è½¬æ¢</h5><p><code>Number()</code> ä»»ä½•ç±»å‹<br><code>parseInt()</code> å­—ç¬¦ä¸²<br><code>parseFloat()</code> å­—ç¬¦ä¸²</p><blockquote><p>parseInt å’Œ parseFloat ä»ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å­—ç¬¦å¼€å§‹è½¬æ¢ï¼Œå¼€å§‹åè‹¥ç¢°åˆ°ä¸ç¬¦åˆçš„å­—ç¬¦ï¼ŒæŠ›å¼ƒä¹‹åçš„å­—ç¬¦ã€‚</p></blockquote><h3 id="String-ç±»å‹"><a href="#String-ç±»å‹" class="headerlink" title="String ç±»å‹"></a>String ç±»å‹</h3><ul><li>Unicode å­—ç¬¦ç»„æˆçš„å­—ç¬¦åºåˆ—ã€‚</li><li>ECMAScript ä¸­åŒå¼•å·/å•å¼•å·æ²¡æœ‰åŒºåˆ«ã€‚</li></ul><h5 id="å­—ç¬¦å­—é¢é‡"><a href="#å­—ç¬¦å­—é¢é‡" class="headerlink" title="å­—ç¬¦å­—é¢é‡"></a>å­—ç¬¦å­—é¢é‡</h5><p>å­—ç¬¦å­—é¢é‡ï¼Œå³è½¬ä¹‰å­—ç¬¦ï¼Œè¢«ä½œä¸ºä¸€ä¸ªå­—ç¬¦æ¥è§£æã€‚</p><h5 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h5><ul><li>ä¸å¯æ”¹å˜<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lang = <span class="string">"Java"</span>;</span><br><span class="line">lang = lang + <span class="string">"Script"</span>;</span><br><span class="line"><span class="comment">// é¦–å…ˆåˆ›å»ºä¸€ä¸ªèƒ½å®¹çº³ 10 ä¸ªå­—ç¬¦çš„æ–°å­—ç¬¦ä¸²ï¼Œç„¶åå¡«å…… â€œJavaâ€ å’Œ â€œScriptâ€ï¼Œæœ€åé”€æ¯åŸæ¥çš„å­—ç¬¦ä¸²ã€‚ï¼ˆä¸åœ¨åŸå­—ç¬¦ä¸²ä¸Šä¿®æ”¹ï¼‰</span></span><br></pre></td></tr></table></figure></li></ul><h5 id="è½¬ä¸ºå­—ç¬¦ä¸²"><a href="#è½¬ä¸ºå­—ç¬¦ä¸²" class="headerlink" title="è½¬ä¸ºå­—ç¬¦ä¸²"></a>è½¬ä¸ºå­—ç¬¦ä¸²</h5><ul><li><p><code>toString()</code> å‡ ä¹æ¯ä¸ªå€¼éƒ½æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œ<code>null</code> å’Œ <code>undefined</code> å€¼æ²¡æœ‰ã€‚</p><ul><li>é€šå¸¸ä¸éœ€è¦å‚æ•°ã€‚</li><li>è°ƒç”¨æ•°å€¼çš„ <code>toString()</code> æ–¹æ³•æ—¶å¯ä»¥ä¼ é€’è¿›åˆ¶åŸºæ•°ä½œä¸ºå‚æ•°ã€‚</li></ul></li><li><p>ä¸çŸ¥é“æ˜¯ä¸æ˜¯ <code>null</code> æˆ– <code>undefined</code> çš„æ—¶å€™å¯ä»¥ä½¿ç”¨è½¬å‹å‡½æ•° <code>String()</code></p><ul><li>å¦‚æœå€¼æœ‰ <code>toString()</code> æ–¹æ³•ï¼Œè°ƒç”¨</li><li>å¦‚æœå€¼æ˜¯ <code>null</code>ï¼Œè¿”å› <code>&quot;null&quot;</code></li><li>å¦‚æœå€¼æ˜¯ <code>undefined</code>ï¼Œè¿”å› <code>&quot;undefined&quot;</code></li></ul></li><li><p><code>obj + &quot;&quot;</code> å’Œå­—ç¬¦ä¸²åŠ åœ¨ä¸€èµ·</p></li></ul><h3 id="Object-ç±»å‹"><a href="#Object-ç±»å‹" class="headerlink" title="Object ç±»å‹"></a>Object ç±»å‹</h3><ul><li>å¯¹è±¡æ˜¯ä¸€ç»„æ•°æ®å’ŒåŠŸèƒ½çš„é›†åˆã€‚<blockquote><p>åœ¨ ECMAScript ä¸­ï¼Œ<code>Object</code> ç±»å‹æ‰€å…·æœ‰çš„ä»»ä½•å±æ€§å’Œæ–¹æ³•ä¹ŸåŒæ ·å­˜åœ¨äºæ›´å…·ä½“çš„å¯¹è±¡ä¸­ã€‚<br><code>Object</code> çš„æ¯ä¸ªå®ä¾‹éƒ½å…·æœ‰ä¸‹åˆ—å±æ€§å’Œæ–¹æ³•ã€‚</p></blockquote></li><li><code>Constructor</code> æ„é€ å‡½æ•°</li><li><code>hasOwnProperty(propertyName)</code> æ£€æŸ¥ç»™å®šçš„å±æ€§åœ¨å½“å‰å¯¹è±¡å®ä¾‹ä¸­ï¼ˆè€Œä¸æ˜¯åœ¨å®ä¾‹çš„åŸå‹ä¸­ï¼‰æ˜¯å¦å­˜åœ¨ã€‚å‚æ•°ï¼ˆpropertyNameï¼‰ä¸ºå­—ç¬¦ä¸²</li><li><code>isProtorypeOf(object)</code> æ£€æŸ¥ä¼ å…¥çš„å¯¹è±¡æ˜¯å¦æ˜¯å¦ä¸€ä¸ªå¯¹è±¡çš„åŸå‹</li><li><code>propertyIsEnumerable(propertyName)</code> æ£€æŸ¥ç»™å®šçš„å±æ€§æ˜¯å¦èƒ½å¤Ÿä½¿ç”¨ for-in è¯­å¥ã€‚å‚æ•°ï¼ˆpropertyNameï¼‰ä¸ºå­—ç¬¦ä¸²</li><li><code>toLocaleString()</code> æ ¹æ®æœ¬åœ°è§„èŒƒè¿›è¡Œæ ¼å¼åŒ–</li><li><code>toString()</code> </li><li><code>valueOf()</code> é€šå¸¸è‡ªåŠ¨è°ƒç”¨</li></ul><blockquote><p>ä»æŠ€æœ¯è§’åº¦è®²ï¼ŒECMA-262 ä¸­å¯¹è±¡çš„è¡Œä¸ºä¸ä¸€å®šé€‚ç”¨äº JS ä¸­çš„å…¶ä»–å¯¹è±¡ã€‚å¦‚ BOM å’Œ DOM ä¸­çš„å¯¹è±¡å±äºå®¿ä¸»å¯¹è±¡ï¼Œå®¿ä¸»å¯¹è±¡å¯èƒ½ä¼šä¹Ÿå¯èƒ½ä¸ä¼šç»§æ‰¿ Objectã€‚</p></blockquote><h2 id="æ“ä½œç¬¦"><a href="#æ“ä½œç¬¦" class="headerlink" title="æ“ä½œç¬¦"></a>æ“ä½œç¬¦</h2><p>æ“ä½œç¬¦åº”ç”¨äºå¯¹è±¡æ—¶ï¼Œé€šå¸¸ä¼šè°ƒç”¨å¯¹è±¡çš„ <code>valueOf()</code> å’Œï¼ˆæˆ–ï¼‰<code>toString()</code> æ–¹æ³•ã€‚</p><h2 id="è¯­å¥"><a href="#è¯­å¥" class="headerlink" title="è¯­å¥"></a>è¯­å¥</h2><h3 id="for-in"><a href="#for-in" class="headerlink" title="for-in"></a>for-in</h3><p>æšä¸¾å¯¹è±¡çš„å±æ€§</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> propName <span class="keyword">in</span> <span class="built_in">window</span>) &#123;</span><br><span class="line">    <span class="built_in">document</span>.write(propName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å±æ€§æ²¡æœ‰é¡ºåºï¼Œæ‰€ä»¥å…ˆåé¡ºåºå› æµè§ˆå™¨è€Œå¼‚ã€‚</p><h3 id="label"><a href="#label" class="headerlink" title="label"></a>label</h3><p>ç±»ä¼¼ go to ä¸å»ºè®®ä½¿ç”¨</p><h3 id="with"><a href="#with" class="headerlink" title="with"></a>with</h3><p>ç®€åŒ–å¤šæ¬¡ç¼–å†™åŒä¸€ä¸ªå¯¹è±¡çš„å·¥ä½œ<br>å¤§é‡ä½¿ç”¨ with ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œä¸å»ºè®®ä½¿ç”¨</p><h3 id="switch"><a href="#switch" class="headerlink" title="switch"></a>switch</h3><p>æ¯”è¾ƒå€¼æ—¶ä½¿ç”¨å…¨ç­‰ <code>===</code></p><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><p>æœªæŒ‡å®šè¿”å›å€¼çš„å‡½æ•°è¿”å› <code>undefined</code></p><blockquote><p>å‡½æ•°è¦ä¹ˆå§‹ç»ˆè¿”å›ä¸€ä¸ªå€¼ï¼Œè¦ä¹ˆæ°¸è¿œéƒ½ä¸è¦è¿”å›å€¼ã€‚</p></blockquote><h3 id="ç†è§£å‚æ•°"><a href="#ç†è§£å‚æ•°" class="headerlink" title="ç†è§£å‚æ•°"></a>ç†è§£å‚æ•°</h3><ul><li>å‡½æ•°ä½“å†…é€šè¿‡ arguments å¯¹è±¡æ¥è®¿é—®å‚æ•°æ•°ç»„ã€‚</li><li>ECMAScript ä¸­çš„æ‰€æœ‰å‚æ•°ä¼ é€’çš„éƒ½æ˜¯å€¼ï¼Œä¸å¯èƒ½é€šè¿‡å¼•ç”¨ä¼ é€’å‚æ•°ã€‚<blockquote><p>è¯¦çœ‹ç¬¬å››ç«  â€”â€” ä¼ é€’å‚æ•°</p></blockquote></li></ul><h3 id="æ²¡æœ‰é‡è½½"><a href="#æ²¡æœ‰é‡è½½" class="headerlink" title="æ²¡æœ‰é‡è½½"></a>æ²¡æœ‰é‡è½½</h3><p>ä¸å­˜åœ¨å‡½æ•°ç­¾åçš„ç‰¹æ€§ï¼ŒECMAScript å‡½æ•°ä¸èƒ½é‡è½½<br>å®šä¹‰ä¸¤ä¸ªåå­—ç›¸åŒçš„å‡½æ•°ï¼Œä¼šè¢«åé¢å®šä¹‰çš„å‡½æ•°è¦†ç›–</p>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScripté«˜çº§ç¨‹åºè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬äºŒç«  åœ¨ HTML ä¸­ä½¿ç”¨ JavaScript</title>
      <link href="/2020/02/09/%E7%AC%AC2%E7%AB%A0-%E5%9C%A8%20HTML%20%E4%B8%AD%E4%BD%BF%E7%94%A8%20JavaScript/"/>
      <url>/2020/02/09/%E7%AC%AC2%E7%AB%A0-%E5%9C%A8%20HTML%20%E4%B8%AD%E4%BD%BF%E7%94%A8%20JavaScript/</url>
      
        <content type="html"><![CDATA[<h2 id="scriptå…ƒç´ "><a href="#scriptå…ƒç´ " class="headerlink" title="scriptå…ƒç´ "></a><code>script</code>å…ƒç´ </h2><h5 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h5><ul><li><p>src å¯é€‰ã€‚åŒ…å«è¦æ‰§è¡Œä»£ç çš„å¤–éƒ¨æ–‡ä»¶ã€‚</p><blockquote><p>å¦‚æœæœ‰ srcï¼Œæ ‡ç­¾å†…åµŒå…¥çš„ JavaScript ä»£ç ä¼šè¢«å¿½ç•¥<br>å¯ä»¥åŒ…å«æ¥è‡ªå¤–éƒ¨åŸŸçš„ JavaScript æ–‡ä»¶ã€‚è¿™ç‚¹ä¸ <code>img</code> ç›¸åŒ</p></blockquote></li><li><p>async å¯é€‰ã€‚ç«‹å³ä¸‹è½½è„šæœ¬ï¼Œä½†ä¸å¦¨ç¢é¡µé¢ä¸­å…¶ä»–æ“ä½œã€‚åªå¯¹å¤–éƒ¨è„šæœ¬æ–‡ä»¶æœ‰æ•ˆã€‚<strong>ä¸èƒ½ä¿è¯æŒ‰é¡ºåºæ‰§è¡Œã€‚ä¸è¦ä¿®æ”¹ DOM ä¼šåœ¨load äº‹ä»¶å‰æ‰§è¡Œï¼Œå¯èƒ½ä¼šåœ¨ <code>DOMContentLoaded</code> äº‹ä»¶è§¦å‘ä¹‹å‰æˆ–ä¹‹åæ‰§è¡Œã€‚</strong></p></li><li><p>defer å¯é€‰ã€‚å»¶è¿Ÿåˆ°æ–‡æ¡£å®Œå…¨è¢«è§£æå’Œæ˜¾ç¤ºä¹‹åï¼ˆ<code>/html</code>æ ‡ç­¾åï¼‰æ‰§è¡Œã€‚<strong>åªå¯¹å¤–éƒ¨è„šæœ¬æ–‡ä»¶æœ‰æ•ˆã€‚</strong>ï¼ˆåµŒå…¥è„šæœ¬çš„ defer å±æ€§ä¼šè¢«å¿½ç•¥ï¼‰<strong>å»¶è¿Ÿè„šæœ¬ä¸ä¸€å®šä¼šæŒ‰ç…§é¡ºåºæ‰§è¡Œï¼Œä¹Ÿä¸ä¸€å®šä¼šåœ¨ <code>DOMContentLoaded</code> äº‹ä»¶è§¦å‘å‰æ‰§è¡Œï¼Œå› æ­¤æœ€å¥½åªæœ‰ä¸€ä¸ªå»¶è¿Ÿè„šæœ¬ã€‚</strong></p><blockquote><p>åªè¦ä¸å­˜åœ¨ defer å’Œ async å±æ€§ï¼Œæµè§ˆå™¨éƒ½ä¼šæŒ‰ç…§ <code>scrip</code> å…ƒç´ åœ¨é¡µé¢ä¸­å‡ºç°çš„å…ˆåé¡ºåºè¿›è¡Œè§£æ</p></blockquote></li></ul><ul><li>type å¯é€‰ã€‚languageï¼ˆå·²åºŸå¼ƒï¼‰çš„æ›¿ä»£å±æ€§ï¼›è„šæœ¬è¯­è¨€çš„å†…å®¹ç±»å‹ï¼ˆMIME ç±»å‹ï¼‰ã€‚é»˜è®¤å€¼ text/javascript<blockquote><p>ä¸æ¨è text/javascript å’Œ text/ecmascript<br>æœåŠ¡å™¨åœ¨ä¼ é€ JavaScript æ–‡ä»¶æ—¶ä½¿ç”¨çš„ MIME ç±»å‹é€šå¸¸æ˜¯ application/x-javascript<br>é IE æµè§ˆå™¨ä¸­å¯ä»¥ä½¿ç”¨ application/javascript å’Œ application/ecmascript</p></blockquote></li><li>charset å¯é€‰ã€‚è¡¨ç¤ºé€šè¿‡ src å±æ€§æŒ‡å®šä»£ç çš„å­—ç¬¦é›†ã€‚å¤§å¤šæ•°æµè§ˆå™¨å¿½ç•¥</li></ul><h3 id="æ ‡ç­¾çš„ä½ç½®"><a href="#æ ‡ç­¾çš„ä½ç½®" class="headerlink" title="æ ‡ç­¾çš„ä½ç½®"></a>æ ‡ç­¾çš„ä½ç½®</h3><p>æ”¾åœ¨ <code>head</code> ä¸­å¿…é¡»å…ˆæŠŠ js ä»£ç ä¸‹è½½ã€è§£æå’Œæ‰§è¡Œå®Œæˆåæ‰èƒ½å¼€å§‹å‘ˆç°é¡µé¢å†…å®¹ï¼Œæ­¤æ—¶é¡µé¢ç©ºç™½ã€‚<br>æŠŠ js å¼•ç”¨æ”¾åœ¨ <code>body</code> ä¸­ï¼Œç©ºç™½æ—¶é—´ä¼šç¼©çŸ­ã€‚<br>æˆ–è€…è®¾ç½® defer å±æ€§ï¼Œç«‹å³ä¸‹è½½ï¼Œå»¶è¿Ÿï¼ˆ<code>/html</code>æ ‡ç­¾åï¼‰æ‰§è¡Œã€‚</p><h2 id="å¤–éƒ¨æ–‡ä»¶çš„ä¼˜ç‚¹"><a href="#å¤–éƒ¨æ–‡ä»¶çš„ä¼˜ç‚¹" class="headerlink" title="å¤–éƒ¨æ–‡ä»¶çš„ä¼˜ç‚¹"></a>å¤–éƒ¨æ–‡ä»¶çš„ä¼˜ç‚¹</h2><ul><li>å¯ç»´æŠ¤æ€§ï¼šé›†ä¸­ç²¾åŠ›ç¼–è¾‘ js ä»£ç </li><li>å¯ç¼“å­˜ï¼šå¦‚æœä¸¤ä¸ªé¡µé¢ä½¿ç”¨åŒä¸€ä¸ªæ–‡ä»¶ï¼Œåªéœ€ä¸‹è½½ä¸€æ¬¡</li><li>é€‚åº”æœªæ¥</li></ul><h2 id="æ–‡æ¡£æ¨¡å¼"><a href="#æ–‡æ¡£æ¨¡å¼" class="headerlink" title="æ–‡æ¡£æ¨¡å¼"></a>æ–‡æ¡£æ¨¡å¼</h2><p><code>!DOCTYPE html</code></p><h2 id="noscriptå…ƒç´ "><a href="#noscriptå…ƒç´ " class="headerlink" title="noscriptå…ƒç´ "></a><code>noscript</code>å…ƒç´ </h2><ul><li>æµè§ˆå™¨ä¸æ”¯æŒè„šæœ¬</li><li>æµè§ˆå™¨æ”¯æŒè„šæœ¬ï¼Œä½†è„šæœ¬è¢«ç¦ç”¨<br>ç¬¦åˆä¸Šè¿°æ¡ä»¶ï¼Œå…ƒç´ å†…å®¹ä¼šè¢«æ˜¾ç¤ºã€‚</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScripté«˜çº§ç¨‹åºè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬ä¸€ç«  JavaScript ç®€ä»‹</title>
      <link href="/2020/01/16/%E7%AC%AC1%E7%AB%A0-JavaScript%20%E7%AE%80%E4%BB%8B/"/>
      <url>/2020/01/16/%E7%AC%AC1%E7%AB%A0-JavaScript%20%E7%AE%80%E4%BB%8B/</url>
      
        <content type="html"><![CDATA[<p>ECMA-262â€”â€”å®šä¹‰ä¸€ç§åä¸º ECMAScript çš„æ–°è„šæœ¬è¯­è¨€çš„æ ‡å‡†<br>æµè§ˆå™¨å¼€å‘å•†å°† ECMAScript ä½œä¸ºå„è‡ª JavaScript å®ç°çš„åŸºç¡€</p><blockquote><p>JavaScript åŒ…æ‹¬ï¼š</p><ul><li>æ ¸å¿ƒï¼š ECMAScript</li><li>æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼š DOM</li><li>æµè§ˆå™¨å¯¹è±¡æ¨¡å‹ï¼š BOM</li></ul></blockquote><h3 id="ECMAScript"><a href="#ECMAScript" class="headerlink" title="ECMAScript"></a>ECMAScript</h3><ul><li>æ²¡æœ‰è¾“å…¥å’Œè¾“å‡ºå®šä¹‰</li><li>ECMA-262 å®šä¹‰äº† ECMAScript åŸºç¡€ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šå¯ä»¥æ„å»ºæ›´å®Œå–„çš„è„šæœ¬è¯­è¨€</li><li>å®¿ä¸»ç¯å¢ƒæä¾›åŸºæœ¬çš„ ECMAScript å®ç°ï¼Œä¹Ÿæä¾›è¯¥è¯­è¨€çš„æ‹“å±•ï¼Œä»¥ä¾¿è¯­è¨€å’Œç¯å¢ƒä¹‹é—´å¯¹æ¥äº¤äº’</li></ul><p>ECMA-262 æ ‡å‡†è§„å®šäº†</p><ul><li>è¯­æ³•</li><li>ç±»å‹</li><li>è¯­å¥</li><li>å…³é”®å­—</li><li>ä¿ç•™å­—</li><li>æ“ä½œç¬¦</li><li>å¯¹è±¡<br>ECMAScript å°±æ˜¯å¯¹å®ç°è¯¥æ ‡å‡†è§„å®šçš„å„ä¸ªæ–¹é¢å†…å®¹çš„è¯­è¨€çš„æè¿°<br>JavaScript å®ç°äº† ECMAScript<br>Adobe ActionScript ä¹Ÿå®ç°äº† ECMAScript<h6 id="ä»€ä¹ˆæ˜¯-ECMAScript-å…¼å®¹"><a href="#ä»€ä¹ˆæ˜¯-ECMAScript-å…¼å®¹" class="headerlink" title="ä»€ä¹ˆæ˜¯ ECMAScript å…¼å®¹"></a>ä»€ä¹ˆæ˜¯ ECMAScript å…¼å®¹</h6><blockquote><p>è¦æƒ³æˆä¸º ECMAScript çš„å®ç°ï¼Œå¿…é¡»åšåˆ°ï¼š</p><ul><li>æ”¯æŒ ECMA-262 æè¿°çš„æ‰€æœ‰â€œç±»å‹ã€å€¼ã€å¯¹è±¡ã€å±æ€§ã€å‡½æ•°ä»¥åŠç¨‹åºè¯­æ³•å’Œè¯­ä¹‰â€</li><li>æ”¯æŒ Unicode å­—ç¬¦æ ‡å‡†</li><li>å¯ä»¥è¿›è¡Œæ‹“å±•ï¼š<ul><li>æ·»åŠ  ECMA-262 æ²¡æœ‰æè¿°çš„â€œæ›´å¤šç±»å‹ã€å€¼ã€å¯¹è±¡ã€å±æ€§å’Œå‡½æ•°â€ã€‚ä¸»è¦æŒ‡æ–°å¯¹è±¡å’Œå¯¹è±¡çš„æ–°å±æ€§</li><li>æ”¯æŒ ECMA-262 æ²¡æœ‰å®šä¹‰çš„â€œç¨‹åºå’Œæ­£åˆ™è¡¨è¾¾å¼è¯­æ³•â€ã€‚å³å¯ä»¥ä¿®æ”¹å’Œæ‹“å±•å†…ç½®çš„æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•</li></ul></li></ul><p>ä¸ºå¼€å‘äººå‘˜åŸºäº ECMAScript å¼€å‘ä¸€é—¨æ–°è¯­è¨€æä¾›äº†å¹¿é˜”çš„ç©ºé—´å’Œæå¤§çš„çµæ´»æ€§</p></blockquote></li></ul><h3 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h3><p>DOMï¼ˆDocument Object Modelï¼‰æ˜¯é’ˆå¯¹ XML ä½†ç»è¿‡æ‹“å±•ç”¨äº HTML çš„ APIï¼ˆApplication Programming Interfaceï¼‰</p><ul><li>W3C åˆ¶å®šäº† DOM æ ‡å‡†</li><li>DOM ä¸æ­¢é’ˆå¯¹ JavaScriptï¼Œå¾ˆå¤šåˆ«çš„è¯­è¨€ä¹Ÿå®ç°äº† DOM</li><li>DOM åŒ…æ‹¬ DOM æ ¸å¿ƒå’Œ DOM HTML<ul><li>DOM æ ¸å¿ƒè§„å®šå¦‚ä½•æ˜ å°„åŸºäº XML çš„æ–‡æ¡£ç»“æ„</li><li>DOM HTML æ¨¡å—åˆ™åœ¨ DOM æ ¸å¿ƒ çš„åŸºç¡€ä¸Šæ·»åŠ äº†é’ˆå¯¹ HTML çš„å¯¹è±¡å’Œæ–¹æ³•</li></ul></li></ul><p>é™¤äº† DOM æ ¸å¿ƒå’Œ DOMHTML æ¥å£ä¹‹å¤–ï¼Œå¦å¤–å‡ ç§è¯­è¨€å‘å¸ƒäº†åªé’ˆå¯¹è‡ªå·±çš„ DOM æ ‡å‡†ã€‚ä»¥ä¸‹è¯­è¨€éƒ½æ˜¯åŸºäº XML çš„ï¼Œæ¯ç§è¯­è¨€çš„ DOM æ ‡å‡†éƒ½æ·»åŠ äº†ä¸ç‰¹å®šè¯­è¨€ç›¸å…³çš„æ–°æ–¹æ³•å’Œæ–°æ¥å£ï¼š</p><ul><li>SVG(Scalable Vector Graphic)</li><li>MathMLï¼ˆMathematical Markup Languageï¼‰</li><li>SMILï¼ˆSynchronized Multimedia Integration Languageï¼‰<h3 id="BOM"><a href="#BOM" class="headerlink" title="BOM"></a>BOM</h3>å¼€å‘äººå‘˜ä½¿ç”¨ BOMï¼ˆBrowser Object Modelï¼‰æ§åˆ¶æµè§ˆå™¨æ˜¾ç¤ºçš„é¡µé¢ä»¥å¤–çš„éƒ¨åˆ†<br>BOM ä½œä¸º JavaScript å®ç°çš„ä¸€éƒ¨åˆ†å´æ²¡æœ‰ç›¸å…³çš„æ ‡å‡†ã€‚H5 è‡´åŠ›äºæŠŠå¾ˆå¤š BOM åŠŸèƒ½å†™å…¥æ­£å¼è§„èŒƒã€‚<br>æ ¹æœ¬ä¸Šè®²ï¼ŒBOM åªå¤„ç†æµè§ˆå™¨çª—å£å’Œæ¡†æ¶ï¼›ä½†ä¹ æƒ¯ä¸ŠæŠŠæ‰€æœ‰é’ˆå¯¹æµè§ˆå™¨çš„ JavaScript æ‰©å±•ç®—ä½œ BOM çš„ä¸€éƒ¨åˆ†ã€‚</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScripté«˜çº§ç¨‹åºè®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
