---
title: 面试准备：数组
date: 2020-08-05 14:10:37
tags: [JavaScript, 面试]
---

## 1、数组去重

* 最笨的办法双层 for 循环
* 先排序，相邻比较

### 1.1、indexOf

> ```js
> arr.indexOf(searchElement[, fromIndex])
> ```
>
> `indexOf()`方法返回在数组中可以找到一个给定元素的第一个索引
>
> 如果不存在，则返回 -1

```js
function unique(arr) {
  let result = [];
  for (let i = 0; i < arr.length; i++) {
    if (result.indexOf(arr[i]) === -1) {
      result.push(arr[i]);
    }
  }
  return result;
}
```

### 1.2、includes

```js
function unique(arr) {
  let result = [];
  for (let i = 0; i < arr.length; i++) {
    if (!result.includes(arr[i])) {
      result.push(arr[i])
    }
  }
  return result;
}
```

### 1.3、reduce

```js
function unique(arr) {
  return arr.reduce(function(pre, cur) {
    return pre.includes(cur) ? pre : [...pre, cur]
  }, [])
}
```

### 1.4、Map

```js
function unique(arr) {
  let result = [];
  let map = new Map();
  for (let i = 0; i < arr.length; i++) {
    if (!map.has(arr[i])) {
      map.set(arr[i]);
      result.push(arr[i]);
    }
  }
  return result;
}
```

### 1.5、Set

```js
function unique(arr) {
  return [...new Set(arr)];
  // Array.from(new Set(arr))
}
```

* 为什么要搭配扩展运算符和 Array.from？
	* Set 返回的是一个类数组对象
* 什么是类数组对象？
	* 可以**通过索引属性访问元素**并且**拥有 length** 属性的对象
	* 区别：**类数组对象不能直接使用数组的方法**
	* 可以通过 `Function.call` 或者 `Function.apply` 方法来间接调用
		* 例如 `Array.prototype.push.call()`
	* arguments
	* document.getElementsXXX()

## 2、判断数组

| 方法                                                   | 描述                                                         |
| ------------------------------------------------------ | ------------------------------------------------------------ |
| arr instanceof Array                                   | 检测构造函数的 prototype 是否出现在对象的原型链中            |
| Array.isArray(arr)                                     |                                                              |
| Object.prototype.toString.call(arr)==="[object Array]" | 对象都有内部属性 `[[Class]]` 表示对象的分类，无法直接访问，通过 **Object.prototype.toString()**访问，但一般 `toString` 都被重写了，所以需要 `call` |
| arr.constructor === Array                              |                                                              |



 